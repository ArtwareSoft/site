/*
 * jBart - Packaged at 01-04-2013-06-31
 * Copyright (c) 2011 ArtwareSoft Ltd
 * The software is distributed under the GPL license
 * For commercial use we advice to use our commercial license
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

*/
var ajaxart_capture_top="";var ajaxart_capture_mode="";var ajaxart_capture_onselect=null;var ajaxart_captured_element=jQuery([]);var ajaxart_capture_box=null;var ajaxart_capture_box_add=null;var ajaxart_capture_box_drop=null;var ajaxart_drag=false;var ajaxart_dragged=null;ajaxart.gcs.aaeditor={IsMultipleObject:function(b,d,a){if(ajaxart.run(d,b,"Value",a).length>1){return[true]}return[]},ClearCaptureBox:function(a,b,d){if(ajaxart_capture_box!=null){ajaxart_capture_box.hide()}if(ajaxart_capture_box_add!=null){ajaxart_capture_box_add.hide()}if(ajaxart_capture_box_drop!=null){ajaxart_capture_box_drop.hide()}jQuery("."+ajaxart_capture_top+" .placeholder_toadd_control").css("height","0px").css("background","none").css("border","0px solid #CCCCCC");return["true"]},ClearCaches:function(b,d,a){window.aa_search_comp_of_type_cache=null;window.ajaxart_comp_of_type_cache=null;jBart.vars.compsOfTypeCache={}},CaptureSelect:function(b,d,a){ajaxart_capture_mode=aa_text(d,b,"Mode",a);ajaxart_capture_top=aa_text(d,b,"Top",a);if(ajaxart_capture_mode=="add"){jQuery("."+ajaxart_capture_top).addClass("aaeditor_addcontrol");jQuery("."+ajaxart_capture_top+" .placeholder_toadd_control").css("height","7px")}ajaxart_captured_element=jQuery([]);if(window.captureEvents){window.onclick=ajaxart_capture_click;window.onmousemove=ajaxart_capture_mousemove;window.onkeydown=ajaxart_capture_keydown}else{document.onclick=ajaxart_capture_click;document.onmousemove=ajaxart_capture_mousemove;document.onkeydown=ajaxart_capture_keydown}ajaxart_capture_onselect=function(h){jQuery("."+ajaxart_capture_top).removeClass("aaeditor_addcontrol");if(h==null){ajaxart.gcs.aaeditor.ClearCaptureBox();return}var g={isObject:true};if(ajaxart_drag){ajaxart_drag=false;var f=h;while(!("ajaxart" in f)&&f!=null){f=f.parentNode}g.TargetParent=[f];g.TargetPosition=[""+(ajaxart.aaeditor.getPlaceholderPosition(h)+0)];g.Dragged=ajaxart_dragged;ajaxart.gcs.aaeditor.ClearCaptureBox();ajaxart.run([g],b,"OnDrop",a);return}if(ajaxart_capture_mode=="add"){var f=h;while(!("ajaxart" in f)&&f!=null){f=f.parentNode}g.ParentElement=[f];g.Position=[""+ajaxart.aaeditor.getPlaceholderPosition(h)]}else{g=h}ajaxart.run([g],b,"OnSelect",a)};return[]},InPreview:function(b,d,a){ajaxart.inPreviewMode=true;var f=ajaxart.run(d,b,"Control",a);ajaxart.inPreviewMode=false;return f},ProbeXtmlNew:function(f,g,b){var a=aa_first(g,f,"Xtml",b);var h=aa_text(g,f,"Param",b);if(!a||!h){return[]}var d=aadt_calcPrimitivePreviewContext(a,h,b);return d||[]},ProbeFieldData:function(d,f,b){var a=aa_first(f,d,"FieldXtml",b);return aadt_calcPrimitivePreviewContext(a,"",b,{probeFieldData:true})||[]},CalculateTopCircuit:function(f,g,d){var a=aa_first(g,f,"Xtml",d);if(!a){return[]}var b=bart_find_top_circuit(a,d);if(b){return[b]}b=aaeditor_find_top_circuit(a,d);if(b){return[b]}return[]},CalcLocalPreviewData:function(d,h,g){if(ajaxart.xtmls_to_trace.length>0){ajaxart.log("trying to run tester during tester","warning");return[]}var l=ajaxart.run(h,d,"State",g);if(ajaxart.isObject(l)){var a=l[0];var n=aa_bool(h,d,"ReturnAll",g);var s=a.SelectedInTree[0];if(!ajaxart.isObject(s)){return[]}var m=s.Xtml;if(!m||((!ajaxart.isxml(m))&&m.length>0)){return[]}var r=false;var o=false;if(m.length==0){var p=ajaxart.totext(s.Field);var q=s.ParentXtml;if(p.indexOf("[+]")>-1){m=q;if(q.length>0&&q[0].getAttribute("t")=="data.Pipeline"){o=true}}else{if(p==""||p.indexOf("[")>-1||(!ajaxart.isxml(q))){return[]}if(p=="name"){return[]}q=q[0];r=true;if(q.getAttribute(p)==null){q.setAttribute(p,"")}m=ajaxart.xml.xpath(q,"@"+p)}}aadt_putXtmlTraces(m[0]);if(ajaxart.xtmls_to_trace.length==0){return[]}ajaxart.trycatch(function(){ajaxart.inPreviewMode=true;var v=null;if(ajaxart.subprofiles(d,"MainCircuitRunner").length>0){v=ajaxart.run(h,d,"MainCircuitRunner",g)}else{var w=a.TreeXtml;if(w.length==0){return[]}w=w[0];var u=[];if("input" in w){u=w.input}var y=w.context;if(y==null){y=ajaxart.newContext()}v=ajaxart.run(u,w.script,"",y);if(ajaxart.component_exists(w.script.getAttribute("t")+"_Preview")){ajaxart.setVariable(y,"Preview",[{isObject:true,Output:v}]);aa_run_component(w.script.getAttribute("t")+"_Preview",[],y)}}});var t=[];ajaxart.trycatch(function(){if(ajaxart.xtmls_to_trace[0].results.length>0){t=ajaxart.xtmls_to_trace[0].results}else{t=aaeditor.find_preview_context_over_gap()}},function(u){});ajaxart.xtmls_to_trace=[];ajaxart.inPreviewMode=false;if(r&&q.getAttribute(p)==""){q.removeAttribute(p)}if(o&&t.length>0){t[0].Input=t[0].Output}if(t[0]&&t[0].Output&&t[0].Output.length==0&&t[0].context.vars._AsyncIsQuery){var b={isObject:true,_isAsyncObject:true,_callback:function(){}};var f=function(u){if(!t[0].context.vars._AsyncCallback){t[0].context.vars._AsyncCallback={}}t[0].context.vars._AsyncCallback.callBack=function(w,v){u._callback(w,v)}};f(b);t[0].Output=[b]}return t}return[]},SimulateRunningContextForPreview:function(b,d,a){ajaxart.aaeditor.current_running_context_for_preview={isObject:true};ajaxart.aaeditor.current_running_context_for_preview.Input=d;ajaxart.aaeditor.current_running_context_for_preview.context=a;return d},AsyncObjectControl:function(d,f,b){var a=jQuery("<div>Please wait for async result..</div>")[0];f[0]._callback=function(h,g){a.innerHTML="";a.appendChild(ajaxart.runNativeHelper(h,d,"ShowSync",b)[0])};return[a]},HowLong:function(d,l,b){var h=aa_first(l,d,"Usage",b);if(h==null){return[]}var g=new Date().getTime();ajaxart.run([],h,"",b);var f=new Date().getTime()-g;var a=ajaxart.getControlElement(b,true);jQuery(a).append("time: "+f+"ms<br/>");return[]},ProfileGlobals:function(d,g,a){var m=aa_first(g,d,"Usage",a);if(m==null){return[]}var n=new Date().getTime();ajaxart.profiling_of_globals=[];ajaxart.run([],m,"",a);var b=new Date().getTime()-n;var l='<profile total="'+b+'">';for(var h in ajaxart.profiling_of_globals){l+='<comp id="'+h+'" calls="'+ajaxart.profiling_of_globals[h].calls+'" total="'+ajaxart.profiling_of_globals[h].total+'" />'}l+="</profile>";var f=ajaxart.run([l],ajaxart.parsexml('<Control t="debugui.GlobalProfilingResult" />'),"",ajaxart.newContext());jQuery("#ajaxart_top").append(f[0]);var f=ajaxart.getControlElement(a,true);jQuery(f).append(f[0]);return[]},ComponentTitle:function(b,d,a){return[aa_component_title(d)]},XmlElementInTree:function(d,g,a){if(g.length==0){return[]}var m=g[0];var f=document.createElement("SPAN");if(m.nodeType==2){jQuery(f).text(m.nodeValue+" ("+m.nodeName+")");return[f]}var l=document.createElement("SPAN");jQuery(l).text(m.tagName);l.className="xml_element";f.appendChild(l);for(var h=0;h<m.attributes.length;h++){var b=m.attributes[h].nodeValue;if(b!=""){var o=document.createElement("SPAN");jQuery(o).text(m.attributes.item(h).name+"=");o.className="xml_att";f.appendChild(o);var n=document.createElement("SPAN");jQuery(n).text(b);n.className="xml_att_value";f.appendChild(n)}}return[f]},DynamicTextOpenPart:function(b,f,a){var m=ajaxart.totext(f);if(m==null){return[]}if(aa_text(f,b,"Type",a)=="%"){var h=0;var g=-1;for(i=0;i<m.length;i++){if(m.charAt(i)=="%"){if(i==0||m.charAt(i-1)!="\\"){h++;g=i}}}if(h%2==0){return[]}var d=m.substring(g+1);if(d==""){return["__EMPTY"]}return[d]}else{var l=m.lastIndexOf("{");if(l==-1){return[]}var n=m.substring(l+1);if(n.indexOf("}")!=-1){return[]}if(n==""){return["__EMPTY"]}return[n]}},CalculatePrimitiveInnerParts:function(d,g,a){var o=aa_text(g,d,"Text",a);var p=aa_first(g,d,"Context",a);var b=ajaxart.run(g,d,"Input",a);if(p==null){return[]}var l=false;var h=0;while(true){if(h>=o.length){break}if(o.charAt(h)=="%"&&(h==0||o.charAt(h-1)!="\\")){l=!l}if(o.charAt(h)=="{"&&l){var n=o.indexOf("}",h);if(n!=-1){var f=o.substring(h+1,n);var m=ajaxart.totext(ajaxart.dynamicText(b,"%"+f+"%",p));o=o.substring(0,h)+m+o.substring(n+1);h=n}}h++}return[o]},EditPrimitiveHalfWrittenPart:function(b,d,a){var f=ajaxart.totext(d);var g=0;if(f.lastIndexOf("/")>g){g=f.lastIndexOf("/")}if(f.lastIndexOf("{")>g){g=f.lastIndexOf("{")}if(f.lastIndexOf("%")>g){g=f.lastIndexOf("%")}if(f.lastIndexOf("$")>g){g=f.lastIndexOf("$")}if(f.lastIndexOf("[")>g){g=f.lastIndexOf("[")}if(g<f.length){return[f.substring(g+1)]}else{return[]}},RegisterForToolbarKeyboard:function(b,d,a){if(document.aaeditorRegistered){return}document.aaeditorRegistered=true;jQuery(document).keyup(function(g){if(g.keyCode==83&&g.shiftKey&&g.ctrlKey){if(jQuery(".aaeditor_customize")==null){return}var f=jQuery(".aaeditor_customize")[0];aa_run_component("aaeditor.SaveToServerAction",[],f.ajaxart.params)}});return[]},ComponentsOfTypeNew:function(g,D,d){var p=(d.vars._WidgetXml)?aa_totext(aa_xpath(d.vars._WidgetXml[0],"@plugins")):"";var h=aa_text(D,g,"Type",d);var w=aa_bool(D,g,"LightOnly",d);var C="cache_"+p;if(w){C+="_light"}if(!jBart.vars.compsOfTypeCache){jBart.vars.compsOfTypeCache={}}if(!jBart.vars.compsOfTypeCache[C]){jBart.vars.compsOfTypeCache[C]={};var o=jBart.vars.compsOfTypeCache[C];var b={};var v="jbart";try{if(d.vars._BartContext){v=aa_totext(d.vars._BartContext[0].StyleGuide.ID)}}catch(y){}var B=","+p+",";for(var u in ajaxart.components){for(var r in ajaxart.components[u]){var A=ajaxart.components[u][r];var f=A.getAttribute("styleGuide")==v;if(A.getAttribute("hidden")=="true"){continue}if(w&&A.getAttribute("light")=="false"){continue}if(w&&A.parentNode&&A.parentNode.getAttribute("light")=="false"){continue}var l=A.parentNode.getAttribute("plugin");if(l&&B.indexOf(","+l+",")==-1){continue}var m=(A.getAttribute("type")||"").split(",");for(var n=0;n<m.length;n++){if(m[n].split(".").length>2){m.push(m[n].substring(0,m[n].lastIndexOf(".")))}}for(var n in m){var q=m[n];if(q==""){continue}if(!o[q]){o[q]=[]}if(!b[q]){b[q]=[]}var z={ID:u+"."+r,Definition:A};if(f){b[q].push(z)}else{o[q].push(z)}}}}for(var q in b){var a=b[q];if(a.lenth==0){continue}o[q]=a.concat(o[q])}}if(aa_bool(D,g,"ForAllTypes",d)){if(!jBart.vars.compsOfTypeCache[C][h+"_*"]){var s=[];ajaxart.concat(s,jBart.vars.compsOfTypeCache[C][h]);ajaxart.concat(s,jBart.vars.compsOfTypeCache[C]["*"]);jBart.vars.compsOfTypeCache[C][h+"_*"]=s}return jBart.vars.compsOfTypeCache[C][h+"_*"]}return jBart.vars.compsOfTypeCache[C][h]},ComponentsOfType:function(d,y,b){if(!window.aa_search_comp_of_type_cache){aa_search_comp_of_type_cache={};ajaxart_comp_of_type_advanced_cache={};var n=aa_isjbart()&&!b.vars._ShowNonJBartComponents;for(var s in ajaxart.components){var g=false;if(s.lastIndexOf("_dt")==s.length-3&&s.length>3||s=="aaeditor"){g=true}for(var r in ajaxart.components[s]){var v=ajaxart.components[s][r];if(v.getAttribute("hidden")=="true"){continue}if(n&&v.parentNode.getAttribute("jbart")!="true"){continue}if(n&&v.getAttribute("jbart")=="false"){continue}var l=(v.getAttribute("type")||"").split(",");for(var q=0;q<l.length;q++){if(l[q].split(".").length>2){l.push(l[q].substring(0,l[q].lastIndexOf(".")))}}var p=v.getAttribute("category");if(p){l.push(l[0]+"."+p)}for(var m in l){f=l[m];if(!f){continue}if(!g){if(aa_search_comp_of_type_cache[f]==null){aa_search_comp_of_type_cache[f]=[]}var v=""+s+"."+r;aa_search_comp_of_type_cache[f].push({comp:v,lower:v.toLowerCase()})}else{if(aa_search_comp_of_type_cache[f]==null){aa_search_comp_of_type_cache[f]=[]}var v=""+s+"."+r;aa_search_comp_of_type_cache[f].push({comp:v,lower:v.toLowerCase()})}}if(aa_search_comp_of_type_cache["*"]==null){aa_search_comp_of_type_cache["*"]=[]}aa_search_comp_of_type_cache["*"].push(""+s+"."+r)}}}var f=aa_text(y,d,"Type",b);if(f.lastIndexOf("[]")>-1&&f.lastIndexOf("[]")==f.length-2){f=f.substring(0,f.length-2)}if(f=="enum"||f=="dynamic_enum"||f=="dynamic_enum_multi"){f="data.Data"}var u=aa_search_comp_of_type_cache[f];if(aa_bool(y,d,"IncludeAdvancedComponents",b)){ajaxart.concat(u,ajaxart_comp_of_type_advanced_cache[f])}if(aa_bool(y,d,"ForAllTypes",b)){ajaxart.concat(u,ajaxart_comp_of_type_advanced_cache[f]);ajaxart.concat(u,aa_search_comp_of_type_cache["*"])}if(u==null){u=[]}var w=aa_text(y,d,"TextFilter",b).toLowerCase().replace(" ","");if(w!=""){var o=[];var a=[];for(s in u){if(u[s].lower&&u[s].lower.indexOf(w)>=0){var h=u[s].lower.lastIndexOf(w);if(h>0&&u[s].lower[h-1]=="."){a.push(u[s].comp)}else{o.push(u[s].comp)}}}a.sort(function(z,t){return z.length-t.length});u=a.concat(o)}else{var o=[];for(s in u){o.push(u[s].comp)}u=o}return u}};aa_gcs("xmltree",{ItemTextHtmlForXmlElement:function(d,m,b){var q=aa_attach_global_css(aa_text(m,d,"TagCss",b),null,"xmltag");var h=aa_attach_global_css(aa_text(m,d,"AttributeNameCss",b),null,"xmlattr");var l=aa_attach_global_css(aa_text(m,d,"ValueCss",b),null,"xmlattrvalue");var n=m[0];var f=jQuery("<span/>");function u(){ajaxart.run(this.jbData||m,d,"OnClick",aa_ctx(b,{ControlElement:[this],_CurrentFocus:[this]}))}var o="";for(var r=n.firstChild;r!=null;r=r.nextSibling){if(r.nodeType==3){o+=r.nodeValue}}o=o.replace(/\s/g,"");var v=jQuery("<span/>").text(n.tagName).addClass(q);v[0].onclick=u;f.append(v);if(o){v.text(n.tagName+"=");var s=jQuery("<span/>").text(o).addClass(l);s[0].onclick=u;f.append(s)}var t=n.attributes;for(var g=0;g<t.length;g++){var a=t.item(g).nodeName;var p=jQuery("<span/>").text(a+"=").addClass(h);f.append(p);var s=jQuery("<span/>").text(n.getAttribute(a)).addClass(l);f.append(s);p[0].jbData=[t.item(g)];s[0].jbData=[t.item(g)];s[0].onclick=u;p[0].onclick=u}return f.get()}});ajaxart.aaeditor={};aaeditor={};aaeditor.record_inputs_end=function(f,d,b){if(f.keyCode==121&&f.ctrlKey==true){if(window.captureEvents){window.onkeydown=null}else{document.onkeydown=null}if(ajaxart.xtmls_to_trace.length!=1){ajaxart.log("aaeditor.record_inputs - someone else had used xtmls_to_trace during recording");return[]}var a=ajaxart.xtmls_to_trace[0].results;ajaxart.xtmls_to_trace=[];ajaxart.run(a,d,"OnFinishRecord",b)}};aaeditor.find_preview_context_over_gap=function(){var o=0;while(o<ajaxart.xtmls_to_trace.length){if(ajaxart.xtmls_to_trace[o].results.length>0){break}o++}if(o==ajaxart.xtmls_to_trace.length){return[]}var b=ajaxart.xtmls_to_trace[o].results[0];for(var l=o;l>=0;l--){if(!ajaxart.xtmls_to_trace[l].xtml){continue}var m=aaeditor.type_of_xtml(ajaxart.xtmls_to_trace[l].xtml);if(l==0){if(m!="action.Action"&&m!="action.Action"&&m!="action_async.Action"&&m!="xml.Change"&&ajaxart.xtmls_to_trace[l].xtml){b.Output=ajaxart.run(b.Input,ajaxart.xtmls_to_trace[l].xtml,"",b.context)}return[b]}var f=ajaxart.xtmls_to_trace[l].xtml;var d=ajaxart.xtmls_to_trace[l-1].xtml;var h=(d.nodeType==1)?aa_tag(d):d.nodeName;var n=aa_component_param_def(f.getAttribute("t"),h);if(ajaxart.xtmls_to_trace[l].fieldData){b.Input=ajaxart.xtmls_to_trace[l].fieldData;continue}if(n!=null&&(n.getAttribute("RunningInput")!=null||ajaxart.childElem(n,"RunningInput")!=null)){b.Input=ajaxart.run(b.Input,n,"RunningInput",aa_ctx(b.context,{_Xtml:[f]}));continue}if(l!=o&&m!="action.Action"&&m!="action.Action"&&m!="action_async.Action"&&m!="xml.Change"&&m!="ui.WritableAddItem"){var g=ajaxart.xtmls_to_trace;ajaxart.xtmls_to_trace=[{xtml:ajaxart.xtmls_to_trace[0].xtml,results:[]}];ajaxart.run(b.Input,f,"",b.context);if(ajaxart.xtmls_to_trace[0].results.length>0){return ajaxart.xtmls_to_trace[0].results}ajaxart.xtmls_to_trace=g}ajaxart.aaeditor.current_running_context_for_preview=null;var a=ajaxart.xml.clone([ajaxart.xtmls_to_trace[l].xtml]);a.setAttribute("t","aaeditor.SimulateRunningContextForPreview");b.Input=ajaxart.run(b.Input,a,"",b.context);if(ajaxart.aaeditor.current_running_context_for_preview==null){return[]}b=ajaxart.aaeditor.current_running_context_for_preview}return[]};aaeditor.type_of_xtml=function(g){var m;if(g.nodeType==2){m=g.nodeName}if(g.nodeType==1||m=="value"){m=g.tagName}var a=ajaxart.xml.parentNode(g);if(a==null){if(g.nodeType==2){return"data.Data"}var q=g.getAttribute("t");if(q==null){return"data.Data"}var h=q.indexOf(".");var p=q.substring(0,h);var o=q.substr(h+1);if(typeof(ajaxart.components[p])=="undefined"){if(p!=""&&q!=""){ajaxart.log("plugin "+p+" is not defined. trying to use component "+q,"error")}return"data.Data"}var d=ajaxart.components[p][o];return d.getAttribute("type")}if(g.tagName=="xtml"&&a.tagName=="Component"){return a.getAttribute("type")}if(a.getAttribute("t")==null&&ajaxart.xml.parentNode(a)!=null){a=ajaxart.xml.parentNode(a)}if(a.getAttribute("t")==null){ajaxart.log("type_of_xtml_element - problem")}if(a.getAttribute("t")==null){return"data.Data"}var l=a.getAttribute("t").split(".");var n=ajaxart.components[l[0]][l[1]];var f=ajaxart.xml.xpath(n,"Param[@name='"+m+"']/@type");if(f.length==0){return"data.Data"}var b=f[0].nodeValue;if(b.indexOf("[]")!=-1){return b.substring(0,b.indexOf("[]"))}return b};function ajaxart_capture_mousemove(g){var b=(typeof event!=="undefined")?event.srcElement:g.target;var f=jQuery(b).parents("."+ajaxart_capture_top).length>0;if(!f){return}if(ajaxart_drag){ajaxart_dragmove(b);return}if(ajaxart_capture_mode=="add"){if(!jQuery(b).hasClass("placeholder_toadd_control")){return}ajaxart_captured_element=jQuery(b);if(ajaxart_capture_box_add==null){ajaxart_capture_box_add=jQuery('<div class="capturebox_add right2left" style="z-index:500"></div>');ajaxart_capture_box_add.appendTo("body")}var h=b.getAttribute("ajaxart_type").split(".")[1];ajaxart_capture_box_add.html("add "+h);ajaxart_capture_box_add.css("left",aa_absLeft(b)-2);ajaxart_capture_box_add.css("top",aa_absTop(b)-2);ajaxart_capture_box_add.width(jQuery(b).outerWidth());ajaxart_capture_box_add.show();return}var d=ajaxart.incmsart;var l=false;while(b!=null&&!l){if("ajaxart" in b&&b.ajaxart.script!=null){if(d){var m=ajaxart.xml.root(b.ajaxart.script);if(m.tagName=="xtml"){l=false}else{l=true}}else{l=true}}if(!l){b=b.parentNode}}if(b==null||ajaxart_captured_element.length>0&&ajaxart_captured_element[0]==b){return}ajaxart_captured_element=jQuery(b);if(ajaxart_capture_box==null){ajaxart_capture_box=jQuery('<div class="capturebox" ><div class="top"> <div class="captureboxtext"></div> </div><div class="right"/><div class="bottom"/><div class="left"/></div>');ajaxart_capture_box.appendTo("body")}jQuery(ajaxart_capture_box).find(".captureboxtext").html(b.ajaxart.script.getAttribute("t").split(".")[1]);var n={x:aa_absLeft(b),y:aa_absTop(b)};var a=jQuery(b).outerWidth();var o=jQuery(b).outerHeight();jQuery(ajaxart_capture_box).find(".top").css("left",n.x-2).css("top",n.y-2).width(a+4);jQuery(ajaxart_capture_box).find(".bottom").css("left",n.x-2).css("top",n.y-2+o).width(a+4);jQuery(ajaxart_capture_box).find(".left").css("left",n.x-2).css("top",n.y-2).height(o+2);jQuery(ajaxart_capture_box).find(".right").css("left",n.x-2+a).css("top",n.y-2).height(o+2);ajaxart_capture_box.height(jQuery(b).outerHeight());ajaxart_capture_box.width(jQuery(b).outerWidth());ajaxart_capture_box.show()}function ajaxart_capture_keydown(a){if(a.keyCode==27){ajaxart_stop_capture();ajaxart_captured_element=jQuery([]);ajaxart_capture_onselect(null)}}function ajaxart_capture_move(a){if(ajaxart_drag){ajaxart_capture_mousemove(a)}}function ajaxart_dragmove(a){if(!jQuery(a).hasClass("placeholder_toadd_control")){return}ajaxart_captured_element=jQuery(a);if(ajaxart_capture_box_drop==null){ajaxart_capture_box_drop=jQuery('<div class="capturebox_add"></div>');ajaxart_capture_box_drop.appendTo("body")}ajaxart_capture_box_drop.css("left",elem_pos.x-2);ajaxart_capture_box_drop.css("top",elem_pos.y-2);ajaxart_capture_box_drop.width(jQuery(a).outerWidth());ajaxart_capture_box_drop.show()}function ajaxart_stop_capture(){if(window.captureEvents){window.captureEvents(Event.Click);window.onclick=null;window.onmousemove=null;window.onkeydown=null}else{document.onclick=null;document.onmousemove=null;document.onkeydown=null}}function ajaxart_capture_click(a){if(ajaxart_captured_element.length==0){return}ajaxart_stop_capture();var b=ajaxart_captured_element[0];ajaxart_captured_element=jQuery([]);ajaxart_capture_onselect(b)}ajaxart.aaeditor.current_running_context_for_preview=null;ajaxart.aaeditor.getPlaceholderPosition=function(a){var f=0;var b=a.parentNode;var d=b.firstChild;while(d!=null){if(d.nodeType==1&&jQuery(d).hasClass("placeholder_toadd_control")){if(d==a){return f}f++}d=d.nextSibling}return f};function aaeditor_find_top_circuit(a,d){var b={isObject:true};b.RunCircuit=function(){var h=aaeditor.type_of_xtml(a);var g=(h!="action.Action"&&h!="action.Action"&&h!="action_async.Action"&&h!="xml.Change"&&h!="ui.WritableAddItem");var f=[];if(g){f=ajaxart.run([],a,"",d)}else{for(i in ajaxart.xtmls_to_trace){if(a==ajaxart.xtmls_to_trace[i].xtml){ajaxart.fill_trace_result(ajaxart.xtmls_to_trace[i].results,[],f,d,[])}}}return f};b.GlobalPreview=function(){var f=this.RunCircuit();if(ajaxart.ishtml(f)){return f}else{return[jQuery("<span/>").text(ajaxart.totext_array(f))[0]]}};return b}function aa_component_title(d){var b=ajaxart.totext(d);if(b==""){return[""]}var a=b.split(".");if(a.length<2){return[]}if(a[0]=="data"||a[0]=="ui"||a[0]=="yesno"||a[0]=="action"){return aa_text_capitalizeToSeperateWords(a[1])}return aa_text_capitalizeToSeperateWords(a[1])+" ("+a[0]+")"}aa_gcs("css_dt",{ParseCssDeclaration:function(g,H,b){ajaxart.css_dt=ajaxart.css_dt||{numericProps:",font-size,width,height,border-radius,padding-top,padding-right,padding-bottom,padding-left,margin-top,margin-right,margin-bottom,margin-left,",tokenProps:",cursor,font-family,overflow,text-transform,text-align,text-overflow,position,float,opacity,"};var q=ajaxart.parsexml("<Css/>");var r=aa_text(H,g,"Css",b)+";";var w=aa_build_color_lookup(r);var r=w.css;var n=w.colors;function A(J,I,K){var p=K.indexOf("!important");if(p!=-1){J.setAttribute("important",(J.getAttribute("important")||"")+","+I+",");K=K.substr(0,p)}J.setAttribute(I,K)}function m(p){return p.replace(/\#\#([0-9]+)/,function(I){return aa_color_lookup(n,I)})}function D(I,J,p){var K=(" "+J).match(/((\s+[a-zA-Z]+)|(\#[\#0-9A-Fa-f]+))/);if(K){A(p,I,K[2]||aa_color_lookup(n,K[3]))}return K[2]||K[3]}function F(I,p){A(p,"background",I)}function a(J,p){function I(N,M){var L=J.match(N);if(!L){return}var K=ajaxart.parsexml("<border/>");A(K,"size",L[1]);A(K,"style",L[2]);A(K,"color",m(L[3]));A(K,"side",M);p.appendChild(K)}I(/^border:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"");I(/^border-left:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"left");I(/^border-right:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"right");I(/^border-top:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"top");I(/^border-bottom:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"bottom")}function y(M,P){var J=M.split(",");for(var K=0;K<J.length;K++){var N=J[K];var p=ajaxart.parsexml("<shadow/>");var O=N.match(/(.*)inset(.*)/);if(O){A(p,"shadow_inset","true");N=O[1]+O[2]}var I=D("shadow_color",N,p);if(I){N=N.replace(I,"")}var L=N.match(/\s*([^\s]+)\s+([^\s]+)(\s+([^\s]+))?(\s+([^\s]+))?/);if(L){A(p,"shadow_x",L[1]);A(p,"shadow_y",L[2]);A(p,"shadow_blur",L[3]||"0");A(p,"shadow_spread",L[5]||"0")}P.appendChild(p)}}function h(L,p){var M=L.split(",");for(var K=0;K<M.length;K++){var N=M[K];var I=ajaxart.parsexml("<textshadow/>");var J=N.match(/^\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/);if(!J){return}A(I,"x",J[1]);A(I,"y",J[2]);A(I,"blur",J[3]);A(I,"color",J[4]);p.appendChild(I)}}function z(M,L,P){A(P,"gradientType",M);var O=L.split(",");var I=O[0].match(/deg$/)?O[0].slice(0,-3):O[0];A(P,"gradientDir",I);for(var J=1;J<O.length;J++){var N=O[J];var p=ajaxart.parsexml("<grad/>");var K=N.match(/^\s*([^\s]+)\s+([0-9]+)/);if(!K){return}A(p,"color",K[1]);A(p,"pos",K[2]);P.appendChild(p)}}var o=[[/^font-weight:\s*bold/,function(p){A(p,"bold","true")}],[/^white-space:\s*nowrap/,function(p){A(p,"nowrap","true")}],[/^font-style:\s*italic/,function(p){A(p,"italic","true")}],[/^text-decoration:\s*underline/,function(p){A(p,"underline","true")}],[/^padding:\s*([^\s]+)$/,function(p,I){A(p,"padding_left",I[1]);A(p,"padding_right",I[1]);A(p,"padding_top",I[1]);A(p,"padding_bottom",I[1])}],[/^padding:\s*([^\s]+)\s+([^\s]+)$/,function(p,I){A(p,"padding_left",I[2]);A(p,"padding_right",I[2]);A(p,"padding_top",I[1]);A(p,"padding_bottom",I[1])}],[/^padding:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/,function(p,I){A(p,"padding_top",I[1]);A(p,"padding_right",I[2]);A(p,"padding_bottom",I[3]);A(p,"padding_left",I[4])}],[/^margin:\s*([^\s]+)$/,function(p,I){A(p,"margin_left",I[1]);A(p,"margin_right",I[1]);A(p,"margin_top",I[1]);A(p,"margin_bottom",I[1])}],[/^margin:\s*([^\s]+)\s+([^\s]+)$/,function(p,I){A(p,"margin_left",I[2]);A(p,"margin_right",I[2]);A(p,"margin_top",I[1]);A(p,"margin_bottom",I[1])}],[/^margin:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/,function(p,I){A(p,"margin_top",I[1]);A(p,"margin_right",I[2]);A(p,"margin_bottom",I[3]);A(p,"margin_left",I[4])}],[/^text-shadow:(.+)/,function(p,I){h(I[1],p)}],[/^border:.+/,function(p,I){a(I[0],p)}],[/^border-left:.+/,function(p,I){a(I[0],p)}],[/^border-right:.+/,function(p,I){a(I[0],p)}],[/^border-top:.+/,function(p,I){a(I[0],p)}],[/^border-bottom:.+/,function(p,I){a(I[0],p)}],[/^box-shadow:\s*(.+)/,function(p,I){y(I[1],p)}],[/^color:\s*(.+)/,function(p,I){A(p,"color",m(I[1]))}],[/^background-color:\s*(.+)/,function(p,I){A(p,"background_color",m(I[1]))}],[/^background:\s*(.+)/,function(p,I){F(m(I[1]),p)}],[/^background-image:\s*(-webkit-)?([^-]+)-gradient\(([^)]+)/,function(p,I){z(I[2],m(I[3]),p)}],];var f=r.split(";");var G="";for(var v=0;v<f.length;v++){var d=f[v].replace(/^\s*/,"").replace(/\s*$/,"");if(!d){continue}var u=d.split(":");var t=","+u[0]+",";var C=u[0].replace(/-/,"_");if(ajaxart.css_dt.numericProps.indexOf(t)!=-1||ajaxart.css_dt.tokenProps.indexOf(t)!=-1){A(q,C,u[1])}else{var s=false;for(var B=0;B<o.length;B++){try{var l=d.match(o[B][0]);if(l){o[B][1].call({},q,l);s=true}}catch(E){}}if(!s){G+=(G==""?"":";")+m(d)}}}if(G){q.setAttribute("unknown",G)}return[q]},ParseCssBlock:function(f,m,a){var h=aa_text(m,f,"Block",a);var o=/([^\{]*)?\{([^}]*)\}/g;var r=ajaxart.parsexml("<Block/>");while(match=o.exec(h)){var g=match[1]?match[1].replace(/^\s*/,"").replace(/\s*$/,""):"##";var q=ajaxart.runNativeHelper([match[2]],f,"ParseDeclaration",a)[0];var d=aa_xpath(r,"Css[@selector='"+g+"']")[0];if(d){for(var l=0;l<q.attributes.length;l++){var n=q.attributes.item(l).name;var p=d.getAttribute(n);if(n=="unknown"&&p){d.setAttribute(n,q.getAttribute(n)+"; "+p)}else{d.setAttribute(n,q.getAttribute(n))}}for(var b=q.firstChild;b!=null;b=b.nextSibling){d.appendChild(b.cloneNode(true))}}else{q.setAttribute("selector",g);r.appendChild(q)}}return[r]},WorkingElementToCss:function(d,h,a){var b=aa_first(h,d,"WorkingElement",a);if(!b){return[""]}if(b.tagName=="Block"){var p="";var o=aa_xpath(b,"Css");for(var l=0;l<o.length;l++){var n=o[l];var f=n.getAttribute("selector")+" ";if(f=="## "){f=""}p+=f+"{ "+m(g(n),80-f.length)+"}\n"}return[p]}else{return[g(b)]}function m(t,u){var r=t.split(";"),v=0,q="";for(var s=0;s<r.length;s++){if(v+r[s].length>u){q+="\n  ";v=0}v+=r[s].length;if(r[s]){q+=r[s]+"; "}}return q}function g(L){function N(P){return s(L,P)}function s(S,R){var T=S.getAttribute(R);if(!T||T=="0"){return" 0"}T=T.replace(/^\s+/,"").replace(/\s+$/,"");var Q="";if(T.match(/^[0-9]+$/)){Q="px"}var P=((S.getAttribute("important")||"").indexOf(","+R+",")==-1)?"":" !important";return" "+T+Q+P}function w(Q,P){return Q.getAttribute(P)&&Q.getAttribute(P)!="0"}function t(Q,P){return Q.getAttribute(P)&&Q.getAttribute(P)=="true"}L.setAttribute("font_weight",L.getAttribute("bold")=="true"?"bold":"");L.setAttribute("font_style",L.getAttribute("italic")=="true"?"italic":"");L.setAttribute("text_decoration",L.getAttribute("underline")=="true"?"underline":"");L.setAttribute("white_space",L.getAttribute("nowrap")=="true"?"absolute":"");var D="";var F=(ajaxart.css_dt.tokenProps+"white-space,color,background,background-color,font-weight,font-style,text-decoration,text-shadow,text-overflow,text-transform").split(",");for(var J=0;J<F.length;J++){var u=F[J];var O=u.replace(/-/,"_");if(L.getAttribute(O)!=null&&L.getAttribute(O)!=""){D+=u+":"+L.getAttribute(O)+";"}}var I=ajaxart.css_dt.numericProps.split(",");for(var J=0;J<I.length;J++){var u=I[J];var O=u.replace(/-/,"_");if(L.getAttribute(O)!=null&&L.getAttribute(O)!=""){D+=u+":"+N(O)+";"}}var G=aa_xpath(L,"border[@side='']")[0];if(G){D+="border:"+s(G,"size")+" "+G.getAttribute("style")+" "+G.getAttribute("color")+";"}var y=aa_xpath(L,"border[@side!='']");for(var J=0;J<y.length;J++){var H=y[J];D+="border-"+H.getAttribute("side")+":"+s(H,"size")+" "+H.getAttribute("style")+" "+H.getAttribute("color")+";"}var C=aa_xpath(L,"textshadow");var M=[];for(var J=0;J<C.length;J++){var B=C[J];M.push(s(B,"x")+s(B,"y")+s(B,"blur")+" "+B.getAttribute("color"))}if(M.length>0){D+="text-shadow: "+M.join(", ")+";"}var r=aa_xpath(L,"shadow");var q=[];for(var J=0;J<r.length;J++){var v=r[J];q.push((t(v,"shadow_inset")?" inset":"")+s(v,"shadow_x")+s(v,"shadow_y")+s(v,"shadow_blur")+s(v,"shadow_spread")+" "+v.getAttribute("shadow_color"))}if(q.length>0){D+="box-shadow: "+q.join(", ")+";"}var K=aa_xpath(L,"grad");var A=[];for(var J=0;J<K.length;J++){var z=K[J];A.push(z.getAttribute("color")+" "+z.getAttribute("pos").match(/^([0-9]*)/)[1]+"% ")}var E=L.getAttribute("gradientDir");if(L.getAttribute("gradientType")=="radial"){E="ellipse cover"}else{if(!isNaN(parseFloat(E))){E+="deg"}}if(A.length>0){D+="background-image: -webkit-"+L.getAttribute("gradientType")+"-gradient("+E+", "+A.join(", ")+");"}if(w(L,"unknown")){D+=L.getAttribute("unknown")+";"}return D.replace(/^\s*/,"").replace(/\s*$/,"")}},RefreshPaddingAndMarginFields:function(b,d,a){var f=a.vars._Field[0];aa_field_handler(f,"OnUpdate",function(s,q){var g=s.Id;var r=g.split("_")[0];var o=g.split("_")[1];var p=aa_xpath(q[0],"..")[0];var l=ajaxart.totext_array(q);var n=p.getAttribute(r+"_mode");var h=[];if(n=="same"){h=["top","right","bottom","left"]}if(n=="xy"){if(o=="top"||o=="bottom"){h=["top","bottom"]}if(o=="left"||o=="right"){h=["left","right"]}}for(var m=0;m<h.length;m++){if(h[m]==o){continue}var t=r+"_"+h[m];p.setAttribute(t,l);aa_refresh_field([t],"screen",false,null,a)}aa_refresh_field(["Result"],"screen",false,null,a)})},RelatedColors:function(d,h,b){var m=aa_text(h,d,"Color",b);m=m.replace(/^\#/,"");var a=aa_text(h,d,"ColorName",b);var l=rgbToHsv(parseInt(m.substring(0,2),16),parseInt(m.substring(2,4),16),parseInt(m.substring(4,6),16));var o=Math.floor(l[2]*100);var p=[];for(var g=100;g>=0;){var f={isObject:true,color:"#"+hsvToRgbHex(l[0],l[1],g/100)};if(o==g){f={isObject:true,current:"true",color:"#"+m,name:a}}p.push(f);var n=Math.max(1,Math.floor(Math.abs(o-g)/6));g-=n}return p}});function rgbToHsv(a,m,o){a=a/255,m=m/255,o=o/255;var p=Math.max(a,m,o),f=Math.min(a,m,o);var l,t,q=p;var n=p-f;t=p==0?0:n/p;if(p==f){l=0}else{switch(p){case a:l=(m-o)/n+(m<o?6:0);break;case m:l=(o-a)/n+2;break;case o:l=(a-m)/n+4;break}l/=6}return[l,t,q]}function hsvToRgbHex(g,f,b){function a(h){if(h<16){return"0"+h.toString(16).toUpperCase()}return h.toString(16).toUpperCase()}var d=hsvToRgb(g,f,b);return""+a(Math.floor(d[0]))+a(Math.floor(d[1]))+a(Math.floor(d[2]))}function hsvToRgb(n,A,y){var a,o,w;var m=Math.floor(n*6);var u=n*6-m;var l=y*(1-A);var d=y*(1-u*A);var z=y*(1-(1-u)*A);switch(m%6){case 0:a=y,o=z,w=l;break;case 1:a=d,o=y,w=l;break;case 2:a=l,o=y,w=z;break;case 3:a=l,o=d,w=y;break;case 4:a=z,o=l,w=y;break;case 5:a=y,o=l,w=d;break}return[a*255,o*255,w*255]}aa_gcs("css_dt",{Sequence:function(d,f,a){var b=ajaxart.runsubprofiles(f,d,"Property",a);var g={parseBegin:function(h,n,o){var m=o;for(var l=0;l<b.length;l++){m=b[l].parseBegin(h,n,m.replace(/^\s*/,""));if(!m){break}}return m},serialize:function(h,n){var m="";for(var l=0;l<b.length;l++){m+=(m==""?"":" ")+b[l].serialize(h,n)}return m}};return[g]},Compound:function(b,d,a){var f={registerHandlers:function(m,l){var p=aa_text(d,b,"Prop",a);var o=aa_first(d,b,"Group",a);var g=aa_text(d,b,"Tag",a);var h=aa_text(d,b,"Key",a);var n=aa_text(d,b,"Value",a);m[p]=function(r,q,t){var s=ajaxart.parsexml("<"+g+"/>");if(h){s.setAttribute(h,t)}remaining=o.parseBegin(s,p,t);if(!remaining||remaining.match(/^\s*$/)){r.appendChild(s);return true}};l[p]=function(r,u){var t="";var q=aa_xpath(r,g+"[@"+h+"="+n+"]");for(var s=0;s<q.length;s++){t+=(t==""?"":"; ")+o.serialize(q[s],u)}return t}}};return[f]},FunctionValue:function(b,d,a){var f={registerHandlers:function(m,l){var p=aa_text(d,b,"Prop",a);var o=aa_first(d,b,"Group",a);var g=aa_text(d,b,"Tag",a);var h=aa_text(d,b,"Key",a);var n=aa_text(d,b,"Value",a);m[p]=function(r,q,t){var s=ajaxart.parsexml("<"+g+"/>");if(h){s.setAttribute(h,t)}remaining=o.parseBegin(s,p,t);if(!remaining||remaining.match(/^\s*$/)){r.appendChild(s);return true}};l[p]=function(r,u){var t="";var q=aa_xpath(r,g+"[@"+h+"="+n+"]");for(var s=0;s<q.length;s++){t+=(t==""?"":"; ")+o.serialize(q[s],u)}return t}}};return[f]},RepeatingValue:function(d,f,b){var l=aa_text(f,d,"Prop",b);var a=aa_text(f,d,"Tag",b);var h=aa_first(f,d,"Group",b);var g={registerHandlers:function(n,m){n[l]=function(p,o,t){var r=t;while(r){var s=ajaxart.parsexml("<"+a+"/>");var q=h.parseBegin(s,l,r.replace(/^\s*/,""));if(q.length==r.length){console.log("css parser: can not parse "+r);return false}p.appendChild(s);r=q;if(!r){return true}if(!r.match(/^,/)){return false}r=r.replace(/^,\s*/,"")}return true};m[l]=function(p,s){var r="";var o=aa_xpath(p,a);for(var q=0;q<o.length;q++){r+=(r==""?"":", ")+h.serialize(o[q],s)}return r}}};return[g]},InnerProp:function(g,h,d){var b=aa_text(h,g,"Name",d);var f=aa_first(h,g,"Type",d);var a=aa_bool(h,g,"Optional",d);var l={parseBegin:function(n){var m=f.parseBegin(css_elem,prop_prefix+"-"+b,n);if(m==null&&a){return n}return m},serialize:function(n,o){var q=o+"-"+b;if(f.serialize){return f.serialize(n,q)}else{var p=n.getAttribute(q.replace(/-/g,"_"));var m=((n.getAttribute("important")||"").indexOf(","+q+",")==-1)?"":" !important";return q.replace(/_/g,"-")+": "+p+m}}};return[l]},Length:function(b,g,a){var d=new RegExp("^s*"+aa_text(g,b,"Regex",a));var h=","+aa_text(g,b,"Enum",a)+",";var f=aa_text(g,b,"Prefix",a);return[{parseBegin:function(n){if(f){if(n.indexOf(f)!=0){return}n=n.substring(f.length)}var m=n.match(/^[a-z\-]+/);if(m&&m[0]){if(h.indexOf(","+m[0]+",")==0){return m[0]}}var l=n.match(d);if(l&&l[1]){return n.substring(0,f.length+l[1].length)}},serialize:function(l,q){var p=l.getAttribute(q.replace(/-/g,"_"));if(!p||p=="0"){return q+": 0"}p=p.replace(/^\s+/,"").replace(/\s+$/,"");var n="";if(p.match(/^[0-9]+$/)){n="px"}var o=elem.parentNode;var m=((o.getAttribute("important")||"").indexOf(","+q+",")==-1)?"":" !important";return q+": "+p+n+m}}]},Or:function(d,f,b){var a=ajaxart.runsubprofiles(f,d,"Type",b);return[{parseBegin:function(l){for(var h=0;h<a.length;h++){var g=a[h].parseBegin(l);if(g){return g}}}}]},Enum:function(d,f,b){var a=","+aa_text(f,d,"Options",b)+",";return[{parseBegin:function(h){var g=h.match(/^\s*([a-zA-Z0-9_]+)/);if(g&&a.indexOf(","+g[1]+",")!=-1){return g[0]}}}]},ByRegex:function(b,f,a){var d=new RegExp("^s*"+aa_text(f,b,"Regex",a));return[{parseBegin:function(h){var g=h.match(d);if(g&&g[0]){return g[0]}}}]},SimplifyToBoolean:function(b,d,a){var f={registerHandlers:function(l,h){var n=aa_text(d,b,"Prop",a);var m=aa_text(d,b,"Value",a);var g=aa_text(d,b,"Feature",a);l.push(function(p,r){var o=ajaxart.parsexml("<"+g+"/>");var q=aa_xpath(p,"P[@name='"+n+"']/@value")[0];q=q&&q.nodeValue;if(q&&q!=m){o.setAttribute("error","Can not simplify to boolean value: "+q)}else{o.setAttribute("value",(q==m)?"true":"false")}r.appendChild(o)});h.push(function(p,t){var o=aa_xpath(t,g)[0];if(o.getAttribute("error")){return}var s=aa_xpath(p,"P[@name='"+n+"']")[0];var r=o.getAttribute("value")=="true"?m:"";if(r&&s){s.setAttribute("value",r)}else{if(r&&!s){var q=ajaxart.parsexml('<P name="'+n+'"/>');q.setAttribute("value",r);p.appendChild(q)}else{if(!r&&s){p.removeChild(s)}}}})}};return[f]},Props:function(f,g,a){var d=aa_first(g,f,"Type",a);var b=aa_text(g,f,"Props",a).split(",");var h={registerHandlers:function(m,l){m.push(function(o,t){for(var q=0;q<b.length;q++){var u=b[q];var p=u.replace(/-/g,"_");var n=ajaxart.parsexml("<"+p+"/>");if(!aa_xpath(t,p)[0]){t.appendChild(n)}if(!aa_xpath(o,"P[@name='"+u+"']")[0]){return}var s=aa_xpath(o,"P[@name='"+u+"']/@value")[0];s=s&&s.nodeValue;var r=d.parseBegin(s);if(!r||s!=r){n.setAttribute("error","Unrecognized value '"+r+"' in "+u)}else{n.setAttribute("value",r)}}});l.push(function(t,u){for(var q=0;q<b.length;q++){var n=b[q];var v=n.replace(/-/g,"_");var r=aa_xpath(u,v)[0];if(!r||r.getAttribute("error")){return}var o=aa_xpath(t,"P[@name='"+n+"']")[0];var p=r.getAttribute("value");if(p&&o){o.setAttribute("value",p)}else{if(p&&!o){var s=ajaxart.parsexml('<P name="'+n+'"/>');s.setAttribute("value",p);t.appendChild(s)}else{if(!p&&o){t.removeChild(o)}}}}})}};return[h]},Prop:function(b,d,a){var f={registerHandlers:function(l,h){var n=aa_text(d,b,"Prop",a);var m=aa_first(d,b,"Type",a);var g=aa_text(d,b,"Feature",a);l.push(function(p,s){var o=ajaxart.parsexml("<"+g+"/>");if(!aa_xpath(s,g)[0]){s.appendChild(o)}if(!aa_xpath(p,"P[@name='"+n+"']")[0]){return}var r=aa_xpath(p,"P[@name='"+n+"']/@value")[0];r=r&&r.nodeValue;var q=m.parseBegin(r);if(!q||r!=q){o.setAttribute("error","Unrecognized value '"+q+"' in "+n)}else{o.setAttribute("value",q)}});h.push(function(p,t){var o=aa_xpath(t,g)[0];if(!o||o.getAttribute("error")){return}var s=aa_xpath(p,"P[@name='"+n+"']")[0];var r=o.getAttribute("value");if(r&&s){s.setAttribute("value",r)}else{if(r&&!s){var q=ajaxart.parsexml('<P name="'+n+'"/>');q.setAttribute("value",r);p.appendChild(q)}else{if(!r&&s){p.removeChild(s)}}}})}};return[f]},ExtractSequence:function(f,g,d){var l=aa_text(g,f,"Prop",d);var b=l.replace(/-/g,"_");var a=ajaxart.runsubprofiles(g,f,"Elem",d);var h={registerHandlers:function(n,m){var o=[];n.push(function(r,u){var v=aa_xpath(r,"P[@name='"+l+"']/@value")[0];var t=v?v.nodeValue:"";for(var s=0;s<a.length;s++){t=t.match(/[ ]*(.*)/)[1];var q=a[s].calcSimplifiers(t,u);t=t.substring(q.value?q.value.length:0);if(q.sElem){o.push(q.sElem)}}t=t.match(/[ ]*(.*)/)[1];if(!t){for(var s=0;s<o.length;s++){u.appendChild(o[s])}}else{var p=ajaxart.parsexml("<"+b+"/>");p.setAttribute("error","Can not parse Sequence "+v.nodeValue+" of "+l);u.appendChild(p)}});m.push(function(q,t){var p=aa_xpath(t,b+"/@error")[0];if(!p){for(var r=0;r<a.length;r++){a[r].serialize(q,t)}var s=aa_xpath(q,"P[@name='"+l+"']")[0];if(s){q.removeChild(s)}}})}};return[h]},SequenceElem:function(g,h,d){var f=aa_first(h,g,"Type",d);var b=aa_text(h,g,"Feature",d);var l=aa_text(h,g,"Prop",d);var a=aa_bool(h,g,"Optional",d);return[{calcSimplifiers:function(q,p){var n=aa_xpath(p,b)[0];var m=n||ajaxart.parsexml("<"+b+"/>");var o=f.parseBegin(q);if(o){if(m.getAttribute("value")){m.setAttribute("error","Duplicate value: "+o+" in "+l)}else{if(!a&&!o){m.setAttribute("error","Unrecognized value "+q+" in "+l)}else{m.setAttribute("value",o||"")}}}return{value:o,sElem:n?null:m}},serialize:function(n,r){var m=aa_xpath(r,b)[0];if(!m||m.getAttribute("error")){return}var q=aa_xpath(n,"P[@name='"+l+"']")[0];var p=m.getAttribute("value");if(p&&q){q.setAttribute("value",p)}else{if(p&&!q){var o=ajaxart.parsexml('<P name="'+l+'"/>');o.setAttribute("value",p);n.appendChild(o)}else{if(!p&&q){n.removeChild(q)}}}}}]},ExpandDirections:function(f,h,b){var m=aa_first(h,f,"Type",b);var g=["top","right","bottom","left"];var l=["top-left","top-right","bottom-left","bottom-right"];var a=aa_text(h,f,"Prop",b);var d=aa_text(h,f,"Expand",b);var o=[];if(d.indexOf("Edges")!=-1){o=o.concat(g)}if(d.indexOf("Coreners")!=-1){o=o.concat(l)}var n={registerHandlers:function(q,p){q.push(function(A,B){if(d.indexOf("Edges")==-1){return}var w=ajaxart.parsexml("<"+a+"/>");B.appendChild(w);function r(H,G,E){for(var C=0;C<H.length;C++){var F=H[C];if(w.getAttribute(F)){w.setAttribute("error","Ambiguous "+a+"-"+F+": "+w.getAttribute(F)+" versus "+G)}var D=m.parseBegin(G);if(!D||G!=D){w.setAttribute("error","Unrecognized value "+G+" in "+E||F)}else{w.setAttribute(F,D)}}}var y=aa_xpath(A,"P");for(var u=0;u<y.length;u++){var s=y[u].getAttribute("name");if(s.indexOf(a)!=0){continue}var z=y[u].getAttribute("value");if(s.indexOf("-")!=-1){var t=s.split("-").pop();r([t],z,s);continue}var v=z.match(/^([^\s]+)$/);if(v){r(g,v[1],s);continue}v=z.match(/^([^\s]+)\s+([^\s]+)$/);if(v){r(["top","bottom"],v[1],s);r(["left","right"],v[2],s);continue}v=z.match(/^([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)$/);if(v){r(["top"],v[1],s);r(["right"],v[2],s);r(["bottom"],v[3],s);r(["left"],v[4],s);continue}}});p.push(function(C,D){var w=aa_xpath(D,a)[0];if(w.getAttribute("error")){return}var y=true;for(var v=0;v<o.length;v++){if(!w.getAttribute(o[v])){y=false}}var t=w.getAttribute(o[0]);var A=false;if(t&&t==w.getAttribute(o[1])&&t==w.getAttribute(o[2])&&t==w.getAttribute(o[3])){A=true}else{if(t&&w.getAttribute(o[1])&&t==w.getAttribute(o[2])&&w.getAttribute(o[1])==w.getAttribute(o[3])){A=true;t=w.getAttribute(o[0])+" "+w.getAttribute(o[1])}}if(A){var s=aa_xpath(C,"P[@name='"+a+"']")[0];if(s){s.setAttribute("value",t)}else{C.appendChild(ajaxart.parsexml('<P name="'+a+'" value="'+t+'"/>'))}for(var v=0;v<o.length;v++){var B=aa_xpath(C,"P[@name='"+a+"-"+o[v]+"']");for(var u=0;u<B.length;u++){C.removeChild(B[u])}}}else{for(var v=0;v<o.length;v++){var r=a+"-"+o[v],z=o[v].replace(/-/g,"_");if(!w.getAttribute(z)){continue}var s=aa_xpath(C,"P[@name='"+r+"']")[0];if(s){s.setAttribute("value",w.getAttribute(z))}else{C.appendChild(ajaxart.parsexml('<P name="'+r+'" value="'+w.getAttribute(z)+'"/>'))}}}return""})}};return[n]},CssXmlMapper:function(b,d,a){return[{parsers:[],serializers:[],init:function(){var g=ajaxart.runsubprofiles(d,b,"Rule",a);for(var f=0;f<g.length;f++){g[f].registerHandlers(this.parsers,this.serializers)}},parse:function(r,u){var v=aa_xpath(u,"!Simplifiers")[0];var s=r.split(";");var h="";for(var l=0;l<s.length;l++){var g=s[l].replace(/^\s*/,"").replace(/\s*$/,"");if(!g){continue}var t=g.split(":");var f=t[0];var n=t[1];var q=ajaxart.parsexml("<P/>");u.appendChild(q);var m=n.indexOf("!important");if(m!=-1){q.setAttribute("important","true");n=n.substr(0,m)}n=n.replace(/^\s*/,"").replace(/\s*$/,"");q.setAttribute("name",f);q.setAttribute("value",n)}for(var o=0;o<this.parsers.length;o++){this.parsers[o](u,v)}},serialize:function(f){var m=aa_xpath(f,"Simplifiers")[0];var l="";for(var g=0;g<this.serializers.length;g++){this.serializers[g](f,m)}var h=aa_xpath(f,"P");for(var g=0;g<h.length;g++){l+=(l==""?"":";")+h[g].getAttribute("name")+": "+h[g].getAttribute("value")}return l}}]},Css2Xml:function(d,h,b){var a=aa_first(h,d,"Mapper",b);a.init();var g=aa_text(h,d,"Css",b);var n=ajaxart.parsexml("<Block/>");var l=/([^\{]*)?\{([^}]*)\}/g;while(match=l.exec(g)){var f=match[1]?match[1].replace(/^\s*/,"").replace(/\s*$/,""):"#this";var m=aa_xpath(n,"Css[@selector='"+f+"']")[0];if(!m){m=ajaxart.parsexml("<Css/>");m.setAttribute("selector",f);n.appendChild(m)}a.parse(match[2],m)}return[n]},Xml2Css:function(f,l,b){var d=aa_first(l,f,"Xml",b);if(!d){return[""]}d=d.cloneNode(true);var n=aa_int(l,f,"LineSize",b);var a=aa_first(l,f,"Mapper",b);a.init();var q="";var p=aa_xpath(d,"Css");for(var h=0;h<p.length;h++){var o=p[h];var g=o.getAttribute("selector")+" ";if(g=="## "){g=""}q+=g+"{ "+m(a.serialize(o),n-g.length)+"}\n"}return[q];function m(t,u){var r=t.split(";"),w=0,v="";for(var s=0;s<r.length;s++){if(w+r[s].length>u){v+="\n  ";w=0}w+=r[s].length;if(r[s]){v+=r[s]+"; "}}return v}}});var aa_studio_edit_mode={active:false,init:function(){this.currentMoving=null;this.prevMouseDown=window.onmousedown;this.prevMouseUp=window.onmouseup;this.prevMouseMove=window.onmousemove;this.prevKeyDown=window.onkeydown;this.prevMouseWheel=window.onmousewheel;this.active=true;jBart.studiobar.showObjectElements(null);var a=jQuery('<div id="jbstudio_edit_cover"></div>"');a.appendTo(".jb_WidgetInStudio_wrapper");window.onmousedown=function(l){var g=l.clientX,b=l.clientY;a.hide();var f=document.elementFromPoint(g,b);a.show();if($(f).hasClass("jbstudio_selected_mark")){var h=f.jbBasedOn;aa_studio_edit_mode.currentMoving={obj:jBart.studiobar.object,selectedElem:h,mouseXOnStart:g,mouseYOnStart:b,marginLeftOnStart:parseInt(window.getComputedStyle(h).getPropertyValue("margin-left").split("px")[0])||0,marginTopOnStart:parseInt(window.getComputedStyle(h).getPropertyValue("margin-top").split("px")[0])||0,offsetLeftOnStart:h.offsetLeft,offsetTopOnStart:h.offsetTop,startTime:new Date().getTime()};aa_studio_edit_mode.showCross(h);aa_studio_edit_mode.focusOnMarks();aa_studio_edit_mode.prepareReplacingWithUpperFields(h);return aa_stop_prop(l)}var d=jQuery(f).parents(".aa_popup,.aa_dlg").length>0&&!jQuery(f).parents(".aa_popup,.aa_dlg").hasClass("jbstudio_dlg");if(jQuery(f).parents(".jb_WidgetInStudio_wrapper").length==0&&!d){return}bartdt_capture_level="application";jBart.studiobar.object=jBart.studiobar.objectFromElement(f);if(jBart.studiobar.object){aa_studio_edit_mode.showSelectedMarks(true,true)}else{aa_studio_edit_mode.clearSelectedMarks()}return aa_stop_prop(l)};window.onmouseup=function(d){aa_studio_edit_mode.selecting=false;if($("#jbstudio_field_to_replace_with").length){return aa_studio_edit_mode.replaceFields()}if(aa_studio_edit_mode.currentMoving){var f=d.clientX-aa_studio_edit_mode.currentMoving.mouseXOnStart+aa_studio_edit_mode.currentMoving.marginLeftOnStart;var b=d.clientY-aa_studio_edit_mode.currentMoving.mouseYOnStart+aa_studio_edit_mode.currentMoving.marginTopOnStart;if(f!=aa_studio_edit_mode.currentMoving.marginLeftOnStart||b!=aa_studio_edit_mode.currentMoving.marginTopOnStart){aa_run_component("field_dt.ApplyDragChangesOnField",[],jBart.studiobar.context,{FieldXtml:[aa_studio_edit_mode.currentMoving.obj.Xtml],MarginLeft:[f+"px"],MarginTop:[b+"px"],ApplyMarginsOnThis:[aa_studio_edit_mode.ApplyMarginsOnThis]});if(jBart.studiobar.object.Refresh){jBart.studiobar.object.Refresh([],jBart.studiobar.context);aa_studio_edit_mode.showSelectedMarks(false);aa_studio_edit_mode.focusOnMarks()}}aa_studio_edit_mode.currentMoving=null;aa_studio_edit_mode.hideCross()}};window.onmousemove=function(d){if(aa_studio_edit_mode.currentMoving){if(new Date().getTime()-aa_studio_edit_mode.currentMoving<400){return}var f=d.clientX-aa_studio_edit_mode.currentMoving.mouseXOnStart;var b=d.clientY-aa_studio_edit_mode.currentMoving.mouseYOnStart;aa_studio_edit_mode.elemsToMove.css("margin-left",f+aa_studio_edit_mode.currentMoving.marginLeftOnStart+"px");aa_studio_edit_mode.elemsToMove.css("margin-top",b+aa_studio_edit_mode.currentMoving.marginTopOnStart+"px");$(".jbstudio_selected_mark").each(function(g,l){var h=l.jbBasedOn;$(l).width($(h).outerWidth()).height($(h).outerHeight()).css("left",aa_absLeft(h)+"px").css("top",aa_absTop(h)+"px")});aa_studio_edit_mode.testGoingOverUpperField(d)}};window.onkeydown=function(g){if(g.keyCode==27){$(".jbstudio_selected_mark").remove();aa_studio_edit_mode.currentMoving=null;if(aa_studio_edit_mode.currentMoving){aa_studio_edit_mode.elemsToMove.css("margin-left",aa_studio_edit_mode.currentMoving.marginLeftOnStart+"px");aa_studio_edit_mode.elemsToMove.css("margin-top",aa_studio_edit_mode.currentMoving.marginTopOnStart+"px")}}if(g.keyCode>=37&&g.keyCode<=40&&$(document.activeElement).hasClass("jbstudio_selected_mark")&&jBart.studiobar.object){var f=$(".jbstudio_selected_mark")[0].jbBasedOn;var d=parseInt(window.getComputedStyle(f).getPropertyValue("margin-left").split("px")[0])||0;var b=parseInt(window.getComputedStyle(f).getPropertyValue("margin-top").split("px")[0])||0;if(g.keyCode==37){d--}if(g.keyCode==38){b--}if(g.keyCode==39){d++}if(g.keyCode==40){b++}aa_studio_edit_mode.elemsToMove.css("margin-left",d+"px");aa_studio_edit_mode.elemsToMove.css("margin-top",b+"px");$(".jbstudio_selected_mark").each(function(h,m){var l=m.jbBasedOn;$(m).width($(l).outerWidth()).height($(l).outerHeight()).css("left",aa_absLeft(l)+"px").css("top",aa_absTop(l)+"px")});aa_run_component("field_dt.ApplyDragChangesOnField",[],jBart.studiobar.context,{FieldXtml:[jBart.studiobar.object.Xtml],MarginLeft:[d+"px"],MarginTop:[b+"px"],ApplyMarginsOnThis:[aa_studio_edit_mode.ApplyMarginsOnThis]});return aa_stop_prop(g)}if(g.ctrlKey&&$("#jbstudio_field_to_replace_with").length){$("#jbstudio_field_to_replace_with").remove();$("#jbstudio_text_of_field_to_replace").remove()}};window.onmousewheel=function(l){var f=l.clientX,b=l.clientY;var m=0;if(!event){event=window.event}if(event.wheelDelta){m=event.wheelDelta/120}else{if(event.detail){m=-event.detail/3}}if(m>0){var d=document.elementFromPoint(f,b);if($(d).hasClass("jbstudio_selected_mark")){var g=d.jbBasedOn.parentNode;if(aa_studio_edit_mode.movingElemsAndNotWrappers){g=g.parentNode}var h=jBart.studiobar.objectFromElement(g);if(h){jBart.studiobar.object=h;aa_studio_edit_mode.showSelectedMarks(true,true)}return aa_stop_prop(l)}}}},exit:function(){window.onmouseup=this.prevMouseUp;window.onmousedown=this.prevMouseDown;window.onmousemove=this.prevMouseMove;window.onkeydown=this.prevKeyDown;window.onmousewheel=this.prevMouseWheel;$("#jbstudio_edit_cover").remove();$(".jbstudio_selected_mark").remove();this.elemsToMove=this.elems=this.wrappers=$([]);jQuery(".jbstudio_selected_obj").removeClass("jbstudio_selected_obj");this.active=false},showSelectedMarks:function(f,a){if(!jBart.studiobar.object||!jBart.studiobar.object.Xtml){return}$(".jbstudio_selected_mark").remove();var b=jBart.studiobar.ElementsFromXtml(jBart.studiobar.object.Xtml);jBart.studiobar.object.Elements=b.length?b:jBart.studiobar.object.Elements;var d=[];$(jBart.studiobar.object.Elements).each(function(g,h){d.push(aa_wrapper(h))});if(d[0].tagName.toUpperCase()!="TD"){aa_studio_edit_mode.elemsToMove=aa_studio_edit_mode.wrappers=$(d);aa_studio_edit_mode.ApplyMarginsOnThis=[];aa_studio_edit_mode.movingElemsAndNotWrappers=false}else{aa_studio_edit_mode.elemsToMove=$(jBart.studiobar.object.Elements);aa_studio_edit_mode.ApplyMarginsOnThis=["true"];aa_studio_edit_mode.movingElemsAndNotWrappers=true}$(aa_studio_edit_mode.elemsToMove).each(function(l,h){var g=$('<div class="jbstudio_selected_mark" tabindex="1"></div>');g.width(jQuery(h).outerWidth()).height(jQuery(h).outerHeight()).css("left",aa_absLeft(h)+"px").css("top",aa_absTop(h)+"px").appendTo("body");g[0].jbBasedOn=h});if(f){setTimeout(function(){ajaxart.runComponent("bart_dt.OpenPropertiesWindow",[],jBart.studiobar.context);ajaxart.runComponent("bart_dt.SynchTreePopup",[],jBart.studiobar.context);if(a){setTimeout(function(){aa_studio_edit_mode.focusOnMarks()},100)}},1)}},clearSelectedMarks:function(){$(".jbstudio_selected_mark").remove()},focusOnMarks:function(){$(".jbstudio_selected_mark").first().focus()},showCross:function(d){var b=parseInt(window.getComputedStyle(d).getPropertyValue("margin-left").split("px")[0])||0;var a=parseInt(window.getComputedStyle(d).getPropertyValue("margin-top").split("px")[0])||0;$([$("<div class='jbstudio_selected_cross x'/>")[0],$("<div class='jbstudio_selected_cross y'/>")[0]]).css("left",aa_absLeft(d)-b+"px").css("top",aa_absTop(d)-a+"px").appendTo("body")},hideCross:function(){$(".jbstudio_selected_cross").remove()},prepareReplacingWithUpperFields:function(f){if(!jBart.studiobar.object.Xtml||!jBart.studiobar.object.Xtml.parentNode||!jBart.studiobar.object.Xtml.parentNode.getAttribute("ID")){return}var h=aa_xpath(jBart.studiobar.object.Xtml.parentNode,"Field");this.upperFields=[];var a=$(f).parents(".fld_"+jBart.studiobar.object.Xtml.parentNode.getAttribute("ID"));for(var b=0;b<h.length;b++){var d=h[b];if(d==jBart.studiobar.object.Xtml){break}var g=a.find(".fld_"+d.getAttribute("ID"))[0];if(g){this.upperFields.push({left:aa_absLeft(g),top:aa_absTop(g),width:$(g).outerWidth(),height:$(g).outerHeight(),xtml:d})}}},testGoingOverUpperField:function(b){$("#jbstudio_field_to_replace_with").remove();$("#jbstudio_text_of_field_to_replace").remove();if(b.ctrlKey){return}for(i=0;i<this.upperFields.length;i++){var a=this.upperFields[i];if(b.clientX>=a.left&&b.clientX<=a.left+a.width-5&&b.clientY>=a.top&&b.clientY<=a.top+a.height-5){$("<div id='jbstudio_field_to_replace_with'/>").css("left",a.left+"px").css("top",a.top+"px").width(a.width+"px").height(a.height+"px").appendTo("body");$("#jbstudio_field_to_replace_with")[0].jbField=a;$("<div id='jbstudio_text_of_field_to_replace'/>").text("Release mouse button to reorder").css("left",a.left+"px").css("top",a.top+"px").appendTo("body")}}},replaceFields:function(){if(!$("#jbstudio_field_to_replace_with")){return}jBart.studiobar.object.Xtml.parentNode.insertBefore(jBart.studiobar.object.Xtml,$("#jbstudio_field_to_replace_with")[0].jbField.xtml);jBart.studiobar.objectFromXtml(jBart.studiobar.object.Xtml.parentNode).Refresh([],jBart.studiobar.context);this.currentMoving=null;aa_studio_edit_mode.hideCross();aa_studio_edit_mode.clearSelectedMarks();$("#jbstudio_field_to_replace_with").remove();$("#jbstudio_text_of_field_to_replace").remove()}};function aa_show_selected_object_marks(){if(aa_studio_edit_mode.active){aa_studio_edit_mode.showSelectedMarks()}else{jBart.studiobar.showObjectElements(jBart.studiobar.object)}}function aa_wrapper(a){return a.jbCell||a.parentNode}aa_gcs("field_dt",{ApplyDragChangesOnField:function(f,w,d){var t=aa_text(w,f,"MarginLeft",d);var y=aa_text(w,f,"MarginTop",d);var s=aa_first(w,f,"FieldXtml",d);var l=aa_xpath(s,"FieldAspect[@t='field_feature.Css']");var g=aa_xpath(s,"FieldAspect[@t='field_feature.Layout']");var r=aa_bool(w,f,"ApplyMarginsOnThis",d);var a="";if(t){a+="margin-left:"+t+"; "}if(y){a+="margin-top:"+y+"; "}var m=r?"#this":"#wrapper";var n=l.concat(g);for(var o in n){var h=n[o];var b=aa_xpath(h,"Css")[0];var p=aa_cdata_value(b);if(p){var q;if(r){q=p.replace(/#this[ ]*{[^}]*/,function(z){return z.replace(/margin-left:[^;]*;[ ]*/,"").replace(/margin-top:[^;]*;[ ]*/,"")})}else{q=p.replace(/#wrapper[ ]*{[^}]*/,function(z){return z.replace(/margin-left:[^;]*;[ ]*/,"").replace(/margin-top:[^;]*;[ ]*/,"")})}if(q!=p){aa_run_component("xml.WriteCData",[],d,{Element:[b],CDataText:[q]})}}}if(g.length==0){var u='<FieldAspect t="field_feature.Layout"><Css><![CDATA['+m+"{ "+a+"}]]></Css></FieldAspect>";s.appendChild(aa_importNode(ajaxart.parsexml(u),s))}else{var v=g.slice(-1)[0];var b=aa_xpath(v,"Css")[0];var q=p=aa_cdata_value(b);if(r){if(q.indexOf("#this")!=-1){q=q.replace(/(#this[ ]*{[^}]*)/,"$1"+a)}else{q+="#this { "+a+"}"}}else{if(q.indexOf("#wrapper")!=-1){q=q.replace(/(#wrapper[ ]*{[^}]*)/,"$1"+a)}else{q+="#wrapper { "+a+"}"}}if(q!=p){aa_run_component("xml.WriteCData",[],d,{Element:[b],CDataText:[q]})}}}});jBart.studiobar=jBart.studiobar||{};aa_gcs("field_dt",{GroupingXml:function(b,g,a){var l=aa_first(g,b,"ParentField",a);if(l==null||l.Fields==null){return[]}var d=[];for(var h=0;h<l.Fields.length;h++){var n=l.Fields[h];if(n.Fields==null){d.push(ajaxart.parsexml('<field id="'+n.Id+'"/>'))}else{if(n.IsVirtualGroup){for(var f=0;f<n.Fields.length;f++){var m=n.Fields[f];if(m.Fields==null){d.push(ajaxart.parsexml('<field id="'+m.Id+'" group="'+n.Id+'"/>'))}}}}}return d},TreeItemImage:function(d,f,b){if(!f[0]||f[0].nodeType!=1){return}if(f[0].getAttribute("image")){return[ajaxart.dynamicText([],f[0].getAttribute("image"),b)]}var h=aa_xpath(f[0],"FieldAspect");for(var a=0;a<h.length;a++){var g=aa_component_definition(h[a].getAttribute("t"));if(g&&g.getAttribute("fieldImage")){return[ajaxart.dynamicText([],g.getAttribute("fieldImage"),b)]}}var g=aa_component_definition(f[0].getAttribute("t"));if(g&&g.getAttribute("image")){return[ajaxart.dynamicText([],g.getAttribute("image"),b)]}return[aa_base_images()+"/studio/bullet1616.gif"]},Regroup:function(b,h,a){var m=aa_first(h,b,"ParentField",a);if(m==null||m.Fields==null){return[]}var d=ajaxart.run(h,b,"GroupingXml",a);for(var l=0;l<d.length;l++){var n=d[l].getAttribute("id");var g=d[l].getAttribute("group");var o=ajaxart_object_byid(ajaxart_firstlevel_fields(m),n);var p=m;if(g!=""){for(var f=0;f<m.Fields.length;f++){if(m.Fields[f].Id==g){p=m.Fields[f];break}}}if(ajaxart_object_byid(p.Fields,n)==null){p.XtmlSource[0].script.appendChild(o.XtmlSource[0].script)}}return["true"]},SiblingFieldIDs:function(b,g,a){var o=aa_first(g,b,"FieldXtml",a);var f=[],l={};var p=jQuery(o).parents();for(var h=0;h<p.length&&p[h].tagName!="Component";h++){var m=aa_xpath(p[h],".//Field/@ID");for(var d=0;d<m.length;d++){var n=m[d].nodeValue;if(l[n]||n==o.getAttribute("ID")){continue}l[n]=true;f.push(n)}}return f},SingleFieldNameToXtml:function(g,l,d){var f=aa_bool(l,g,"Editable",d);var a=aa_totext(l);var b=a.replace(/ /g,"_");a=aa_capitalize_each_word(a);var h=jBart.parsexml('<Field t="fld.Field" />',g);h.setAttribute("FieldData",f?"%!@"+b+"%":"%"+b+"%");jQuery(h).attr("ID",b).attr("Title",a);var m="",n=f?"fld_type.EditableText":"fld_type.Text";if(a.indexOf("image")>-1||a.indexOf("photo")>-1){n=f?"fld_type.EditableImage":"fld_type.Image"}m=m||'<FieldType t="'+n+'" />';h.appendChild(jBart.parsexml(m,h));return[h]},FieldSampleData:function(g,l,d){var p=aa_first(l,g,"Page",d);var s=aa_first(l,g,"Field",d);var f=ajaxart.run(l,g,"PageData",d);if(p==s){return f}var t=f[0];var b=null;var n=[];var q=s;while(q&&q!=p){if(q.tagName=="Field"){n.push(q)}q=q.parentNode}n=n.reverse();for(var h in n){if(!t){return[]}var s=ajaxart.run([],n[h],"",d)[0];if(!s){continue}if(s.IsMultipleGroup){var a=s.FieldData([t],d);var o=s.InnerItems(a,d)[0];t=o.Items[0]}if(s.hasItemlistContainer){var m=ajaxart.clone_context(d);jBart.trigger(s,"ModifyInstanceContext",{FieldData:[t],Context:m});var r=m.vars.ItemListCntr[0];b=r.Items}if(s.IsItemList&&b){t=b[0]}if(s.IsFilterGroup&&b){t=b[0]}else{if(s.FieldData){t=s.FieldData([t],d)[0]}}}if(!t){return[]}return[t]},FieldsFromOtherPages:function(g,n,d){var l=[];var s=aa_first(n,g,"FieldXtml",d);if(!s){return}var q=s;while(q.tagName!="xtml"&&q){q=q.parentNode}if(!q||!q.parentNode||q.parentNode.getAttribute("type")!="jbart.MyWidgetPage"){return}var p=q.getAttribute("ContentType");var f=aa_xpath(q.parentNode.parentNode,"Component[@type='jbart.MyWidgetPage']/xtml");for(var m=0;m<f.length;m++){var r=f[m];if(r==q||r.getAttribute("ContentType")!=p){continue}var t="page: "+r.parentNode.getAttribute("id");var o=aa_xpath(r,"Field");for(var h=0;h<o.length;h++){var a=o[h].cloneNode(true);a.setAttribute("origin",t);var b=a.getAttribute("ID");if(b&&aa_xpath(q,"Field[@ID='"+b+"']").length>0){a.setAttribute("fieldExists",true)}l.push(a)}}return l},ExistingFieldsToAdd:function(f,m,a){var o=aa_first(m,f,"ParentField",a);var n=aa_text(m,f,"ContentType",a);var d=aa_text(m,f,"ParentFieldPath",a);var g=[];var q=ajaxart_firstlevel_fields(o);var l=a.vars._BartContext[0].Pages;var b=[];for(var h=0;h<l.length;h++){if(ajaxart.totext_array(l[h].ContentType)==n){b.push(aa_first(m,l[h].XtmlSource[0].script,"",a))}}var r=[];for(var h=0;h<b.length;h++){var p=ajaxart_subfield_bypath(b[h],d);if(p!=null){ajaxart.concat(r,ajaxart_firstlevel_fields(p))}}if(a.vars._BartContext){ajaxart.concat(r,a.vars._BartContext[0].GlobalFields)}for(var h=0;h<r.length;h++){if(ajaxart_object_byid(q,r[h].Id)==null){if(ajaxart_object_byid(g,r[h].Id)==null){g.push(r[h])}}}return g},ComponentsOfTypeOptions:function(d,g,a){var f={isObject:true,Options:[]};var o=ajaxart.runNativeHelper(g,d,"Components",a);var m=aa_text(g,d,"CurrentPT",a),b=false;for(var h=0;h<o.length;h++){var n=o[h];var l={isObject:true,code:n.ID,image:aa_jbart_image("/default1616.gif",a)};l.OptionPage=aa_first(g,d,"OptionPage",a);l.text=aa_text_capitalizeToSeperateWords(n.ID.split(".")[1]);if(n.ID==m){b=true}f.Options.push(l)}if(m!=""&&!b){var l={isObject:true,code:m,image:aa_jbart_image("/default1616.gif",a),OptionPage:aa_first(g,d,"OptionPage",a)};l.text=aa_text_capitalizeToSeperateWords(m.split(".")[1]);f.Options.push(l)}return[f]},ComponentsWithCategories:function(d,C,b){var z={isObject:true,IsTree:true,Options:[]};var A={isObject:true,code:"General",UnSelectable:true,IsCategory:true,Options:[],image:aa_jbart_image("/folder-open.png",b)};z.Categories=[A];var q={};var r=aa_isjbart();q.General=A;if(!window.aaxtmldt_options_cache){aaxtmldt_options_cache={};for(var y in ajaxart.components){if(y.lastIndexOf("_dt")==y.length-3&&y.length>3||y=="aaeditor"){continue}for(var w in ajaxart.components[y]){var B=ajaxart.components[y][w];if(B.getAttribute("hidden")=="true"||B.getAttribute("type")==null){continue}if(r&&B.parentNode.getAttribute("jbart")!="true"){continue}if(r&&B.getAttribute("jbart")=="false"){continue}var l=B.getAttribute("light")=="false";var m=B.getAttribute("type").split(",");for(var v=0;v<m.length;v++){if(m[v].split(".").length>2){m.push(m[v].substring(0,m[v].lastIndexOf(".")))}}var u=B.getAttribute("category");if(u){m.push(m[0]+"."+u)}for(var v=0;v<m.length;v++){var p={isObject:true,code:""+y+"."+w,Hidden:l,image:aa_jbart_image("/default1616.gif",b)};p.text=aa_text_capitalizeToSeperateWords(w);p.Category=B.getAttribute("category");if(aaxtmldt_options_cache[m[v]]==null){aaxtmldt_options_cache[m[v]]=[]}aaxtmldt_options_cache[m[v]].push(p)}}}}var g=aa_text(C,d,"Type",b);if(g==""){return[]}var a=ajaxart.types[g.replace(".","_")];if(a!=null&&a.getAttribute("lightPTs")!=null){var D=a.getAttribute("lightPTs").split(",");z.Options=[];for(var y=0;y<D.length;y++){var p=D[y];var o=aa_text_capitalizeToSeperateWords(p.substring(p.indexOf(".")+1));z.Options.push({isObject:true,code:p,OptionPage:aa_first(C,d,"OptionPage",b),text:o})}z.Categories=null;z.IsTree=false;return[z]}var s=aaxtmldt_options_cache[g];if(s==null){s=[]}var t=aa_text(C,d,"CurrentPT",b),n=false;for(var y=0;y<s.length;y++){var p={};if(s[y].Hidden){continue}if(s[y].code==t){n=true}for(var w in s[y]){p[w]=s[y][w]}if(p.code==t){hasCurrentPT=true}p.OptionPage=aa_first(C,d,"OptionPage",b);if(s[y].Category==null){A.Options.push(p)}else{var f=s[y].Category.split(",");for(var w=0;w<f.length;w++){var h=f[w];if(q[h]==null){q[h]={isObject:true,code:[h],UnSelectable:true,IsCategory:true,Options:[],image:aa_jbart_image("/folder-open.png",b)};z.Categories.push(q[h])}q[h].Options.push(p)}}}if(t!=""&&!n){var p={isObject:true,code:t,OptionPage:aa_first(C,d,"OptionPage",b)};p.text=aa_text_capitalizeToSeperateWords(t.split(".")[1]);A.Options.push(p)}if(z.Categories.length==1){z.Options=z.Categories[0].Options;z.Categories=null;z.IsTree=false}return[z]},DualFeatureOptions:function(g,n,b){if(!aa_field_dt_dual_options){var m={isObject:true,IsTree:true,Options:[]};var l=aa_isjbart();var f={isObject:true,code:"General",UnSelectable:true,IsCategory:true,Options:[]};m.Categories=[f];var a={General:f};for(var o in ajaxart.components){if(o.lastIndexOf("_dt")==o.length-3&&o.length>3||o=="aaeditor"){continue}for(var h in ajaxart.components[o]){var q=ajaxart.components[o][h];var s=q.getAttribute("type");if(q.getAttribute("hidden")=="true"||q.getAttribute("light")=="false"){continue}if(s!="field.FieldAspect"&&s!="uiaspect.Aspect"){continue}if(l&&q.parentNode.getAttribute("jbart")!="true"){continue}var d=(s=="field.FieldAspect")?"field":"list";var p={isObject:true,code:""+o+"."+h};p.text=aa_text_capitalizeToSeperateWords(h)+" ("+d+")";var u=q.getAttribute("category")||"General";var t=u.split(",");for(var h=0;h<t.length;h++){var r=t[h];if(a[r]==null){a[r]={isObject:true,code:[r],UnSelectable:true,IsCategory:true,Options:[]};m.Categories.push(a[r])}a[r].Options.push(p)}}}aa_field_dt_dual_options=[m]}return aa_field_dt_dual_options},SyncFieldsData:function(d,l,a){var p=aa_first(l,d,"PageXtml",a);var n=p.getAttribute("ContentType");var g=[];var t="";var r=a.vars._BartContext[0].AppXtml[0];var b=ajaxart.xml.xpath(r,"Pages/Page[@ContentType='"+n+"']");var m=bartdt_subfields(p);for(var h=0;h<m.length;h++){var q=m[h].Field;for(var f=0;f<b.length;f++){if(b[f]==p){continue}var o=bartdt_field_bypath(b[f],m[h].Path);if(!o||ajaxart.xml2text(q)==ajaxart.xml2text(o)){continue}var s={isObject:true,Field:q,OtherField:o,Page:p,OtherPage:b[f]};g.push(s)}}return g},GotoFieldOfFocus:function(d,f,a){var h=jQuery(ajaxart.controlOfFocus).parents().filter(function(){return this.Field!=null})[0];if(h==null){return[]}var b=h.Field.Id;var g=jQuery(document).find(".bartdt_edit_fields").find(".aa_item_fld_"+b);g.parents().each(function(){jQuery(this).show()});aa_xFireEvent(g[0],"mousedown");aa_xFireEvent(g[0],"mouseup");return[]},ToEnglishMultiple:function(d,f,b){var g=aa_totext(f);if(g==""){return[]}var a=g.charAt(g.length-1);if(a=="s"){return[g+"es"]}if(a=="y"){return[g.substring(0,g.length-1)+"ies"]}return[g+"s"]},SelectedFieldInfo:function(d,g,b){var a={isObject:true};var f=b.vars._ElemsOfOperation[0];var l="";while(f.parentNode!=null){if(jQuery(f).hasClass("aa_item")){var h=f.ItemData[0];if(h&&h.getAttribute("ContentType")!=null){a.ContentType=h.getAttribute("ContentType");a.Path=[l];return[a]}if(h&&h.getAttribute("Path")!=null){if(l!=""){l=h.getAttribute("Path")+"/"+l}else{l=h.getAttribute("Path")}}}f=f.parentNode}return[a]},GuessType:function(d,f,b){var a=ajaxart.run(f,d,"SampleData",b);var g=0;for(i in a){var h=ajaxart.totext_item(a[i]);if(!isNaN(parseInt(h))&&isFinite(h)){g++}}if(a.length>0&&g/a.length>0.8){return[ajaxart.parsexml("<Type t='field_aspect.Number' />")]}return[ajaxart.parsexml("<Type t='field_type.Text' />")]},FieldTreeItemsDecorator:function(g,h,b){var a=aa_first(h,g,"DataItems",b);var f=h[0];if(f&&f.nodeType==1){function l(o){for(var m=o.firstChild;m!=null;m=m.nextSibling){if(m.nodeType!=1||m.tagName=="Field"||m.tagName=="xtml"){continue}var n=m.getAttribute("t");if(n=="ui.InnerPage"||n=="field.InnerPage"||n=="ui.CustomStyleByField"){return m}var p=l(m);if(p){return p}}return null}var d=l(f);if(d){a=a||{Items:[]};a.Items.push(d)}}return a?[a]:[]},AddFeatureFieldOptions:function(f,n,d){var r=aa_text(n,f,"Type",d);var g=aa_first(n,f,"Xtml",d);var b={};if(g){var s=g.getAttribute("t");if(s!="field.Field"&&s!="field.XmlField"){b.notTextbox=true}}var h=(d.vars._WidgetXml)?aa_totext(aa_xpath(d.vars._WidgetXml[0],"@plugins")):"";var q="cache_"+h+"_light";if(!jBart.vars.compsOfTypeCache||!jBart.vars.compsOfTypeCache[q]){ajaxart.runNativeHelper(n,f,"BuildCache",d)}var o=r.split(",");var p=jBart.vars.compsOfTypeCache[q][o[0]];if(o.length>0){p=[];for(var s=0;s<o.length;s++){ajaxart.concat(p,jBart.vars.compsOfTypeCache[q][o[s]])}}if(!p){return[]}var l=[];for(var m=0;m<p.length;m++){var a=p[m].Definition.getAttribute("category");if(a=="textbox"&&b.notTextbox){continue}l.push(p[m].Definition)}return l},ComponentInTable:function(g,h,f){var b=aa_attach_global_css(aa_text(h,g,"Css",f));var a=aa_first(h,g,"Xtml",f);var d=jQuery("<div><span class='component_title'><span style='cursor:inherit' class='aa_field_toolbar_image xtmldt_toggle_left'/><span class='component_title_in_table' /></span><div class='place_holder' /></div>");d.addClass(b);d.find(".component_title_in_table").text(aa_text([a],g,"ComponentTitle",f));var l=ajaxart.tobool_array(ajaxart.runNativeHelper([a],g,"HasParams",f));if(!l){return[d[0]]}d.find(".xtmldt_toggle_left").attr("title",aa_text(h,g,"TitleForExpand",f));d.find(".xtmldt_toggle_left").css("background","url("+aa_text(h,g,"ImageForExpand",f)+") no-repeat");d.find(".component_title").css("cursor","pointer");d.find(".component_title").click(function(o){var m=jQuery((typeof(event)=="undefined")?o.target:event.srcElement);if(jQuery(m).hasClass("doc_icon")){return true}if(this.Expanded){this.Expanded=false;d.find(".place_holder").animate({height:"hide"},300);d.find(".xtmldt_toggle_left").attr("title",aa_text(h,g,"TitleForExpand",f));d.find(".xtmldt_toggle_left").css("background","url("+aa_text(h,g,"ImageForExpand",f)+") no-repeat");d.find(".component_title_in_table").removeClass("expanded");d.find(".documentation").remove()}else{this.Expanded=true;d.find(".xtmldt_toggle_left").attr("title",aa_text(h,g,"TitleForCollapse",f));d.find(".xtmldt_toggle_left").css("background","url("+aa_text(h,g,"ImageForCollapse",f)+") no-repeat");d.find(".place_holder").hide();d.find(".place_holder").children().remove();d.find(".component_title_in_table").addClass("expanded");d.find(".component_title").append(ajaxart.runNativeHelper([a],g,"Documentation",f));var n=ajaxart.runNativeHelper([a],g,"ParamsControl",f);jQuery(n).addClass("dt_intable_props");if(n.length){d.find(".place_holder").append(n[0])}d.find(".place_holder").animate({height:"show"},300,"swing",function(){aa_ensure_visible(n[0])});aa_element_attached(d.find(".place_holder")[0])}});return[d[0]]},UpToPageDef:function(g,l,f){var b=aa_first(l,g,"Xtml",f);if(b&&b.nodeType!=1){b=ajaxart.xml.parentNode(b)}var m=[];var h=null;for(;b&&b.nodeType==1;b=b.parentNode){m.push(b.getAttribute("Title")||b.getAttribute("ID")||b.getAttribute("t"));if("Field,Fields,Operation,Operations".indexOf(b.tagName)==-1){break}}var a=aa_text(l,g,"Result",f);var d={isObject:true,Xtml:b,Path:m.reverse().join("/")};if(a=="xtml"){return[b]}if(a=="path"){return[d.Path]}return[d]},ContainerFields:function(f,h,d){var b=aa_first(h,f,"Container",d);if(!b){return[]}var g=aa_DataviewFields(b.Fields);if(!aa_bool(h,f,"ReturnIDsList",d)){return g}else{var a=[];for(i in g){a.push(g[i].Id)}return a}},FixPercentagesInCss:function(d,f,b){var h=aa_text(f,d,"Text",b);var g=h.split("%");for(var a in g){if(a<g.length-1&&!isNaN(parseInt(g[a].charAt(g[a].length-1)))){g[a]+="\\"}}return[g.join("%")]},IsReadOnly:function(f,g,d){var b=aa_first(g,f,"FieldXtml",d);for(var a=b;a!=null;a=a.parentNode){if(aa_xpath(a,"FieldAspect[@t='field_aspect.ReadOnly']")[0]){return["true"]}if(aa_xpath(a,"Aspect[@t='uiaspect.ReadOnly']")[0]){return["true"]}}return[]},RenameField:function(b,g,a){var f=a.vars._ElemsOfOperation[0];var h=a.vars._ItemsOfOperation[0];var m=""+h.getAttribute("Title");var d=prompt("Please enter a new title:",m);function l(n){return ajaxart.totext(ajaxart.runNativeHelper([n],b,"ID",a))}if(d&&d!=m){if(h.getAttribute("ID")==l(m)){h.setAttribute("ID",l(d))}h.setAttribute("Title",d);jQuery(f).find(">.item_text").text(d);ajaxart.runNativeHelper(g,b,"Refresh",a)}return[]}});ajaxart.gcs.bart_dt={XmlToOneJSLine:function(d,f,b){var a=ajaxart.xml.prettyPrint(f,"",true);a=a.replace(/\\/g,"\\\\");a=a.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t");a=a.replace(/\'/g,"\\'");return[a]},AllFieldIDs:function(d,h,b){var g=ajaxart.runNativeHelper(h,d,"TopXml",b)[0];var a=[];var f={};var m=aa_text(h,d,"FieldPT",b);function l(o){if(o.nodeType!=1){return}if(o.tagName=="Field"&&o.getAttribute("ID")){var q=o.getAttribute("ID");var p=o.getAttribute("Title")||q;if(!f[q]){if(!m||m==o.getAttribute("t")){a.push({code:q,text:p})}}f[q]=true}for(var n=o.firstChild;n;n=n.nextSibling){l(n)}}l(g);return[{Options:a}]},ResourcesAsContext:function(b,d,a){out={isObject:true,context:ajaxart.newContext()};var f=a.vars._BartContext[0].Resources;return[out]},PagePreview:function(f,h,d){var g=ajaxart.runNativeHelper(h,f,"Control",d);var a=jQuery(g).find(".aa_withpopup");for(var l=0;l<a.length;l++){var n=a[l];var m=n.parentNode.Field;if(!m||!m.PopupContents){continue}var p=aa_ctx(n.ajaxart?n.ajaxart.params:ajaxart.newContext(),{_Input:[n]});var b=m.PopupContents([],p)[0];var o=jQuery(g).find(".aa_container")[0];if(b&&o){o.appendChild(jQuery('<div class="pagedt_pagebreak"/>')[0]);o.appendChild(b);jQuery(b).css("height","300px").css("overflow","auto")}}return g},SamplePageXtmlFromGallery:function(b,f,a){if(!window.aav_GalleryItems){return}var d=aa_text(f,b,"GalleryItem",a);var g=aav_GalleryItems[d];return ajaxart.runNativeHelper(g,b,"Xtml",a)},PreLoadGalleryItem:function(d,g,b){if(!window.aav_GalleryItems){window.aav_GalleryItems={}}var f=aa_text(g,d,"GalleryItem",b);if(aav_GalleryItems[f]){return ajaxart.run(g,d,"AfterLoad",b)}var a={cache:false,type:"GET",httpHeaders:[],url:"bartdev.php?op=loadnode&contenttype=bart_sample&id="+f};a.success=function(m){var l=ajaxart_server_content2result(m);var h=aa_text(g,d,"GalleryItem",b);aav_GalleryItems[h]=l;ajaxart.run(g,d,"AfterLoad",aa_ctx(b,{_GalleryItem:l}))};a.error=function(){ajaxart.run(g,d,"AfterLoad",b)};jQuery.ajax(a)},FieldWithContainingFieldData:function(d,g,b){var f=aa_first(g,d,"FieldXtml",b);if(!f){return}var a=aa_run(g,d,"FieldData",b);if(!a[0]){return}var h=aa_first(a,f,"",b);if(!h){return}h.OrigFieldData=h.FieldData;h.FieldData=function(l,m){return h.OrigFieldData(a,m)};return[h]},ShowPageFromGallery:function(b,d,a){if(!window.aav_GalleryItems){window.aav_GalleryItems={}}var f={};f.LoadItem=function(g,h){var m=aa_text(d,b,"GalleryItem",a);if(aav_GalleryItems[m]){return aav_GalleryItems[m]}var l={cache:false,type:"GET",httpHeaders:[],url:"bartdev.php?op=loadnode&contenttype=bart_sample&id="+m};l.success=function(p){var o=ajaxart_server_content2result(p);var n=aa_text(d,b,"GalleryItem",a);aav_GalleryItems[n]=o;ajaxart_async_CallBack(o,h)};l.error=function(){ajaxart_async_CallBack([],h)};ajaxart_async_Mark(h);jQuery.ajax(l)};return ajaxart.runNativeHelper(d,b,"Control",aa_ctx(a,{_GalleryLoader:[f]}))},CleanInspectSelectedObject:function(b,d,a){jBart.studiobar.object=null;if(aa_studio_edit_mode.active){aa_studio_edit_mode.cleanSelectedMarks()}else{jBart.studiobar.showObjectElements(null)}},ShowSelectedObjectElements:function(b,d,a){if(jBart.studiobar.object){aa_show_selected_object_marks()}},HideSelectedObjectIndication:function(b,d,a){jQuery(".jbstudio_constant_selected_box").css("display","none")},RefreshSelectedObject:function(b,d,a){if(jBart.studiobar.object){window.inJBartRefresh=true;try{if(jBart.studiobar.object.Refresh){jBart.studiobar.object.Refresh(d,a)}aa_show_selected_object_marks()}catch(f){ajaxart.logException(f)}window.inJBartRefresh=false}},InspectSelectedObject:function(b,f,a){if(jBart.studiobar.object&&jBart.studiobar.object.Xtml&&jBart.studiobar.object.Xtml.tagName=="dtnode"){return[jBart.studiobar.object]}if(jBart.studiobar.object){var n=jQuery(jBart.studiobar.object.Xtml).parents().slice(-1)[0];if(n&&aa_tag(n)!="bart_sample"&&aa_tag(n)!="jbart_project"&&aa_tag(n)!="xtml"){jBart.studiobar.object=null}}if(!jBart.studiobar.object){if(!a.vars._BartContext){return[]}jBart.studiobar.object={isObject:true};var m=a.vars._BartContext[0].AppXtml[0];var d=window.location.href.match(/wpage=([a-zA-Z0-9]+)/);var g=d?d[1]:null;var h=null;if(g){h=aa_xpath(m,"../../Component[@id='"+g+"']/xtml")[0]}if(!h){var l=aa_totext(aa_xpath(m,"MainPage1/@t")).split(".")[1];h=aa_xpath(m,"../../Component[@id='"+l+"']/xtml")[0]}if(!h){h=aa_xpath(m,"../../Component[@type='jbart.MyWidgetPage']/xtml")[0]}h=h||aa_xpath(m,"Pages/Page")[0];jBart.studiobar.object.Xtml=h;jBart.studiobar.object.Element=a.vars._BartContext[0].ControlHolder&&a.vars._BartContext[0].ControlHolder[0];aa_show_selected_object_marks()}return[jBart.studiobar.object]},OpenPropertiesWindow:function(h,l,g){var d=false;var b=jQuery("body").find(".aa_dlg");for(var f=0;f<b.length;f++){if(b[f].Dialog.Identifier=="jBart Inspect Properties"){b[f].Dialog.Close()}}if(aa_use_left_pane()&&(!window.bartdt_capture_level||window.bartdt_capture_level!="infra")){aa_left_pane().ShowSelectedObject()}else{ajaxart.runNativeHelper(l,h,"Open",g)[0]}var m=aa_xtml_to_path(jBart.studiobar.object.Xtml);if(g.vars._WidgetXml){var a=g.vars._WidgetXml[0].getAttribute("id")+"_prop_path";ajaxart.cookies.writeCookie(a,m)}},PropertiesWindowClosed:function(d,f,b){if(b.vars._WidgetXml){var a=b.vars._WidgetXml[0].getAttribute("id")+"_prop_path";ajaxart.cookies.writeCookie(a,"")}},RestorePopupsState:function(f,g,d){var b=d.vars._WidgetXml[0].getAttribute("id")+"_prop_path";var h=ajaxart.cookies.valueFromCookie(b);if(h){var a=aa_path_to_xtml(h,d);if(a){ajaxart.runNativeHelper([a],f,"OpenPropertiesWindow",d)}}},ListenToAltC:function(b,f,a){var d=false;if(!jBart.studiobar.altCListener){jQuery(document).keydown(function(g){if(event.keyCode==18){d=true}if(g.keyCode==67&&d){jBart.studiobar.altCListener()}if(g.keyCode==78&&d){jBart.studiobar.altNListener()}});jQuery(document).keyup(function(g){d=false})}jBart.studiobar.context=a;jBart.studiobar.altCListener=function(){ajaxart.runComponent("bart_dt.Inspect",[],a)};jBart.studiobar.altNListener=function(){ajaxart.runComponent("bart_dt.InspectInfra",[],a)}},SetSelectedStudiobarObject:function(b,d,a){jBart.studiobar.object=jBart.studiobar.objectFromXtml(aa_first(d,b,"Xtml",a));aa_show_selected_object_marks()},Inspect:function(b,d,a){jBart.studiobar.context=a;bartdt_captured_element=jQuery([]);window.bartdt_capture_level=aa_text(d,b,"Level",a);aa_incapture=true;if(window.captureEvents){window.onclick=bartdt_capture_click;window.onmousemove=bartdt_capture_mousemove;window.onmousup=bartdt_capture_mouseup;window.onmousdown=bartdt_capture_mousedown;window.onkeydown=bartdt_capture_keydown;if(window.addEventListener){window.addEventListener("DOMMouseScroll",bartdt_capture_mousewheel,false)}window.onmousewheel=bartdt_capture_mousewheel}else{document.onclick=bartdt_capture_click;document.onmousemove=bartdt_capture_mousemove;document.onkeydown=bartdt_capture_keydown;document.onmousup=bartdt_capture_mouseup;document.onmousdown=bartdt_capture_mousedown;document.onmousewheel=bartdt_capture_mousewheel}return[]},InputOfCustomXtml:function(b,d,a){if(!ajaxart.isxml(d)){return[]}var f=d[0];var n="";var h=f;var g=null;h=h.parentNode;while(h!=null){if(h.tagName=="Field"){var m=h.getAttribute("Path");if(m&&m!=""){n=m+"/"+n}}if(h.tagName=="Page"){g=aa_first([],h,"",a);break}h=h.parentNode}var l=ajaxart.runNativeHelper([g],b,"PageInput",a);if(n!=""&&n.charAt(n.length-1)=="/"){n=n.substring(0,n.length-1)}if(n!=""&&l.length>0){l=aa_xpath(l[0],n)}return l},ResourcesContext:function(f,g,d){var a=ajaxart.newContext();var m=ajaxart_bart_getContext(d);try{var l=m.Resources;for(var b=0;b<l.length;b++){a.vars[ajaxart.totext_array(l[b].ID)]=l[b].Items}}catch(h){}return[a]},PagesPopupLocation:function(b,d,a){var f=a.vars._Dialog[0];f.FixDialogPosition=function(h){jQuery(this.Frame).show();var g=jQuery(".fld_toolbar_more_button")[0];this.Frame.style.left=aa_absLeft(g)-Math.floor(this.Frame.offsetWidth/2)+"px";this.Frame.style.top=aa_absTop(g)+g.offsetHeight+"px";this.Frame.style.position="fixed"}},StudioPopupLocation:function(b,d,a){var f=a.vars._Dialog[0];f.FixDialogPosition=function(p){jQuery(this.Frame).show();if(p){this.Frame.style.right="3px";this.Frame.style.top="52px";this.Frame.style.position="fixed"}var g=aa_text(d,b,"Popup",a)=="properties"?"aa_studio_tree":"aa_studio_properties";var l=jQuery("."+g);if(l.length){var h=parseInt(this.Frame.style.right.split("px")[0]);var n=h+this.Frame.offsetWidth;var m=parseInt(l[0].style.right.split("px")[0]);var o=m+l[0].offsetWidth;if(o>=h&&m<=n){if(m>this.Frame.offsetWidth){this.Frame.style.right="3px"}else{this.Frame.style.right=o+5+"px"}}}}},PopupTreeLocation:function(b,d,a){var f=a.vars._Dialog[0];f.FixDialogPosition=function(q){var p=40;var o=50;var h=jQuery(this.Frame);if(jQuery(".aa_inspect_popup").length>0){var n=aa_int(d,b,"Padding",a);var m=jQuery(".aa_inspect_popup")[0];h.show();var g=ajaxart_screen_size();var l=aa_absLeft(m);if(l+m.offsetWidth+this.Frame.offsetWidth+n<g.width){o=l+m.offsetWidth+n+"px"}else{o=l-this.Frame.offsetWidth-n+"px"}p=m.style.top}this.Frame.style.top=p;this.Frame.style.left=o;this.Frame.style.position="fixed";h.show()}},XtmlToJSon:function(d,f,b){var a=aa_first(f,d,"Xtml",b);return[aa_xtml_to_json(a,"")]},PathToXtml:function(d,f,b){var g=aa_text(f,d,"FieldPath",b);var a=aa_path_to_xtml(g,b);return a?[a]:[]},XtmlToPath:function(d,f,b){var a=aa_first(f,d,"Xtml",b);return[aa_xtml_to_path(a)]}};function aa_path_to_xtml(l,h){var d=l.split("/");var a=d[0];if(!a){return null}var f=h.vars._BartContext[0].AppXtml[0]||h.vars._BartContext[0].AppXtml;page=aa_xpath(f,"../../Component[@id='"+a+"']/xtml")[0];if(!page){page=aa_xpath(f,"Pages/Page[@ID='"+a+"']")[0]}if(!page){return null}var b="";for(var g=1;g<d.length;g++){if(g>1){b+="/"}b+="Field[@ID='"+d[g]+"']"}return b!=""?aa_xpath(page,b)[0]:page}function aa_xtml_to_path(a){var b="";for(current=a;current!=null;current=current.parentNode){if(!current.getAttribute("ID")){return""}if(b!=""){b="/"+b}b=current.getAttribute("ID")+b;if(aa_tag(current)=="xtml"||aa_tag(current)=="Page"){break}}return b}function aa_xtml_to_json(h,d,m){var a={};for(var b=h.firstChild;b!=null;b=b.nextSibling){if(b.nodeType!=1){continue}var o=aa_tag(b);if(a[o]){a[o].Count++}else{a[o]={Count:1,Written:0}}}var f=d;if(!m){f+=aa_tag(h)+": "}f+="{ ";var l=true;for(var g=0;g<h.attributes.length;g++){if(l){l=false}else{f+=", "}f+=h.attributes[g].nodeName+':"'+h.attributes[g].nodeValue+'"'}if(h.getAttribute("t")=="xml.Xml"||h.getAttribute("t")=="ui.Html"){f+="\r"+d+" ";return f+', Xml: "'+ajaxart.xml.prettyPrint(ajaxart.childElem(h,"*"),"",true).replace('"','"')+'" }'}for(var b=h.firstChild;b!=null;b=b.nextSibling){if(b.nodeType==1){if(l){l=false}else{f+=", "}f+="\r"+d;var n=a[aa_tag(b)];if(n.Count>1&&n.Written==0){f+=aa_tag(b)+": [ \r"}f+=aa_xtml_to_json(b,d+" ",n.Count>1);n.Written++;if(n.Count>1&&n.Written==n.Count){f+=" ]"}}if(b.nodeType==4){return f.substring(0,f.length-2)+'"'+b.nodeValue+'"'}}f+=" }";return f}function aa_find_top_widget(){var a=jQuery(".gallery_runtime_screen");if(a.length==0){a=jQuery(".aa_preview")}if(a.length==0){a=jQuery(".aa_widget")}return a}aa_gcs("jbart_wizards_dt",{HandleDataSourceChange:function(d,g,b){var a=aa_text(g,d,"DataSourceUrl",b);if(a==""){return[]}jQuery(".feedback_image").attr("src","images/loading.gif").css("height","16px");var f=function(h){var l=jbart_data(h,"single");if(l&&l.length>0&&!ajaxart.ishtml(l)){jQuery(".feedback_image").attr("src","images/studio/yes.gif");ajaxart.run(l,d,"OnSuccess",b)}else{jQuery(".feedback_image").attr("src","images/studio/failure.png").attr("title",h)}};jQuery.ajax({type:"POST",url:"get.php",cache:false,data:{contents:a},success:f,error:function(){jQuery(".fld_DataFeedback").text("loading failed")}})},GuessPathsFromXml:function(g,h,f){var n=aa_first(h,g,"Item",f);var d=aa_first(h,g,"WizardData",f);if(!n||n.nodeType!=1||d.nodeType!=1){return}var m=n.attributes;for(var l=0;l<m.length;l++){var b=n.attributes.item(l).name.toLowerCase();if(b=="title"||b=="name"){d.setAttribute("title","%@"+n.attributes.item(l).name+"%")}if(b=="link"||b=="path"){d.setAttribute("link","%@"+n.attributes.item(l).name+"%")}if(b.indexOf("image")>-1||b.indexOf("photo")>-1){d.setAttribute("image","%@"+n.attributes.item(l).name+"%")}if(b.indexOf("text")>-1||b.indexOf("description")>-1){d.setAttribute("extra_text","%@"+n.attributes.item(l).name+"%")}}var a=aa_xpath(n,"*");for(var l=0;l<a.length;l++){var o=a[l].tagName;var b=o.toLowerCase();if(b=="title"||b=="name"){d.setAttribute("title","%"+o+"%")}if(b=="link"||b=="path"){d.setAttribute("link","%"+o+"%")}if(b.indexOf("image")>-1||b.indexOf("photo")>-1){d.setAttribute("image","%"+o+"%")}if(b.indexOf("text")>-1||b.indexOf("description")>-1){d.setAttribute("extra_text","%"+o+"%")}}},eBayClean:function(g,l,b){var n=aa_first(l,g,"Xml",b);if(!n){return[]}n=ajaxart.xml.clone([n]);var q=aa_xpath(n,"item");for(var m=0;m<q.length;m++){var t=q[m];var p=aa_totext(aa_xpath(t,"description"));var f=p.split('src="')[1]||"";var h=f.split('"')[0];if(h){h=h.replace(/80.jpg/,"140.jpg");var r=t.ownerDocument.createTextNode(h);var s=t.ownerDocument.createElement("Image");s.appendChild(r);t.appendChild(s)}var o=aa_totext(aa_xpath(t,"CurrentPrice"));var a=o.substring(0,o.length-2);if(a==""){a="0"}o="$"+a+"."+o.substring(o.length-2);var r=t.ownerDocument.createTextNode(o);var d=t.ownerDocument.createElement("Price");d.appendChild(r);t.appendChild(d)}return[n]}});function ajaxart_firstlevel_fields(f){var b=[];for(var d=0;d<f.Fields.length;d++){var a=f.Fields[d];if(a.IsVirtualGroup){ajaxart.concat(b,ajaxart_firstlevel_fields(a))}else{b.push(a)}}return b}function bartdt_subfields(g,l){var b=[];if(!l){l=""}var a=ajaxart.xml.xpath(g,"Field");for(var d=0;d<a.length;d++){var h=a[d];var f={Field:h};var m=h.getAttribute("Path")||"";if(l==""){f.Path=m}else{if(m==""){f.Path=l}else{f.Path=l+"/"+m}}ajaxart.concat(b,bartdt_subfields(h,f.Path));if(f.Field.getAttribute("t")=="field.XmlField"){b.push(f)}}return b}function bartdt_field_bypath(f,h){var a=ajaxart.xml.xpath(f,"Field");for(var d=0;d<a.length;d++){var g=a[d];if(g.getAttribute("Path")==h){return g}if(g.getAttribute("t")=="field.XmlField"){if(g.getAttribute("Path")==""){var b=bartdt_field_bypath(g,h);if(b){return b}}if(h.indexOf(g.getAttribute("Path")+"/")==0){return bartdt_field_bypath(g,h.substring(h.indexOf("/"+1)))}}}return null}bartdt_capture_box=null;bartdt_captured_element=null;function bartdt_inspect_element_ispage(d){if(!d.Cntr||!d.ajaxart||!d.ajaxart.params.vars._BartContext){return false}var f=bartdt_element_pageid(d);if(f==""||f=="ItemList"||f=="runtime"){return false}var a=d.ajaxart.params.vars._BartContext[0].Pages;for(var b=0;b<a.length;b++){if(a[b].ID[0]==f){return true}}var g=d.ajaxart.params.vars._BartContext[0].AppXtml[0].parentNode.parentNode;if(aa_xpath(g,"Component[@id='"+f+"']").length>0){return true}return false}function bartdt_element_pageid(a){var b=aa_totext(a.Cntr.ID);if(b.indexOf("__")==b.length-2){b=b.substring(0,b.length-2)}if(bartdt_capture_level=="sample"&&b=="runtime"){return""}return b}function bartdt_element_fieldid(d){if(!d){return""}var b=d.className.split(" ");for(var a=0;a<b.length;a++){if(b[a].indexOf("fld_")==0){return b[a].substring(4)}}return""}function bartdt_capture_mousemove(b){var a=(typeof event!=="undefined")?event.srcElement:b.target;if(a.className=="captureboxtext"){bartdt_capture_box.remove();bartdt_capture_box=null;return true}if(a.id=="capturebox"){a=ajaxart_find_control_at_position(jQuery("body"),b)[0]}jBart.studiobar.originalObjectWhenInspecting=bartdt_capture_mousemove_find_parent(a,jBart.studiobar.originalObjectWhenInspecting)}function bartdt_capture_mouseup(a){return aa_stop_prop(a);return false}function bartdt_capture_mousedown(a){return aa_stop_prop(a);return false}function bartdt_capture_mousewheel(a){var b=0;if(!a){a=window.event}if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=-a.detail/3}}if(b>0){if(jBart.studiobar.objectWhenInspecting){jBart.studiobar.parentObjectWhenInspecting(jBart.studiobar.objectWhenInspecting)}}a.preventDefault();a.returnValue=false}function bartdt_capture_keydown(a){if(a.keyCode==27){bartdt_stop_capture();jQuery(bartdt_capture_box).hide();bartdt_captured_element=jQuery([])}if(a.keyCode==38){if(jBart.studiobar.objectWhenInspecting){jBart.studiobar.parentObjectWhenInspecting(jBart.studiobar.objectWhenInspecting)}}if(a.keyCode==13){bartdt_capture_click()}}function bartdt_capture_click(b){if(!jBart.studiobar.objectWhenInspecting){return}bartdt_stop_capture();if(bartdt_capture_box){bartdt_capture_box.hide()}jBart.studiobar.object=jBart.studiobar.objectWhenInspecting;var a=aa_ctx(jBart.studiobar.context,{_DomEvent:[b]});ajaxart.runComponent("bart_dt.OpenPropertiesWindow",[],a);ajaxart.runComponent("bart_dt.SynchTreePopup",[],a);jBart.studiobar.context=jBart.studiobar.objectWhenInspecting=null;jBart.studiobar.showObjectElements(jBart.studiobar.object);return aa_stop_prop(b)}function bartdt_stop_capture(){jBart.studiobar.originalObjectWhenInspecting=null;aa_incapture=false;if(window.captureEvents){window.captureEvents(Event.Click);window.onclick=null;window.onmousemove=null;window.onkeydown=null;window.onmouseup=null;window.onmousedown=null;window.onmousewheel=null;if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",bartdt_capture_mousewheel,false)}}else{document.onclick=null;document.onmousemove=null;document.onkeydown=null;document.onmousedown=null;document.onmousewheel=null}}function aa_isjbart(){if(typeof(aa_jbart)=="undefined"||!aa_jbart){return false}return true}aa_field_dt_dual_options=null;aa_gcs("jbart_studio",{EnterEditMode:function(b,d,a){aa_studio_edit_mode.init();a.vars._JBartStudio[0].EditMode="true"},ExitEditMode:function(b,d,a){aa_studio_edit_mode.exit();a.vars._JBartStudio[0].EditMode=""},ToggleDesignTimeClass:function(d,f,b){var a=aa_bool(f,d,"DesignTime",b);if(a){jQuery("body").addClass("designtime")}else{jQuery("body").removeClass("designtime")}},AddStudioBackground:function(b,d,a){var f=ajaxart_fieldaspect_getField(a);aa_field_handler(f,"ModifyControl",function(g,n,l,h,m){$(g).addClass("aa__widget");aa_addOnAttach(g,function(){$("body").addClass("studio_with_widget")});aa_addOnDetach(g,function(){if($(".aa__widget").length==0){$("body").removeClass("studio_with_widget")}})});return[]},LeftPane:function(b,d,a){window.jbLeftPane={Hidden:false,LeftPaneMode:aa_use_left_pane(),Init:function(){var g=a.vars._WidgetXml[0].getAttribute("id")+"_selected_path";var h=ajaxart.cookies.valueFromCookie(g);if(h&&aa_use_left_pane()){var f=aa_path_to_xtml(h,a);if(f){jBart.studiobar.object=jBart.studiobar.objectFromXtml(f)}}aa_run_component("bart_dt.InspectSelectedObject",[],a)},Control:function(){return ajaxart.runNativeHelper([this],b,"Control",a)},ToggleLeftPaneUsage:function(){if(aa_use_left_pane()){this.Hide();ajaxart.cookies.writeCookie("UseLeftPane","");this.LeftPaneMode=false}else{ajaxart.cookies.writeCookie("UseLeftPane","true");this.LeftPaneMode=true;this.Show()}},Hide:function(){var g=$(".fld_LeftPane");var f=g.width();g.animate({"margin-left":"-"+f+"px"},500,"swing");this.Hidden=true;aa_studio_edit_mode.clearSelectedMarks()},Show:function(){var f=$(".fld_LeftPane");f.parent().show();var f=$(".fld_LeftPane");f.css("margin-left","-"+f.width()+"px");f.animate({"margin-left":"0px"},500,"swing");this.Hidden=false;aa_studio_edit_mode.clearSelectedMarks()},ShowSelectedObject:function(){aa_refresh_field(["LeftPane"],"screen",false,null,a);if(this.Hidden){this.Show()}var g=aa_xtml_to_path(jBart.studiobar.object.Xtml);if(a.vars._WidgetXml){var f=a.vars._WidgetXml[0].getAttribute("id")+"_selected_path";ajaxart.cookies.writeCookie(f,g)}}};return[window.jbLeftPane]}});function aa_left_pane(){return window.jbLeftPane}function aa_use_left_pane(){return ajaxart.cookies.valueFromCookie("UseLeftPane")=="true"}aa_gcs("bart_dt_compress",{DependentFunctions:function(d,h,b){var a=aa_text(h,d,"Code",b);var l=["aa_","ajaxart_","ajaxart.","ajaxart.xml.","ajaxart.cookies.","ajaxart.ui.","ajaxart.dialog.","ajaxart.yesno.","jBart.utils.","jBart.db.","jBart."];var g=[];for(var r in l){var n=l[r];var o=0,m,f,q;while(true){m=a.indexOf(n,o);if(m==-1){break}f=a.indexOf("(",m);if(f==-1){break}var p=a.substring(m+n.length,f);if(p.match(/^[a-zA-Z0-9_]+$/)){g.push(n+p)}o=m+n.length}}return g},JSMinCompress:function(d,g,b){var m=aa_text(g,d,"Script",b);var a=aa_text(g,d,"Level",b);var h=aa_text(g,d,"Comments",b);var n=2;if(a=="minimal"){n=1}else{if(a=="conservative"){n=2}else{if(a=="agressive"){n=3}}}try{var f=jsmin(h,m,n);if(f){return[f]}else{return[]}}catch(l){ajaxart.log("error in js compression "+l.message||l,"error");return[m]}},FindAllPts:function(g,l,f){var d=aa_first(l,g,"Xtml",f);var h=","+aa_text(l,g,"BlackList",f)+",";var a=f.vars.JsInComponents&&f.vars.JsInComponents[0];var b=[];if(d==null||d.nodeType!=1){return[]}function m(n){if(a&&n.nodeType==1){var p=n.getAttribute("Javascript")||n.getAttribute("Code")||aa_cdata_value(aa_xpath(n,"Javascript")[0])||aa_cdata_value(aa_xpath(n,"Code")[0]);if(p&&p.indexOf("%")!=0){a.JSSnippets=a.JSSnippets||{};a.JSSnippets[p]=true}}var o=n.getAttribute("t");if(o&&h.indexOf(","+o+",")==-1){b.push(o)}for(var q=n.firstChild;q;q=q.nextSibling){if(q.nodeType==1){m(q)}}}m(d);return b},CodeSnippets:function(f,g,d){var b=[];var a=aa_first(g,f,"JsInComponents",d);if(!a||!a.JSSnippets){return b}for(var h in a.JSSnippets){if(a.JSSnippets[h]==true){b.push(h)}}return b},CompressComponent:function(f,h,d){var a=aa_first(h,f,"Component",d);var b=aa_createElement(a,"C");b.setAttribute("id",a.getAttribute("id"));if(a.getAttribute("execution")){b.setAttribute("execution",a.getAttribute("execution"))}for(var g=a.firstChild;g!=null;g=g.nextSibling){if(g.nodeType==1){if(aa_tag(g)!="Param"){b.appendChild(aa_importNode(g,b))}else{var l=aa_createElement(b,"Param");l.setAttribute("name",g.getAttribute("name"));if(g.getAttribute("script")){l.setAttribute("script",g.getAttribute("script"))}var m=ajaxart.childElem(g,"Default");if(m!=null){l.appendChild(aa_importNode(m,l))}b.appendChild(l)}}}return[b]},FunctionDefinition:function(profile,data,context){var name=aa_text(data,profile,"Name",context);var func="";try{func=""+eval(name)}catch(e){}return[func]},ContentOfGC:function(g,l,b){var m=ajaxart.totext_array(l);var a=m.indexOf(".");var f=m.substring(0,a);var d=m.substr(a+1);var h;if(ajaxart.gcs[f]&&ajaxart.gcs[f][d]){return[d+":"+ajaxart.gcs[f][d]]}else{return[""]}},JsFunctionCode:function(profile,data,context){var funcName=ajaxart.totext_array(data);if(funcName.indexOf(".")==-1){var func_str=""+window[funcName];if(func_str.indexOf("function (")==0){return["function "+funcName+" "+func_str.substring(8)]}else{return[func_str]}}else{return[funcName+" = "+eval(funcName)]}}});aa_gcs("addfield_dt",{ParentXtml:function(f,d,b){jbartstudio_ensure_object(b);var a=jBart.studiobar.object&&jBart.studiobar.object.Xtml;if(!a){return[]}if(!jbartstudio_is_group(a)){a=a.parentNode}return[a]}});aa_gcs("fieldgenerator_dt",{SuggestFieldsFromSampleData:function(g,m,a){var l=[];var q=aa_first(m,g,"SampleData",a);if(!q){return}var d={};if(q.nodeType==1){for(var n=0;n<q.attributes.length;n++){var p=q.attributes.item(n).name;o({id:p,path:"@"+p,sample:q.getAttribute(p)})}for(var b=q.firstChild;b;b=b.nextSibling){if(b.nodeType!=1){continue}if(h(b)){o({id:b.tagName,path:b.tagName,sample:jQuery(b).text()})}else{if(f(b)){if(!d[b.tagName]){o({id:b.tagName,path:b.tagName,isItemlist:true})}d[b.tagName]=true}else{o({id:b.tagName,path:b.tagName,isSection:true})}}}}return l;function f(t){var s=aa_xpath(q,t.tagName);return s.length>1}function h(s){return jQuery(s).text().trim()!=""}function o(t){t.title=t.title||aa_capitalize_each_word(t.id.replace(/_/g," "));t.isSection=t.isSection?"true":"false";t.sample=t.sample||"";if(!t.type){var s=t.id.toLowerCase();if(r(s,["image","photo","simg"])){t.type="image"}if(r(t.sample,[".jpg",".png",".gif"])){t.type="image"}t.type=t.type||"text"}l.push(t)}function r(u,s){for(var t=0;t<s.length;t++){if(u.indexOf(s[t])>-1){return true}}return false}}});function bartdt_capture_mousemove_find_parent(g,b){var d=jBart.studiobar.objectFromElement(g);if(d&&b&&d.Elements[0]==b.Elements[0]){return b}jBart.studiobar.objectWhenInspecting=d;if(!d){if(bartdt_capture_box){bartdt_capture_box.hide()}return}if(bartdt_capture_box==null){bartdt_capture_box=jQuery('<div class="capturebox" ><div class="top"> <div class="captureboxtext"></div> </div><div class="right"/><div class="bottom"/><div class="left"/></div>');bartdt_capture_box.appendTo("body")}jQuery(bartdt_capture_box).find(".captureboxtext").html(d.Title);var l=d.Elements[0];var m=jQuery(l).offset();var h={x:m.left,y:m.top};var f=jQuery(l).outerWidth();var a=jQuery(l).outerHeight();jQuery(bartdt_capture_box).find(".top").css("left",h.x-2).css("top",h.y-3).width(f+5);jQuery(bartdt_capture_box).find(".bottom").css("left",h.x-2).css("top",h.y+a).width(f+5);jQuery(bartdt_capture_box).find(".left").css("left",h.x-3).css("top",h.y-2).height(a+5);jQuery(bartdt_capture_box).find(".right").css("left",h.x+f).css("top",h.y-2).height(a+5);bartdt_capture_box.show();return d}jBart.studiobar.pageId2pageXtml=function(b){if(b==""||b=="ItemList"||b=="runtime"){return null}if(!jBart.studiobar.context.vars._WidgetXml){return""}var f=jBart.studiobar.context.vars._WidgetXml[0];var d=aa_xpath(f,"bart_dev")[0]||f;var a=aa_xpath(d,"db/bart_unit/bart_unit/Component[@id='"+b+"']/xtml");if(a.length>0){return a[0]}a=aa_xpath(d,"db/bart_unit/bart_unit/Page[@id='"+b+"']");if(a.length>0){return a[0]}return null};jBart.studiobar.isXtmlInWidget=function(a){if(!a){return false}var b=(a.nodeType==2)?aa_xpath(a,"..")[0]:a;for(;b&&b.nodeType==1;b=b.parentNode){if(b.tagName&&b.tagName=="bart_sample"&&b.getAttribute("_type")=="bart_sample"){return true}if(b.tagName&&b.tagName=="jbart_project"&&b.getAttribute("_type")=="jbart_project"){return true}if(b.tagName&&b.tagName=="bart_dev"&&b.getAttribute("id")!="bartgallery"){return true}}return false};jBart.studiobar.objectFromXtml=function(a){var b={Xtml:a};if(a&&a.nodeType==1&&a.tagName=="Field"){b.Elements=jBart.studiobar.ElementsFromXtml(a);if(b.Elements[0]){b.Field=b.Elements[0].Field;b.Title=b.Field&&b.Field.Title;b.Data=b.Elements[0].Data||b.Elements[0].FieldData}}jBart.studiobar._addRefreshMethod(b);return b};jBart.studiobar.ElementsFromXtml=function(a){var h=a.getAttribute("ID");if(!h){return[]}var b=jQuery(".fld_"+h);var f=[];for(var d=0;d<b.length;d++){try{if(b[d]&&b[d].Field&&b[d].Field.XtmlSource&&b[d].Field.XtmlSource[0].script==a){f.push(b[d])}else{if(b[d]&&b[d].ajaxart&&b[d].ajaxart.script==a){f.push(b[d])}}}catch(g){}}if(!f.length&&(a.parentNode&&a.parentNode.getAttribute("type")=="jbart.MyWidgetPage")||aa_tag(a)=="Page"){b=jQuery(".Page_"+h);for(var d=0;d<b.length;d++){f.push(b[d])}}return f};jBart.studiobar._addRefreshMethod=function(a){a.Refresh=function(m,g){var d=this.Xtml;if(g.vars.RefreshParent&&g.vars.RefreshParent[0]=="true"){d=d.parentNode}var n=30;var b="StudioRefresh "+d.getAttribute("id");aa_cancel_delayed_action(b);var h=jBart.studiobar.ElementsFromXtml(d);if(h.length==0){for(var l=d;!h.length&&l&&aa_tag(l)!="Component";l=l.parentNode){h=jBart.studiobar.ElementsFromXtml(l)}}if(h.length==0&&d.getAttribute("ID")){h=jQuery(".fld_"+d.getAttribute("ID"))}if(h.length==0&&jBart.studiobar.context){jBart.studiobar.context.vars._BartDevDtContext[0].Refresh([],jBart.studiobar.context);return}if(h[0]&&h[0].Field){function f(t,p){var r=new Date().getTime();for(var q=t;q<p.length;q++){if((new Date().getTime()-r)>n){aa_run_delayed_action(b,function(){f(q,p)});return}elem=p[q];if(elem.Field){if(elem.Field.XtmlSource){var o=elem.Field.XtmlSource[0];var u=aa_first(o.input,o.script,"",o.context);u.counter=++ajaxart.unique_number;if(u){var v=jQuery(elem).hasClass("aa_cell_element")?elem:jQuery(elem).parents(".aa_cell_element")[0];if(v&&v.Field==elem.Field){v.Field=u}elem.Field=u}}var s=elem.jbContext;if(!s&&elem.parentNode){s=elem.parentNode.jbContext}if(s){aa_refresh_cell(elem,s)}}}}f(0,h)}else{if(h[0]&&h[0].Cntr&&h[0].ajaxart){a.Elements=[jBart.utils.refresh(h[0])]}}}};jBart.studiobar.objectFromElement=function(d){for(var f=d;f&&f.nodeType==1;f=f.parentNode){var b={isObject:true,Elements:[f],Field:f.Field};jBart.studiobar._addRefreshMethod(b);if(f.Field&&f.Field.XtmlSource){b.Field=f.Field;b.Xtml=f.Field.XtmlSource[0].script;var g=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!g)||(bartdt_capture_level=="infra"&&g)){continue}if(b.Xtml.nodeType==1&&b.Xtml.getAttribute("t")=="field.AddFieldsHere"){continue}b.Data=f.Data||f.FieldData;b.Title=f.Field.Title;return b}if(f.Cntr){var a=aa_totext(f.Cntr.ID);if(a.indexOf("__")==a.length-2){a=a.substring(0,a.length-2)}b.Xtml=jBart.studiobar.pageId2pageXtml(a);if(!b.Xtml){continue}var g=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!g)||(bartdt_capture_level=="infra"&&g)){continue}b.Data=f.Cntr.Items.Items;b.Title="Page "+a;return b}if(jQuery(f).hasClass("aa_operation")){b.Xtml=f.ajaxart.data[0].XtmlSource[0].script;var g=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!g)||(bartdt_capture_level=="infra"&&g)){continue}b.Data=[];b.Title=f.ajaxart.data[0].Id;return b}}return null};jBart.studiobar.showObjectElements=function(f){jQuery(".jbstudio_constant_selected_box").css("display","none");var s=ajaxart.cookies.valueFromCookie("jbstudio_indication")=="hide";var l=!s;if(l){var m=jQuery.find(".jbstudio_constant_selected_box")[0];if(!m){m=jQuery('<div class="jbstudio_constant_selected_box"><div class="line top"/><div class="line left"/><div class="line bottom"/><div class="line right"/><div class="corner topleft"/><div class="corner topright"/><div class="corner bottomleft"/><div class="corner bottomright"/></div>')[0];jQuery(m).find(">div").css("position","absolute");document.body.appendChild(m)}var r=jQuery(m);r.css("display","none");var b=f&&f.Elements&&f.Elements[0];if(!b){return}var q=aa_absLeft(b),n=aa_absTop(b),t=jQuery(b).outerHeight(),a=jQuery(b).outerWidth();var p=1;q-=p+1;n-=p+1;a+=p*2+1;t+=p*2+1;r.css("left",q).css("top",n).height(t).width(a);r.find(".left").css("left",q).css("top",n).height(t);r.find(".right").css("left",q+a).css("top",n).height(t);r.find(".top").css("left",q).css("top",n).width(a);r.find(".bottom").css("left",q).css("top",n+t).width(a);var d=2;r.find(".topleft").css("left",q-d).css("top",n-d);r.find(".topright").css("left",q+a-d).css("top",n-d);r.find(".bottomleft").css("left",q-d).css("top",n+t-d);r.find(".bottomright").css("left",q+a-d).css("top",n+t-d);r.css("display","block");return}var h=jQuery('<div class="jbstudio_show_objects" />');if(!f||!f.Elements){return}for(var g=0;g<f.Elements.length;g++){var m=jQuery('<div class="jbstudio_show_object"/>');var b=f.Elements[g];var o={x:aa_absLeft(b),y:aa_absTop(b)};m.css("position","absolute").css("left",o.x).css("top",o.y).width(jQuery(b).outerWidth()).height(jQuery(b).outerHeight());h.append(m)}h.fadeTo("1000",0.5,function(){h.fadeTo("1000",0,function(){h.remove()})});jQuery("body").append(h)};jBart.studiobar.parentObjectWhenInspecting=function(a){var d=a.Elements[0];while(d){var b=jBart.studiobar.objectFromElement(d);if(!b){return}if(b.Xtml!=a.Xtml){bartdt_capture_mousemove_find_parent(d);return}d=d.parentNode}};function jbartstudio_ensure_object(b){if(jBart.studiobar.object){return}var d=b.vars._BartContext[0].AppXtml;var a=aa_xpath(d,"../../Component[@id='main']/xtml")[0];if(a){jBart.studiobar.object={Xtml:a}}}function jbartstudio_is_group(a){var b=a.getAttribute("t");var d=aa_component_definition(b);if(d&&aa_xpath(d,"Param[@name='Field']")[0]){return true}if(d&&aa_xpath(d,"Param[@name='Fields']")[0]){return true}return false}aa_gcs("jbart_studio",{JBartStudioObject:function(d,g,b){var h=ajaxart.runNativeHelper(g,d,"Object",b)[0];var f=h.UseJBartDB=(window.CloudJBartStudio)?"true":ajaxart.urlparam("jbartdb")=="true";var a=h.ContentType=ajaxart.urlparam("contenttype")||"jbart_project";h.BaseUrl=h.UseJBartDB?"//jbartdb.appspot.com/bart.php":"bartdev.php";h.LoadUserID=function(l,m){if(window.location.href.indexOf("artwaresoft.com")>-1){ajaxart_async_Mark(m);jQuery.ajax({url:"User",success:function(n){if(n.nodeType==9){n=n.firstChild}h.User=jQuery(n).text();ajaxart_async_CallBack([],m)},error:function(){ajaxart_async_CallBack([],m)}})}else{h.User=ajaxart.cookies.valueFromCookie("jbart_studio_user")}};h.SignOut=function(m,n){ajaxart.cookies.writeCookie("jbart_studio_user","");if(window.location.href.indexOf("artwaresoft.com")>-1){var l=window.location.href;window.location.href="http://buss-art.appspot.com/_ah/openid_logout?continue="+l}else{document.location.reload(true)}};h.CloneCurrentProject=function(l,m){h.NodeToClone=h.Project;h.CloneCounter=0;h.BaseNameForClone=h.BaseDisplayNameForClone="";h._AllocateCloneID()};h._JSLoadProject=function(l){var m={};m.success=function(n){if(n.nodeType==9){n=n.firstChild}if(n.getAttribute("_type")!=a){l.error();return}l.success(n)};m.error=function(){l.error()};if(f){m.contentType=a;m.id=l.id;jBart.db.get(m)}else{m.cache=false;m.type="GET";m.url="bartdev.php?op=loadnode&contenttype="+a+"&id="+l.id;jQuery.ajax(m)}};h.ClonePrototype=function(l,m){h.NodeToClone=null;h.CloneCounter=0;h.BaseNameForClone="";h.BaseDisplayNameForClone=prompt("Select a name for your new project (localhost only)","");h.BaseNameForClone=aa_string2id(h.BaseDisplayNameForClone);h.ShowProgressIndicator([{Text:"Creating a new widget - loading prototype",Status:"info"}],b);h._JSLoadProject({id:jQuery(l).attr("id"),success:function(n){h.NodeToClone=n;h.ShowProgressIndicator([{Text:"Creating a new widget - allocating widget id",Status:"info"}],b);h._AllocateCloneID()},error:function(){h.NodeToClone=jBart.parsexml('<jbart_project _type="jbart_project" id="sample" name="sample" modifiedDate="31/01/2011 10:37" dateCreated="16/01/2011 15:28" vid="6" type="widget" image="" description="" _wusers=""><bart_dev><db><bart_unit><bart_unit id="sample" _type="bart_unit" ns="sample"><Component id="App" type="bart.Application"><xtml t="bart.Application"><MainPage1 t="sample.main"/><Resources t="bart_resource.Resources"><Resource t="jbart_resource.Data" ResourceID="Data" ValueType="xml"><Value><![CDATA[<xml/>]]></Value></Resource></Resources><StyleGuide t="style_guide.JBart"/></xtml></Component><Component id="main" type="jbart.MyWidgetPage"><xtml t="control.Layout" ID="x" Title="x"><Layout t="layout.Default"/><Field t="control.Button" ID="My_First_Button" Title="My First Button"><Style t="btn.JBart"/></Field></xtml></Component><UIPref/></bart_unit></bart_unit></db></bart_dev><url url="?pagedt_path=x?studio_style_tabs_tab=Css"/></jbart_project>');h.ShowProgressIndicator([{Text:"Creating a new widget - allocating widget id",Status:"info"}],b);h._AllocateCloneID()}})};h._AllocateCloneID=function(){if(!h.BaseNameForClone){if(h.User){h.BaseNameForClone=h.User+"_"}else{h.BaseNameForClone=""}h.BaseNameForClone+=jQuery(h.NodeToClone).attr("id")+Math.floor(Math.random()*100)}if(h.CloneCounter==10){alert("could not create a new project");return}h.CloneCounter++;var n=h.BaseNameForClone;if(h.CloneCounter>1){n+=h.CloneCounter}var m={};m.success=function(o){if(o.nodeType==9){o=o.firstChild}if(o.getAttribute("reason")=="node does not exist"){l()}else{h._AllocateCloneID()}};m.error=function(o){if(o.code=="node does not exist"){l()}else{alert("could not create a new project")}};if(f){m.contentType=a;m.id=n;jBart.db.get(m)}else{m.cache=false;m.type="GET";m.url="bartdev.php?op=loadnode&contenttype="+a+"&id="+n;jQuery.ajax(m)}function l(){h.ProjectID=n;h.Project=h.NodeToClone;var o=jQuery(h.Project);o.attr("vid","1").attr("id",n).attr("type","widget").attr("_wusers","");if(f){o.attr("name","my "+o.attr("name"))}else{o.attr("name",h.BaseDisplayNameForClone||h.BaseNameForClone)}h.ShowProgressIndicator([{Text:"Creating a new widget - saving new widget",Status:"info"}],b);h._SaveClone()}};h._SaveClone=function(){var l={};l.success=function(m){h.ShowProgressIndicator([],b);h._AddProjectToMyProjects(g,b);h.EditProject([h.ProjectID],b)};l.error=function(m){h.ShowProgressIndicator([],b);var n=(m&&m.getAttribute("reason"))||"";alert(n+(n?". ":"")+"Could not save the new project")};if(f){l.data=h.Project;jBart.db.save(l)}else{l.cache=false;l.type="POST";l.contentType="application/x-www-form-urlencoded; charset=UTF-8";l.url="bartdev.php?op=savenode";l.data=ajaxart.xml2text(h.Project);l.httpHeaders=[];jQuery.ajax(l)}};h.ShowProjectPreview=function(l,m){var q=aa_totext(l);var o=jQuery("<div>Loading Widget...</div>")[0];if(this.Projects&&this.Projects.length>0){for(var p=0;p<this.Projects.length;p++){if(this.Projects.getAttribute("id")==q){n(this.Projects[p])}}}else{h._JSLoadProject({id:q,success:n,error:n});return[o]}function n(r){var s=r&&h._ShowProjectForPreview([r],m)[0];if(s){o.removeChild(o.firstChild);o.appendChild(s);aa_element_attached(s)}else{o.innerHTML="Could not show widget preview"}}return[o]};h.OpenProjectInNewTab=function(l,o){var n=aa_totext(l);var m=window.location.href.split("#")[0]+"#?project="+n;window.open(m,"_blank")};h.UploadProject=function(l,m){var n=aa_totext(l);if(!n){return}ajaxart_async_Mark(m);h._JSLoadProject({id:n,success:function(p){var o=aa_ctx(m,{_Project:[p]});var q=jBart.parsexml('<Xtml t="jbart_studio.ProjectWithJBartSources" Project="%$_Project%" />');var r=aa_first([],q,"",o);r.setAttribute("_vid","force");jBart.db.save({data:r,success:function(){ajaxart_async_CallBack([],m)},error:function(){ajaxart.log("could not upload "+n,"error");ajaxart_async_CallBack([],m)}})},error:function(){ajaxart.log("could not upload "+n,"error");ajaxart_async_CallBack([],m)}})};return[h]},RefreshBrowserTitle:function(d,f,b){var g=b.vars._JBartStudio[0];var a=g.Project;var h="JBart Studio";if(a&&a.getAttribute("name")){h+=" - "+a.getAttribute("name")}document.title=h},PromotedProjects:function(f,g,b){var d=aa_text(g,f,"Type",b);if(d=="features"){return jBart.promotedFeatureHeaders}if(d=="widgets"){return jBart.promotedProjectHeaders}if(d=="prototypes"){return jBart.projectPrototypeHeaders}if(d=="all"){var a=[];ajaxart.concat(a,jBart.projectPrototypeHeaders);ajaxart.concat(a,jBart.promotedProjectHeaders);ajaxart.concat(a,jBart.promotedFeatureHeaders);return a}return jBart.promotedProjectHeaders},IsInArtwaresoft:function(b,d,a){if(window.location.href.indexOf("artwaresoft.com")>-1){return["true"]}},DoSignup:function(f,g,b){var a=aa_first(g,f,"UserData",b);var h=b.vars._JBartStudio[0];var d={cache:false,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{userdata:ajaxart.xml2text(a)},httpHeaders:[],url:h.BaseUrl+"?op=signup"};d.success=function(l){if(l.nodeType==9){l=l.firstChild}if(l.getAttribute("type")=="failure"){b.vars._AsyncCallback.success=false;ajaxart.run([l.getAttribute("reason")],f,"OnFailure",b)}else{ajaxart.run(a,f,"OnSuccess",b)}ajaxart_async_CallBack([],b)};d.error=function(){b.vars._AsyncCallback.success=false;ajaxart.run(["no connection"],f,"OnFailure",b);ajaxart_async_CallBack([],b)};ajaxart_async_Mark(b);jQuery.ajax(d)},MyWidgets:function(profile,data,context){var studioObject=context.vars._JBartStudio[0];if(studioObject.User){return ajaxart.runNativeHelper(data,profile,"InUser",context)}else{var result=ajaxart.cookies.valueFromCookie("bartstudio_mywidgets");var out=ajaxart.parsexml("<MyWidgets />");try{if(result){eval("var mywidgets = "+result);for(var i=0;i<mywidgets.length;i++){var projXml=jQuery("<project />").attr("id",mywidgets[i].id).attr("name",mywidgets[i].name).attr("relation",mywidgets[i].relation)[0];ajaxart.xml.append(out,projXml)}}}catch(e){}return[out]}},RecentProjects:function(profile,data,context){var out=jBart.parsexml("<recent/>");var cookieVal=ajaxart.cookies.valueFromCookie("bartstudio_recent_projects","[]");try{eval("var result = "+cookieVal+";")}catch(e){alert(cookieVal);ajaxart.cookies.writeCookie("bartstudio_recent_projects","[]");return[]}for(var i=result.length-1;i>=0;i--){var item=result[i];if(!item||!item.id){continue}var xml=jBart.parsexml("<project/>");jQuery(xml).attr("id",item.id).attr("name",item.name).attr("_type",item._type);out.appendChild(xml)}return[out]},AddToRecentProjects:function(profile,data,context){var project=aa_first(data,profile,"Project",context);if(!project){return}var id=project.getAttribute("id");var cookieVal=ajaxart.cookies.valueFromCookie("bartstudio_recent_projects")||"[]";try{eval("var result = "+cookieVal)}catch(e){var result=[]}if(result.length>7){result.splice(result.length-1,1)}for(var i=0;i<result.length;i++){if(result[i]&&result[i].id==id){return}}result.push({id:project.getAttribute("id"),name:project.getAttribute("name"),_type:project.getAttribute("_type")});var newcookie="[";for(var i=0;i<result.length;i++){if(!result[i]){continue}newcookie+=(i==0)?"{":",{";var first=true;for(var j in result[i]){if(!first){newcookie+=","}newcookie+=j+':"'+result[i][j].replace('"','"')+'"';first=false}newcookie+="}"}newcookie+="]";ajaxart.cookies.writeCookie("bartstudio_recent_projects",newcookie)},WriteToMyWidgets:function(f,g,d){var h=d.vars._JBartStudio[0];if(h.User){return ajaxart.runNativeHelper(g,f,"WriteToUser",d)}else{var a=aa_xpath(aa_first(g,f,"MyWidgets",d),"project");var m="[";for(var b=0;b<a.length;b++){var l=jQuery(a[b]);m+='{ id: "'+l.attr("id")+'",name:" '+l.attr("name").replace('"','"')+'"}'}m+="]";ajaxart.cookies.valueFromCookie("bartstudio_mywidgets",m)}},HasSavePermissions:function(d,f,b){var g=b.vars._JBartStudio[0];var h=g.Project;if(!h.getAttribute("_wusers")){return["true"]}var l=","+h.getAttribute("_wusers")+",";var a=","+g.User+",";if(l.indexOf(a)>-1){return["true"]}},LoadExternalJS:function(profile,data,context){var files=ajaxart.run(data,profile,"ExternalJsFiles",context);ajaxart_async_Mark(context);var isCloud=context.vars._JBartStudio[0].UseJBartDB;var index=0;function loadNextJsFile(){if(index>=files.length){return ajaxart_async_CallBack([],context)}var file=jQuery(files[index]);var url=file.attr("file_name");url=isCloud?file.attr("cloud_base_url")+url:file.attr("local_base_url")+url;url+=(url.indexOf("?")==-1)?"?":"&";url+="_="+(new Date()).getTime();var isReadyJS=file.attr("load_condition");if(!isReadyJS){jQuery.getScript(url,function(){index++;loadNextJsFile()});return}if(isReadyJS.indexOf("function")==-1){if(isReadyJS.indexOf("return")==-1){isReadyJS="function() { return "+isReadyJS+" != null; }"}else{isReadyJS="function() { "+isReadyJS+"}"}}try{eval("var isReadyFunc = "+isReadyJS)}catch(e){ajaxart.logException("error in load condition "+isReadyJS,e);isReadyFunc=function(){return true}}function checkReady(firstTime){try{if(isReadyFunc()){index++;loadNextJsFile();return}}catch(e){}if(firstTime){aa_load_js_css(url,"js")}setTimeout(checkReady,100)}checkReady(true)}loadNextJsFile()}});aa_gcs("jbstudio",{GetOrCreateUserInfoApiCall:function(b,f,a){var d=ajaxart.getVariable(a,"JBartUserInfo")[0];if(!d||!d.getAttribute("id")){return}var g=d.getAttribute("id");d.setAttribute("_type","jbart_user");ajaxart_async_Mark(a);jBart.db.get({contentType:"jbart_user",id:g,error:function(){ajaxart_async_CallBack([],a)},success:function(h){if(h.nodeType==1&&h.getAttribute("id")==g){ajaxart.xml.copyElementContents(d,h)}ajaxart_async_CallBack([],a)}})}});function aadt_calcPrimitivePreviewContext(m,q,b,d){var f=aadt_findTopPageXtml(m);var r=f;var a=[];var l=ajaxart.newContext();l.vars._BartContext=b.vars._BartContext;l.vars._GlobalVars=b.vars._GlobalVars;var p=aadt_previewXtmlToTrace(m,q);var s=p.Xtml;aadt_putXtmlTraces(s);ajaxart.inPreviewMode=true;try{var o=ajaxart.run(a,r,"",l)[0];if(o){var g=(o.FieldData)?o.FieldData([],b):[];o.Control(g,l)}}catch(n){}ajaxart.inPreviewMode=false;if(p.Cleanup){p.Cleanup()}var h=[];if(d&&d.probeFieldData){if(ajaxart.xtmls_to_trace[0].fieldData.length>0){h=ajaxart.xtmls_to_trace[0].fieldData}else{h=aaeditor.find_preview_context_over_gap().fieldData}}else{if(ajaxart.xtmls_to_trace[0].results.length>0){h=ajaxart.xtmls_to_trace[0].results}else{h=aaeditor.find_preview_context_over_gap()}}ajaxart.xtmls_to_trace=[];return h}function aadt_previewXtmlToTrace(b,d){var a=aa_xpath(b,"@"+d)[0]||aa_xpath(b,d)[0];if(a){return{Xtml:a}}b.setAttribute(d,"");return{Xtml:aa_xpath(b,"@"+d)[0],Cleanup:function(){b.removeAttribute(d)}}}function aadt_putXtmlTraces(b){ajaxart.xtmls_to_trace=[];var a=b;while(a!=null&&a.tagName!="Component"&&a.tagName!="Usage"){ajaxart.xtmls_to_trace.push({xtml:a,results:[]});a=ajaxart.xml.parentNode(a)}}function aadt_findTopPageXtml(b){if(b.nodeType==2){b=aa_xpath(b,"..")[0]}for(var a=b;a&&a.nodeType==1;a=a.parentNode){if(a.tagName=="Component"&&a.getAttribute("type")=="jbart.MyWidgetPage"){return aa_xpath(a,"xtml")[0]}}return null}aa_gcs("studiostate",{StudioUndo:function(b,d,a){ajaxart.run(d,b,"Value",a);ajaxart.runsubprofiles(d,b,"State",a);return[]},SetValue:function(g,l,d){var q=aa_text(l,g,"FieldPath",d);var o=aa_text(l,g,"XtmlPath",d);var a=aa_text(l,g,"NewValue",d);var b=aa_path_to_xtml(q,d);var m="";var f=o.substring(o.lastIndexOf("/")+1);if(o.lastIndexOf("/")!=-1){m=o.substring(0,o.lastIndexOf("/"))}var h=aa_xpath(b,m)[0];if(!h||!b){ajaxart.log("studiostate.SetValue - cannot find xtml for "+q+"/"+o);return[]}if(aa_bool(l,g,"WriteToCData",d)){var n=ajaxart.childElem(h,f);if(!n){n=aa_createElement(h,f);h.appendChild(n)}else{while(n.firstChild){n.removeChild(n.firstChild)}}var p=element.ownerDocument.createCDATASection(a);n.appendChild(p)}else{if(ajaxart.childElem(h,f)){h.removeChild(ajaxart.childElem(h,f))}h.setAttribute(f,a)}if(aa_bool(l,g,"Refresh",d)&&!aa_intest){jBart.studiobar.objectFromXtml(b).Refresh(l,d)}return[]},FieldProperties:function(f,l,b){var s=aa_text(l,f,"FieldPath",b);var u=aa_text(l,f,"FocusOn",b);var r;var a=aa_path_to_xtml(s,b);if(aa_intest&&b.vars.TopControlForTest){r=jQuery(b.vars.TopControlForTest).find(".field_details")[0];var n=aa_run_component("field_dt.FieldDetails",[a],b);aa_replaceElement(r,n[0],true);r=n}else{if(a){ajaxart.runNativeHelper([a],f,"OpenPropertiesWindow",b)}r=jQuery(".field_details")[0]}var g=jQuery(r);var q=u.split("/");for(i in q){var t=q[i];if(t.indexOf("[")!=-1){var p=t.match(/FieldAspect\[([0-9]*)/)[1];var d=t.split("[")[0];var m=".fld_"+d+">*>tr"+t.replace(d,"");if(d=="FieldAspect"){m=g.find("#features>table>tbody>tr:nth-child("+p+")")}g=g.find(m);var o=g.find("td>div>span>span>.component_title_in_table");if(!o.hasClass("expanded")){g.find("td>div>span.component_title").trigger("click")}}else{if(i<q.length-1){g=g.find(".field_for_more_options_"+t)}else{var h=(aa_intest)?"in_focus":"";g.find(".fld_"+t).find("input").focus().addClass(h)}}}}});ajaxart.gcs.tree={RefreshNode:function(h,l,g){var m=aa_text(l,h,"Depth",g);var a=l[0];var b=ajaxart_treeitem_data(a);var f=ajaxart_runevent(b,"TreeContext","NextLevel");var d=jQuery(a).find("ul");d.html("");ajaxart_tree_addChildren(d[0],f,h,l,g,m)},AddChildren:function(d,h,f){var g=ajaxart.getVariable(f,"InputForChanges");var l=ajaxart.run(h,d,"TreeViewCls",f);var b=ajaxart.run(g,d,"Children",f);var a=jQuery(h);if(a.hasClass(l)){var m=a}else{var m=a.parents("."+l)}a.css("display","block");var n=jQuery(b).appendTo(a);m.treeview({add:n});return h},InternalAfterAddingItem:function(f,h,b){var g=aa_first(h,f,"Item",b);if(g==null){return[]}var a="treeview";var l=jQuery(g);if(l.find(".hitarea").length>0){return[]}if(l.hasClass(a)){var d=l}else{var d=l.parents("."+a)}l.css("display","block");d.treeview({add:jQuery(g)});return["true"]},SelectFirst:function(f,g,d){var b=jQuery(g[0]).find(".treeitem_text");var a=ajaxart_tree_find_databound_elem(b[0]);if(a!=null){ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a)}return["true"]},InternalRefreshAddingItem:function(h,n,d){var t=aa_first(n,h,"AboveUL",d);var u=ajaxart.run(n,h,"NewItems",d);if(t==null){return[]}var f=false;if(jQuery(t).find(">ul").length>0){var a=jQuery(t).find(">ul")[0]}else{f=true;var a=document.createElement("ul");a.clasName="treeul";ajaxart.xml.append(t,a)}if(a==null){return[]}var v=jQuery(a).find(">li");var g=u.length-v.length;for(var m=0;m<u.length;m++){if(g==0){break}var b=null;if(m<v.length&&v[m].ajaxart.data.length>0){var o=u[m];var q=v[m].ajaxart.data[0];if(q!=o){b=v[m]}}if(v.length<=m||b!=null){var p=null;if("ajaxart" in a){p=a.ajaxart.params}else{p=a.parentNode.ajaxart.params}var l=aa_first([u[m]],h,"NewNodeItem",p);if(l!=null){if(b==null){ajaxart.xml.append(a,l)}else{a.insertBefore(l,b)}ajaxart.run([l],h,"OnNewItem",d);var r=jQuery(a);if(!r.hasClass("treeview")){r=r.parents(".treeview")}r.treeview({add:jQuery(l)})}g--}}if(f){var s=jQuery(t);jQuery(t).parents(".treeview").treeview({add:s})}return["true"]},SelectItem:function(d,g,b){var f=aa_first(g,d,"Item",b);if(f==null){return[]}var a=ajaxart_tree_find_databound_elem(f);ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a);ajaxart_runevent(a,"TreeContext","OnSelect");return["true"]},OpenAllNodes:function(d,g,b){var f=aa_int(g,d,"MaxDepth",b);if(isNaN(f)||typeof(f)!="number"){f=10}var a=g;if(a.length==0||!ajaxart.ishtml(a[0])){a=ajaxart.getControlElement(b)}if(a.length==0){return[]}var n=a[0];for(var h=0;h<f;h++){var l=jQuery(n).find(".expandable .hitarea");if(l.length==0){break}for(var m=0;m<l.length;m++){jQuery(l[m]).click()}}return["true"]},DeleteSelected:function(h,m,f){var b=ajaxart.getControlElement(f);var g=jQuery(b).find(".selected").parent();if(g.length==1){var l=g[0];var a=l.nextSibling;if(a==null){a=l.previousSibling}if(a==null){var d=jQuery(l).parents(".treeitem");if(d.length>0){a=d[0]}}l.parentNode.removeChild(l);if(a!=null){jQuery(a).find(">span").addClass("selected");aa_xFireEvent(a,"click",null)}}return["true"]},SelectTreeNodeByPath:function(f,l,a){var b=ajaxart.run(l,f,"PathItems",a);var d=jQuery(ajaxart.getControlElement(a)).find(".tree_wrapper");for(var m=0;m<b.length;m++){if(d.hasClass("expandable")){d.find(">.hitarea").trigger("click")}var n=jQuery(d).children("ul").children("li");var o=false;for(var h=0;h<n.length;h++){if(jQuery(n[h]).children(".treeitem_text").find(".treeitem_text_content").text()==ajaxart.totext(b[m])){d=jQuery(n[h]);o=true;break}}if(!o){return[]}}var g=jQuery(d).children(".treeitem_text")[0];ajaxart_css_selection(g,"treeview");ajaxart_selectionchanged(g);return[]},TreeNodeByPath:function(f,l,d){var o=aa_text(l,f,"TreePath",d);var a=jQuery(ajaxart.getControlElement(d)).find(".tree_wrapper");if(a.length==0){return[]}var p=a[0];var b=o.split("/");var q=p;for(var h=0;h<b.length;h++){var n=false;var m=jQuery(q).find(">ul>li");for(var g=0;g<m.length;g++){if(jQuery(m[g]).find(">span").find(".treeitem_text_content").text()==b[h]){n=true;q=m[g]}}if(!n){return[]}}return[q]},PathOfSelectedItem:function(d,h,b){var a=ajaxart.getControlElement(b);if(a.length==0){return[]}var o=a[0];var f=jQuery(o).find(".selected");var n="";var l=f.parents(".treeitem").find(">span");for(var g=0;g<l.length;g++){var m=jQuery(l[g]).find(".treeitem_text_content").text();if(n!=""){n=m+"/"+n}else{n=m}}return[n]},PickTreeRoots:function(d,g,b){if(g.length==0){return[]}var n=ajaxart.xml.xpath(g[0],"Value");var f={};var o=[];for(var h=0;h<n.length;h++){var m=n[h];var a=m.getAttribute("category");if(a==null){o.push(m.getAttribute("val"))}else{var l=a.split(".")[0];if(f[l]==undefined){o.push(l);f[l]=true}}}return o}};ajaxart_tree_keydown=function(a){if(a.keyCode==40||a.keyCode==38){ajaxart_stop_event_propogation(a)}};ajaxart_tree_event=function(g){var d=(typeof(g.target)=="undefined")?g.srcElement:g.target;if(jQuery(d).hasClass("hitarea")){return}if(g.type=="keyup"){var h=jQuery(d).parents(".tree_top").find(".selected");if(h.length>0){d=h[0]}}var a=ajaxart_tree_find_databound_elem(d);var b=false;if(a!=null){if(g.type=="click"){ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a);ajaxart_runevent(a,"TreeContext","OnSelect");b=true;if(window.captureEvents&&window.onmousedown!=null){window.onmousedown(g)}if(!window.captureEvents&&document.onmouseclick!=null){document.onmouseclick(g)}}else{if(g.type=="dblclick"){ajaxart_runevent(a,"TreeContext","OnDoubleClick")}else{if(g.type=="keyup"){if(g.keyCode==13&&!g.ctrlKey){ajaxart_runevent(a,"TreeContext","OnDoubleClick")}if(g.keyCode==46){ajaxart_runevent(a,"TreeContext","OnDelete")}if(g.keyCode==40){ajaxart_stop_event_propogation(g);ajaxart_tree_move_cursor(a,1,g.altKey)}if(g.keyCode==38){ajaxart_tree_move_cursor(a,-1,g.altKey)}if(g.keyCode==39||g.keyCode==37){var f=(g.keyCode==39);if(jQuery(a).parents(".right2left").length>0){f=!f}if(!f){if(jQuery(a.parentNode).hasClass("collapsable")){ajaxart_tree_expandCollapse(a,f)}else{ajaxart_tree_move_cursor(a,-2,g.altKey)}}else{ajaxart_tree_expandCollapse(a,f)}}ajaxart_tree_make_selected_visible(jQuery(a).parents(".tree_top").find(".tree_wrapper"));ajaxart.setVariable(a.ajaxart.params,"_CurrentFocus",[jQuery(a).find(".treeitem_dummy4focus")[0]]);ajaxart_runevent(a,"TreeContext","OnKeyPressed","",g)}}}}if(a!=null&&b){if(a.tabIndex==1){jQuery(a).focus()}else{jQuery(a).find(".treeitem_dummy4focus").focus()}}};ajaxart_tree_find_databound_elem=function(a){while(a!=null&&a.nodeType==1){if(a.tagName.toLowerCase()=="li"){return ajaxart_tree_item_from_li(a)}a=a.parentNode}return null};ajaxart_tree_item_from_li=function(a){var b=a.firstChild;while(b!=null){if(b.nodeType==1&&b.tagName.toLowerCase()=="span"){return b}b=b.nextSibling}};ajaxart_tree_expandCollapse=function(b,d){var a=b.parentNode;if(d&&jQuery(a).hasClass("expandable")){jQuery(a).find(">.hitarea").trigger("click")}if(!d&&jQuery(a).hasClass("collapsable")){jQuery(a).find(">.hitarea").trigger("click")}};ajaxart_tree_move_cursor=function(d,l,b){var g=null;var a=d.parentNode;if(l==1){if(jQuery(a).hasClass("collapsable")){var f=jQuery(a).find(".treeul")[0];if(f.firstChild.tagName.toLowerCase()=="li"){g=(f.firstChild)}}while(g==null&&a!=null){if(a.nextSibling!=null){g=a.nextSibling}if(jQuery(a.parentNode).hasClass("treeul")){a=a.parentNode.parentNode}else{a=null}}}if(l==-1){var m=a.previousSibling;if(m==null){if(jQuery(a.parentNode).hasClass("treeul")){g=a.parentNode.parentNode}}while(g==null&&m!=null){if(!jQuery(m).hasClass("collapsable")){g=m}var h=jQuery(m).find(".treeitem");if(h.length==0){g=m}else{m=h[h.length-1]}}}if(l==-2){g=a.parentNode.parentNode}if(g!=null){var d=ajaxart_tree_item_from_li(g);ajaxart_css_selection(d,"treeview");ajaxart_selectionchanged(d);if(b==null||b!=true){ajaxart_runevent(d,"TreeContext","OnSelect")}if(d!=null){if(d.tabIndex==1){jQuery(d).focus()}else{jQuery(d).find(".treeitem_dummy4focus").focus()}}}};ajaxart_tree_toggle=function(g,h,l){var d=jQuery(g);if(d.hasClass("collapsable")){if(d.find(">ul>li").length==0){var m=d.find(">ul")[0];var a=ajaxart_tree_item_from_li(g);var p=a.ajaxart;if(typeof(p)=="undefined"){return}var f=p.params;var n=f.vars[h];if(n==null||n.length==0){return}var o=n[0][l];if(o==null||typeof(o)=="undefined"){return}var b=ajaxart.clone_context(o.context);b.vars=p.params.vars;ajaxart.setVariable(b,"InputForChanges",p.data);ajaxart.run([m],o.script,"",b)}}};ajaxart_tree_make_selected_visible=function(d){var g=d.find(".selected");if(g.length==0){return}var p=g[0];var n=20;var f=20;var h=0;while(p!=null&&p!=d){h+=p.offsetTop;p=p.offsetParent}var l=aa_absTop(d[0],true);var m=false;var b=d[0].scrollTop;var o=h-l;if(o>=b&&o+n<d.height()+b-f){m=true}if(m){return}if(o-b<d.height()/2){var a=Math.max(o-n,0)}else{var a=o-d.height()+n*2}d[0].scrollTop=a};ajaxart_treeitem_data=function(a){if(a.tagName.toLowerCase()=="span"){return a.ajaxart.data}if(a.tagName.toLowerCase()=="li"){return ajaxart_tree_item_from_li(a).ajaxart.data}return null};ajaxart_tree_addChildren=function(l,g,f,v,b,w){var o="";var r=aa_first(v,f,"MultiSelector",b);var m=[];for(var s=0;s<g.length;s++){var h=g[s];var y=aa_text([h],f,"ItemText",b);var p=aa_jbart_image("/default1616.gif",b);if(f.getAttribute("ItemImage")!=null||ajaxart.xml.xpath(f,"ItemImage").length>0){p=aa_text([h],f,"ItemImage",b)}var d=ajaxart.run([h],f,"NextLevel",b);var u=d.length==0;if(u&&r!=null){if(r.IsSelected!=undefined&&aa_bool([h],r.IsSelected.script,"",r.IsSelected.context)){o='<input type="checkbox" onclick="ajaxart_tree_checkbox_clicked(this,event)" class="aacheckbox_value" checked="checked"/>'}else{o='<input type="checkbox" onclick="ajaxart_tree_checkbox_clicked(this,event)" class="aacheckbox_value" />'}}var a="";if(d.length>0&&w==1){a=" closed"}var q=jQuery('<li class="aa_item treeitem'+a+'"><image class="treeitem_image" src="'+p+'" align="top" height="16px"/>'+o+'<span style="position:relative;" class="treeitem_text text_item" tabindex="1" onkeyup="ajaxart_tree_event(event);return false;">'+y+" </span></li>")[0];q.selector=r;var n=jQuery(q).find(".text_item")[0];ajaxart.databind([n],[h],b,f);if(ajaxart.xml.xpath(f,"ItemColoring").length>0){ajaxart.run([n],f,"ItemColoring",b)}l.appendChild(q);m.push(q);if(d.length>0){var t=jQuery('<ul class="treeul"/>')[0];q.appendChild(t);if(w==1){q.Lazy=true}else{ajaxart_tree_addChildren(t,d,f,v,b,w-1)}}}return m};ajaxart_tree_LazyExpand=function(g,f,d,a){var o=ajaxart_treeitem_data(g);var m=jQuery(g);var l=jQuery(g).find("ul");if(m.hasClass("collapsable")){if(g.Lazy){var h=ajaxart.run(o,d,"NextLevel",a);var b=ajaxart_tree_addChildren(l[0],h,d,f,a,1);g.Lazy=false;l.css("display","block");var n=jQuery(b);m.parents(".tree_top").treeview({add:n,toggle:function(){ajaxart_tree_LazyExpand(this,f,d,a)}})}}};ajaxart_tree_checkbox_clicked=function(g,f){var d=g.parentNode;var b=d.selector;if(b!=null){var a=ajaxart.run(d.ajaxart.data,b.Toggle.script,"",b.Toggle.context);ajaxart_runevent(d,"TreeContext","MultiSelect")}};ajaxart.gcs.xtml_dt={ParamsAsFields:function(f,w,d){var v=aa_component_definition(aa_text(w,f,"Component",d));if(v==null){return[]}var n=false;var t=ajaxart_run_commas(w,f,"Params",d),m=[];if(t.length==0){var s=ajaxart.xml.xpath(v,"Param");for(var q=0;q<s.length;q++){ajaxart.run(w,s[q],"Convert",d);if(s[q].getAttribute("light")=="false"){continue}if(aa_xtmldt_is_advanced_param(w[0],s[q])){n=true}else{if(s[q].getAttribute("boolfeature")=="true"){m.push(s[q].getAttribute("name"))}else{t.push(s[q].getAttribute("name"))}}}}var r=[];for(var q=0;q<t.length;q++){var a=ajaxart.xml.xpath(v,"Param[@name='"+t[q]+"']");if(a.length==0){continue}var o=a[0];if(ajaxart.xml.xpath(o,"Field").length>0){var l=aa_first(w,o,"Field",d);if(l){l.Param=t[q];l.ParamXml=o;r.push(l)}continue}var y=aa_text_capitalizeToSeperateWords(""+t[q]);if(o.getAttribute("Title")){y=o.getAttribute("Title")}var b={isObject:true,Id:t[q],Title:y,ParamXml:o,Param:t[q],Type:o.getAttribute("type")};b.FieldData=function(z){return z};b.CheckMandatoryValidation=function(B,z){var A=b.Param;if(B.nodeType==1){if(B.getAttribute(A)){if(B.getAttribute(A)==""){return false}return true}if(!aa_xpath(B,A)[0]){return false}return true}};var u=function(I,z){var A=aa_ctx(d,{_Field:[I]});var H=o.getAttribute("type");var G=(I.Type!=null&&I.Type.indexOf("[]")>-1);var B=(H==null||H=="data.Data");if(!B&&H=="data.Boolean"&&o.getAttribute("script")=="true"){B=true}if(B){I.Control=function(L,M){var N=aa_text(w,f,"Component",d);return ajaxart_xtmldt_primitive_control(L[0],N,I.Param,M)};return}if(G){return ajaxart.runNativeHelper(w,f,"Array",A)}I.Options={isObject:true,Options:[],IsTree:false};var C=false,J=false,F=false;if(I.ParamXml.getAttribute("multiple")=="true"&&H=="enum"){I.AllowValueNotInOptions=I.Multiple=true;if(I.ParamXml.getAttribute("Options")){var K=I.ParamXml.getAttribute("Options").split(",");for(var D=0;D<K.length;D++){I.Options.Options.push({isObject:true,code:ajaxart.totext_item(K[D])})}}J=F=true}else{if(H=="enum"){I.AllowValueNotInOptions=true;var K=ajaxart.xml.xpath(I.ParamXml,"value");if(I.ParamXml.getAttribute("Options")){ajaxart.concat(K,I.ParamXml.getAttribute("Options").split(","))}for(var D=0;D<K.length;D++){var E={isObject:true,code:ajaxart.totext_item(K[D])};I.Options.Options.push(E)}J=F=true}else{if(H=="dynamic_enum"||H=="dynamic_enum_multi"){I.AllowValueNotInOptions=true;if(o.getAttribute("options_pt")){I.Options=ajaxart.runComponent(o.getAttribute("options_pt"),w,d)}else{I.Options=ajaxart.gcs.picklist.DynamicOptions(I.ParamXml,[],A)[0]}if(o.getAttribute("recalc_options")=="true"){I.DelayedOptionCalculation=I.DynamicSuggestions=true;I.RecalcOptions=function(L,M){var O=aa_ctx(aa_merge_ctx(d,M),{_Field:[I],_Xtml:M.vars._FieldData});var N=ajaxart.gcs.picklist.DynamicOptions(I.ParamXml,[],O)[0];aa_initOptionsObject(N,M);return N}}if(H=="dynamic_enum_multi"){I.Multiple=true}J=F=true}else{if(H=="data.Boolean"){J=F=true;ajaxart.runComponent("field_aspect.Boolean",[],A);I.Options=null;F=false;aa_field_handler(I,"OnUpdate",function(){ajaxart.runNativeHelper(w,f,"RefreshPreview",d)},"xtml_dt",1000)}else{if("action_async.Action,data_async.Data,xml.Change,ui.Control,".indexOf(H+",")>-1){I.Control=function(L,M){var N=aa_ctx(d,{Xtml:L,Param:[I.Param]});return ajaxart.runComponent("xtml_dt.EditBasicTypeControl",L,N)}}else{C=true}}}}}if(J){I.FieldData=function(M,N){var P=ajaxart.xml.xpath(M[0],"@"+I.Param);if(P.length>0){return P}var L=ajaxart.xml.xpath(z,"Param[@name='"+I.Param+"']")[0];if(L){var O=L.getAttribute("Default");O=O||ajaxart.totext_array(ajaxart.xml.xpath(L,"Default/@value"));O=O||aa_cdata_value(ajaxart.xml.xpath(L,"Default")[0]);O=O||""}else{var O=""}return ajaxart.xml.xpath(M[0],"@"+I.Param,true,O)}}if(C){I.Options=ajaxart.runNativeHelper(w,f,"OptionsObjForTgpType",A);I.RecalcOptions=function(){var L=ajaxart.runNativeHelper(w,f,"OptionsObjForTgpType",A)[0];aa_initOptionsObject(L,A);return L};ajaxart.runNativeHelper(w,f,"AspectsForTgpType",A);I.FieldData=function(L,M){var N=ajaxart_writabledata();var Q=ajaxart.xml.xpath(L[0],I.Param+"/@t");if(Q.length==0){var P=ajaxart.xml.xpath(z,"Param[@name='"+I.Param+"']/Default");if(P.length>0){var O=L[0].ownerDocument.createElement(I.Param);L[0].appendChild(O);ajaxart.xml.copyElementContents(O,P[0])}Q=ajaxart.xml.xpath(L[0],I.Param+"/@t")}if(Q.length>0){ajaxart.writevalue(N,Q)}return N};I.StoreOriginalValue=function(N,M){var L=ajaxart.xml.xpath(M.vars._Item[0],I.Param)[0];N.originalXtml=ajaxart.parsexml(ajaxart.xml2text(L))};I.RevertToOriginalValue=function(N,O,M){if(!N.originalXtml){return}var L=ajaxart.xml.xpath(M.vars._Item[0],I.Param)[0];ajaxart.xml.copyElementContents(L,N.originalXtml);aa_invoke_field_handlers(I.OnUpdate,N,null,I,O,{RevertToOriginalValue:true})};aa_field_handler(I,"OnUpdate",function(S,R,T,Q,N){if(N&&N.RevertToOriginalValue){return}var O=jQuery(T).parents(".aa_item")[0].ItemData[0];if(aa_totext(R)==""){var M=aa_xpath(O,S.Param)[0];if(M){M.parentNode.removeChild(M)}}else{var L=aa_totext(R);var P=aa_totext(aa_xpath(O,S.Param+"/@t"));if(P!=L){xtmldt_switch_pt(P,L,O,S.Param,d)}}});F=true}if(F){ajaxart.runNativeHelper(w,f,"Options",A)}};if(o.getAttribute("autoaspects")!="false"&&o.getAttribute("titleField")!="true"){u(b,v)}var g=aa_ctx(d,{_Field:[b]});ajaxart.runNativeHelper([],f,"Aspects",g);ajaxart.runsubprofiles(w,b.ParamXml,"FieldAspect",g);r.push(b)}if(m.length>0){var b={isObject:true,Title:["Light Features"],BoolFeature:["true"],Params:m};ajaxart.runNativeHelper(w,f,"BoolFeatureAspects",aa_ctx(d,{_Field:[b]}));aa_field_handler(b,"OnUpdate",function(D,F,A){var C=","+aa_totext(F)+",";var z=jQuery(A).parents(".aa_item")[0].ItemData[0];for(var B=0;B<D.Params.length;B++){var E=D.Params[B];if(C.indexOf(","+E+",")>-1){z.setAttribute(E,"true")}else{z.setAttribute(E,"false")}}},"boolfeature");var p=function(z){z.FieldData=function(A,B){var C=ajaxart_writabledata(),G="";for(var D=0;D<z.Params.length;D++){var F=z.Params[D];var E=ajaxart.fieldscript(A[0],F,true);if(E&&E.nodeType==2&&E.nodeValue=="true"){G+=F+","}if(E&&E.tagName=="Default"&&E.getAttribute("value")=="true"){G+=F+","}}if(G!=""){G=G.substring(0,G.length-1)}ajaxart.writevalue(C,[G]);return C}};p(b);r.push(b)}if(n){var h={isObject:true,ID:["xtml_morefields"],HideTitle:["true"]};h.Control=function(z,A){var C=document.createElement("div");C.className="xtmldt_advanced_fields";C.ShowAdvancedParams=false;var B=aa_text(w,f,"Component",d);xtmldt_refreshMoreFields(C,z,A,B);return[C]};r.push(h)}return r},IsAdvancedParam:function(b,d,a){return aa_frombool(aa_xtmldt_is_advanced_param(aa_first(d,b,"Xtml",a),aa_first(d,b,"ParamXml",a)))},SetContainingPicklistValue:function(d,g,b){var a=aa_first(g,d,"PicklistInput",b);var f=aa_text(g,d,"Value",b);if(a&&a.set){a.setValue(f);a.FixValue(false);a.set(f)}},ToCompositeParam:function(d,h,b){if(!ajaxart.isxml(h)){return[]}var l=aa_text(h,d,"Param",b);var a=ajaxart.xml.xpath(h[0],l);if(a.length==0){h[0].appendChild(h[0].ownerDocument.createElement(l));a=ajaxart.xml.xpath(h[0],l)}var g=a[0];var f=aa_text(h,d,"PTForComposite",b);if(g.getAttribute("t")==null||g.getAttribute("t")==""){g.setAttribute("t",f)}if(g.getAttribute("t")!=f){return[]}return[g]},PreviewContext:function(g,h,f){var b={isObject:true};b.Input=aa_first(h,g,"Input",f);b.context=ajaxart.clone_context(f);var l=ajaxart.subprofiles(g,"ContextVar");for(var d=0;d<l.length;d++){var a=l[d].getAttribute("name");var m=ajaxart.run(h,l[d],"",b.context);b.context.vars[a]=m}return[b]},XtmlTextSummary:function(d,f,b){var a=aa_first(f,d,"Xtml",b);var g=aa_xtmldt_summarytext(a,"<br>");if(g==""&&a.getAttribute("t")){ptdef=aa_component_definition(a.getAttribute("t"));if(aa_xpath(ptdef,"Param").length>0){g='<img src="'+b.vars._Images[0]+'/studio/unsPipeIcon.gif" />'}}return[g]},ToggleInnerTgpParams:function(d,m,b){var o=b.vars._Field[0];var q=aa_attach_global_css(aa_text(m,d,"Css",b));function l(u){var t=aa_totext(u)||"";var r=t.split(".");if(r.length!=2){return null}var s=ajaxart.components[r[0]]&&ajaxart.components[r[0]][r[1]];return s}function f(r){return aa_totext(r)=="ui.CustomCss"}function g(w){var r=l(w);if(r&&r.getAttribute("customAAEditor")=="true"){return false}var u=r&&r.getAttribute("type");var v=u&&ajaxart.types[u.replace(".","_")];var s=r&&aa_totext(aa_xpath(r,"xtml/@t"));if(s=="ui.CustomStyle"||s=="ui.CustomStyleByField"){return true}return false}function n(s){var r=l(s);if(!r){return false}return r.getAttribute("customPT")=="true"}function p(s){var r=l(s);if(!r){return false}return r.getAttribute("customAAEditor")=="true"}function h(u){var r=l(u);if(!r){return false}var t=aa_xpath(r,"Param");for(var s=0;s<t.length;s++){if(t[s].getAttribute("light")=="false"){continue}if(t[s].getAttribute("hidden")=="true"){continue}return true}return false}function a(t){var r=l(t);var s=r&&r.getAttribute("type");if(s=="action.Action"&&aa_totext(t)!="operation.RunActions"){return true}return false}o.RefreshToggleInnerTgpParams=function(B,E,z,s,G){jBart.bind(E,"cleanWrapper",function(){E.jbToggleButton=null},"RefreshToggleInnerTgpParams");if(!E.jbToggleButton){jQuery(E).addClass("xtml_dt_toggle_cell");var F=jQuery('<table class="xtml_dt_toggle_table" cellpadding="0" cellspacing="0"><tr/></table>');var A=F.find("tr");var w=jQuery('<td style="vertical-align:top" class="xtml_dt_picklist"/>').appendTo(A);var v=jQuery('<td style="vertical-align:top" class="xtmldt_toggle_td"/>').appendTo(A);var u=jQuery('<td style="vertical-align:top" class="xtml_dt_share_td"/>').appendTo(A);var t=jQuery('<td style="vertical-align:top" class="xtml_dt_customize_td"/>').appendTo(A);while(E.firstChild){w[0].appendChild(E.firstChild)}E.jbToggleButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px' class='aa_field_toolbar_image xtmldt_toggle_left'/>");v.append(E.jbToggleButton);E.appendChild(F[0]);E.jbEditButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_edit_style'/>").attr("title","Edit Style");E.jbEditButton.css("background","url("+aa_base_images()+"/studio/designer.png) no-repeat");E.jbEditButton.click(function(J){var I=E.jbXtml;var H=aa_ctx(b,{_DomEvent:[J],ControlElement:[E]});ajaxart.run([I],jBart.parsexml('<xtml t="field_dt.OpenCustomPTDesigner" />'),"",H)});v.append(E.jbEditButton);E.jbOpenAAEditor=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_edit_style'/>").attr("title","Edit");E.jbOpenAAEditor.css("background","url("+aa_base_images()+"/studio/customize1616.gif) no-repeat");E.jbOpenAAEditor.click(function(K){E.jbXtml=E.jbXtml||(G&&ajaxart.xml.xpath(G.vars._Item[0],B.Param)[0]);var I=E.jbXtml;var J=l(z);var L=aa_totext(aa_xpath(J,"Param/@name"));var H=aa_ctx(b,{_DomEvent:[K],ControlElement:[E],_Param:[L]});ajaxart.run([I],jBart.parsexml('<xtml t="field_dt.OpenCustomAAEditor" />'),"",H)});v.append(E.jbOpenAAEditor);E.jbShareButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_share'/>");E.jbShareButton.css("background","url("+aa_base_images()+"/studio/block_share.png) no-repeat").attr("title","Share your style (Make Global)");E.jbShareButton.click(function(J){var I=E.jbXtml;var H=aa_ctx(b,{ControlElement:[E],FieldCellElement:[E]});ajaxart.run([I],jBart.parsexml('<xtml t="field_dt.MakeStyleGlobal" />'),"",H)});u.append(E.jbShareButton);E.jbCustomize=jQuery("<div style='display:none;' class='aa_field_toolbar_image xtmldt_customize'/>");E.jbCustomize.css("background","url("+aa_base_images()+"/studio/custom.png) no-repeat");E.jbCustomize.click(function(J){var I=E.jbXtml;var H=aa_ctx(b,{ControlElement:[E],FieldCellElement:[E]});ajaxart.run([I],jBart.parsexml('<xtml t="field_dt.DoCustomizeStyle" />'),"",H)});t.append(E.jbCustomize);E.jbMoreActions=jQuery("<div style='display:none;' class='aa_field_toolbar_image xtmldt_more_actions'/>");E.jbMoreActions.css("background","url("+aa_base_images()+"/studio/add_folder.png) no-repeat").attr("title","More Actions");E.jbMoreActions.click(function(J){var I=E.jbXtml;var H=aa_ctx(b,{ControlElement:[E],FieldCellElement:[E]});ajaxart.run([I],jBart.parsexml('<xtml t="field_dt.MoreActions" />'),"",H)});var r=jQuery('<td style="vertical-align:top" class="xtml_dt_more_actions"/>').append(E.jbMoreActions).appendTo(A)}var y=E.jbToggleButton;E.jbEditButton.hide();E.jbShareButton.hide();E.jbOpenAAEditor.hide();E.jbCustomize.hide();E.jbMoreActions.hide();if(g(z)||f(z)){E.jbCustomize.show();E.jbCustomize.attr("title",f(z)?"Customize html and js":"Customize Style")}if(n(z)){E.jbEditButton.show();E.jbShareButton.show();y.hide().css("display","none");return}if(p(z)){E.jbOpenAAEditor.show();y.hide().css("display","none");return}if(a(z)){E.jbMoreActions.show()}if(!h(z)){y.hide();return}else{y.show()}y[0].RefreshExapndButton=function(){var H=aa_base_images()+"/studio/"+(y[0].Expanded?"minus.gif":"plus.gif");y.css("background","url("+H+") no-repeat")};var C=s?true:false;var D=l(z);if(!C&&D&&D.getAttribute("autoexpand")=="true"){C=true}y[0].Expanded=C;y[0].RefreshExapndButton();y[0].onclick=function(){var I=jQuery(E.jbOptionsPageElement);function H(){y[0].RefreshExapndButton();aa_htmlContentChanged(E)}y[0].Expanded=!y[0].Expanded;if(y[0].Expanded){I.animate({height:"show"},200,H)}else{I.animate({height:"hide"},200,H)}};if(!C){jQuery(E.jbOptionsPageElement).css("display","none")}};aa_field_handler(o,"ModifyControl",function(r,u,t,s){r.jbXtml=ajaxart.xml.xpath(s.vars._Item[0],o.Param)[0];jQuery(r).addClass(q);o.RefreshToggleInnerTgpParams(o,r,u,false,s)});aa_field_handler(o,"OnUpdate",function(t,u,s){var r=jQuery(s).parents(".xtml_dt_toggle_cell")[0];t.RefreshToggleInnerTgpParams(t,r,u,true)})},StyleInProperties:function(b,f,a){var n=a.vars._Field[0];var m="",d=[];if(f[0]&&f[0].nodeType==1){var g=aa_component_param_def(f[0].getAttribute("t"),"Style");if(!g){var l=aa_component_param_def(f[0].getAttribute("t"),"FieldType");if(l){var h=aa_totext(aa_xpath(l,"Default/@t"));f=ajaxart.xml.xpath(f[0],"FieldType/@t",true,h);g=aa_component_param_def(f[0].getAttribute("t"),"Style")}}if(g){var o=aa_totext(aa_xpath(g,"Default/@t"));d=ajaxart.xml.xpath(f[0],"Style/@t",true,o);m=g.getAttribute("type")}}n.RecalcOptions=function(){var p=ajaxart.runNativeHelper([m],b,"Options",aa_ctx(a,{PT:d}))[0];aa_initOptionsObject(p,a);return p};n.FieldData=function(p,q){return d};ajaxart.runNativeHelper(f,b,"Aspects",a)},CleanXtmlOfParams:function(d,f,b){var g=aa_text(f,d,"PrevComponent",b);var a=f[0];if(g==""||a.getAttribute("t")==null||a.getAttribute("t")==""){return[]}xtmldt_cleanXtmlOfParams(a,g)},Object:function(b,d,a){var f={isObject:true,Xtml:ajaxart.run(d,b,"Xtml",a)};f.Preview=ajaxart.run(d,b,"Preview",a);ajaxart_addMethod(f,"RefreshPreview",b,"RefreshPreview",a,"");var g=aa_ctx(a,{_XtmlObject:[f]});ajaxart.runsubprofiles(d,b,"Aspect",g);return[f]},Aspects:function(b,d,a){ajaxart.runsubprofiles(d,b,"Aspect",a);return[]},OverrideObject:function(b,d,a){var f=aa_first(d,b,"Object",a);if(f==null){return[]}var g=aa_ctx(a,{_XtmlObject:[f]});ajaxart.runsubprofiles(d,b,"Aspect",g);return[f]},LightComponentsOfType:function(b,g,a){if(!window.ajaxart_light_compoftype){ajaxart_light_compoftype={};for(var h in ajaxart.components){if(h.lastIndexOf("_dt")==h.length-3&&h.length>3||h=="aaeditor"){continue}for(var f in ajaxart.components[h]){var m=ajaxart.components[h][f];var o=m.getAttribute("type");if(o==null||o=="data.Data"){continue}if(m.getAttribute("hidden")=="true"||m.getAttribute("light")=="false"){continue}if(ajaxart_light_compoftype[o]==null){ajaxart_light_compoftype[o]=[];var l=ajaxart.types[o.replace(".","_")];if(l!=null&&l.getAttribute("lightPTs")!=null){ajaxart_light_compoftype[o]=l.getAttribute("lightPTs").split(",")}}var n=""+h+"."+f;if(ajaxart_arr_indexof(ajaxart_light_compoftype[o],n)==-1){ajaxart_light_compoftype[o].push(n)}}}}var o=aa_text(g,b,"Type",a);var d=ajaxart_light_compoftype[o];if(d==null){d=[]}return d},ComponentParams:function(d,v,b){var r=aa_text(v,d,"ComponentID",b);var w=r.split(".")[0];var q=r.split(".")[1];var p=ajaxart.components[w][q];var o=[];var t=ajaxart.xml.xpath(p,"Param");for(var s=0;s<t.length;s++){var m=t[s];var l=m.getAttribute("name");var a={isObject:true};a.Title=l;a.Id=l;a.Param=[m];o.push(a);var f=m.getAttribute("type");var u=true;if(f!=null&&f!="data.Data"){u=false}if(u){var n=function(y){return function(z,B){if(z.length==0){return[]}var A=aa_text(v,d,"ComponentID",b);return ajaxart_xtmldt_primitive_control(z[0],A,y,b)}};var h=n(l)}else{var h=function(y,z){return[]}}var g=aa_ctx(b,{_Field:[a]});ajaxart_addScriptParam_js(a,"Control",h,g);ajaxart.runsubprofiles(v,d,"FieldAspect",g)}return o},ImageOfType:function(d,f,a){var b=aa_text(f,d,"Type",a);if(aa_type_image[b]!=null){return[aa_type_image[b]]}var l=ajaxart.types[b.replace(".","_")];var h={isObject:true};ajaxart.runsubprofiles([],l,"ComponentAspect",aa_ctx(a,{_Component:[h]}));var g=aa_totext(h.Image);aa_type_image[b]=g;return[g]},ComponentObject:function(h,n,d){var b=aa_text(n,h,"Component",d);var m={isObject:true,Component:b};var l=b.indexOf(".");var q=b.substring(0,l);var o=b.substr(l+1);if(ajaxart.components[q]==null||ajaxart.components[q][o]==null){return[]}var a=ajaxart.components[q][o];var g=aa_ctx(d,{_Component:[m]});var p=a.getAttribute("type");if(p!=null){var f=ajaxart.types[p.replace(".","_")];ajaxart.runsubprofiles([],f,"ComponentAspect",g)}ajaxart.runsubprofiles([],a,"Aspect",g);return[m]},MakeLocal:function(f,l,b){var g=aa_first(l,f,"Xtml",b);var p=aa_first(l,f,"ImplementationXtml",b);var n=ajaxart.xml2text(p);var h=aa_xpath(p,"../Param");for(var m=0;m<h.length;m++){var a=jQuery(h[m]);var d=a.attr("name");if(a.attr("script")=="true"){continue}var o=aa_text(l,g,d,b);n=n.split("%$"+d+"%").join(o)}return[jBart.parsexml(n,p)]},CssCustomize:function(d,g,b){var f=g[0];if(f==null||f.parentNode==null){return[]}if(f==null||f.tagName=="HTML"||f.tagName=="BODY"){f=window.getSelection().focusNode}while(f.parentNode){if(f.ajaxart!=null){var a=f.ajaxart.params;if(a.vars._BartDevDtContext==null){return[]}return ajaxart.runNativeHelper(g,d,"Open",a)}f=f.parentNode}return[]},GlobalOpenAAEditor:function(d,f,a){var b=f[0];if(b.tagName=="HTML"||b.tagName=="BODY"){b=window.getSelection().focusNode}var n=null;while(b.parentNode){if(b.ajaxart&&!n){n=b}if(jQuery(b).hasClass("aa_container")&&b.Cntr){var m=b.Cntr;var l=false;for(var g=0;g<m.Fields.length;g++){if(m.Fields[g].ParamXml){l=true}}if(l){var h={isObject:true,script:aa_items(m)[0],input:[]};var o=aa_ctx(m.Context,{_Cntr:[m.Ctrl]});return ajaxart.runNativeHelper([h],d,"OpenAAEditor",o)}}b=b.parentNode}return[];if(n==null){return[]}var h={isObject:true,script:n.ajaxart.script,input:n.ajaxart.data};return ajaxart.runNativeHelper([h],d,"OpenAAEditor",n.ajaxart.params)},GlobalCustomize:function(d,h,a){var b=h[0];if(b.tagName=="HTML"||b.tagName=="BODY"){b=window.getSelection().focusNode}var m="";while(b.parentNode){if(jQuery(b).hasClass("field_control")||jQuery(b).hasClass("aa_container")){var n=b.XtmlSource?b.XtmlSource[0].context:b.ajaxart.params;var l=aa_totext(n.vars.PageID);if(l!=""){var f=b.className.split(" ");for(var g=0;g<f.length;g++){if(f[g].substring(0,4)=="fld_"){m=f[g].substring(4)}}return ajaxart.runNativeHelper([l],d,"GoToPage",aa_ctx(n,{FieldPath:[m]}))}}b=b.parentNode}},ProfileProperty:function(f,g,b){var a=aa_first(g,f,"Profile",b);var h=aa_text(g,f,"Param",b);var d=ajaxart.fieldscript(a,h,true);if(d){return[d]}return[]},AggregatorFields:function(f,h,b){var n=ajaxart.run(h,f,"Items",b);var m={};for(var l=0;l<n.length&&l<5;l++){var o=n[l];for(field_name in o){if(field_name!="isObject"&&field_name!="XtmlSource"&&!m[field_name]){m[field_name]=true}}}var g=[];for(field_name in m){var a={isObject:true,FieldName:field_name,Desc:""};var d=0;for(var l=0;l<n.length;l++){if(n[l][field_name]!=null){if(d>0){a.Desc+=","}if(d==4){a.Desc+="...";break}a.Desc+=n[l][field_name];d++}}g.push(a)}return g},TrimVariables:function(f,h,d){var m=h[0];var a=false;var g=false;var l=0;for(var b=0;b<m.length-1;b++){if(!g){if(m[b]=="\\"){g=true}else{if(m[b]=="%"){a=!a;l=b}}}else{g=false}}if(a){return[m.substring(l)]}return[""]}};var aa_type_image={};function ajaxart_xtmldt_primitive_control(g,s,d,a){var h=document.createElement("div");h.className="xtml_dt_primitive";var p=jQuery('<table class="xtml_text_and_button" cellpadding="0" cellspacing="0"/>')[0];h.appendChild(p);var n=jQuery("<tr/>")[0];p.appendChild(n);var o=document.createElement("SPAN");o.className="xtml_text_wrapper";var m=function(){if(o.context!=null){return}var u={ParentXtml:[g],Field:[d]};var t=aadt_calcPrimitivePreviewContext(g,d,a);if(!t[0]){t=aa_run_component("xtml_dt.CalcPreviewForXtml",[u],a)}o.context=t};var l=function(u,t){return function(){var v=g.getAttribute(d);var D;var I=ajaxart.totext_array(ajaxart.xml.xpath(g,d+"/@t"))=="data.JavaScript";if(v==null&&!I){if(ajaxart.xml.xpath(g,d).length>0){D=document.createElement("INPUT");D.setAttribute("value","computed");u.isAttr=false;D.readOnly=true;D.className="xtml_dt_readonly";jQuery(D).click(function(){var K={isObject:true};ajaxart_addScriptParam_js(K,"Refresh",r,a);if(u.isAttr){var J=["true"]}else{var J=[]}m();var L=aa_ctx(a,{_XtmlDtContext:[K],IsAttribute:J,Xtml:[g],Field:[d],_PrimitiveControl:[u.firstChild],_Context:u.context});ajaxart.runComponent("xtml_dt.EditScriptOfPrimitive",[g],L)})}else{v=""}}if(I){var G={isObject:true};ajaxart_addScriptParam_js(G,"OnUpdate",z,a);ajaxart_addScriptParam_js(G,"Context",C,a);var A=aa_ctx(a,{_XtmlDt:[G]});D=ajaxart.runComponent("xtml_dt.JavaScriptInlineEditor",ajaxart.childElems(g,d),A)[0]}if(v!=null){var z=function(K){var J=ajaxart.totext(K);if(u.DefaultValue!=""&&!u.OverridingDefaultValue&&u.DefaultValue!=J){u.OverridingDefaultValue=true}if(ajaxart.totext(K)!=""||u.OverridingDefaultValue){g.setAttribute(d,J)}else{g.removeAttribute(d)}};var C=function(J){m();if(t.preview_control!=null){t.removeChild(t.preview_control)}var L=aa_ctx(a,{_Context:u.context});var K=ajaxart.runComponent("aaeditor.PrimitiveTextPreview",J,L)[0];t.appendChild(K);t.preview_control=K;return u.context};var B=ajaxart.parsexml('<xml value=""/>');var H="";if(g.getAttribute(d)!=null){H=g.getAttribute(d);B.setAttribute("value",g.getAttribute(d))}var F=aa_get_default_value(s,d);if(F&&typeof(F)!="string"&&F.nodeType){var E=(F.nodeType==1)?ajaxart.totext(ajaxart.xml.xpath(F,"@value")):aa_totext([F]);u.DefaultValue=E;if(g.getAttribute(d)==null){B.setAttribute("value",E)}else{u.OverridingDefaultValue=true}}var G={isObject:true};ajaxart_addScriptParam_js(G,"OnUpdate",z,a);ajaxart_addScriptParam_js(G,"Context",C,a);var y=aa_component_definition(s);var w=[];if(y){w=ajaxart.xml.xpath(y,"Param[@name='"+d+"']")}var A=aa_ctx(a,{_XtmlDt:[G],_ParamXml:w});D=ajaxart.runComponent("aaeditor.EditPrimitiveTextBox",ajaxart.xml.xpath(B,"@value"),A)[0];u.isAttr=true}while(u.firstChild!=null){u.removeChild(u.firstChild)}u.appendChild(D);aa_element_attached(D);ajaxart.runComponent("xtml_dt.RefreshPrimitivePreview",[],ajaxart.ui.contextWithCurrentControl(a,u))}};var r=l(o,h);r();var f=jQuery("<td/>")[0];f.appendChild(o);n.appendChild(f);var q=document.createElement("span");q.className="xtml_dt_pop_button";q.onclick=function(){var u={isObject:true};if(o.OverridingDefaultValue){u.DefaultValue=[o.DefaultValue]}ajaxart_addScriptParam_js(u,"Refresh",r,a);if(o.isAttr){var t=["true"]}else{var t=[]}m();var v=aa_ctx(a,{ControlElement:[q],_XtmlDtContext:[u],IsAttribute:t,Xtml:[g],Field:[d],_PrimitiveControl:[o.firstChild],_Context:o.context});ajaxart.runComponent("xtml_dt.OpenPrimitiveControlPopup",[g],v)};var b=jQuery("<td/>")[0];b.appendChild(q);n.appendChild(b);return[h]}xtmldt_refreshMoreFields=function(m,f,a,n){aa_empty(m);if(m.ShowAdvancedParams){var d=aa_ctx(a,{Component:[n]});var l=ajaxart.runComponent("xtml_dt.MoreFieldsHelper",f,d)[0];m.appendChild(l);var h=jQuery('<a class="xtmldt_showless button_hyperlink">less...</a>')[0];h.onmousedown=function(o){o=o||event;if(o.button==2){return true}m.ShowAdvancedParams=false;xtmldt_refreshMoreFields(m,f,a,n)};m.appendChild(h)}else{var g=jQuery('<a class="xtmldt_showmore button_hyperlink">more...</a>')[0];g.onmousedown=function(o){o=o||event;if(o.button==2){return true}m.ShowAdvancedParams=true;xtmldt_refreshMoreFields(m,f,a,n);aa_ensure_visible(m)};var b=jQuery("<div />")[0];b.appendChild(g);m.appendChild(b)}aa_element_attached(m)};function aa_xtmldt_is_advanced_param(f,d){if(d.getAttribute("advanced")=="always"){return true}if(d.getAttribute("advanced")!="true"){return false}if(!f){return true}var l=d.getAttribute("name");var g=aa_component_definition(f.getAttribute("t"));var b=f.getAttribute(l);if(b!=null){if(b==""){return true}var h=ajaxart.totext_array(aa_xpath(g,"Param[@name='"+l+"']/@Default"));if(h==""){h=ajaxart.totext_array(aa_xpath(g,"Param[@name='"+l+"']/Default/@value"))}return(b==h)}var m=aa_xpath(f,l)[0];if(!m){return true}var h=aa_xpath(g,"Param[@name='"+l+"']/Default")[0];if(!h){return false}var a=m.ownerDocument.createElement("Default");ajaxart.xml.copyElementContents(a,m);return ajaxart.xml2text(a)==ajaxart.xml2text(h)}function aa_xtmldt_summarytext(h,v){var r="";var u=h.getAttribute("t");if(!u){return""}var d=aa_component_definition(u);var l=ajaxart.xml.xpath(d,"Param");for(var m=0;m<l.length;m++){if(l[m].getAttribute("light")=="false"||l[m].getAttribute("summary")=="false"){continue}var g=l[m].getAttribute("name");var o=l[m].getAttribute("type")||"data.Data";var q=(aa_textInList(o,["data.Data","data.Boolean","ui.Control"]));var p="";if(h.getAttribute(g)!=null){var b=aa_totext(aa_xpath(l[m],"@Default"));if(b==""){b=aa_totext(aa_xpath(l[m],"Default/@value"))}if(h.getAttribute(g)==b){continue}var f=h.getAttribute(g);if(f.length<50){p=g+": "+h.getAttribute(g)}else{p=g+": ..."}}else{var a=aa_xpath(h,g);if(a.length==1){if(q){p=g+": ..."}else{var s=a[0].getAttribute("t");var b=aa_totext(aa_xpath(l[m],"Default/@t"));if(s&&s!=""&&s!=b){var n=aa_xtmldt_summarytext(a[0]," , ");p=g+": "+s.substring(s.indexOf(".")+1);if(n!=""){if(n.length<10){p+=" ( "+n+" ) "}else{p+=" ..."}}}}}}if(p==""){continue}if(r!=""){r+=v}r+=p}return r}function xtmldt_switch_pt(g,b,m,d,a){var f=aa_xpath(m,"!"+d)[0];var h=aa_component_definition(b);var l=aa_xpath(h,"ParamGenerator")[0];if(l){var n=f.cloneNode(true)}ajaxart.writevalue(aa_xpath(m,"!"+d+"/@t"),b);xtmldt_cleanXtmlOfParams(f,g);if(l){ajaxart.run([f],l,"",aa_ctx(a,{PrevXtml:[n]}))}}function xtmldt_cleanXtmlOfParams(g,h){var d=aa_component_definition(g.getAttribute("t"));var o=aa_component_definition(h);if(aa_hasAttribute(d,"decorator")&&h!=""){var f=d.getAttribute("decorator");var q=g.ownerDocument.createElement(f);ajaxart.xml.copyElementContents(q,g);q.setAttribute("t",h);var p=g.ownerDocument.createElement(aa_tag(g));p.setAttribute("t",g.getAttribute("t"));p.appendChild(q);g.parentNode.replaceChild(p,g);return[]}for(var m=0;m<g.attributes.length;m++){var b=g.attributes.item(m).name;if(b!="t"&&b!="name"){var l=true;var n=ajaxart.xml.xpath(d,"Param[@name='"+b+"']");if(n.length==0||aa_component_param_type(d,b)!=aa_component_param_type(o,b)){g.removeAttribute(b);m--}}}var a=ajaxart.xml.xpath(g,"*");for(var m=0;m<a.length;m++){var b=a[m].tagName;var n=ajaxart.xml.xpath(d,"Param[@name='"+b+"']");if(n.length==0||aa_component_param_type(d,b)!=aa_component_param_type(o,b)){a[m].parentNode.removeChild(a[m])}}}ajaxart.gcs.xtml_dt_tree={TreeDataItems:function(f,g,d){var b={isObject:true,Top:true,Xtml:aa_first(g,f,"TopXtml",d),Type:aa_text(g,f,"Type",d)};var a={isObject:true,ParentXtml:b.Xtml,Top:true,Type:aa_text(g,f,"Type",d)};a.ParamXml=ajaxart.parsexml("<Param type='"+a.Type+"' script='true' />","top param",null,false);b.Items=[a];if(aa_tag(a.ParentXtml)=="Component"){a.Component=true}aa_xtmldt_setnextlevel(b,d);aa_xtmldt_setfunctions(a);return[b]},SaveManager:function(b,d,a){return[aa_save_manager]},FindTreeTopInDialog:function(d,f,b){var a=b.vars.ControlElement[0];return[jQuery(a).find(".aa_xtml_tree").find(">ul").find(">li").find(">.aa_text")[0]]},TreeObject:function(f,h,d){var l={isObject:true};for(var g=f.firstChild;g!=null;g=g.nextSibling){if(g.nodeType==1){var a=g.tagName;var b=g.getAttribute("name");if(b==null||b==""){continue}if(a=="Property"){l[b]=ajaxart.run(h,g,"",d)}else{if(a=="Method"){ajaxart_addMethod(l,b,g,"",d)}}}}l.SetTreeTop=function(n,m){var p=this;p.TreeTop=jQuery(m.vars._Cntr[0].Ctrl).find(".aa_listtop").find(">.aa_item")[0];p.Path="";for(var o=p.TopXtml[0];o!=null&&o.getAttribute;o=o.parentNode){if(aa_tag(o)=="Component"){p.Path=o.getAttribute("id")+"/"+p.Path;break}var r=aa_tag(o);var q=null;if(o.getAttribute("ID")){q=o.getAttribute("ID")}if(o.getAttribute("name")){q=o.getAttribute("name")}if(q){r+="["+q+"]"}p.Path=r+"/"+p.Path}if(p.Path.lastIndexOf("/")==p.Path.length-1){p.Path=p.Path.substring(0,p.Path.length-1)}ajaxart.log(p.Path)};l.KeepCurrentPath=function(n,m){var q=this;var o=m.vars._ElemsOfOperation;var p="";while(!o[0].ItemData[0].Top){var r=o[0].ItemData[0].Text(o[0].ItemData,m)[0].split(" =")[0];p=r+((p=="")?"":"/"+p);o=jQuery(o[0]).parents(".aa_item")}ajaxart.cookies.writeCookie("aaeditor_path",p)};l.GoToPreviousPath=function(n,m){var q=this;var p=ajaxart.cookies.valueFromCookie("aaeditor_path");if(p==null){return}var o=q.GoToPath(p,m);if(o){ajaxart_uiaspects_select(jQuery(o),jQuery(),"auto",m,true)}};l.GoToPath=function(t,m){var s=this;var q=s.TreeTop;if(t==""){return q}var r=t.split("/");for(var o=0;o<r.length;o++){if(!q){continue}if(q.collapsed){m.vars._Cntr[0].CollapseElem(jQuery(q),false)}var p=jQuery(q).children(".aa_list").children(".aa_item");q=null;for(var n=0;n<p.length;n++){if(jQuery(p[n]).children(".aa_text").text().split(" =")[0]==r[o]){q=p[n];break}}}return q};l.Undo=function(q,n){var s=this;var r=null,p;var m=(!n.vars.Redo)?n.vars._UndoData[0].UndoOperations:n.vars._UndoData[0].RedoOperations;if(m.length==0){return[]}if(!n.vars.GotoLastEdit){p=m.pop()}else{p=m[m.length-1]}var r=s.GoToPath(p.Path,n);if(!r){return}if(n.vars.GotoLastEdit){ajaxart_uiaspects_select(jQuery(r),jQuery(),"auto",n,true);return[]}var o=r.ItemData[0][p.Operation];o(r.ItemData,aa_ctx(n,{Undo:[n.vars.Redo==null],Value:p.Primitive,Xml:p.Component,_ElemsOfOperation:[r],Direction:p.Direction}))};return[l]}};function aa_xtmldt_setfunctions(a){a._Type=[a.Type];a._ParamXml=[a.ParamXml];if(a.Param){a._Param=[a.Param]}a.Text=function(u,n){if(a.Component){return[a.ParentXtml.getAttribute("id")]}var d=a.Param,s=a.ParentXtml;if(a.ArrayExtra){return[d+"[+]"]}if(aa_is_static_bool(a)&&d){return[d]}var r=a.Top?"":d+" = ";if(a.ParamXml!=null&&a.ParamXml.getAttribute("title")!=null){r=a.ParamXml.getAttribute("title")+" = "}if(a.IsArrayItem){r=d+"["+(a.Index+1)+"] = ";elems=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.Top){elems=[a.ParentXtml]}else{var m=a.ParentXtml.getAttribute(a.Param);if(m!=null){return[ajaxart.xmlescape(r+m)]}elems=ajaxart.childElems(a.ParentXtml,a.Param)}}if(elems.length==0){return[ajaxart.xmlescape(r)]}if(a.HasName&&elems[0].getAttribute("name")!=null){r=d+"["+elems[0].getAttribute("name")+"] = "}var l=elems[0].getAttribute("value");if(l!=null){r=r+l}else{var b=elems[0].getAttribute("t");if(b==null){r=r.replace(" = ","");if(n.vars.AddTextSummary||(n.vars._ItemElement!=null&&n.vars._ItemElement[0].collapsed)){if(elems[0].tagName=="Case"&&elems[0].getAttribute("If")){r+=": "+elems[0].getAttribute("If")}if(elems[0].tagName=="Case"&&elems[0].getAttribute("IfCondition")){r+=": "+elems[0].getAttribute("IfCondition")}if(elems[0].getAttribute("Remark")!=null&&elems[0].getAttribute("Remark")!=""){r+=" : "+elems[0].getAttribute("Remark")}}return[ajaxart.xmlescape(r)]}r=r+elems[0].getAttribute("t").split(".")[1];if(n.vars.AddTextSummary||(n.vars._ItemElement!=null&&n.vars._ItemElement[0].collapsed)){if(elems[0].getAttribute("Remark")!=null&&elems[0].getAttribute("Remark")!=""){r+=": "+elems[0].getAttribute("Remark")}else{var w=aa_component_definition(elems[0].getAttribute("t"));var o=[];if(w!=null){var v=ajaxart.xml.xpath(w,"Param[@essential='true']");for(var q=0;q<v.length;q++){o.push(v[q].getAttribute("name"))}}var z=[];for(var q=0;q<o.length;q++){var g=elems[0].getAttribute(o[q]);if(g!=null){z.push(g)}else{var y=ajaxart.childElems(elems[0],o[q]);for(var p=0;p<y.length;p++){if(y[p].getAttribute("value")!=null){z.push(y[p].getAttribute("value"))}else{var f=y[p].getAttribute("t");if(f!=null&&f.indexOf(".")!=-1){z.push(f.split(".")[1])}}}}}var h=0;for(var q=0;q<z.length;q++){if(z[q]==null||z[q]==""){break}if(h==3){r+=", ...";break}r+=(h==0?": ":", ")+z[q];h++}}}}if(r.length>50){r=r.substring(0,47)+"..."}return[ajaxart.xmlescape(r)]};a.Update=function(t,u){aa_xtmldt_writeundodata(u.vars._ElemsOfOperation,u);var r=aa_xtmldt_treecntr(u);var s=ajaxart.totext_array(u.vars.Value);var l=s.match(/^=[a-z_A-Z0-9]+[.][a-z_A-Z0-9]+$/)==null;var h=ajaxart.totext_array(u.vars.Xml),n=null;if(h!=""){n=ajaxart.parsexml(h,"script update",null,false,a.ParentXtml);if(n==null){return[]}var p=(a.Top)?aa_tag(a.ParentXtml):a.Param;if(aa_tag(n)!=p){var m=aa_createElement(a.ParentXtml,p);ajaxart.xml.copyElementContents(m,n);n=m}}if(a.ArrayExtra){var f=aa_createElement(a.ParentXtml,a.Param);if(l){f.setAttribute("value",s)}else{f.setAttribute("t",s.substring(1))}if(n!=null){f=n}a.ParentXtml.appendChild(f);a.ArrayExtra=false;var b={isObject:true,ParentXtml:a.ParentXtml,ParamXml:a.ParamXml,Param:a.Param,Type:a.Type,Index:a.Index+1,IsArrayItem:true,ArrayExtra:true};aa_xtmldt_setfunctions(b);var d=jQuery(u.vars._ElemsOfOperation);if(r){var m=ajaxart_uiaspects_addElement([b],r);jQuery(m).insertAfter(d)}}else{if(a.IsArrayItem){var g=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];var m=aa_createElement(a.ParentXtml,a.Param);if(g.getAttribute("name")!=null){m.setAttribute("name",g.getAttribute("name"))}var o=ajaxart.childElems(g,"Var");for(i in o){m.appendChild(aa_importNode(o[i].cloneNode(true),m))}if(l){m.setAttribute("value",s)}else{a.SwitchComponent(m,s.substring(1))}if(n!=null){m=n}ajaxart.replaceXmlElement(g,m,false)}else{if(a.Param=="name"){a.ParentXtml.setAttribute("name",s.replace(new RegExp("[^a-zA-Z_0-9]","g"),""));aa_invoke_cntr_handlers(r,r.RefreshItemTextAndImage,[jQuery(u.vars._ElemsOfOperation[0]).parents(".aa_item")[0]],u)}else{if(a.OnlyPrimitive){a.ParentXtml.setAttribute(a.Param,s)}else{if(n!=null){if(a.Top){ajaxart.xml.copyElementContents(a.ParentXtml,n)}else{var g=ajaxart.childElem(a.ParentXtml,a.Param);if(g!=null){ajaxart.replaceXmlElement(g,n,false)}else{a.ParentXtml.appendChild(n)}a.ParentXtml.removeAttribute(a.Param)}}else{if(a.Top){if(n!=null){a.ParentXtml=n}else{if(l){a.ParentXtml.setAttribute("value",s)}else{a.SwitchComponent(a.ParentXtml,s.substring(1))}}}else{if(l&&a.OnlyElement){var f=ajaxart.childElem(a.ParentXtml,a.Param);if(f==null){f=aa_createElement(a.ParentXtml,a.Param);a.ParentXtml.appendChild(f)}f.setAttribute("value",s)}else{if(l){a.ParentXtml.setAttribute(a.Param,s);var f=ajaxart.childElem(a.ParentXtml,a.Param);if(f!=null){f.parentNode.removeChild(f)}}else{var q=s.substring(1);a.ParentXtml.removeAttribute(a.Param);var f=ajaxart.childElem(a.ParentXtml,a.Param);if(f==null){f=aa_createElement(a.ParentXtml,a.Param);a.ParentXtml.appendChild(f)}a.SwitchComponent(f,q)}}}}}}}}if(u.vars._ElemsOfOperation!=null){aa_save_manager.MarkAsModified([a.ParentXtml],u);var m=aa_xtmldt_refresh_elem(u,u.vars._ElemsOfOperation);r.CollapseElem(jQuery(m[m.length-1]),true);aa_after_update(a,aa_ctx(u,{_ElemsOfOperation:m,_ItemsOfOperation:m[0].ItemData}));if(u.vars._XtmlTreeObj){ajaxart_runMethod([],u.vars._XtmlTreeObj[0],"RefreshLocalPreview",aa_ctx(u,{_Item:[m[0].ItemData]}))}}if(a.Param=="type"){aa_search_comp_of_type_cache=null}ajaxart.xml.xml_changed(a.ParentXtml)};a.SwitchComponent=function(b,d){var f=b.getAttribute("t");b.setAttribute("t",d);if(f){xtmldt_cleanXtmlOfParams(b,f)}},a.Delete=function(l,d){var b;if(a.Top){return}if(a.Param=="name"){return}if(a.IsArrayItem){if(a.ArrayExtra){return[]}var m=jQuery(d.vars._ElemsOfOperation).parents(".aa_item");aa_xtmldt_writeundodata(m,d);aa_save_manager.MarkAsModified([a.ParentXtml],d);var h=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];h.parentNode.removeChild(h);b=jQuery(d.vars._ElemsOfOperation).next();jQuery(d.vars._ElemsOfOperation).remove();ajaxart_uiaspects_select(b,jQuery(),"auto",d,true);for(var f=b[0];f!=null;f=f.nextSibling){if(f.ItemData[0].Param==a.Param){f.ItemData[0].Index--;jQuery(f).children(".aa_text").text(f.ItemData[0].Text(f.ItemData,d)[0])}}}else{var m=jQuery(d.vars._ElemsOfOperation).parents(".aa_item");aa_xtmldt_writeundodata(m,d);a.ParentXtml.removeAttribute(a.Param);var g=ajaxart.childElem(a.ParentXtml,a.Param);if(g!=null){g.parentNode.removeChild(g)}aa_save_manager.MarkAsModified([a.ParentXtml],d);if((a.ParamXml==null||a.ParamXml.getAttribute("essential")!="true")&&ajaxart.totext_array(d.vars._HideEmpties)=="true"){b=jQuery(d.vars._ElemsOfOperation).next();if(b.length==0){b=jQuery(d.vars._ElemsOfOperation).prev()}if(b.length==0){b=jQuery(d.vars._ElemsOfOperation).parent().parent()}jQuery(d.vars._ElemsOfOperation).remove();ajaxart_uiaspects_select(b,jQuery(),"auto",d,true)}else{b=ajaxart_uiaspects_refreshElements(d.vars._ElemsOfOperation,true);ajaxart_uiaspects_select(jQuery(b[b.length-1]),jQuery(),"auto",d,true);cntr.CollapseElem(jQuery(b[b.length-1]),true)}}aa_after_update(a,aa_ctx(d,{_ElemsOfOperation:[b[0]],_ItemsOfOperation:b[0].ItemData}));ajaxart.xml.xml_changed(a.ParentXtml)};a.AsPrimitive=function(g,b){var f;if(a.IsArrayItem){if(a.ArrayExtra){return""}f=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.Top){f=[a.ParentXtml]}else{var d=a.ParentXtml.getAttribute(a.Param);if(d!=null){return[d]}f=ajaxart.childElems(a.ParentXtml,a.Param)}}if(f.length==0){return[]}var h=f[0].getAttribute("value");if(h!=null){return[h]}if(f[0].getAttribute("t")==null){return[""]}return["="+f[0].getAttribute("t")]};a.GetXtml=function(f,b){if(a.Top){return[a.ParentXtml]}else{if(a.IsArrayItem){if(a.ArrayExtra){return[]}return ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.ParentXtml.getAttribute(a.Param)!=null){var g=a.ParentXtml.attributes;for(var d=0;d<g.length;d++){if(g.item(d).nodeName==a.Param){return[g.item(d)]}}}else{return ajaxart.childElems(a.ParentXtml,a.Param)}}}};a.AsXml=function(l,b,h){var f;if(a.IsArrayItem){if(a.ArrayExtra){return[]}return ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}if(a.Top||a.Component){return[a.ParentXtml]}else{f=ajaxart.childElems(a.ParentXtml,a.Param);if(f.length>0){return f}else{if(h){return[]}else{var d=a.ParentXtml.getAttribute(a.Param);if(d==null){d=""}var g=aa_createElement(a.ParentXtml,a.Param);g.setAttribute("value",d);return[g]}}}};a.Copy=function(f,b){ajaxart.xtml_clipboard={isObject:true};if(a.ArrayExtra){return[]}var d=a.AsXml(f,b)[0].cloneNode(true);d.removeAttribute("name");ajaxart.xtml_clipboard.Xml=ajaxart.xml2text(d)};a.Cut=function(d,b){a.Copy(d,b);a.Delete(d,b)};a.Paste=function(d,b){if(ajaxart.xtml_clipboard==null){return}a.Update(d,aa_ctx(b,{Xml:[ajaxart.xtml_clipboard.Xml]}))};a.Move=function(h,b){var m=ajaxart.totext_array(b.vars.Direction);if(!a.IsArrayItem||a.ArrayExtra){return}var g=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];var l=(m=="down")?1:-1;var d=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index+l)+"]");if(d.length==0){return}var f=jQuery(b.vars._ElemsOfOperation[0]);if(m=="down"){d[0].parentNode.insertBefore(d[0],g);a.Index++;f.next()[0].ItemData[0].Index--;aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[f[0]],b);aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[f.next()[0]],b);f.insertAfter(f.next())}else{d[0].parentNode.insertBefore(g,d[0]);a.Index--;f.prev()[0].ItemData[0].Index++;aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[f[0]],b);aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[f.prev()[0]],b);f.prev().insertAfter(f)}if(b.vars._Cntr){ajaxart_uiaspects_select(f,jQuery(),"auto",b,true)}aa_xtmldt_writeundodata(f,b,{isObject:true,Operation:"Move",Direction:[(m=="down"?"up":"down")]})};a.HasNoContent=function(f,b){if(a.ArrayExtra){return["true"]}if(a.Top){return[]}if(a.IsArrayItem){return[]}var d=ajaxart.childElems(a.ParentXtml,a.Param);if(d.length>0){return[]}if(a.ParentXtml.getAttribute(a.Param)){return[]}return["true"]};a.IsActionDisabled=function(d,b){var f=ajaxart.totext_array(b.vars.Operation);if(f=="Paste"&&ajaxart.xtml_clipboard!=null){return[]}if(f=="MoveDown"&&a.IsArrayItem&&!a.ArrayExtra&&ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(2+a.Index)+"]").length>0){return[]}if(f=="MoveUp"&&a.IsArrayItem&&!a.ArrayExtra&&a.Index>0){return[]}if(f=="OpenAAEditor"&&a.Top&&b.vars.AAEditorState){return[]}return["true"]};a.ParamsToAdd=function(n,o){var l=a.AsXml(n,o,true);if(l.length==0){return[]}var g=[];var d=pt_def(l[0],a);if(d!=null){var f=ajaxart.xml.xpath(d,"Param");for(var h=0;h<f.length;h++){var b=f[h];var m=false;if(o.vars._ElemsOfOperation){var p=jQuery(o.vars._ElemsOfOperation[0]).children(".aa_list").children(".aa_item");for(j=0;j<p.length;j++){if(p[j].ItemData[0].Param==b.getAttribute("name")){m=true}}}if(!m){g.push(b)}}}g.push(ajaxart.parsexml("<Param name='Var' title='Variable' icon='"+o.vars._Images[0]+"/studio/bucket.jpg' />"));if(d&&d.getAttribute("id")!=null){g.push(ajaxart.parsexml("<Param name='"+d.getAttribute("id")+"' goto='true' title='Goto "+d.getAttribute("id")+" ...' icon='"+o.vars._Images[0]+"/studio/redo.png' />"))}return g};a.AddParam=function(n,o){aa_xtmldt_writeundodata(o.vars._ElemsOfOperation,o);var m;if(o.vars.Param&&ajaxart.isxml(o.vars.Param)){m=o.vars.Param[0]}else{if(o.vars.SimpleParam){m=aa_createElement(a.ParentXtml,"Param");m.setAttribute("name",ajaxart.totext_array(o.vars.SimpleParam))}}var f=m.getAttribute("name");var g=a.AsXml(n,o,true);if(g.length==0){return[]}if(f=="Var"){var l=aa_createElement(g[0],f);if(o.vars._ElemsOfOperation&&ajaxart.isattached(o.vars._ElemsOfOperation[0])){var d=window.prompt("Variable name:");if(d){l.setAttribute("name",d.replace(/[^a-zA-Z_0-9]/g,""))}}g[0].appendChild(l)}else{if(m.getAttribute("goto")){a.ShowGoto=true}else{if((m.getAttribute("type")==null||m.getAttribute("type").indexOf("[]")==-1)&&g[0].getAttribute(f)==null&&ajaxart.childElem(g[0],f)==null){if(m.getAttribute("Default")){g[0].setAttribute(f,m.getAttribute("Default"))}else{var b=ajaxart.childElems(m,"Default");if(b.length>0){if(b[0].getAttribute("value")){g[0].setAttribute(f,b[0].getAttribute("value"))}else{var l=aa_createElement(g[0],f);ajaxart.xml.copyElementContents(l,b[0]);g[0].appendChild(l)}}else{g[0].setAttribute(f," ");g[0].setAttribute(f,"")}}}else{a.ShowMoreParams=f}}}aa_save_manager.MarkAsModified(g,o);if(o.vars._ElemsOfOperation){var h=aa_xtmldt_refresh_elem(o,o.vars._ElemsOfOperation);var p=jQuery(h).children(".aa_list").children(".aa_item");for(j=0;j<p.length;j++){if(jQuery(p[j]).children(".aa_text").text().indexOf(f)==0){ajaxart_uiaspects_select(jQuery(p[j]),jQuery(),"auto",o,true);if(f!="Var"&&!m.getAttribute("goto")&&!aa_is_static_bool(p[j].ItemData[0])){p[j].ItemData[0].DoubleClick(p[j].ItemData,aa_ctx(o,{_ElemsOfOperation:[p[j]],_ItemsOfOperation:p[j].ItemData}))}}}}};a.Image=function(h,d){var g=aa_base_images()+"/studio/paper.jpg";var b=aa_base_images()+"/studio/boolean.gif";var l=aa_base_images()+"/studio/enum.gif";if(a.Param=="name"){return[aa_base_images()+"/studio/fonts1616.png"]}if(a.Component){return[aa_base_images()+"/studio/plugin1616.png"]}if(a.Param=="Param"){return[aa_base_images()+"/studio/mini-corp-mem.jpg"]}if(aa_is_static_bool(a)){if(a.ParentXtml.getAttribute(a.Param)=="true"){return[aa_base_images()+"/studio/true.bmp"]}else{return[aa_base_images()+"/studio/false.bmp"]}}if(!a.Type||a.Type=="data.Data"){return[g]}var f=a.Type;if(f.indexOf("[]")!=-1){f=f.substring(0,f.length-2)}f=f.replace(".","_");if(f=="enum"||f=="dynamic_enum"||f=="dynamic_enum_multi"){return[l]}if(ajaxart.types[f]&&ajaxart.types[f].getAttribute("icon")!=null){return ajaxart.run([],aa_xpath(ajaxart.types[f],"@icon")[0],"",d)}return[b]};a.DoubleClick=function(g,f){if(aa_is_static_bool(a)){var b;if(a.ParentXtml.getAttribute(a.Param)=="true"){b="false"}else{b="true"}a.Update(g,aa_ctx(f,{Value:[b]}))}else{if(a.Type=="inline"||a.Type=="struct"){if(a.ArrayExtra){a.Update(g,aa_ctx(f,{Xml:["<"+a.Param+"/>"]}))}return}else{if(a.Component){return}else{var h=(a.OnlyPrimitive||a.Param=="name")?["true"]:[];var d=a.ParamXml;if(a.Type=="parent_type"){d=ajaxart.parsexml("<Param type='"+a.ParentXtml.getAttribute("type")+"' />")}aa_run_component("xtml_dt_tree.OpenPrimitivePopup",g,aa_ctx(f,{ParamXml:[d],OnlyPrimitive:h}))}}}};a.ObjectForPreview=function(f,b){var d={isObject:true,ParentXtml:[a.ParentXtml],Field:[a.Param],Xtml:a.AsXml(f,b,true)};if(a.ArrayExtra){d.Field=[a.Param+"[+]"]}return[d]};a.More=function(g,b){var l=b.vars.MoreComponent[0];var h=a.AsXml(g,b)[0];var f=aa_createElement(h,aa_tag(h));var d=aa_createElement(f,l.getAttribute("itemsParam"));ajaxart.xml.copyElementContents(d,h);if(d.getAttribute("name")){f.setAttribute("name",d.getAttribute("name"));d.removeAttribute("name")}f.setAttribute("t",l.getAttribute("id"));f.appendChild(d);a.Update(g,aa_ctx(b,{Xml:[ajaxart.xml2text(f)]}))},a.IsTop=function(d,b){if(a.Top){return["true"]}else{return[]}}}function aa_is_static_bool(b){if(!(b.Type=="data.Boolean"&&b.ParamXml!=null&&b.ParamXml.getAttribute("script")==null)){return false}var d=b.ParentXtml.getAttribute(b.Param);if(d==""||d=="true"||d=="false"){return true}if(d==null){elems=ajaxart.childElems(b.ParentXtml,b.Param);if(elems.length>0){var a=elems[0].getAttribute("value");if(a=="true"||a=="false"||a==""){return true}}else{return true}}return false}function aa_after_update(b,a){a.vars._XtmlTreeObj[0].AfterUpdate([b.ParentXtml],a)}function aa_xtmldt_writeundodata(f,a,m){if(a.vars._UndoData==null){return}var d=(m)?m:{isObject:true};d.Path="";var g=f;while(!g[0].ItemData[0].Top){var l=g[0].ItemData[0].Text(g[0].ItemData,a)[0].split(" =")[0];d.Path=l+((d.Path=="")?"":"/"+d.Path);g=jQuery(g[0]).parents(".aa_item")}if(d.Operation==null){d.Operation="Update"}var h=f[0].ItemData[0];if(h.Top){d.Component=[ajaxart.xml2text(h.ParentXtml)]}else{if(h.IsArrayItem){if(h.ArrayExtra){d.Operation="Delete";d.Path=d.Path.replace("+",h.Index+1)}else{var b=ajaxart.xml.xpath(h.ParentXtml,h.Param+"["+(1+h.Index)+"]")[0];d.Component=[ajaxart.xml2text(b)]}}else{if(h.ParentXtml.getAttribute(h.Param)!=null){d.Primitive=[h.ParentXtml.getAttribute(h.Param)]}else{var f=ajaxart.childElem(h.ParentXtml,h.Param);if(f!=null){d.Component=[ajaxart.xml2text(f)]}else{d.Operation="Delete"}}}}if(a.vars.Undo==null||a.vars.Undo[0]==false){a.vars._UndoData[0].UndoOperations.push(d)}else{a.vars._UndoData[0].RedoOperations.push(d)}}function aa_xtmldt_refresh_elem(a,f){if(!f.length){return[]}var b=f[0].ItemData;var h=ajaxart_uiaspects_refreshElements(f,true);ajaxart_uiaspects_select(jQuery(h[h.length-1]),jQuery(),"auto",a,true);var g=jQuery(h[h.length-1]).find(".aa_item");g.each(function(){var l=aa_xtmldt_treecntr(a);l.CollapseElem(jQuery(this),true)});for(var d=0;d<h.length;d++){if(h[d].ItemData==b){return[h[d]]}}return[]}function aa_xtmldt_treecntr(a){if(a.vars._Cntr){var b=a.vars._Cntr[0];while(aa_totext(b.ID)=="show_field"&&b.ParentCntr){b=b.ParentCntr}return b}return null}function aa_xtmldt_create_xml_obj(a,b,f){var d={};d.IsActionDisabled=function(h,g){return["true"]};d.HasNoContent=function(h,g){return["true"]};d.ParamsToAdd=function(h,g){return[]};d.Image=function(h,g){return[aa_base_images()+"/studio/xml1616.gif"]};d.Text=function(l,g){var h=ajaxart.childElem(a,"*");if(!h){return[b]}else{return[aa_tag(h)+" ..."]}};d.DoubleClick=function(m,g){var h={isObject:true,ParentXtml:[a],DynamicContent:a.getAttribute("DynamicContent")=="true"};var l=ajaxart.childElems(a,"*");if(l.length!=0){h.Xml=l}else{h.Xml=[aa_createElement(a,f)]}h.OnOK=function(p,n){var q=aa_xtmldt_treecntr(g);if(ajaxart.totext_array(p[0].DynamicContent)=="true"){a.setAttribute("DynamicContent","true")}else{a.removeAttribute("DynamicContent")}var o=ajaxart.childElem(a,"*");if(o!=null){a.removeChild(o)}a.appendChild(aa_importNode(p[0].Xml[0],a));aa_invoke_cntr_handlers(q,q.RefreshItemTextAndImage,g.vars._ElemsOfOperation,g);ajaxart_uiaspects_select(jQuery(g.vars._ElemsOfOperation[0]),jQuery(),"auto",g,true)};aa_run_component("xtml_dt_tree.OpenXmlDialog",[h],g)};d.GetXtml=function(){return[a]};return d}function pt_def(a,f){var b=null;var d=a.getAttribute("t");if(f.Type=="inline"){b=f.ParamXml}else{if((a.getAttribute("t")||f.Component)&&a.getAttribute("value")==null){if(f.Component){d="xtml_dt_tree.ComponentDef"}b=aa_component_definition(d)}}return b}function aa_xtmldt_setnextlevel(a,b){a.NextLevel=function(d,s){obj=d[0];var C=obj.ParentXtml;if(obj.IsArrayItem){if(obj.ArrayExtra){return[]}C=ajaxart.xml.xpath(obj.ParentXtml,obj.Param+"["+(1+obj.Index)+"]")[0]}else{if(obj.Param){var m=obj.Param;if(C.getAttribute(m)){return[]}var l=ajaxart.xml.xpath(C,m);if(l.length==0){return[]}C=l[0]}}if(obj.ArrayExtra){return[]}if(!C||C.nodeType!=1){return[]}var p=[];var J={};var y={isObject:true,Xtml:C,Items:[]};var G=pt_def(C,obj);if(G!=null){var E=ajaxart.xml.xpath(G,"Param");for(var w=0;w<E.length;w++){var v=E[w];var t={isObject:true,ParentXtml:C,ParamXml:v,Param:v.getAttribute("name"),Type:v.getAttribute("type")};if(ajaxart.totext_array(s.vars._HideEmpties)=="true"&&C.getAttribute(t.Param)==null&&ajaxart.childElems(C,t.Param).length==0&&t.Param!=obj.ShowMoreParams){if(!v.getAttribute("essential")||ajaxart.childElem(v,"Default")||v.getAttribute("Default")){continue}}if(v.getAttribute("has_name")){t.HasName=true}if(v.getAttribute("only_primitive")){t.OnlyPrimitive=true}if(v.getAttribute("only_element")){t.OnlyElement=true}J[t.Param]=true;if(!t.Type){t.Type="data.Data"}if(t.Type.indexOf("[]")==-1){p.push(t);aa_xtmldt_setfunctions(t)}else{var F=ajaxart.xml.xpath(C,t.Param);var g=t.Type;var D=g.substring(0,g.length-2);for(var u=0;u<=F.length;u++){var z={isObject:true,ParentXtml:C,ParamXml:v,Param:t.Param,Type:D,Index:u,IsArrayItem:true};if(v.getAttribute("has_name")){z.HasName=true}if(u==F.length){z.ArrayExtra=true}p.push(z);aa_xtmldt_setfunctions(z)}}}if(C.getAttribute("t")=="xml.Xml"){p=[aa_xtmldt_create_xml_obj(C,"xml","xml")]}if(C.getAttribute("t")=="ui.Html"){p=[aa_xtmldt_create_xml_obj(C,"html","div")]}}var h=[];var B=[],q=[];var r=C.attributes;if(obj.HasName&&!J.name){h.push("name");J.name=true}for(var w=0;w<r.length;w++){var A=r.item(w).nodeName;if(J[A]==null&&A!="t"&&A!="value"&&A!="customxtml"){h.push(A);J[A]=true}}var n=0;var o=C.childNodes.length;for(var w=0;w<o;w++){if(C.childNodes.item(w).nodeType!=1){continue}var I=aa_tag(C.childNodes.item(w));if(J[I]==null){if(I=="Var"){var t={isObject:true,ParentXtml:C,Param:"Var",IsArrayItem:true,Index:n,Type:"data.Data",HasName:true};n++;t.ParamXml=ajaxart.parsexml('<Param type="data.Data" name="'+t.Param+'" />');aa_xtmldt_setfunctions(t);q.push(t)}else{if(C.getAttribute("t")!="xml.Xml"&&C.getAttribute("t")!="ui.Html"){h.push(I);J[I]=true}}}}for(var w=0;w<h.length;w++){var f=h[w];var t={isObject:true,ParentXtml:C,Param:f};t.ParamXml=ajaxart.parsexml('<Param type="data.Data" name="'+t.Param+'" />');if(t.Param=="Condition"){t.Type="data.Boolean";t.ParamXml.setAttribute("type","data.Boolean");t.ParamXml.setAttribute("script","true")}if(t.Param=="Trace"){t.ParamXml.setAttribute("type","enum");for(var H=0;H<=9;H++){t.ParamXml.appendChild(ajaxart.parsexml("<value>"+H+"</value>","","",true,t.ParamXml))}}J[t.Param]=true;aa_xtmldt_setfunctions(t);if(t.Param=="Condition"||t.Param=="Data"){q.push(t)}else{B.push(t)}}y.Items=q.concat(p).concat(B);aa_xtmldt_setnextlevel(y,b);if(obj.ShowGoto){var z={isObject:true,Component:true,ParentXtml:aa_component_definition(C.getAttribute("t"))};aa_xtmldt_setfunctions(z);y.Items.push(z)}return[y]}}var aa_save_manager={isObject:true,modified:{},MarkAsModified:function(d,a){var b=d[0];while(b!=null&&b.nodeType!=9&&aa_tag(b)!="Component"){b=b.parentNode}if(!b||b.nodeType==9||!b.parentNode||b.parentNode.getAttribute("ns")==null){return}var f=b.parentNode.getAttribute("ns")+"."+b.getAttribute("id");if(aa_save_manager.modified[f]==null){aa_save_manager.modified[f]=true}aa_save_manager.modified.not_empty=true},MarkComponentIdAsModified:function(b,a){var d=ajaxart.totext_array(b);if(aa_save_manager.modified[d]==null){aa_save_manager.modified[d]=true}},Save:function(b,a){var d=[];for(i in aa_save_manager.modified){if(i!="not_empty"){d.push(i)}}aa_run_component("xtml_dt_tree.SaveToServer",b,aa_ctx(a,{_ModifiedComponents:d}))},NoModified:function(b,a){if(aa_save_manager.modified.not_empty!=null){return[]}return["true"]},Clean:function(d,a){aa_save_manager.modified={};var b=jQuery(".dialog_box").find(".aa_xtml_tree")[0];var f=b&&b.Cntr;if(f){container.ContainerChange[0](d,a)}}};aa_gcs("action_async",{RunAsync:function(d,f,b){var a=ajaxart.xml.xpath(ajaxart.parsexml('<xml value=""/>'),"@value");var g=aa_ctx(b,{AyncFailure:a});ajaxart_RunAsync(f,ajaxart.fieldscript(d,"Action"),g,function(h,l,m){ajaxart.run(f,d,m?"OnSuccess":"OnFailure",b)});return["true"]},RunAsyncActions:function(d,f,b){var a=ajaxart.xml.xpath(ajaxart.parsexml('<xml value=""/>'),"@value");var g=aa_ctx(b,{AyncFailure:a,_AsyncCallback:null});return ajaxart.gcs.action_async.SequentialRun(d,f,g)},RunAsyncWithSuccessFailure:function(b,d,a){},SyncAction:function(b,d,a){ajaxart.runsubprofiles(d,b,"Action",a);return["true"]},RunActionOnItems:function(b,g,a){var f=ajaxart_async_GetCallbackObj(a);f.marked=true;f.index=0;f.items=ajaxart.run(g,b,"Items",a);f.actionProf=ajaxart.fieldscript(b,"Action");var d=function(h,m){var l=ajaxart_async_GetCallbackObj(a);if(l.index>=l.items.length){ajaxart_async_CallBack(g,a);return}l.index++;ajaxart_RunAsync([l.items[l.index-1]],l.actionProf,a,l.seqCallBack)};f.seqCallBack=d;d(g,a);return["true"]},ActionOnAsyncData:function(f,h,d){var a=ajaxart.inPreviewMode;if(ajaxart.inPreviewMode&&jBart.vars._previewAsyncs){for(var b=0;b<jBart.vars._previewAsyncs.length;b++){if(jBart.vars._previewAsyncs[b].profile==f){ajaxart.run(jBart.vars._previewAsyncs[b].data,f,"Action",d)}}}ajaxart_async_Mark(d);var g=function(n,o){if(a){if(!jBart.vars._previewAsyncs){jBart.vars._previewAsyncs=[]}var m=false;for(var l=0;l<jBart.vars._previewAsyncs.length;l++){if(jBart.vars._previewAsyncs[l].profile==f){m=true;jBart.vars._previewAsyncs[l].data=n}}if(!m){jBart.vars._previewAsyncs.push({profile:f,data:n})}}ajaxart.run(n,f,"Action",d);ajaxart_async_CallBack(h,d)};aa_RunAsyncQuery(h,ajaxart.fieldscript(f,"Query"),d,g);return["true"]},AsyncActionOnAsyncData:function(b,f,a){ajaxart_async_Mark(a);var d=function(h,l){var g=function(m,n){ajaxart_async_CallBack(f,a)};ajaxart_RunAsync(h,ajaxart.fieldscript(b,"Action"),a,g)};aa_RunAsyncQuery(f,ajaxart.fieldscript(b,"Query"),a,d);return["true"]},SuccessByHttpCode:function(b,d,a){},Rest:function(b,d,a){return ajaxart.gcs.data_async.Rest(b,d,a)},UrlGet:function(b,d,a){return ajaxart.gcs.data_async.UrlGet(b,d,a)},UrlPost:function(b,d,a){return ajaxart.gcs.data_async.UrlPost(b,d,a)},LoadJsFiles:function(g,m,f){var l=ajaxart_run_commas(m,g,"JsFiles",f);for(var d=0;d<l.length;d++){var b=l[d],a="";if(b.split(" ").length>1){a=b.split(" ")[1];b=b.split(" ")[0]}if(!aa_jsfiles[b]){aa_jsfiles[b]={file:b,afterLoad:[]}}if(aa_jsfiles[b].loaded){continue}var h=function(o,n){ajaxart_async_Mark(f);aa_jsfiles[o].afterLoad.push({data:m,context:f});if(!aa_jsfiles[o].loading){aa_jsfiles[o].loading=true;if(n){window[n]=function(){aa_jsfiles[o].loaded=true;var q=aa_jsfiles[o].afterLoad;for(var p=0;p<q.length;p++){ajaxart_async_CallBack(q[p].data,q[p].context)}};jQuery.getScript(o)}else{jQuery.ajax({url:o,dataType:"script",success:function(){aa_jsfiles[o].loaded=true;var q=aa_jsfiles[o].afterLoad;for(var p=0;p<q.length;p++){ajaxart_async_CallBack(q[p].data,q[p].context)}},error:function(){ajaxart.log("could not load script file "+o,"error");var q=aa_jsfiles[o].afterLoad;for(var p=0;p<q.length;p++){ajaxart_async_CallBack(q[p].data,q[p].context)}}})}}};h(b,a)}},LoadCssFiles:function(d,g,b){if(typeof(aa_loaded_css_files)=="undefined"){aa_loaded_css_files=","}var f=ajaxart_run_commas(g,d,"CssFiles",b);for(var a=0;a<f.length;a++){if(aa_loaded_css_files.indexOf(","+f[a]+",")>-1){continue}var h=document.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");h.setAttribute("href",f[a]);document.getElementsByTagName("head")[0].appendChild(h);aa_loaded_css_files+=f[a]+","}},LoadXtmlPackage:function(d,f,b){var g=aa_text(f,d,"Package",b);if(g==""){return[]}ajaxart_async_Mark(b);var a={cache:false,type:"GET",httpHeaders:[],url:g};a.success=function(l){var h=ajaxart_server_content2result(l)[0];ajaxart.load_xtml_content(aa_text(f,d,"Package",b),h);ajaxart_async_CallBack([],b)};a.error=function(h){aa_handleHttpError(h,this,b);ajaxart_async_CallBack([],b)};jQuery.ajax(a)}});ajaxart.gcs.data_async={Rest:function(d,g,b){ajaxart_async_Mark(b,true);if(aa_tobool(b.vars._NoExternalCalls)){var h=ajaxart.run([],d,"SampleResults",b);ajaxart_async_CallBack(ajaxart.run(h,d,"ConvertResult",b),b);return[]}var q=aa_text(g,d,"KeyForPreLoading",b);ajaxart.serverData=ajaxart.serverData||{};if(ajaxart.serverData[q]!=null){var m=ajaxart.serverData[q];var r=ajaxart.run(m,d,"ConvertResult",b);ajaxart.run(r,d,"ActionOnResult",b);aa_hideProgressIndicator(b);ajaxart_async_CallBack(r,b);return[]}var l=aa_text(g,d,"ID",b);if(l!=""){if(ajaxart.Requests==null){ajaxart.Requests={}}if(ajaxart.Requests[l]){ajaxart.Requests[l].abort()}}var a=aa_text(g,d,"Method",b);var o=aa_text(g,d,"ContentType",b);var p={cache:false,type:a,headers:{"Content-Type":o}};p.url=aa_text(g,d,"Url",b);p.data=aa_text(g,d,"PostData",b);var f=aa_text(g,d,"ResultType",b);p.success=function(u){var t=ajaxart_server_content2result(u,f);var s=ajaxart.run(t,d,"ConvertResult",b);ajaxart.run(s,d,"ActionOnResult",b);aa_hideProgressIndicator(b);ajaxart.run(s,d,"OnSuccess",b);ajaxart_async_CallBack(s,b)};p.error=function(s){aa_handleHttpError(s,this,b);ajaxart.writevalue(b.vars.AsyncFailure,["true"]);aa_hideProgressIndicator(b);ajaxart.run(r,d,"OnError",b);ajaxart_async_CallBack([],b)};if(aa_bool(g,d,"TunnelRequest",b)){if(a=="GET"){aa_crossdomain_call({url:"//jbartdb.appspot.com/jbart_db.js?op=proxy&url="+encodeURIComponent(p.url),success:p.success,error:p.error},true);p._doNotRunAjax=true}else{p.type="POST";p.headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"};p.data={contents:p.url,headers:"Content-Type: "+o,__METHOD:a,__POSTDATA:p.data};p.url="get.php"}}if(!p._doNotRunAjax){var n=jQuery.ajax(p);aa_showProgressIndicator(b);if(l!=""){ajaxart.Requests[l]=n}}},CurrentGeoLocation:function(b,d,a){if(navigator.geolocation){ajaxart_async_Mark(a,true);navigator.geolocation.getCurrentPosition(function(f){ajaxart_async_CallBack([f.coords],a)})}return[]},JBartJsonP:function(d,g,b){var f=aa_text(g,d,"Url",b);if(ajaxart.inPreviewMode){if(!window.aa_preview_cache){window.aa_preview_cache={}}if(window.aa_preview_cache[f]){return window.aa_preview_cache[f]}}ajaxart_async_Mark(b,true);if(!ajaxart.jSonRequests){ajaxart.jSonRequests={}}if(!ajaxart.jsonReqCounter){ajaxart.jsonReqCounter=0}if(!window.aa_jsonp_callback){aa_jsonp_callback=function(o,n,h){var l=ajaxart&&ajaxart.jSonRequests[n];if(l){ajaxart.jSonRequests[n]=null;var m=ajaxart_server_content2result(o,aa_text(l.data,l.profile,"ResultType",l.context));ajaxart.run(m,l.profile,"OnSuccess",l.context);aa_hideProgressIndicator(b);if(ajaxart.jbart_studio&&window.aa_preview_cache){window.aa_preview_cache[l.baseUrl]=m}ajaxart_async_CallBack(m,l.context)}}}ajaxart.jsonReqCounter=(ajaxart.jsonReqCounter+1)%1000;ajaxart.jSonRequests[ajaxart.jsonReqCounter]={data:g,profile:d,context:b,baseUrl:f};var a=f+"&aa_req_id="+ajaxart.jsonReqCounter;jQuery.ajax({cache:false,dataType:"script",httpHeaders:[],url:a,error:function(h){aa_handleHttpError(h,this,b);ajaxart.writevalue(b.vars.AsyncFailure,["true"]);aa_hideProgressIndicator(b);ajaxart.run(newdata,d,"OnFailure",b);ajaxart_async_CallBack([],b)}});aa_showProgressIndicator(b);return[]},Pipeline:function(b,g,a){var f=ajaxart_async_GetCallbackObj(a);f.marked=true;f.index=0;f.profs=ajaxart.subprofiles(b,"Item");var d=function(h,n){var l=ajaxart_async_GetCallbackObj(a);if(l.index>=l.profs.length){ajaxart_async_CallBack(h,a);return}var m=l.profs[l.index];l.index++;aa_RunAsyncQuery(h,m,a,l.seqCallBack)};f.seqCallBack=d;d(g,a);return[]},Parallel:function(b,f,a){var d=ajaxart_async_GetCallbackObj(a);d.marked=true;d.index=0;d.mergeInputs=ajaxart.subprofiles(b,"Input");var h=ajaxart.clone_context(a);h.vars._ASyncContextForMerge=[h];var g=function(m){var l=function(o,q){var p=ajaxart_async_GetCallbackObj(a);if(p.index>=p.mergeInputs.length){var n=ajaxart.run(f,b,"Result",m);ajaxart_async_CallBack(n,a);return}p.index++;ajaxart_RunAsync(f,p.mergeInputs[p.index-1],m,p.pCallBack)};d.pCallBack=l;l(f,m)};g(h);return[]},MergeInput:function(b,f,a){ajaxart_async_Mark(a,true);var d=function(g,h){var l=aa_text(f,b,"Name",a);a.vars._ASyncContextForMerge[0].vars[l]=g;ajaxart_async_CallBack([],a)};aa_RunAsyncQuery(f,ajaxart.fieldscript(b,"Query",true),a,d);return[]},CurrentGeoLocation:function(b,d,a){if(!navigator.geolocation){return}ajaxart_async_Mark(a,true);navigator.geolocation.getCurrentPosition(function(f){var g={isObject:true,Latitude:""+f.coords.latitude,Longitude:""+f.coords.longitude};ajaxart_async_CallBack([g],a)})},UrlPost:function(f,h,b){ajaxart_async_Mark(b,true);var m=aa_text(h,f,"ID",b);if(m!=""){if(ajaxart.Requests==null){ajaxart.Requests={}}if(ajaxart.Requests[m]){ajaxart.Requests[m].abort()}}var p=aa_text(h,f,"ContentType",b);if(aa_bool(h,f,"TunnelRequest",b)){return ajaxart.runNativeHelper(h,f,"TunnelRequest",aa_ctx(b,{Headers:["Content-Type: "+p]}))}var q={cache:false,type:"POST",headers:{"Content-Type":p}};q.url=aa_text(h,f,"Url",b);q.data={};var n=ajaxart.runsubprofiles(h,f,"PostData",b);for(var l=0;l<n.length;l++){var g=n[l];if(g.Name!=null){var a=ajaxart.totext(g.Name);var d=ajaxart.totext(g.Value);if(d!=null){q.data[a]=d}}else{q.data=ajaxart.totext(g)}}q.success=function(s){aa_hideProgressIndicator(b);var r=ajaxart_server_content2result(s,aa_text(h,f,"ResultType",b));ajaxart.run(r,f,"OnSuccess",b);ajaxart_async_CallBack(r,b)};q.error=function(r){aa_hideProgressIndicator(b);aa_handleHttpError(r,this,b);ajaxart.writevalue(b.vars.AsyncFailure,["true"]);ajaxart_async_Failure(b);ajaxart.run([],f,"OnFailure",b);ajaxart_async_CallBack([],b)};var o=jQuery.ajax(q);aa_showProgressIndicator(b);if(m!=""){ajaxart.Requests[m]=o}return[]},UrlGet:function(h,m,f){ajaxart_async_Mark(f,true);var d=aa_text(m,h,"Url",f);if(!ajaxart.UrlGetResults){ajaxart.UrlGetResults={}}if(aa_bool(m,h,"CacheResult",f)&&ajaxart.UrlGetResults[d]){ajaxart_async_CallBack(ajaxart.UrlGetResults[d],f);return ajaxart.UrlGetResults[d]}if(ajaxart.isBackEnd){var a=aa_backend_Utils.UrlGet(d,aa_text(m,h,"TunnelCookies",f),"");if(""+a.success=="true"){aa_bool([""+a.result],h,"OnSuccess",aa_ctx(f,{_UrlGetResult:[a]}));ajaxart_async_CallBack([""+a.result],f);return[""+a.result]}else{ajaxart.log("url get failure");aa_bool(m,h,"OnFailure",aa_ctx(f,{_UrlGetResult:[a]}));ajaxart_async_CallBack([],f)}return[]}if(aa_bool(m,h,"TunnelRequest",f)){return ajaxart.runNativeHelper(m,h,"TunnelRequest",f)}var g=aa_text(m,h,"ID",f);if(g!=""){if(ajaxart.Requests==null){ajaxart.Requests={}}if(ajaxart.Requests[g]){ajaxart.Requests[g].abort()}}var b={cache:false,type:"GET",httpHeaders:[]};b.url=b.originalUrl=d;b.success=function(o){var n=ajaxart_server_content2result(o,aa_text(m,h,"ResultType",f));ajaxart.UrlGetResults[this.originalUrl]=n;aa_text(n,h,"OnSuccess",aa_ctx(f,{_UrlGetResult:[a]}));ajaxart_async_CallBack(n,f)};b.error=function(n){aa_handleHttpError(n,this,f);ajaxart_async_CallBack([],f)};var l=jQuery.ajax(b);if(g!=""){ajaxart.Requests[g]=l}return[]},Calculate:function(b,d,a){ajaxart_async_Mark(a,true);var f=ajaxart.run(d,b,"Query",a);ajaxart_async_CallBack(f,a);return[]},SyncDataOnNextTimer:function(b,d,a){ajaxart_async_Mark(a,true);setTimeout(function(){var f=ajaxart.run(d,b,"Query",a);ajaxart_async_CallBack(f,a)},10)},AsyncDataOnNextTimer:function(b,d,a){ajaxart_async_Mark(a,true);setTimeout(function(){aa_RunAsyncQuery(d,ajaxart.fieldscript(b,"Query"),a,function(g,f){ajaxart_async_CallBack(g,a)})},10)},SyncData:function(b,d,a){ajaxart_async_Mark(a,true);var f=ajaxart.run(d,b,"Query",a);ajaxart_async_CallBack(f,a);return[]}};aa_gcs("jbart",{ApiCall:function(f,h,d){var a=aa_text(h,f,"Url",d);var g=aa_text(h,f,"ResultType",d);var l=aa_totext(d.vars._PreviewMode)=="true";var b=l?aa_totext(aa_xpath(f,"../@id")):"";if(l){n("running api call...")}if(!l){var m=d.vars._Target&&d.vars._Target[0];if(!m){m=aa_first(h,f,"DefaultTarget",d)}if(!m){return}if(m.firstChild&&aa_bool(h,f,"SkipCallIfDataPresent",d)){return}while(m.firstChild&&!l){m.removeChild(m.firstChild)}}var o={url:a,success:function(p){if(l){if(p.trim){p=p.trim()}n(p);return ajaxart_async_CallBack([p],d)}var q=ajaxart_server_content2result(p,g);if(q[0]){ajaxart.xml.copyElementContents(m,q[0])}ajaxart_async_CallBack(q,d)},error:function(p){p=p||{};if(l){n("error "+p.message||"");return ajaxart_async_CallBack([],d)}ajaxart.writevalue(d.vars.AsyncFailure,["true"]);ajaxart_async_CallBack([],d)}};ajaxart_async_Mark(d);ajaxart.run([o],f,"CommunicationType",d);function n(p){jQuery(".fld_api_preview_result").val(p)}},MultipleApiCalls:function(b,d,a){aa_async_XtmlSequentialRun(d,b,"Call",a)},RestWithJBartDBProxy:function(b,d,a){aa_crossdomain_call({url:"//jbartdb.appspot.com/jbart_db.js?op=proxy&url="+encodeURIComponent(d[0].url),success:d[0].success,error:d[0].error},true)},JSONP:function(d,g,b){window.aa_jsonp_cb_counter=window.aa_jsonp_cb_counter||0;var f="aa_jsonp_cb"+(++aa_jsonp_cb_counter);window[f]=function(h){if(typeof(h)=="object"&&!h.nodeType){h=JSON.stringify(h)}window[f]=null;g[0].success(h)};setTimeout(function(){if(window[f]){window[f]=null;g[0].error({text:"callback was not called"})}},aa_int(g,d,"Timeout",b));var a=g[0].url;a+="&"+aa_text(g,d,"UrlParameterForCallback",b)+"="+f;aa_load_js_css(a,"js")}});function ajaxart_async_IsFailure(b){var a=b.vars._AsyncCallback;if(a!=null&&a.success==false){return true}return false}function ajaxart_async_Failure(a){if(a.vars._AsyncCallback!=null){a.vars._AsyncCallback.success=false}}function ajaxart_server_content2result(h,b){if(b=="json"){return[h]}if(b=="json to xml"){return[aa_JSON2Xml(h,"Top")]}try{if(b==null||b==""){b="xml"}if(ajaxart.isxml(h)){var a=h.firstChild;while(a.nodeType!=1&&a.nextSibling!=null){a=a.nextSibling}return[a]}if(h==""){return[]}var d=null;if(b!="xml"||(h.length>0&&h.charAt(0)!="<")){return[h]}var f=ajaxart.ajaxart_clean_ns(h);if(h.length>0&&h.charAt(0)=="<"){d=[ajaxart.parsexml(f)]}if(d==null){d=[h]}if(d.length==1&&d[0]==null){d=[h]}if(ajaxart.ishtml(d[0])||(ajaxart.isxml(d[0])&&ajaxart.xml.xpath(d[0].ownerDocument.documentElement,"Body/Fault").length!=0)){ajaxart.log("failed calling server","error");if(ajaxart.ishtml(d)){jQuery("<div>error back from server:"+h+"</div>").appendTo(jQuery("#ajaxart_log"))}}else{if(ajaxart.isxml(d)){if(d[0].nodeType==7){d=[d[0].nextSibling]}if(d[0].tagName.toLowerCase()=="envelope"){d=[ajaxart.body_contents_of_soap_envelope(d[0])]}}}return d}catch(g){ajaxart.logException(g);return[]}}function aa_ulrpost(a,l,m,d){var n={cache:false,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",httpHeaders:[]};n.url=a;n.data={};for(var h=0;h<l.length;h++){var g=l[h];var b=ajaxart.totext(g.Name);var f=ajaxart.totext(g.Value);if(f!=null){n.data[b]=f}}n.success=function(p){var o=ajaxart_server_content2result(p);m(o,d)};n.error=function(){aa_handleHttpError(e,this);ajaxart.writevalue(d.vars.AsyncFailure,["true"]);m([],d)};jQuery.ajax(n)}function aa_showProgressIndicator(b,a){aa_showIndicator=true;jQuery(b.vars.ControlElement).addClass("aa_loading");setTimeout(function(){if(!aa_showIndicator){return}var f=ajaxart_multilang_text(aa_totext(b.vars.ProgressIndicationText),b);if(f==""){f=ajaxart_multilang_text("loading...",b)}var d=jQuery(".aa_progress_indicator");if(!d.hasClass("right2left")&&ajaxart_language(b)=="hebrew"){d.addClass("right2left")}d.find(".aa_progress_indicator_text").html(f);d.show();if(a){setTimeout(function(){aa_hideProgressIndicator(b)},3000)}},300)}function aa_hideProgressIndicator(a){aa_showIndicator=false;jQuery(a.vars.ControlElement).removeClass("aa_loading");jQuery(".aa_progress_indicator").hide();aa_fire_async_finished()}aa_showIndicator=false;function aa_remove_async_finished_listener(b){for(var a=0;a<aa_async_finished_listeners.length;a++){if(aa_async_finished_listeners[a]==b){aa_async_finished_listeners.splice(a,1);return}}}aa_jsfiles={};function aa_async_XtmlSequentialRun(g,b,h,a){var f=ajaxart_async_GetCallbackObj(a);f.marked=true;f.index=0;f.actionProfs=ajaxart.subprofiles(b,h);var d=function(l,o){var n=ajaxart_async_GetCallbackObj(a);if(n.index>=n.actionProfs.length){ajaxart_async_CallBack(g,a);return}var m=n.actionProfs[n.index];n.index++;ajaxart_RunAsync(g,m,a,n.seqCallBack)};f.seqCallBack=d;d(g,a)}aa_gcs("async",{RunOnNextTimer:function(d,g,b){var f=aa_int(g,d,"Milliseconds",b);var a=aa_asyncObject();setTimeout(function(){var h=ajaxart.run(g,d,"Action",b);aa_bindAsync(h,function(){aa_triggerAsync(a)},function(){aa_triggerAsyncError(a)})},f);return[a]},RunAsyncActions:function(f,l,d){var b=-1;var h=aa_xpath(f,"Action");var a=aa_asyncObject();function g(){b++;if(b>=h.length){return aa_triggerAsync(a)}var m=ajaxart.run(l,h[b],"",d);aa_bindAsync(m,g,function(n){aa_triggerAsyncError(a,n)})}g();return[a]}});function aa_asyncObject(){return{_asyncObject:true}}function aa_bindAsync(b,a,d){if(!b[0]||!b[0]._asyncObject){return a(b)}if(b[0]._finished){f()}else{aa_bind(b[0],"end",f)}function f(){if(!b[0]._error){a(b[0]._data)}else{d(b[0]._error)}}}function aa_triggerAsync(a,b){a._finished=true;a._data=b||[];aa_trigger(a,"end",a._data)}function aa_triggerAsyncError(a,b){a._finished=true;a._error=true;a._errorObject=b||null;aa_trigger(a,"end",a._errorObject)}aa_gcs("bart",{IsBartRuntime:function(b,d,a){return aa_frombool(aa_isbart_runtime)},PageIDs:function(l,m,g){var h=aa_text(m,l,"Type",g);var b=aa_text(m,l,"ContentType",g);var a=g.vars._BartContext[0].Pages;var d=[];for(var f=0;f<a.length;f++){if(h!=""&&a[f].Type&&a[f].Type[0]!=h){continue}if(b!=""&&a[f].ContentType&&a[f].ContentType[0]!=b){continue}d.push(a[f].ID[0])}return d},CleanXmlInfos:function(b,d,a){aa_xmlinfos=[];ajaxart.xmlsToMonitor=[]},UIPreferences:function(f,g,a){var h={isObject:true};h.AlsoInCookie=aa_bool(g,f,"AlsoInCookie",a);var d=function(l){return function(m,n){if(l.Xml==null||l.Xml.length==0){l.Xml=ajaxart.runNativeHelper(g,f,"AppXml",a)}var q=ajaxart.totext_array(n.vars.Prefix);var p=ajaxart.totext_array(n.vars.Property);if(a.vars._BartDevDtContext!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs[0]=="true"){var o=null}else{if(l.AlsoInCookie){var o=ajaxart.cookies.valueFromCookie(q+"_"+p)}}if(o!=null){return[o]}else{var o=ajaxart.xml.xpath(l.Xml[0],q+"/@"+p);if(o.length>0){return[o[0].nodeValue]}return[""]}return[]}};var b=function(l){return function(m,n){var q=ajaxart.totext_array(n.vars.Prefix);var p=ajaxart.totext_array(n.vars.Property);var o=ajaxart.totext_array(n.vars.Value);if(a.vars._BartDevDtContext!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs[0]=="true"){ajaxart.runNativeHelper(g,f,"WritePref",n)}else{if(l.AlsoInCookie){ajaxart.cookies.writeCookie(q+"_"+p,o)}}return[]}};h.CleanPrefValues=function(l,m){var n=aa_totext(m.vars.Prefix);if(a.vars._BartDevDtContext!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs!=null&&a.vars._BartDevDtContext[0].WriteUiPrefs[0]=="true"){ajaxart.runNativeHelper(g,f,"CleanPref",m)}else{if(h.AlsoInCookie){ajaxart.cookies.cleanCookies(n)}}};ajaxart_addMethod_js(h,"GetProperty",d(h),a);ajaxart_addMethod_js(h,"SetProperty",b(h),a);return[h]}});ajaxart.gcs.bart_screen={ShowScreen:function(g,n,a){var d=ajaxart.totext_array(ajaxart_runMethod([],a.vars._BartContext[0],"Language",a));var f=ajaxart.clone_context(a);f.vars._Cntr=f.vars.DataHolderCntr=null;if(d!=""){f.vars.Language=[d]}var o=ajaxart.totext_array(a.vars._BartContext[0].CssDefinitions);var l=null;var q=aa_text(n,g,"PageID",a);var h=a.vars._BartContext[0];var b=null;if(q){var r=aa_xpath(h.AppXtml[0],"../../Component[@id='"+q+"']/xtml")[0];if(r){b=aa_first([],r,"",a)}}var b=b||h.MainPage(n,a)[0];if(b&&b.Id){l=jQuery("<div/>")[0];aa_fieldControl({Field:b,Wrapper:l,Item:[],Context:aa_ctx(a,{Language:[d]})})}if(!l){var p=ajaxart.runNativeHelper(n,g,"ByPage",f);if(p.length>0){l=p[0];jQuery(l).addClass("bart_top runtime");l.ajaxart.params=a;l.ajaxart.script=g;if(a.vars._BartContext){a.vars._BartContext[0].ControlHolder=[l];aa_defineElemProperties(l,"ParentObject");l.ParentObject=a.vars._BartContext}}if(o!=""){var m=jQuery('<style type="text/css">'+o+"</style>")[0];l.appendChild(m)}}if(d=="hebrew"){jQuery(l).addClass("right2left");if(a.vars.GalleryNode){l.style.width=ajaxart_screen_size().width-70+"px"}}return[l]}};ajaxart.gcs.bart_field={ReferenceOptions:function(g,n,d){var m={isObject:true,Options:[]};var h=aa_text(n,g,"OptionsResource",d);var a=ajaxart.getVariable(d,h);m.OptionNodes=a;if(a==null){return m}var r=aa_bool(n,g,"ShowInplace",d);for(var o=0;o<a.length;o++){var f=a[o];var b=f.getAttribute("id");if(b==null){continue}var q=aa_text([f],g,"ItemTitle",d);var l=aa_text([f],g,"ItemImage",d);var p={isObject:true,code:b,text:q,image:l,Node:f};if(r){p.ItemForOptionPage=[f];p.OptionPage=aa_first(p,g,"Page",d)}m.Options.push(p)}return[m]},PathOfField:function(b,d,a){var f=ajaxart.runNativeHelper(d,b,"Fld",a);return[f[0].Path]}};aa_gcs("bart_resource",{ResourceAspect:function(b,d,a){var f=ajaxart_dataitem_getItems(a);f.Id=aa_text(d,b,"ID",a);f.ID=[f.Id];f.DependsOn=ajaxart.run(d,b,"DependsOn",a);f.Summary=aa_text(d,b,"Summary",a);f.ContentType=ajaxart.run(d,b,"ContentType",a);f.Type=ajaxart.run(d,b,"Type",a);return[]},WaitForAutoSave:function(b,f,a){if(!window.bart_waiting_for_save||bart_waiting_for_save.length==0){return}ajaxart_async_Mark(a);var d=function(){if(bart_waiting_for_save.length==0){ajaxart_async_CallBack(f,a)}else{setTimeout(d,200)}};setTimeout(d,200)},Node:function(g,m,f){var d=aa_text(m,g,"ID",f);var n=aa_text(m,g,"ContentType",f);var l={Items:[]};l.Id=aa_text(m,g,"ResourceID",f);l.ID=[l.Id];if(n&&d&&f.vars._BartContext){var h=f.vars._BartContext[0];var b=aa_xpath(h.AppXtml[0],"../../../..")[0];if(!b&&f.vars._TestDB){b=f.vars._TestDB[0]}if(!b&&f.vars._SimDB){b=f.vars._SimDB[0]}if(b){var a=aa_xpath(b,n+"/"+n+"[@id='"+d+"']")[0];if(a){l.Items.push(a.cloneNode(true))}}}return[l]},Query:function(g,h,f){var d=aa_text(h,g,"ContentType",f);var l={Items:[]};if(d&&f.vars._BartContext){var b=f.vars._BartContext[0];var a=aa_xpath(b.AppXtml[0],"../../../..")[0];if(!a&&f.vars._TestDB){a=f.vars._TestDB[0]}if(!a&&f.vars._SimDB){a=f.vars._SimDB[0]}if(a){var m=aa_xpath(a,d)[0];if(m){m=m.cloneNode(true);l=ajaxart.runNativeHelper([m],g,"SimpleItems",f)[0]}}}l.Id=aa_text(h,g,"ResourceID",f);l.ID=[l.Id];l.ContentType=d;l.ItemTypeName=aa_text(h,g,"ItemTypeName",f);return[l]},CustomFilter:function(d,f,b){var a=b.vars._Items[0];ajaxart_addMethod(a,"CustomFilter",d,"IncludeIf",b)},CleanClientCache:function(d,f,b){aa_xmlinfos=[];ajaxart.xmlsToMonitor=[];if(b.vars._BartContext){var a=b.vars._BartContext[0];a.ClientDB=null;a.XmlInfos=null}},PrepareResources:function(d,g,b){var a=aa_first(g,d,"LoadingPhases",b);var f=ajaxart_async_GetCallbackObj(b);f.marked=true;f.phases=bart_loading_phases(a,b);f.phaseIndex=0;f.resourceVars={};f.prepareCurrentPhase=function(h,m){var o=ajaxart_async_GetCallbackObj(b);if(o.phaseIndex>=o.phases.length){ajaxart_async_CallBack(g,b);return}var n=aa_ctx(m,o.resourceVars);n.vars._AsyncCallback=null;var l=ajaxart_async_GetCallbackObj(n);l.phase=o.phases[o.phaseIndex];l.loadedCount=0;l.afterPrepareResource=function(r,p,q){return function(t,s){r.Loaded=true;q.resourceVars[r.Id]=r.Items;p.loadedCount++;ajaxart.debugData[r.Id]=r.Items;if(p.loadedCount==p.phase.resources.length){q.phaseIndex++;q.prepareCurrentPhase(h,m)}}};l.callPrepare=function(p,s){for(var q=0;q<p.phase.resources.length;q++){var r=p.phase.resources[q];n.vars._This=[r];ajaxart_RunAsync(g,r.Prepare,n,p.afterPrepareResource(r,p,s))}};l.callPrepare(l,o)};f.prepareCurrentPhase(g,b);return["true"]},RefreshAfterResourceChanged:function(h,m,d){var f=d.vars._BartContext[0].Resources;var b=aa_text(m,h,"ResourceID",d);if(!bart_addto_recursion_list(b)){return}var a=[];var n=function(r,p,s){for(var q=0;q<r.length;q++){if(r[q].DependsOn!=null&&r[q].DependsOn[0]==s){var o=r[q].ID[0];if(ajaxart_object_byid(p,o)==null){p.push(o);n(r,p,o)}}}};n(f,a,b);var l=ajaxart_async_GetCallbackObj(d);if(l==null){return[]}l.marked=true;l.index=0;l.dirtyResources=a;l.resources=f;var g=function(o,s){var q=ajaxart_async_GetCallbackObj(d);if(q.index>=q.dirtyResources.length){var r=ajaxart_context_with_resources(d);r.vars._NoRefreshFromServer=["true"];ajaxart_async_CallBack(m,d);bart_removefrom_recursion_list(b);return}var p=ajaxart_object_byid(q.resources,q.dirtyResources[q.index]);q.index++;var r=ajaxart_context_with_resources(d);ajaxart_runMethod_async(m,p,"Refresh",r,q.seqCallBack)};l.seqCallBack=g;g(m,d);return["true"]}});ajaxart.gcs.bart_server={LoadNode:function(d,g,b){var h=aa_text(g,d,"ID",b);var a=aa_text(g,d,"ContentType",b);var f=bart_clientDB_getnode(b,h,a);if(f){return[f]}ajaxart_async_Mark(b);bart_loadNode(b,h,a,function(n,l){var m=(n.length==0||n[0].getAttribute("_type")=="error");if(!m&&b.vars._BartContext){bart_clientDB_setnode(b,n[0])}ajaxart_async_CallBack(n,b)})},Import:function(b,d,a){jBart.vars.lastImport=new Date().getTime();return ajaxart.runNativeHelper(d,b,"Do",a)},SignUp:function(d,f,b){var a=aa_first(f,d,"UserData",b);if(!a){return}ajaxart_async_Mark(b);ajaxart_runMethod_async([a],b.vars._ServerAdapter[0],"SignUp",b,function(h,l){if(ajaxart.isxml(h)&&h[0].getAttribute("type")=="success"){var m=ajaxart.xml.xpath(h[0],"*");if(m.length>0){var g=aa_first(f,d,"UserData",b);ajaxart.xml.copyElementContents(g,m[0])}ajaxart.run(f,d,"OnSuccess",aa_ctx(b,{User:[g]}))}else{ajaxart.run(f,d,"OnFailure",aa_ctx(b,{Result:h}))}ajaxart_async_CallBack(f,b)})}};bartdt_resources_cache=null;ajaxart_bart_getContext=function(b){var a=b.vars._BartContext;if(a==null||a.length==0){return null}return a[0]};function ajaxart_context_with_resources(b){var d=b.vars._BartContext[0].Resources;var f=ajaxart.clone_context(b);for(var a=0;a<d.length;a++){f.vars[d[a].ID[0]]=d[a].Items}return f}function bart_loading_phases(n,b){if(!n){n={Phases:[],LazyResources:""}}var d=b.vars._BartContext[0].Resources;var p=[];var l=",";var g=aa_tobool(b.vars._InBartDesignTime);for(var h=0;h<n.Phases.length;h++){var o={resources:[]};p.push(o);var a=n.Phases[h].split(",");for(var f=0;f<a.length;f++){if(l.indexOf(","+a[f]+",")>-1){continue}if(!g&&n.LazyResources.indexOf(","+a[f]+",")>-1){continue}l+=a[f]+",";var m=ajaxart_object_byid(d,a[f]);if(m!=null){o.resources.push(m)}}}for(var h=0;h<d.length;h++){if(l.indexOf(","+d[h].Id+",")>-1){continue}if(!g&&n.LazyResources.indexOf(","+d[h].Id+",")>-1){continue}p.push({resources:[d[h]]})}return p}function ajaxart_direct_path(d){var b=0;var a=d.parentNode.firstChild;while(a!=null){if(a.tagName&&a.tagName==d.tagName){b++}if(a==d){break}a=a.nextSibling}return d.tagName+"["+b+"]"}function bart_contenttype_fields(a,b){return[]}function bart_loadNode(a,g,f,b){var d=aa_ctx(a,{ContentType:[f],ID:[g]});ajaxart_runMethod_async([],a.vars._ServerAdapter[0],"LoadNode",d,b)}function bart_clientDB_setnode(g,h){var l=h.getAttribute("id");var f=h.getAttribute("_type");var d=g.vars._BartContext[0];if(d.ClientDB==null){d.ClientDB={isObject:true}}if(d.ClientDB[f]==null){d.ClientDB[f]=[]}var a=d.ClientDB[f];for(var b=0;b<a.length;b++){if(a[b].getAttribute("id")==l){a[b]=h;return}}a.push(h)}function bart_clientDB_getnode(d,b,m){var a=window["BartNode_"+m+"__"+b];if(a){return a}if(!d.vars._BartContext){return null}var h=m;var n="ClientDB";var f=d.vars._BartContext[0];if(f.ClientDB==null||f.ClientDB[h]==null){return null}var l=f.ClientDB[h];for(var g=0;g<l.length;g++){if(l[g].getAttribute("id")==b){return l[g]}}return null}aa_isbart_runtime=false;function bart_galleryitem_tousages(q){var o=ajaxart.urlparam("more")=="true";var h=[];var b=ajaxart.xml.xpath(q,"AutoTests/Test");for(var l=0;l<b.length;l++){var d=b[l].getAttribute("run_in_all_tests")=="true";if(o){d=b[l].getAttribute("run_in_more_tests")=="true"}if(!d){continue}var p="ui.ControlUsage";if(b[l].getAttribute("isasync")=="true"){p="ui_async.ControlUsage"}var n='<Usage t="'+p+'" Of="gallery_'+q.getAttribute("id")+"."+b[l].getAttribute("name")+'">';n+='<Control t="bart_usage.GalleryItemToUsageControl"><GalleryItem t="xml.Xml">'+ajaxart.xml2text(q)+"</GalleryItem>";n+='<Test t="xml.Xml">'+ajaxart.xml2text(b[l])+"</Test>";n+="</Control>";var f=ajaxart.xml.xpath(b[l],"*");for(var g=0;g<f.length;g++){n+=ajaxart.xml2text(f[g])}n+="</Usage>";h.push(ajaxart.parsexml(n))}b=ajaxart.xml.xpath(q,"Tests/Test");for(var l=0;l<b.length;l++){var m=b[l];var d=m.getAttribute("RunInAllTests")=="true";if(o){d=m.getAttribute("RunInAllTests")=="true"}if(!d){continue}m.setAttribute("Of","gallery_"+q.getAttribute("id")+"."+m.getAttribute("Name"));if(m.getAttribute("t")=="bart_usage.JBartUsage"||m.getAttribute("t")=="bart_usage.JBartStudioUsage"){var a=ajaxart.parsexml('<Var name="_WidgetXml" value="%../..%" />',"","",false,m)}else{if(m.getAttribute("DoesNotChangeWidgetData")=="true"){var a=ajaxart.parsexml('<Var name="_TestDB" value="%../../bart_dev/db%" />',"","",false,m)}else{var a=ajaxart.parsexml('<Var name="_TestDB" t="data.Duplicate" Data="%../../bart_dev/db%" />',"","",false,m)}}m.appendChild(a);h.push(m)}return h}bart_recursionlist=",";function bart_addto_recursion_list(a){if(bart_recursionlist.indexOf(","+a+",")==-1){bart_recursionlist=bart_recursionlist+a+",";return true}return false}function bart_removefrom_recursion_list(b){var a=bart_recursionlist.indexOf(","+b+",");if(a>-1){bart_recursionlist=bart_recursionlist.substring(0,a)+bart_recursionlist.substring(a+b.length+1)}}function bartdt_page_params(g,f){if(g.ResourceID&&g.ResourceID!=""){return[]}var d=g.ContentType;if(f.vars._ServerAdapter[0].DB){var b=f.vars._ServerAdapter[0].DB[0];var a=aa_xpath(b,aa_totext(d)+"/*");if(a.length==0){a=[ajaxart.parsexml("xml")]}var h={isObject:true,Items:a};return[{isObject:true,DataItems:h}]}return[]}function bart_find_top_circuit_of_page(a,g){var m=null;for(var l=a;l!=null;l=ajaxart.xml.parentNode(l)){if(l.nodeType==1&&l.getAttribute("type")=="jbart.MyWidgetPage"){m=ajaxart.childElem(l,"xtml")}if(aa_tag(l)=="Page"){m=l}if(m!=null){var f={isObject:true};var h={isObject:true,PageDef:ajaxart.run([],m,"",g)[0]};h.TopCircuit=function(){var o=aa_ctx(g,{_PageParams:bartdt_page_params(this.PageDef,g)});var n=[];if(this.PageDef.FieldData){n=this.PageDef.FieldData([],g)}if(this.PageDef.Control){this.PageDef.Control(n,o)}};var d=aa_ctx(ajaxart.newContext(),{AAEditorState:[{isObject:true,SelectedInTree:[{isObject:true,Xtml:[a]}]}]});var b=aa_run_component("xtml_dt.CalcPreviewHelper",[h],d);if(b.length>0&&b[0].Input.length>0){f.Input=b[0]}f.RunCircuit=function(){var n;if(this.Input){n=ajaxart.run(this.Input.Input,a,"",this.Input.context)}else{h.TopCircuit()}return n};if(aa_tag(a)=="Page"){f.RunCircuit=function(){var n=ajaxart.run([],a,"",g)[0];if(n.Control){return n.Control([],aa_ctx(g,{_PageParams:bartdt_page_params(n,g)}))}}}if(aa_tag(a)=="Field"&&f.Input){bart_find_top_circuit_handle_field(a,f)}if(aa_tag(a)=="Operation"||aa_tag(a)=="Action"){f.GlobalPreview=function(){}}else{f.GlobalPreview=function(){var n=this.RunCircuit();if(ajaxart.ishtml(n)){return n}else{return[jQuery("<span/>").text(ajaxart.totext_array(n))[0]]}}}return f}}return null}function bart_find_top_circuit(f,d){var g=bart_find_top_circuit_of_page(f,d);if(g){return g}var a={isObject:true};var b=[f];var n=aa_xpath(f,"..")[0];if(n==null){return null}while(n.getAttribute("t")!="bart.Application"&&n.tagName!="Usage"){if(n.tagName=="Component"&&n.parentNode&&n.parentNode.getAttribute("_type")=="bart_unit"){var h=n.parentNode.getAttribute("id")+"."+n.getAttribute("id");var m=aa_xpath(n.parentNode,"Component[@id='App']/xtml/Usage[@Of='"+h+"']")[0];if(m==null){m=aa_xpath(n.parentNode,"Usage[@Of='"+h+"']")[0]}if(m!=null){var a={isObject:true,Usage:m,Context:d};a.RunCircuit=function(){ajaxart.run([],this.Usage,"",this.Context)};a.GlobalPreview=function(){return ajaxart.run([],this.Usage,"",this.Context,"Result")};return a}}b.push(n);n=n.parentNode;if(n==null||n.nodeType==9){return null}}b=b.reverse();if(b[0].tagName=="Usage"){var o=function(q,p){q.RunCircuit=function(){ajaxart.run([],p,"",d)}};o(a,b[0]);return a}if(b[0].tagName!="Pages"||b.length<=1){return null}var l=b[1]}function bart_find_top_circuit_handle_field(a,b){var g=ajaxart.xml.clone([a.parentNode]);if(g.getAttribute("t")=="bart.MultiplePage"){g.setAttribute("t","ui.ItemList")}if(g.getAttribute("t")=="bart.SinglePage"||g.getAttribute("t")=="field.XmlGroup"){g.setAttribute("t","ui.Document")}var f=ajaxart.childElems(g,"Field");f=f.concat(ajaxart.childElems(g,"Fields"));f=f.concat(ajaxart.childElems(g,"Items"));f=f.concat(ajaxart.childElems(g,"Item"));for(var d=f.length-1;d>=0;d--){g.removeChild(f[d])}if(g.getAttribute("t")=="ui.ItemList"){g.appendChild(ajaxart.parsexml('<Items t="data_items.Items" Items="%%" />',"","",true,g))}g.appendChild(ajaxart.parsexml('<Fields t="xtml_dt.DummyFieldForPreview" />',"","",true,g));b.DummyContainer=g;b.ContainerInput=ajaxart.dynamicText([],"%$_Cntr/Items/Items%",b.Input.context);b.RunCircuit=function(){return ajaxart.run(this.ContainerInput,this.DummyContainer,"",aa_ctx(this.Input.context,{_FieldForPreview:[a]}))}}aa_gcs("chart2",{Chart:function(d,f,b){var g={};g.Id=aa_text(f,d,"ID",b);g.ID=[g.Id];g.Title=aa_multilang_text(f,d,"Title",b);var a=aa_ctx(b,{_Field:[g]});g.Fields=ajaxart.runsubprofiles(f,d,"Field",a);g.Control=function(m,h){var l=ajaxart.run(f,d,"ChartItems",aa_merge_ctx(b,h));var n=aa_createChartObject(l,g.Fields,b);n.Title=aa_multilang_text(f,d,"ChartTitle",b);g.Chart=aa_first(f,d,"Chart",h);if(g.Chart&&g.Chart.IsTriplet){n.jElem=jQuery(g.Chart.Html);n.control=n.jElem[0];n.jElem.addClass(aa_attach_global_css(g.Chart.Css,null,"chart"));aa_apply_style_js(n,g.Chart,h)}jBart.trigger(g,"initChartObject",n);return[n.control]};ajaxart.runsubprofiles(f,d,"FieldAspect",a);return[g]}});function aa_createChartObject(b,a,d){var f={Items:b,Fields:a,Context:d,control:jQuery("<div/>")[0],DataMatrix:function(s){var m=[];if(s){var g=[];for(var n=0;n<this.Fields.length;n++){var r=this.Fields[n].Title;g.push(r)}m.push(g)}for(var o=0;o<this.Items.length;o++){var t=this.Items[o];var u=[];for(var n=0;n<this.Fields.length;n++){var q=this.Fields[n];var h=q.FieldData?q.FieldData([t],d):t;var l=aa_totext(h);if(q.IsNumber){try{l=parseFloat(l)}catch(p){l=0}}u.push(l)}m.push(u)}return m}};return f}aa_gcs("control",{Label:function(d,f,b){var g={Id:aa_text(f,d,"ID",b),Title:aa_multilang_text(f,d,"Title",b),Style:aa_first(f,d,"Style",b),TitleAsText:!d.getAttribute("Text")&&!aa_xpath(d,"Text")[0]};g.ID=[g.Id];var a=aa_ctx(b,{_Field:[g]});g.Control=function(m,h){var l=g.TitleAsText?g.Title:aa_multilang_text(m,d,"Text",aa_merge_ctx(a,h));l=l.replace(/\n/g,"<br/>");return[aa_renderStyleObject(g.Style,{text:l,data:m[0]},h)]};ajaxart.runsubprofiles(f,d,"FieldAspect",a);return[g]},Layout:function(d,f,b){var a={Id:aa_text(f,d,"ID",b),Title:aa_multilang_text(f,d,"Title",b),Style:aa_first(f,d,"Layout",b),SectionStyle:aa_first(f,d,"SectionStyle",b)};a.Control=function(p,l){var o=aa_ctx(l,{});jBart.trigger(a,"ModifyInstanceContext",{Context:o,FieldData:p});var g=ajaxart.runsubprofiles(p,d,"Field",aa_merge_ctx(b,o));var h=[];for(var n=0;n<g.length;n++){if(g[n].CalculatedOnly){g[n].Calculate(p,o)}if(g[n].IsHidden){continue}if(g[n].IsCellHidden&&g[n].IsCellHidden(p,l)){continue}h.push(g[n])}g=h;jBart.trigger(a,"InnerFields",{Context:o,FieldData:p,Fields:g});var m=aa_renderStyleObject(a.Style,{Fields:g,addFields:function(q,v){var z=this.getInnerElement(q);if(!z||!v){return}var y=z.parentNode;var u=this.Fields;for(var t=0;t<u.length;t++){var w=u[t];var s=z.cloneNode(true);y.insertBefore(s,z);aa_element_attached(s);var r=aa_api_object(s,{Field:w,data:this.data,Title:w.Title,HideTitle:w.HideTitle,setControl:function(C){var B=this.getInnerElement(C);B.jbFieldElement=this;if(!B){return}var A=aa_ctx(o,{_Field:[this.Field]});aa_fieldControl({Field:this.Field,Wrapper:B,Item:p,Context:A})}});v.call(r,r)}z.parentNode.removeChild(z)}},l);m.jbContext=o;if(a.SectionStyle){return[aa_wrapWithSection(m,a,a.SectionStyle,p,l)]}return[m]};ajaxart.runsubprofiles(f,d,"FieldAspect",aa_ctx(b,{_Field:[a]}));return[a]},CustomControl:function(b,d,a){var f=a.vars._Field[0];f.Style=aa_first(d,b,"Control",a);f.Control=function(h,g){return[aa_renderStyleObject(f.Style,{Field:f,Data:h,Context:a,context:a},a)]}},Button:function(b,d,a){aa_init_class_Button();var f={Id:aa_text(d,b,"ID",a),Title:aa_multilang_text(d,b,"Title",a),Image:aa_first(d,b,"Image",a),Style:aa_first(d,b,"Style",a)};f.ID=[f.Id];f.Control=function(o,h){var g=aa_merge_ctx(a,h);var n=aa_multilang_text(o,b,"ButtonText",g)||f.Title;if(f.Image&&f.Image.Url){f.Image.StaticUrl=aa_totext(f.Image.Url(o,g))}var m=aa_create_static_image_object(f.Image);var l=new ajaxart.classes.Button({text:n,tooltip:aa_multilang_text(o,b,"Tooltip",g),image:m,field:f,data:o,profile:b,context:g});return[aa_renderStyleObject(f.Style,l,g,true)]};ajaxart.runsubprofiles(d,b,"FieldAspect",aa_ctx(a,{_Field:[f]}));return[f]},ImageGallery:function(b,d,a){var f=aa_create_base_field(d,b,a);f.Control=function(m,l){var h=ajaxart.run(m,b,"Images",a);var g=aa_merge_ctx(a,l);return[aa_renderStyleObject(f.Style,{images:h},g,true)]};return[f]}});function aa_init_class_Button(){ajaxart.classes=ajaxart.classes||{};if(ajaxart.classes.Button){return}ajaxart.classes.Button=function(a){aa_extend(this,a)};ajaxart.classes.Button.prototype.action=function(b){if(window.aa_incapture){return}var a=aa_ctx(this.context,{ControlElement:[this.el]});if(this._isAsync){ajaxart_RunAsync(this.data,ajaxart.fieldscript(this.profile,"Action"),a,function(){jBart.trigger(this,"actionEnd")})}else{ajaxart.run(this.data,this.profile,"Action",a)}};ajaxart.classes.Button.prototype.onActionEnd=function(a){this._isAsync=true;jBart.bind(this,"actionEnd",a)}}function aa_create_base_field(d,b,a){var f={Id:aa_text(d,b,"ID",a),Title:aa_multilang_text(d,b,"Title",a),Image:aa_first(d,b,"Image",a),Style:aa_first(d,b,"Style",a)};f.ID=[f.Id];ajaxart.runsubprofiles(d,b,"FieldAspect",aa_ctx(a,{_Field:[f]}));return f}aa_gcs("data",{Switch:function(b,d,a){return aa_switch(b,d,a)},StringifyJson:function(g,h,f){var l=aa_first(h,g,"Object",f)||{};var b=l.XtmlSource;var d=l.dt_support;delete l.XtmlSource;delete l.dt_support;var a=JSON.stringify(l);if(b){l.XtmlSource=b}if(d){l.dt_support=d}return[a]},RemoveNullProperties:function(d,f,b){var g=aa_first(f,d,"Object",b)||{};var a={};for(i in g){if(g[i]!=null){a[i]=g[i]}}return[a]},ParseJson:function(b,d,a){return[JSON.parse(aa_text(d,b,"JSON",a)||"{}")]},Subset:function(b,f,a){var g=aa_int(f,b,"From",a)-1;var d=aa_int(f,b,"Count",a);if(isNaN(d)){d=f.length}return f.slice(g,g+d)},JustInTimeCalculation:function(d,f,b){var a={isObject:true,Content:null};a.GetContent=function(g,h){if(a.Content==null){a.Content=ajaxart.run(g||f,d,"Content",aa_merge_ctx(b,h))}return a.Content};return[a]},JavaScript:function(d,f,b){var a=aa_run_js_code(aa_text(f,d,"Code",b),f,b);if(!a){return[]}if(typeof(a)=="string"){return[a]}if(typeof(a)=="number"){return[""+a]}if(typeof(a)=="boolean"){if(a){return["true"]}else{return[]}}if(ajaxart.isArray(a)){return a}return[a]},AddSeparator:function(d,g,b){var f=aa_first(g,d,"AddBefore",b);var h=aa_first(g,d,"AddAfter",b);var a=[];if(f!=null){a.push(f)}ajaxart.each(g,function(m,l){var n=aa_first(g,d,"Separator",b);a.push(m);if(l+1<g.length&&n!=null){a.push(n)}});if(h!=null){a.push(h)}return a},Count:function(d,f,b){var a=ajaxart.run(f,d,"Items",b);return[a.length]},AssignTemplate:function(d,g,a){var n=aa_text(g,d,"Template",a);var m=ajaxart.run(g,d,"Input",a);var f="",b=n;while(b.indexOf("{%")>-1){var l=b.indexOf("{%");var h=b.indexOf("%}",l);f+=b.substring(0,l);var o=b.substring(l+1,h+1);f+=aa_totext(ajaxart.dynamicText(m,o,a,null,false));b=b.substring(h+2)}f+=b;b=f;f="";while(b.indexOf("t(")>-1){var l=b.indexOf("t(");var h=b.indexOf(")",l);f+=b.substring(0,l);var o=b.substring(l+2,h);f+=ajaxart_multilang_text(o,a);b=b.substring(h+1)}f+=b;return[f]},FirstSucceeding:function(g,h,f){var b=ajaxart.subprofiles(g,"Item");for(var d=0;d<b.length;d++){var a=ajaxart.run(h,b[d],"",f);if(a.length>0){return a}}return[]},IfThenElse:function(b,d,a){return aa_ifThenElse(b,d,a)},ItemByID:function(d,g,b){var f=ajaxart.run(g,d,"List",b);var h=aa_text(g,d,"ID",b);for(var a=0;a<f.length;a++){if(f[a].ID==h){return[f[a]]}}return[]},ItemsByIDs:function(g,l,d){var h=ajaxart.run(l,g,"List",d);var f=","+aa_text(l,g,"IDs",d)+",";if(f==",*,"){return h}var a=[];for(var b=0;b<h.length;b++){if(h[b].Id!=""&&f.indexOf(h[b].Id)!=-1){a.push(h[b])}}return a},List:function(h,l,f){var a=ajaxart.subprofiles(h,"Item");var b=[];for(var d=0;d<a.length;d++){var g=ajaxart.run(l,a[d],"",f);ajaxart.concat(b,g)}return b},Pipeline:function(f,h,a){if(h.length>1){h=[h[0]]}var p=ajaxart.subprofiles(f,"Item");var n=h;for(var l=0;l<p.length;l++){var d=p[l];var m=[];if(n.length==0&&l!=0){return[]}if(h.length<=1&&l==0){m=ajaxart.run(n,d,"",a)}else{var o=ajaxart.compile(d,"",a);if(o=="same"){continue}if(o==null){for(var g=0;g<n.length;g++){ajaxart.concat(m,ajaxart.run([n[g]],d,"",a))}}else{for(var g=0;g<n.length;g++){ajaxart.concat(m,o([n[g]],a))}}}n=m}var b=ajaxart.subprofiles(f,"Aggregator");for(var l=0;l<b.length;l++){n=ajaxart.run(n,b[l],"",a)}return n},RunActionAndKeepInput:function(b,d,a){ajaxart.run(d,b,"Action",a);return d},Same:function(b,d,a){return d},CleanNS:function(b,d,a){if(d[0]&&typeof(d[0])=="object"&&!d[0].nodeType){return jbart_data(d[0],"single")}return jbart_data(ajaxart.totext_array(d),"single")}});aa_gcs("data",{Zip:function(b,f,a){var m=[];var l=ajaxart.subprofiles(b,"List");for(var g in l){m.push({list:ajaxart.run(f,l[g],"",a)})}var g=0;var o=[];if(m.length==0){return o}var h=0;for(var d in m){h=Math.max(h,m[d].list.length)}for(var g=0;g<h;g++){var n={isObject:true};for(var d in m){n[""+d]=(g<m[d].list.length)?m[d].list[g]:""}o.push(n)}return o},Csv:function(b,h,a){var n=aa_text(h,b,"Content",a);var o=aa_text(h,b,"FieldNames",a).split(",");var p=n.split("\n");var q=[];var l=0;if(o==""){o=p[0].split(",");l=1}for(var g=l;g<p.length;g++){if(p[g]==""){continue}var m=p[g].split(",");var f={isObject:true,__index:g};for(var d=0;d<o.length;d++){f[o[d]]=m[d]}q.push(f)}return q},Reduce:function(g,h,f){var a=ajaxart.run(h,g,"InitialValue",f);var b=ajaxart.run(h,g,"Items",f);for(var d=0;d<b.length;d++){a=ajaxart.run(a,g,"Formula",aa_ctx(f,{Item:[b[d]]}))}return[a]},Math:function(profile,data,context){var exp=aa_text(data,profile,"Expression",context);var round=aa_text(data,profile,"RoundResult",context);try{eval("var val = "+exp);var res=ajaxart.totext(val);if(round=="round"){return[Math.round(res)]}if(round=="floor"){return[Math.floor(res)]}if(round=="ceil"){return[Math.floor(res)]}return[res]}catch(e){return[]}},Percent:function(profile,data,context){var result=[];var exp=aa_text(data,profile,"Part",context)+"/"+aa_text(data,profile,"Whole",context);try{eval('var val = "" + 100*'+exp);result.push(val)}catch(e){ajaxart.log("Can not calc percent expression: "+exp,"Error")}return result},Parents:function(f,h,d){var a=aa_int(h,f,"MaxIterations",d);var g=h[0],b=[];if(aa_bool(h,f,"IncludeItself",d)){b.push(g)}while(g&&a>0){a--;if(aa_bool([g],f,"StopWhen",d)){return b}g=aa_first([g],f,"ParentRelation",d);if(g){b.push(g)}}return b},RandomPick:function(f,g,d){if(g.length<=1){return g}var b=Math.random();var a=Math.floor(b*g.length);return[g[a]]},RandomNumber:function(f,g,d){var l=aa_int(g,f,"From",d);var h=aa_int(g,f,"To",d);var b=Math.random();var a=Math.floor(b*(h-l+1))+l;return[a]},RandomShuffle:function(g,h,f){if(h.length<=1){return h}var l=[];for(var d=0;d<h.length;d++){l[d]=h[d]}for(var b,a,d=l.length;d;b=parseInt(Math.random()*d),a=l[--d],l[d]=l[b],l[b]=a){}return l},Last:function(b,d,a){if(d.length==0){return[]}return[d[d.length-1]]},Slice:function(b,d,a){var g=aa_int(d,b,"From",a);var f=aa_int(d,b,"To",a);if(isNaN(f)){f=d.length}if(isNaN(g)){g=0}return d.slice(g,f)},Min:function(f,g,d){var a=null;var b=1000000;ajaxart.each(g,function(l){var h=aa_int([l],f,"ToCompare",d);if(h<b){b=h;a=l}});if(a==null){return[]}return[a]},Max:function(f,g,d){var b=null;var a=-1000000;ajaxart.each(g,function(l){var h=aa_int([l],f,"ToCompare",d);if(h>a){a=h;b=l}});if(b==null){return[]}return[b]},Average:function(f,g,b){var d=aa_int(g,f,"Digits",b);var m=0,n=0;if(g.length==0){return[0]}for(var h=0;h<g.length;h++){m++;n+=Number(ajaxart.totext_item(g[h]))}if(isNaN(n)){return[]}var a=Math.pow(10,d);var l=Math.round(a*n/m)/a;return[l]},Sum:function(f,g,b){var d=0;for(var a=0;a<g.length;a++){d+=Number(ajaxart.totext_item(g[a]))}if(isNaN(d)){return[]}return[d]},InPreviewMode:function(b,d,a){if(typeof(ajaxart)!="undefined"&&ajaxart.inPreviewMode){return["true"]}return[]},RecursiveScan:function(g,l,d){var a=aa_bool(l,g,"OnlyLeaves",d);var h=aa_text(l,g,"MaxItemsToAvoidInfinitiveLoop",d);var m=aa_text(l,g,"ScanOrder",d);var q=[];var b=l;var o=0;var n=0;while(b.length>o){var f;if(m=="Depth first search"){f=b.pop()}else{f=b[o];o++}var p=ajaxart.run([f],g,"ChildNodes",d);if(m=="Depth first search"){p=p.reverse()}ajaxart.concat(b,p);if(!a||p.length==0){q.push(f)}if(n++>h){ajaxart.log("RecursiveScan - exceeded max items, might be infinitive loop, max items:"+n,"error");break}}return q},UniqueNumber:function(d,g,b){var f=aa_text(g,d,"Prefix",b);var h=aa_text(g,d,"Suffix",b);var a=f+(ajaxart.unique_number++)+h;return[a]},Demote:function(g,l,f){var m=","+aa_text(l,g,"Items",f)+",";var d=0;var b=[],h=[];for(var d=0;d<l.length;d++){var a=aa_text([l[d]],g,"ItemText",f);if(m.indexOf(","+a+",")==-1){b.push(l[d])}else{h.push(l[d])}}for(var d=0;d<h.length;d++){b.push(h[d])}return b},Single:function(d,f,b){var a=ajaxart.run(f,d,"Items",b);return[a]},Url:function(b,d,a){var f=""+window.location.href;return[f]},IsInSelectedItems:function(d,g,b){var f=","+ajaxart.totext_item(ajaxart.getVariable(b,"SelectedItems")[0])+",";var a=","+ajaxart.totext_item(g[0])+",";if(f.indexOf(a)!=-1){return["true"]}return[]},IsCodeInSelectedItems:function(d,g,b){var f=","+ajaxart.totext_item(ajaxart.getVariable(b,"SelectedItems")[0])+",";var a=","+aa_text(g,d,"Code",b)+",";if(f.indexOf(a)!=-1){return["true"]}return[]},ValueFromCookie:function(g,h,d){var b=aa_text(h,g,"Cookie",d);var f=aa_bool(h,g,"AsXml",d);var a=ajaxart.cookies.valueFromCookie(b);if(a==null){return[]}if(f){if(a==""){return[]}else{return[ajaxart.parsexml(a,"cookie "+b)]}}return[a]},Object:function(g,l,f){var d={isObject:true};var h=g.firstChild;while(h!=null){if(h.nodeType==1){var a=aa_tag(h);var b=h.getAttribute("name");if(b==null||b==""){h=h.nextSibling;continue}if(a=="Property"){d[b]=ajaxart.run(l,h,"",f)}else{if(a=="LightMethod"){d[b]={script:h,context:f,compiled:ajaxart.compile(h,"",f,h.getAttribute("paramVars"))}}else{if(a=="Method"){d[b]={script:h,context:f,objectForMethod:[d],compiled:ajaxart.compile(h,"",f,h.getAttribute("paramVars"))}}}}}h=h.nextSibling}return[d]},MakeUnique:function(d,h,b){var f={};var g=[];for(var l=0;l<h.length;l++){var m=h[l];var a="_"+aa_text([m],d,"Identifier",b);var n=true;if(!f[a]){f[a]=true;g.push(m)}}return g},GroupBy:function(l,m,f){var h={};var a=[];var g={};var b=ajaxart.run(m,l,"Items",f);ajaxart.each(b,function(n){var o="_"+aa_text([n],l,"GroupBy",f);if(g[o]==null){g[o]=a.length;a.push({isObject:true,ID:o.substring(1),Items:[n]})}else{a[g[o]].Items.push(n)}});var d=[];ajaxart.each(a,function(n){d.push(aa_first([n],l,"Group",f))});return d},ExpandWithRelated:function(d,l,a){var f=aa_int(l,d,"MaxDepth",a);var b=ajaxart.run(l,d,"LogRelationsTo",a);var h="";var p=b.length>0;var q={},n=[];ajaxart.each(l,function(r){var s=aa_text([r],d,"Identifier",a);q[s]={id:s,Item:r,RefCount:0};n.push(s)});function o(s){var y=[];for(var t=0;t<s.length;t++){var v=s[t];var w=ajaxart.run([q[v].Item],d,"Relation",a);for(var u=0;u<w.length;u++){var r=aa_text([w[u]],d,"Identifier",a);if(!q[r]){q[r]={id:r,Item:w[u],RefCount:0};y.push(r)}if(p){h+='<rel from="'+v+'" to="'+r+'"/>\n'}}}return y}for(var m=0;n.length>0&&m<f;m++){n=o(n)}if(m>=f){ajaxart.log("expand error. more than "+f+" levels deep")}var g=[];for(item in q){g.push(q[item])}ajaxart.writevalue(b,[ajaxart.totext_array(b)+h]);return g},CountUnique:function(g,h,f){var a=0;var l={};for(var d in h){var b=""+h[d];if(l[b]){continue}l[b]=true;a++}return[a]},MakeUniqueAndCount:function(g,h,d){var b={};var a=[];ajaxart.each(h,function(m){var n=ajaxart.totext_item(m);var l=true;if(b[n]==null){b[n]=0}b[n]++});for(x in b){var f={isObject:true};f.text=x;f.count=b[x];a.push(f)}a.sort(function(m,l){return m.count-l.count});return a},Struct:function(b,d,a){return ajaxart.make_array(d,function(g){var h=ajaxart.subprofiles(b,"Item");var f={isObject:true};ajaxart.each(h,function(l){var m=aa_text(d,l,"Name",a);var n=ajaxart.run(d,l,"Value",a);f[m]=n});return f},true)},AddToStruct:function(d,f,b){var g=ajaxart.subprofiles(d,"Item");var a=jQuery.extend({},f[0]);ajaxart.each(g,function(h){var l=aa_text(f,h,"Name",b);var m=ajaxart.run(f,h,"Value",b);a[l]=m});return[a]},Aggregate:function(d,f,b){var g=ajaxart.subprofiles(d,"Aggregator");var a=f;ajaxart.each(g,function(h){a=ajaxart.run(a,h,"",b)});return a},RuntimeObjectType:function(b,d,a){if(d.length==0){return["empty"]}if(ajaxart.ishtml_array(d)){return["html"]}if(ajaxart.isxml_array(d)){return["xml"]}if(ajaxart.isObject(d)){return["struct"]}if(d[0].params!=null&&d[0].vars!=null){return["context"]}if(typeof(d[0])=="function"){return["function"]}return["text"]},HtmlToCleanText:function(f,g,b){var h=aa_totext(g);while(h.indexOf("<")>-1){var d=h.indexOf("<");var a=h.indexOf(">",d);if(a>d){h=h.substring(0,d)+h.substring(a+1)}else{return[h]}}return[h]},ReverseOrder:function(d,f,b){var a=[];ajaxart.each(f,function(g){a.push(g)});a.reverse();return a},HashPassword:function(b,d,a){var f=ajaxart.totext(d);return[ajaxart_hashPassword(f)]},DuplicateNTimes:function(f,g,d){var h=aa_int(g,f,"Times","",d);if(g.length==0){return[]}var a=[];for(var b=0;b<h;b++){a.push(ajaxart.xml.clone(g))}return a},Subtract:function(d,h,b){var m=ajaxart.run(h,d,"List",b);var a=ajaxart.run(h,d,"Subtract",b);var g=[];for(var l in m){var p=m[l];var o=true;for(var f in a){var n=a[f];if(ajaxart.yesno.itemsEqual(p,n)){o=false;break}}if(o){g.push(p)}}return g},Sort:function(f,m,b){var p=aa_text(m,f,"Type",b);var g=aa_text(m,f,"Order",b);var q=aa_text(m,f,"SortByPath",b);var d=aa_bool(m,f,"SortAtSource",b);var a=(q!="");var n=function(v,u){if(v.sortby<u.sortby){return -1}if(u.sortby<v.sortby){return 1}return 0};var o=[];for(var l=0;l<m.length;l++){var s="";if(a){s=ajaxart.totext(ajaxart.xml.xpath(m[l],q))}else{s=aa_text([m[l]],f,"SortBy",b)}if(p=="number"){s=Number(s)}if(p=="date"){s=aadate_date2int(s)}o.push({data:m[l],sortby:s})}o.sort(n);if(g=="Descending"){o=o.reverse()}var h=[];ajaxart.each(o,function(u){h.push(u.data)});if(d){var r=null;for(var l=0;l<o.length;l++){var t=o[l].data.parentNode;if(t!=r&&l!=0){return h}r=t;if(r==null||r==undefined){return h}}for(var l=0;l<o.length;l++){r.removeChild(o[l].data)}for(var l=0;l<o.length;l++){r.appendChild(o[l].data)}}return h},VariableValue:function(d,f,b){var a=aa_text(f,d,"Variable",b);return ajaxart.getVariable(b,a)},RoundCents:function(b,d,a){var f=""+Math.round(d[0]*100);return[f.substring(0,f.length-2)+"."+f.substring(f.length-2,f.length)]},CreateIfDoesNotExist:function(d,f,b){var a=ajaxart.run(f,d,"Query",b);if(a.length>0){return a}ajaxart.run(f,d,"Create",b);var a=ajaxart.run(f,d,"Query",b);if(a.length==0){ajaxart.log("CreateIfDoesNotExist - Create does not make query ")}return a},ReplaceItemByIndex:function(h,l,g){var b=aa_int(l,h,"Index",g);var f=aa_first(l,h,"NewItem",g);if(b<1||b>l.length||f==null){return l}var a=[];for(var d=0;d<l.length;d++){if(d==b-1){a.push(f)}else{a.push(l[d])}}return a},OccurrenceLimit:function(f,g,d){var b=aa_text(g,f,"Key",d);var l=aa_text(g,f,"Group",d);var h=aa_int(g,f,"TimesToAllow",d);if(typeof(ajaxart.occurrence_cache[l])=="undefined"){ajaxart.occurrence_cache[l]={}}var a=ajaxart.occurrence_cache[l];if(typeof(a[b])=="undefined"){a[b]=0}a[b]++;if(a[b]>h){return[]}return[true]},AssignToColumns:function(f,h,d){var m=aa_int(h,f,"Columns",d);var g=aa_int(h,f,"Count",d);var a=[];for(var b=0;b<Math.min(m,g);b++){a.push("")}var l=0;for(var b=0;b<g;b++){if(a[l].length>0){a[l]=a[l]+","}a[l]=a[l]+b;l=(l+1)%m}return a},SpecificIndices:function(g,h,f){var l=ajaxart.run(h,g,"Indices",f);var b=[];for(var d=0;d<l.length;d++){var a=parseInt(ajaxart.totext(l[d]));if(a>=0&&a<h.length){b.push(h[a])}}return b},CreateNumbers:function(f,g,d){var l=aa_int(g,f,"From",d);var h=aa_int(g,f,"To",d);if(h<l){return[]}var a=[];for(var b=l;b<=h;b++){a.push(b)}return a},ByIndexFromList:function(f,h,d){var a=ajaxart.run(h,f,"List",d);var b=aa_int(h,f,"Index",d);var g=aa_text(h,f,"Base",d);if(g=="0-Based Index"&&b<a.length){return[a[b]]}if(g=="1-Based Index"&&b-1<a.length){return[a[b-1]]}return[]},BuildCategories:function(f,h,d){var m=ajaxart.run(h,f,"Categories",d);var p=aa_text(h,f,"Separator",d);var q=[];for(var l=0;l<m.length;l++){var b=m[l];var n=b.split(p);var a=q;for(var g=0;g<n.length;g++){var o=n[g];if(a[o]==null){a[o]=[]}a=a[o]}}return q},NextLevelCategory:function(d,h,a){var l=ajaxart.run(h,d,"Categories",a);var n=aa_text(h,d,"Parent",a);var q=aa_text(h,d,"Separator",a);var b=l;var m=n.split(q);for(var f=0;f<m.length;f++){var o=m[f];if(o.length>0){b=b[o]}}var p=[];if(n.length==0){for(var g in b){if(g!=null&&g!=undefined){p.push(g)}}}else{for(var g in b){p.push(n+q+g)}}return p},RunNativeHelperTest:function(d,f,b){var a=ajaxart.totext(ajaxart.runNativeHelper(f,d,"FullName",b));return["name: "+a]},Duplicate:function(b,f,a){if(f.length==0){return[]}var d=f[0];if(typeof(d)=="string"||typeof(d)=="number"){return[""+d]}if(ajaxart.isxml_item(d)&&d.nodeType==1){return[ajaxart.parsexml(ajaxart.xml2text(d))]}if(ajaxart.isxml_item(d)&&d.nodeType==2){return[ajaxart.xml.clone(f)]}return f},StructEntryNames:function(d,f,b){if(!ajaxart.isObject(f)){return[]}var a=[];for(i in f[0]){if(i!="isObject"&&i!="XtmlSource"){a.push(i)}}return a},MeasureCalculationTime:function(d,l,b){var h=new Date().getTime();var a=ajaxart.run(l,d,"Calculation",b);var g=new Date().getTime()-h;var m=aa_first(l,d,"PutTimeInObject",b);var f=aa_text(l,d,"PutTimeInProperty",b);if(m!=null&&f!=""){m[f]=[g]}return a}});aa_gcs("data_items",{LoadFullItem:function(b,f,a){var d=aa_first(f,b,"Item",a);if(!d){return}var h=aa_first(f,b,"DataItems",a);if(h&&h.LoadFullItem){h.LoadFullItem([d],a)}else{var g=aa_getXmlInfo(d,a);if(g&&g.LoadFullItem){g.LoadFullItem([d],a)}}},GroupBy:function(g,m,a){var p=ajaxart.run(m,g,"Items",a);var b=aa_text(m,g,"ExcludeGroups",a);var f=[];for(var n=0;n<p.length;n++){var r=p[n];var q=aa_text([r],g,"ItemGroup",a);if(q==b){continue}var o=null;for(var l=0;l<f.length;l++){if(f[l].Option[0]==q){o=f[l];break}}if(o==null){o={isObject:true,Name:[q],Items:[]};f.push(o)}o.Items.push(r)}var h={isObject:true,Items:f};var d=function(t,s){return t};ajaxart_addControlMethod_js(h,"NextLevel",d,a);return[h]},CommaSeparated:function(h,m,a){var l={isObject:true,Items:[]};var o=aa_text(m,h,"Text",a).split(",");var b=ajaxart.fieldscript(h,"TextToItem")?function(r){return aa_first([r],h,"TextToItem",a)}:function(r){return r};for(var n=0;n<o.length;n++){if(o[n]){l.Items.push(b(o[n]))}}var d=function(r,s){if(r.length==0){return[]}var w=m;var u=aa_text(r[0].Item,h,"ItemToText",s)+",";var t=","+aa_text(r[0].BeforeItem,h,"ItemToText",s)+",";var v=","+ajaxart.totext_array(w)+",";v=v.replace(u,"");v=v.replace(t,","+u+aa_text(r[0].BeforeItem,h,"ItemToText",s)+",");v=v.substring(1,v.length-1);ajaxart.writevalue(w,[v]);return[]};var p=function(r,s){if(r.length==0){return[]}var v=m;var t=aa_text(r,h,"ItemToText",s)+",";var u=","+ajaxart.totext_array(v)+",";u=u.replace(t,"");u=u.substring(1,u.length-1);if(u.length>0){u=u+","+aa_text(r,h,"ItemToText",s)}else{u=ajaxart.totext_array(r)}ajaxart.writevalue(v,[u]);return[]};var q=function(r){return function(t,v){var s={isObject:true,Items:ajaxart_writabledata()};var u=function(y,w){return function(D,C){var z=ajaxart.totext_array(w.Items);if(z==""){return[]}var A=ajaxart.fieldscript(h,"TextToItem")!=null;if(!A){y.Items.push(z)}else{w.Items=[aa_first([z],h,"TextToItem",a)];y.Items.push(w.Items[0])}var B=ajaxart.totext_array(m);if(B!=""){B=B+","}B=B+z;ajaxart.writevalue(m,[B]);return[]}};ajaxart_addScriptParam_js(s,"Save",u(r,s),v);return[s]}};var g=function(r,s){var t=","+ajaxart.totext_array(r)+",";var u=","+ajaxart.totext_array(m)+",";u=u.replace(t,",");u=u.substring(1,u.length-1);ajaxart.writevalue(m,[u]);return[]};ajaxart_addMethod_js(l,"DeleteItem",g,a);ajaxart_addMethod_js(l,"MoveBefore",d,a);ajaxart_addMethod_js(l,"MoveToEnd",p,a);ajaxart_addScriptParam_js(l,"SubsetForNewItem",q(l),a);var f=aa_ctx(a,{_Items:[l]});ajaxart.runsubprofiles(m,h,"Aspect",f);return[l]},DoSave:function(f,g,d){var b=aa_first(g,f,"DataItems",d);var a=ajaxart.run(g,f,"Fields",d);ajaxart_dataitems_save(b,a,d,function(){ajaxart.run(g,f,"OnSuccess",d)});return[]},Filter:function(g,m,f){var a=ajaxart_dataitem_getItems(f);var l=a.Items;var b=[];for(var d=0;d<l.length;d++){var h=l[d];if(aa_bool([h],g,"Filter",f)){b.push(h)}}a.Items=b;return[]},Aspects:function(b,d,a){ajaxart.runsubprofiles(d,b,"Aspect",a);return[]},Writable:function(b,f,a){var g=ajaxart_dataitem_getItems(a);ajaxart_addScriptMethod(g,"SubsetForNewItem",b,"SubsetForNewItem",a);ajaxart_addScriptMethod(g,"DeleteItem",b,"DeleteItem",a);ajaxart_addScriptMethod(g,"CanAcceptExternal",b,"CanAcceptExternal",a);var d=function(h){return function(l,m){ajaxart_async_Mark(m);ajaxart_RunAsync(l,ajaxart.fieldscript(b,"DeleteItem"),m,function(r,p){var o=[];if(h.Value!=null&&l.length>0&&l[0].nodeType==1){var q=l[0].getAttribute("id");for(var n=0;n<h.Value.length;n++){if(h.Value[n].getAttribute==null||h.Value[n].getAttribute("id")!=q){o.push(h.Value[n])}}h.Value=o}ajaxart_async_CallBack(r,p)});return[]}};ajaxart_addScriptParam_js(g,"DeleteItem",d(g),a);if(ajaxart.fieldscript(b,"NewValueFromDetached")!=null){ajaxart_addLightMethod(g,"NewValueFromDetached",b,"NewValueFromDetached",a)}return[]},NextLevel:function(b,d,a){var f=ajaxart_dataitem_getItems(a);ajaxart_addScriptMethod(f,"NextLevel",b,"NextLevel",a);return[]},RecursiveNextLevel:function(d,f,b){var g=ajaxart_dataitem_getItems(b);var a=function(h,l){var m=ajaxart.run(h,d,"NextLevel",b);if(m.length>0){ajaxart_addControlMethod_js(m[0],"NextLevel",a,b)}return m};ajaxart_addControlMethod_js(g,"NextLevel",a,b)},OverrideItems:function(d,f,b){var a=ajaxart.run(f,d,"Items",b);var g=aa_ctx(b,{_Items:a});ajaxart.runsubprofiles(f,d,"Aspect",g);return a},Permission:function(d,f,a){var g=ajaxart_dataitem_getItems(a);var b=aa_text(f,d,"Permission",a);if(b=="read only"){g.ReadOnly=["true"]}}});ajaxart_dataitem_getItems=function(a){var b=a.vars._Items;if(b==null||b.length==0){return null}return b[0]};function ajaxart_hashPassword(d){if(d==""){return""}var a=0;for(var b=0;b<d.length;b++){a+=(d.charCodeAt(b)*b*b)}return""+a}function eval_math_formula(formula,digits){try{eval("var val = "+formula);if(typeof(val)!="number"){return Number.NaN}var num=val;if(digits){var base=Math.pow(10,digits);num=Math.round(base*val)/base}return num}catch(e){return Number.NaN}}function aa_xmlitem_byid(a,d){for(var b=0;b<a.length;b++){if(a[b].getAttribute("id")==d){return a[b]}}return null}function aa_aggregate_Sum(b){var f=0;var a=false;for(var d=0;d<b.length;d++){var g=parseInt(ajaxart.totext_item(b[d]));if(!isNaN(g)){f+=g}else{a=true}}return a?"":""+f}function aa_aggregate_Average(a){var b=aa_aggregate_Sum(a);if(b==""){return""}return""+Math.floor(b*100/a.length)/100}function aa_aggregate_Count(a){return""+a.length}function aa_aggregate_Concat(a){return jQuery(a).map(function(){return ajaxart.totext_item(this)}).get().join(", ")}function aa_csv_toggle(b,a){if(b.indexOf(","+a+",")==-1){return b+a+","}return b.replace(","+a+",",",")}aa_gcs("action",{AddToCommas:function(d,g,b){var l=aa_first(g,d,"To",b);var f=ajaxart.run(g,d,"Value",b);var a=ajaxart.totext_array(f);var h=ajaxart.totext(l);if(h!=""){h=h+","}h=h+a;ajaxart.writevalue([l],[h]);return["true"]},Switch:function(b,d,a){return aa_switch(b,d,a)},FirstSucceeding:function(g,h,f){var b=ajaxart.subprofiles(g,"Action");for(var d=0;d<b.length;d++){var a=ajaxart.run(h,b[d],"",f);if(a.length>0){return a}}return[]},IfThenElse:function(a,b,d){return aa_ifThenElse(a,b,d)},WriteToLog:function(b,f,a){var d=aa_text(f,b,"Message",a);var h=aa_text(f,b,"Title",a);var l=aa_text(f,b,"Level",a);var g="";if(h!=""){g=h+":"}ajaxart.log(g+d,l);return f},DelayedRun:function(d,f,b){var h=aa_int(f,d,"DelayInMilli",b);var a=aa_text(f,d,"UniqueActionID",b);if(a==""){setTimeout(function(){ajaxart.run(f,d,"Action",b)},h)}else{if(ajaxart.runDelayed==null){ajaxart.runDelayed=[]}var m={id:a,handle:null};var n=function(o){return function(){o.handle=0;ajaxart.run(f,d,"Action",b)}};for(var g=0;g<ajaxart.runDelayed.length;g++){var l=ajaxart.runDelayed[g];if(l.id==a){if(l.handle!=0){clearTimeout(l.handle)}ajaxart.runDelayed[g]=m;m.handle=setTimeout(n(m),h);return["true"]}}ajaxart.runDelayed.push(m);m.handle=setTimeout(n(m),h)}return["true"]},WriteToCookie:function(d,f,b){var a=aa_text(f,d,"Cookie",b);var g=aa_text(f,d,"Value",b);ajaxart.cookies.writeCookie(a,g);return["true"]},ActionReturningResult:function(b,d,a){ajaxart.run(d,b,"Action",a);return ajaxart.run(d,b,"Result",a)},RunOnNextTimer:function(b,g,a){var f=aa_bool(g,b,"RunNow",a);var h=aa_int(g,b,"WaitInMSec",a);if(h==0){h=1}var d=function(){ajaxart.run(g,b,"Action",a)};if(f){d()}else{setTimeout(d,h)}return["true"]},RunInTimer:function(d,g,b){var a=aa_int(g,d,"IntervalInMilli",b);var f=aa_bool(g,d,"RunAlsoNow",b);var h=aa_text(g,d,"ID",b);if(h!=""){if(ajaxart.runningTimers[h]){return}ajaxart.runningTimers[h]=true}setInterval(function(){ajaxart.run(g,d,"Action",b)},a);if(f){setTimeout(func,1)}return["true"]}});aa_gcs("date",{Now:function(b,g,a){var m=aa_text(g,b,"Format",a);var d=new Date();if(window.aa_serverTimeDiff&&aa_serverTimeDiff!=0){d=new Date(d.getTime()+aa_serverTimeDiff)}var n=aa_text(g,b,"TimeZone",a);if(n.indexOf("GMT")!=-1){try{var f=parseInt(n.substring(3));d=new Date(d.getTime()+f*60000)}catch(h){}}if(m=="std"){var l=""+ajaxart.pad2digits(d.getDate())+"/"+ajaxart.pad2digits(d.getMonth()+1)+"/"+d.getFullYear();return[l]}if(m=="with time"){var l=""+ajaxart.pad2digits(d.getDate())+"/"+ajaxart.pad2digits(d.getMonth()+1)+"/"+d.getFullYear();l+=" "+ajaxart.pad2digits(d.getHours())+":"+ajaxart.pad2digits(d.getMinutes());return[l]}if(m=="with time and seconds"){var l=""+ajaxart.pad2digits(d.getDate())+"/"+ajaxart.pad2digits(d.getMonth()+1)+"/"+d.getFullYear();l+=" "+ajaxart.pad2digits(d.getHours())+":"+ajaxart.pad2digits(d.getMinutes())+":"+ajaxart.pad2digits(d.getSeconds());return[l]}return[""+d.getTime()]},GreaterThan:function(b,f,a){var g=aa_text(f,b,"Date",a);var d=aa_text(f,b,"GreaterThan",a);return aa_frombool(aadate_date2int(g)>aadate_date2int(d))},ExtractDatePart:function(g,h,d){var b=aa_text(h,g,"Date",d);if(b.indexOf("/")!=-1){var f=aadate_date2int(b)}else{var f=parseInt(b)}var a=aa_extractDatePart(new Date(f),aa_text(h,g,"Part",d));var l=aa_text(h,g,"OutputFormat",d);if(l){return[aa_format_date(l,a)]}else{return[""+a]}},TimeField:function(b,d,a){var f=a.vars._Field[0];f.ManualWriteValue=true;aa_field_handler(f,"ModifyControl",function(g,o,m,h,n){var l=aa_find_field_input(g);if(l.length>0){l[0].value=ajaxart.totext_array(o).split(" ")[1]||"";l[0].setAttribute("value",l[0].value)}jQuery(l).timeEntry({show24Hours:true})});aa_field_handler(f,"OnKeyup",function(m,n,g,l){var h=ajaxart.totext_array(n).split(" ");if(h.length<2){h.push("")}h[1]=""+g.value;ajaxart.writevalue(n,h[0]+" "+h[1]);aa_invoke_field_handlers(m.OnUpdate,g,l,m,n)},"TimeField");return["true"]}});aa_serverTimeDiff=0;ajaxart.pad2digits=function(a){if(a<10){return"0"+a}return""+a};ajaxart.date={};function str2Int(b){if(b==null){return 0}b=b.replace(/^0*/,"");var a=parseInt(b);if(isNaN(a)){return 0}return a}function aadate_currentYear(){var b=new Date();var a=b.getYear();if(a<1000){a+=1900}return a}function aadate_currentMonth(){return(new Date().getMonth())+1}function aadate_date2int(f,g){if(f==null||f==""||f=="any"){return g?10000000000:0}var a=new Date();a.setMinutes(0,0,0);if(f=="today"){b="day"}var m=f.split(" ");var d=m[0];var h=d.split("/");var b="";if(h.length==1&&str2Int(h[0])<32&&str2Int(h[0])>0){a.setDate(str2Int(h[0]));b="day"}else{if(h.length==1&&str2Int(h[0])>32){a.setFullYear(str2Int(h[0]),g?11:0,g?31:1);b="year"}else{if(h.length==2&&str2Int(h[1])<13){a.setFullYear(aadate_currentYear(),str2Int(h[1])-1,str2Int(h[0]));b="day"}else{if(h.length==2&&str2Int(h[1])>1900){a.setFullYear(str2Int(h[1]),str2Int(h[0])-1,1);if(g){a.setTime(a.setFullYear(str2Int(h[1]),str2Int(h[0]),1)-1)}b="month"}else{if(h.length==3){a.setFullYear(str2Int(h[2]),str2Int(h[1])-1,str2Int(h[0]));b="day"}}}}}a.setHours(0,0,0,0);if(m.length>1){var l=m[1].split(":");if(m.length>2&&m[2]=="PM"){l[0]=""+(str2Int(l[0])+12)}a.setHours(str2Int(l[0]),str2Int(l[1]),str2Int(l[2]),0);b="minute"}var a=a.getTime();if(g&&b=="day"){a+=86400000-1}return a}function aa_extractDatePart(d,b){var f=d.getYear();if(f<1000){f+=1900}if(b=="day"){var a=new Date(f,d.getMonth(),d.getDate(),0,0,0,0)}if(b=="week"){var a=new Date(new Date(f,d.getMonth(),d.getDate(),0,0,0,0).getTime()-86400000*d.getDay())}if(b=="month"){var a=new Date(f,d.getMonth(),1,0,0,0,0)}if(b=="year"){var a=new Date(f,0,1,0,0,0,0)}return a}function aa_format_date(b,a){return jQuery.datepicker.formatDate(b,a)}function aadate_stdDate2DateObj(b){var l=b.split(" ");var a=l[0];var f=a.split("/");if(f.length>2&&f[2].length=="2"){f[2]="20"+f[2]}if(l.length==0){return null}if(l.length==1){var h=new Date(str2Int(f[2]),str2Int(f[1],10)-1,str2Int(f[0],10),0,0,0,0)}else{var g=l[1].split(":");if(g.length==3){var h=new Date(str2Int(f[2]),str2Int(f[1],10)-1,str2Int(f[0],10),str2Int(g[0],10),str2Int(g[1],10),str2Int(g[2],10))}else{var h=new Date(str2Int(f[2]),str2Int(f[1],10)-1,str2Int(f[0],10),str2Int(g[0],10),str2Int(g[1],10))}}return h}function aadate_dateObj2StdDate(b){var d=b.getYear();if(d<1000){d+=1900}var a=b.getDate()+"/"+(b.getMonth()+1)+"/"+d;if(b.getHours()>0||b.getMinutes()>0){a+=" "+ajaxart.pad2digits(b.getHours())+":"+ajaxart.pad2digits(b.getMinutes())}return a}function aadate_addToDate(f,a,b){var g=86400000;if(b=="hour"){g=3600000}if(b=="minute"){g=60000}if(b=="second"){g=1000}var h=aadate_stdDate2DateObj(f);h.setTime(h.getTime()+(a*g));return aadate_dateObj2StdDate(h)}(function(f){function b(){this._disabledInputs=[];this.regional=[];this.regional[""]={show24Hours:false,separator:":",ampmPrefix:"",ampmNames:["AM","PM"],spinnerTexts:["Now","Previous field","Next field","Increment","Decrement"]};this._defaults={appendText:"",showSeconds:false,timeSteps:[1,1,1],initialField:0,useMouseWheel:true,defaultTime:null,minTime:null,maxTime:null,spinnerImage:"",spinnerSize:[20,20,8],spinnerBigImage:"",spinnerBigSize:[40,40,16],spinnerIncDecOnly:false,spinnerRepeat:[500,250],beforeShow:null,beforeSetTime:null};f.extend(this._defaults,this.regional[""])}var g="timeEntry";f.extend(b.prototype,{markerClassName:"hasTimeEntry",setDefaults:function(h){a(this._defaults,h||{});return this},_connectTimeEntry:function(n,s){var q=f(n);if(q.hasClass(this.markerClassName)){return}var m={};m.options=f.extend({},s);m._selectedHour=0;m._selectedMinute=0;m._selectedSecond=0;m._field=0;m.input=f(n);f.data(n,g,m);var h=this._get(m,"spinnerImage");var o=this._get(m,"spinnerText");var p=this._get(m,"spinnerSize");var l=this._get(m,"appendText");var r=(!h?null:f('<span class="timeEntry_control" style="display: inline-block; background: url(\''+h+"') 0 0 no-repeat; width: "+p[0]+"px; height: "+p[1]+"px;"+(f.browser.mozilla&&f.browser.version<"1.9"?" padding-left: "+p[0]+"px; padding-bottom: "+(p[1]-18)+"px;":"")+'"></span>'));q.wrap('<span class="timeEntry_wrap"></span>').after(l?'<span class="timeEntry_append">'+l+"</span>":"").after(r||"");q.addClass(this.markerClassName).bind("focus.timeEntry",this._doFocus).bind("blur.timeEntry",this._doBlur).bind("click.timeEntry",this._doClick).bind("keydown.timeEntry",this._doKeyDown).bind("keypress.timeEntry",this._doKeyPress);if(f.browser.mozilla){q.bind("input.timeEntry",function(t){f.timeEntry._parseTime(m)})}if(f.browser.msie){q.bind("paste.timeEntry",function(t){setTimeout(function(){f.timeEntry._parseTime(m)},1)})}if(this._get(m,"useMouseWheel")&&f.fn.mousewheel){q.mousewheel(this._doMouseWheel)}if(r){r.mousedown(this._handleSpinner).mouseup(this._endSpinner).mouseover(this._expandSpinner).mouseout(this._endSpinner).mousemove(this._describeSpinner)}},_enableTimeEntry:function(h){this._enableDisable(h,false)},_disableTimeEntry:function(h){this._enableDisable(h,true)},_enableDisable:function(h,l){var m=f.data(h,g);if(!m){return}h.disabled=l;if(h.nextSibling&&h.nextSibling.nodeName.toLowerCase()=="span"){f.timeEntry._changeSpinner(m,h.nextSibling,(l?5:-1))}f.timeEntry._disabledInputs=f.map(f.timeEntry._disabledInputs,function(n){return(n==h?null:n)});if(l){f.timeEntry._disabledInputs.push(h)}},_isDisabledTimeEntry:function(h){return f.inArray(h,this._disabledInputs)>-1},_changeTimeEntry:function(h,m,p){var o=f.data(h,g);if(o){if(typeof m=="string"){var l=m;m={};m[l]=p}var n=this._extractTime(o);a(o.options,m||{});if(n){this._setTime(o,new Date(0,0,0,n[0],n[1],n[2]))}}f.data(h,g,o)},_destroyTimeEntry:function(h){$input=f(h);if(!$input.hasClass(this.markerClassName)){return}$input.removeClass(this.markerClassName).unbind(".timeEntry");if(f.fn.mousewheel){$input.unmousewheel()}this._disabledInputs=f.map(this._disabledInputs,function(l){return(l==h?null:l)});$input.parent().replaceWith($input);f.removeData(h,g)},_setTimeTimeEntry:function(h,m){var l=f.data(h,g);if(l){this._setTime(l,m?(typeof m=="object"?new Date(m.getTime()):m):null)}},_getTimeTimeEntry:function(h){var m=f.data(h,g);var l=(m?this._extractTime(m):null);return(!l?null:new Date(0,0,0,l[0],l[1],l[2]))},_getOffsetTimeEntry:function(h){var m=f.data(h,g);var l=(m?this._extractTime(m):null);return(!l?0:(l[0]*3600+l[1]*60+l[2])*1000)},_doFocus:function(m){var h=(m.nodeName&&m.nodeName.toLowerCase()=="input"?m:this);if(f.timeEntry._lastInput==h||f.timeEntry._isDisabledTimeEntry(h)){f.timeEntry._focussed=false;return}var l=f.data(h,g);f.timeEntry._focussed=true;f.timeEntry._lastInput=h;f.timeEntry._blurredInput=null;var n=f.timeEntry._get(l,"beforeShow");a(l.options,(n?n.apply(h,[h]):{}));f.data(h,g,l);f.timeEntry._parseTime(l);setTimeout(function(){f.timeEntry._showField(l)},10)},_doBlur:function(h){f.timeEntry._blurredInput=f.timeEntry._lastInput;f.timeEntry._lastInput=null},_doClick:function(l){var s=l.target;var o=f.data(s,g);if(!f.timeEntry._focussed){var t=f.timeEntry._get(o,"separator").length+2;o._field=0;if(s.selectionStart!=null){for(var r=0;r<=Math.max(1,o._secondField,o._ampmField);r++){var m=(r!=o._ampmField?(r*t)+2:(o._ampmField*t)+f.timeEntry._get(o,"ampmPrefix").length+f.timeEntry._get(o,"ampmNames")[0].length);o._field=r;if(s.selectionStart<m){break}}}else{if(s.createTextRange){var h=f(l.srcElement);var p=s.createTextRange();var q=function(u){return{thin:2,medium:4,thick:6}[u]||u};var n=l.clientX+document.documentElement.scrollLeft-(h.offset().left+parseInt(q(h.css("border-left-width")),10))-p.offsetLeft;for(var r=0;r<=Math.max(1,o._secondField,o._ampmField);r++){var m=(r!=o._ampmField?(r*t)+2:(o._ampmField*t)+f.timeEntry._get(o,"ampmPrefix").length+f.timeEntry._get(o,"ampmNames")[0].length);p.collapse();p.moveEnd("character",m);o._field=r;if(n<p.boundingWidth){break}}}}}f.data(s,g,o);f.timeEntry._showField(o);f.timeEntry._focussed=false},_doKeyDown:function(h){if(h.keyCode>=48){return true}var l=f.data(h.target,g);switch(h.keyCode){case 9:return(h.shiftKey?f.timeEntry._changeField(l,-1,true):f.timeEntry._changeField(l,+1,true));case 35:if(h.ctrlKey){f.timeEntry._setValue(l,"")}else{l._field=Math.max(1,l._secondField,l._ampmField);f.timeEntry._adjustField(l,0)}break;case 36:if(h.ctrlKey){f.timeEntry._setTime(l)}else{l._field=0;f.timeEntry._adjustField(l,0)}break;case 37:f.timeEntry._changeField(l,-1,false);break;case 38:f.timeEntry._adjustField(l,+1);break;case 39:f.timeEntry._changeField(l,+1,false);break;case 40:f.timeEntry._adjustField(l,-1);break;case 46:f.timeEntry._setValue(l,"");break}return false},_doKeyPress:function(l){var h=String.fromCharCode(l.charCode==undefined?l.keyCode:l.charCode);if(h<" "){return true}var m=f.data(l.target,g);f.timeEntry._handleKeyPress(m,h);return false},_doMouseWheel:function(h,m){if(f.timeEntry._isDisabledTimeEntry(h.target)){return}m=(f.browser.opera?-m/Math.abs(m):(f.browser.safari?m/Math.abs(m):m));var l=f.data(h.target,g);l.input.focus();if(!l.input.val()){f.timeEntry._parseTime(l)}f.timeEntry._adjustField(l,m);h.preventDefault()},_expandSpinner:function(n){var r=f.timeEntry._getSpinnerTarget(n);var p=f.data(f.timeEntry._getInput(r),g);var m=f.timeEntry._get(p,"spinnerBigImage");if(m){p._expanded=true;var q=f(r).offset();var o=null;f(r).parents().each(function(){var s=f(this);if(s.css("position")=="relative"||s.css("position")=="absolute"){o=s.offset()}return !o});var l=f.timeEntry._get(p,"spinnerSize");var h=f.timeEntry._get(p,"spinnerBigSize");f('<div class="timeEntry_expand" style="position: absolute; left: '+(q.left-(h[0]-l[0])/2-(o?o.left:0))+"px; top: "+(q.top-(h[1]-l[1])/2-(o?o.top:0))+"px; width: "+h[0]+"px; height: "+h[1]+"px; background: transparent url("+m+') no-repeat 0px 0px; z-index: 10;"></div>').mousedown(f.timeEntry._handleSpinner).mouseup(f.timeEntry._endSpinner).mouseout(f.timeEntry._endExpand).mousemove(f.timeEntry._describeSpinner).insertAfter(r)}},_getInput:function(h){return f(h).siblings("."+f.timeEntry.markerClassName)[0]},_describeSpinner:function(h){var m=f.timeEntry._getSpinnerTarget(h);var l=f.data(f.timeEntry._getInput(m),g);m.title=f.timeEntry._get(l,"spinnerTexts")[f.timeEntry._getSpinnerRegion(l,h)]},_handleSpinner:function(l){var p=f.timeEntry._getSpinnerTarget(l);var h=f.timeEntry._getInput(p);if(f.timeEntry._isDisabledTimeEntry(h)){return}if(h==f.timeEntry._blurredInput){f.timeEntry._lastInput=h;f.timeEntry._blurredInput=null}var n=f.data(h,g);f.timeEntry._doFocus(h);var o=f.timeEntry._getSpinnerRegion(n,l);f.timeEntry._changeSpinner(n,p,o);f.timeEntry._actionSpinner(n,o);f.timeEntry._timer=null;f.timeEntry._handlingSpinner=true;var m=f.timeEntry._get(n,"spinnerRepeat");if(o>=3&&m[0]){f.timeEntry._timer=setTimeout(function(){f.timeEntry._repeatSpinner(n,o)},m[0]);f(p).one("mouseout",f.timeEntry._releaseSpinner).one("mouseup",f.timeEntry._releaseSpinner)}},_actionSpinner:function(h,l){if(!h.input.val()){f.timeEntry._parseTime(h)}switch(l){case 0:this._setTime(h);break;case 1:this._changeField(h,-1,false);break;case 2:this._changeField(h,+1,false);break;case 3:this._adjustField(h,+1);break;case 4:this._adjustField(h,-1);break}},_repeatSpinner:function(h,l){if(!f.timeEntry._timer){return}f.timeEntry._lastInput=f.timeEntry._blurredInput;this._actionSpinner(h,l);this._timer=setTimeout(function(){f.timeEntry._repeatSpinner(h,l)},this._get(h,"spinnerRepeat")[1])},_releaseSpinner:function(h){clearTimeout(f.timeEntry._timer);f.timeEntry._timer=null},_endExpand:function(l){f.timeEntry._timer=null;var n=f.timeEntry._getSpinnerTarget(l);var h=f.timeEntry._getInput(n);var m=f.data(h,g);f(n).remove();m._expanded=false},_endSpinner:function(l){f.timeEntry._timer=null;var n=f.timeEntry._getSpinnerTarget(l);var h=f.timeEntry._getInput(n);var m=f.data(h,g);if(!f.timeEntry._isDisabledTimeEntry(h)){f.timeEntry._changeSpinner(m,n,-1)}if(f.timeEntry._handlingSpinner){f.timeEntry._lastInput=f.timeEntry._blurredInput}if(f.timeEntry._lastInput&&f.timeEntry._handlingSpinner){f.timeEntry._showField(m)}f.timeEntry._handlingSpinner=false},_getSpinnerTarget:function(h){return h.target||h.srcElement},_getSpinnerRegion:function(q,m){var v=this._getSpinnerTarget(m);var s=(f.browser.opera||f.browser.safari?f.timeEntry._findPos(v):f(v).offset());var n=(f.browser.safari?f.timeEntry._findScroll(v):[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]);var l=this._get(q,"spinnerIncDecOnly");var o=(l?99:m.clientX+n[0]-s.left-(f.browser.msie?2:0));var t=m.clientY+n[1]-s.top-(f.browser.msie?2:0);var r=this._get(q,(q._expanded?"spinnerBigSize":"spinnerSize"));var u=(l?99:r[0]-1-o);var h=r[1]-1-t;if(r[2]>0&&Math.abs(o-u)<=r[2]&&Math.abs(t-h)<=r[2]){return 0}var p=Math.min(o,t,u,h);return(p==o?1:(p==u?2:(p==t?3:4)))},_changeSpinner:function(h,m,l){f(m).css("background-position","-"+((l+1)*this._get(h,(h._expanded?"spinnerBigSize":"spinnerSize"))[0])+"px 0px")},_findPos:function(m){var l=curTop=0;if(m.offsetParent){l=m.offsetLeft;curTop=m.offsetTop;while(m=m.offsetParent){var h=l;l+=m.offsetLeft;if(l<0){l=h}curTop+=m.offsetTop}}return{left:l,top:curTop}},_findScroll:function(m){var l=false;f(m).parents().each(function(){l|=f(this).css("position")=="fixed"});if(l){return[0,0]}var n=m.scrollLeft;var h=m.scrollTop;while(m=m.parentNode){n+=m.scrollLeft||0;h+=m.scrollTop||0}return[n,h]},_get:function(l,h){return(l.options[h]!=null?l.options[h]:f.timeEntry._defaults[h])},_parseTime:function(n){var m=this._extractTime(n);var l=this._get(n,"showSeconds");if(m){n._selectedHour=m[0];n._selectedMinute=m[1];n._selectedSecond=m[2]}else{var h=this._constrainTime(n);n._selectedHour=h[0];n._selectedMinute=h[1];n._selectedSecond=(l?h[2]:0)}n._secondField=(l?2:-1);n._ampmField=(this._get(n,"show24Hours")?-1:(l?3:2));n._lastChr="";n._field=Math.max(0,Math.min(Math.max(1,n._secondField,n._ampmField),this._get(n,"initialField")));if(n.input.val()!=""){this._showTime(n)}},_extractTime:function(r,u){u=u||r.input.val();var q=this._get(r,"separator");var l=u.split(q);if(q==""&&u!=""){l[0]=u.substring(0,2);l[1]=u.substring(2,4);l[2]=u.substring(4,6)}var h=this._get(r,"ampmNames");var t=this._get(r,"show24Hours");if(l.length>=2){var s=!t&&(u.indexOf(h[0])>-1);var p=!t&&(u.indexOf(h[1])>-1);var o=parseInt(l[0],10);o=(isNaN(o)?0:o);o=((s||p)&&o==12?0:o)+(p?12:0);var n=parseInt(l[1],10);n=(isNaN(n)?0:n);var m=(l.length>=3?parseInt(l[2],10):0);m=(isNaN(m)||!this._get(r,"showSeconds")?0:m);return this._constrainTime(r,[o,n,m])}return null},_constrainTime:function(q,l){var p=(l!=null);if(!p){var m=this._determineTime(q,this._get(q,"defaultTime"))||new Date();l=[m.getHours(),m.getMinutes(),m.getSeconds()]}var o=false;var h=this._get(q,"timeSteps");for(var n=0;n<h.length;n++){if(o){l[n]=0}else{if(h[n]>1){l[n]=Math.round(l[n]/h[n])*h[n];o=true}}}return l},_showTime:function(m){var h=this._get(m,"show24Hours");var n=this._get(m,"separator");var l=(this._formatNumber(h?m._selectedHour:((m._selectedHour+11)%12)+1)+n+this._formatNumber(m._selectedMinute)+(this._get(m,"showSeconds")?n+this._formatNumber(m._selectedSecond):"")+(h?"":this._get(m,"ampmPrefix")+this._get(m,"ampmNames")[(m._selectedHour<12?0:1)]));this._setValue(m,l);this._showField(m)},_showField:function(o){var n=o.input[0];if(o.input.is(":hidden")||f.timeEntry._lastInput!=n){return}var p=this._get(o,"separator");var h=p.length+2;var q=(o._field!=o._ampmField?(o._field*h):(o._ampmField*h)-p.length+this._get(o,"ampmPrefix").length);var l=q+(o._field!=o._ampmField?2:this._get(o,"ampmNames")[0].length);if(n.setSelectionRange){n.setSelectionRange(q,l)}else{if(n.createTextRange){var m=n.createTextRange();m.moveStart("character",q);m.moveEnd("character",l-o.input.val().length);m.select()}}if(!n.disabled){n.focus()}},_formatNumber:function(h){return(h<10?"0":"")+h},_setValue:function(l,h){if(h!=l.input.val()){l.input.val(h).trigger("change")}},_changeField:function(l,n,m){var h=(l.input.val()==""||l._field==(n==-1?0:Math.max(1,l._secondField,l._ampmField)));if(!h){l._field+=n}this._showField(l);l._lastChr="";f.data(l.input[0],g,l);return(h&&m)},_adjustField:function(l,m){if(l.input.val()==""){m=0}var h=this._get(l,"timeSteps");this._setTime(l,new Date(0,0,0,l._selectedHour+(l._field==0?m*h[0]:0)+(l._field==l._ampmField?m*12:0),l._selectedMinute+(l._field==1?m*h[1]:0),l._selectedSecond+(l._field==l._secondField?m*h[2]:0)))},_setTime:function(o,p){p=this._determineTime(o,p);var h=this._constrainTime(o,p?[p.getHours(),p.getMinutes(),p.getSeconds()]:null);p=new Date(0,0,0,h[0],h[1],h[2]);var p=this._normaliseTime(p);var l=this._normaliseTime(this._determineTime(o,this._get(o,"minTime")));var n=this._normaliseTime(this._determineTime(o,this._get(o,"maxTime")));p=(l&&p<l?l:(n&&p>n?n:p));var m=this._get(o,"beforeSetTime");if(m){p=m.apply(o.input[0],[this._getTimeTimeEntry(o.input[0]),p,l,n])}o._selectedHour=p.getHours();o._selectedMinute=p.getMinutes();o._selectedSecond=p.getSeconds();this._showTime(o);f.data(o.input[0],g,o)},_normaliseTime:function(h){if(!h){return null}h.setFullYear(1900);h.setMonth(0);h.setDate(0);return h},_determineTime:function(n,m){var l=function(p){var o=new Date();o.setTime(o.getTime()+p*1000);return o};var h=function(v){var o=f.timeEntry._extractTime(n,v);var t=new Date();var p=(o?o[0]:t.getHours());var u=(o?o[1]:t.getMinutes());var q=(o?o[2]:t.getSeconds());if(!o){var s=/([+-]?[0-9]+)\s*(s|S|m|M|h|H)?/g;var r=s.exec(v);while(r){switch(r[2]||"s"){case"s":case"S":q+=parseInt(r[1],10);break;case"m":case"M":u+=parseInt(r[1],10);break;case"h":case"H":p+=parseInt(r[1],10);break}r=s.exec(v)}}t=new Date(0,0,10,p,u,q,0);if(/^!/.test(v)){if(t.getDate()>10){t=new Date(0,0,10,23,59,59)}else{if(t.getDate()<10){t=new Date(0,0,10,0,0,0)}}}return t};return(m?(typeof m=="string"?h(m):(typeof m=="number"?l(m):m)):null)},_handleKeyPress:function(p,o){if(o==this._get(p,"separator")){this._changeField(p,+1,false)}else{if(o>="0"&&o<="9"){var t=parseInt(o,10);var s=parseInt(p._lastChr+o,10);var r=this._get(p,"show24Hours");var n=(p._field!=0?p._selectedHour:(r?(s<24?s:t):(s>=1&&s<=12?s:(t>0?t:p._selectedHour))%12+(p._selectedHour>=12?12:0)));var m=(p._field!=1?p._selectedMinute:(s<60?s:t));var l=(p._field!=p._secondField?p._selectedSecond:(s<60?s:t));var q=this._constrainTime(p,[n,m,l]);this._setTime(p,new Date(0,0,0,q[0],q[1],q[2]));p._lastChr=o}else{if(!this._get(p,"show24Hours")){o=o.toLowerCase();var h=this._get(p,"ampmNames");if((o==h[0].substring(0,1).toLowerCase()&&p._selectedHour>=12)||(o==h[1].substring(0,1).toLowerCase()&&p._selectedHour<12)){var u=p._field;p._field=p._ampmField;this._adjustField(p,+1);p._field=u;this._showField(p)}}}}}});function a(m,l){f.extend(m,l);for(var h in l){if(l[h]==null){m[h]=null}}return m}var d=["getOffset","getTime","isDisabled"];f.fn.timeEntry=function(l){var h=Array.prototype.slice.call(arguments,1);if(typeof l=="string"&&f.inArray(l,d)>-1){return f.timeEntry["_"+l+"TimeEntry"].apply(f.timeEntry,[this[0]].concat(h))}return this.each(function(){var n=this.nodeName.toLowerCase();if(n=="input"){if(typeof l=="string"){f.timeEntry["_"+l+"TimeEntry"].apply(f.timeEntry,[this].concat(h))}else{var m=(f.fn.metadata?f(this).metadata():{});f.timeEntry._connectTimeEntry(this,f.extend(m,l))}}})};f.timeEntry=new b()})(jQuery);ajaxart_debugui_capture_onselect=null;ajaxart_debugui_captured_element=jQuery([]);ajaxart_debugui_capture_box=null;ajaxart.gcs.debugui={SetComponent:function(d,f,b){var a=aa_first(f,d,"ComponentXml",b);var g=aa_text(f,d,"ComponentId",b).split(".");ajaxart.components[g[0]][g[1]]=a;ajaxart.componentsXtmlCache[g[0]+"."+g[1]]=null;return[]},Traces:function(f,g,d){var a=1;for(var b=0;b<ajaxart.traces.length;b++){ajaxart.traces[b].counter=""+(a++)}return ajaxart.traces},DumpObject:function(b,d,a){if(d.length==0){return[]}return[ajaxart.text4trace(d[0])]},ClearTraces:function(b,d,a){ajaxart.traces=[]},ClearLogs:function(b,d,a){ajaxart.logs={};jQuery("#aa_immediate_log").remove();jQuery(".fld_toolbar_errors_sign").addClass("hidden")},MemoryLeaksData:function(b,d,a){if(!jBart.vars.memoryLeaksData){jBart.vars.memoryLeaksData=ajaxart.parsexml("<xml/>")}return[jBart.vars.memoryLeaksData]},RunMemoryLeaksCounter:function(f,m,b){var q=aa_get_func(aa_text(m,f,"TopJsObject",b));var h=q();if(!h){return}var l=aa_int(m,f,"Depth",b);var d=aa_text(m,f,"Output",b);ajaxart.logs={};var n=[];function t(z,E,D,w){if(z==window||z==window.frames||z==window.top||z==window.jQuery||z==window.tinyMCE||z==window.tinymce){if(D!=""){return 0}}if(E==0||!z||typeof(z)!="object"||z.nodeType){return 0}var B=0;try{for(var A in z){if(A=="parent"||A=="event"||A=="self"){continue}B++;var v=(A.length>40)?A.substring(0,40)+"...":A;v=v.replace(/[\n\r\t ,]/g,"");var y=(D=="")?v:D+"."+v;var u=t(z[A],E-1,y,w);B+=u;if(w&&u>0){n.push(y+","+u)}}}catch(C){}return B}var g=jBart.vars.memoryLeaksData.getAttribute("PreviousCount")||"";var s=jBart.vars.memoryLeaksData.getAttribute("PreviousDomSize")||"";var r=t(h,l,"",(d=="detailed"));var a=""+document.body.innerHTML.length;jBart.vars.memoryLeaksData.setAttribute("PreviousCount",""+r);jBart.vars.memoryLeaksData.setAttribute("PreviousDomSize",""+a);if(d=="detailed"){var o=aa_ctx(b,{TotalCount:[""+r],Results:n,PrevCount:[g],DomSize:[a],PrevDomSize:[s]});ajaxart.runNativeHelper(m,f,"ShowResults",o)}else{var p=(g=="")?"":"Last Object Count  = "+g+"\n\r";p+="Total Object Count = "+r;alert(p)}},CaptureSelect:function(b,d,a){ajaxart_debugui_captured_element=jQuery([]);if(window.captureEvents){window.onclick=ajaxart_debugui_capture_click;window.onmousemove=ajaxart_debugui_capture_mousemove;window.onkeydown=ajaxart_debugui_capture_keydown}else{document.onclick=ajaxart_debugui_capture_click;document.onmousemove=ajaxart_debugui_capture_mousemove;document.onkeydown=ajaxart_debugui_capture_keydown}ajaxart_debugui_capture_onselect=function(f){ajaxart.run([f],b,"OnSelect",a)};return[]}};function ajaxart_debugui_capture_mousemove(h){var f=(typeof event!=="undefined")?event.srcElement:h.target;if(f.id=="capturebox"){f=ajaxart_find_control_at_position(jQuery("body"),h)[0]}var b=false;while(f!=null&&!b){if("ajaxart" in f&&f.ajaxart.script!=null){b=true}if(!b){f=f.parentNode}}if(f==null){return}ajaxart_debugui_captured_element=jQuery(f);if(ajaxart_debugui_capture_box==null){ajaxart_debugui_capture_box=jQuery('<div class="capturebox" ><div class="top"> <div class="captureboxtext"></div> </div><div class="right"/><div class="bottom"/><div class="left"/></div>');ajaxart_debugui_capture_box.appendTo("body")}if(ajaxart.isxml(f.ajaxart.script)){jQuery(ajaxart_debugui_capture_box).find(".captureboxtext").html(f.ajaxart.script.getAttribute("t").split(".")[1])}var g={x:aa_absLeft(f),y:aa_absTop(f)};var d=jQuery(f).outerWidth();var a=jQuery(f).outerHeight();jQuery(ajaxart_debugui_capture_box).find(".top").css("left",g.x-2).css("top",g.y-2).width(d+4);jQuery(ajaxart_debugui_capture_box).find(".bottom").css("left",g.x-2).css("top",g.y-2+a).width(d+4);jQuery(ajaxart_debugui_capture_box).find(".left").css("left",g.x-2).css("top",g.y-2).height(a+2);jQuery(ajaxart_debugui_capture_box).find(".right").css("left",g.x-2+d).css("top",g.y-2).height(a+2);ajaxart_debugui_capture_box.height(jQuery(f).outerHeight());ajaxart_debugui_capture_box.width(jQuery(f).outerWidth());ajaxart_debugui_capture_box.show()}function ajaxart_debugui_capture_keydown(a){if(a.keyCode==27){ajaxart_debugui_stop_capture();ajaxart_debugui_captured_element=jQuery([]);ajaxart_debugui_capture_onselect(null)}}function ajaxart_debugui_capture_click(a){if(ajaxart_debugui_captured_element.length==0){return}ajaxart_debugui_stop_capture();var b=ajaxart_debugui_captured_element[0];ajaxart_debugui_captured_element=jQuery([]);if(ajaxart_debugui_capture_box!=null){ajaxart_debugui_capture_box.hide()}ajaxart_debugui_capture_onselect(b)}function ajaxart_debugui_stop_capture(){if(window.captureEvents){window.captureEvents(Event.Click);window.onclick=null;window.onmousemove=null;window.onkeydown=null}else{document.onclick=null;document.onmousemove=null;document.onkeydown=null}}function ajaxart_debugui_find_control_at_position(d,f){var b=d.children();for(var a=0;a<b.length;a++){var g=b[a];if(g.id=="capturebox"){continue}var h={x:aa_absLeft(g),y:aa_absTop(g)};if(h.x<=f.pageX&&h.x+g.offsetWidth>=f.pageX&&h.y<=f.pageY&&h.y+g.offsetHeight>=f.pageY){return ajaxart_debugui_find_control_at_position(jQuery(g),f)}}return d}function _xml(a){return ajaxart.xml.prettyPrint(a,"",false).split("\r")}aa_gcs("dialog",{ContentsOfOpenPopup:function(b,d,a){return aa_contentsOfOpenPopup()},TopDialogContent:function(h,l,g){var d=aa_text(l,h,"Part",g);var b=".dialog_content";var f=aa_top_dialog();if(openDialogs.length==0&&!f){return[]}var m=openDialogs[openDialogs.length-1];if(d=="Content"){if(!m){return f}}if(d=="Data"){if(m==null||m.dialogContent==null||m.dialogContent.ajaxart==null){return[]}return ajaxart.getVariable(m.dialogContent.ajaxart.params,"DialogWorkingData")}if(d=="Title"){b=".dialog_title_text"}var a=jQuery(m.dialogContent).find(b);if(d=="All"){a=jQuery(m.dialogContent)}if(a.length==0){return[]}return[a[0]]},CloseDialog:function(d,g,b){var f=aa_text(g,d,"CloseType",b);var a=aa_bool(g,d,"IgnoreAAEditor",b);aa_close_dialog_old(f,a)},NativeConfirm:function(f,g,d){var b=aa_text(g,f,"Question",d);var a=confirm(b);if(a==true){return aa_bool(g,f,"RunOnOK",d)}return["true"]},ElementPopupOpensOn:function(d,f,b){var a=ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1];if(a!=null){return[a.onElem]}return[]},FixTopDialogPosition:function(b,d,a){return aa_fixTopDialogPosition()},IsRuntimeDialog:function(b,d,a){var f=ajaxart.getVariable(a,"OriginalControlElement");if(jQuery(f[0]).parents(".runtime").length>0){return["true"]}return[]},PopUpDialog:function(g,l,f){var p=aa_first(l,g,"Dialog",f);var h=aa_text(l,g,"ScreenColor",f);var m=aa_first(l,g,"ScreenOpacity",f);var n=ajaxart.inPreviewMode==true;if(n){return[]}jQuery("body").addClass("body_with_open_dialog");var r=ajaxart.getVariable(f,"OriginalControlElement");if(jQuery(r[0]).parents(".runtime").length>0){jQuery(p).addClass("runtime")}var q=false;if(!aa_bool(l,g,"AlwaysLTR",f)){if(jQuery(r[0]).parents(".right2left").length>0){q=true}else{if(r.length==0||!ajaxart.isattached(r[0])){q=jQuery("body").find(".right2left").length>0}}}if(q){jQuery(p).addClass("right2left")}if(!n){p.style.position="absolute"}jQuery(p).addClass("ajaxart "+ajaxart.deviceCssClass);if(!n){document.body.appendChild(p)}var b=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var d=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);var t=function(){p.style.visibility="visible";var w=0;var v=0;if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){v=document.body.scrollTop;w=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){v=document.documentElement.scrollTop;w=document.documentElement.scrollLeft}}p.style.left=Math.max(5,(b-jQuery(p).width())/2)+w+"px";p.style.top=Math.max(5,(d-jQuery(p).height())/2)+v+"px";ajaxart.setVariable(f,"ControlElement",[p]);p.focus();ajaxart.run(l,g,"RunAfterPopup",f)};aa_enable_move_by_dragging(p,jQuery(p).find(".dialog_title")[0],function(){ajaxart_dialog_close_all_popups()});var s=document;window.aa_noOfOpenDialogs=window.aa_noOfOpenDialogs||0;if(!n){aa_noOfOpenDialogs++}var u=Math.max(s.body.scrollHeight,s.body.clientHeight);var o=Math.max(s.body.clientWidth,s.body.scrollWidth);wrappingDiv=s.createElement("DIV");aa_defineElemProperties(wrappingDiv,"OldDialog,aa_noOfOpenDialogs,dialogContent");wrappingDiv.noOfOpenDialogs=aa_noOfOpenDialogs;wrappingDiv.OldDialog=true;wrappingDiv.className="dialog_cover";wrappingDiv.style.position="fixed";if(!n){s.body.appendChild(wrappingDiv)}wrappingDiv.style.backgroundColor=h;wrappingDiv.onmousedown=function(v){v=v||event;if(v==null){return}if(typeof(Event)!="undefined"&&Event.resolve){Event.cancelBubble(Event.resolve(v))}};wrappingDiv.dialogContent=p;var a=ajaxart_screen_size();wrappingDiv.style.width="100%";wrappingDiv.style.height="100%";++aa_dialogCounter;wrappingDiv.style.zIndex=2000+aa_dialogCounter;wrappingDiv.style.top="0px";wrappingDiv.style.left="0px";wrappingDiv.style.opacity=m;if(typeof(wrappingDiv.style.filter)!="undefined"){wrappingDiv.style.filter="alpha(opacity="+m*100+")"}p.style.zIndex=2001+aa_dialogCounter;p.tabIndex=0;if(!n){openDialogs.push(wrappingDiv)}if(!n){p.style.visibility="hidden";setTimeout(function(){t()},1)}aa_element_attached(p);return[p]},ShowValidationError:function(b,f,a){var d=jQuery(a.vars.DialogContext[0].Content);if(!d.hasClass("aa_container")){d=d.find(".aa_container")}if(!d[0]){return}aa_validation_showerror(d[0],aa_text(f,b,"Error",a),null,a)},ShowNotificationMessage:function(d,l,b){var n=aa_text(l,d,"Title",b);var h=aa_first(l,d,"Control",b);var a=document.createElement("div");a.className="aa_modeless_popup aa_notification";var s=jQuery("body").find(".right2left").length>0;if(s){jQuery(a).addClass("right2left")}a.hide=function(){jQuery(a).animate({height:"hide"},300,function(){jQuery(a).remove()})};var t=document.createElement("div");t.className="title";a.appendChild(t);jQuery(t).text(n);var o=document.createElement("div");o.className="content";a.appendChild(o);if(h!=null){o.appendChild(h)}var q=document.createElement("IMG");q.setAttribute("src","images/close.png");q.className="close_button";jQuery(q).click(function(){a.hide()});jQuery(t).click(function(){a.hide()});a.appendChild(q);a.style.display="none";document.body.appendChild(a);var p=ajaxart_scroll_offset();var u=ajaxart_screen_size();if(s){a.style.left=aa_text(l,d,"MarginRight",b)+"px"}else{a.style.right=aa_text(l,d,"MarginRight",b)+"px"}a.style.position="fixed";a.style.bottom=p.y+aa_int(l,d,"MarginBottom",b)+"px";if(jQuery(".aa_notification").length>0){var g=jQuery(".aa_notification");var m=0;for(var f=0;f<g.length;f++){if(g[f].style.display=="block"){var r=aa_absTop(g[f]);if(r<m||m==0){m=r}}}if(m>0){a.style.bottom=u.height+p.y-m+aa_int(l,d,"MarginBottom",b)+"px"}}jQuery(a).animate({height:"show"},300);setTimeout(function(){a.hide()},aa_int(l,d,"AutoCloseTimeInSeconds",b)*1000)},CloseNotificationMessage:function(f,h,d){var a=jQuery(".aa_notification");if(a.length==0){return}if(a.length==1){a[0].hide();return}if(aa_bool(h,f,"CloseAll",d)){for(var b=0;b<a.length;b++){a[b].hide()}return}if(!d.vars.ControlElement){return}var g=d.vars.ControlElement[0];while(g){if(jQuery(g).hasClass("aa_notification")){g.hide();return}g=g.parentNode}}});function aa_close_dialog_old(b,a){if(openDialogs.length==0){return}jQuery("body").removeClass("body_with_open_dialog");var d=openDialogs[openDialogs.length-1];if(b=="OK"&&jQuery(d.dialogContent).find(".aa_noclose_message").length>0){return}if(a&&jQuery(d.dialogContent).hasClass("aaeditor")){return["true"]}ajaxart_dialog_close_all_popups();var f=ajaxart.dialog.closeDialog(d);if(b=="OK"){ajaxart_runevent(d.dialogContent,"DialogContext","OnOK")}else{if(b=="Cancel"){ajaxart_runevent(d.dialogContent,"DialogContext","OnCancel")}else{if(b=="Delete"){ajaxart_runevent(d.dialogContent,"DialogContext","OnDelete")}}}aa_remove(f,true)}aa_gcs("twitter",{TwitterShare:function(b,d,a){a.vars._Field[0].Control=function(m,f){var h=jQuery('<a href="https://twitter.com/share">Tweet</a>').addClass("twitter-share-button");var l=aa_text(m,b,"Text",a);var g=aa_text(m,b,"Url",a);h.attr("data-url",g).attr("data-text",l);if(!aa_bool(m,b,"ShowCount",a)){h.attr("data-count","none")}if(aa_bool(m,b,"Large",a)){h.attr("data-size","large")}aa_addOnAttach(h[0],function(){jQuery.getScript("//platform.twitter.com/widgets.js")});return h.get()}}});aa_gcs("facebook",{LikeButton:function(b,f,a){var d=aa_text(f,b,"AppID",a);a.vars._Field[0].Control=function(m,g){var l="https://www.facebook.com/plugins/like.php?href="+encodeURIComponent(aa_text(f,b,"Url",a));l+="&layout="+aa_text(f,b,"LayoutStyle",a);var h=jQuery('<iframe scrolling="no" frameborder="0" />').attr("src",l).attr("style","border:none;height:30px").css("width",aa_text(f,b,"Width",a));return h.get()};a.vars._Field[0].Control1=function(l,g){var h=jQuery('<div data-send="true" data-show-faces="false" data-action="like" />').addClass("fb-like");h.attr("data-width",aa_text(f,b,"Width",a));h.attr("data-href",aa_text(f,b,"Url",a));h.attr("data-layout",aa_text(f,b,"LayoutStyle",a));h.attr("data-send",aa_bool(f,b,"SendButton",a)?"true":"false");aa_addOnAttach(h[0],function(){aa_init_facebook(d)});return h.get()}}});function aa_init_facebook(a){if(window.FB){FB.XFBML.parse();return}aa_load_js_css("//connect.facebook.net/en_US/all.js#xfbml=1&appId="+a,"js")}ajaxart.gcs.group={DateIntervals:function(d,l,b){var r={isObject:true,Options:[]};if(aa_bool(l,d,"Today",b)){var p=aadate_dateObj2StdDate(new Date());r.Options.push({isObject:true,code:ajaxart_multilang_text("Today",b)+" ("+aadate_dateObj2StdDate(new Date())+")",From:p,To:p})}if(aa_bool(l,d,"Yesterday",b)){var n=aadate_addToDate(aadate_dateObj2StdDate(new Date()),-1);r.Options.push({isObject:true,code:ajaxart_multilang_text("Yesterday (",b)+n+")",From:n,To:n})}if(aa_bool(l,d,"Last7days",b)){var p=aadate_dateObj2StdDate(new Date());var g=aadate_addToDate(aadate_dateObj2StdDate(new Date()),-6);r.Options.push({isObject:true,code:ajaxart_multilang_text("Last 7 days",b),From:g,To:p})}if(aa_bool(l,d,"ThisMonth",b)){var q=""+aadate_currentMonth()+"/"+aadate_currentYear();r.Options.push({isObject:true,code:ajaxart_multilang_text("This Month (",b)+q+")",From:q,To:q})}if(aa_bool(l,d,"LastMonth",b)){var f="1/"+aadate_currentMonth()+"/"+aadate_currentYear();var h=aadate_addToDate(f,-1).split("/");var m=h[1]+"/"+h[2];r.Options.push({isObject:true,code:ajaxart_multilang_text("Last Month (",b)+m+")",From:m,To:m})}if(aa_bool(l,d,"ThisYear",b)){var a=""+aadate_currentYear();r.Options.push({isObject:true,code:ajaxart_multilang_text("This Year (",b)+a+")",From:a,To:a})}if(aa_bool(l,d,"LastYear",b)){var o=""+(aadate_currentYear()-1);r.Options.push({isObject:true,code:ajaxart_multilang_text("Last Year (",b)+o+")",From:o,To:o})}return[r]}};function aa_calc_groups(o,r,m,f){var s=m[0];if(!s){return[]}if(m.length>1){var d="";for(var n in m){d+="__"+m[n].Id}for(var n in r){var b=r[n];var g="";for(var h in m){g+="__"+b[m[h].Id]}b[d]=g}s={Id:d}}var a=aa_groupItems(s,r,o);var l=[];if(s.Options||s.Ranges){function q(v){if(!v){return null}return v.Categories?v.Categories.concat(v.Options):v.Options}function p(y){var v=[];for(var z in y){var A=y[z];var D=A.code||A.text;var B=a[D]?a[D]:[];var C={isObject:true,Name:D,Id:aa_string2id(D),Title:s.OptionLabel?s.OptionLabel([D])[0]:D,Items:aa_sort_dataview(B,o.Sort),Count:B.length,FetchItems:function(){var E=[];var G=this.SubGroups;for(var F in G){E=E.concat(G[F].FetchItems())}E=E.concat(this.Items);return E},__hiddenForView:{},SubGroups:A.IsCategory?p(q(A)):null};if(C.Items.length>0){for(var w in m){if(!m[w].Multiple){C[m[w].Id]=C.Items[0][m[w].Id]}else{C[m[w].Id]=D}}}v.push(C)}return v}l=p(q(s.Options)||s.Ranges)}if(!s.Options&&!s.Ranges){for(var u in a){if(u!="isObject"&&u!="__Size"){var t={isObject:true,Name:u,Id:aa_string2id(u),__hiddenForView:{},Title:s.OptionLabel?s.OptionLabel([u])[0]:u,Items:aa_sort_dataview(a[u],o.Sort),Count:a[u].length,FetchItems:function(){return this.Items}};if(t.Items.length>0){for(var h in m){t[m[h].Id]=t.Items[0][m[h].Id]}}l.push(t)}}}return l}function aa_groupItems(n,l,g){var p={isObject:true};var b=function(u,t){var s=t.code;if(u[s]){return u[s]}var r=[];for(var q=0;q<t.Options.length;q++){r=r.concat(u[t.Options[q].code]||[])}for(var q=0;q<t.Categories.length;q++){r=r.concat(b(u,t.Categories[q]))}u[s]=r;return r};p.__Size=0;var o=g?g.Id:null;for(var f in l){var a=l[f];if((o&&a.__hiddenForView[o])||a.__hiddenForView.user){continue}p.__Size++;var d=a[n.Id];if(n.Multiple){var m=d.split(",");for(j=0;j<m.length;j++){var h=m[j];if(p[h]==null){p[h]=[a]}else{p[h].push(a)}}}else{if(p[d]==null){p[d]=[a]}else{p[d].push(a)}}}if(n.Options&&n.Options.Categories){for(var f=0;f<n.Options.Categories.length;f++){b(p,n.Options.Categories[f])}}return p}function aa_Sum(d,b){var a=0;for(i in d){a+=d[i][b]}return a}function aa_Average(d,b){var a=0;for(i in d){a+=d[i][b]}return a/d.length}function aa_Max(d,b){var a=-2147483648;for(i in d){a=Math.max(a,d[i][b])}return a}function aa_Min(d,b){var a=2147483647;for(i in d){a=Math.min(a,d[i][b])}return a}function aa_Count(b,a){return b.length}aa_gcs("image",{Image:function(b,d,a){var f={};f.Size=aa_text(d,b,"Width",a)+","+aa_text(d,b,"Height",a);f.KeepImageProportions=aa_bool(d,b,"KeepImageProportions",a);aa_setMethod(f,"Url",b,"Url",a);return[f]},ImageOld:function(d,f,b){var g={};g.SecondUrl=aa_text(f,d,"SecondUrl",b);g.Size=aa_text(f,d,"Size",b);g.KeepImageProportions=aa_bool(f,d,"KeepImageProportions",b);aa_setMethod(g,"Url",d,"Url",b);g.asDivBackground=aa_bool(f,d,"AsDivBackground",b);if(g.asDivBackground){g.x=g.y=0;var a=g.Size.split(",");g.width=a[0]+"px";g.height=a[1]+"px"}return[g]},ImageInCss:function(b,d,a){return[{InCssClass:true,CssClass:aa_text(d,b,"CssClass",a)}]},ImageInSprite:function(f,h,d){var l={inSprite:true};var b=aa_text(h,f,"Size",d).split(",");l.width=b[0]+"px";l.height=b[1]+"px";var m=aa_text(h,f,"PositionInSprite",d).split(",");l.x="-"+m[0]+"px";l.y="-"+m[1]+"px";var a=aa_text(h,f,"PositionForHover",d).split(",");if(a.length>1){l.hoverx=0-parseInt(a[0])+"px";l.hovery=0-parseInt(a[1])+"px"}var g=aa_text(h,f,"PositionForClick",d).split(",");if(g.length>1){l.activex="-"+g[0]+"px";l.activey="-"+g[1]+"px"}aa_setMethod(l,"Url",f,"Url",d);return[l]},ShowImage:function(d,f,b){var g=aa_first(f,d,"Image",b);if(g&&g.Url){g.StaticUrl=aa_totext(g.Url(f,b))}var a=jQuery("<span/>")[0];aa_set_image(a,g,true);return[a]}});aa_gcs("field_type",{Image:function(b,d,a){var f=a.vars._Field[0];f.ImageStyle=aa_first(d,b,"Style",a);f.Control=function(m,g){var l=aa_first(m,b,"Image",a);if(l&&l.Url){l.StaticUrl=aa_totext(l.Url(m,a))}var h=f.ImageStyle;return[aa_renderStyleObject(h,{Field:f,image:l,data:m[0]},a)]}},EditableImage:function(b,d,a){var f=a.vars._Field[0];f.ImageStyle=aa_first(d,b,"Style",a);f.Control=function(m,g){var l=aa_first(m,b,"Image",a);if(l&&l.Url){l.StaticUrl=aa_totext(l.Url(m,a))}var h=f.ImageStyle;return[aa_renderStyleObject(h,{Field:f,image:l,data:m[0],SetValue:function(o,n){var p=this.control;ajaxart.writevalue(m,o);aa_invoke_field_handlers(f.OnUpdate,p,null,f,m,{});jBart.trigger(f,"update",{FieldData:m,wrapper:p.parentNode})}},a)]}}});function aa_create_static_image_object(b){if(!b){return null}if(typeof(b)=="string"){return{url:b}}var d=b.width,a=b.height;if(b.Size){var f=aa_split(b.Size,",",true);d=f[0]?parseInt(f[0]):null;a=f[1]?parseInt(f[1]):null}return{url:b.StaticUrl,width:d,height:a,inSprite:b.inSprite,x:b.x,y:b.y}}aa_gcs("field",{PropertySheet1:function(d,f,b){var g={Title:aa_multilang_text(f,d,"Title",b),FieldData:function(h){return h},SectionStyle:aa_first(f,d,"SectionStyle",b)};g.Id=aa_text(f,d,"ID",b);g.ID=[g.Id];var a=aa_ctx(b,{_Field:[g]});g.Style=aa_first(f,d,"Style",a);g.HideTitle=aa_bool(f,d,"HideTitle",b);g.Control=function(r,n){var l=ajaxart.runsubprofiles(f,d,"Field",aa_merge_ctx(b,n));var m=[];for(var p=0;p<l.length;p++){if(l[p].IsFieldHidden&&l[p].IsFieldHidden(r,n)){continue}if(l[p].IsCellHidden&&l[p].IsCellHidden(r,n)){continue}if(l[p].IsHidden){continue}m.push(l[p])}var o=aa_renderStyleObject(g.Style,{data:r,Fields:m,addFields:h},n);function h(A,u){var t=this.getInnerElement(A);if(!t||!u){return}var s=t.parentNode;for(var v=0;v<this.Fields.length;v++){var z=this.Fields[v];var w=t.cloneNode(true);s.insertBefore(w,t);aa_element_attached(w);var y=aa_api_object(w,{Field:z,data:this.data,Title:z.Title,HideTitle:z.HideTitle,IsSection:z.AsSection,setControl:q});aa_defineElemProperties(y,"setPlaceholderForMoreFields");y.setPlaceholderForMoreFields=function(B){this.jbOptionsPage=function(){if(!this.jbOptionsPageElement){var C=t.cloneNode(true);optionsFieldObj=aa_api_object(C,{field_obj:this,setOptionsPage:function(D){this.field_obj.jbOptionsPageElement=this.getInnerElement(D)}});B.call(optionsFieldObj,optionsFieldObj);if(this.Field.IndentOptionPage){jQuery(C).addClass("aa_indent")}jQuery(C).insertAfter(this)}return this.jbOptionsPageElement}};u.call(y,y);if(z.Mandatory){jQuery(w).addClass("aa_mandatory")}}t.parentNode.removeChild(t)}function q(u,t){var s=this.getInnerElement(u);s.jbFieldElement=this;if(!s){return}aa_fieldControl({Field:this.Field,Item:this.data,Wrapper:s,Context:n})}if(g.SectionStyle){return[aa_wrapWithSection(o,g,g.SectionStyle,r,n)]}return[o]};ajaxart.runsubprofiles(f,d,"FieldAspect",a);return[g]}});function aa_propertysheet(b,a){aa_defaults(a,{FieldElement:jQuery(b).find(".field")[0],MoreOptionsCssClass:"field_for_more_options",FieldTitle:function(d){return d?d+":":""},SetDescription:function(f,d){jQuery(f).find(".field_contents").append('<div class="field_description"/>');f.setInnerHTML(".field_description",d)}});b.addFields(a.FieldElement,function(g){var d=g.Field&&g.Field.Id;g.setPlaceholderForMoreFields(function(h){jQuery(h).addClass(a.MoreOptionsCssClass+" "+a.MoreOptionsCssClass+"_"+d).find(">.field_title").remove();var l=jQuery(h).find(">.field_contents").attr("colspan",2).append('<div class="field_options_page"/>');h.setOptionsPage(".field_options_page")});if(g.HideTitle||g.IsSection){jQuery(g).find(">.field_title").remove();jQuery(g).find(">.field_contents").attr("colspan",2)}else{g.setInnerHTML(".field_title",a.FieldTitle(g.Title));jQuery(g).find(">.field_title").addClass("field_title_"+d)}var f=jQuery(g).find(".field_contents");f.addClass("field_contents_"+d);g.setControl(".field_contents");if(g.Field.Description){a.SetDescription(g,g.Field.Description)}})}aa_gcs("slider",{Unit:function(b,f,a){var d={symbol:aa_text(f,b,"Symbol",a),min:parseFloat(aa_text(f,b,"Min",a)),max:parseFloat(aa_text(f,b,"Max",a)),initialPixelsPerUnit:parseFloat(aa_text(f,b,"InitialPixelsPerUnit",a)),step:aa_float(f,b,"Step",a),sliderText:function(g,h){if(g==""&&h.AllowEmptyValue){return h.TextForEmptyValue}return aa_text([g],b,"SliderText",aa_ctx(a,{Symbol:[this.symbol]}))},valueToSave:function(h,g){if(h===""&&g.AllowEmptyValue){return""}return aa_text([h],b,"DataFormat",aa_ctx(a,{Symbol:[this.symbol]}))},numericPart:function(n,m){var l=(""+n).match(/([^0-9\.\-]*)([0-9\.\-]+)([^0-9\.\-]*)/);var h=l&&l[2];h=h||(m.AllowEmptyValue?"":"0");var g=parseFloat(h);if(!isNaN(g)){h=""+this.fixValue(g)}return h},fixValue:function(h){var g=this;if(!isNaN(g.min)){h=Math.max(h,g.min)}if(!isNaN(g.max)){h=Math.min(h,g.max)}h=Math.round(h/g.step)*g.step;h=parseFloat(h.toFixed(3)+"".replace(/0+$/,""));return h}};return[d]},Slider:function(g,l,f){var m=f.vars._Field[0];m.SliderStyle=aa_first(l,g,"Style",f);m.AllowEmptyValue=aa_bool(l,g,"AllowEmptyValue",f);m.TextForEmptyValue=aa_bool(l,g,"TextForEmptyValue",f);aa_field_handler(m,"ModifyControl",function(){},"resizer");var b=ajaxart.run(l,g,"Units",f);var h=b[0];if(!h){var d=aa_text(l,g,"Min",f);var a=ajaxart.parsexml('<xtml t="slider.Unit" Min="'+d+'" />');h=aa_first(l,a,"",f)}m.Control=function(t,n){var s=this;var o=s.SliderStyle;var q=jQuery(o.Html);var r=h.numericPart(ajaxart.totext_array(t),s);var p=aa_api_object(q,{initSizes:function(){var u=parseInt(p.width.split("px")[0]||"0");p.scaleWidth=jQuery(p.jbScaleElem).width()||u;p.fromPixel=aa_absLeft(p.jbScaleElem);p.toPixel=p.fromPixel+p.scaleWidth;p.center=Math.round(p.fromPixel+p.scaleWidth/2);if(!isNaN(h.min)){p.from=h.min}if(!isNaN(h.max)){p.to=h.max}if(!isNaN(h.initialPixelsPerUnit)){p.ratio=p.ratio||h.initialPixelsPerUnit}if(!p.ratio&&p.from!=null&&p.to!=null){p.ratio=p.scaleWidth/(p.to-p.from)}if(!p.ratio){p.ratio=1/h.step}if(p.from!=null&&p.to!=null){p.range=p.to-p.from}else{p.range=p.scaleWidth/p.ratio}if(p.from!=null){p.offset=p.from*p.ratio}p.thumbWidth=Math.round(jQuery(p.jbThumbElem).outerWidth()/2)},setValue:function(w,v){r=h.numericPart(w,s);var u=h.valueToSave(r,s);if(aa_totext(t)==u){return p}ajaxart.writevalue(t,[u]);if(s.RefreshOn=="every click"||v!="slide"){aa_invoke_field_handlers(s.OnUpdate,p,{},s,t)}return p},width:aa_text(l,g,"Width",f),adjustScale:function(){var v=parseFloat(r);var u=Math.min(v-p.from,p.to-v)*p.ratio;if(u>10){return p}if(isNaN(v)){v=h.fixValue(0)}if(isNaN(h.min)){p.from=(v-p.range/2).toFixed(2)}if(isNaN(h.max)){p.to=(v+p.range/2).toFixed(2)}if(h.min==0&&isNaN(h.max)){p.to=Math.max(p.to,v+p.range)}p.offset=p.from*p.ratio;p.range=p.to-p.from;p.ratio=p.scaleWidth/p.range;return p},pixelToUnits:function(u){return(u+p.offset)/p.ratio},setThumbPosition:function(){var v=parseFloat(r);if(isNaN(v)){v=h.fixValue(0)}if(!p.ratio){return}if(v<p.from||v>p.to){p.setThumbPosition();return}if(r==""){q.addClass("empty_value")}else{q.removeClass("empty_value")}var u=Math.round(v*p.ratio-p.offset);u=Math.max(u,0);u=Math.min(u,p.scaleWidth);jQuery(p.jbThumbElem).css("left",u-p.thumbWidth);jQuery(p.jbTextElem).html(h.sliderText(r,s))},keyDown:function(u){u=u||event;var w=String.fromCharCode(u.keyCode);if(u.keyCode==189){w="-"}if(w.match(/[\-0-9]/)){aa_first([p],g,"PopupEditor",aa_ctx(f,{Value:[w],Slider:[p],ControlElement:[p.jbThumbElem]}));return true}if(u.keyCode==46&&s.AllowEmptyValue){p.setValue(s,"");p.adjustScale(true)}if(w=="0"){p.setValue("0")}var v=parseFloat(r);if(isNaN(v)){v=0}if(u.keyCode==37||u.keyCode==39){if(u.keyCode==39){v+=h.step*(u.shiftKey?10:1)}else{v-=h.step*(u.shiftKey?10:1)}p.setValue(v);aa_stop_prop(u)}p.setThumbPosition();return true}});jQuery(p).addClass(aa_attach_global_css(o.Css));aa_defineElemProperties(p,"init");p.init=function(A,u,z){var y=this;y.jbScaleElem=this.getInnerElement(A);y.jbTextElem=this.getInnerElement(z);jQuery(y.jbTextElem).mousedown(function(){aa_first(l,g,"PopupEditor",aa_ctx(f,{Value:[r],Slider:[y],ControlElement:[y.jbThumbElem]}));return false});y.jbThumbElem=this.getInnerElement(u);y.jbThumbElem.tabIndex=1;jQuery(y.jbScaleElem).css("width",aa_text(l,g,"Width",f));jQuery(y.jbThumbElem).bind("mousedown",w);jQuery(y.jbThumbElem).bind("keydown",y.keyDown);aa_addOnAttach(y,function(){y.initSizes();y.adjustScale();y.setThumbPosition()});function w(B){if(aa_incapture){return true}y.initSizes();y.adjustScale();y.setThumbPosition();y.jbStartDragTime=new Date().getTime();y.jbSuspectClick=true;document.onmousemove=function(C){v(C)};document.onmouseup=function(C){y.dragEnd(C)};jQuery(y.jbThumbElem).focus();v(B);return false}function v(C){if(y.jbSuspectClick){if(new Date().getTime()-y.jbStartDragTime<100){return}y.jbSuspectClick=false}y.fromPixel=aa_absLeft(y.jbScaleElem);var D=aa_mousePos(C);D.x=Math.max(D.x,y.fromPixel);D.x=Math.min(D.x,y.toPixel);var B=D.x-y.fromPixel;y.setValue(y.pixelToUnits(B)).setThumbPosition()}y.dragEnd=function(B){document.onmouseup=null;document.onmousemove=null;if(!y.jbSuspectClick){y.setValue(r);y.adjustScale().setThumbPosition()}y.jbSuspectClick=false;jQuery(y.jbThumbElem).focus()}};aa_apply_style_js(p,s.SliderStyle);return q.get()}},SliderGroup:function(g,m,f){var b={isObject:true};var d=aa_int(m,g,"From",f);var l=aa_int(m,g,"To",f);var h=parseFloat(aa_text(m,g,"Step",f));var a=aa_bool(m,g,"KeepThumbsOrder",f);b.InitializeContainer=function(n,o){var p=o.vars._Cntr[0];p.createNewElement=function(s,w,v){var y=this;var u=aa_merge_ctx(f,v);var q=aa_first(s,g,"Style",u);var t=jQuery(q.Html);var z=aa_api_object(t,{data:s,cntr:y,from:aa_float(s,g,"From",u),to:aa_float(s,g,"To",u),step:aa_float(s,g,"Step",u),keepThumbsOrder:aa_bool(s,g,"KeepThumbsOrder",u),addThumbFields:function(){var A=ajaxart_field_getFields(y,"property sheet");for(var C=0;C<A.length;C++){var D=A[C];if(!D.ThumbControl){continue}var E=ajaxart_field_calc_field_data(D,s,u);var B=D.ThumbControl(E,u)[0];z.appendChild(B)}}});jQuery(z).addClass(aa_attach_global_css(q.Css)).addClass("aa_thumb_group");var r=aa_text(m,g,"Width",f);if(r){jQuery(z).css("width",r)}aa_addOnAttach(z,function(){z.fromPixel=aa_absLeft(z);z.toPixel=z.fromPixel+jQuery(z).width();z.ratio=(z.toPixel-z.fromPixel)/(z.to-z.from)});aa_apply_style_js(z,q);if(w){w.push(z)}return z}};return[b]},Thumb:function(b,d,a){var f=a.vars._Field[0];aa_field_handler(f,"ModifyControl",function(){},"resizer");ajaxart.runNativeHelper(d,b,"Fixes",a);f.GetThumbValue=function(l){var h=ajaxart.totext_array(ajaxart.run(l,b,"Value",a));var g=h.match(/([^0-9\.\-]*)([0-9\.\-]+)([^0-9\.\-]*)/);return parseFloat((g&&g[2])||"0")};f.SetThumbValue=function(l,p){var o=ajaxart.run(p,b,"Value",a);var n=ajaxart.totext_array(o);var g=n.match(/([^0-9\.\-]*)([0-9\.\-]+)([^0-9\.\-]*)/);var h=(g&&g[1])||aa_text(d,b,"Prefix",a);var m=(g&&g[3])||aa_text(d,b,"Suffix",a);ajaxart.writevalue(o,[l+g])};aa_field_handler(f,"ModifyControl",function(){},"resizer");f.ThumbControl=function(o,g){var n=f.GetThumbValue(o);var m=aa_first(o,b,"Style",aa_merge_ctx(a,g));var l=jQuery(m.Html);var h=aa_api_object(l,{setValue:function(q,p){h.value=n=q;h.setThumbPosition(n);f.SetThumbValue(n,o);if(f.RefreshOn=="every click"||p!="slide"){aa_invoke_field_handlers(f.OnUpdate,h,{},f,o)}},setThumbPosition:function(r){var q=h.group;if(!q||!q.ratio){return}var p=Math.round(r*q.ratio);p=Math.max(p,0);p=Math.min(p,jQuery(q).width());jQuery(h).css("left",p);if(h.ctrlElem){aa_empty(h.ctrlElem);ajaxart_field_createCellControl(q.data,q.cntr,h.ctrlElem,"control",f,o,g)}},pixelToUnits:function(p){try{var r=(p+slider.offset)/slider.ratio;return Math.round(r/slider.step)*slider.step}catch(q){}return 0},init:function(u,q){var r=this.getInnerElement(u)||h;h.ctrlElem=this.getInnerElement(q);jQuery(r).bind("mousedown",t);h.tabIndex=1;aa_addOnAttach(h,function(){h.group=jQuery(h).parents(".aa_thumb_group")[0];if(!h.group){ajaxart.log("Can not find thumb group (class aa_thumb_group)");return}h.value=n;h.setThumbPosition(n)});function t(v){if(aa_incapture){return true}ajaxart_disableSelection(document.body);document.onmousemove=function(w){s(w)};document.onmouseup=function(w){p(w)};h.focus();s(v);return false}function s(y){var w=h.group;var B=aa_mousePos(y);var A=w.fromPixel;var z=w.toPixel;if(w.keepThumbsOrder&&jQuery(h).prev()[0]){A=aa_absLeft(jQuery(h).prev()[0])}if(w.keepThumbsOrder&&jQuery(h).next()[0]){z=aa_absLeft(jQuery(h).next()[0])}B.x=Math.max(B.x,A);B.x=Math.min(B.x,z);var v=B.x-w.fromPixel;h.setValue(slider.pixelToUnits(v))}function p(v){document.onmouseup=null;document.onmousemove=null;h.setValue(n);h.focus();ajaxart_restoreSelection(document.body)}r.onkeydown=function(A){var z=h.group;A=A||event;if(A.keyCode==37||A.keyCode==39){if(A.keyCode==39){var v=n+z.step}else{var v=n-z.step}if(z.keepThumbsOrder){var y=jQuery(h).prev()[0];if(y&&y.value>v){return true}var w=jQuery(h).next()[0];if(w&&w.value<v){return true}}h.setValue(v)}return true}}});l.addClass(aa_attach_global_css(m.Css));l.css("position","absolute");aa_apply_style_js(h,m);return l.get()}}});function aa_thumb(f){jQuery(f.thumb).bind("mousedown",g);f.thumb.onkeydown=b;f.thumb.tabIndex=1;f.step=f.step||1;f.setThumbPosition=function(h){this.thumb.style.left=""+h+"px"};function g(h){if(aa_incapture){return true}f.jbStartDragTime=new Date().getTime();f.jbSuspectClick=true;jQuery(f.thumb).addClass("dragged");document.onmousemove=function(l){d(l)};document.onmouseup=function(l){a(l)};jQuery(f.thumb).focus();d(h);return false}function d(m){if(f.jbSuspectClick){if(new Date().getTime()-f.jbStartDragTime<100){return}f.jbSuspectClick=false}var h=aa_absLeft(f.scale);var l=aa_absLeft(f.scale)+jQuery(f.scale).width();var o=aa_mousePos(m);o.x=Math.max(o.x,h);o.x=Math.min(o.x,l);var n=Math.floor((o.x-h)/f.step)*f.step;f.setThumbPosition(n);f.onDrag&&f.onDrag(n)}function b(h){h=h||event;var l=parseInt(f.thumb.style.left.match(/[0-9]*/)[0]);if(h.keyCode==37||h.keyCode==39){if(h.keyCode==39){l+=(h.shiftKey?f.step*10:f.step)}else{l-=(h.shiftKey?f.step*10:f.step)}f.setThumbPosition(l);f.onDrag&&f.onDrag(l);ajaxart_stop_event_propogation(h)}return true}function a(h){document.onmouseup=null;document.onmousemove=null;f.jbSuspectClick=false;jQuery(f.thumb).removeClass("dragged");jQuery(f.thumb).focus()}}function aa_jbart_slider(g,a){var d=aa_get_first_unit(g.units);d.field=g.field;if(!d){ajaxart.log("slider - no units defined for slider");return}var f=d.numericValue([g.value]);var b=g.slider={scaleElem:a.scaleElement,textElem:a.textElement,thumbElem:a.thumbElement,inputElem:a.inputElement,init:function(){var m=this;jQuery(m.textElem).mousedown(function(){jQuery(m.inputElem).show().focus();return false});m.thumbElem.tabIndex=1;jQuery(m.scaleElem).css("width",m.width);jQuery(m.thumbElem).bind("mousedown",l);jQuery(m.thumbElem).bind("keydown",m.keyDown);jQuery(m.inputElem).bind("keydown",m.inputKeyDown).bind("blur",m.setInputValue).hide();aa_addOnAttach(a.$el[0],function(){m.initSizes();m.adjustScale();m.setThumbPosition()});function l(n){if(aa_incapture){return true}m.initSizes();m.adjustScale();m.setThumbPosition();m.startDragTime=new Date().getTime();m.suspectClick=true;document.onmousemove=function(o){h(o)};document.onmouseup=function(o){m.dragEnd(o)};jQuery(m.thumbElem).focus();h(n);return false}function h(o){if(m.suspectClick){if(new Date().getTime()-m.startDragTime<100){return}m.suspectClick=false}m.fromPixel=aa_absLeft(m.scaleElem);var p=aa_mousePos(o);p.x=Math.max(p.x,m.fromPixel);p.x=Math.min(p.x,m.toPixel);var n=p.x-m.fromPixel;m.setValue(m.pixelToUnits(n)).setThumbPosition()}m.dragEnd=function(n){document.onmouseup=null;document.onmousemove=null;if(!m.suspectClick){m.setValue(f);m.adjustScale().setThumbPosition()}m.suspectClick=false;jQuery(m.thumbElem).focus()}},initSizes:function(){b.scaleWidth=jQuery(b.scaleElem).width();b.fromPixel=aa_absLeft(b.scaleElem);b.toPixel=b.fromPixel+b.scaleWidth;b.center=Math.round(b.fromPixel+b.scaleWidth/2);if(!isNaN(d.min)){b.from=d.min}if(!isNaN(d.max)){b.to=d.max}if(!isNaN(d.initialPixelsPerUnit)){b.ratio=b.ratio||d.initialPixelsPerUnit}if(!b.ratio&&b.from!=null&&b.to!=null){b.ratio=b.scaleWidth/(b.to-b.from)}if(!b.ratio){b.ratio=1/d.step}if(b.from!=null&&b.to!=null){b.range=b.to-b.from}else{b.range=b.scaleWidth/b.ratio}if(b.from!=null){b.offset=b.from*b.ratio}b.thumbWidth=Math.round(jQuery(b.thumbElem).outerWidth()/2)},setValue:function(m,l){f=""+d.applyRangeAndResolution(m);var h=d.dataFormat(f);g.onchange(h);return b},adjustScale:function(){var l=parseFloat(f);var h=Math.min(l-b.from,b.to-l)*b.ratio;if(h>10){return b}if(isNaN(l)){l=d.applyRangeAndResolution(0)}if(isNaN(d.min)){b.from=d.applyRangeAndResolution(l-b.range/2)}if(isNaN(d.max)){b.to=d.applyRangeAndResolution(l+b.range/2)}if(d.min==0&&isNaN(d.max)){b.to=Math.max(b.to,l+b.range)}b.offset=b.from*b.ratio;b.range=b.to-b.from;if(b.range){b.ratio=b.scaleWidth/b.range}return b},pixelToUnits:function(h){return(h+b.offset)/b.ratio},setThumbPosition:function(){var l=parseFloat(f);if(isNaN(l)){l=d.applyRangeAndResolution(0)}if(!b.ratio){return}if(l<b.from||l>b.to){b.setThumbPosition();return}if(f==""){a.$el.addClass("empty_value")}else{a.$el.removeClass("empty_value")}var h=Math.round(l*b.ratio-b.offset);h=Math.max(h,0);h=Math.min(h,b.scaleWidth);jQuery(b.thumbElem).css("left",h-b.thumbWidth);jQuery(b.textElem).html(d.displayFormat(f))},keyDown:function(h){h=h||event;var m=String.fromCharCode(h.keyCode);if(h.keyCode==189){m="-"}if(m.match(/[\-0-9]/)){jQuery(b.inputElem).show().focus();return true}if(h.keyCode==46&&g.allowEmptyValue){b.setValue("");b.adjustScale(true)}if(m=="0"){b.setValue("0")}var l=parseFloat(f);if(isNaN(l)){l=0}if(h.keyCode==37||h.keyCode==39){if(h.keyCode==39){l+=d.step*(h.shiftKey?10:1)}else{l-=d.step*(h.shiftKey?10:1)}b.setValue(l);aa_stop_prop(h)}b.setThumbPosition();return true},setInputValue:function(){b.setValue(b.inputElem.value);b.adjustScale();b.setThumbPosition();jQuery(b.inputElem).hide()},inputKeyDown:function(h){h=h||event;if(h.keyCode==13){b.setInputValue()}return true}};b.init()}ajaxart.gcs.formula={CalcCells:function(f,h,b){var p=ajaxart.run(h,f,"Cells",b);var g="<cells>";var d=b;for(var l=0;l<p.length;l++){var o=p[l];if(!ajaxart.isxml(o)){continue}var a=o.getAttribute("id");if(a==null||a==""){continue}var n="";var m=o.getAttribute("manualValue");if(m!=null&&m.length>0){n=m}else{n=aa_text([],o,"formula",d)}d.vars[a]=[n];g+='<cell id="'+a+'" value="'+n+'"/>'}g+="</cells>";return[ajaxart.parsexml(g)]}};aa_gcs("googledocs",{GoogleSpreadsheet:function(d,f,b){var a={isObject:true};a.Retrieve=function(g,h){var l=aa_totext(ajaxart.runNativeHelper(f,d,"Url",b));if(!window.google){window.google={}}if(!google.visualization){google.visualization={}}if(!google.visualization.Query){google.visualization.Query={}}google.visualization.Query.setResponse=function(m){var o=ajaxart.parsexml("<xml/>");if(m.table&&m.table.rows){for(var p=0;p<m.table.rows.length;p++){var r=m.table.rows[p];var q=o.ownerDocument.createElement("item");if(r.c){for(var n=0;n<r.c.length;n++){if(r.c[n].v){q.setAttribute("c"+(n+1),r.c[n].v)}}}o.appendChild(q)}}ajaxart_async_CallBack([o],h)};ajaxart_async_Mark(h);jQuery.ajax({cache:false,url:l,dataType:"script"})};a.Save=function(){alert("Saving to google spreadsheet is not implemented yet")};return[a]}});aa_gcs("inteliChoice",{jBartStudioAccumulator:function(b,d,a){jBart.bind(jBart,"userChoice",function(f){aa_TriggerUserChoice(f.selection,f.target,f.fieldId,f.fieldXtml,f.context)})},TriggerUserChoice:function(b,d,a){jBart.trigger(jBart,"userChoice",{selection:aa_first(d,b,"Selection",a),target:aa_first(d,b,"Target",a),fieldId:aa_text(d,b,"FieldId",a),fieldXtml:aa_first(d,b,"FieldXtml",a),context:a})},TrackGoogleAnalyticsEvent:function(b,d,a){if(!window._gaq){return}_gaq.push(["_trackEvent",aa_text(d,b,"EventCategory",a),aa_text(d,b,"EventAction",a),aa_text(d,b,"EventLabel",a)])}});if(window.jBartStudio){ajaxart.gcs.inteliChoice.jBartStudioAccumulator()}function aa_initjBartStudioGA(){if(window._gaq){return}_gaq=window._gaq||[];_gaq.push(["_setAccount","UA-37216601-1"]);_gaq.push(["_setDomainName","none"]);_gaq.push(["_setAllowLinker",true]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})()}function aa_TriggerUserChoice(o,n,l,a,b){if(window.location.href.indexOf("runtests.html")>-1){return}function m(s,u){if(!s||!s.nodeType){return""}if(s.nodeType==2){return m(s.parentNode)+"/"+s.nodeName}var q=[s].concat($(s).parents().get());var r=$(q).map(function(){var w="";for(var v=0;v<u.length;v++){w+=$(this).attr(u[v])?u[v]+"="+$(this).attr(u[v])+"/":""}return w});var t=$(r).filter(function(){return this}).get().join("/");return t.replace(/\/+/g,"/")}if(!o){return}var p=n?m(n,["id","ID","Id","t"]):"";if(!a&&b.vars._Input){if(o.parentNode==null||o.parentNode.tagName=="tmp"){var g=$(b.vars._Input).parents().filter(function(){return this.ItemData&&this.ItemData[0]&&this.ItemData[0].parentNode})[0];if(g&&g.ItemData&&g.ItemData[0]){a=g.ItemData[0]}}}var f=a?m(a,["id","ID","Id","t"]):"";var d=new Date().getTime();var o=ajaxart.totext(o);var h='<userChoice selection="{selection}" field="{field}" data_path="{path}" field_path="{field_path}" time="{time}"/>'.replace(/{selection}/,o).replace(/{path}/,p).replace(/{field}/,l).replace(/{field_path}/,f).replace(/{time}/,d);aa_initjBartStudioGA();_gaq.push(["_setCustomVar",1,"selection",o]);_gaq.push(["_setCustomVar",2,"path",p]);_gaq.push(["_setCustomVar",3,"field",l]);_gaq.push(["_setCustomVar",4,"field path",f]);_gaq.push(["_trackEvent","jBart Choice",l,o])}function aa_dragAndDropTableColumns(p,g){g=aa_extend({draggedSpaceCssClass:"aa1_dragged_space_elem",draggedCssClass:"aa1_dragged_elem",onDrop:function(){},rtl:false},g);var l=jQuery(p).find(">thead")[0];if(!l||p.jbDragAndDropColsInitialized){return}p.jbDragAndDropColsInitialized=true;aa_registerTableHeaderEvent(l,"mousedown",h,"TableColumnsDragAndDrop","no dominant");aa_registerTableHeaderEvent(l,"mousemove",a,"TableColumnsDragAndDrop","suspect");aa_registerTableHeaderEvent(l,"mouseup",q,"TableColumnsDragAndDrop","suspect");aa_registerTableHeaderEvent(l,"mouseout",q,"TableColumnsDragAndDrop","suspect");aa_registerTableHeaderEvent(l,"mousemove",f,"TableColumnsDragAndDrop","dominant");var d=!g.rtl;var m=!d;function f(I,H,u){var w=aa_mousePos(I);var A=H.draggedElem;if(!A){return true}A.style.left=(w.x-A.mouseX)+"px";var v=aa_absLeft(H.spaceElem);var K=d?-1:5000;if(jQuery(H.spaceElem).next().length>0){var D=jQuery(H.spaceElem).next()[0];K=aa_absLeft(D)+d*D.offsetWidth}var t=d?-1:5000;if(jQuery(H.spaceElem).prev().length>0){var C=jQuery(H.spaceElem).prev()[0];t=aa_absLeft(C)+m*C.offsetWidth}var J=aa_absLeft(H.draggedElem)+m*(H.draggedElem.offsetWidth+H.draggedElem.mouseX);var s=aa_absLeft(H.draggedElem)+d*(H.draggedElem.offsetWidth+H.draggedElem.mouseX);var E=K<s+5;if(m){E=!E}var z=t>J-5;if(m){z=!z}var y=jQuery(p).find(">tbody>tr").get();if(E){if(H.spaceElem.nextSibling.nextSibling){var B=n(H.spaceElem);for(var F=0;F<y.length;F++){var r=y[F];var G=jQuery(r).find(">td");jQuery(G[B]).insertAfter(G[B+1])}jQuery(H.spaceElem).insertAfter(H.spaceElem.nextSibling);H.jbDropColumnIndex=B+1}}if(z){if(H.spaceElem.previousSibling){var B=n(H.spaceElem);for(var F=0;F<y.length;F++){var r=y[F];var G=jQuery(r).find(">td");r.insertBefore(G[B],G[B-1])}jQuery(H.spaceElem).insertBefore(H.spaceElem.previousSibling);H.jbDropColumnIndex=B-1}}return aa_stop_prop(I)}function b(r){jQuery(l.spaceElem).removeClass(g.draggedSpaceCssClass);l.draggedParent.removeChild(l.draggedElem);document.onmouseup=l.origDocMouseup;l.draggedElem=null;l.Suspect=null;l.Owner=null;if(l.jbDropColumnIndex!=-1){g.onDrop(l.jbDragColumnIndex,l.jbDropColumnIndex)}return aa_stop_prop(r)}function h(t,s,r){s.Suspect={owner:"TableColumnsDragAndDrop",mousePos:aa_mousePos(t)};return aa_stop_prop(t)}function a(u,t,s){var r=aa_mousePos(u);if(t.Suspect){var v=Math.abs(r.x-t.Suspect.mousePos.x);if(v<5){return true}t.Suspect=null;o(u,t,s)}}function q(t,s,r){if(s.Owner=="TableColumnsDragAndDrop"){return true}s.Suspect=null;return true}function o(v,u,t){ajaxart_disableSelection(u);u.Owner="TableColumnsDragAndDrop";var r=aa_absLeft(t,false);var y=aa_absTop(t,false);var w=u.draggedElem=t.cloneNode(true);u.draggedParent=t.parentNode;u.draggedParent.appendChild(w);u.spaceElem=t;jQuery(w).addClass(g.draggedCssClass);jQuery(u.spaceElem).addClass(g.draggedSpaceCssClass);u.jbDragColumnIndex=n(t);u.jbDropColumnIndex=-1;var s=aa_mousePos(v);w.mouseX=s.x-r;jQuery(w).css("position","absolute").css("top",y+"px").css("left",r+"px");u.origDocMouseup=document.onmouseup;document.onmouseup=b;if(v.preventDefault){v.preventDefault()}return aa_stop_prop(v)}function n(u){var t=u.parentNode;var s=0;for(var r=t.firstChild;r;r=r.nextSibling){if(r==u){return s}if(r.tagName.toLowerCase()=="th"){s++}}}}function aa_registerTableHeaderEvent(f,b,d,a,g){if(f.EventHandler==null){aa_defineElemProperties(f,"handlers,EventHandler");f.handlers=[];f.EventHandler=function(p){var o=jQuery((typeof(event)=="undefined")?p.target:(event.tDebug||event.srcElement));p=p||event;if(o[0].tagName.toLowerCase()=="th"){var n=o}else{var n=o.parents("th")}if(n.length==0){return true}if(p.type=="mousedown"){f.LastMouseDown={th:n[0]}}if(p.type=="mouseout"){f.LastMouseDown=null}for(var h=0;h<f.handlers.length;h++){var m=f.handlers[h];if(m.eventType!=p.type){continue}if(p.button==2){if(m.activation_mode=="right mouse"){m.func(p,f,n[0])}}else{var l=(m.activation_mode=="no dominant"&&f.Owner==null)||(m.activation_mode=="suspect"&&f.Suspect!=null&&f.Owner==null)||(m.activation_mode=="dominant"&&f.Owner==m.ownerId);if(l){m.func(p,f,n[0])}}}};f.onmousedown=f.onmouseout=f.onmouseup=f.onmousemove=f.EventHandler}f.handlers.push({eventType:b,func:d,ownerId:a,activation_mode:g})}function aa_dragDropItems(w){var v=w.parent;var y=v.tagName.toLowerCase()=="tbody";var d=v;var h=null,z=null,A="",l=null,f=null;var n=null,b=null,t=null;ajaxart.ui.bindEvent(v,"mousedown",r);ajaxart.ui.bindEvent(v,"mouseup",o);function u(B,D,C){return(B.offsetTop<D&&B.offsetLeft<C&&B.offsetTop+B.offsetHeight>D&&B.offsetLeft+B.offsetWidth>C)}function a(D,C){for(var B=v.firstChild;B;B=B.nextSibling){if(u(B,D,C)&&w.isItemElement(B)){return B}}}function g(B,D,C){return((D<=B&&B<=C)||(C<=B&&B<=D))}function p(C,B){for(var D=v.firstChild;D;D=D.nextSibling){if(!w.isItemElement(D)){continue}if(D==C||D==B){return null}if(g(D.offsetTop,C.offsetTop,B.offsetTop)&&g(D.offsetLeft,C.offsetLeft,B.offsetLeft)){return D}}}function s(H){var C=d;var I=aa_mousePos(H,true);var J=I.y-aa_absTop(C);var K=I.x-aa_absLeft(C);var G=aa_absTop(C);if(l){var B=Math.abs(I.y-l.mousePos.y)+Math.abs(I.x-l.mousePos.x);if(B<5){return aa_stop_prop(H)}var D=a(J,K);if(!D){o()}else{m(D,H)}l=null;return true}if(!h){return true}var D=a(J,K);h.style.top=(J-G-h.initialMouseOffset.top)+"px";h.style.left=(K-h.initialMouseOffset.left)+"px";if(y){h.style.left=aa_absLeft(v)+"px"}if(D==z){return aa_stop_prop(H)}var L=D;if(!L){return aa_stop_prop(H)}while(true){var F=p(L,z);if(!F){break}L=F}if(y){if(L.nextSibling&&L!=v.firstChild){v.insertBefore(z,L.nextSibling)}else{v.insertBefore(z,L)}}else{var E=3;if(L.offsetLeft<=z.offsetLeft&&L.offsetLeft+E>h.offsetLeft){v.insertBefore(z,L)}else{if(L.offsetLeft>=z.offsetLeft&&L.offsetLeft+L.offsetWidth-E>h.offsetLeft&&L.nextSibling){v.insertBefore(z,L.nextSibling)}}}return aa_stop_prop(H)}function q(E,D){v.removeChild(h);if(!D){jQuery(z).replaceWith(f)}else{v.removeChild(z)}f.style.display="";f.display="";v.onmousemove=n;v.style.position=b;document.onkeydown=t;document.onmouseup=null;h=null;var B=null;for(var C=f.nextSibling;C;C=C.nextSibling){if(w.isItemElement(C)){B=C;break}}try{if(B){w.moveBefore(f,B)}else{w.moveToEnd(f)}}catch(E){ajaxart.logException(E,"Could not complete drag and drop in the model")}A="";return aa_stop_prop(E)}function m(J,F){ajaxart_disableSelection(v);A="DragAndDropItems";var H=aa_absLeft(J);var G=aa_absTop(J);var B=d;var E=aa_absTop(B);h=J.cloneNode(true);f=J;v.appendChild(h);z=J.cloneNode(true);v.insertBefore(z,f);f.style.display="none";f.display="none";jQuery(h).addClass(w.draggedCssClass);jQuery(z).addClass(w.draggedSpaceCssClass);if(y){var C=jQuery(h).find(">td");for(var D=0;D<C.length;D++){jQuery(C[D]).width(jQuery(C[D]).width())}}h.style.position="absolute";var I=l.mousePos;h.initialMouseOffset={top:I.y-G-E,left:I.x-H};h.style.left=H+"px";h.style.top=(G-E)+"px";document.onmouseup=q;t=document.onkeydown;document.onkeydown=function(K){if(K.keyCode==27){q(K,true)}return true};return aa_stop_prop(F)}function r(B){if(A!=""){return true}if(w.canStartDrag&&!w.canStartDrag(B.clientX,B.clientY)){return}d=v.tagName.toLowerCase()=="div"?v:jQuery(v).closest("div")[0];b=d.style.position;d.style.position="relative";l={mousePos:aa_mousePos(B,true),time:new Date().getTime()};n=v.onmousemove;v.onmousemove=s;return true}function o(B){if(A!=""){return true}ajaxart_restoreSelection(v);if(l){l=null;v.onmousemove=n;d.style.position=b}return true}}function aa_dragAndDropPane(f){var d=f.element;var a=jQuery(f.element);a.css("oveflow","hidden").css("width",f.baseSize+"px");d.onmousedown=function(g){b();d.jbDragging=true;d.jbDragStartX=g.pageX;d.jbDragStartWidth=a.width();a.find("img").bind("dragstart",function(h){h.preventDefault()})};d.onmouseup=function(g){d.jbDragging=false};d.onmousemove=function(n){if(!d.jbDragging){return}var g=n.pageX;var h=d.jbDragStartX-g;var l=d.jbDragStartWidth+h;var m=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);a.width(l).css("left",m-l+"px")};function b(){if(d.jbMadePositionAsbolute){return}d.jbMadePositionAsbolute=true;var g=aa_absLeft(d);a.css("position","absolute").css("left",g)}}aa_gcs("itemlist",{XmlItems:function(h,l,f){var g=aa_first(l,h,"ParentXml",f);if(!g){return[]}var a=aa_text(l,h,"Tag",f);var b=aa_xpath(g,a);if(aa_paramExists(h,"Filter")){var m=[];for(var d=0;d<b.length;d++){if(aa_bool([b[d]],h,"Filter",f)){m.push(b[d])}}b=m}b.onAddItem=function(n){if(n.nodeType==1){g.appendChild(n)}else{ajaxart.log("trying to add non xml item to XmlItems","error")}};b.MoveBefore=function(o,n){g.insertBefore(o,n);ajaxart.xml.xml_changed(g)};b.MoveToEnd=function(n){g.appendChild(n);ajaxart.xml.xml_changed(g)};return b}});aa_gcs("field",{ItemList:function(d,f,b){var g={Title:aa_multilang_text(f,d,"Title",b),FieldData:function(h){return h},IsItemList:true};g.Id=aa_text(f,d,"ID",b);g.ID=[g.Id];g.SectionStyle=aa_first(f,d,"SectionStyle",b);var a=aa_ctx(b,{_Field:[g]});g.View=aa_first(f,d,"View",a);g.Control=function(l,m){var h=aa_ctx(m,{});jBart.trigger(g,"ModifyInstanceContext",{Context:h,FieldData:l});var n=(g.View&&g.View.IsTriplet);var o=aa_ItemList(g,h,l);o.Fields=ajaxart.runsubprofiles(f,d,"Field",aa_merge_ctx(b,h));o.VisibleFields=[];for(var p=0;p<o.Fields.length;p++){if(o.Fields[p].CalculatedOnly){o.Fields[p].Calculate(l,h)}if(o.Fields[p].IsFieldHidden&&o.Fields[p].IsFieldHidden(l,m)){continue}o.VisibleFields.push(o.Fields[p])}jBart.trigger(g,"InnerFields",{Context:h,FieldData:l,Fields:o.VisibleFields});if(n){o.SetHtmlTemplate(g.View.Html);aa_apply_style_js(o,g.View);o.jControl.addClass(aa_attach_global_css(g.View.Css))}jBart.trigger(g,"initItemList",o);o.Refresh();o.jControl[0].jbContext=h;if(g.SectionStyle){return[aa_wrapWithSection(o.jControl[0],g,g.SectionStyle,l,m)]}return o.jControl.get()};ajaxart.runsubprofiles(f,d,"FieldAspect",a);return[g]},DragAndDropItemsHandle:function(b,d,a){var f={Id:aa_text(d,b,"ID",a),Title:aa_multilang_text(d,b,"Title",a),Style:aa_first(d,b,"Style",a)};f.ID=[f.Id];f.Control=function(p,l){if(l.vars.ItemList){if(l.vars.ItemList&&!l.vars.ItemList[0].DragAndDropInitiated){l.vars.ItemList[0].DragAndDropInitiated=true;var n=l.vars.ItemList[0];var h=aa_attach_global_css(aa_text(d,b,"CssForDraggedElement",a),null,"draggedItem");var o=aa_attach_global_css(aa_text(d,b,"CssForDraggedSpace",a),null,"draggedItemSpace");var m=n.itemlistCntr.Items;if(!m.MoveBefore){ajaxart.log("DragAndDropItemsHandle : itemlist does not support moving items","error");return[document.createElement("div")]}aa_dragDropItems({parent:n.ParentOfItems,isItemElement:function(q){return q.Item!=null},moveBefore:function(r,q){m.MoveBefore(r.Item[0],q.Item[0])},moveToEnd:function(q){m.MoveToEnd(q.Item[0])},draggedSpaceCssClass:o,draggedCssClass:h,canStartDrag:function(r,q){var s=document.elementFromPoint(r,q);if(jQuery(s).hasClass("fld_"+f.Id)){return true}else{if(jQuery(s).parents(".fld_"+f.Id).length&&jQuery(s).parents(".fld_"+f.Id).parents().is(n.Ctrl)){return true}else{return false}}}})}}if(l.vars.ItemList[0].itemlistCntr.Items.MoveBefore){var g=aa_merge_ctx(a,l);return[aa_renderStyleObject(f.Style,{},g,true)]}else{return[document.createElement("div")]}};ajaxart.runsubprofiles(d,b,"FieldAspect",aa_ctx(a,{_Field:[f]}));return[f]}});aa_gcs("field_aspect",{ItemListContainer:function(b,d,a){var f=a.vars._Field[0];jBart.bind(f,"ModifyInstanceContext",function(h){var g=ajaxart.run(h.FieldData,b,"Items",a);h.Context.vars.ItemListCntr=[aa_itemlistContainer(g,f.Id)];jBart.trigger(f,"initItemlistCntr",h.Context.vars.ItemListCntr[0])});f.hasItemlistContainer=true},CustomizeTableHeader:function(d,f,b){var g=b.vars._Field[0];var a=aa_attach_global_css(aa_text(f,d,"Css",b),null,g.Id+"_header");var h=aa_int(f,d,"ColSpan",b);jBart.bind(g,"ModifyTableHeader",function(l){jQuery(l.th).addClass(a);if(h){jQuery(l.th).attr("colspan",h)}},"CustomizeTableHeader")},ShowOnlyOnItemHover:function(d,f,b){var h=b.vars._Field[0];var a=aa_text(f,d,"Css",b);var g=".fld_"+h.Id;if(g.indexOf(" ")>-1){ajaxart.log("field must have a valid id "+h.Id,"error")}jBart.bind(h,"ModifyControl",function(n){var o=n.Context.vars.ItemListCntr[0].Id;var m=".fld_"+o+" .aa_item";var l=a.replace(/#item/g,m).replace(/#this/g,g);if(!window.aa_container_styles){window.aa_container_styles={}}if(!aa_container_styles[l]){var p=jQuery("<style>"+l+"</style>")[0];document.getElementsByTagName("head")[0].appendChild(p);aa_container_styles[l]={globalcss:l}}},"ShowOnlyOnItemHover")}});aa_gcs("itemlist_aspect",{ItemSelection:function(g,h,d){var b=aa_attach_global_css(aa_text(h,g,"Css",d),null,"selected")+" aa_selected";var l=aa_text(h,g,"MouseSupport",d);var f=aa_bool(h,g,"AlwaysOneSelected",d);var a=aa_paramExists(g,"SelectedByDefault");jBart.bind(d.vars._Field[0],"initItemList",function(n){var p=n.itemlistCntr;p.SetNewSelected=function(r){var s=p.SelectedElement;if(s==r){return}p.SelectedElement=r;var q={PrevSelectedElem:s,PrevSelectedItem:s&&s.Item,SelectedElem:p.SelectedElement,SelectedItem:p.SelectedElement&&p.SelectedElement.Item};p.trigger("showSelection",q);p.trigger("selectionChanged",q)};p.bind("showSelection",function(q){if(q.PrevSelectedElem){jQuery(q.PrevSelectedElem).removeClass(b)}jQuery(q.SelectedElem).addClass(b)},"ItemSelection");p.SelectionKeyDown=function(q){p.trigger("selectionKeyDown",q)};p.bind("selectionKeyDown",function(y){var w=p.SelectedElement;var r=y.keyCode==40,v=y.keyCode==38;var u=n.GetElements();var s=-1;for(var t=0;t<u.length;t++){if(u[t]==w){s=t;break}}var q=u[0];if(r&&s+1<u.length){q=u[s+1]}if(v&&s-1>=0){q=u[s-1]}p.SetNewSelected(q)},"ItemSelection");if(aa_paramExists(g,"OnSelect",true)){p.bind("selectionChanged",function(r){var s=r.SelectedItem;var q=aa_ctx(n.Context,{ControlElement:r.SelectedElem});ajaxart.run(s,g,"OnSelect",aa_merge_ctx(d,q))},"ItemSelection")}if(l!="none"){n.bind("itemElement",function(r){var q="mousedown";if(l=="mouse click"){q="click"}if(l=="mouse hover"){q="mouseover"}jQuery(r).bind(q,function(){p.SetNewSelected(r)})},"ItemSelection")}function o(){if(p.SelectedElement){return}var q=n.GetElements();if(q[0]){p.SetNewSelected(q[0])}}function m(){var s=aa_first(p.Items,g,"SelectedByDefault",d);var r=n.GetElements();for(var q=0;q<r.length;q++){if(r[q].Item[0]==s){p.SetNewSelected(r[q]);return}}}n.bind("refresh",function(){p.SelectedElement=null;if(a){m()}if(f){o()}});n.bind("refreshItemElement",function(q){if(p.SelectedElement==q.PreviousElement){p.SetNewSelected(q.NewElement)}});if(f){p.bind("afterItemDeleted",function(q){if(q.ItemElement==p.SelectedElement){p.SelectedElement=null;o()}},"ItemSelection");p.bind("afterItemAdded",function(q){if(!p.SelectedElement){o()}},"ItemSelection")}},"ItemSelection")},UpdateOnAddOrDeleteItem:function(b,d,a){jBart.bind(a.vars._Field[0],"initItemList",function(f){ItemListCntr=f.itemlistCntr;ItemListCntr.bind("itemDeleted",function(g){f.ParentOfItems.removeChild(g.ItemElement)},"UpdateOnAddOrDeleteItem");ItemListCntr.bind("itemAdded",function(g){var h=f.ElementOfItem(g.Item);g.ItemElement=h;f.AppendItemElement(h);aa_ensure_visible(h)},"UpdateOnAddOrDeleteItem")},"UpdateOnAddOrDeleteItem")},RefreshOnItemsChange:function(b,d,a){var f=a.vars._Field[0];aa_field_handler(f,"ModifyControl",function(g,o,l,h,m){if(!h.vars.ItemListCntr){return}var n=h.vars.ItemListCntr[0];n.bind("itemsChanged",function(){aa_refresh_cell(g,h)},"RefreshOnItemsChange"+f.Id)},"RefreshOnItemsChange")},CssForItem:function(d,f,b){var a=aa_attach_global_css(aa_text(f,d,"Css",b),null,"item");jBart.bind(b.vars._Field[0],"initItemList",function(g){g.bind("itemElement",function(h){if(aa_bool(h.Item,d,"ConditionOnItem",b)){jQuery(h).addClass(a)}})})},ItemClick:function(b,d,a){jBart.bind(a.vars._Field[0],"initItemList",function(f){f.bind("itemElement",function(g){jQuery(g).click(function(){ajaxart.run(g.Item,b,"OnClick",aa_ctx(a,{ControlElement:[g]}))})},"ItemClick")},"ItemClick")},RefreshOnSelectionChange:function(d,g,b){var h=b.vars._Field[0];var f=aa_first(g,d,"Animation",b);var a=aa_bool(g,d,"HideWhenNoSelection",b);if(aa_bool(g,d,"SelectedItemAsData",b)){h.FieldData=function(l,m){return m.vars.SelectedItem||[]}}aa_field_handler(h,"ModifyControl",function(l,r,o,m,p){if(!m.vars.ItemListCntr){return}var q=m.vars.ItemListCntr[0];function n(y){var u=q.SelectedElement?[q.SelectedElement]:[];var t=q.SelectedElement?q.SelectedElement.Item:[];var s=aa_ctx(h.XtmlSource[0].context,{SelectedElement:u,SelectedItem:t,ItemListCntr:[q]});var w=aa_first(h.XtmlSource[0].input,h.XtmlSource[0].script,"",s);l.Field=w;var v=y?null:f;aa_refresh_cell(l,s,v);if(a&&!u&&l.firstChild){jQuery(l.firstChild).css("display","none")}}q.bind("selectionChanged",function(){n()},"SelectionContext_"+h.Id);if(q.SelectedElement){if(!b.vars.SelectedElement||b.vars.SelectedElement[0]!=q.SelectedElement){n(true)}}else{if(a&&l.firstChild){jQuery(l.firstChild).css("display","none")}}},"RefreshOnSelectionChange")},Filter:function(b,g,a){var h=a.vars._Field[0];h.FieldData=function(l,m){return aa_xpath(l[0],"@"+h.Id,true)};h.FilterData=function(l,m){return ajaxart.run(l,b,"FieldData",a)};h.InitFilter=function(m){aa_initContainerFilters(m);if(m.Filters[h.Id]){return}var l={Id:h.Id,FieldData:function(n){return ajaxart.run([n],b,"FieldData",a)},FilterType:aa_first(g,b,"FilterType",a)};m.AddFilter(l)};aa_field_handler(h,"ModifyControl",function(q,p,m,l,n){if(!l.vars.ItemListCntr){return}var o=l.vars.ItemListCntr[0];q.jbItemListCntr=o;q.jbQueryXml=l.vars._ItemListQueryXml[0];h.InitFilter(o)},"Filter");if(aa_bool(g,b,"FilterOnChange",a)){aa_field_handler(h,"OnUpdate",function(p,q,n,o,m){var l=n.parentNode;if(aa_intest){d(l)}else{if(l.jbItemListCntr.filterTimeoutID){clearTimeout(l.jbItemListCntr.filterTimeoutID)}l.jbItemListCntr.filterTimeoutID=setTimeout(function(){d(l)},200)}},"Filter")}if(a.vars.ItemListCntr){var f=a.vars.ItemListCntr[0].Items[0];if(f){ajaxart.run([f],b,"FieldData",a)}}function d(l){l.jbItemListCntr.RunQuery(l.jbQueryXml)}},TableColumnDragAndDrop:function(d,f,b){var h=b.vars._Field[0];var a=aa_attach_global_css(aa_text(f,d,"CssForDraggedElement",b),null,"draggedColumn");var g=aa_attach_global_css(aa_text(f,d,"CssForDraggedSpace",b),null,"draggedColumnSpace");jBart.bind(h,"initItemList",function(l){var n=jQuery(l.Ctrl).find("table")[0];if(!n&&l.Ctrl.tagName.toLowerCase()=="table"){n=l.Ctrl}if(!n){return}var o=false;var m=[];aa_dragAndDropTableColumns(n,{draggedSpaceCssClass:g,draggedCssClass:a,onDrop:function(t,q){o=true;var s=Math.max(t,q);if(m.length<s){for(var r=m.length;r<=s;r++){m[r]=r}}var p=m[q];m[q]=m[t];m[t]=p}});l.bind("itemElement",function(s){if(!o){return}var t=jQuery(s).find(">td");for(var q=0;q<t.length;q++){var p=(q<m.length)?m[q]:q;var r=t[p];s.appendChild(r)}})},"TableColumnDragAndDrop")},DragAndDropItems:function(d,f,b){var h=b.vars._Field[0];var a=aa_attach_global_css(aa_text(f,d,"CssForDraggedElement",b),null,"draggedItem");var g=aa_attach_global_css(aa_text(f,d,"CssForDraggedSpace",b),null,"draggedItemSpace");jBart.bind(h,"initItemList",function(m){var l=m.itemlistCntr.Items;if(!l.MoveBefore){return}aa_dragDropItems({parent:m.ParentOfItems,isItemElement:function(n){return n.Item!=null},moveBefore:function(o,n){l.MoveBefore(o.Item[0],n.Item[0])},moveToEnd:function(n){l.MoveToEnd(n.Item[0])},draggedSpaceCssClass:g,draggedCssClass:a})})},LongList:function(f,g,b){var l=b.vars._Field[0];var d=aa_first(g,f,"Style",b);var a=aa_int(g,f,"MaxTimeToRenderItems",b);var h=aa_multilang_text(g,f,"TextForShowMore",b);jBart.bind(l,"initItemList",function(m){m.ShowItems=function(q){if(m.ShowMoreItems){m.ShowMoreItems.detach();m.ShowMoreItems=null}q=q||0;var p=new Date().getTime();var n=this.itemlistCntr.Items;for(var o=q;o<n.length;o++){var s=[n[o]];var r=m.ElementOfItem(s);this.AppendItemElement(r);if(new Date().getTime()-p>a){m.ShowMoreItems=aa_renderStyleObject(d,{nextIndex:o+1,text:h,attachShowMore:function(t){t.appendChild(this.control)},detach:function(){aa_remove(this.control)},showMore:function(){m.ShowItems(this.nextIndex)}},b);m.ShowMoreItems.attachShowMore(m.ParentOfItems);return}}}})},ShowTextWhenNoItems:function(d,f,a){var g=a.vars._Field[0];var b=aa_first(f,d,"Style",a);jBart.bind(g,"initItemList",function(h){var p=h.itemlistCntr;var r=h.ParentOfItems;if(!r){return}var l=aa_multilang_text(f,d,"Text",a);var q=aa_renderStyleObject(b,{text:l,data:l},a);var s=r.tagName.toLowerCase()=="tbody";var n=q;if(s){var o=h.VisibleFields.length;n=jQuery('<tr class="aa_noitems"><td colspan="'+o+'" class="td_nocontent"/></tr>')[0];jQuery(n).find(">td").append(q)}h.bind("refresh",m,"ShowTextWhenNoItems");jBart.bind(p,"afterItemDeleted",m,"ShowTextWhenNoItems"+g.Id);jBart.bind(p,"afterItemAdded",m,"ShowTextWhenNoItems"+g.Id);function m(){if(p.Items.length==0&&n.parentNode!=r){r.appendChild(n)}if(p.Items.length>0&&n.parentNode==r){r.removeChild(n)}}})},SelectedItemByFilter:function(f,g,d){var a=g;for(var b=0;b<a.length;b++){if(aa_bool([a[b]],f,"Filter",d)){return[a[b]]}}},FilterGroup:function(b,d,a){var f=a.vars._Field[0];f.IsFilterGroup=true;f.FieldData=function(){return[jBart.parsexml("<query />")]};jBart.bind(f,"ModifyInstanceContext",function(g){g.Context.vars._ItemListQueryXml=g.FieldData});jBart.bind(f,"ModifyControl",function(m){var n=m.Wrapper.jbContent||m.Wrapper.firstChild;var h=n.jbContext;var l=h.vars._ItemListQueryXml&&h.vars._ItemListQueryXml[0];var g=h.vars.ItemListCntr&&h.vars.ItemListCntr[0];if(l&&aa_notEmptyQuery(l)&&g&&g.RunQuery){g.RunQuery(l)}})}});aa_gcs("itemlist_filter",{Text:function(b,d,a){return[{FieldDataToColumnData:function(f){return aa_totext(f).toLowerCase()},PrepareQueryData:function(f){return f.toLowerCase()},Match:function(f,g){if(g.indexOf(f)>-1){return true}return false},HighlightSelectedText:function(l,g,f){var h=f;if(l.innerHTML.toLowerCase().indexOf(h)!=-1){l.innerHTML=ajaxart_field_highlight_text(l.innerHTML,h,g)}}}]},ExactMatch:function(b,d,a){return[{FieldDataToColumnData:function(f){return aa_totext(f)},PrepareQueryData:function(f){return f},Match:function(f,g){return(g==f)}}]},ValuesFromItems:function(d,h,a){var n=a.vars._Field[0];n.RecalculateForEachCell=true;if(!a.vars.ItemListCntr||!n.InitFilter){return}var m=a.vars.ItemListCntr[0];var f=n.Id;var p=[],l={};n.InitFilter(m);var o=m.DataColumns[f];for(var g=0;g<o.length;g++){var b=o[g];if(l[b]){l[b]++;continue}l[b]=1;p.push({code:b})}return[{Options:p}]},Occurrences:function(f,g,d){var h=d.vars._Field[0];h.OccurrencesStyle=aa_first(g,f,"Style",d);var a=aa_bool(g,f,"ShowFilteredOccurrences",d);var b=h.Id;h.OccurrencesCtrl=function(m,n){var r=n.vars.ItemListCntr[0];aa_calculateFilterOccurrences(r,b,a);var q=m[0].code;var p=r.Occurrences[b][q]||0;var l=a?r.FilteredOccurrences[b][q]||0:p;var o=aa_renderStyleObject(h.OccurrencesStyle,{count:p,filteredOccurrences:a,filteredCount:l},n);return o};if(aa_bool(g,f,"SortByOccurrences",d)){h.RecalcOccurrences=function(m,l){var q=l.vars.ItemListCntr[0];aa_calculateFilterOccurrences(q,b,a);if(a){if(!q.FilteredOccurrences||!q.FilteredOccurrences[b]){a=false}}for(var n=0;n<m.Options.length;n++){var o=m.Options[n];var p=o.code;o.occ=a?q.FilteredOccurrences[b][p]:q.Occurrences[b][p];o.occ=o.occ||0}m.Options.sort(function(s,r){return r.occ-s.occ})}}}});aa_gcs("itemsort",{SortItems:function(b,d,a){var g=aa_text(d,b,"SortDirection",a);var h=aa_first(d,b,"SortType",a);var f=a.vars._Field[0];aa_register_init_itemlistCntr(f,function(m){m.bind("sortItems",l,"SortItems");function l(){aa_sort_items(m,{direction:g,sortType:h,itemValue:function(n){return ajaxart.run(n,b,"ItemValueToSort",a)},context:a})}jBart.bind(f,"InnerFields",function(n){l()},"SortItems_InnerFields")},"SortItems")},Lexical:function(b,d,a){return[{compileValue:function(f){return aa_totext(f).toLowerCase()},sort:function(g,f){if(g.value>f.value){return -1}if(g.value==f.value){return 0}return 1}}]},Numeric:function(b,d,a){return[{compileValue:function(f){return parseInt(aa_totext(f))},sort:function(g,f){return g.value-f.value}}]},PromoteValues:function(f,g,d){var h=aa_split(aa_text(g,f,"ValuesToPromote",d),",",true);var l={};for(var b=0;b<h.length;b++){l[h[b]]=b+1}var a=h.length+1;return[{compileValue:function(m){return aa_totext(m)},sort:function(o,m){var p=l[o.value]||a;var n=l[m.value]||a;return p-n}}]},TableColumnSort:function(b,d,a){var f=a.vars._Field[0];var g=aa_first(d,b,"DefaultSortType",a);jBart.bind(f,"initItemList",function(h){var m=jQuery(h.Ctrl).find("table")[0];aa_tableColumnSort(m,{doSort:o});h.itemlistCntr.bind("sortItems",n,"TableColumnSort");var l={context:a,itemValue:function(p){return p}};function o(p,r){if(p){var q=p.jbField;l.direction=r;l.sortType=q.SortType||g;l.itemValue=function(s){return q.FieldData(s,a)}}else{l.sortType=null}n()}function n(){if(l.sortType){aa_sort_items(h.itemlistCntr,l)}else{aa_unsort_items(h.itemlistCntr)}h.Refresh()}},"TableColumnSort")}});aa_gcs("itemlist_item",{ItemOfList:function(b,f,a){var d=aa_first(f,b,"Item",a);if(!d){return[]}if(aa_text(f,b,"Result",a)=="element"){return[d]}return d.Item},ItemInContext:function(b,f,a){var d=a.vars.ControlElement&&a.vars.ControlElement[0];for(;d&&d.nodeType==1;d=d.parentNode){if(d.jbItemElement){return[d.jbItemElement]}if(jQuery(d).hasClass("aa_item")){return[d]}}},SelectedItem:function(b,d,a){var f=a.vars.ItemListCntr&&a.vars.ItemListCntr[0];if(!f||!f.SelectedElement){return[]}return[f.SelectedElement]}});aa_gcs("itemlist_action",{DeleteItem:function(d,h,a){var b=aa_first(h,d,"Item",a);var g=a.vars.ItemListCntr&&a.vars.ItemListCntr[0];if(!g||!b||!b.Item||!b.Item[0]){return}var l=g.Items,m=b.Item[0],n=false;for(var f=0;f<l.length;f++){if(l[f]==m){l.splice(f,1);n=true;if(m.nodeType==1&&m.parentNode){m.parentNode.removeChild(m)}if(l.onDeleteItem){l.onDeleteItem(m)}break}}if(n){g.trigger("itemDeleted",{Item:b.Item,ItemElement:b});g.trigger("afterItemDeleted",{Item:b.Item,ItemElement:b});g.trigger("itemsChanged",{})}},AddItemToItemList:function(b,h,a){var n=aa_first(h,b,"Item",a);var d=aa_text(h,b,"ItemList",a);var f=a.vars.ItemListCntr&&a.vars.ItemListCntr[0];if(d){var g=aa_find_field_controls({fieldID:d,context:a})[0];if(!g||!g.jbContext){return}f=g.jbContext.vars.ItemListCntr[0];if(!f){return}}var m=f.Items;m.push(n);if(m.onAddItem){m.onAddItem(n)}var l={Item:[n]};f.trigger("itemAdded",l);f.trigger("afterItemAdded",l)},CloseDetailsReplacingAll:function(d,g,b){var f=b.vars.ControlElement[0];var a=b.vars.ItemListCntr&&b.vars.ItemListCntr[0];if(a&&a.BackFromDetails){a.BackFromDetails(aa_first(g,d,"Transition",b))}},OpenDetailsReplacingAll:function(h,m,a){var d=aa_first(m,h,"Item",a);var f=aa_findItemList(d);if(!f){return}var p=f.itemlistCntr;var n=jQuery(d).parents(".fld_"+p.Id)[0];if(!n||!n.parentNode){return}var o=n.parentNode;if(!o.jbOriginalCtrl){o.jbOriginalCtrl=n}var g=aa_fieldById(aa_text(m,h,"DetailsField",a),f.Fields);var l=f.CreateItemDetailsWrapper?f.CreateItemDetailsWrapper(d):document.createElement("div");l.Item=d.Item;l.jbItemElement=d;l.jbItemlistCntr=p;if(g){aa_fieldControl({Field:g,Item:d.Item,Wrapper:l,Context:f.Context,DoAfterShow:function(){l.style.display="block"}});l.style.display="block"}else{}o.jbDetailsReplacingAll=l;var b=aa_first(m,h,"Transition",a);if(!b){o.jbOriginalCtrl.style.display="none";o.appendChild(l);aa_element_attached(o)}else{aa_replace_transition({transition:b,elOriginal:o.jbOriginalCtrl,elNew:l,removeOriginal:function(){jQuery(o.jbOriginalCtrl).css({display:"none"})}},a)}p.BackFromDetails=function(r,q){if(o.jbDetailsReplacingAll){if(!r){aa_remove(o.jbDetailsReplacingAll,true);o.jbOriginalCtrl.style.display="block";o.jbDetailsReplacingAll=null;f.RefreshItemElement(d)}else{f.RefreshItemElement(d);aa_replace_transition({transition:r,elOriginal:o.jbDetailsReplacingAll,elNew:o.jbOriginalCtrl,onBeforeTransitionBegin:function(){jQuery(o.jbOriginalCtrl).css({display:"block"})}},a)}}}},RefreshItem:function(f,g,d){var b=aa_first(g,f,"Item",d);var a=aa_findItemList(b);if(!a){return}a.RefreshItemElement(b)},ToggleDetailsInplace:function(f,h,d){var b=aa_first(h,f,"Item",d);var a=aa_findItemList(b);if(!a){return}if(b.jbDetailsOpen||(b.nextSibling&&b.nextSibling.jbIsDetailsOpen)){if(a.CloseInplace){a.CloseInplace(b)}b.jbDetailsOpen=false;a.RefreshItemElement(b)}else{var l=aa_fieldById(aa_text(h,f,"DetailsField",d),a.Fields);var g=a.CreateItemDetailsWrapper?a.CreateItemDetailsWrapper(b):document.createElement("div");g.Item=b.Item;g.jbItemElement=b;if(l){aa_fieldControl({Field:l,Item:b.Item,Wrapper:g,Context:a.Context});g.style.display="block"}else{}if(a.OpenInplace){a.OpenInplace(b,g)}b.jbDetailsOpen=true}}});function aa_itemlistContainer(a,d){var b={Id:d,Items:a};b.bind=function(f,h,g){jBart.bind(b,f,h,g)};b.trigger=function(f,g){jBart.trigger(b,f,g)};return b}function aa_ItemList(f,b,d){var a={Id:f.Id,id:f.Id,Fields:[],InputData:d};a.Context=aa_ctx(b,{ItemList:[a],_Field:[f]});a.itemlistCntr=b.vars.ItemListCntr?b.vars.ItemListCntr[0]:aa_itemlistContainer([]);a.RenderItem=function(h,g){a.CreateFieldControls(h,g)};a.ClearItems=function(){aa_empty(this.ParentOfItems,true)};a.AppendItemElement=function(g){this.ParentOfItems.appendChild(g)};a.ElementOfItem=function(h){var g=this.ItemTemplate.cloneNode(true);jQuery(g).addClass("aa_item");g.Item=h;this.RenderItem(h,g);this.trigger("itemElement",g);return g};a.ShowItems=function(){var g=this.itemlistCntr.Items;for(var h=0;h<g.length;h++){var m=[g[h]];var l=a.ElementOfItem(m);this.AppendItemElement(l)}};a.Refresh=function(){a.trigger("beforeRefresh");a.ClearItems();a.ShowItems();a.trigger("refresh")};a.SetHtmlTemplate=function(g){this.jControl=jQuery(g).addClass("aa_itemlist");this.Ctrl=this.jControl[0];this.Ctrl.jbItemList=a;this.ParentOfItems=this.jControl[0]};a.CreateFieldControls=function(l,h){var l=h.Item;for(var g=0;g<this.VisibleFields.length;g++){var m=this.VisibleFields[g];var n=jQuery("<div/>")[0];a.CreateFieldControl(l,n,m);h.appendChild(n)}};a.RefreshItemElement=function(h){var g=this.ElementOfItem(h.Item);aa_replaceElement(h,g,true);a.trigger("refreshItemElement",{NewElement:g,PreviousElement:h})};a.CreateFieldControl=function(l,n,m){var g=aa_ctx(this.Context,{_Field:[m]});var h=m.FieldData?m.FieldData(l,g):l;aa_fieldControl({Field:m,Item:l,Wrapper:n,Context:g})};a.GetElements=function(){var g=[];for(var h=this.ParentOfItems.firstChild;h;h=h.nextSibling){if(h.Item){g.push(h)}}return g};a.bind=function(g,l,h){jBart.bind(a,g,l,h)};a.trigger=function(g,h){jBart.trigger(a,g,h)};a.SetHtmlTemplate('<div><div class="aa_item"/></div>');a.ItemTemplate=a.jControl.find(".aa_item").remove()[0];a.itemlistCntr.bind("itemsChanged",function(){a.Refresh()});return a}function aa_fieldControl(f,a){try{var m=f.Field;var b=f.Wrapper;var n=aa_ctx(f.Context,{_Field:[m],Item:f.Item});if(m.AsyncActionRunner&&!a){return m.AsyncActionRunner(f)}var l=f.FieldData;if(!l){l=m.FieldData?m.FieldData(f.Item,n):f.Item}for(g in ajaxart.xtmls_to_trace){if(m.XtmlSource[0].script==ajaxart.xtmls_to_trace[g].xtml){ajaxart.xtmls_to_trace[g].fieldData=ajaxart.xtmls_to_trace[g].fieldData||[];ajaxart.xtmls_to_trace[g].fieldData=ajaxart.xtmls_to_trace[g].fieldData.concat(l)}}aa_extend(b,{Field:m,FieldData:l,ItemData:f.Item,jbContext:f.Context});jQuery(b).addClass("aa_cell_element");var d;try{d=m.Control&&m.Control(l,n)[0]}catch(h){ajaxart.logException(h);d=document.createElement("DIV")}if(d){b.appendChild(d);b.jbControl=d;jQuery(d).addClass("field_control fld_"+m.Id);d.jbCell=b;d.Field=m;jBart.trigger(m,"ModifyControl",{Wrapper:b,FieldData:l,Context:n,Item:f.Item});if(m.ModifyControl){for(var g=0;g<m.ModifyControl.length;g++){m.ModifyControl[g](b,l,"control",n,f.Item)}}}jBart.trigger(m,"ModifyCell",{Wrapper:b,FieldData:l,Context:n,Item:f.Item});if(m.ModifyCell){for(var g=0;g<m.ModifyCell.length;g++){m.ModifyCell[g](b,l,"control",n,f.Item)}}if(d){aa_element_attached(d)}if(f.DoAfterShow){f.DoAfterShow(f)}}catch(h){ajaxart.logException("error rendering field "+f.Field.Id,h)}}function aa_findItemList(b){for(var a=b;a&&a.nodeType==1;a=a.parentNode){if(a.jbItemList){return a.jbItemList}}return null}function aa_initContainerFilters(a){if(a.RunQuery){return}a.Filters=a.Filters||{};a.AllItems=a.Items;a.RefreshDataColumns=function(){a.DataColumns={};for(var b in this.Filters){this.RefreshDataColumn(this.Filters[b])}};a.RefreshDataColumn=function(g){var f=this.DataColumns[g.Id]=[];for(var d=0;d<this.AllItems.length;d++){var h=this.AllItems[d];var b=g.FieldData(h);f.push(g.FilterType.FieldDataToColumnData(b))}};a.AddFilter=function(b){this.Filters[b.Id]=b;this.RefreshDataColumn(b)};a.RunQuery=function(d){var w=false;var h=w?new Date().getTime():0;this.ItemsVersion=this.ItemsVersion?this.ItemsVersion+1:1;this.FilterData={};for(var s=0;s<d.attributes.length;s++){var f=d.attributes.item(s).name;if(!d.getAttribute(f)){continue}var g=this.Filters[f];if(!g){continue}var b=g.FilterType;this.FilterData[f]=b.PrepareQueryData?b.PrepareQueryData(d.getAttribute(f)):d.getAttribute(f)}var u={};var q=null,m=null;for(var p in this.FilterData){var l=[];var g=this.Filters[p];var b=g.FilterType;var v=this.FilterData[p];var o=this.DataColumns[p];for(var r=0;r<o.length;r++){if(q&&!q[r]){l[r]=false}else{l[r]=b.Match(v,o[r])}}m=q=l}if(m){var t=[];for(var r=0;r<this.AllItems.length;r++){if(m[r]){t.push(this.AllItems[r])}}this.Items=t}else{this.Items=this.AllItems}this.FilteredDataColumn=m;this.trigger("sortItems",{});this.trigger("itemsChanged",{});if(w){var n=new Date().getTime()-h;ajaxart.log("RunQuery Time - "+n,"timing")}};a.GetFilterOfSpecificResult=function(f,h){for(var b in this.Filters){var d=this.Filters[b];if(d.FieldData){var g=d.FieldData(f);if(g&&g[0]&&h[0]&&g[0]==h[0]){return d}}}return null};a.GetFilterQueryData=function(b){return this.FilterData&&this.FilterData[b.Id]};a.RefreshDataColumns()}function aa_calculateFilterOccurrences(l,b,a){l.ItemsVersion=l.ItemsVersion||1;l.Occurrences=l.Occurrences||{};l.FilteredOccurrences=l.FilteredOccurrences||{};l.OccurrencesVersions=l.OccurrencesVersions||{};if(l.OccurrencesVersions[b]==l.ItemsVersion){return}if(a&&!l.FilteredDataColumn){a=false}var f={},h={};var g=l.DataColumns[b];for(var d=0;d<g.length;d++){var m=g[d];f[m]=f[m]?f[m]+1:1;if(a&&l.FilteredDataColumn[d]){h[m]=h[m]?h[m]+1:1}}l.Occurrences[b]=f;if(a){l.FilteredOccurrences[b]=h}l.OccurrencesVersions[b]=l.ItemsVersion}function aa_register_init_itemlistCntr(b,d,a){if(b.hasItemlistContainer){jBart.bind(b,"initItemlistCntr",d,a)}else{aa_field_handler(b,"ModifyControl",function(f,m,h,g,l){if(!g.vars.ItemListCntr){return}d(g.vars.ItemListCntr[0])},a)}}function aa_unsort_items(a){if(a.ItemsBeforeSort){a.Items=a.ItemsBeforeSort}}function aa_sort_items(a,f){var b=f.context;var h=f.sortType;a.ItemsVersion=a.ItemsVersion||1;if(a.ItemsBeforeSortVersion!=a.ItemsVersion){a.ItemsBeforeSort=a.Items;a.ItemsBeforeSortVersion=a.ItemsVersion}var m=[];for(var l=0;l<a.Items.length;l++){var n=[a.Items[l]];var d=f.itemValue(n);m[l]={index:l,value:h.compileValue(d)}}m.sort(h.sort);var g=[];for(var l=0;l<m.length;l++){g.push(a.Items[m[l].index])}if(f.direction=="ascending"){g=g.reverse()}a.Items=g}function aa_itemlist_as_table(b,f){f=f||{showHeaders:true};b.ItemTemplate=b.jControl.find(".aa_item").remove()[0];b.ParentOfItems=b.jControl.find("tbody")[0];b.RenderItem=function(s,r){var o=b.VisibleFields;var q=jQuery(r).find(".aa_cell").remove()[0];for(var p=0;p<o.length;p++){var n=q.cloneNode(true);b.CreateFieldControl(s,n,o[p]);r.appendChild(n)}};var m=b.jControl.find(".aa_header_field")[0];if(m){var g=m.parentNode;jQuery(m).remove();if(f.showHeaders){var a=b.VisibleFields;for(var d=0;d<a.length;d++){var h=m.cloneNode(true);h.jbField=a[d];var l=aa_fieldTitle(a[d],b.InputData,b.Context);jQuery(h).find(".title").html(l);jBart.trigger(a[d],"ModifyTableHeader",{th:h});g.appendChild(h)}}}b.OpenInplace=function(n,o){var p=jQuery('<tr class="aa_details_inplace"><td/></tr>');p.find("td").attr("colspan",jQuery(n).find(">td").length).append(o);p.insertAfter(n);n.jbDetailsElement=p[0];p[0].jbIsDetailsOpen=true};b.CloseInplace=function(n,o){n.jbDetailsElement=n.jbDetailsElement||n.nextSibling;if(n.jbDetailsElement){jBart.remove(n.jbDetailsElement);n.jbDetailsElement=null}}}function aa_tableColumnSort(b,a){var d=jQuery(b).find(">thead")[0];aa_registerHeaderEvent(d,"mouseup",g,"Sort","no dominant");function g(n,m,l){var h=jQuery(l);if(!m.LastMouseDown||m.LastMouseDown.th!=l){return}if(h.hasClass("sort_ascending")){f(m);h.addClass("sort_descending");a.doSort(l,"descending")}else{if(h.hasClass("sort_descending")){f(m);a.doSort(null)}else{f(m);h.addClass("sort_ascending");a.doSort(l,"ascending")}}}function f(h){jQuery(h).find("th").removeClass("sort_ascending").removeClass("sort_descending")}}function aa_notEmptyQuery(d){for(var b=0;b<d.attributes.length;b++){var a=d.attributes.item(b).name;if(d.getAttribute(a)){return true}}return false}aa_gcs("itemlist_aspect",{GroupItems:function(d,f,a){var g=a.vars._Field[0];var b=aa_first(f,d,"Style",a);jBart.bind(g,"initItemList",function(h){var l=h.itemlistCntr;jBart.bind(l,"afterItemDeleted",function(){h.Refresh()},"GroupItems"+g.Id);jBart.bind(l,"afterItemAdded",function(){h.Refresh()},"GroupItems"+g.Id);h.GroupSorter=aa_first(f,d,"SortGroups",a);h.RefreshGroups=function(){var m=this.itemlistCntr.Items;h.Groups={};h.SortedGroups=[];for(var n=0;n<m.length;n++){var o=[m[n]];var q=aa_text(o,d,"GroupOfItem",a);if(!h.Groups[q]){var p={Name:q,Items:[]};p.DisplayName=aa_text(ajaxart.run(o,d,"GroupOfItem",a),d,"GroupDisplayName",a);h.SortedGroups.push(p);h.Groups[q]=p}h.Groups[q].Items.push(m[n])}h.SortGroups()};h.SortGroups=function(){if(!h.GroupSorter){return}var m=[];for(var n=0;n<h.SortedGroups.length;n++){var p=h.SortedGroups[n];m[n]={index:n,value:h.GroupSorter.compileValue([p.Name])}}m.sort(h.GroupSorter.sort);var o=[];for(var n=0;n<m.length;n++){o.push(h.SortedGroups[m[n].index])}h.SortedGroups=o};h.ShowItems=function(){var m=this.itemlistCntr.Items;for(var n=0;n<m.length;n++){var p=[m[n]];var o=h.ElementOfItem(p);this.AppendItemElement(o)}};h.ShowItems=function(){h.RefreshGroups();var m=this.SortedGroups;for(var p=0;p<m.length;p++){var s=m[p];var t=[];for(var o=0;o<s.Items.length;o++){var r=[s.Items[o]];var q=h.ElementOfItem(r);t.push(q)}var n=aa_renderStyleObject(b,{text:s.DisplayName,group:s,Items:s.Items,ItemElements:t},a);this.ParentOfItems.appendChild(n);for(var o=0;o<t.length;o++){this.AppendItemElement(t[o])}}}})}});aa_gcs("itemtree",{TreeItems:function(d,g,b){var a=ajaxart.run(g,d,"Items",b);a.SubItems=function(h){return f(h,a)};return a;function f(l,o){var n=false;for(var h=0;h<o.length;h++){if(o[h]==l){n=true;break}}if(!n){return null}var m=ajaxart.run([l],d,"SubItems",b);m.SubItems=function(p){return f(p,this)};return m}},Tree:function(b,d,a){var f=aa_create_base_field(d,b,a);aa_init_class_Tree();f.Control=function(n,g){var l=ajaxart.run(n,b,"Items",a);var h=new ajaxart.classes.Tree({items:l,_fieldData:n,_profile:b,context:a});var m=aa_renderStyleObject(f.Style,h,a,true);return[m]};return[f]}});function aa_init_class_Tree(){ajaxart.classes=ajaxart.classes||{};if(ajaxart.classes.Tree){return}ajaxart.classes.Tree=function(a){aa_extend(this,a)};ajaxart.classes.Tree.prototype.itemText=function(a){return aa_text([a],this._profile,"ItemText",this.context)};ajaxart.classes.Tree.prototype.itemImage=function(a){return aa_first([a],this._profile,"ItemImage",this.context)}}function aa_build_tree(a,f){var d=f.nodeElement;b(a.items,f.nodeElement);function b(o,m){var h=jQuery(m).parent();jQuery(m).remove();for(var l=0;l<o.length;l++){var n=o[l];var p=jQuery(d).clone().appendTo(h);g({item:n,items:a.items,el:p[0],$el:p})}}function g(n){var m=f.nodeSettings(n);var l=a.itemText(n.item);var h=a.itemImage(n.item);jQuery(m.textElement).text(l);var o=(n.items.SubItems&&n.items.SubItems(n.item))||[];if(!o.length){jQuery(m.subnodesElement).hide()}else{b(o,m.subnodeElement)}}}ajaxart.gcs.menu={ContextMenu:function(d,y,b){var o=[];var g=ajaxart.subprofiles(d,"Item");for(prof in g){ajaxart.concat(o,ajaxart.run(y,g[prof],"",b))}var v=ajaxart.dynamicText(y,"%$_ContextMenuContext/Input%",b);var r=ajaxart.dynamicText(y,"%$_ContextMenuContext/FromMenu%",b);var w=aa_text(y,d,"FooterMessage",b);var A=aa_text(y,d,"HeaderMessage",b);ajaxart.menu.closeCurrentContextMenu();var a=jQuery('<div class="contextmenu" style="z-index: 9000"/>');a.addClass(aa_attach_global_css(aa_text(y,d,"Css",b),b,"contextmenu"));if(A!=""){var t=jQuery('<div class="context_menu_header_message" />');t.text(A);a.append(t)}a.bind("contextmenu",function(){return false});var n=jQuery('<ul class="contextmenu_ul">');a.append(n);for(var u=0;u<o.length;u++){var p=ajaxart.totext(o[u].Image);var m=ajaxart.totext(o[u].Text);var z=jQuery('<img class="contextmenu_image" />').attr("src",p);var s=jQuery('<span class="contextmenu_span" />').text(m);var l=jQuery('<li class="contextmenu_li" />').append(z).append(s);l.addClass("menu_item_"+ajaxart.totext(o[u].ID));n.append(l);l[0]["menu_item"]=o[u];l[0]["input"]=o[u].Input;if(u==0){l.addClass("selected")}l.click(function(B){if(window.aa_incapture){return}var C=ajaxart.clone_context(this.menu_item.Action.context);ajaxart.setVariable(C,"MenuItemInfo",[this.menu_item]);ajaxart.menu.closeCurrentContextMenu();ajaxart.run(this.input,this.menu_item.Action.script,"",C)});l.hover(function(){jQuery(this.parentNode).find(".selected:visible").removeClass("selected");jQuery(this).addClass("selected")},function(){})}if(w!=""){var q=jQuery('<div class="context_menu_footer_message" />');q.text(w);a.append(q)}jQuery(document).mouseup(function(C){if(C.which==3){return}if(ajaxart.menu.currentContextMenu==null){return}var B=(typeof(C.target)=="undefined")?C.srcElement:C.target;if(jQuery(B).parents(".contextmenu").length==0){ajaxart.menu.closeCurrentContextMenu()}});jQuery(document).mousemove(function(G){if(ajaxart.menu.currentContextMenu==null){return}var B=G.pageX;var H=G.pageY;var C=aa_absLeft(ajaxart.menu.currentContextMenu[0]);var E=aa_absTop(ajaxart.menu.currentContextMenu[0]);var D=C+jQuery(ajaxart.menu.currentContextMenu[0]).width();var F=E+jQuery(ajaxart.menu.currentContextMenu[0]).height();if(B<C-80||B>D+80||H<E-40||H>F+80){ajaxart.menu.closeCurrentContextMenu()}return true});var h=ajaxart.getVariable(b,"_CurrentFocus");if(h.length>0&&h[0].alreadyBounded!=true){h[0]["alreadyBounded"]=true;jQuery(h[0]).keyup(function(C){if(ajaxart.menu.currentContextMenu==null){return}if(C.keyCode==13){var B=ajaxart.menu.currentContextMenu.find(".selected")[0];var D=ajaxart.clone_context(B.menu_item.Action.context);ajaxart.setVariable(D,"MenuItemInfo",[B.menu_item]);ajaxart.menu.closeCurrentContextMenu();ajaxart.run(B.input,B.menu_item.Action.script,"",D)}ajaxart_stop_event_propogation(C)});jQuery(h[0]).keydown(function(D){if(ajaxart.menu.currentContextMenu==null){return}if(D.keyCode==27){ajaxart.menu.closeCurrentContextMenu()}if(D.keyCode==38||D.keyCode==40){var C=ajaxart.menu.currentContextMenu.find(".selected");var B;if(D.keyCode==38){B=C[0].previousSibling}if(D.keyCode==40){B=C[0].nextSibling}if(B!=null){C.removeClass("selected");jQuery(B).addClass("selected")}}ajaxart_stop_event_propogation(D);return false})}jQuery(document).keypress(function(B){if(B.keyCode==27){ajaxart.menu.closeCurrentContextMenu()}});a.appendTo("body");ajaxart.menu.currentContextMenu=a;var f=ajaxart.getControlElement(b,true);if(ajaxart.getVariable(b,"_CurrentFocus").length>0){f=ajaxart.getVariable(b,"_CurrentFocus")[0]}if(r=="vmenu"){f=jQuery(ajaxart.getControlElement(b)).find(">*");if(f.length>0){f=f[0]}else{f=null}}a.css("position","absolute");ajaxart.dialog.positionPopup(a,f,null,true,b);return[]},ContextMenuContents:function(b,d,a){if(ajaxart.menu.currentContextMenu==null){return[]}var f=ajaxart.menu.currentContextMenu[0];return[f]},CloseContextMenu:function(b,d,a){ajaxart.menu.closeCurrentContextMenu();return["true"]}};ajaxart.menu={currentContextMenu:null};ajaxart.menu.closeCurrentContextMenu=function(){if(ajaxart.menu.currentContextMenu==null){return}jQuery(document).unbind("click").unbind("keypress").unbind("mousemove");ajaxart.menu.currentContextMenu.fadeOut(175);ajaxart.menu.currentContextMenu[0].parentNode.removeChild(ajaxart.menu.currentContextMenu[0]);ajaxart.menu.currentContextMenu=null};aa_gcs("parser",{RemoveSection:function(h,l,d){var g=aa_text(l,h,"BeginPattern",d);var b=aa_text(l,h,"EndPattern",d);function m(o){var n=o.toLowerCase();var q=n.indexOf(g);var p=n.indexOf(b,q);if(q==-1||p==-1){return o}return o.substring(0,q)+o.substring(p+b.length)}var a=aa_text(l,h,"Html",d);var f=m(a);while(f.length<a.length){a=f;f=m(a)}return[a]},ExtractBody:function(f,g,d){var a=aa_text(g,f,"Html",d);var b=a.toLowerCase();var l=b.indexOf("<body");if(l!=-1){l=b.indexOf(">",l)}var h=b.indexOf("</body");if(l!=-1&&h!=-1){a="<div"+a.substring(l,h)+"</div>"}return[a]}});ajaxart.gcs.pivot={Pivot:function(d,f,b){var a={isObject:true};a.Id="Pivot";a.takeOver=function(r,o,l,s){var q=this;var h=aa_ctx(s,{_Pivot:[q]});var p=[];for(var n=0;n<r.length;n++){if(r[n].Id!="Pivot"){p.push(r[n])}}q.InnerAspects=p;q.OriginalItems=o;q.InnerItemListCtrlFunc=l;q.InnerContainer=b.vars._Cntr[0];var r=ajaxart.runsubprofiles(f,d,"PivotAspect",h);var g=ajaxart.runNativeHelper(o,d,"Control",h)[0];q.Context=aa_ctx(q.Context,{_Cntr:[g.Cntr]});q.OuterCntr=g.Cntr;var m=jQuery(q.Ctrl).find(">.aa_ctrl");m.empty();for(var n=0;n<r.length;n++){if(r[n].ExtendOuterCntr){r[n].ExtendOuterCntr(f,q.Context)}}m[0].appendChild(g);return[q.Ctrl]};a.Group=function(o,u){var p=aa_first(f,d,"GroupByField",b);if(p==null){return[]}var h={};var s=[];for(var n=0;n<o[0].Items.length;n++){var t=o[0].Items[n];var g=ajaxart.totext_array(ajaxart_field_calc_field_data(p,[t],b));if(h[g]==null){h[g]=[]}h[g].push(t)}for(groupVal in h){var r=h[groupVal];var m=jQuery.extend(false,{},o[0]);m.Items=h[groupVal];var q={isObject:true,IsGroup:["true"],Value:[groupVal],Items:[m]};s.push(q)}if(a.HasTotalLine){h._Total=[];for(var n=0;n<o[0].Items.length;n++){h._Total.push(o[0].Items[n])}var m=jQuery.extend(false,{},o[0]);m.Items=h._Total;var l=ajaxart_multilang_text("Total",b);s.push({isObject:true,IsGroup:["true"],IsTotal:true,Value:[l],Items:[m]})}return s};a.ItemsOfGroupField=[{isObject:true,Id:"ItemsOfGroup",Title:"Items",CellPresentation:"control",Control:function(l,h){var g=h.vars._Pivot[0];return g.InnerItemListCtrlFunc(l[0].Items,g.InnerAspects)}}];a.Ctrl=jQuery('<div class="pivot"><div class="aa_filters"></div><div class="aa_ctrl"></div></div>')[0];a.Context=aa_ctx(b,{_Pivot:[a]});return[a]},TotalLine:function(d,f,b){var a=b.vars._Pivot[0];if(a==null){return[]}a.HasTotalLine=true;return{}},ExposedFilters:function(d,f,b){var a={ExtendOuterCntr:function(o,w){var v=b.vars._Pivot[0];if(v==null){return[]}var t=document.createElement("ul");t.className="aa_filters";var r=ajaxart.run(f,d,"Fields",v.Context);v.Filters=[];for(var q=0;q<r.length;q++){var u=r[q];if(u.newFilter!=null){var n=ajaxart_writabledata();var h=u.newFilter(n);h.field=u;h.rawFilterData=n;h.nonCompiledData=n;v.Filters.push(h)}if(u.FilterControl==null){continue}var m=aa_ctx(w,{FilterData:ajaxart_writabledata()});var g=u.FilterControl(m);var p=document.createElement("li");p.className="aa_filter";p.appendChild(g[0]);t.appendChild(p)}var s=function(y,A){var z=A.vars._Pivot[0];var E=A.vars._FilterField[0];var D=z.OuterCntr;var C=null;for(var B=0;B<z.Filters.length;B++){if(z.Filters[B].field.Id==E.Id){C=z.Filters[B]}}ajaxart_filter_dataitems(z.OriginalItems[0],z.Filters,A);D.Items=[{isObject:true,Items:z.Group(z.OriginalItems)}];aa_recalc_filters_and_refresh(D,f,b)};ajaxart_addMethod_js(v.OuterCntr,"RefreshByFilters",s,v.Context);var l=jQuery(v.Ctrl).find(">.aa_filters");l.empty();l[0].appendChild(t);return[]}};return[a]}};ajaxart.gcs.server={CallServer:function(b,d,a){var f=aa_bool(d,b,"ProgressIndication",a);ajaxart.server.RunParallelCalls(b,d,a,"Call",function(){});return["true"]},ParallelCalls:function(b,d,a){ajaxart.server.RunParallelCalls(b,d,a,"Call",null);return["true"]},BasicServerCall:function(h,n,d){var a=aa_text(n,h,"VarNameForResult",d);var f=aa_bool(n,h,"Reusable",d);var q=ajaxart.getVariable(d,"_CallServerObject");if(q.length>0){q[0].register(q[0],a)}var p=function(t,u,w,s){if(w&&s){ajaxart.serverCache[u]=t}var v=ajaxart.getVariable(d,"_CallServerObject");if(v.length>0){if(s){v[0].servervars[u]=t;ajaxart.run(t,h,"OnLoad",ajaxart.server.contextWithServerVars(d,v[0].servervars))}v[0].serverResult(v[0],s,u)}};if(f&&ajaxart.serverCache[a]!=null){p(ajaxart.serverCache[a],a,f,true)}else{var r={cache:false};r.url=aa_text(n,h,"Url",d);r.type=(aa_text(n,h,"Method",d)=="get")?"GET":"POST";r.contentType=(r.type=="GET")?"text/xml;charset=UTF-8":"application/x-www-form-urlencoded; charset=UTF-8";r.httpHeaders=[];r.data={};r.beforeSend=function(s){};var o=ajaxart.run(n,h,"PostData",d);for(var m=0;m<o.length;m++){var l=o[m];var b=ajaxart.totext(l.Name);var g=ajaxart.totext(l.Value);if(g!=null){r.data[b]=g}}ajaxart.server.basicCall(r,p,a,f,d)}return["true"]},ImmediateResult:function(f,h,d){var g=ajaxart.getVariable(d,"_CallServerObject");if(g.length>0){var b=aa_text(h,f,"VarNameForResult",d);var a=ajaxart.run(h,f,"Result",d);g[0].servervars[b]=a;ajaxart.run(a,f,"OnLoad",d);g[0].register(g[0],b);g[0].serverResult(g[0],true,b)}return["true"]},ExportVirtualFile:function(f,h,b){var n=aa_text(h,f,"FileName",b);var g=aa_text(h,f,"Content",b);var m=aa_text(h,f,"ContentType",b);if(ajaxart.inPreviewMode){return}if(ajaxart.server.counter==null){ajaxart.server.counter=1}ajaxart.server.counter++;var l=document;form=l.createElement("form");form.setAttribute("accept-charset","utf-8");l.body.appendChild(form);form.method="POST";form.setAttribute("method",form.method);form["Accept-Charset"]="ISO-8859-1,utf-8;q=0.7,*;q=0.7";form.setAttribute("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");var a=aa_text(h,f,"Url",aa_ctx(b,{Counter:[""+ajaxart.server.counter]}));form.action=a;form.setAttribute("action",form.action);form.target="_new";form.setAttribute("target",form.target);Filename=l.createElement("input");Filename.name="Filename";Filename.type="hidden";Filename.value=n;Filename.setAttribute("value",Filename.value);form.appendChild(Filename);FileData=l.createElement("input");FileData.name="FileData";FileData.type="hidden";FileData.value=g;FileData.setAttribute("value",FileData.value);form.appendChild(FileData);ContentType=l.createElement("input");ContentType.name="ContentType";ContentType.type="hidden";ContentType.value=m;ContentType.setAttribute("value",ContentType.value);form.appendChild(ContentType);form.submit();return[]}};ajaxart.server={ensureSyncObject:function(f,g,d,b){var a;if(ajaxart.getVariable(d,"_CallServerObject").length>0){a=ajaxart.getVariable(d,"_CallServerObject")[0]}else{a={countLeft:0,servervars:[],success:true,onSuccess:[],onFailure:[],mode:"parallel"};a.register=function(h,l){h.countLeft++};a.serverResult=function(l,h,m){l.countLeft--;if(!h){l.success=false}if(l.countLeft<=0){ajaxart.server.callSuccessOrFailure(l)}};d.vars._CallServerObject=[a]}if(b!=null){a.onSuccess.push(function(h){b(ajaxart.server.contextWithServerVars(d,h.servervars))})}return ajaxart.getVariable(d,"_CallServerObject")[0]},RunParallelCalls:function(d,g,a,o,l){var b=ajaxart.clone_context(a);var m=null;var n=ajaxart.getVariable(a,"_CallServerObject");if(n.length>0&&n[0].mode!="parallel"){m=n[0];m.register(m);delete b.vars._CallServerObject}var h=ajaxart.server.ensureSyncObject(d,g,b,l);if(m!=null){h.servervars=m.servervars}h.onSuccess.push(function(r){ajaxart.run(g,d,"OnSuccess",ajaxart.server.contextWithServerVars(b,r.servervars))});h.onFailure.push(function(r){ajaxart.run(g,d,"OnFailure",ajaxart.server.contextWithServerVars(b,r.servervars))});if(m!=null){var q=function(r){h.onSuccess.push(function(s){r.serverResult(r,true)})};q(m)}h.register(h,"parallel_internal");var p=ajaxart.subprofiles(d,o);for(var f=0;f<p.length;f++){ajaxart.run(g,p[f],"",b)}h.serverResult(h,true,"parallel_internal")},content2result:function(g,a){try{var b=null;if(ajaxart.isxml(g)){g=ajaxart.xml2text(g)}else{if(g.length>0&&g.charAt(0)!="<"){return[g]}}var d=ajaxart.ajaxart_clean_ns(g);if(g.length>0&&g.charAt(0)=="<"){b=[ajaxart.parsexml(d,a)]}if(b==null){b=[g]}if(b.length==1&&b[0]==null){b=[g]}if(ajaxart.ishtml(b[0])||(ajaxart.isxml(b[0])&&ajaxart.xml.xpath(b[0].ownerDocument.documentElement,"Body/Fault").length!=0)){ajaxart.log("failed calling server","error");if(ajaxart.ishtml(b)){jQuery("<div>error back from server:"+g+"</div>").appendTo(jQuery("#ajaxart_log"))}}else{if(ajaxart.isxml(b)){if(b[0].nodeType==7){b=[b[0].nextSibling]}if(b[0].tagName.toLowerCase()=="envelope"){b=[ajaxart.body_contents_of_soap_envelope(b[0])]}}}return b}catch(f){ajaxart.logException(f);return null}},basicCall:function(b,g,a,f,d){b.inPreviewMode=ajaxart.inPreviewMode;b.success=function(n){var m=true;if(n&&n.nodeType==9){n=n.documentElement}var h=ajaxart.server.content2result(n,a);if(h==null){m=false;h=[]}var l=b.inPreviewMode;if(b.inPreviewMode==true){ajaxart.inPreviewMode=true}g(h,a,f,m);ajaxart.inPreviewMode=false};b.error=function(h,m,l){g([],a,f,false)};jQuery.ajax(b)},contextWithServerVars:function(b,d){var f=ajaxart.clone_context(b);for(var a in d){f.vars[a]=d[a]}delete f.vars._CallServerObject;return f},callSuccessOrFailure:function(a){if(a.success){for(var b=0;b<a.onSuccess.length;b++){a.onSuccess[a.onSuccess.length-b-1](a)}}else{for(var b=0;b<a.onFailure.length;b++){a.onFailure[a.onFailure.length-b-1](a)}}}};ajaxart.serverCache=[];ajaxart.server_usage={};ajaxart.server_usage.actionFinished=null;aa_gcs("studio_suggest",{IsItemlistContainer:function(f,h,b){var g=h[0];var a=g;if(g.nodeType!=1){return[]}var d=g.getAttribute("t")=="field.ItemListContainer";if(!d){a=aa_xpath(g,"FieldAspect[@t='field_aspect.ItemListContainer']")[0]||null;d=a!=null}if(!d){return[]}if(aa_bool(h,f,"XmlItemsOnly",b)){return aa_frombool(aa_xpath(a,"Items/@t")[0].nodeValue=="itemlist.XmlItems")}return["true"]},HasNoInnerFieldWithIDSuffix:function(g,l,f){var b=l[0];if(!b||b.nodeType!=1){return[]}var m=aa_text(l,g,"Suffix",f);var h=new RegExp(m+"$");var a=aa_xpath(b,"Field");for(var d=0;d<a.length;d++){if(h.test(a[d].getAttribute("ID"))){return[]}}return["true"]}});aa_gcs("text",{FirstSucceeding:function(h,l,g){var d=ajaxart.subprofiles(h,"Item");for(var f=0;f<d.length;f++){var a=ajaxart.run(l,d[f],"",g);for(var b=0;b<a.length;b++){if(ajaxart.totext_item(a[b]).length>0){return a}}}return[]},NormalizeNewLines:function(d,f,b){var a=aa_text(f,d,"Text",b).replace(/\r\n/g,"\n");return[a]},Extract:function(b,z,a){var q=ajaxart.runsubprofiles(z,b,"StartMarker",a);if(q.length==0){q=ajaxart.run(z,b,"StartMarker",a)}var g=aa_text(z,b,"EndMarker",a);var d=aa_bool(z,b,"IncludingStartMarker",a);var w=aa_bool(z,b,"IncludingEndMarker",a);var u=aa_bool(z,b,"OnlyFirstResult",a);var t=aa_bool(z,b,"Trim",a);var o=aa_text(z,b,"From",a);if(q.length==0){return z}var f=0,s=[];var n=0;var y=function(C,A,B){return{pos:C.indexOf(A,B),length:A.length}};if(aa_bool(z,b,"Regex",a)){y=function(F,B,D){var A=0;var H=-1;try{D=D||0;var F=F.substring(D);var G=new RegExp(B,"m");H=F.search(G);if(H>-1){H=(H>=0)?H+D:H;var C=F.match(G)[0];A=C?C.length:0}}catch(E){}return{pos:H,length:A}}}while(1){var v;for(var r=0;r<q.length;r++){var h=q[r];var l=y(o,h,f);f=l.pos;if(r==0){v=l.pos-n}if(l.pos==-1){return s}n=l.pos;if(!d){n+=l.length}f+=l.length}if(s.length>0&&g==""){s[s.length-1]=s[s.length-1].substring(0,v)}var p=y(o,g,f);var m;if(g==""){m=o.substring(n)}else{if(p.pos==-1){return s}else{if(w){m=o.substring(n,p.pos+p.length)}else{m=o.substring(n,p.pos)}}}if(t){m=aa_text_trim(m)}if(m){s.push(m)}if(u){return s}if(g!=""){f=p.pos+p.length}}return s},MultiLang:function(b,d,a){return ajaxart_multilang_run(d,b,"Pattern",a)},Split:function(profile,data,context){var sep=aa_text(data,profile,"Separator",context);var part=aa_text(data,profile,"Part",context);var index=aa_text(data,profile,"Index",context);var str=aa_text(data,profile,"Text",context);if(aa_bool(data,profile,"Regex",context)){sep=new RegExp(sep)}var result="";if(str==""){return[]}var items=str.split(sep);if(aa_bool(data,profile,"NoEmptyValues",context)){for(var i=items.length-1;i>=0;i--){if(items[i]==""){items.splice(i,1)}}}switch(part){case"All":return items;case"ButFirst":if(items.length>=1){return items.slice(1)}break;case"First":if(items.length>=1){result=items[0]}break;case"Second":if(items.length>=2){result=items[1]}break;case"All but Last":var out=[];for(var i=0;i<items.length-1;i++){out.push(items[i])}return out;case"All but First":var out=[];for(var i=1;i<items.length;i++){out.push(items[i])}return out;case"All but First and Last":var out=[];for(var i=1;i<items.length-1;i++){out.push(items[i])}return out;case"Second":if(items.length>=2){result=items[1]}break;case"By index":try{var index_num=eval(index);if(items.length>=index_num){result=items[index_num-1]}break}catch(e){ajaxart.log("No index: "+index+","+e.message,"error")}break;case"Last":if(items.length>0){result=items[items.length-1]}break}if(result==""){result=aa_text(data,profile,"Default",context)}return[result]},Text:function(d,h,b){var g=aa_text(h,d,"Text",b);var a=ajaxart.dynamicText(h,g,b);var f=ajaxart.totext_array(a);if(aa_bool(h,d,"RemoveEmptyParenthesis",b)){test_result=f.replace("()","").replace(/^\s*/,"").replace(/\s*$/,"")}return[f]},StartsWith:function(b,d,a){var g=aa_text(d,b,"Text",a);var f=aa_text(d,b,"With",a);if(g.indexOf(f)==0){return["true"]}return[]},EndsWith:function(b,d,a){var g=aa_text(d,b,"Text",a);var f=aa_text(d,b,"With",a);if(g.lastIndexOf(f)!=-1&&g.lastIndexOf(f)+f.length==g.length){return["true"]}return[]},Length:function(b,f,a){var g=ajaxart.totext_array(f);var d=g.length;return[d]},ToChars:function(f,h,d){var l=ajaxart.totext_array(h);var g=l.length;var a=[];for(var b=0;b<l.length;b++){a.push(l.charAt(b))}return a},Truncate:function(b,f,a){var g=aa_text(f,b,"Text",a);var d=aa_int(f,b,"Length",a);if(g.length<=d){return[g]}var h=g.substring(0,d)+aa_text(f,b,"Suffix",a);return[h]},NumberFormat:function(d,m,a){var g=ajaxart.totext_array(m);var f=aa_text(m,d,"Symbol",a);var o=!aa_bool(m,d,"SymbolAtRight",a);var b=aa_bool(m,d,"NoCommaSeparator",a);var h=aa_bool(m,d,"Cents",a);var n=g.split(".")[0];if(!b){for(var l=0;l<Math.floor((n.length-(1+l))/3);l++){n=n.substring(0,n.length-(4*l+3))+","+n.substring(n.length-(4*l+3))}}if(h){var p="00";if(g.split(".").length>1){p=g.split(".")[1]}p=(p+"00").substring(0,2);n=n+"."+p}if(n[0]=="-"&&aa_bool(m,d,"MinusInParenthesis",a)){n=o?"("+f+n.substring(1)+")":"("+n.substring(1)+f+")"}else{n=o?f+n:n+f}return[n]},Concat:function(f,m,d){var n=aa_text(m,f,"Prefix",d);var s=aa_text(m,f,"Suffix",d);var u=aa_text(m,f,"Separator",d);var q=ajaxart.run(m,f,"Items",d);var r=aa_text(m,f,"LastSeparator",d);var b=aa_int(m,f,"MaxLength",d);if(r==""){r=u}var h=n;var p=ajaxart.compile(f,"ItemText",d);for(var l=0;l<q.length;l++){var t=q[l];var o="";if(p=="same"){o=ajaxart.totext_item(t)}else{if(p==null){o=aa_text([t],f,"ItemText",d)}else{o=ajaxart.totext_array(p([t],d))}}if(o!=""){if(l!=0&&l+1<q.length){h+=u}if(l!=0&&l+1==q.length){h+=r}h+=o}if(h.length>b&&b>0){var a=aa_text(m,f,"SuffixForMax",d);h=h.substring(0,b)+a;return[h+s]}}var g=ajaxart.subprofiles(f,"Item");for(var l=0;l<g.length;l++){var o=aa_text(m,g[l],"",d);if(o!=""){if(l!=0&&l+1<g.length){h+=u}if(l!=0&&l+1==g.length){h+=r}h+=o}}h+=s;return[h]},Capitalize:function(g,l,d){var n=ajaxart.totext_array(l);var m=aa_text(l,g,"Mode",d);if(m=="capital to separate words"){return[aa_text_capitalizeToSeperateWords(n)]}if(m=="upper to separate capital"){var h="";n=n.toLowerCase();var o=true;var b=0;while(b<n.length){var a=n.charAt(b);var f=""+a;if(a=="_"){o=true;h=h+" ";b++;continue}if(o){h=h+f.toUpperCase()}else{h=h+f}o=false;b++}return[h]}if(m=="split and capitalize words"){var h="";var o=true;var b=0;while(b<n.length){var a=n.charAt(b);var f=""+a;if(a=="_"){o=true;h=h+" ";b++;continue}if(a>="A"&&a<="Z"&&b!=0){o=true;h=h+" "}if(o){h=h+f.toUpperCase()}else{h=h+f}o=false;b++}return[h]}if(m=="separate words to capital"){var h="";var b=0;while(b<n.length){var a=n.charAt(b);if(b==0){h+=n.charAt(b).toUpperCase()}else{if(" !@#$%^&*()./".indexOf(a)!=-1){if(b+1<n.length){h+=n.charAt(b+1).toUpperCase();b++}}else{h+=n.charAt(b)}}b++}n=h}if(m=="capital each word"){var h="";var b=0;while(b<n.length){if(b==0){h+=n.charAt(b).toUpperCase()}else{if(n.charAt(b)==" "){if(b+1<n.length){h+=" "+n.charAt(b+1).toUpperCase();b++}}else{h+=n.charAt(b)}}b++}n=h}return[n]},Replace:function(b,g,f){var h=aa_text(g,b,"Find",f);var d=aa_text(g,b,"ReplaceWith",f);var n=aa_bool(g,b,"UseRegex",f);var m=aa_bool(g,b,"ReplaceAll",f);var l=aa_text(g,b,"Text",f);var o="";if(m){var a=new RegExp(h,"g")}else{var a=new RegExp(h)}o=l.replace(a,d);return[o]},ToIdText:function(b,d,a){return[aa_string2id(aa_totext(d))]},ToId:function(g,m,f){var a=aa_string2id(aa_text(m,g,"Text",f));var b=ajaxart.run(m,g,"UsedIDs",f),l=",";if(b.length==0){return[a]}for(var d=0;d<b.length;d++){l+=aa_totext([b[d]])+","}while(l.indexOf(","+a+",")>-1){var h=a.charAt(a.length-1);if(h>"0"&&h<"8"){a=a.substring(0,a.length-1)+(parseInt(h)+1)}else{if(h=="9"){a=a.substring(0,a.length-1)+"10"}else{a=a+"1"}}}return[a]},Translate:function(d,f,b){var g=aa_text(f,d,"Text",b);var a=ajaxart_multilang_text(g,b);return[a]},TranslatePattern:function(b,d,a){return ajaxart_multilang_run(d,b,"Pattern",a)},ReplaceWithRegex:function(d,g,m){var f=aa_text(g,d,"Pattern",m);var b=aa_text(g,d,"ReplaceWith",m);var a=aa_text(g,d,"Flags",m);var l=aa_text(g,d,"Text",m);try{return[l.replace(new RegExp(f,a),b)]}catch(h){}return[]},ReplaceMulti:function(b,g,f){var l=ajaxart.run(g,b,"Find",f);var d=ajaxart.run(g,b,"ReplaceWith",f);var n=aa_bool(g,b,"ReplaceAll",f);var m=aa_text(g,b,"Text",f);if(l.length!=d.length){return g}for(var h=0;h<l.length;h++){if(n){var a=new RegExp(l[h],"g")}else{var a=new RegExp(l[h])}m=m.replace(a,d[h])}return[m]},MultiLangSuite:function(d,g,a){var b=aa_text(g,d,"Language",a);aa_mlTable=typeof(aa_mlTable)=="undefined"?{}:aa_mlTable;aa_mlTable[b]=aa_mlTable[b]||{};var l=aa_mlTable[b];var m=ajaxart.xml.xpath(d,"Pattern");for(var f=0;f<m.length;f++){l[m[f].getAttribute("Original")]=m[f].getAttribute("T")||m[f].getAttribute("Tranlation")}var m=ajaxart.xml.xpath(d,"item");for(var h=0;h<m.length;h++){var n=m[h].getAttribute("v")||"";if(n!=""){l[m[h].getAttribute("k")]=n}}},Between:function(b,f,d){var l=aa_text(f,b,"From",d);var m=aa_text(f,b,"To",d);var h=aa_bool(f,b,"IncludeFrom",d);var a=aa_bool(f,b,"IncludeTo",d);var g=ajaxart.totext_array(f);var o=g.indexOf(l);if(o!=-1){if(h){g=g.substring(o)}else{g=g.substring(o+l.length)}}var n=g.indexOf(m);if(n!=-1){if(a){g=g.substring(0,n+m.length)}else{g=g.substring(0,n)}}return[g]},PromoteStartingWith:function(g,l,d){var f=aa_text(l,g,"StartsWith",d);if(f==""){return[]}var a=[];var h=[];for(var b=0;b<l.length;b++){var m=ajaxart.totext_item(l[b]);if(m.indexOf(f)==0){a.push(l[b])}else{h.push(l[b])}}for(var b=0;b<h.length;b++){a.push(h[b])}return a},SplitByCommas:function(f,h,d){var l=aa_text(h,f,"Text",d);var g=l.split(",");var a=[];for(var b=0;b<g.length;b++){if(g[b].length>0){a.push(g[b])}}return a},Pad:function(d,g,b){var f=aa_text(g,d,"Length",b);var a=aa_int(g,d,"Filler",b);var h=aa_text(g,d,"Text",b);while(h.length<f){h=a+h}return[h]},AddToCommaText:function(d,f,a){var l=ajaxart.run(f,d,"Text",a);var g=aa_text(f,d,"ToAdd",a);var b=aa_totext(l);if((","+b+",").indexOf(","+g+",")==-1){var h=(b=="")?g:b+","+g;ajaxart.writevalue(l,[h])}},RemoveFromCommaText:function(d,g,a){var l=ajaxart.run(g,d,"Text",a);var f=aa_text(g,d,"ToRemove",a);var b=aa_totext(l);var m=(","+b+",").indexOf(","+f+",");if(m>-1){var h=b.substring(0,m-1)+b.substring(m+f.length+1);ajaxart.writevalue(l,[h])}},RemoveSuffix:function(b,d,a){var n=aa_text(d,b,"Separator",a);var m=aa_text(d,b,"Suffix",a);var g=aa_bool(d,b,"EmptyIfNoSeparator",a);var l=ajaxart.totext_array(d);if(m.length>0){var h=l.lastIndexOf(m);if(h==l.length-m.length){return[l.substring(0,h)]}}var f=l.lastIndexOf(n);if(f==-1){if(g){return[""]}else{return[l]}}return[l.substring(0,f)]},ToLowerCase:function(b,d,a){return[ajaxart.totext_array(d).toLowerCase()]},ToUpperCase:function(b,d,a){return[ajaxart.totext_array(d).toUpperCase()]},ExtractPrefix:function(g,l,f){var d=aa_text(l,g,"Separator",f);var h=aa_bool(l,g,"UseRegex",f);var m=ajaxart.totext_array(l);if(h){var b=m.search(d)}else{var b=m.indexOf(d)}if(b==-1){return[]}var a="";if(aa_bool(l,g,"KeepSeparator",f)){a=m.substring(0,b+d.length)}else{a=m.substring(0,b)}if(a.legnth==0){a=aa_text(l,g,"Default",f)}return[a]},RemovePrefix:function(f,h,d){var b=aa_text(h,f,"Separator",d);var g=aa_text(h,f,"Prefix",d);var l=ajaxart.totext_array(h);if(g!=""){if(l.indexOf(g)==0){return[l.substring(g.length)]}}if(b==""){return[l]}var a=l.indexOf(b);if(a==-1){return[l]}return[l.substring(a+b.length)]},CountOfSubtext:function(d,f,h){var b=aa_text(f,d,"Text",h);var g=ajaxart.totext_array(f);if(b.length==0){return["0"]}var a=g.split(b);return[""+(a.length-1)]},Encode:function(b,d,g){var f=ajaxart.totext_array(d);var a=unescape(encodeURIComponent(f));return[a]},FastFindResults:function(f,y,d){var w=aa_text(y,f,"Pattern",d).toLowerCase();var p=aa_int(y,f,"MaxItems",d);var v=aa_text(y,f,"CacheIdentifier",d);var l=ajaxart.run(y,f,"ItemSearchFields",d);var b=w.split(" ");var s=b[0];var r=null;if(b.length>0){r=b[1]}var m=null;if(v.length>0){m=aa_text_cacheFastFind[v]}if(m==null){var h=ajaxart.getControlElement(d);if(h.length>0){m=h[0]["FastFindControl"]}}if(m==null){var h=ajaxart.getControlElement(d);m={};m.texts=[];var v=aa_text(y,f,"CacheIdentifier",d);m.values=ajaxart.run(y,f,"AllItems",d);for(var o=0;o<m.values.length;o++){var u="";if(l.length>0){for(var n in l){var a=ajaxart.xml.xpath(m.values[o],l[n],false);if(a.length>0&&a[0].nodeValue!=null){u+=a[0].nodeValue+" "}}}else{u=aa_text([m.values[o]],f,"ItemText",d)}m.texts.push(u.toLowerCase())}if(v.length>0){aa_text_cacheFastFind[v]=m}else{if(h.length>0){h[0]["FastFindControl"]=m}}}var q=[];var t={};for(var o=0;o<m.texts.length;o++){var g=m.texts[o];if(g.indexOf(s)==0){if(r==null||g.indexOf(r)>-1){q.push(m.values[o]);t[o]=true;if(p>0&&q.length>=p){break}}}}for(var o=0;o<m.texts.length;o++){var g=m.texts[o];if(g.indexOf(s)>-1){if(r==null||g.indexOf(r)>-1){if(t[o]!=true){q.push(m.values[o]);if(p>0&&q.length>=p){break}}}}}return q},MatchesRegex:function(b,f,a){var d="^"+aa_text(f,b,"Expression",a)+"$";var g=aa_text(f,b,"Text",a);return g.match(d)?["true"]:[]},FindInText:function(d,h,b){var g=aa_text(h,d,"Pattern",b);var f=aa_bool(h,d,"UseRegex",b);var l=ajaxart.totext_array(h);var a=-1;if(f){a=l.search(g)}else{a=l.indexOf(g)}return[a!=-1]},UrlEncoding:function(f,g,b){var a=ajaxart.totext_array(g);var d=aa_text(g,f,"Type",b);if(d=="encode"){return[encodeURIComponent(a)]}else{return[decodeURIComponent(a)]}},Substring:function(d,f,b){var h=aa_int(f,d,"Start",b);var a=aa_int(f,d,"Stop",b);var g=aa_text(f,d,"Text",b);if(a!=null&&a!=""&&!isNaN(a)){return[g.substring(h-1,a-1)]}else{return[g.substring(h-1)]}},ReplaceNewLines:function(b,d,a){var f=ajaxart.totext(d);return[f]},TimeDifferance:function(g,B,d){var o=aa_text(B,g,"EarlierDate",d);var h=aa_text(B,g,"LaterDate",d);var p=aa_text(B,g,"ShowDifferenaceIn",d);if(o==""||h==""){return[]}var z=aadate_stdDate2DateObj(o);var l=aadate_stdDate2DateObj(h);var q=l.getTime()-z.getTime();var v=l.getFullYear()-z.getFullYear();if(l.getMonth()<z.getMonth()){v--}var n=(l.getMonth()-z.getMonth()+12)%12;if(l.getDate()<z.getDate()){n--}var m=(l.getDate()-z.getDate()+31)%31;if(l.getHours()<z.getHours()){m--}var A=(l.getHours()-z.getHours()+24)%24;if(l.getMinutes()<z.getMinutes()){A--}var w=(l.getMinutes()-z.getMinutes()+60)%60;var f=["Years","Months","Days","Hours","Minutes"];var r=["Year","Month","Day","Hour","Minute"];for(var y=0;y<f.length;y++){f[y]=ajaxart_multilang_text(f[y],d)}for(var y=0;y<r.length;y++){r[y]=ajaxart_multilang_text(r[y],d)}var s="1 %$Time%";var b="%$Amount% %$Time%";var u=ajaxart_multilang_text(" and ",d);var a=[v,n,m,A,w];if(p=="free text, two main differances"||p=="free text, first main differance only"){for(var y=0;y<a.length;y++){if(a[y]==0){continue}var t;if(a[y]==1){t="1 "+r[y]}else{t=a[y]+" "+f[y]}if(p=="free text, two main differances"&&y+1<a.length&&a[y+1]!=0){t+=u;t+=(a[y+1]==1)?"1 "+r[y+1]:a[y+1]+" "+f[y+1]}return[t]}}switch(p){case"years":return[v];case"months":return[n+v*12];case"days":return[Math.floor(q/(1000*60*60*24))];case"hours":return[Math.floor(q/(1000*60*60))];case"minutes":return[Math.floor(q/(1000*60))]}return[""]},Reverse:function(d,f,b){var g=aa_text(f,d,"Text",b);var a="";for(i=0;i<g.length;i++){a=a+g.charAt(g.length-i-1)}return[a]},DecodeMimeType:function(g,o,a){var f=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","20ac","81","201a","0192","201e","2026","2020","2021","02c6","2030","8a","2039","8c","8d","8e","8f","90","2018","2019","201c","201d","2022","2013","2014","02dc","2122","9a","203a","9c","9d","9e","9f","a0","a1","a2","a3","20aa","a5","a6","a7","a8","a9","d7","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","f7","bb","bc","bd","be","bf","05b0","05b1","05b2","05b3","05b4","05b5","05b6","05b7","05b8","05b9","05ba","05bb","05bc","05bd","05be","05bf","05c0","05c1","05c2","05c3","05f0","05f1","05f2","05f3","05f4","f88d","f88e","f88f","f890","f891","f892","f893","05d0","05d1","05d2","05d3","05d4","05d5","05d6","05d7","05d8","05d9","05da","05db","05dc","05dd","05de","05df","05e0","05e1","05e2","05e3","05e4","05e5","05e6","05e7","05e8","05e9","05ea","f894","f895","200e","200f","f896"];function l(w){var v="";for(var y=0;y<w.length;y++){c=w.charCodeAt(y);if(c<256){v+=String.fromCharCode(parseInt(f[c],16))}}return v}function n(v,A){if(A=="windows-1255"){return l(v)}var w="";var y=0;var z=c1=c2=0;while(y<v.length){z=v.charCodeAt(y);if(z<128){w+=String.fromCharCode(z);y++}else{if((z>191)&&(z<224)){c2=v.charCodeAt(y+1);w+=String.fromCharCode(((z&31)<<6)|(c2&63));y+=2}else{c2=v.charCodeAt(y+1);c3=v.charCodeAt(y+2);w+=String.fromCharCode(((z&15)<<12)|((c2&63)<<6)|(c3&63));y+=3}}}return w}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function u(z,w){var v="";var G,E,C;var F,D,B,A;var y=0;z=z.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(y<z.length){F=q.indexOf(z.charAt(y++));D=q.indexOf(z.charAt(y++));B=q.indexOf(z.charAt(y++));A=q.indexOf(z.charAt(y++));G=(F<<2)|(D>>4);E=((D&15)<<4)|(B>>2);C=((B&3)<<6)|A;v=v+String.fromCharCode(G);if(B!=64){v=v+String.fromCharCode(E)}if(A!=64){v=v+String.fromCharCode(C)}}v=n(v,w);return v}function d(w,A){var v="";var y=0;while(y<w.length){if(w.charAt(y)!="="){v+=w.charAt(y);y++}else{var z=parseInt("0x"+w.charAt(y+1)+w.charAt(y+2));y+=3;v+=String.fromCharCode(z)}}v=n(v,A);return v}var s=aa_text(o,g,"Text",a);var b=aa_text(o,g,"Encoding",a);var h=aa_text(o,g,"Charset",a);var t=[s];if(b=="auto"&&s.indexOf("=?")==0){var m=s.split("?");var h=m[1]||h;var r=m[2];var p=m[3];p=p.replace(/ =[\n\r]+/mg,"");if(r=="B"){t=[u(p,h)]}if(r=="Q"){t=[d(p,h)]}}else{if(b=="Base64"){t=[u(s,h)]}else{if(b=="Quoted Printable"){t=[d(s.replace(/ =[\n\r]+/mg,""),h)]}}}return t},SplitLines:function(b,f,a){var g=aa_text(f,b,"Text",a);var d=aa_text(f,b,"NewLineChars",a);return g.split(d)}});function aa_text_trim(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function aa_text_comma_seperate(g){var a=[];var f=0;for(var d=0;d<g.length;d++){if(g[d]==","){if(d==0){f++}else{if(g[d-1]!="\\"){var b=g.substring(f,d);if(b.indexOf("\\,")!=-1){b=b.replace("\\,",",")}a.push(b);f=d+1}}}}if(f<g.length){var b=g.substring(f);if(b.indexOf("\\,")!=-1){b=b.replace("\\,",",")}a.push(b)}return a}function aa_strreverse(a){return a.split("").reverse().join("")}function aa_base64ArrayBuffer(l){var h="";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var u=new Uint8Array(l);var s=u.byteLength;var g=s%3;var t=s-g;var r,p,o,m;var q;for(var f=0;f<t;f=f+3){q=(u[f]<<16)|(u[f+1]<<8)|u[f+2];r=(q&16515072)>>18;p=(q&258048)>>12;o=(q&4032)>>6;m=q&63;h+=n[r]+n[p]+n[o]+n[m]}if(g==1){q=u[t];r=(q&252)>>2;p=(q&3)<<4;h+=n[r]+n[p]+"=="}else{if(g==2){q=(u[t]<<8)|u[t+1];r=(q&64512)>>10;p=(q&1008)>>4;o=(q&15)<<2;h+=n[r]+n[p]+n[o]+"="}}return h}function aa_capitalize_each_word(d){var b="";var a=0;while(a<d.length){if(a==0){b+=d.charAt(a).toUpperCase()}else{if(d.charAt(a)==" "){if(a+1<d.length){b+=" "+d.charAt(a+1).toUpperCase();a++}}else{b+=d.charAt(a)}}a++}return b}ajaxart.gcs.gchart={GoogleChart:function(g,n,b){var s=aa_generic_graph(n,g,b);s.OnClick=function(u){var w=this.items[u[0].row];var v=w.__item||w;var t=aa_ctx(b,{_ItemsOfOperation:[v]});ajaxart.run([v],g,"OnClick",t)};s.PrepareGraphData=function(B){var I=b.vars._Cntr[0];var v=b.vars.DataHolderCntr&&b.vars.DataHolderCntr[0];if(!v){return[]}var C=v.DataHolder.Fields;var F=aa_text(n,g,"Type",b);var t=F=="ScatterChart";var E=aa_text(n,g,"Type",b)=="AnnotatedTimeLine";var D=this.items=aa_items(I);var w=aa_fieldById(aa_text(n,g,"LabelField",b),C);var u=aa_fieldById(aa_text(n,g,"AmountField",b),C);var A=aa_fieldById(aa_text(n,g,"Amount2Field",b),C);var H=aa_fieldById(aa_text(n,g,"Amount3Field",b),C);if(w==null){w=aa_fieldById("Name",C)||aa_fieldById("Id",C)||aa_fieldById("Label",C)}if(w==null){for(var y in C){if(C[y].IsDate){w=C[y];break}}}if(u==null){for(var y in C){if(C[y].IsNumber){u=C[y];break}}}if(u==null||w==null){return}this.Params.hAxis={title:w.Title};if(!A){this.Params.vAxis={title:u.Title}}if(E&&w.IsDate){B.addColumn("date",w.Title)}else{if(w.IsNumber&&t){B.addColumn("number",w.Title)}else{B.addColumn("string",w.Title)}}B.addColumn("number",u.Title);if(A){B.addColumn("number",A.Title)}if(H){B.addColumn("number",H.Title)}B.addRows(D.length);for(var y=0;y<D.length;y++){var J=D[y];var G=ajaxart.totext_array(ajaxart_field_calc_field_data(w,[J],b));var z=parseFloat(ajaxart.totext_array(ajaxart_field_calc_field_data(u,[J],b)))||0;if(E&&w.IsDate){B.setValue(y,1,new Date(z))}else{if(t){B.setValue(y,0,parseFloat(G)||0)}else{B.setValue(y,0,G||"")}}B.setValue(y,1,z);if(A){B.setValue(y,2,parseFloat(ajaxart.totext_array(ajaxart_field_calc_field_data(A,[J],b)))||0)}if(H){B.setValue(y,3,parseFloat(ajaxart.totext_array(ajaxart_field_calc_field_data(H,[J],b)))||0)}}};var l=aa_create_graph_div(s);var a="";var r=b.vars._Cntr[0];var q=aa_items(r);var f=b.vars.DataHolderCntr&&b.vars.DataHolderCntr[0];var p=f.DataHolder.Fields;var h=aa_fieldById(aa_text(n,g,"LabelField",b),p);var d=aa_fieldById(aa_text(n,g,"AmountField",b),p);for(var m=0;m<q.length;m++){a+=ajaxart.totext_array(ajaxart_field_calc_field_data(h,[q[m]],b))+" - "+ajaxart.totext_array(ajaxart_field_calc_field_data(d,[q[m]],b))}var o=document.createElement("div");o.className="aa_test";o.setAttribute("test_string",a);l.appendChild(o);return[l]},PieChart:function(b,f,a){var d={isObject:true,Items:ajaxart.run(f,b,"Items",a)};d.Title=aa_text(f,b,"Title",a);d.ChartClass="google.visualization.PieChart";d.FrameWidth=d.FrameHeight="400px";ajaxart_addMethod(d,"ItemText",b,"ItemText",a);ajaxart_addMethod(d,"ItemAmount",b,"ItemAmount",a);ajaxart_addMethod(d,"OnItemClick",b,"OnItemClick",a);return[aa_piechart(d,a)]},TimelineChart:function(b,f,a){var d={isObject:true,Items:ajaxart.run(f,b,"Items",a).reverse()};d.Title=aa_text(f,b,"Title",a);d.ChartClass="google.visualization.AreaChart";d.GoogleParams=aa_text(f,b,"GoogleParams",a);d.FrameWidth=aa_text(f,b,"FrameWidth",a);d.FrameHeight=aa_text(f,b,"FrameHeight",a);ajaxart_addMethod(d,"ItemText",b,"Date",a);ajaxart_addMethod(d,"ItemAmount",b,"ItemAmount",a);ajaxart_addMethod(d,"OnItemClick",b,"OnItemClick",a);return[aa_piechart(d,a)]}};function aa_piechart(g,d){var a=jQuery('<iframe src="lib/googlechart.html?ver='+ajaxart.build_version+'" style=" border-width:0 " width="'+g.FrameWidth+'" height="'+g.FrameHeight+'" frameborder="0" scrolling="no"/>')[0];a.info={width:450,height:300,chartClass:g.ChartClass,title:g.Title,googleParams:g.GoogleParams};a.info.googleParams="";if(g.GoogleParams!=""){a.info.googleParams=g.GoogleParams}a.info.data=[];for(var b=0;b<g.Items.length;b++){var f=[g.Items[b]],h={item:f};h.text=aa_totext(ajaxart_runMethod(f,g,"ItemText",d));h.amount=aa_toint(ajaxart_runMethod(f,g,"ItemAmount",d));h.onclick=function(l){ajaxart_runMethod(l.item,g,"OnItemClick",d)};a.info.data.push(h)}return a}function aa_load_googlegraph(){if(window.loading_googlegraphs){return}window.loading_googlegraphs=true;jQuery.ajax({url:(window.location.host1=="localhost")?"lib/googlechart.js":"https://www.google.com/jsapi",dataType:"script",success:function(){jQuery(".aa_waiting_for_ggraph_load").each(function(){this.LoadGraph()})}})}function aa_generic_graph(data,profile,context){var graph={isObject:true,Packages:["corechart"],Params:{width:aa_int(data,profile,"FrameWidth",context),height:aa_int(data,profile,"FrameHeight",context),title:aa_text(data,profile,"Title",context),isStacked:aa_bool(data,profile,"Stacked",context),legend:aa_text(data,profile,"Legend",context)},Class:"google.visualization."+aa_text(data,profile,"Type",context),drawChart:function(){var data=new google.visualization.DataTable();this.PrepareGraphData(data);var chart;var out=this.div;var newChart="new "+this.Class+"(out)";try{chart=eval(newChart)}catch(e){}chart.draw(data,this.Params);google.visualization.events.addListener(chart,"select",function(graph){return function(e){var selection=this.getSelection();if(!selection){return}if(graph.OnClick){graph.OnClick(selection)}}}(graph))}};return graph}function aa_create_graph_div(d){var a=document.createElement("div");a.graph=d;d.div=a;function b(f){return function(){jQuery(f).removeClass("aa_waiting_for_ggraph_load");f.graph.drawChart()}}if(!window.google){a.className="aa_waiting_for_ggraph_load";a.LoadGraph=function(){google.load("visualization","1",{packages:d.Packages,callback:b(this)})};aa_load_googlegraph()}else{google.load("visualization","1",{packages:d.Packages,callback:b(a)})}return a}ajaxart.gcs.fusion_chart={FusionChart:function(g,l,f){function h(p){var o=ajaxart.runNativeHelper(p.Items,g,"GraphXml",aa_ctx(f,{ChartId:[p.getAttribute("id")],Items:p.Items}));var q="/ajaxart/lib/chart/charts_library/FCF_"+(aa_bool(l,g,"Stacked",f)?"Stacked":"MS")+aa_text(l,g,"Type",f)+".swf";var n=new FusionCharts(q,"myChartId",aa_text(l,g,"Width",f),aa_text(l,g,"Height",f));var m=ajaxart.xml2text(o);n.setDataXML(m);n.render(p)}if(!window.aa_FusionChartId){aa_FusionChartId=0}aa_FusionChartId++;var b=document.createElement("div");b.setAttribute("id","aa_fusion_chart_"+aa_FusionChartId);var a=b.Items=aa_items(f.vars._Cntr[0]);b.Profile=g;b.Context=f;for(var d=0;d<a.length;d++){a[d].__Index=d}if(!window.infosoftglobal){b.className="aa_waiting_for_fusion_chart_load";b.LoadGraph=function(){h(this)};aa_load_fusion_chart()}else{h(b)}return[b]}};function aa_fusion_eventHandler(h,d,g,b){var a=jQuery().find("#"+h)[0];if(!a){return}var f=a.Items[parseInt(b)+1];ajaxart.run([f],a.Profile,"OnClick",a.Context)}function aa_load_fusion_chart(){if(window.loading_fusion_chart){return}window.loading_fusion_chart=true;jQuery.ajax({url:"lib/chart/charts_library/FusionCharts.js",dataType:"script",success:function(){jQuery(".aa_waiting_for_fusion_chart_load").each(function(){this.LoadGraph()})}})}aa_gcs("operation",{RunInOperationContext:function(f,g,d){var b=jQuery(d.vars.ControlElement);var h=null;while(b.length>0){if(b.hasClass("aa_item")&&!h){h=b[0]}if(b.hasClass("aa_layoutgroup")){h=null}if(b.hasClass("aa_container")&&h){break}b=b.parent()}if(h==null){var a=d}else{var a=aa_ctx(d,{_ElemsOfOperation:[h],_ItemsOfOperation:h.ItemData,_Items:d.vars._Cntr[0].Items})}return ajaxart.run(g,f,"Action",a)},OpenSecondaryItemDetails:function(d,g,a){var l=a.vars._Cntr[0].Items[0];var m=aa_ctx(a,{_Transactional:ajaxart.run(g,d,"Transactional",a),_InnerItem:a.vars._ItemsOfOperation});var h=m.vars._InnerItems=ajaxart_runMethod(g,l,"Subset",m);if(h.length==0){var f={isObject:true,Items:m.vars._InnerItem};f.Save=function(n,o){var p=aa_getXmlInfo(this.Items[0],a);if(p.Save){return p.Save(n,o)}};h=m.vars._InnerItems=[f]}if(h.length==0){return[]}if(aa_bool(g,d,"ReadOnly",a)){h[0].ReadOnly=["true"]}var b=function(n){return function(){var s=a.vars._Cntr[0];var q=[n.Items[0]];ajaxart.run(q,d,"ChangeItemBeforeOpen",a);var p={isObject:true,DataItems:n};var u=aa_ctx(a,{_InnerItems:[n],_PageParams:[p],_Transactional:ajaxart.run(g,d,"Transactional",a)});var r=aa_first(q,d,"ItemPage",a);var o={isObject:true};var t=aa_getXmlInfo(n.Items[0],a);if(t&&t.PrepareForEdit){t.PrepareForEdit([],u)}aa_init_itemdetails_object(o,q,t,n,r,a);u.vars._ItemDetailsObject=[o];u.vars.DetailsControl=ajaxart_runMethod(q,r,"Control",u);u.vars.ItemPage=[r];return ajaxart.run(q,d,"OpenIn",u)}};ajaxart_RunAsync(g,h[0].Prepare,a,b(h[0]));return["true"]},RunOperationFromParent:function(f,g,b){var a=b.vars._ItemDetailsObject[0].ParentCntr;var m=aa_text(g,f,"Operation",b);var d=ajaxart_runMethod([],a,"Operations",b);var l=ajaxart_object_byid(d,m);if(l!=null){var h=aa_ctx(b,{_ElemsOfOperation:b.vars._ItemDetailsObject[0].ElemsOfOperation,_Cntr:[a]});ajaxart_runMethod(g,l,"Action",h)}},Refresh:function(d,f,b){var g=b.vars._Cntr[0].Items[0];g.Wrappers=null;var a=function(){var m=b.vars._Cntr[0].Ctrl;return ajaxart.gcs.uiaction.Refresh(d,[],aa_ctx(b,{ControlElement:[m]}))};var h=aa_frombool(!aa_bool(f,d,"AlsoFromServer",b));var l=aa_ctx(b,{_NoRefreshFromServer:h});ajaxart_runMethod_async([],g,"Refresh",l,a);return[]},ChangeTab:function(b,n,a){var r=aa_text(n,b,"MoveTo",a);var l=aa_text(n,b,"TabToMoveTo",a);var h=aa_text(n,b,"TabControl",a);var d=aa_first(n,b,"Animation",a);var q=ajaxart.xml.root(a.vars.ControlElement[0]);var s=jQuery(q).find(".aa_tabcontrol").get();var t=jQuery(a.vars.ControlElement[0]).closest(".aa_tabcontrol.fld_"+h);if(t[0]){s.unshift(t[0])}for(var m=0;m<s.length;m++){var o="";if(s[m].Field){o=s[m].Field.Id||aa_totext(s[m].Field.ID)}if(s[m].Cntr){o=aa_totext(s[m].Cntr.ID)}if(o==h){if(s[m].jbContext){if(s[m].jbContext.vars._BartContext[0]!=a.vars._BartContext[0]){continue}}var p=s[m].TabControl.Tabs;if(s[m].RefreshTabsHead){s[m].RefreshTabsHead()}if(r=="specific tab"){for(var g=0;g<p.length;g++){if(p[g].Field.Id==l){if(p[g].Select){p[g].Select(null,d)}else{if(p[g].onmousedown){p[g].onmousedown()}}return}}}else{var f=jQuery(p).filter(".aa_selected_tab")[0];if(r=="refresh current tab"){f.Select(null,d)}if(r=="next tab"&&f.nextSibling){f.nextSibling.Select(null,d)}if(r=="previous tab"&&f.previousSibling){f.previousSibling.Select(null,d)}}return}}return},Copy:function(b,d,a){var h={isObject:true,isOperation:true};h.Id=aa_text(d,b,"Copy",a);var g=function(l,m){var o=m.vars._Cntr[0];var n=m.vars._ItemsOfOperation;if(n.length>0){document.aa_clipboard=n[0];document.aa_cut=false}return[]};ajaxart_addScriptParam_js(h,"Action",g,a);h.Shortcut=aa_text(d,b,"Shortcut",a);ajaxart_addMethod(h,"Icon",b,"Icon",a);ajaxart_addMethod(h,"Title",b,"Title",a);h.Disabled=function(l,m){return aa_bool(l,b,"Disabled",aa_merge_ctx(a,m))};var f=aa_ctx(a,{_Operation:[h]});ajaxart.runsubprofiles(d,b,"Aspect",f);return[h]},Cut:function(b,f,a){var h={isObject:true,isOperation:true};h.Id=aa_text(f,b,"Cut",a);var d=function(l,m){var o=m.vars._Cntr[0];var n=m.vars._ItemsOfOperation;if(n.length>0){document.aa_clipboard=n[0];document.aa_cut=true}return[]};ajaxart_addScriptParam_js(h,"Action",d,a);h.Shortcut=aa_text(f,b,"Shortcut",a);ajaxart_addMethod(h,"Icon",b,"Icon",a);ajaxart_addMethod(h,"Title",b,"Title",a);h.Disabled=function(l,m){return aa_bool(l,b,"Disabled",aa_merge_ctx(a,m))};var g=aa_ctx(a,{_Operation:[h]});ajaxart.runsubprofiles(f,b,"Aspect",g);return[h]},Paste:function(b,f,a){var h={isObject:true,isOperation:true};h.Id=aa_text(f,b,"Paste",a);var d=function(l,n){var p=n.vars._Cntr[0];var o=n.vars._ItemsOfOperation;if(o.length>0){var m=aa_ctx(a,{Clipboard:document.aa_clipboard});ajaxart.run(o,b,document.aa_cut?"CutPasteAction":"CopyPasteAction",m)}return[]};ajaxart_addScriptParam_js(h,"Action",d,a);h.Shortcut=aa_text(f,b,"Shortcut",a);ajaxart_addMethod(h,"Icon",b,"Icon",a);ajaxart_addMethod(h,"Title",b,"Title",a);h.Disabled=function(l,m){return aa_bool(l,b,"Disabled",aa_merge_ctx(a,m))};var g=aa_ctx(a,{_Operation:[h]});ajaxart.runsubprofiles(f,b,"Aspect",g);return[h]},ContextMenu:function(d,g,b){var l={isObject:true,Items:[],IncludeOperationsFromParent:true};l.Presentation=function(n,o){return aa_run_component("ui.ButtonAsHyperlink",n,o)};var f=b.vars._Cntr[0];var m=aa_ctx(b,{_Menu:[l],_ElemsOfOperation:f.ElemsOfOperation(),_ItemsOfOperation:f.ItemsOfOperation()});var h=ajaxart.runsubprofiles(g,d,"MenuAspect",m);for(var a=0;a<h.length;a++){if(h[a].addOperations){h[a].addOperations()}}return[l]},OperationsUnderSelectedItem:function(b,d,a){return[{isObject:true,addOperations:function(){var f=a.vars._Menu[0];var q=a.vars._Cntr[0];var p=[];var o=aa_text(d,b,"Target",a);var g=jQuery(q.Ctrl).find(".aa_selected_item");var l=g.parents(".aa_container")[0];if(l!=null&&l.Cntr!=q){p=ajaxart.runScriptParam(d,l.Cntr.Operations,l.Cntr.Context)}for(var h=0;h<p.length;h++){var m=p[h];if(!m.Target||m.Target[0]=="item"){var n=jQuery(a.vars._ElemsOfOperation[0]).parents(".aa_container")[0];if(n==null||n.Cntr==m.Context.vars._Cntr[0]){f.Items.push(m)}}else{if(m.Target&&m.Target[0]=="new"&&(o=="new"||o=="all")){f.Items.push(m)}else{if(m.Target&&m.Target[0]=="items"&&o=="all"){f.Items.push(m)}}}}return[]}}]},OperationsByIDs:function(b,d,a){return[{isObject:true,addOperations:function(){var m=a.vars._Menu[0];var l=a.vars._Cntr[0];var g=aa_text(d,b,"OperationIDs",a).split(",");var f=[];for(var h=0;h<g.length;h++){op=ajaxart_object_byid(m.Items,g[h]);if(op!=null){f.push(op)}}m.Items=f;return[]}}]},Validate:function(g,h,f){var b=aa_text(h,g,"Group",f);var a=[];var l=aa_intest?aa_intest_topControl:document;var a=b?jQuery(l).find(".fld_"+b).get():[];for(var d=0;d<a.length;d++){if(!aa_passing_validations(a[d])){return}}ajaxart.run(h,g,"WhenValid",f)},PrintElement:function(d,h,b){if(ajaxart.inPreviewMode){return}var g=jQuery(b.vars.ControlElement);var a=aa_text(h,d,"Selector",b);if(a!=""){g=g.find(a);if(!g[0]){g=jQuery(a)}}var f=g[0];if(!f){return}if(!jQuery(f).printElement){ajaxart.log("jquyery print plugin must be included in the html (http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement)");return}jQuery(f).printElement()},IncludeItemOperationsFromParent:function(b,d,a){var f=a.vars._Menu[0];f.IncludeOperationsFromParent=aa_bool(d,b,"Include",a);return[]},Presentation:function(b,d,a){var f=a.vars._Menu[0];ajaxart_addMethod(f,"Presentation",b,"Style",a);return[]},ExportToExcel:function(b,g,a){var q=a.vars._Cntr[0];var h=q.Fields;var m=aa_items(q);var l=jQuery("<table/>");var o=jQuery("<tr>");l.append(o);for(var d=0;d<h.length;d++){var p=h[d];o.append(jQuery("<th>"+p.Title+"</th>"))}for(var f=0;f<m.length;f++){var s=m[f];var o=jQuery("<tr>");l.append(o);for(var d=0;d<h.length;d++){var p=h[d];var n=p.FieldData([s],a);var r=ajaxart_field_text(p,n,[s],a);o.append(jQuery("<td>"+r+"</td>"))}}ajaxart.runNativeHelper(l.get(),b,"Open",a)},Search:function(b,f,a){var o=(a.vars.HeaderFooterCntr||a.vars._Cntr)[0];if(o==null){return}aa_recalc_filters_and_refresh(o,a.vars._Item,a);var h=aa_text(f,b,"MorePagesToRefresh",a).split(",");for(var g in h){var l=h[g];var m=aa_intest?jQuery(o.Ctrl).parents().slice(-1):jQuery();var n=m.find(".aa_container").filter(function(){return this.Cntr.ID[0]==l})[0];if(n){var d=n.Cntr;d.FilteredWrappers=o.FilteredWrappers;aa_refresh_itemlist(d,a)}}return[]},RunJavascript:function(b,d,a){aa_run_js_code(aa_text(d,b,"Code",a),d,a);return[]}});ajaxart.suggestbox={};ajaxart.contextWithControlToRunOn=function(a,b){var d=ajaxart.clone_context(a);d.vars.ControlElement=b;return d};ajaxart.suggestbox.attachToTextbox=function(g,f,d,b){if(g.length==0){return}ajaxart.suggestbox.setTextBoxValue(g,f,d,b);var a=aa_text(g,f,"MaxItems",d);jQuery(b).addClass("suggestion_box_input");jQuery(b).blur(function(l){var h=(typeof(l.target)=="undefined")?l.srcElement:l.target;if(jQuery(h).parents(".suggestionpopup").length>0){return}setTimeout(function(){ajaxart.suggestbox.setValue(g,f,d,b,false)},300)});jQuery(b).click(function(h){if(this.value==""){ajaxart.suggestbox.openPopup(g,f,d,b,true)}});jQuery(b).focus(function(l){if(this.value==""){var h=ajaxart.run(g,f,"Options",d);if(h.length>0&&h.length<=a){ajaxart.suggestbox.openPopup(g,f,d,b,true)}}});jQuery(b).keydown(function(h){if(h.keyCode==27){if(ajaxart.suggestbox.isPopupOpen()){jQuery(ajaxart.ui.suggestBoxPopup).hide();ajaxart_stop_event_propogation(h)}}if(h.keyCode==13&&ajaxart.suggestbox.isPopupOpen()){ajaxart_stop_event_propogation(h)}});jQuery(b).keyup(function(n){if(n.keyCode==27){if(ajaxart.suggestbox.isPopupOpen()){ajaxart_stop_event_propogation(n)}return}if(n.keyCode==9){ajaxart_stop_event_propogation(n);return}if(n.keyCode==13){if(ajaxart.suggestbox.isPopupOpen()){ajaxart.suggestbox.setValue(g,f,d,b,true);ajaxart_stop_event_propogation(n)}return}if(n.keyCode==38||n.keyCode==40){var l=jQuery(ajaxart.ui.suggestBoxPopup).find(".selected:visible");if(l.length==0){if(ajaxart.ui.suggestBoxPopup.allowTextNotInOptions){var m=jQuery(ajaxart.ui.suggestBoxPopup).find(".suggestion_item");if(m.length>0){jQuery(m[0]).addClass("selected")}}return}var h=null;if(n.keyCode==38){h=l[0].previousSibling;while(h!=null&&h.style.display=="none"){h=h.previousSibling}}if(n.keyCode==40){h=l[0].nextSibling;while(h!=null&&h.style.display=="none"){h=h.nextSibling}}if(h!=null){l.removeClass("selected");jQuery(h).addClass("selected")}return}ajaxart.suggestbox.openPopup(g,f,d,b,false)})};ajaxart.suggestbox.setValue=function(m,h,d,o,n){var a=aa_bool(m,h,"AllowTextNotInOptions",d);if(ajaxart.ui.suggestBoxPopupInput!=o){return}var l=jQuery(ajaxart.ui.suggestBoxPopup);var f=l.find(".selected:visible");if(f.length>0&&f[0].ajaxart_menu!=null&&n){var g=ajaxart.clone_context(d);g.vars.ControlElement=[o];g.vars.SuggestionBoxText=[o.value];ajaxart.run_xtml_object(m,f[0].ajaxart_menu.Action,g);return}var b="";if(a){b=o.value}if(f.length>0&&f[0].ajaxart_menu==null){var b=f[0].ajaxart_value}if(o.value==""&&!n){b=""}if(f.length==0&&!a&&!n){ajaxart.suggestbox.setTextBoxValue(m,h,d,o);return}else{if(a&&!n){b=o.value}else{ajaxart.suggestbox.setTextBoxValue([b],h,d,o)}}ajaxart.writevalue(m,[b]);ajaxart.run(m,h,"OnUpdate",ajaxart.contextWithControlToRunOn(d,[o]));l.hide()};ajaxart.suggestbox.setTextBoxValue=function(g,f,d,a){jQuery(a).removeClass("suggetion_text_for_empty");var b=aa_text(g,f,"OptionLabelInTextbox",d);if(b==""){b=ajaxart.totext(g)}if(b==""){b=aa_text(g,f,"TextForEmpty",d);if(b!=""){jQuery(a).addClass("suggetion_text_for_empty")}}if(b.indexOf("_")==0){b=b.substring(1)}a.value=b};ajaxart.suggestbox.openPopup=function(L,l,f,E,v){var H=aa_text(L,l,"MaxItems",f);var J=true;if(ajaxart.ui.suggestBoxPopupInput!=E){var a=ajaxart.ui.suggestBoxPopup;if(a!=null&&a.parentNode!=null){aa_remove(a,true)}ajaxart.ui.suggestBoxPopup=document.createElement("div");jQuery(ajaxart.ui.suggestBoxPopup).addClass("aapopup suggestionpopup");var z=true,d=true,p=false;if(l.getAttribute("OptionLabel")!=null||ajaxart.xml.xpath(l,"OptionLabel").length>0){p=true}var t=[];var m=ajaxart.run(L,l,"Options",f);var b=false;for(var I=0;I<m.length;I++){var C=m[I];var n="";if(p){n=aa_text([C],l,"OptionLabel",f)}else{n=ajaxart.totext(C)}var G="",B="";if(z){G=aa_text([C],l,"OptionDescription",f)}if(d){B=aa_text([C],l,"OptionImage",f)}var u=document.createElement("div");jQuery(u).addClass("suggestion_item");u.ajaxart_value=C;u.ajaxart_text=n.toLowerCase();var s=document.createElement("div");s.innerHTML=n;u.appendChild(s);if(d){s.style.backgroundImage="url("+B+")";jQuery(s).addClass("suggestion_withimage")}if(G!=null){var h=document.createElement("div");jQuery(h).addClass("suggestion_description");h.innerHTML=G;u.appendChild(h)}ajaxart.ui.suggestBoxPopup.appendChild(u);t.push(u);if(I>=H){u.style.display="none";b=true}}ajaxart.ui.suggestBoxPopup.aaitems=t;var r=jQuery('<div class="suggestion_item suggestion_menuitem suggestion_more">more</div>')[0];ajaxart.ui.suggestBoxPopup.appendChild(r);ajaxart.ui.suggestBoxPopup.aamore=r;ajaxart.ui.suggestBoxPopup.aamore.style.display=(b)?"block":"none";var K=ajaxart.runsubprofiles(L,l,"AdditionalMenuItem",f);for(var I=0;I<K.length;I++){var u=document.createElement("div");jQuery(u).addClass("suggestion_item suggestion_menuitem");u.ajaxart_menu=K[I];var s=document.createElement("div");s.innerHTML=ajaxart.totext(u.ajaxart_menu.Text);u.appendChild(s);var g=u.ajaxart_menu.Image;if(g!=null&&g!=""){s.style.backgroundImage="url("+g+")";jQuery(s).addClass("suggestion_withimage")}ajaxart.ui.suggestBoxPopup.appendChild(u);ajaxart.ui.suggestBoxPopup.aaitems.push(u)}ajaxart.ui.suggestBoxPopup.allowTextNotInOptions=aa_bool(L,l,"AllowTextNotInOptions",f);jQuery(ajaxart.ui.suggestBoxPopup.aaitems).hover(function(){jQuery(this.parentNode).find(".selected:visible").removeClass("selected");jQuery(this).addClass("selected")},function(){});ajaxart.ui.suggestBoxPopupInput=E;jQuery(ajaxart.ui.suggestBoxPopup).click(function(O){var N=(typeof(O.target)=="undefined")?O.srcElement:O.target;if(!jQuery(N.parentNode).hasClass("suggestion_item")||jQuery(N.parentNode).hasClass("suggestion_more")){return}var M=jQuery(ajaxart.ui.suggestBoxPopup);M.find(".selected").removeClass("selected");jQuery(N).parent().addClass("selected");ajaxart.suggestbox.setValue(L,l,f,E,true)});jQuery("body").append(jQuery(ajaxart.ui.suggestBoxPopup))}var o=jQuery(ajaxart.ui.suggestBoxPopup);jQuery(ajaxart.ui.suggestBoxPopup).width(jQuery(E).width()-5);ajaxart.ui.suggestBoxPopup.style.display="block";ajaxart.dialog.positionPopup(jQuery(ajaxart.ui.suggestBoxPopup),E);var A=E.value.toLowerCase();var q=0;var D=ajaxart.ui.suggestBoxPopup.aaitems;var F=false;var b=false;if(ajaxart.ui.suggestBoxPopup.allowTextNotInOptions){F=true}for(var I=0;I<D.length;I++){if(D[I].ajaxart_menu!=null){if(!F){jQuery(D[I]).addClass("selected");F=true}continue}if(q>=H){D[I].style.display="none";b=true}else{var y=D[I].ajaxart_text.indexOf(A);var w=(J&&y!=-1)||(!J&&y==0);if(!v&&!w){D[I].style.display="none"}else{D[I].style.display="block";q++;if(!F){jQuery(D[I]).addClass("selected");F=true}else{jQuery(D[I]).removeClass("selected")}}}}ajaxart.ui.suggestBoxPopup.aamore.style.display=(b)?"block":"none";if(q==0){ajaxart.suggestbox.closePopup()}};ajaxart.suggestbox.closePopup=function(){jQuery(ajaxart.ui.suggestBoxPopup).hide()};ajaxart.suggestbox.isPopupOpen=function(){return(ajaxart.ui.suggestBoxPopup!=null&&jQuery(ajaxart.ui.suggestBoxPopup).css("display")=="block")};ajaxart.customsuggestbox={};ajaxart.customsuggestbox.init=function(f,d,b,a){aa_field_handler(f,"ModifyControl",function(g,o,m,h,n){if(ajaxart_field_is_readOnly(h.vars._Cntr[0],g.Field,h)){return}var l=jQuery(g).find(".field_control")[0];l.profile=b;l.context=a;l.data=o;jQuery(l).keypress(function(p){if(p.charCode==32&&p.ctrlKey){ajaxart.run(d,b,"OnCtrlSpace",ajaxart.ui.contextWithCurrentControl(a,this));return false}return true});jQuery(l).focus(function(r){if(ajaxart.getVariable(a,"_Context").length==0&&l.context_calculated==null){var q=ajaxart.getVariable(a,"_XtmlDt");if(q==null||q.length==0){return}var p=q[0]["Context"];ajaxart.setVariable(a,"_Context",ajaxart.runScriptParam(d,p,aa_ctx(a,{_FieldData:o})));l.context_calculated=true}});jQuery(l).change(function(q){var p=ajaxart.totext(d);ajaxart.writevalue(d,this.value);ajaxart.run(d,b,"OnUpdate",ajaxart.ui.contextWithCurrentControl(a,this))})});aa_field_handler(f,"OnKeydown",function(l,m,g,h){if(h.keyCode==27){if(ajaxart.suggestbox.isPopupOpen()){jQuery(ajaxart.ui.suggestBoxPopup).hide();ajaxart_stop_event_propogation(h)}}if(h.keyCode==13&&ajaxart.suggestbox.isPopupOpen()){ajaxart_stop_event_propogation(h)}});aa_field_handler(f,"OnKeyup",function(r,q,s,o){if(o.keyCode==27){if(ajaxart.suggestbox.isPopupOpen()){ajaxart_stop_event_propogation(o)}return}if(o.keyCode==13){if(ajaxart.suggestbox.isPopupOpen()){var m=jQuery(ajaxart.ui.suggestBoxPopup).find(".selected:visible");if(m.length>0){jQuery(ajaxart.ui.suggestBoxPopup).hide();var n=m[0].ajaxart_text;if(s.openedWithTrigger){n=aa_text([n],s.triggerProfile,"TextPatternToAdd",s.triggerContext)}s.value=s.value+n;ajaxart.writevalue(q,s.value);ajaxart_runMethod([m[0].ajaxart_value],ajaxart.ui.suggestBoxPopup,"OnSelect",a);s.openedWithTrigger=false;ajaxart.run(q,b,"OnAfterTextAdded",ajaxart.ui.contextWithCurrentControl(a,s));ajaxart.run(q,b,"OnUpdate",ajaxart.ui.contextWithCurrentControl(a,s));ajaxart_stop_event_propogation(o)}}return}var l=ajaxart.totext(q);ajaxart.writevalue(q,s.value);if(l!=s.value){ajaxart.run(q,b,"OnUpdate",ajaxart.ui.contextWithCurrentControl(a,s))}var t="";if(o.keyCode==9){ajaxart_stop_event_propogation(o)}else{if(o.keyCode==38||o.keyCode==40){var h=jQuery(ajaxart.ui.suggestBoxPopup).find(".selected:visible");var g=null;if(o.keyCode==38){g=h[0].previousSibling}if(o.keyCode==40){g=h[0].nextSibling}if(g!=null){h.removeClass("selected");jQuery(g).addClass("selected")}ajaxart_stop_event_propogation(o)}else{if(l!=s.value&&ajaxart.ui.suggestBoxPopup!=null){jQuery(ajaxart.ui.suggestBoxPopup).hide()}var p=s.selectionEnd;if(p==null||p==s.value.length){if(!(o.keyCode==32&&o.ctrlKey)&&o.keyCode!=17&&o.keyCode!=16){s.openedWithTrigger=false;ajaxart.run(q,b,"OnChangeAtEndOfText",ajaxart.ui.contextWithCurrentControl(a,s))}}}}})};ajaxart.customsuggestbox.openSuggestionBoxList=function(f,G,b){var z=ajaxart.getControlElement(b,true);if(z==null){return[]}var a=document.createElement("table");a.setAttribute("cellpadding","0");a.setAttribute("cellspacing","0");var y=aa_text(G,f,"HalfWrittenPart",b);var A=aa_bool(G,f,"HalfWrittenAlwaysOnStart",b);var q=aa_bool(G,f,"FilterItemsDifferantThanHalfWrittern",b);var m=y.toLowerCase();ajaxart_addMethod(a,"OnSelect",f,"OnSelect",b);var t=ajaxart.compile(f,"OptionLabel",b);var g=ajaxart.run(G,f,"Options",b);var s=true;for(var E=0;E<g.length;E++){var v=g[E];var h=ajaxart_runcompiled_text(t,[v],f,"OptionLabel",b);if(h.indexOf("__")==0){continue}if(y!=""&&h.indexOf(y)!=0&&A){continue}if(q&&y!=""&&h.toLowerCase().indexOf(m)==-1){continue}if(q&&y!=""&&h.length==y.length){continue}var C=aa_text([v],f,"OptionDescription",b);var w=aa_text([v],f,"OptionImage",b);var r=document.createElement("tr");jQuery(r).addClass("suggestion_item");if(s){s=false;jQuery(r).addClass("selected")}r.ajaxart_value=v;r.ajaxart_text=h;var p=document.createElement("td");r.appendChild(p);var o;if(y!=""&&A){var B=document.createElement("span");B.className="half_written";jQuery(B).text(y);p.appendChild(B);var F=h.substring(y.length);var u=document.createElement("span");jQuery(u).text(F);p.appendChild(u);u.className="suggestion_text";o=B;r.ajaxart_text=F}else{if(y!=""&&!A){var n=h.toLowerCase().indexOf(m);if(n==-1){o=document.createElement("span");jQuery(o).text(h);p.appendChild(o);o.className="suggestion_text"}else{var l=document.createElement("span");jQuery(l).text(h.substring(0,n));p.appendChild(l);var D=h.substring(n,n+y.length);var B=document.createElement("span");B.className="half_written";jQuery(B).text(D);p.appendChild(B);var F=h.substring(n+y.length);var u=document.createElement("span");jQuery(u).text(F);p.appendChild(u);u.className="suggestion_text";o=l;r.ajaxart_text=F}}else{o=document.createElement("span");jQuery(o).text(h);p.appendChild(o);o.className="suggestion_text"}}if(w!=null){o.style.backgroundImage="url("+w+")";jQuery(o).addClass("suggestion_withimage")}if(C!=null){var d=document.createElement("span");jQuery(d).addClass("suggestion_description");if(C.length>30){C=C.substring(0,30)+"..."}ajaxart_set_text(d,C);r.appendChild(d);var p=document.createElement("td");p.style.width="100%";p.appendChild(d);r.appendChild(p)}a.appendChild(r);jQuery(r).hover(function(){jQuery(this.parentNode).find(".selected:visible").removeClass("selected");jQuery(this).addClass("selected")},function(){});jQuery(r).click(function(K){var I=(typeof(K.target)=="undefined")?K.srcElement:K.target;var J=jQuery(I).parents(".suggestion_item");if(J.length==0){return}var H=jQuery(ajaxart.ui.suggestBoxPopup);jQuery(ajaxart.ui.suggestBoxPopup).hide();var L=J[0].ajaxart_text;if(z.openedWithTrigger){L=aa_text([L],z.triggerProfile,"TextPatternToAdd",z.triggerContext)}z.value=z.value+L;ajaxart.writevalue(ajaxart.ui.suggestBoxPopup.textbox.ajaxart.data,z.value);ajaxart_runMethod([J[0].ajaxart_value],ajaxart.ui.suggestBoxPopup,"OnSelect",b);z.openedWithTrigger=false;ajaxart.run(z.data,z.profile,"OnAfterTextAdded",ajaxart.ui.contextWithCurrentControl(z.context,z));ajaxart.run(z.data,z.profile,"OnUpdate",ajaxart.ui.contextWithCurrentControl(z.context,z));ajaxart.ui.suggestBoxPopup.textbox.focus()})}if(!s){ajaxart.customsuggestbox.openPopup(a,z)}else{if(ajaxart.ui.suggestBoxPopup){jQuery(ajaxart.ui.suggestBoxPopup).hide()}}};ajaxart.customsuggestbox.openSuggestionBoxPopup=function(d,f,b){var a=ajaxart.getControlElement(b,true);if(a==null){return[]}var g=aa_first(f,d,"Control",b);if(g!=null){ajaxart.customsuggestbox.openPopup(g,a)}return[]};ajaxart.customsuggestbox.openPopup=function(f,d){var a=ajaxart.ui.suggestBoxPopup;if(a!=null&&a.parentNode!=null){a.parentNode.removeChild(a)}ajaxart.ui.suggestBoxPopup=f;ajaxart.ui.suggestBoxPopup.textbox=d;jQuery(ajaxart.ui.suggestBoxPopup).addClass("aapopup suggestionpopup customsuggestionpopup");var b=jQuery('<IMG src="images/close2.png" class="suggestionpopup_close_button"></IMG>');b.click(function(h){ajaxart_stop_event_propogation(h);jQuery(ajaxart.ui.suggestBoxPopup).hide();d.focus()});ajaxart.ui.suggestBoxPopup.appendChild(b[0]);jQuery("body").append(jQuery(ajaxart.ui.suggestBoxPopup));var g=jQuery(d).width()-5;if(g<300){g=300}jQuery(ajaxart.ui.suggestBoxPopup).width(g);ajaxart.ui.suggestBoxPopup.style.display="block";ajaxart.dialog.positionPopup(jQuery(ajaxart.ui.suggestBoxPopup),d)};ajaxart.customsuggestbox.addTextToSuggestionBox=function(d,f,b){var g=aa_text(f,d,"Text",b);var a=ajaxart.getControlElement(b,true);if(ajaxart.ui.suggestBoxPopup!=null&&ajaxart.ui.suggestBoxPopup.textbox!=null){a=ajaxart.ui.suggestBoxPopup.textbox}if(a.openedWithTrigger){g=aa_text([g],a.triggerProfile,"TextPatternToAdd",a.triggerContext)}a.value=a.value+g;ajaxart.writevalue(a.data,a.value);a.focus();if(ajaxart.ui.suggestBoxPopup!=null){jQuery(ajaxart.ui.suggestBoxPopup).hide()}a.openedWithTrigger=false;var h=a.context||a.jbContext;if(aa_bool(f,d,"TriggerOnAfterTextAdded",b)){ajaxart.run(a.data,a.profile,"OnAfterTextAdded",ajaxart.ui.contextWithCurrentControl(h,a))}ajaxart.run(a.data,a.profile,"OnUpdate",ajaxart.ui.contextWithCurrentControl(h,a));if(aa_bool(f,d,"TriggerPopup",b)){ajaxart.run(f,a.profile,"OnChangeAtEndOfText",ajaxart.ui.contextWithCurrentControl(h,a))}};ajaxart.customsuggestbox.triggerSuggestionBoxPopup=function(d,g,b){var a=ajaxart.getControlElement(b,true);if(a==null){return[]}var f=ajaxart.run(g,d,"TextToSimulate",b);a.openedWithTrigger=true;a.triggerProfile=d;a.triggerContext=b;ajaxart.run(f,a.profile,"OnChangeAtEndOfText",ajaxart.ui.contextWithCurrentControl(a.context,a))};aa_gcs("ui",{ControlUsage:function(d,h,a){window.aa_intest_topControl=null;ajaxart.serverData["Usage Data"]=h;ajaxart.run(h,d,"RunBefore",a);var g=ajaxart.run(h,d,"Control",a);if(g.length==0){return["no control"]}window.aa_intest_topControl=g[0];var b=aa_ctx(a,{ControlElement:g,TopControlForTest:g,TopControlElement:g,InTest:["true"]});aa_intest=true;try{if(a.vars._TestOutput){if(a.vars._TestOutput[0].OutputControl){a.vars._TestOutput[0].OutputControl[0].appendChild(g[0]);aa_fixTopDialogPosition()}else{a.vars._TestOutput[0].OutputControl=g[0]}}ajaxart.run(h,d,"RunOnControl",b);if(aa_text(h,d,"ResultType",a)=="Data"){var n=h}else{var n=b.vars.TopControlElement}var f=aa_bool(n,d,"ExpectedResult",b);ajaxart.run(h,d,"CleanAfter",b);window.aa_intest_topControl=null;if(openDialogs.length>0){var m=openDialogs[openDialogs.length-1];if(!jQuery(m.dialogContent).hasClass("aaeditor")){aa_remove(ajaxart.dialog.closeDialog(m),true)}}}catch(l){aa_intest=false;ajaxart.logException(l)}aa_intest=false;if(f==false){return n}return[]},ControlUsage_Result:function(b,d,a){ajaxart.run(d,b,"RunBefore",a);return ajaxart.run(d,b,"Control",a)},ControlData:function(f,g,b){var d=aa_text(g,f,"Type",b);var h=ajaxart.run(g,f,"Control",b);if(!ajaxart.ishtml(h)){return[]}var l=h[0]["ajaxart"];if(typeof(l)=="undefined"){return h[0].ItemData}if(d=="data"){return l.data}if(d=="original_data"){if(l.origData==null){return l.data}else{return l.origData}}if(d=="script"){return[l.script]}if(d=="context"){return[l.params]}if(d=="all"){var a={isObject:true};a.input=l.data;if(l.origData!=null){a.input=l.origData}a.script=l.script;a.context=l.params;return[a]}return[]},ControlInObject:function(b,d,a){var f=aa_first(d,b,"Object",a);f.ControlHolder=ajaxart.run(d,b,"Control",a);if(!f.ControlHolder[0]){f.ControlHolder=[document.createElement("div")]}f.ControlHolder[0].ParentObject=[f];return f.ControlHolder},FindControlData:function(f,l,b){var d=aa_first(l,f,"StartWith",b);var g=aa_text(l,f,"Direction",b);var m=aa_text(l,f,"Type",b);if(!ajaxart.ishtml(d)){return[]}if(g=="up"){d=d.parentNode;while(d!=null){if("ajaxart" in d){return h(d)}d=d.parentNode}}if(g=="down"){var n=a(d);if(n!=null){return n}}return[];function a(p){if("ajaxart" in p){return h(p)}var q=p.firstChild;while(q!=null){if(q.nodeType==1){var o=a(q);if(o!=null){return o}}q=q.nextSibling}return null}function h(p){var q=p.ajaxart;if(typeof(q)=="undefined"){return[]}if(m=="data"){return q.data}if(m=="script"){return[q.script]}if(m=="all"){var o={isObject:true};o.input=q.data;o.script=q.script;o.context=q.params;return[o]}return[]}},AttachGlobalCss:function(b,d,a){return[aa_attach_global_css(aa_text(d,b,"Css",a),null,aa_text(d,b,"Name",a))]},UseDataBoundParams:function(b,g,h){if(!ajaxart.ishtml(g)){return g}for(var a=0;a<g.length;a++){var f=g[a];if(typeof(f.ajaxart)!="undefined"){var d=f.ajaxart.params;ajaxart.setVariable(d,"InputForChanges",f.ajaxart.data);ajaxart.run([f],b,"Change",d)}}return g},LoadCssFile:function(d,f,b){var a=aa_text(f,d,"Url",b);var h=aa_text(f,d,"Media",b);if(a==""){return[]}var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("href",a);if(h){g.setAttribute("media",h)}document.getElementsByTagName("head")[0].appendChild(g);return["true"]},SetCssText:function(b,d,f){var a=aa_text(d,b,"Style",f);if(a==""){return}ajaxart.each(d,function(g){try{g.style.cssText=a}catch(h){ajaxart.log("failed to change css text: "+a+" :"+h.message,"error")}})},UrlParameter:function(d,f,a){var b=aa_text(f,d,"Param",a);return[ajaxart.urlparam(b)]},CurrentUrlWithChangedParam:function(h,o,b){var g=aa_text(o,h,"Param",b);var d=aa_text(o,h,"Value",b);var q=aa_text(o,h,"Url",b);var l=[];if(q.indexOf("#")>-1){q=q.substr(0,q.indexOf("#"))}var p=q;if(q.indexOf("?")>-1){p=q.substr(0,q.indexOf("?"));var r=q.substr(q.indexOf("?")+1);var n=r.split("&");for(var f=0;f<n.length;f++){var s=n[f].split("=");if(s[0]!=g){l.push({name:s[0],value:s[1]})}}}l.push({name:g,value:d});var a=p+"?";for(var m=0;m<l.length;m++){if(m>0){a+="&"}a+=l[m].name+"="+l[m].value}return[a]},SetCssProperty:function(a,f,g){var d=aa_text(f,a,"Property",g);var b=aa_text(f,a,"Value",g);if(d==""||!ajaxart.ishtml(f[0])){return f}jQuery(f[0]).css(d,b);return f},ExecJQuery:function(profile,data,params){var expression=aa_text(data,profile,"Expression",params);var controls=data;if(controls.length==0||!ajaxart.ishtml(controls[0])){controls=ajaxart.getControlElement(params)}ajaxart.each(controls,function(item){if(!ajaxart.ishtml(item)){return}var exp="jQuery(item)"+expression+";";try{var $=jQuery;eval(exp)}catch(e){ajaxart.log("failed to run jQuery exp: "+exp+" :"+e.message,"error")}});return["true"]},DayOfWeek:function(f,l,b){var h=ajaxart.totext_array(l);var m=jQuery.datepicker.parseDate("dd/mm/yy",h);var g=new Array(7);g[0]="Sunday";g[1]="Monday";g[2]="Tuesday";g[3]="Wednesday";g[4]="Thursday";g[5]="Friday";g[6]="Saturday";var a=g[m.getDay()];return[a]},FormatDate:function(h,l,g){try{var f=aa_text(l,h,"DateFormat",g);if(l.length==0){return[aa_text(l,h,"ValueForEmpty",g)]}var b=ajaxart.totext(l[0]);if(b.length==0){return[aa_text(l,h,"ValueForEmpty",g)]}var n=jQuery.datepicker.parseDate("dd/mm/yy",b);var a=jQuery.datepicker.formatDate(f,n);return[a]}catch(m){return[]}},TextboxValue:function(d,g,b){var a=[];var f=ajaxart.getControlElement(b);ajaxart.each(f,function(h){if(typeof(h.value)!="undefined"){a.push(""+h.value)}});return a},DataFromJavaScript:function(profile,_data,context){if(_data.length==0){_data=[null]}var expression=aa_text(_data,profile,"Expression",context);var _element=ajaxart.getControlElement(context);var element=null;if(_element.length>0){element=_element[0]}var control=element;var data=_data[0];var result=null;try{var $=jQuery;result=eval(expression)}catch(e){ajaxart.log("Failed to run JS expression:"+expression+", "+e.message,"error")}if(typeof(result)=="number"){return[""+result]}if(typeof(result)=="object"&&!(ajaxart.isxml)){return[""+result]}if(result==null||typeof(result)=="undefined"){return[]}if(result.jquery!=null){return result.get()}return[result]},RunJavaScript:function(a,b,d){ajaxart.gcs.ui.DataFromJavaScript(a,b,d);return["true"]},TextToHtml:function(a,b,f){if(ajaxart.ishtml(b[0])){return b[0]}var d=ajaxart.totext(b[0]);if(d==""){return[]}return[jQuery(d)[0]]},Switch:function(a,b,d){return aa_switch(a,b,d)},IsHtml:function(b,d,a){if(ajaxart.ishtml(d)){return["true"]}return[]},FirstSucceeding:function(g,h,f){var b=ajaxart.subprofiles(g,"Control");for(var d=0;d<b.length;d++){var a=ajaxart.run(h,b[d],"",f);if(a.length>0){return a}}return[]},ControlPutInStruct:function(b,d,a){var h=ajaxart.run(d,b,"Control",a);var g=ajaxart.run(d,b,"Struct",a);var f=aa_text(d,b,"Field",a);if(h.length==0){h=[document.createElement("div")]}if(ajaxart.isObject(g)&&f.length>0){g[0][f]=h}h[0].Context=a;h[0].ParentObject=g;aa_defineElemProperties(h[0],"ParentObject,Context");return h},OnKeyDown:function(b,d,a){var f=a.vars.ControlElement[0];f.onkeydown=function(h){h=h||event;var l=ajaxart.clone_context(a);ajaxart.ui.applyKeyboardEvent(h,l);var g=jQuery((typeof(event)=="undefined")?h.target:event.srcElement);if(g[0]&&g[0].tagName.toLowerCase()=="textarea"){l.vars.EventTargetIsTextArea=["true"]}else{l.vars.EventTargetIsTextArea=[]}ajaxart.run(d,b,"Action",l);return true};return["true"]},BindEvent:function(f,l,b){if(l.length==0){return}var d=ajaxart.getVariable(b,"InputForChanges");var a=l;ajaxart.databind(a,d,b,null);var g=aa_text(l,f,"Event",b);var h=function(o){if(typeof(ajaxart_captured_element)!="undefined"&&ajaxart_captured_element.length>0){return[]}var n=l[0];var p=ajaxart.clone_context(b);if(!aa_bool(l,f,"KeepOriginalRunOnControl",p)){ajaxart.setVariable(p,"ControlElement",l)}ajaxart.ui.applyKeyboardEvent(o,p);var m=[];if("ajaxart" in n){m=n.ajaxart.data}ajaxart.run(m,f,"Action",p)};ajaxart.ui.bindEvent(l[0],g,h);return["true"]},StandardButton:function(d,g,a){var f=a.vars.ButtonContext[0];var m=ajaxart.totext_array(f.Text);var h='<span class="button_wrapper" tabindex="1"><span class="button_outer"><span class="button_inner" >'+m+"</span></span><br/></span>";var b=jQuery(h)[0];ajaxart_disableSelection(b);ajaxart.databind([b],g,a,d);var n=function(p){var q=jQuery(p);try{if(ajaxart.isattached(p)){p.focus()}}catch(r){}var o=a.vars.ButtonContext[0];var s=aa_ctx(a,{ControlElement:[p]});ajaxart.runScriptParam(g,o.OnClick,s);q.removeClass("pressed").removeClass("pressing")};var l=function(o){jQuery(o).mousedown(function(){var p=jQuery(o);if(p.attr("pressed_src")!=""){p.attr("src",p.attr("pressed_src"));p.addClass("pressed").addClass("pressing")}}).mouseout(function(){var p=jQuery(o);p.removeClass("pressed");p.attr("src",p.attr("original_src"))}).mouseover(function(){var p=jQuery(o);if(p.hasClass("pressing")){p.addClass("pressed").removeClass("pressing");p.attr("src",p.attr("pressed_src"))}}).keydown(function(p){p=p||event;if(p.keyCode==13){ajaxart_stop_event_propogation(p);n(o);return false}}).mouseup(function(){if(window.aa_incapture){return}var p=jQuery(o);if(p.hasClass("pressed")){n(o)}})};l(b);return[b]},SuggestionBox:function(d,f,b){var a=document.createElement("input");ajaxart.suggestbox.attachToTextbox(f,d,b,a);return[a]},CustomSuggestionBox:function(d,f,b){var a=document.createElement("input");ajaxart.customsuggestbox.attachToTextbox(f,d,b,a);return[a]},AddTextToSuggestionBox:function(b,d,a){ajaxart.customsuggestbox.addTextToSuggestionBox(b,d,a);return[]},CloseSuggestionBox:function(b,d,a){ajaxart.suggestbox.closePopup();return[]},OpenSuggestionBoxPopup:function(b,d,a){ajaxart.customsuggestbox.openSuggestionBoxPopup(b,d,a);return[]},OpenSuggestionBoxList:function(b,d,a){ajaxart.customsuggestbox.openSuggestionBoxList(b,d,a);return[]},TriggerSuggestionBoxPopup:function(b,d,a){ajaxart.customsuggestbox.triggerSuggestionBoxPopup(b,d,a);return[]},UrlFragmentAttribute:function(f,g,d){var b=aa_text(g,f,"Url",d);var a=aa_text(g,f,"Attribute",d);return[aa_url_attribute(b,a)]},RunInControlContext:function(d,g,b){var f=ajaxart.getVariable(b,"ControlElement");var h=aa_text(g,d,"Mode",b);var a=[];ajaxart.each(f,function(m){var l=m.ajaxart;if(l==null){ajaxart.log("RunInControlContext - control has no databind","warning");return[]}var n=l.params;if(h=="copy control variables"){n=ajaxart.clone_context(b);for(i in l.params.vars){n.vars[i]=l.params.vars[i]}}ajaxart.setVariable(n,"ControlElement",[m]);ajaxart.concat(a,ajaxart.run(l.data,d,"Item",n))});return a},ScreenSize:function(f,h,b){var d=aa_text(h,f,"Axis",b);var g=aa_int(h,f,"Margin",b);var a=0;if(d=="height"){a=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight)}else{a=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth)}a-=g;if(aa_bool(h,f,"AsHtmlString",b)){return[""+a+"px"]}return[a]},DisableTextSelection:function(b,d,a){if(!ajaxart.ishtml(d)){return[]}control=jQuery(d[0]);if(jQuery.browser.mozilla){control.css({MozUserSelect:"none"})}else{if($.browser.msie){control.each(function(){jQuery(this).bind("selectstart.disableTextSelect",function(){return false})})}else{control.each(function(){jQuery(this).bind("mousedown.disableTextSelect",function(){return false})})}}return["true"]},AddMousePressedEffect:function(b,d,a){if(!ajaxart.ishtml(d)){return d}var f=d[0];jQuery(f).mousedown(function(){if(jQuery(this).attr("pressed_src")!=""){jQuery(this).attr("src",jQuery(this).attr("pressed_src"))}jQuery(this).addClass("pressed").addClass("pressing")}).mouseout(function(){jQuery(this).removeClass("pressed");jQuery(this).attr("src",jQuery(this).attr("original_src"))}).mouseover(function(){if(jQuery(this).hasClass("pressing")){jQuery(this).addClass("pressed").removeClass("pressing");jQuery(this).attr("src",jQuery(this).attr("pressed_src"))}}).mouseup(function(){jQuery(this).attr("src",jQuery(this).attr("original_src"));jQuery(this).removeClass("pressed").removeClass("pressing")});return d},InternalRefreshToAddItem:function(d,g,b){var m=aa_first(g,d,"ParentControl",b);var o=ajaxart.run(g,d,"NewItems",b);var p=aa_first(g,d,"ControlForNewItemControlContext",b);var a=aa_text(g,d,"JQPathForItems",b);if(m==null||p==null||p.ajaxart==null){return[]}var n=p.ajaxart.params;var l=jQuery(m).find(a);for(var f=0;f<o.length;f++){if(l.length<=f){var h=aa_first([o[f]],d,"NewItemControl",n);if(h!=null){ajaxart.xml.append(m,h);ajaxart.run([h],d,"OnNewItem",b)}}}},CheckboxesList:function(d,h,a){controls=ajaxart.getControlElement(a);if(controls.length==0){return[]}var f=controls[0];var g=1;if(ajaxart.isSafari){g=100}var b=function(l,m){if(l==0){return}if(jQuery(f).parents("body").length==0){setTimeout(function(){b(l-1,m)},m)}else{ajaxart.run(h,d,"OnLoad",a)}};b(5,g)},IsChrome:function(b,d,a){if(ajaxart.isChrome){return["true"]}else{return[]}},HtmlUnderElement:function(b,f,a){if(!ajaxart.isxml(f)){return[]}var g="";var d=f[0].firstChild;while(d!=null){if(d.nodeType==3||d.nodeType==4){g+=d.nodeValue}if(d.nodeType==1){g+=ajaxart.xml2text(d)}d=d.nextSibling}return[g]},ClassOfElement:function(d,f,b){var a=ajaxart.run(f,d,"Element",b);if(a.length==0||!ajaxart.ishtml(a[0])){return[]}return a[0].className},AddToDate:function(g,h,f){var b=aa_text(h,g,"Date",f);var d=aa_int(h,g,"AmountToAdd",f);var a=aa_text(h,g,"Interval",f);return[aadate_addToDate(b,d,a)]},ValidationList:function(f,g,d){var a=ajaxart.subprofiles(f,"Validation");for(var b=0;b<a.length;b++){ajaxart.run(g,a[a.length-b-1],"",d)}return[]},DatePickerAdapter:function(b,f,a){var d=aa_DateIframe;if(d==null||ajaxart.isIE7){var g=ajaxart.getVariable(a,"_Lib")+"/datepicker/datepicker.html";d=aa_DateIframe=jQuery('<iframe style="height:201px; width:193px; border:none;" class="datepickerframe" src="'+g+'" frameborder="0" scrolling="no" />')[0]}d.Context=a;d.Locale=aa_text(f,b,"Locale",a);d.Date=aa_text(f,b,"Date",a);ajaxart_addMethod(d,"OnUpdate",b,"OnUpdate",a);return[d]},HorizontalSplitter:function(m,B,g){var n=aa_text(B,m,"IdForCookie",g);var s=aa_text(B,m,"Height",g);var l=aa_text(B,m,"TotalWidth",g);var u=ajaxart.dynamicText(B,"%$SectionsContext/Sections%",g);var r=ajaxart.cookies.valueFromCookie(n+"_splitterwidths");var b=aa_bool(B,m,"KeepTotalWidth",g);if(r==null||r==""){r=ajaxart.run(B,m,"DefaultWidths",g)}else{r=r.split(",")}if(l!=""&&r.length+1>=u.length){var A=0;for(var w=0;w<u.length-1;w++){A+=ajaxart.ui.width_as_num(r[w])+15}r[u.length-1]=(ajaxart.ui.width_as_num(l)-A)+"px"}var t=ajaxart.ui.width_as_num(s)-22-47-43;var o=ajaxart.ui.width_as_num(s)-22;var z=jQuery('<table cellpading="0" cellspacing="0" />')[0];var a=document.createElement("TR");z.appendChild(a);for(var y=0;y<u.length;y++){var p=u[y];var h=document.createElement("TD");a.appendChild(h);h.className="horizontal_section_td";var v=(r.length>y)?r[y]:"200px";var f=jQuery("<div class='horizontal_section' style='width:"+v+";height:"+o+"px' />")[0];h.appendChild(f);var C=ajaxart.totext(ajaxart.dynamicText([p],"%Title%",g));if(C!=""){jQuery(f).append(jQuery('<div class="horizontal_section_title">').text(C))}var q=ajaxart.runNativeHelper([p],m,"Control",g);if(q.length>0){f.appendChild(q[0])}if(y+1<u.length){var d=jQuery('<td class="splitter" > <div class="splitter_top" /><div class="splitter_middle" style="height:'+t+'px" /><div class="splitter_bottom" /></td>');d.mousedown(function(F){var D=aa_mousePos(F);var E=jQuery((typeof(event)=="undefined")?F.target:event.srcElement);z.section=jQuery(E).parents(".splitter").prev().find(".horizontal_section")[0];z.diff=D.x-jQuery(z.section).width();z.last_section=jQuery(E).parents(".splitter").siblings(":last").find(".horizontal_section")[0];z.last_section_diff=jQuery(z.last_section).width()+D.x;z.moving=true});jQuery(a).append(d)}}jQuery(z).mouseup(function(E){if(z.moving){var D="";var F=jQuery(z).find(".horizontal_section");for(y=0;y<F.length;y++){D+=jQuery(F[y]).width()+"px,"}ajaxart.cookies.writeCookie(n+"_splitterwidths",D)}z.moving=false});jQuery(z).mousemove(function(E){if(!z.moving||z.section==null){return}var D=aa_mousePos(E);jQuery(z.section).width(D.x-z.diff);if(b){jQuery(z.last_section).width(z.last_section_diff-D.x)}});return[z]},CssClassesInControl:function(g,h,f){var m=aa_first(h,g,"Control",f);var d={};var l={};l.find=function(q){var n=q.className.split(" ");for(var p=0;p<n.length;p++){d[n[p]]=true}var o=jQuery(q).children();for(var p=0;p<o.length;p++){l.find(o[p])}};if(m!=null){l.find(m)}var a=[];for(var b in d){a.push("."+b)}return a}});ajaxart.gcs.richtext={RichText:function(g,l,d){var a=ajaxart.runNativeHelper(l,g,"Textarea",d)[0];var b=aa_text(l,g,"Css",d);var h=aa_text(l,g,"Height",d);if(h==""){h="300px"}var f=h.split("px");if(f.length>0){h=f[0]-25+"px"}a.id="tinymce"+(ajaxart.unique_number++);a.style.height=h;a.style.width="100%";aa_addOnDetach(a,function(){jQuery(".mceDropDown").remove();try{tinyMCE.editors[a.tinyEditor].remove()}catch(m){ajaxart.log("error closing tinyMCE - "+m.message,"error")}});a.jbSetDialogReady=function(){jQuery(a).removeClass("aa_dialog_not_ready");aa_fixTopDialogPosition()};aa_addOnAttach(a,function(){if(typeof(tinyMCE)=="undefined"){a.jbSetDialogReady();return}var m=function(n){aa_defineElemProperties(n,"jtinyEditor,setTinyMCEText,aa_update,SetFocus");n.tinyEditor=n.id;n.setTinyMCEText=function(r){tinyMCE.editors[n.tinyEditor].setContent(r)};n.SetFocus=function(){if(tinyMCE){tinyMCE.execInstanceCommand(n.tinyEditor,"mceFocus")}};var q=aa_totext(d.vars.Language);var p=(aa_text(l,g,"Direction",d)=="Right to Left")?"rtl":"ltr";var o=aa_text(l,g,"Buttons",d).split(",CR,");n.aa_update=function(){var r=tinyMCE.activeEditor.getContent();ajaxart_runevent(n,"TextControlContext","UpdateData",r)};tinyMCE.init({mode:"exact",plugins:"pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,phpimage",elements:n.id,theme:"advanced",init_instance_callback:fixTinyMCETabIssue,force_br_newlines:true,force_p_newlines:false,directionality:p,theme_advanced_toolbar_location:"top",theme_advanced_buttons1:(o.length>0)?o[0]:"",theme_advanced_buttons2:(o.length>1)?o[1]:"",theme_advanced_buttons3:(o.length>2)?o[2]:"",theme_advanced_buttons4:(o.length>3)?o[3]:"",accessibility_warnings:false,translate_mode:true,language:(q=="hebrew")?"he":"en",handle_event_callback:(ajaxart.isIE)?"aa_tinymce_handleEvent":aa_tinymce_handleEvent,paste_retain_style_properties:"all",paste_remove_styles_if_webkit:false,setup:function(r){r.onInit.add(function(s){var u=b.replace(/#this/g,".mceContentBody");var t=jQuery("<style>"+u+"</style>")[0];s.contentDocument.getElementsByTagName("head")[0].appendChild(t);n.jbSetDialogReady()});r.onChange.add(function(s){n.aa_update()});r.onClick.add(function(t,s){aa_closePopup()})}})};m(this);setTimeout(a.jbSetDialogReady,4000)});jQuery(a).addClass("aa_dialog_not_ready");return[a]}};function fixTinyMCETabIssue(a){a.onKeyDown.add(function(b,d){if(d.keyCode){code=d.keyCode}else{if(d.which){code=d.which}}if(code==9&&!d.altKey&&!d.ctrlKey){if(d.shiftKey){b.execCommand("Outdent")}else{b.execCommand("Indent")}if(d.preventDefault){d.preventDefault()}return false}})}if(!ajaxart.ui){ajaxart.ui={}}ajaxart_condition=function(d,g,f,b){var a=ajaxart_runevent(d,g,f,b);return(typeof(a)!="undefined"&&a.length==1&&(a[0]==true||a[0]=="true"))};ajaxart_delay_counter=0;aa_tinymce_handleEvent=function(d,b){if(d.type!="keyup"){return}var a=jQuery("#"+b.id);if(a.length>0&&a[0].aa_update){a[0].aa_update()}};ajaxart_delayrunevent=function(f,m,h,b,a,d){if(!ajaxart.isattached(f)){ajaxart_runevent(f,m,h,b,a);return}if(typeof(d)=="undefined"){d=200}var g=++ajaxart_delay_counter;var l=function(n){setTimeout(function(){if(ajaxart_delay_counter!=n){return}ajaxart_runevent(f,m,h,b,a)},d)};l(g)};ajaxart_selectionchanged=function(a){ajaxart_runevent(a,"MasterDetailContext","SelectionChanged")};ajaxart_css_selection=function(a,b){var d=jQuery(a).parents("."+b);var f=d.parents(".ajaxart_single_selection_top");if(f.length>0){d=f}d.find(".selected").removeClass("selected");jQuery(a).addClass("selected")};ajaxart_container_event=function(f,d,g,h){var b=(typeof(f.target)=="undefined")?f.srcElement:f.target;if(ajaxart.isSafari&&ajaxart_source_elem_in_test!=null){b=ajaxart_source_elem_in_test}if(f.type=="keydown"){var l=jQuery(b).parents("."+d).find(".selected");if(l.length>0){b=l[0]}}var a=ajaxart_container_find_databound_elem(b,g);if(a!=null){if(f.type=="click"){ajaxart_css_selection(a,d);ajaxart_selectionchanged(a);ajaxart_runevent(a,h,"OnSelect")}else{if(f.type=="dblclick"){ajaxart_runevent(a,h,"OnDoubleClick")}else{if(f.type=="keydown"){if(f.keyCode=="13"){ajaxart_runevent(a,h,"OnDoubleClick")}if(f.keyCode==40){ajaxart_container_move_cursor(a,1)}if(f.keyCode==38){ajaxart_container_move_cursor(a,-1)}}}}}if(jQuery(b).find("#key_sink").focus().length==0){jQuery(b).parents("."+d).find("#key_sink").focus()}};ajaxart_container_find_databound_elem=function(b,d){if(jQuery(b).hasClass(d)){return b}var a=jQuery(b).parents("."+d);if(a.length==0){return null}return a[0]};ajaxart_container_move_cursor=function(a,b){};ajaxart.ui.lastEvent=null;function aa_is_fixed_position(a){for(var b=a;b&&b!=document.body;b=b.parentNode){if((b.currentStyle&&b.currentStyle.position=="fixed")||(window.getComputedStyle&&window.getComputedStyle(b,null)["position"]=="fixed")){return true}}return false}function aa_widthToWindowRight(f,l,g){if(!ajaxart.isattached(f)){return}if(!g){g="width"}if(typeof(l)=="undefined"||isNaN(l)){l=0}if(jQuery(f).parents(".studio_simulator").length>0){var h=jQuery(f).parents(".studio_simulator")[0];if(h.className.indexOf(" ")>-1){d=h.clientWidth;var a=aa_absLeft(f)-aa_absLeft(h.firstChild);var b=d-a-l;if(b<50){b=0}jQuery(f).css(g,b+"px")}}else{var d=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var a=aa_absLeft(f);if(!aa_is_fixed_position(f)){a-=window.scrollX}jQuery(f).css(g,(d-a-l)+"px")}}ajaxart.ui.HeightToWindowBottom=function(f,l,b){if(!ajaxart.isattached(f)){return}if(!b){b="height"}if(typeof(l)=="undefined"||isNaN(l)){l=0}var a=0;if(f.jbInDialog==null){f.jbInDialog=jQuery(f).parents(".dialog_box").length>0}if(f.jbInDialog){var g=jQuery(f).parents(".dialog_box");if(g[0].dialogHeight==null){g[0].dialogHeight=g.height()}var h=g[0].dialogHeight+aa_absTop(g[0]);var m=jQuery(f).position().top;if(h-m-l>50){a=h-m-l}}else{if(aa_has_simulator(f)){var n=jQuery(f).parents(".studio_simulator")[0];var m=aa_absTop(f,true)-aa_absTop(n.firstChild,true);a=n.clientHeight-m-l}else{var d=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);var m=aa_absTop(f,true);if(!aa_is_fixed_position(f)){m-=window.scrollY}a=d-m-l}}if(a<50){a=0}if(a>0){if(f.jbPrevHeight!=a){height_changed=true}f.jbPrevHeight=a;jQuery(f).css(b,a+"px");if(height_changed&&f.jbSizeChanged){f.jbSizeChanged()}}return a};ajaxart_update=function(a,b,d){var f=jQuery(a);if(!f.hasClass("aa_custom_control")){f=jQuery(a).parents(".aa_custom_control")}if(f.length==0){return}ajaxart_runevent(f[0],"_CustomControlContext","UpdateData",b)};ajaxart_data=function(b){var a=ajaxart_get_context(b);if(a==null){return null}if(a.data.length>0){return a.data[0]}};ajaxart_param=function(d,f){var b=ajaxart_get_context(d);if(b==null){return null}var g=b.params.componentContext.params[f];if(g==null){ajaxart.log("Param "+f+" does not exist","warning");return null}if(g.length==0){return""}var a=ajaxart.totext(g);if(a!=""){return a}else{return g[0]}};ajaxart_get_context=function(b){var d=jQuery(b);if(!d.hasClass("aa_custom_control")){d=jQuery(b).parents(".aa_custom_control")}if(d.length==0){return}var a=d[0]["ajaxart"];if(typeof(a)=="undefined"){ajaxart.log("control does not contain ajaxart data","warning");return null}return a};ajaxart.ui.getScriptParamContext=function(a){if(typeof(a.objectForMethod)==undefined){return a.context}var b=ajaxart.clone_context(a.context);b.vars._This=a.objectForMethod;return b};ajaxart_ui_imposeMaxLength=function(d,b,a){return(b.value.length<a)||ajaxart_ui_isbackwards(d)};ajaxart_ui_isbackwards=function(a){return(a.keyCode==8||a.keyCode==46||(a.keyCode>=35&&a.keyCode<=40))};ajaxart_ui_validate=function(g,f){var d=f.ajaxart;if(typeof(d)=="undefined"){return true}var m=d.params;var l={script:ajaxart.getVariable(m,"KeyPressValidator")[0],context:m};var h=g.charCode;if(h==undefined){h=g.keyCode}var b=ajaxart.run([String.fromCharCode(h)],l.script,"",d);var a=(b[0]=="true")||ajaxart_ui_isbackwards(g);return a};ajaxart_capture_onclick=function(a){if(window.captureEvents){window.onclick=a}else{document.onclick=a}};ajaxart_ui_capture_mousemove=function(a){if(window.captureEvents){window.onmousemove=a}else{document.onmousemove=a}};function ajaxart_stop_event_propogation(a){if(!a){return}if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;return false}ajaxart_set_text=function(a,b){b=b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");a.innerHTML=b};function ajaxart_disableSelection(b){function a(d){if(d.nodeType==1){jQuery(d).addClass("unselectable")}var f=d.firstChild;while(f){a(f);f=f.nextSibling}}if(b){a(b)}}function ajaxart_restoreSelection(b){function a(d){if(d.nodeType==1){jQuery(d).removeClass("unselectable")}var f=d.firstChild;while(f){a(f);f=f.nextSibling}}if(b){a(b)}}ajaxart.ui.contextWithCurrentControl=function(b,d){var a=ajaxart.clone_context(b);ajaxart.setVariable(a,"ControlElement",[d]);return a};ajaxart.ui.width_as_num=function(b){var a;if(b.indexOf("px")>0){a=Number(b.split("px")[0])}else{a=Number(b)}if(isNaN(a)){return 0}return a};ajaxart.ui.page_dimensions=function(){var a={};if(window.innerHeight){a.pageYOffset=window.pageYOffset;a.pageXOffset=window.pageXOffset;a.innerHeight=window.innerHeight;a.innerWidth=window.innerWidth}else{if(document.documentElement&&document.documentElement.clientHeight){a.pageYOffset=document.documentElement.scrollTop;a.pageXOffset=document.documentElement.scrollLeft;a.innerHeight=document.documentElement.clientHeight;a.innerWidth=document.documentElement.clientWidth}else{if(document.body){a.pageYOffset=document.body.scrollTop;a.pageXOffset=document.body.scrollLeft;a.innerHeight=document.body.clientHeight;a.innerWidth=document.body.clientWidth}}}return a};function ajaxart_shortcut_matchs_event(){var b={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var a={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};return function(d,n){d=d.toLowerCase();n=n||window.event;if(n.keyCode){code=n.keyCode}else{if(n.which){code=n.which}}var m=String.fromCharCode(code).toLowerCase();if(code==188){m=","}if(code==190){m="."}var l=d.split("+");var f=0;var g={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(n.ctrlKey){g.ctrl.pressed=true}if(n.shiftKey){g.shift.pressed=true}if(n.altKey){g.alt.pressed=true}if(n.metaKey){g.meta.pressed=true}for(var h=0;k=l[h],h<l.length;h++){if(k=="ctrl"||k=="control"){f++;g.ctrl.wanted=true}else{if(k=="shift"){f++;g.shift.wanted=true}else{if(k=="alt"){f++;g.alt.wanted=true}else{if(k=="meta"){f++;g.meta.wanted=true}else{if(k.length>1){if(a[k]==code){f++}}else{if(m==k){f++}else{if(b[m]&&n.shiftKey){m=b[m];if(m==k){f++}}}}}}}}}if(f==l.length&&g.ctrl.pressed==g.ctrl.wanted&&g.shift.pressed==g.shift.wanted&&g.alt.pressed==g.alt.wanted&&g.meta.pressed==g.meta.wanted){return true}};return false}jQuery.extend(jQuery.fn,{disableTextSelect:function(){this.each(function(){ajaxart_disableSelection(this)});return this}});function aa_add_virtual_inner_element(b,a){if(!b.virtual_inner_elements){b.virtual_inner_elements=[]}b.virtual_inner_elements.push(a)}function aa_addClassNoCheck(b,a){if(b.className==""){b.className=a}else{b.className+=" "+a}}function aa_addClass(b,a){if(b.className.indexOf(a)==-1){if(b.className==""){b.className=a}else{b.className+=" "+a}}else{jQuery(b).addClass(a)}}function aa_hide(a){a.style.display="none";a.display="none"}function aa_url_attribute(d,a){if(d.indexOf("#")>-1){d=d.substring(d.indexOf("#"))}var f=d.indexOf("?"+a+"=");if(f==-1){return""}var b=d.substring(f+1);b=b.substring(b.indexOf("=")+1);if(b.indexOf("?")>-1){b=b.substring(0,b.indexOf("?"))}if(b!=""&&b.charAt(b.length-1)==";"){b=b.substring(0,b.length-1)}return b}aa_DateIframe=null;function aa_fixStretchOnElem(a){if(a.fixStretchBottom){a.fixStretchBottom()}if(a.fixStretchRight){a.fixStretchRight()}}function aa_fixstretch(){var a=jQuery("body").find(".aa_stretch");for(var b=0;b<a.length;b++){aa_fixStretchOnElem(a[b])}}function aa_init_onresize(){window.aa_windowresize_timer=window.aa_windowresize_timer||0;window.onresize=function(){if(aa_windowresize_timer!=0){clearTimeout(aa_windowresize_timer)}aa_windowresize_timer=setTimeout(function(){aa_fixstretch();jBart.trigger(jBart,"windowResize",{});aa_windowresize_timer=0},100)}}function aa_stretchToRight(b,d,a){jQuery(b).addClass("aa_stretch");if(!a){jQuery(b).css("overflow","auto")}b.fixStretchRight=function(){aa_widthToWindowRight(this,d);aa_htmlContentChanged(this)};aa_addOnAttach(b,function(){aa_fixStretchOnElem(this)});aa_init_onresize()}function aa_stretchToBottom(b,d,a){jQuery(b).addClass("aa_stretch");if(!a){jQuery(b).css("overflow","auto")}b.fixStretchBottom=function(){ajaxart.ui.HeightToWindowBottom(this,d);aa_htmlContentChanged(this)};aa_addOnAttach(b,function(){aa_fixStretchOnElem(this)});aa_init_onresize()}function aa_init_horiz_resizer(a,b){b.onmousedown=function(d){document.onmouseup=function(f){document.onmouseup=null;document.onmousemove=null;ajaxart_disableSelection(jQuery("body")[0]);return false};document.onmousemove=function(l){var f=aa_mousePos(l);var h=aa_absLeft(a,false);if(f.x<h+5){return}var g=f.x-h;jQuery(a).width(g+"px");aa_fixstretch();aa_stop_prop(l);ajaxart_restoreSelection(jQuery("body")[0]);return false}};return false}function aa_load_js_css(a,b){b=b||"js";if(ajaxart.loaded_js==null){ajaxart.loaded_js={}}if(ajaxart.loaded_js[a]!=null){return}ajaxart.loaded_js[a]="loaded";if(b=="js"){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a)}else{if(b=="css"){var d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",a)}}if(d){document.body.appendChild(d)}}function aa_run_when_js_is_loaded(expression_to_check,to_run){var again=function(){aa_run_when_js_is_loaded(expression_to_check,to_run)};if(typeof(eval(expression_to_check))=="undefined"){setTimeout(again,500);return}to_run()}function aa_run_when_attahced(d,a){var b=function(){aa_run_when_attahced(d,a)};if(!ajaxart.isattached(d)){setTimeout(b,100);return}a()}function aa_text_val(d,b,a){return ajaxart.totext_array(ajaxart.dynamicText(b,d,a))}aa_gcs("ui_async",{LoadingControl:function(b,d,a){var g=aa_text(d,b,"DivID",a);var f=jQuery("#"+g);if(f.length>0){f[0].IsUsed=true;f.show();return[f[0]]}return jQuery("<div>"+ajaxart_multilang_text("loading...",a)+"</div>").get()},ControlWithTimer:function(d,f,b){var a=jQuery("<div>")[0];setTimeout(function(){var g=aa_first(f,d,"Control",b);if(g){a.appendChild(g)}aa_element_attached(g)},20);return[a]},ControlUsage:function(d,g,b){ajaxart_async_Mark(b);aa_intest=true;var h=aa_first(g,d,"Control",b);window.aa_intest_topControl=h;if(h==null){ajaxart_async_CallBack(["no control"],b);return}var f={};var a=function(l,m){aa_async_finished_listeners.push(l);l.OnAsyncActionFinished=function(){if(jQuery(m).hasClass("aa_loading")||jQuery(m).find(".aa_loading").length>0){return}aa_remove_async_finished_listener(l);var n=aa_ctx(b,{ControlElement:[m],TopControlForTest:[m],InTest:["true"]});aa_intest=true;ajaxart_RunAsync(g,ajaxart.fieldscript(d,"RunOnControl",false),n,function(){aa_intest=true;var q=aa_ctx(b,{ControlElement:[m],TopControlForTest:[m],InTest:["true"]});if(b.vars._TestOutput){b.vars._TestOutput[0].OutputControl=m}var p=aa_bool([m],d,"ExpectedResult",q);ajaxart.run(g,d,"CleanAfter",q);window.aa_intest_topControl=null;if(!ajaxart.inPreviewMode){ajaxart.runNativeHelper([],d,"CloseDialogAndPopUp",b)}var o=[];if(!p){o=[m]}aa_intest=false;ajaxart_async_CallBack(o,b)})};l.OnAsyncActionFinished()};a(f,h)},WaitForAsyncToFinish:function(d,g,b){var h=jQuery(b.vars.TopControlForTest);if(h.find(".aa_loading").length==0){return}ajaxart_async_Mark(b);var f={};var a=function(l,m){aa_async_finished_listeners.push(l);l.OnAsyncActionFinished=function(){if(m.find(".aa_loading").length>0){return}aa_remove_async_finished_listener(l);ajaxart_async_CallBack(g,b)}};a(f,h)}});aa_gcs("uiaspect",{DeleteOnHover:function(d,f,b){var a={isObject:true};a.InitializeElements=function(n,u){var s=u.vars._Cntr[0];if(s.ReadOnly){return}var m="aa_delete_hover";var h=aa_text(f,d,"DeleteImage",b);s.HoverRightMargin=aa_int(f,d,"RightMargin",b);s.HoverTopMargin=aa_int(f,d,"TopMargin",b);var r=aa_attach_global_css("#this { position: relative; } #this>.aa_delete_hover { display: none; }");var g=aa_attach_global_css("#this:hover .aa_delete_hover { display: inline-block; }");var l=u.vars._Elems;for(var q=0;q<l.length;q++){var o=jQuery(l[q]);var t=o[0].jbDeleteDiv=jQuery("<div/>").css("position","absolute").css("right",s.HoverRightMargin+"px").css("top",s.HoverTopMargin+"px").addClass(m)[0];t.jbElem=o[0];t.style.background="url("+h+") no-repeat";t.onclick=function(){var w=this.jbElem.ItemData;var v=aa_ctx(aa_merge_ctx(b,u),{_ElemsOfOperation:[this.jbElem],_ItemsOfOperation:w});ajaxart.runNativeHelper(w,d,"Delete",v)};if(o[0].tagName.toLowerCase()=="tr"){var p=o.find(">td").get();if(p.length){p[p.length-1].appendChild(t)}}else{o[0].appendChild(t)}jQuery(t.parentNode).addClass(r);o.addClass(g)}};return[a]},DeleteOnHover1:function(d,f,b){var a={isObject:true};a.InitializeElements=function(g,h){var o=h.vars._Cntr[0];if(o.ReadOnly){return}o.HoverRightMargin=aa_int(f,d,"RightMargin",b);o.HoverTopMargin=aa_int(f,d,"TopMargin",b);if(!o.DeleteDiv){o.DeleteDiv=jQuery('<div style="display:none" class="aa_delete_hover" />')[0];o.DeleteDiv.style.background="url("+aa_text(f,d,"DeleteImage",b)+") no-repeat";o.DeleteDiv.onmousedown=function(){var p=aa_ctx(aa_merge_ctx(b,h),{_ElemsOfOperation:[this.ItemElement],_ItemsOfOperation:this.ItemData});ajaxart.runNativeHelper(this.ItemElement.ItemData,d,"Delete",p)};o.DeleteDiv.onmouseout=function(q){if(!q){var q=window.event}var p=q.relatedTarget||q.toElement;if(p==this.ItemElement){return}jQuery(this).hide()};o.Ctrl.appendChild(o.DeleteDiv)}var l=h.vars._Elems;for(var m=0;m<l.length;m++){var n=l[m];n.onmouseover=function(){var p=h.vars._Cntr[0];p.DeleteDiv.ItemElement=this;p.DeleteDiv.ItemData=this.ItemData;var r=(aa_absLeft(this)+jQuery(this).width()-p.HoverRightMargin);var q=(aa_absTop(this)+p.HoverTopMargin);if(aa_is_rtl(p.Ctrl)){r=aa_absLeft(this)+p.HoverRightMargin}if(jQuery(this).parents(".aapopup").length>0){r-=aa_absLeft(jQuery(this).parents(".aapopup")[0]);q-=aa_absTop(jQuery(this).parents(".aapopup")[0])}if(ajaxart.isChrome){var s=jQuery(this).parents(".dialog_box")[0];if(!s){s=jQuery(this).parents(".aa_dlg")[0]}if(s){r-=aa_absLeft(s);q-=aa_absTop(s)}}p.DeleteDiv.style.left=r+"px";p.DeleteDiv.style.top=q+"px";jQuery(p.DeleteDiv).show()};n.onmouseout=function(r){var q=h.vars._Cntr[0];if(!r){var r=window.event}var p=r.relatedTarget||r.toElement;if(p==q.DeleteDiv){return}var q=h.vars._Cntr[0];jQuery(q.DeleteDiv).hide()}}};return[a]},TableSummaryLine:function(d,f,b){var a={isObject:true};a.InitializeContainer=function(g,h){var l=h.vars._Cntr[0];if(!l.TableSummaryLines){l.TableSummaryLines=[]}l.TableSummaryLines.push({isObject:true,Title:aa_text(f,d,"Title",b),Formula:aa_text(f,d,"Formula",b),IsRelevant:function(m){if(m){var n=aa_text([],d,"ShowInGroup",b);if(n=="never"||(n=="auto"&&m.Count<2)){return false}}return true}});l.InjectSummaryLines=function(w,s,y){var m=jQuery(w.Ctrl).find(".aatable>thead").find(">tr>th");for(var A in w.TableSummaryLines){if(!w.TableSummaryLines[A].IsRelevant(y)){continue}var u=w.TableSummaryLines[A].Formula;var v=document.createElement("TR");if(y){v.className="aa_group_summary_line aa_group_summary_line_"+y.Id}else{v.className="aa_table_summary_line aa_table_summary_line_"+w.TableSummaryLines[A].Id}if(y){v.Group=y}for(var q=0;q<m.length;q++){var n=m[q].Field;var o=document.createElement("TD");o.Field=n;o.className="aa_table_summary_line_fld_"+n.Id+" content";var p="";if(q==0){p=w.TableSummaryLines[A].Title}else{if(u!=""&&q>0){if(q>0&&n.IsNumber){var z=window["aa_"+u];if(z){try{var t=y?y.Items:w.FilteredWrappers;if(t){p=z(t,n.Id)}}catch(r){}}}}else{var t=y?y.Items:w.FilteredWrappers;p=aa_text(t,d,"CustomFormula",aa_ctx(b,{_Field:[n]}))}}jQuery(o).html(p);v.appendChild(o)}s.appendChild(v)}};l.RegisterForPostAction(this)};a.PostAction=function(g,h){var m=h.vars._Cntr[0];var l=ajaxart_find_aa_list(m);jQuery(l).find(">.aa_table_summary_line").remove();m.InjectSummaryLines(m,l)};return[a]},TreeDragAndDrop:function(f,g,d){var b={isObject:true};var a=function(l,o){var q=o.vars._Cntr[0];var h=ajaxart_topCntr(jQuery(q.Ctrl));q.TreeDrag=function(J){var F=o.vars._Cntr[0];var H=ajaxart_topCntr(jQuery(F.Ctrl));var B=ajaxart_find_aa_list(H);var A=aa_mousePos(J);if(H.SuspectItemDrag!=null){var v=Math.abs(A.y-H.SuspectItemDrag.mousePos.y);if(v<5){return aa_stop_prop(J)}var K=H.SuspectItemDrag.elem;if(!K.hasClass("aa_item")){K=K.parents(".aa_item").slice(0,1)}var E=K.parents(".aa_container")[0];if(E==null){return aa_stop_prop(J)}F.TreeDragBegin(J);H.SuspectItemDrag=null}if(H.draggedElem==null){return true}var I=B;var z=A.y;var s={distance:1000};if(!H.SpaceElem.Positioned){var t=jQuery(H.Ctrl).find(".aa_move_place_holder").filter(function(){return jQuery(this).parents(":hidden").length==0});for(var G=0;G<t.length;G++){var v=Math.abs(aa_absTop(t[G])-z);if(s.distance>v){s={distance:v,holder:t[G]}}}if(s.holder){s.holder.appendChild(H.SpaceElem);H.SpaceElem.Positioned=true}else{ajaxart.log("Can not find nearest place holder");F.TreeDragEnd({},true);return}}var D=H.SpaceElem.parentNode;if(!D){return}var C=D.PreHolder;while(jQuery(C).parents(":hidden").length>0){C=C.PreHolder}var r=D.NextHolder;while(jQuery(r).parents(":hidden").length>0){r=r.NextHolder}var y=aa_absTop(H.draggedElem,false);var u=aa_absTop(H.draggedElem,false)+jQuery(H.draggedElem).height();if(C&&aa_absTop(C,false)>y){C.appendChild(H.SpaceElem)}if(r&&aa_absTop(r,false)<u){r.appendChild(H.SpaceElem)}H.draggedElem.style.top=z-aa_absTop(B,false)+"px";var w=aa_absLeft(H.SpaceElem,false);if(aa_is_rtl(H.Ctrl)){w=w+jQuery(H.SpaceElem).width()-jQuery(H.draggedElem).width()}H.draggedElem.style.left=w-aa_absLeft(B,false)+"px";return aa_stop_prop(J)};q.TreeDragEnd=function(v,t){var u=o.vars._Cntr[0];var r=ajaxart_topCntr(jQuery(u.Ctrl));var s=ajaxart_find_aa_list(r);if(t){jQuery(r.OriginalElem).show()}else{if(r.SpaceElem.parentNode){r.SpaceElem.parentNode.dragEnd(r.OriginalElem)}aa_first([],f,"OnDrop",d);r.OriginalElem=null}s.onmousemove=r.onmousemoveOrig;s.onmousedown=r.onmousedownOrig;s.onmouseup=r.onmouseupOrig;s.style.position=s.PrevPosition;document.onmouseup=null;document.onkeydown=null;r.draggedElem=null;jQuery(document).find(".aa_move_place_holder").remove();jQuery(document).find(".aa_dragged_elem").remove();ajaxart_restoreSelection(document.body);r.DAndDOwner="";aa_invoke_cntr_handlers(u,u.ContainerChange,[],o);return aa_stop_prop(v)};q.TreeDragBegin=function(K,w){var D=o.vars._Cntr[0];var I=ajaxart_topCntr(jQuery(D.Ctrl));var A=ajaxart_find_aa_list(I);var L=I.SuspectItemDrag.elem;if(L.hasClass("aa_item")){var u=L}else{var u=L.parents(".aa_item").slice(0,1)}if(u.length==0){return aa_stop_prop(K)}var F=aa_absLeft(u[0],false)-aa_absLeft(A,false);var E=aa_absTop(u[0],false)-aa_absTop(A,false);var G=!u.parent().hasClass("aa_treenode");if(G&&u.parent().children().length==1){return aa_stop_prop(K)}I.DAndDOwner="TreeDragAndDrop";ajaxart_disableSelection(document.body);var N=[aa_dataitems_of_elem(u)];var r=function(R,Q){var P=jQuery(R).parents(".aa_item")[0];if(jQuery(R).find(">.aa_item").length>0&&jQuery(P).find(">.hitarea").length==0){jQuery(P).addClass("non_leaf");P.collapsed=false;var O=document.createElement("div");O.className="hitarea collapsable "+D.hitAreaCssClass;P.insertBefore(O,P.firstChild)}if(Q&&jQuery(Q).find(">.aa_item").length==0){jQuery(Q).parent().find(">.hitarea").remove()}};var t=function(Q,U,P){var T=jQuery(Q).hasClass("aa_container")?Q.Cntr:jQuery(Q).parents(".aa_container")[0].Cntr;var R=aa_dataitems_of_elem(U||Q);var O=ajaxart_runMethod(N,R,"CanPasteFromDataItems",o);if(O.length==0||O[0]!="true"){return}var S=document.createElement("div");S.className="aa_move_place_holder";if(P){D.insertNewElement(S,Q)}else{jQuery(S).insertBefore(U)}S.dragEnd=function(X){var Z=jQuery(X).parents("ul").slice(0,1)[0];var W=I.draggedElem.ItemData;var V=jQuery(this).parents(".aa_item")[0];var Y=jQuery(this).parents(".aa_container")[0].Cntr;var ab=aa_dataitems_of_elem(this);if(P){ajaxart_runMethod(W,ab,"MoveToEnd",ab.MoveToEnd.context)}else{var aa={isObject:true,Item:W,BeforeItem:U.ItemData};ajaxart_runMethod([aa],ab,"MoveBefore",ab.MoveBefore.context)}jQuery(this).replaceWith(X);X.style.display="";X.display="";r(Q,Z)}};var C=I.draggedElem=u[0].cloneNode(true);I.SpaceElem=u[0].cloneNode(true);I.OriginalElem=u[0];I.draggedElem.ItemData=I.SpaceElem.ItemData=u[0].ItemData;I.OriginalElem.style.display="none";I.OriginalElem.display="none";jQuery(I.draggedElem).addClass("aa_dragged_elem");jQuery(I.SpaceElem).addClass("aa_dragged_space_elem");ajaxart_disableSelection(I.SpaceElem);ajaxart_disableSelection(I.draggedElem);var A=aa_find_list(I);A.appendChild(I.draggedElem);A.PrevPosition=A.style.position;A.style.position="relative";var y=jQuery(I.Ctrl).find(".aa_item");for(var H=0;H<y.length;H++){var M=y[H];var v=jQuery(M);if(v.hasClass("aa_dragged_elem")||v.parents(".aa_dragged_elem").length>0){continue}var J=v.parents(".aa_list")[0];if(J==null){continue}t(J,M,false);if(v.next().length==0){t(J,M,true)}}var B=jQuery(I.Ctrl).find(".aa_list").filter(function(){return jQuery(this).find(".aa_item").length==0&&!jQuery(this).hasClass("aa_dragged_space_elem")&&jQuery(this).find(".aa_dragged_space_elem").length==0});for(var H=0;H<B.length;H++){t(B[H],null,true)}var s=jQuery(I.Ctrl).find(".aa_move_place_holder");for(var H=0;H<s.length;H++){s[H].PreHolder=H>0?s[H-1]:null;s[H].NextHolder=H<s.length-1?s[H+1]:null}I.draggedElemToMove=u;I.draggedElemToMove.hide();var z=I.SuspectItemDrag.mousePos;I.draggedElem.style.position="absolute";I.draggedElem.style.left=F+"px";I.draggedElem.style.top=E+"px";if(!w){document.onmouseup=o.vars._Cntr[0].TreeDragEnd;I.onkeydownOrig=document.onkeydown;document.onkeydown=function(O){if(O.keyCode==27){o.vars._Cntr[0].TreeDragEnd(O,true)}return true}}return aa_stop_prop(K)};var n=function(v){var t=jQuery((typeof(event)=="undefined")?v.target:(event.tDebug||event.srcElement));if(t.hasClass("hitarea")){return true}var u=o.vars._Cntr[0];var r=ajaxart_topCntr(jQuery(u.Ctrl));var s=ajaxart_find_aa_list(r);if(r.DAndDOwner!=""){return true}var t=jQuery((typeof(event)=="undefined")?v.target:(event.tDebug||event.srcElement));if(t.parents("thead").length>0){return true}r.SuspectItemDrag={elem:t,mousePos:aa_mousePos(v)};r.onmousemoveOrig=s.onmousemove;r.onmouseupOrig=s.onmouseup;r.onmousedownOrig=s.onmousedown;s.onmousemove=u.TreeDrag;return false};var m=function(u){var t=o.vars._Cntr[0];var r=ajaxart_topCntr(jQuery(t.Ctrl));var s=ajaxart_find_aa_list(r);if(r.DAndDOwner!=""){return true}if(r.SuspectItemDrag!=null){r.SuspectItemDrag=null;s.onmousemove=r.onmousemoveOrig;s.onmouseup=r.onmouseupOrig}return true};var q=o.vars._Cntr[0];var h=ajaxart_topCntr(jQuery(q.Ctrl))||q;var p=ajaxart_find_aa_list(h);h.draggedElem=null;h.DAndDOwner="";p.onmousedown=n;ajaxart.ui.bindEvent(p,"mouseup",m)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,d);return[b]},DragAndDropItems:function(f,g,d){var b={isObject:true};var a=function(r,t){var p=t.vars._Cntr[0];var o=aa_find_list(p);p.draggedElem=null;p.DAndDOwner="";ajaxart.ui.bindEvent(o,"mousedown",n);ajaxart.ui.bindEvent(o,"mouseup",u);function q(w){var v=[];jQuery(w).find(">*").each(function(){v=v.concat(q(this))});if(jQuery(w).hasClass("aa_list")){v.push(w)}return v}function h(){var w=[];var v=q(p.Ctrl);for(var y=0;y<v.length;y++){var z=jQuery(v[y]).parents(".aa_container")[0].Cntr;if(z.Items[0].CanPasteFromDataItems&&z.Items[0].CanPasteFromDataItems(p.Items)[0]=="true"){w=w.concat(jQuery(v[y]).find(">.aa_item").get())}}return w}function m(B){var C=aa_find_list(p);var G=aa_mousePos(B);var I=G.y-aa_absTop(C);var J=G.x-aa_absLeft(C);function y(L,N,M){return(L.offsetTop<N&&L.offsetLeft<M&&L.offsetTop+L.offsetHeight>N&&L.offsetLeft+L.offsetWidth>M)}function D(N,M){for(var L=0;L<p.elems4drag.length;L++){if(y(p.elems4drag[L],N,M)){return p.elems4drag[L]}}}function H(L,N,M){return((N<=L&&L<=M)||(M<=L&&L<=N))}function E(M,L){for(var N=0;N<p.elems4drag.length;N++){var O=p.elems4drag[N];if(O==M||O==L){return null}if(H(O.offsetTop,M.offsetTop,L.offsetTop)&&H(O.offsetLeft,M.offsetLeft,L.offsetLeft)){return O}}}if(p.SuspectItemDrag!=null){var w=Math.abs(G.y-p.SuspectItemDrag.mousePos.y)+Math.abs(G.x-p.SuspectItemDrag.mousePos.x);if(w<5){return aa_stop_prop(B)}p.elems4drag=p.elems4drag||h();var v=D(I,J);if(!v){u()}else{s(v,B)}p.SuspectItemDrag=null;return true}if(p.draggedElem==null){return true}var v=D(I,J);var F=p.draggedElem;F.style.top=(I-F.initialMouseOffset.top)+"px";F.style.left=(J-F.initialMouseOffset.left)+"px";if(v==p.spaceElem){return aa_stop_prop(B)}var K=v;if(!K){return aa_stop_prop(B)}while(true){var A=E(K,p.spaceElem);if(!A){break}K=A}var z=3;if(K.offsetLeft<=p.spaceElem.offsetLeft&&K.offsetLeft+z>p.draggedElem.offsetLeft){C.insertBefore(p.spaceElem,K)}else{if(K.offsetLeft>=p.spaceElem.offsetLeft&&K.offsetLeft+K.offsetWidth-z>p.draggedElem.offsetLeft&&K.nextSibling){C.insertBefore(p.spaceElem,K.nextSibling)}}return aa_stop_prop(B)}function l(z,v){var w=aa_find_list(p);w.removeChild(p.draggedElem);if(!v){jQuery(p.spaceElem).replaceWith(p.OriginalElem)}else{w.removeChild(p.spaceElem)}p.OriginalElem.style.display="";p.OriginalElem.display="";w.onmousemove=p.onmousemoveOrig;w.style.position=p.listOriginalPosition;document.onkeydown=p.onkeydownOrig;document.onmouseup=null;p.draggedElem=null;p.elems4drag=null;if(jQuery(p.OriginalElem).nextAll(".aa_item").length==0){ajaxart_runMethod(p.OriginalElem.ItemData,p.Items[0],"MoveToEnd",p.Items[0].MoveToEnd.context)}else{var y={isObject:true,Item:p.OriginalElem.ItemData,BeforeItem:jQuery(p.OriginalElem).nextAll(".aa_item")[0].ItemData};ajaxart_runMethod([y],p.Items[0],"MoveBefore",p.Items[0].MoveBefore.context)}aa_first([p],f,"OnDrop",t);aa_invoke_cntr_handlers(p,p.ContainerChange,[],t);p.DAndDOwner="";return aa_stop_prop(z)}function s(w,A){var z=jQuery(w).parents(".aa_list")[0];p.DAndDOwner="DragAndDropItems";var v=aa_absLeft(w);var B=aa_absTop(w);p.draggedElem=w.cloneNode(true);p.OriginalElem=w;z.appendChild(p.draggedElem);p.spaceElem=w.cloneNode(true);z.insertBefore(p.spaceElem,p.OriginalElem);p.draggedElem.ItemData=p.spaceElem.ItemData=w.ItemData;p.OriginalElem.style.display="none";p.OriginalElem.display="none";jQuery(p.draggedElem).addClass("aa_dragged_elem1");jQuery(p.spaceElem).addClass("aa_dragged_space_elem1");p.draggedElem.style.position="absolute";var y=p.SuspectItemDrag.mousePos;p.draggedElem.initialMouseOffset={top:y.y-B,left:y.x-v};p.draggedElem.style.left=v+"px";p.draggedElem.style.top=B+"px";document.onmouseup=l;p.onkeydownOrig=document.onkeydown;document.onkeydown=function(C){if(C.keyCode==27){l(C,true)}return true};return aa_stop_prop(A)}function n(w){var v=aa_find_list(p);if(p.DAndDOwner!=""){return true}p.listOriginalPosition=v.style.position;v.style.position="relative";ajaxart_disableSelection(p.Ctrl);p.SuspectItemDrag={mousePos:aa_mousePos(w),time:new Date().getTime()};p.onmousemoveOrig=v.onmousemove;v.onmousemove=m;return true}function u(w){var v=aa_find_list(p);if(p.DAndDOwner!=""){return true}ajaxart_restoreSelection(p.Ctrl);if(p.SuspectItemDrag!=null){p.SuspectItemDrag=null;v.onmousemove=p.onmousemoveOrig;v.style.position=p.listOriginalPosition}return true}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,d);return[b]},DragAndDropMover:function(f,g,d){var b={isObject:true};var a=function(h,n){var p=n.vars._Cntr[0];p.draggedElem=null;p.DAndDOwner="";var o=function(w){var z=n.vars._Cntr[0];var A=aa_mousePos(w);if(z.SuspectItemDrag!=null){var t=Math.abs(A.y-z.SuspectItemDrag.mousePos.y);if(t<5){return aa_stop_prop(w)}if(new Date().getTime()-z.SuspectItemDrag.time>1000){l()}else{q(w)}z.SuspectItemDrag=null}var B=z.draggedElem;if(B==null){return true}var C=aa_find_list(z);var s=A.y-B.mouseY;var u=aa_absTop(C,false);var y=aa_absTop(C,false)+jQuery(C).height();if(s<u||s>y){return true}B.style.top=s+"px";var v=aa_absTop(z.spaceElem,false);if(A.y-v<3){if(z.spaceElem.previousSibling!=null){z.draggedParent.insertBefore(z.spaceElem,z.spaceElem.previousSibling)}}if((v+z.spaceElem.offsetHeight)-A.y<-5){if(z.spaceElem.nextSibling.nextSibling!=null){z.draggedParent.insertBefore(z.spaceElem,z.spaceElem.nextSibling.nextSibling)}}return aa_stop_prop(w)};var r=function(v,s){var t=n.vars._Cntr[0];t.draggedParent.removeChild(t.draggedElem);if(!s){jQuery(t.spaceElem).replaceWith(t.OriginalElem)}else{t.draggedParent.removeChild(t.spaceElem)}t.OriginalElem.style.display="";t.OriginalElem.display="";t.Ctrl.onmousemove=t.onmousemoveOrig;document.onkeydown=t.onkeydownOrig;document.onmouseup=null;t.draggedElem=null;if(jQuery(t.OriginalElem).nextAll(".aa_item").length==0){ajaxart_runMethod(t.OriginalElem.ItemData,t.Items[0],"MoveToEnd",t.Items[0].MoveToEnd.context)}else{var u={isObject:true};u.Item=t.OriginalElem.ItemData;u.BeforeItem=jQuery(t.OriginalElem).nextAll(".aa_item")[0].ItemData;ajaxart_runMethod([u],t.Items[0],"MoveBefore",t.Items[0].MoveBefore.context)}aa_first([t],f,"OnDrop",n);aa_invoke_cntr_handlers(t,t.ContainerChange,[],n);ajaxart_restoreSelection(t.Ctrl);t.DAndDOwner="";return aa_stop_prop(v)};var q=function(w){var A=n.vars._Cntr[0];var s=A.SuspectItemDrag.elem;if(s.hasClass("aa_item")){var C=s}else{var C=s.parents(".aa_item").slice(0,1)}if(C.length==0){return aa_stop_prop(w)}if(A.ReadOnly||!A.Items[0].MoveBefore){return aa_stop_prop(w)}A.DAndDOwner="DragAndDropMover";ajaxart_disableSelection(A.Ctrl);var v=aa_find_list(A);var z=aa_absLeft(C[0],false);var y=aa_absTop(C[0],false);A.draggedElem=C[0].cloneNode(true);A.OriginalElem=C[0];A.draggedParent=C[0].parentNode;A.draggedParent.appendChild(A.draggedElem);A.spaceElem=C[0].cloneNode(true);A.draggedParent.insertBefore(A.spaceElem,A.OriginalElem);A.draggedElem.ItemData=A.spaceElem.ItemData=C[0].ItemData;A.OriginalElem.style.display="none";A.OriginalElem.display="none";jQuery(A.draggedElem).addClass("aa_dragged_elem");jQuery(A.spaceElem).addClass("aa_dragged_space_elem");var B=A.SuspectItemDrag.mousePos;var u=jQuery(A.draggedElem).find("td");for(var t=0;t<u.length;t++){jQuery(u[t]).width(jQuery(u[t]).width())}A.draggedElem.style.position="absolute";if(jQuery(A.Ctrl).parents(".aa_dlg").length>0){A.draggedElem.style.position="fixed"}A.draggedElem.style.left=z+"px";A.draggedElem.style.top=y+"px";A.draggedElem.mouseY=B.y-y;document.onmouseup=r;A.onkeydownOrig=document.onkeydown;document.onkeydown=function(D){if(D.keyCode==27){r(D,true)}return true};return aa_stop_prop(w)};var m=function(w){var v=n.vars._Cntr[0];if(v.DAndDOwner!=""){return true}var u=jQuery((typeof(event)=="undefined")?w.target:(event.tDebug||event.srcElement));if(u.parents("thead").length>0){return true}if(u.hasClass("aa_item")){var s=u.parents(".aa_container")[0]}else{var s=u.parents(".aa_item").parents(".aa_container")[0]}if(s==null||s.Cntr!=v){return true}var t=aa_find_list(v);if(jQuery(t).find(">.detailsInplace_tr").length>0){return}v.SuspectItemDrag={elem:u,mousePos:aa_mousePos(w),time:new Date().getTime()};v.onmousemoveOrig=v.Ctrl.onmousemove;v.Ctrl.onmousemove=o;return true};var l=function(t){var s=n.vars._Cntr[0];if(s.DAndDOwner!=""){return true}if(s.SuspectItemDrag!=null){s.SuspectItemDrag=null;s.Ctrl.onmousemove=s.onmousemoveOrig}return true};p.DAndDOwner="";ajaxart.ui.bindEvent(p.Ctrl,"mousedown",m);ajaxart.ui.bindEvent(p.Ctrl,"mouseup",l)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,d);return[b]}});aa_gcs("cntr",{SelectedItem:function(b,g,a){var f=aa_first(g,b,"Cntr",a);if(f&&f.Ctrl){var d=jQuery(f.Ctrl).find(".aa_selected_item")[0];if(d&&d.ItemData){return d.ItemData}}},ItemDataFromElement:function(b,f,a){var d=aa_first(f,b,"Element",a);if(d&&d.ItemData){return d.ItemData}},RefreshSelectedTextAndImage:function(b,g,a){var f=aa_first(g,b,"Cntr",a);var d=f&&jQuery(f.Ctrl).find(".aa_selected_item")[0];if(f&&d){aa_invoke_cntr_handlers(f,f.RefreshItemTextAndImage,[d],f.Context)}},ParentItemElement:function(d,f,b){var a=jQuery(b.vars.ControlElement).parents(".aa_item");if(a.length>0){return[a[0]]}}});aa_gcs("uiaction",{FireEvent:function(f,g,d){var b=aa_text(g,f,"Event",d);var a=ajaxart.getControlElement(d);for(var h=0;h<a.length;h++){if(h==1&&aa_bool(g,f,"ForOnlyOneElement",d)){return["true"]}var o=a[h];var l={};var m=aa_text(g,f,"MouseButton",d);var n=aa_text(g,f,"KeyCode",d);if(m=="right"){l.button=2}if(n!=""){l.keyCode=n}aa_fire_event(o,b,d,l)}return["true"]},ButtonClick:function(b,g,a){var d=a.vars.ControlElement[0];if(!d){return}var f=jQuery(d);if(f.hasClass("aa_clickable")||f.hasClass("button_hyperlink_image")||f.hasClass("aa_button_clickable")&&!d.jbart_click_behavior){aa_fire_event(d,"click",a,{})}else{aa_fire_event(d,"mousedown",a,{});aa_fire_event(d,"mouseup",a,{})}},SimulateTreeDragBegin:function(d,h,b){var f=ajaxart.getControlElement(b)[0];if(!f){return}var a=jQuery(f).parents(".aa_container")[0];if(a&&a.Cntr.TreeDragBegin){var g=a.Cntr;g.SuspectItemDrag={elem:jQuery(f),mousePos:{x:0,y:0}};g.TreeDragBegin(null,true)}},SimulateTreeDragEnd:function(d,h,b){var f=ajaxart.getControlElement(b)[0];if(!f){return}var a=jQuery(f).parents(".aa_container")[0];if(a&&a.Cntr.TreeDragEnd){var g=a.Cntr;f.appendChild(g.SpaceElem);g.TreeDragEnd(null,false,true)}},SimulateTreeDrop:function(b,f,a){var d=ajaxart.getControlElement(a);return d},ControlElementToRunOn:function(b,f,a){var d=ajaxart.getControlElement(a);return d},Refresh:function(f,h,d){var g=ajaxart.getControlElement(d);for(var b=0;b<g.length;b++){var a=jBart.utils.refresh(g[b]);ajaxart.run(h,f,"RunOnControl",aa_ctx(d,{ControlElement:[a]}))}return["true"]},SortContainer:function(b,g,a){var m=aa_text(g,b,"Cntr",a),f=null;var l=aa_text(g,b,"SortBy",a);var h=aa_text(g,b,"SortDirection",a);if(m==""){f=(a.vars.HeaderFooterCntr||a.vars._Cntr)[0]}else{if(m.indexOf("Page_")==0){var d=jQuery("."+m)[0];if(d){f=d.Cntr}}else{if(m.indexOf("fld_")==0){var d=jQuery("."+m)[0];if(d){f=d.Cntr}}}}if(!f){return}f.DataHolder=f.DataHolder||aa_createDataHolderFromCntr(f,a);f.DataHolder.UserDataView.Sort=[{SortBy:l,SortDirection:h}];aa_recalc_filters_and_refresh(f,g)},FilterContainer:function(d,h,b){var l=aa_text(h,d,"Cntr",b),g=null;var a=aa_first(h,d,"FilterQueryXml",b);if(!ajaxart.isxml(a)){return}if(l==""){g=(b.vars.HeaderFooterCntr||b.vars._Cntr)[0]}else{if(l.indexOf("Page_")==0){var f=jQuery("."+l)[0];if(f){g=f.Cntr}}else{if(l.indexOf("fld_")==0){var f=jQuery("."+l)[0];if(f){g=f.Cntr}}}}if(!g){return}g.DataHolder=g.DataHolder||aa_createDataHolderFromCntr(g,b);g.DataHolder.UserDataView.Filters=aa_cntr_filterXml2Objects(g,a);aa_recalc_filters_and_refresh(g,h)},UpdateBrowserTitle:function(b,d,a){var f=aa_text(d,b,"Title",a);document.title=f;return["true"]},Hide:function(b,f,a){var d=ajaxart.getControlElement(a)[0];if(ajaxart.ishtml(d)){d.display="none";d.style.display="none"}return["true"]},SetBrowserIcon:function(d,g,a){var b=aa_text(g,d,"Icon",a);if(b==""){return[]}var f=jQuery('<link rel="shortcut icon" href="'+b+'" type="image/x-icon">');jQuery("head").append(f);return[]},FindFirstInput:function(b,g,a){var f=ajaxart.getControlElement(a);if(f.length==0){return[]}var d=jQuery(f[0]).find("input, textarea, .ok_button");if(d.length>0){return[d[0]]}return[]},Show:function(d,g,b){var f=ajaxart.getControlElement(b);for(var a=0;a<f.length;a++){f[a].style.display="block"}return[]},ReplaceContents:function(b,g,h){var f=ajaxart.getControlElement(h);var a=ajaxart.run(g,b,"NewContents",h);if(f.length==0){return[]}if(a.length==0){a=[document.createElement("div")]}var d=f[0].firstChild;ajaxart.xml.setAsOnlyChildElem(f[0],a[0]);aa_element_attached(a[0]);aa_element_detached(d);return[]},RunEvent:function(d,h,b){var g=ajaxart.getControlElement(b);var a=aa_text(h,d,"VarName",b);var f=aa_text(h,d,"Action",b);for(i in g){ajaxart_runevent(g[i],a,f)}return["true"]},SelectedInCombo:function(b,f,a){var d=ajaxart.getControlElement(a);if(d.length==0){return[]}var g=d[0];if("value" in g){return[g.value]}return[]},SetComboOptionValue:function(f,l,b){var a=ajaxart.getVariable(b,"InputForChanges");var h=ajaxart.getControlElement(b);if(h.length==0){return[]}var g=aa_text(a,f,"Value",b);var d=h[0];if("value" in d){d.value=g;d.text=g}return l},Alert:function(b,d,a){var f=aa_text(d,b,"Text",a);alert(f)},SetInnerTextOfData:function(d,f,b){var a=ajaxart.getVariable(b,"InputForChanges");jQuery(f[0]).find(".aacheckbox_text").text(a[0])},ElementByID:function(d,g,h){var f=ajaxart.run(g,d,"StartFrom",h);var a=aa_text(g,d,"ID",h);var b=ajaxart.calcParamsForRunOn(h,a,f);return ajaxart.getControlElement(b)},ElementByClass:function(g,l,m){var h=aa_first(l,g,"StartFrom",m);var a=aa_text(l,g,"Cls",m);if(h==null||h.length==0){return[]}var d=jQuery(h).find("."+a);var b=[];for(var f=0;f<d.length;f++){b.push(d[f])}return b},GoUp:function(d,g,m){var l=aa_text(g,d,"TopHtmlTag",m).toLowerCase();var b=aa_text(g,d,"TopId",m);b=b.replace(/ /g,"_");var h=aa_text(g,d,"TopClass",m);var a=ajaxart.getControlElement(m);if(!ajaxart.ishtml(a)){return[]}var f=a[0];while(f!=null&&f.nodeType!=4){if(h!=""&&jQuery(f).hasClass(h)){return[f]}if(b!=""&&f.id==b){return[f]}if(typeof(f.tagName)!="undefined"&&f.tagName.toLowerCase()==l){return[f]}f=f.parentNode}return[]},RefreshItemElements:function(d,f,b){var a=ajaxart.run(f,d,"ItemElements",b);ajaxart_uiaspects_refreshElements(a);return["true"]},SelectedItemElement:function(d,g,a){var f=ajaxart.getControlElement(a);if(f.length==0){return[]}var b=jQuery(f[0]).find(".aa_selected_item");if(b.length==0){return[]}return[b[0]]},DeleteItemElements:function(h,m,g){var b=ajaxart.run(m,h,"ItemElements",g);for(var f in b){var l=b[f];if(jQuery(l).hasClass("aa_selected_item")){var a=l.nextSibling;if(a==null){a=l.previousSibling}if(a==null){var d=jQuery(l).parents(".aa_item");if(d.length>0){a=d[0]}}if(a!=null){ajaxart_uiaspects_select(jQuery(a),jQuery(l),"auto",g,true)}}l.parentNode.removeChild(l)}return["true"]},AddItemElement:function(d,g,b){var a=ajaxart.run(g,d,"Item",b);var h=aa_first(g,d,"ParentElement",b);var f=ajaxart_uiaspects_container(b);var l=ajaxart_uiaspects_addElement(a,f,h);if(aa_bool(g,d,"SelectIt",b)){ajaxart_uiaspects_select(jQuery(l),jQuery([]),"auto",b,true)}ajaxart.run([l],d,"DoOnAddedElement",aa_ctx(b,{ControlElement:[l]}));return["true"]},ExpandText:function(f,h,b){var g=aa_first(h,f,"ItemElement",b);var d=jQuery(g).find(">.aa_cell_element");for(var a=0;a<d.length;a++){if(d[a].expandableText){d[a].expandableText.Build(d[a].expandableText.States.control)}}},CheckAll:function(f,g,b){var n=aa_bool(g,f,"Select",b);var m=ajaxart_uiaspects_container(b);var a=jQuery(m.Ctrl).find(".aa_item");for(var h=0;h<a.length;h++){var d=jQuery(a[h]);var l=d.find(">.aacheckbox_value");if(l.length>0&&!a[h].hidden&&l[0].checked!=n){if(l[0].checked!=n){m.ToogleCheckbox(m.Context,d)}aa_checked(l[0],n)}}return["true"]},HasClass:function(f,g,d){var a=aa_text(g,f,"Cls",d);var b=ajaxart.getControlElement(d);if(b.length==0){return[]}if(jQuery(b[0]).hasClass(a)){return["true"]}return[]},ReplaceControl:function(b,f,g){var a=ajaxart.run(f,b,"NewControl",g);var d=ajaxart.getControlElement(g);if(d.length==0){return[]}if(a.length==0){a=[document.createElement("div")]}if(d[0].id.length>0&&a[0].id.length==0){a[0].id=d[0].id}ajaxart.replaceXmlElement(d[0],a[0],true);return f},Select:function(f,g,d){var a=jQuery(d.vars.ControlElement).find(".aa_item");for(var b=0;b<a.length;b++){if(a[b].ItemData&&aa_bool(a[b].ItemData,f,"FilterOnItem",d)){ajaxart.runNativeHelper(a[b].ItemData,f,"Click",aa_ctx(d,{ControlElement:[a[b]]}));return[]}}return[]},MobileScrollToElement:function(d,g,b){var f=aa_first(g,d,"Element",b);var a=f;while(a&&a.nodeType==1){if(a.IScroll){a.IScroll.scrollToElement(f,400);return}a=a.parentNode}},ItemElementByFilter:function(f,g,d){var a=jQuery(d.vars.ControlElement).find(".aa_item");for(var b=0;b<a.length;b++){if(aa_bool(a[b].ItemData,f,"FilterOnItem",d)){return[a[b]]}}},ElementByInnerFilter:function(f,h,l){var g=ajaxart.run(h,f,"TopElement",l);if(!ajaxart.ishtml(g)){return[]}var b=[];function a(o){if(o.nodeType!=1){return}if(o.ajaxart){var m=o.ajaxart.data}else{var m=o.ItemData}if(m!=null&&aa_bool(m,f,"Filter",l)){b.push(o)}var n=o.firstChild;while(n!=null){if(n.nodeType==1){a(n)}n=n.nextSibling}}for(var d=0;d<g.length;d++){a(g[d])}return b},Focus:function(d,h,b){var a=ajaxart.getControlElement(b);if(a.length==0){return[]}var f=a[0];var g=1;if(ajaxart.isSafari){g=100}function m(n){if(!n.tabIndex||n.tabIndex==-1){n.tabIndex=1}if(n.SetFocus){return n.SetFocus()}if(aa_bool(h,d,"OnFirstInput",b)){if(n.tagName.toLowerCase().indexOf("input,textarea")!=-1){n.focus()}else{var o=jQuery(n).find(":input")[0];if(o){o.focus()}}}else{n.focus()}}if(jQuery(f).parents("body").length==0){var l=function(n){setTimeout(function(){if(!ajaxart.isattached(n)){return}m(n)},g)};l(f)}else{m(f)}return[]},MoveSelection:function(g,h,m){var l=aa_text(h,g,"Direction",m);var b=ajaxart.getControlElement(m);if(b.length==0){return[]}var f=jQuery(b[0]).find(".selected");var a=[];switch(l){case"One Up":a=f.prev();break;case"One Down":a=f.next();break;default:ajaxart.log("MoveSelection - no valid direction:"+l)}if(a.length>0){f.removeClass("selected");a.addClass("selected");ajaxart_selectionchanged(a[0]);var d=b[0]["ajaxart"];ajaxart.run(a[0]["ajaxart"].data,d.script,"OnSelect",d.params)}},RefreshAllItemsInItemList:function(b,f,a){var d=a.vars._Cntr[0];aa_recalc_filters_and_refresh(d,f,a)},DataItemsOfItemInTree:function(b,f,a){var d=aa_first(f,b,"ItemElement",a);if(!d||!d.ItemData){return[]}d=jQuery(d).find(".aa_treenode")[0];if(d&&d._Items){return[d._Items]}},RefreshAfterSelectedDeleted:function(g,l,d){var b=ajaxart.getControlElement(d);var f=jQuery(b).find(".selected");if(f.length==1){var h=f[0];var a=h.nextSibling;if(a==null){a=h.previousSibling}h.parentNode.removeChild(h);if(a!=null){jQuery(a).addClass("selected");aa_xFireEvent(a,"click",null)}}return["true"]},MouseRightClick:function(f,g,d){var a=ajaxart.getControlElement(d);for(var b=0;b<a.length;b++){}},SetEnabling:function(d,f,b){var a=aa_bool(f,d,"Enable",b);var g=ajaxart.getControlElement(b);if(g.length==0){return[]}if(a){g[0].removeAttribute("disabled")}else{g[0].setAttribute("disabled","true")}},GoToUrl:function(d,f,b){var a=aa_text(f,d,"Url",b);if(window._gaq){_gaq.push(["_trackPageview","/"+a.split("/").pop()])}if(ajaxart.inPreviewMode==true){return[]}var g=window.location+"_";if(a.length>0&&window.location!=a){window.location=a}if(ajaxart.hash_change_by_js_count!=null&&g!=window.location+"_"){ajaxart.hash_change_by_js_count++}return["true"]},JQueryFind:function(profile,data,context){var exp=aa_text(data,profile,"Expression",context);var all=aa_bool(data,profile,"All",context);var logOnEmptyResult=aa_bool(data,profile,"LogOnEmptyResult",context);var runOnData=aa_bool(data,profile,"RunOnData",context);var runOnScreen=aa_bool(data,profile,"RunOnScreen",context);var control=null;if(!runOnData){control=ajaxart.getControlElement(context,true)}else{if(data.length>0){control=data[0]}}if(control==null){return[]}try{var result=[];if(runOnScreen){eval('result = jQuery("'+exp+'")')}else{if(exp.length>0&&exp.charAt(0)=="."&&exp.indexOf("(")!=-1){eval("result = jQuery(control)"+exp)}else{result=jQuery(control).find(exp)}}if(result.length>0){if(!all){return[result[0]]}var arr=[];for(i=0;i<result.length;i++){arr.push(result[i])}return arr}else{if(logOnEmptyResult){ajaxart.log("JQueryFind - found nothing, expression :"+exp,"warning")}}}catch(e){ajaxart.log("JQueryFind failed, expression :"+exp,"error")}return[]},StretchToBottom:function(f,h,d){if(!ajaxart.ishtml(h)){return[]}var b=h[0];jQuery(b).css("overflow","auto");var l=aa_int(h,f,"HeightDelta",d);var g=aa_int(h,f,"WidthDelta",d);var a=function(){ajaxart.ui.HeightToWindowBottom(b,l)};jQuery(window).bind("resize",function(){setTimeout(a,100)});setTimeout(a,100);return["true"]},RegisterOnPageClose:function(b,d,a){window.onbeforeunload=function(){if(window.preventOnBeforeUnload){return}var f=aa_bool(d,b,"ShowMessageIf",a);var g=aa_multilang_text(d,b,"Message",a);if(f){return g}};return["true"]},MakeCssInline:function(f,m,d){var l=aa_first(m,f,"Control",d);var o=aa_first(m,f,"CssReplacer",d);var g=[];var a=ajaxart.xml.xpath(o,"*",false);for(var n=0;n<a.length;n++){var p=a[n].getAttribute("Condition");var b=a[n].getAttribute("Css");var q=jQuery(l).find(""+p);for(var h=0;h<q.length;h++){q[h].style.cssText=b}}return[l]},HideMessageBarOnUserClick:function(b,f,a){var d=function(){var g=ajaxart.getControlElement(a);for(i in g){jQuery(g[i]).hide()}ajaxart_capture_onclick(null)};setTimeout(function(){ajaxart_capture_onclick(d)},1);return["true"]},RefreshAfterDataItemsChanged:function(b,d,a){return aa_refreshAfterDataItemsChanged(a)},DownloadFile:function(d,f,a){var b=document.createElement("IFRAME");b.style.width="0px";b.style.height="0px";b.setAttribute("frameborder","0");b.src=aa_text(f,d,"Url",a);jQuery(b).appendTo("body");return[]},BindHashChangeEvent:function(b,d,a){ajaxart.hash_change_func=function(){ajaxart.run(d,b,"Action",a)};ajaxart.hash_change_by_js_count=0;window.onhashchange=function(){if(ajaxart.hash_change_by_js_count>0){ajaxart.hash_change_by_js_count--;return}if(ajaxart.hash_change_func!=null){ajaxart.hash_change_func()}};return[]},SetTextSelection:function(f,g,d){var b=ajaxart.getControlElement(d,true);var h=aa_int(g,f,"SelectionStart",d);var a=aa_int(g,f,"SelectionEnd",d);if(b==null){return[]}aa_defineElemProperties(b,"selectionStart,selectionEnd");b.focus();setTimeout(function(){if(b.selectionStart===undefined){var l=b.createTextRange();l.moveStart("character",h);l.collapse();if(!isNaN(a)){l.moveEnd("character",a-h)}else{l.moveEnd("character",b.value.length-h)}l.select()}else{if(!isNaN(h)){b.selectionStart=h}if(!isNaN(a)){b.selectionEnd=a}}},100);return[]},RunActions:function(d,f,b){var a=ajaxart.xml.xpath(ajaxart.parsexml('<xml value=""/>'),"@value");var g=aa_ctx(b,{AyncFailure:a});return ajaxart.gcs.action_async.SequentialRun(d,f,g)}});function aa_fire_event(f,d,a,b){if(typeof(b)=="undefined"){b={}}if(!ajaxart.isSafari||ajaxart.isattached(f)){aa_xFireEvent(f,d,b,a.vars.InTest!=null)}else{ajaxart_source_elem_in_test=f;while(f!=null){aa_xFireEvent(f,d,b,a.vars.InTest!=null);f=f.parentNode}ajaxart_source_elem_in_test=null}}function aa_refreshAfterDataItemsChanged(b){var m=b.vars._Items[0];if(m==null){return[]}if(b.vars._Cntr){aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].DataItemsChange,[],b)}var l=jQuery(document).find(".aa_items_listener");if(b.vars.ControlElement&&b.vars.ControlElement[0]!=null&&!ajaxart.isattached(b.vars.ControlElement[0])){var n=b.vars.ControlElement[0];while(n.parentNode!=null){n=n.parentNode}var d=jQuery(n).find(".aa_items_listener");if(d.length>0){l=d}}var f=jQuery(b.vars.ControlElement);var a=f.parents(".aa_items_listener").get();if(f.hasClass("aa_items_listener")){a.push(f[0])}for(var h=0;h<l.length;h++){var o=l[h];var p=false;for(var g=0;g<a.length;g++){if(o==a[g]){p=true}}if(p){continue}if(o._Items==m){o.RefreshAfterItemsChanged.call(o)}else{if(o._Items.EqualsToDataItems&&o._Items.EqualsToDataItems(m)){o._Items.Refresh([],b);o.RefreshAfterItemsChanged.call(o)}}}return[]}aa_inuiaction=false;ajaxart.gcs.usage={DataUsage:function(b,d,f){var a=aa_text(d,b,"UserAgent",f);if(a){aa_determine_device(a)}return ajaxart.trycatch(function(){if(ajaxart.isBackEnd){ajaxart.log("Start usage "+b.getAttribute("Name")+" "+b.getAttribute("Of"))}ajaxart.serverData["Usage Data"]=d;ajaxart.run(d,b,"RunBefore",f);var g=ajaxart.run(d,b,"Result",f);var g=ajaxart.run(g,b,"ResultTransformer",f);var l=aa_bool(g,b,"ExpectedResult",f);ajaxart.run(d,b,"CleanAfter",f);if(ajaxart.isBackEnd){if(l){ajaxart.log("success")}else{ajaxart.log(b.getAttribute("Name")+" "+b.getAttribute("Of")+": failure")}}if(f.vars._TestOutput){var h=jQuery("<span/>").text(ajaxart.usage.resultAsText(g)[0]);h.html(h.html().replace("\n","</br>"));if(f.vars._TestOutput[0].OutputControl){f.vars._TestOutput[0].OutputControl[0].appendChild(h[0]);aa_fixTopDialogPosition()}else{f.vars._TestOutput[0].OutputControl=h[0]}}if(l==false){g=ajaxart.usage.resultAsText(g)[0];return g?[g]:["aa"]}return[]},function(g){return["execption: "+g]});if(a){aa_determine_device()}},DataUsage_Result:function(b,d,a){ajaxart.run(d,b,"RunBefore",a);return ajaxart.run(d,b,"Result",a)},DataUsage_Data:function(b,d,a){if(d.length==0){return[""]}return d},RunSingleTest:function(d,f,b){IsTest=true;if(!ajaxart.isxml(f)){return[]}var a=f[0];ajaxart.runTestLoop([a],0);return[]},ContainsText:function(g,z,d){var q=aa_text(z,g,"LookIn",d);var p=z;if(q=="current dialog"){p=[];var n=aa_top_dialog();if(n&&n.dialogContent){p=[n.dialogContent]}if(!p[0]&&n){p=[n]}if(!p[0]){var y=openDialogs[openDialogs.length-1];if(y){p=[y]}}}else{if(q=="current popup"){p=aa_contentsOfOpenPopup()}}if(aa_bool(z,g,"RemoveHiddenElements",d)&&ajaxart.ishtml(p[0])){var u=[];function t(B){if(B.style&&(B.style.display=="none"||B.display=="none")){u.push(B)}else{if(B.style&&B.style.position.toLowerCase().indexOf("absolute")!=-1){u.push(B)}else{for(var A=0;A<B.childNodes.length;A++){t(B.childNodes[B.childNodes.length-A-1])}}}}t(p[0]);for(var w in u){if(u[w].parentNode){u[w].parentNode.removeChild(u[w])}}}var h=aa_bool(z,g,"IgnoreCase",d);var f=aa_bool(z,g,"IgnoreOrder",d);var o=aa_bool(z,g,"OneOf",d);var s="";if(ajaxart.isxml(p)){s=ajaxart.xml2text(p)}else{s=ajaxart.totext(p)}var b=ajaxart.runsubprofiles(z,g,"Text",d);var l=0;if(h){s=s.toLowerCase()}var m=(b.length==0);for(var w=0;w<b.length;w++){var r=b[w];if(h){r=r.toLowerCase()}var a=s.indexOf(r,l);if(!o&&a==-1){return[]}m=true;l=a+r.length;if(f||o){l=0}}if(!m){return[]}var v=aa_text(z,g,"AndNotContainingText",d);if(!v){return["true"]}if(h){v=v.toLowerCase()}if(s.indexOf(v)>-1){return[]}return["true"]},And:function(b,d,a){return ajaxart.gcs.yesno.And(b,d,a)},Or:function(b,d,a){return ajaxart.gcs.yesno.OR(b,d,a)},HasFocus:function(d,f,b){var a=aa_text(f,d,"CssClass",b);if(jQuery(document.activeElement).hasClass(a)){return["true"]}if(jQuery(b.vars.TopControlForTest).find(".in_focus").hasClass(a)){return["true"]}if(jQuery(".in_focus").hasClass(a)){return["true"]}return[]}};ajaxart.usage={};ajaxart.usage.resultAsText=function(a){if(a.length==0){return["false"]}if(ajaxart.isxml(a)){return[ajaxart.xml2text(a)]}if(ajaxart.isObject(a[0])){return[ajaxart.text4trace(a)]}else{return a}return a};function aa_setImage(g,b,f){g=jQuery(g)[0];if(!g){return}f=f||{};if(!f.hasOwnProperty("removeIfNoImage")){f.removeIfNoImage=true}if((!b||!b.url)&&f.removeIfNoImage){jQuery(g).remove();return}if(!b){return}if(b.inSprite){var a=jQuery("<div/>").appendTo(g);a.width(b.width).height(b.height);a.css("display","inline-block");a.css("background-image","url("+b.url+")");a.css("background-position",""+b.x+" "+b.y)}else{var d=jQuery("<img/>").attr("src",b.url).appendTo(g);if(b.width){d.attr("width",b.width)}if(b.height){d.attr("height",b.height)}}}aa_gcs("xml",{XmlToText:function(d,g,a){if(!g[0]){return[]}if(!g[0].nodeType){try{return[JSON.stringify(g[0])]}catch(h){return aa_totext(g)}}var b=aa_bool(g,d,"PrettyPrint",a);var f=aa_bool(g,d,"Escape",a);if(g.length==0){return[]}if(!ajaxart.isxml(g[0])){return g[0]}if(b){return[ajaxart.xml.prettyPrint(g[0])]}else{return[ajaxart.xml2text(g[0])]}},TextToXml:function(b,d,a){return ajaxart.make_array(d,function(f){if(ajaxart.isxml(f[0])&&f[0].nodeType==1){return f[0]}return ajaxart.parsexml(ajaxart.totext(f),"TextToXml",null,true)})},JSONToXml:function(f,g,d){var a=aa_text(g,f,"Tag",d);if(aa_text(g,f,"InputFormat",d)=="Object"){var h=aa_first(g,f,"JSON",d)}else{var h=aa_text(g,f,"JSON",d)}var b=h&&aa_JSON2Xml(h,a);return b?[b]:[]},CSVToXml:function(d,f,b){var a=aa_CSV2Xml(aa_text(f,d,"CSV",b));if(a){return[a]}return[]},XPath:function(h,g,f){var d=aa_text(g,h,"XPath",f);var b=aa_bool(g,h,"CreateIfDoesNotExist",f);var m=aa_text(g,h,"DefaultValue",f);var l=ajaxart.run(g,h,"From",f);if(l==null){l=g}if(d==""){return l}if(!ajaxart.isxml(l)||d==""){return[]}var a=ajaxart.xml.xpath(l[0],d,b,m);return a},XPathFromList:function(f,m,b){var n=aa_text(m,f,"XPath",b);var o=ajaxart.run(m,f,"List",b);if(n==""){return o}var d=(n.charAt(0)=="&");var p="";if(d){p=n.substring(1)}var g=[];for(var l=0;l<o.length;l++){var q=o[l];if(d){var a=q.getAttribute(p);if(aa_hasAttribute(q,p)){g.push(a)}}else{var h=ajaxart.xml.xpath(q,n);ajaxart.concat(g,h)}}return g},IsArrayElement:function(f,g,b){if(!ajaxart.isxml(g)){return[]}var a=aa_tag(g[0]);var d=ajaxart.xml.NextSibling(g[0],a);if(d==null){d=ajaxart.xml.PrevSibling(g[0],a)}if(d!=null){return["true"]}return[]},NextSibling:function(d,f,b){var a=ajaxart.xml.NextSibling(f[0],null);if(a!=null){return[a]}return[]},PreviousSibling:function(d,f,b){var a=ajaxart.xml.PrevSibling(f[0],null);if(a!=null){return[a]}return[]},ChildAtPosition:function(g,l,f){var a=aa_int(l,g,"Position",f);if(ajaxart.isxml(l)&&l[0].nodeType==1){var h=l[0];var d=0;for(var b=0;b<h.childNodes.length;b++){if(h.childNodes.item(b).nodeType==1){d++}if(d==a){return[h.childNodes.item(b)]}}}return[]},ToXmlElement:function(d,f,b){if(f.length==0){return[]}var a=f[0];if(a.nodeType==1){return f}if(a.nodeType==2||a.nodeType==3||a.nodeType==4){return ajaxart.xml.xpath(a,"..")}return[]},XPathOfNode:function(d,f,b){var h=aa_text(f,d,"StopAtIDAttribute",b);var a=aa_bool(f,d,"Specific",b);var g=aa_first(f,d,"TopXml",b);if(f.length==0){return[]}return[ajaxart.xml.xpath_of_node(f[0],h,a,g)]},XPathOfNodeWithTopTags:function(b,f,a){var o=ajaxart.run(f,b,"TopTags",a);var m=aa_first(f,b,"TopXml",a);if(!ajaxart.isxml(f)){return[]}var l="";for(var g=0;g<o.length;g++){l+=","+ajaxart.totext(o[g])+","}var d="";var h=f[0];var n="";while(h!=null&&h.nodeType!=9){if(m!=null&&h==m){break}if(h.nodeType==2){d="@"+h.nodeName}else{var n=aa_tag(h);if(l.indexOf(","+n+",")>-1){d=aa_text([n],b,"PrefixByTagToAdd",a)+d;break}if(d.length>0){d=h.nodeName+"/"+d}else{d=h.nodeName}}h=ajaxart.xml.parentNode(h)}return[d]},ChangeXml:function(f,g,b){var a=aa_first(g,f,"Xml",b);if(a==null){return[]}a=[a];if(!ajaxart.isxml(a)){return[]}var h=ajaxart.clone_context(b);ajaxart.setVariable(h,"InputForChanges",g);var d=ajaxart.subprofiles(f,"Change");ajaxart.each(a,function(l){ajaxart.each(d,function(m){ajaxart.run([l],m,"",h)})});return["true"]},ItemByID:function(d,g,b){var f=ajaxart.run(g,d,"List",b);var h=aa_text(g,d,"ID",b);for(var a=0;a<f.length;a++){if(typeof(f[a].getAttribute)!="undefined"&&f[a].getAttribute("id")==h){return[f[a]]}}return[]},Delete:function(f,l,b){var m=ajaxart.run(l,f,"Element",b);for(var a=0;a<m.length;a++){var g=m[a];if(g.nodeType==2){var h=ajaxart.xml.parentNode(g);h.removeAttribute(g.nodeName)}var d=g.parentNode;if(d!=null){d.removeChild(g);ajaxart.xml.xml_changed(d)}}return l},RemoveMiddleElement:function(g,l,d){var a=ajaxart.run(l,g,"Element",d);for(var b in a){var h=a[b];if(!h||h.nodeType!=1){return}var f=h.parentNode;while(h.firstChild){f.appendChild(h.firstChild)}f.removeChild(h)}},DeleteChildren:function(f,g,b){var d=ajaxart.run(g,f,"ParentElement",b);if(!ajaxart.isxml(d)){return d}var a=d[0];while(a.firstChild!=null){a.removeChild(a.firstChild)}return g},RecursiveValuesOfAttribute:function(h,l,g){var b=aa_text(l,h,"Attribute",g);if(!ajaxart.isxml(l)){return[]}var f=[];var d=l[0];var a=","+aa_text(l,h,"ExcludeTags",g)+",";var m=function(q,p,o,n){if(aa_hasAttribute(p,o)&&n.indexOf(","+p.tagName+",")==-1){q.push(p.getAttribute(o))}var r=p.firstChild;while(r!=null){if(r.nodeType==1){m(q,r,o,n)}r=r.nextSibling}};m(f,d,b,a);return f},FindXmlByAttribute:function(b,f,a){var g=aa_first(f,b,"ParentXml",a);var l=aa_text(f,b,"Attribute",a);var n=aa_text(f,b,"Value",a);var m=aa_bool(f,b,"FindAll",a);var d=[];if(g==null||g.nodeType!=1||l==""){return[]}var h=function(q,o,s,p,r){if(q.getAttribute(o)==s){p.push(q);if(!r){return}}var t=q.firstChild;while(t!=null){if(t.nodeType==1){h(t,o,s,p,r);if(p.length>0&&!r){return}}t=t.nextSibling}return[]};h(g,l,n,d,m);return d},DeleteAttributes:function(d,f,a){var n=ajaxart.run(f,d,"ParentElement",a);var b=ajaxart.run(f,d,"Exclude",a);if(!ajaxart.isxml(n)){return n}var h=n[0];if(h.nodeType!=1){return f}var o={};for(var g=0;g<b.length;g++){var l=ajaxart.totext(b[g]);if(l!=""){o[l]=true}}var m=[];for(var g=0;g<h.attributes.length;g++){m.push(h.attributes.item(g).name)}for(var g=0;g<m.length;g++){if(o[m[g]]==null){h.removeAttribute(m[g])}}return f},Update:function(d,f,b){var a=ajaxart.getVariable(b,"InputForChanges");var g=ajaxart.run(a,d,"NewValue",b);ajaxart.writevalue(f,g);return f},ReplaceXmlElement:function(d,g,b){var f=aa_first(g,d,"Element",b);var a=aa_first(g,d,"NewElement",b);var h=aa_text(g,d,"Mode",b);if(!f||!a||f==a||f.nodeType!=1||a.nodeType!=1){return}if(h=="keep original tag"){ajaxart.xml.copyElementContents(f,a)}else{if(h=="replace tag"){ajaxart.replaceXmlElement(f,a,false);f=a}}ajaxart.xml.xml_changed(f);ajaxart.run([f],d,"RunOnNewElement",b)},ReplaceElement:function(g,l,d){var a=ajaxart.getVariable(d,"InputForChanges");var h=aa_first(l,g,"Element",d);var b=aa_first(a,g,"NewElement",d);var m=aa_text(a,g,"Mode",d);if(!ajaxart.isxml(h)){return l}if(b!=null&&!ajaxart.isxml(b)){return l}if(b==h){return l}var f=h.parentNode;if(b!=null){if(m=="keep original tag"||aa_tag(h)==aa_tag(b)){ajaxart.xml.copyElementContents(h,b)}else{if(m=="replace tag"){ajaxart.replaceXmlElement(h,b,false);h=b}}}else{if(f!=null){f.removeChild(h)}}if(h!=null){ajaxart.xml.xml_changed(h);ajaxart.run([h],g,"RunOnNewElement",d)}else{ajaxart.xml.xml_changed(f)}return l},MoveElementAfterIndex:function(f,m,b){var d=m[0];var a=aa_int(m,f,"Index",b);if(typeof(d)=="undefined"||d.nodeType!=1){return[]}var n=d.parentNode;var p=aa_tag(d);var o=ajaxart.xml.FirstChild(n,p);var g=o;for(var l=0;l<a;l++){g=o;o=ajaxart.xml.NextSibling(o,p)}if(o==d){return m}var h=n.removeChild(d);if(o==null){if(g==null||g.nextSibling==null){n.appendChild(h)}else{n.insertBefore(h,g.nextSibling)}}else{if(o!=null){n.insertBefore(h,o)}}return m},MoveElement:function(d,h,a){var b=h[0];var l=aa_text(h,d,"To",a);if(typeof(b)=="undefined"||b.nodeType!=1){return[]}var m=b.parentNode;var o=aa_tag(b);var n=null;if(l=="next"){n=ajaxart.xml.NextSibling(b,o);if(n==null){return[]}n=ajaxart.xml.NextSibling(n,o);if(n==null){l="last"}}if(l=="previous"){n=ajaxart.xml.PrevSibling(b,o)}if(l=="first"){n=ajaxart.xml.FirstChild(m,o)}if(l=="last"){n=ajaxart.xml.FirstChild(m,o);var f=n;while(n!=null){f=n;n=ajaxart.xml.NextSibling(n,o)}var g=m.removeChild(b);if(f==null||f.nextSibling==null){m.appendChild(g)}else{m.insertBefore(g,f.nextSibling)}return}if(n==b){return h}if(n!=null){var g=m.removeChild(b);m.insertBefore(g,n)}if(m!=null){ajaxart.xml.xml_changed(m)}return h},ToLogicalRoot:function(d,h,b){if(!ajaxart.isxml(h)){return[]}var g=h[0];if(g.nodeType==2){g=ajaxart.xml.parentNode(g)}var f=g;while(g!=null&&g.nodeType==1){if(aa_bool([g],d,"FilterOnRoot",b)){return[g]}var a=g;g=g.parentNode;if(g!=null){if(aa_bool([g],d,"FilterOnRootParent",b)){return[a]}f=a}}return[f]},RegisterModifyOnXml:function(f,h,d){var a=aa_first(h,f,"Xml",d);var g=aa_int(h,f,"DelayAutoSaveInMilli",d);var m=aa_text(h,f,"Mode",d);if(a==null||!ajaxart.isxml(a)){return[]}if(aa_tobool(d.vars._ImmediateAutoSave)){g=0}var l={disable:false,modified:false,profile:f,data:h,context:d,autosavedelay:g,mode:m};for(var b=0;b<ajaxart.xmlsToMonitor.length;b++){if(ajaxart.xmlsToMonitor[b].xml==a){ajaxart.xmlsToMonitor[b].ajaxartOnChange=l;return["true"]}}ajaxart.xmlsToMonitor.push({xml:a,modifyInfo:l});return["true"]},RemoveAttributes:function(d,f,b){if(f.length==0||!ajaxart.isxml(f)||f[0].nodeType!=1){return[]}var a=ajaxart_run_commas(f,d,"AttributeNames",b);for(i in a){f[0].removeAttribute(ajaxart.totext(a[i]))}return f},HasAttribute:function(d,f,b){var a=aa_text(f,d,"Attribute",b);if((!ajaxart.isxml(f))||f[0].nodeType!=1){return[]}if(aa_hasAttribute(f[0],a)){return["true"]}return[]},HasParent:function(b,d,a){if(!ajaxart.isxml(d)){return[]}if(d[0].parentNode==null){return[]}return["true"]},AddChildInPosition:function(h,o,b){var m=ajaxart.getVariable(b,"InputForChanges");var d=aa_first(m,h,"Child",b);var f=aa_first(m,h,"Position",b);if(d==null||!ajaxart.isxml(d)||!ajaxart.isxml(o)){return o}var n=aa_bool(o,h,"IdenticalTags",b);var s=o[0];var t=aa_tag(d);var p=null;if(f!=null){var q=parseInt(ajaxart.totext(f));var a=0;var g=o[0].firstChild;while(g!=null){if(g.nodeType==1&&(aa_tag(g)==aa_tag(d)||!n)){if(++a==q){p=g}}g=g.nextSibling}}d=aa_importNode(d,o[0]);if(p==null){var r=ajaxart.xml.FirstChild(s,t);var l=r;while(r!=null){l=r;r=ajaxart.xml.NextSibling(r,t)}if(l==null||l.nextSibling==null){s.appendChild(d)}else{s.insertBefore(d,l.nextSibling)}}else{o[0].insertBefore(d,p)}ajaxart.run([d],h,"DoOnNewChild",b);ajaxart.xml.xml_changed(s);return[d]},AddXmlChildren:function(f,l,a){var n=aa_first(l,f,"Parent",a);var d=ajaxart.run(l,f,"Children",a);var m=aa_bool(l,f,"CloneChildren",a);var b=aa_bool(l,f,"AddAsFirst",a);if(!n){return}var g=[];for(var h=0;h<d.length;h++){var o=(m)?d[h].cloneNode(true):d[h];g.push(ajaxart.xml.append(n,o,b))}if(d.length>0){ajaxart.xml.xml_changed(n)}ajaxart.run(g,f,"DoOnAddedChildren",a)},ReplaceChildren:function(f,g,d){var a=ajaxart.getVariable(d,"InputForChanges");var b=ajaxart.run(a,f,"Children",d);var h=aa_bool(a,f,"CloneChildren",d);if(g.length==0){return[]}while(g[0].firstChild!=null){g[0].removeChild(g[0].firstChild)}ajaxart.each(b,function(l){if(!h){ajaxart.xml.append(g[0],l)}else{ajaxart.xml.append(g[0],ajaxart.xml.clone([l]))}});if(b.length>0){ajaxart.xml.xml_changed(g[0])}return g},PerformChanges:function(d,g,b){var f=ajaxart.subprofiles(d,"Change");for(var a=0;a<f.length;a++){ajaxart.run(g,f[a],"",b)}return["true"]},MultiChange:function(g,l,f){var h=ajaxart.subprofiles(g,"Change");var d=ajaxart.getVariable(f,"InputForChanges");var b=ajaxart.run(d,g,"DataForChanges",f);var a=ajaxart.run(l,g,"PerformChangesOn",f);var m=ajaxart.clone_context(f);ajaxart.each(b,function(o){ajaxart.setVariable(m,"InputForChanges",[o]);if(a.length==0){for(var n=0;n<h.length;n++){ajaxart.run(l,h[n],"",m)}}else{ajaxart.each(a,function(q){for(var p=0;p<h.length;p++){ajaxart.run([q],h[p],"",m)}})}});return l},UpTillMatchesFilter:function(d,f,b){if(!ajaxart.isxml(f)){return[]}var a=f[0];if(aa_bool([a],d,"Filter",b)){return[a]}var a=ajaxart.xml.parentNode(a);while(a!=null&&a.nodeType==1){if(aa_bool([a],d,"Filter",b)){return[a]}a=a.parentNode}return[]},RemoveInnerText:function(d,h,b){if(!ajaxart.isxml(h)){return h}var a=h[0];if(a.nodeType==1){var g=a.firstChild;while(g!=null){var f=g;g=g.nextSibling;if(f.nodeType==3||f.nodeType==4){a.removeChild(f)}}ajaxart.xml.xml_changed(h[0])}return h},InnerTextValue:function(b,f,a){if(!ajaxart.isxml(f)){return[]}var d=f[0].firstChild;while(d!=null){if(d.nodeType==3||d.nodeType==4){return[d]}d=d.nextSibling}return[]},InnerText:function(d,f,b){var a=[];ajaxart.each(f,function(h){if(!ajaxart.isxml(h)){return[]}if(h.nodeType==2){return[h]}var g=h.firstChild;if(g==null){g=h.ownerDocument.createTextNode("");h.appendChild(g)}a.push(g)});return a},IndexOfElement:function(f,l,d){var m=aa_text(l,f,"IndexOfFirstElement",d);if(ajaxart.isxml(l)&&l[0].nodeType==1&&l[0].parentNode!=null){var h=l[0];var g=m;for(var b=0;b<h.parentNode.childNodes.length;b++){var a=h.parentNode.childNodes.item(b);if(a.nodeType==1&&aa_tag(a)==aa_tag(h)){if(a==h){return[""+g]}g++}}}return[]},IsAttribute:function(b,d,a){if(ajaxart.isxml(d)&&d[0].nodeType==2){return["true"]}return[]},AreSiblings:function(f,g,b){var d=null;for(var a=0;a<g.length;a++){var h=g[a].parentNode;if(h!=d&&a!=0){return[]}d=h;if(d==null||d==undefined){return[]}}return["true"]},IsElement:function(b,d,a){if(ajaxart.isxml(d)&&d[0].nodeType==1){return["true"]}return[]},ByTag:function(f,h,a){var n=aa_text(h,f,"Tag",a);if(n==""){return[]}var l=aa_first(h,f,"XmlForDocument",a);var d=aa_createElement(l,n);if(d==null){return[]}var b=ajaxart.clone_context(a);ajaxart.setVariable(b,"InputForChanges",h);var m=ajaxart.subprofiles(f,"Change");for(var g=0;g<m.length;g++){ajaxart.run([d],m[g],"",b)}return[d]},ElementOfDynamicTag:function(f,h,b){var a=aa_text(h,f,"Tag",b);if(a.length==0){return[]}var g=aa_createElement(h[0],a);if(g==null){return[]}var l=ajaxart.clone_context(b);ajaxart.setVariable(l,"InputForChanges",h);var d=ajaxart.subprofiles(f,"Change");ajaxart.each(d,function(m){ajaxart.run([g],m,"",l)});return[g]},XmlWithChangedTag:function(d,h,b){var a=aa_text(h,d,"Tag",b);var g=aa_first(h,d,"BaseXml",b);if(a.length==0||(!ajaxart.isxml(g))){return[]}var f=aa_createElement(g,a);if(f==null){return[]}ajaxart.xml.copyElementContents(f,g);return[f]},FindElementByID:function(b,d,a){var f=aa_text(d,b,"Id",a);if(d.length==0){return[]}result=ajaxart.xml.findById(d[0],f);if(result==null){return[]}return[result]},Clone:function(d,f,b){var a=aa_first(f,d,"Xml",b);if(a==null){return[]}if(!ajaxart.isxml(a)){return[]}return[ajaxart.xml.clone([a])]},TextRowToXml:function(b,f,a){var o=aa_text(f,b,"Tag",a);var g=aa_text(f,b,"Attributes",a);var n=aa_text(f,b,"Separator",a);var h=f[0].split(n);var l=g.split(",");var m=aa_createElement(f[0],o);for(var d=0;d<l.length;d++){m.setAttribute(l[d],h[d])}return[m]},CopyAttributes:function(d,g,b){var f=ajaxart.getVariable(b,"InputForChanges");var a=ajaxart.run(f,d,"SourceElement",b);var n=aa_bool(g,d,"OverrideExistingAttributes",b);if(g.length==0||a.length==0||a[0].nodeType!=1||g[0].nodeType!=1){return g}var m=a[0].attributes;if(m!=null){for(var h=0;h<m.length;h++){var l=m.item(h).nodeName;if(n||aa_hasAttribute(a[0],l)){g[0].setAttribute(l,a[0].getAttribute(l)||"")}}}return g},OverrideAttributesAndElements:function(f,h,b){var g=ajaxart.getVariable(b,"InputForChanges");var a=aa_first(g,f,"SourceXml",b);if(h.length==0||a==null||a.nodeType!=1||h[0].nodeType!=1){return h}var o=h[0];var n=a.attributes;for(var l=0;l<n.length;l++){var m=n.item(l).nodeName;o.setAttribute(m,a.getAttribute(m)||"")}jQuery(o).empty();var d=a.firstChild;while(d!=null){if(d.nodeType==1){o.appendChild(d.cloneNode(true))}d=d.nextSibling}return h},IfThenElse:function(b,d,a){var f=aa_bool(d,b,"If",a);if(f){ajaxart.run(d,b,"Then",a)}else{ajaxart.run(d,b,"Else",a)}return d},MoveBefore:function(b,f,a){if(f.length==0){return[]}var d=f[0].Item[0];var g=f[0].BeforeItem[0];if(ajaxart.isxml(g)&&ajaxart.isxml(d)){if(g.parentNode==d.parentNode&&d.parentNode!=null){g.parentNode.insertBefore(d,g)}}return[]},MoveToEnd:function(b,f,a){if(f.length==0){return[]}var d=f[0];if(ajaxart.isxml(d)&&d.parentNode!=null){d.parentNode.appendChild(d)}return[]},CleanEmptyAttributes:function(h,l,f){var b=aa_bool(l,h,"Recursive",f);var m=ajaxart.run(l,h,"IgnoreAttributes",f);var a="";for(var d=0;d<m.length;d++){a+=","+m[d]+","}if(!ajaxart.isxml(l)){return[]}var g=function(r,o,p){for(var q=0;q<r.attributes.length;q++){var n=r.attributes.item(q).name;if((r.getAttribute(n)=="")&&(o.indexOf(","+n+",")==-1)){r.removeAttribute(n);q--}}if(p){var s=r.firstChild;while(s!=null){if(s.nodeType==1){g(s,o,true)}s=s.nextSibling}}};if(l[0].nodeType==1){g(l[0],a,b)}return["true"]},XmlInfo:function(b,d,a){if(!ajaxart.isxml(d)){return}var f=aa_getXmlInfo(d[0],a);if(f==null){return[]}return[f]},UpTillHasXmlInfoWithMethod:function(d,f,b){if(!ajaxart.isxml(f)){return}var a=f[0];if(a.nodeType!="1"){a=aa_xpath(a,"..")[0]}while(a.nodeType==1){var g=aa_getXmlInfo(a,b,true);if(g){return[g]}a=a.parentNode}},RunMethodOnXml:function(d,f,b){var a=aa_first(f,d,"Xml",b);var h=aa_text(f,d,"Method",b);var g=aa_getXmlInfo(a,b);if(!g||!g[h]){return[]}return g[h](f,b)},XmlQuery:function(g,J,d){var u=ajaxart.run(J,g,"Items",d);var l=aa_first(J,g,"Query",d);if(l==null){return u}var I=ajaxart.xml.xpath(l,"xmlfilter");if(I.length==0){return u}var w=u;var E=[];for(var D=0;D<I.length;D++){var f=I[D];E=[];var y=""+f.getAttribute("xpath");var q=""+f.getAttribute("op");var z=""+f.getAttribute("value")||"";if(q=="contains"){var H=z.toLowerCase()}var h=""+f.getAttribute("disabled");if("true"==h){E=w;continue}if(q=="date_between"){var B=aadate_date2int(""+f.getAttribute("from"))}if(q=="date_between"){var b=aadate_date2int(""+f.getAttribute("to"))+1440}if(q=="date_between"&&b==1440){b=12949120000}var o=[];if(q=="one of"){o=(""+f.getAttribute("value")).split(",")}for(var C=0;C<o.length;C++){o[C]=","+o[C]+","}for(var C=0;C<w.length;C++){var G=w[C];var p=G;if(y!=null&&y.length>0){if(y[0]=="@"){var a=y.split("@")[1];p=""+G.getAttribute(a)}else{if(y=="by xtml"){p=aa_first([G],f,"xpath_by_xtml",d);if(p==null){continue}}else{var m=ajaxart.xml.xpath(G,y);if(m.length==0){continue}p=m[0]}}}var r=ajaxart.totext(p);if(q=="="){if(z==""||r==z){E.push(G)}}if(q=="!="){if(r!=z){E.push(G)}}if(q=="<"||q=="<="||q==">"||q==">="){try{var t=parseInt(z);var v=parseInt(r);if(q=="<"&&v<t){E.push(G)}if(q=="<="&&v<=t){E.push(G)}if(q==">"&&v>t){E.push(G)}if(q==">="&&v>=t){E.push(G)}}catch(F){continue}}if(q=="contains"){if(r.toLowerCase().indexOf(H)>-1){E.push(G)}}else{if(q=="one of"&&f.getAttribute("value")=="_all"){E.push(G)}else{if(q=="one of"&&f.getAttribute("value")==""){E.push(G)}else{if(q=="one of"&&f.getAttribute("value")=="_blank"){if(r==""){E.push(G)}}else{if(q=="one of"){r=","+r+",";for(var A=0;A<o.length;A++){if(r.indexOf(o[A])!=-1){E.push(G)}}}else{if(q=="date_between"){var s=aadate_date2int(r);if(B<=s&&s<=b){E.push(G)}}else{if(q=="xtml"){var n=ajaxart.xml.xpath(f,"xtml");if(n.length==0){continue}if(aa_bool([p],n[0],"",d)){E.push(G)}}}}}}}}}w=E}return E},Switch:function(b,d,a){return aa_switch(b,d,a)},PerformChangeOnElements:function(d,g,b){var f=ajaxart.run(g,d,"Elements",b);for(var a in f){ajaxart.run([f[a]],d,"Change",b)}},PerformChangeWithManyInputs:function(g,h,f){var b=ajaxart.run(h,g,"Inputs",f);var a=ajaxart.clone_context(f);for(var d in b){ajaxart.setVariable(a,"InputForChanges",[b[d]]);ajaxart.run(h,g,"Change",a)}return h},Filter:function(l,m,g){var b=ajaxart.run(m,l,"Items",g);var h=aa_text(m,l,"Filter",g);var d=[];for(var f=0;f<b.length;f++){var a="."+h;if(ajaxart.xml.xpath(b[f],a).length>0){d.push(b[f])}}return d},Siblings:function(f,h,b){var g=aa_first(h,f,"Element",b);var l=aa_bool(h,f,"OnlyWithSameTag",b);if(g.nodeType!=1){return[]}var a=[];for(i=0;i<g.parentNode.childNodes.length;i++){var d=g.parentNode.childNodes.item(i);if(d!=g&&d.nodeType==1){if(aa_tag(d)==aa_tag(g)||!l){a.push(d)}}}return a},XmlParsingError:function(f,g,d){var a=aa_text(g,f,"XmlAsText",d);var b=[];ajaxart.parsexml(a,"",b,true);return b},XmlItemsSubset:function(h,m,d){var g=aa_first(m,h,"Parent",d);var o=aa_first(m,h,"Item",d);var n={isObject:true,ItemTypeName:g.ItemTypeName};var f=(d.vars._Transactional!=null&&ajaxart.totext_array(d.vars._Transactional)=="true");if(f){var a=ajaxart.xml.clone([o]);var l=ajaxart.xml.clone([o]);a.setAttribute("__Remark","Original copy");n.Items=[l];n.OriginalCopy=[a];n.ItemToChange=[o];var b=function(p){return function(q,r){ajaxart.xml.copyElementContents(p.ItemToChange[0],p.Items[0])}};ajaxart_addMethod_js(n,"Save",b(n),d)}else{n.Items=[o]}return[n]},XmlFromList:function(f,g,d){var h=aa_text(g,f,"AttributeNames",d).split(",");var a=aa_createElement(null,aa_text(g,f,"Tag",d));for(var b=0;b<g.length;b++){if(b>=h.length){return[a]}a.setAttribute(h[b],ajaxart.totext_item(g[b]))}return[a]},WriteCData:function(d,h,b){var a=aa_first(h,d,"Element",b);var f=aa_text(h,d,"CDataText",b);if(!a||g==""){return[]}while(a.firstChild){a.removeChild(a.firstChild)}var g=a.ownerDocument.createCDATASection(f);a.appendChild(g);return[]},CDataValue:function(d,f,b){var a=aa_first(f,d,"Element",b);if(!a){return[]}for(var g=a.firstChild;g!=null;g=g.nextSibling){if(g.nodeType==4&&g.nodeValue){return[g.nodeValue]}}return[]}});ajaxart.xml.findById=function(b,f){if(!ajaxart.isxml(b)){return null}if(b.nodeType!=1){return null}if(b.getAttribute("id")==f){return b}var d=b.firstChild;while(d!=null){var a=ajaxart.xml.findById(d,f);if(a!=null){return a}d=d.nextSibling}return null};ajaxart.xml.xpath_of_node=function(h,b,m,p){if(!ajaxart.isxml(h)){return""}var t="";var d=h;if(p==h){return""}while(d!=null){var f="/";if(t==""){f=""}var a="";if(d.nodeType==9){d=null;continue}if(d.nodeType==1){if(d.parentNode==null||d.parentNode.nodeType==9){d=null;continue}a=""+aa_tag(d);if(m){if(b.length>0&&aa_hasAttribute(d,b)){a+="[@"+b+"='"+d.getAttribute(b)+"']"}else{if(typeof(d.parentNode)!="undefined"){var o=0;var l=0;var g=0;for(g=0;g<d.parentNode.childNodes.length;g++){var q=d.parentNode.childNodes.item(g);if(q.nodeType==1&&aa_tag(q)==aa_tag(d)){l++;if(q==d){o=l}}}if(o>0&&l>1){var s=!aa_hasAttribute(d,"id")||d.getAttribute("id")=="";var r=!aa_hasAttribute(d,"name")||d.getAttribute("name")=="";if(!s||!r){if(!s){a+="[@id='"+d.getAttribute("id")+"']"}else{a+="[@name='"+d.getAttribute("name")+"']"}}else{a+="["+o+"]"}}}}}}if(d.nodeType==2){a="@"+d.name}if(a!=""){t=a+f+t}if(b.length>0&&d.nodeType==1&&aa_hasAttribute(d,b)){return t}var n=d;d=d.parentNode;if(d==null){d=ajaxart.xml.parentNode(n)}if(d==p){d=null}}return t};ajaxart.xml.set_tagname=function(b,a){if(b==null){return null}var d=aa_createElement(b,a);ajaxart.xml.copyElementContents(d,b);if(b.parent!=null){b.parent.replaceChild(d,b)}return d};ajaxart.xml.copyElementContents=function(h,g){if(g.nodeType!=1||h.nodeType!=1){return}while(h.childNodes.length>0){h.removeChild(h.childNodes.item(0))}while(h.attributes.length>0){h.removeAttribute(h.attributes.item(0).name)}var l=g.attributes;if(l!=null){for(var d=0;d<l.length;d++){h.setAttribute(l.item(d).name,l.item(d).value)}}g=aa_importNode(g,h);var b=g.firstChild;var a=ajaxart.isBackEnd?h.getOwnerDocument():h.ownerDocument;while(b!=null){var f=b;if(typeof(b.cloneNode)!="undefined"){h.appendChild(b.cloneNode(true))}else{if(b.nodeType==3||b.nodeType==4){h.appendChild(a.createTextNode(b.nodeValue))}}b=b.nextSibling}};ajaxart.xml.setAsOnlyChildElem=function(b,a){if(b==null||b.childNodes==null){return}var d=b.firstChild;while(d!=null){var f=d.nextSibling;if(d.nodeType==1){b.removeChild(d)}d=f}ajaxart.xml.append(b,a)};ajaxart.xml.innerTextStr=function(a){var b=a.firstChild;while(b!=null){if(b.nodeType==3||b.nodeType==4){return b.nodeValue}b=b.nextSibling}return""};ajaxart.xml.FirstChild=function(d,a){var b=d.firstChild;if(b==null){return null}if(b.nodeType!=1||aa_tag(b)!=a){b=ajaxart.xml.NextSibling(b,a)}return b};ajaxart.xml.NextSibling=function(d,a){if(d==null){return null}var b=d.nextSibling;if(b==null){return null}if(b.nodeType!=1){return ajaxart.xml.NextSibling(b,a)}if(a!=null&&aa_tag(b)!=a){return ajaxart.xml.NextSibling(b,a)}return b};ajaxart.xml.PrevSibling=function(d,a){if(d==null){return null}var b=d.previousSibling;if(b==null){return null}if(b.nodeType!=1){return ajaxart.xml.PrevSibling(b,a)}if(a!=null&&aa_tag(b)!=a){return ajaxart.xml.PrevSibling(b,a)}return b};ajaxart.xml.root=function(f){if(!f){return null}var b=ajaxart.xml.parentNode(f);if(b==null){return f}var d,a=b;while(a!=null&&a.nodeType==1){d=a;a=a.parentNode}return d};ajaxart.xml.autosave=function(b,d,f){var a=function(g){if(d.saving==true&&!g){return false}d.saving=true;var h=aa_bool([b],d.profile,"SaveAction",d.context);if(h){d.modified=false}d.saving=false;return true};if(d.autosavedelay==0){a()}else{aa_delayedRun(a,b,2500,6000)}};function ajaxart_delete_child_elem(b,a){var d=b.firstChild;while(d!=null){if(aa_tag(d)==a){b.removeChild(d);return}d=d.nextSibling}}function aa_xmlbyid(b,d){for(var a=0;a<b.length;a++){if(d==b[a].getAttribute("id")){return b[a]}}return null}function aa_cdata_value(a){if(!a){return null}for(var b=a.firstChild;b!=null;b=b.nextSibling){if(b.nodeType==4&&b.nodeValue){return b.nodeValue}}return null}ajaxart.gcs.xmlui={CallUpdateOfCodeMirror:function(f,g,b){var d=ajaxart.getControlElement(b,true);if(d!=null&&d.contentWindow!=null){var a=d.contentWindow.editor.getCode();if(d.getAttribute("type")=="css"){a=a.replace(/\n/g,"/*nl*/")}ajaxart_update(d,a)}},InsertTextToCodeMirror:function(b,d,a){var f=ajaxart.getControlElement(a,true);if(!f||!f.jbCodeMirrorEditor){ajaxart.log("InsertTextToCodeMirror: Cannot find codemirror","error");return}f.jbCodeMirrorEditor.replaceSelection(aa_text(d,b,"Text",a))},CodeMirrorTextareaOld:function(h,m,d){var a=document.createElement("div");a.className=aa_attach_global_css(aa_text(m,h,"Css",d),null,"codemirror_wrapper");var f=document.createElement("textarea");a.appendChild(f);var u=ajaxart.run(m,h,"Text",d);f.value=aa_totext(u).replace(new RegExp("/[*]nl[*]/","g"),"\n");var o=aa_base_lib()+"/codemirror/";var q=aa_text(m,h,"Type",d);var g,n;var t=aa_text(m,h,"Height",d);var b=aa_text(m,h,"Width",d);var s=aa_bool(m,h,"Resizer",d);if(s){var p=aa_text(m,h,"IdentifierToRecallLastSize",d);jBart.vars.codeMirrorSizes=jBart.vars.codeMirrorSizes||{};var r=jBart.vars.codeMirrorSizes[p];if(r){b=r.width+"px";t=r.height+"px"}}f.style.width=b;f.style.height=t;if(q=="xml"){g="parsexml.js";n="css/xmlcolors.css"}else{if(q=="js"){g=["tokenizejavascript.js","parsejavascript.js"];n="css/jscolors.css"}else{if(q=="css"){g="parsecss.js";n="css/csscolors.css"}else{if(q=="text"){g="parsedummy.js";n="css/csscolors.css"}else{g="parsedummy.js";n="css/csscolors.css"}}}}n=o+n;var l={height:t,width:b,parserfile:g,stylesheet:n,path:o+"js/",continuousScanning:500,lineNumbers:aa_bool(m,h,"LineNumbers",d),textWrapping:aa_bool(m,h,"TextWrapping",d),readOnly:aa_bool(m,h,"ReadOnly",d),onChange:function(){ajaxart.writevalue(u,[a.editor.getCode()]);ajaxart.run(u,h,"OnUpdate",aa_ctx(d,{ControlElement:[a]}))},autoMatchParens:true,initCallback:function(v){try{a.editor=v;if(aa_bool(m,h,"AutoFocus",d)){f.focus()}jQuery(a.editor.win.document.body).keydown(function(y){ajaxart.writevalue(u,[a.editor.getCode()]);if(y.keyCode==13&&y.ctrlKey){ajaxart.run([a.editor.getCode()],h,"OnCtrlEnter",d)}if(y.keyCode==13&&y.shiftKey){ajaxart.run([a.editor.getCode()],h,"OnShiftEnter",d)}});jQuery(a.editor.win.document.body).keyup(function(y){ajaxart.writevalue(u,[a.editor.getCode()])});a.jbInsertText=function(y){var z=v.cursorPosition();v.insertIntoLine(z.line,z.character,y)};if(aa_bool(m,h,"Resizer",d)){setTimeout(function(){jBart.addResizer(v.frame.parentNode,{onResizeEnd:function(z,y){jBart.vars.codeMirrorSizes[p]=jBart.vars.codeMirrorSizes[p]||{};jBart.vars.codeMirrorSizes[p].width=z;jBart.vars.codeMirrorSizes[p].height=y}})},20)}a.jbSetDialogReady()}catch(w){ajaxart.logException(w,"init callback of codemirror")}}};window.OnCodeMirrorLoaded=function(v){CodeMirror.fromTextArea(f,l)};aa_addOnAttach(a,function(){if(!jBart.vars.codemirror_js_script_elem_exists){jBart.vars.codemirror_js_script_elem_exists=true;aa_load_js_css(o+"js/codemirror.js","js")}else{if(window.CodeMirror){CodeMirror.fromTextArea(f,l)}}});aa_addOnDetach(a,function(){if(!window.CodeMirror||!a.editor){return}ajaxart.writevalue(m,[a.editor.getCode()]);ajaxart.run(m,h,"OnUpdate",aa_ctx(d,{ControlElement:[a]}))});jQuery(a).addClass("aa_dialog_not_ready");a.jbSetDialogReady=function(){jQuery(a).removeClass("aa_dialog_not_ready");aa_fixTopDialogPosition()};return[a]},CodeMirrorTextarea:function(f,h,d){var q=ajaxart.run(h,f,"Text",d);var n=aa_text(h,f,"Type",d);var b=aa_text(h,f,"Width",d);var r=aa_text(h,f,"Height",d);var p=aa_bool(h,f,"Resizer",d);var s=aa_bool(h,f,"AutoIndent",d);if(p){var m=aa_text(h,f,"IdentifierToRecallLastSize",d);jBart.vars.codeMirrorSizes=jBart.vars.codeMirrorSizes||{};var o=jBart.vars.codeMirrorSizes[m];if(o){b=o.width+"px";r=o.height+"px"}}var l="";switch(n){case"xml":l="xml";break;case"js":l="javascript";break;case"css":l="css";break;case"html":l="htmlmixed";break}var g={value:aa_totext(q),mode:l,lineNumbers:aa_bool(h,f,"LineNumbers",d),lineWrapping:aa_bool(h,f,"TextWrapping",d),readOnly:aa_bool(h,f,"ReadOnly",d),autofocus:aa_bool(h,f,"AutoFocus",d),height:r,width:b,extraKeys:{"Ctrl-Enter":function(t){ajaxart.run([t.getValue()],f,"OnCtrlEnter",d)},"Shift-Enter":function(t){ajaxart.run([t.getValue()],f,"OnShiftEnter",d)},"Ctrl-I":function(u){var v=u.getCursor(true);var t;if(u.somethingSelected()){t={from:u.getCursor(true),to:u.getCursor(false)}}else{t={from:{line:0,ch:0},to:{line:u.lineCount()-1,ch:u.getLine(u.lineCount()-1).length-1}}}u.autoFormatRange(t.from,t.to);u.setCursor(v);u.setSelection(v)}},onchange:function(t){ajaxart.writevalue(q,t.getValue());ajaxart.run(q,f,"OnUpdate",aa_ctx(d,{ControlElement:[a]}))},oninit:function(t){if(s){t.autoFormatRange({line:0,ch:0},{line:t.lineCount()-1,ch:t.getLine(t.lineCount()-1).length-1});t.setSelection(t.getCursor(true))}if(aa_bool(h,f,"Resizer",d)){setTimeout(function(){jBart.addResizer(a,{onResize:function(v,u){jBart.vars.codeMirrorSizes[m]=jBart.vars.codeMirrorSizes[m]||{};jBart.vars.codeMirrorSizes[m].width=v;jBart.vars.codeMirrorSizes[m].height=u;t.setSize(v,u)}})},20)}}};if(aa_bool(h,f,"ShowJavascriptErrorsOnCtrlSpace",d)&&l=="javascript"){aa_showJsErrorsOnCodeMirror(g)}if(aa_bool(h,f,"EnableFullScreen",d)){aa_enableFullScreenForCodeMirror(g)}var a=aa_codemirror(g);jQuery(a).addClass(aa_attach_global_css(aa_text(h,f,"Css",d),null,"codemirror_wrapper"));return[a]}};function aa_codemirror(a){if(!window.jBartCodeMirrorLoadingObj){window.jBartCodeMirrorLoadingObj={loaded:false,load:function(){aa_load_js_css(aa_base_lib()+"/codemirror-3.02/codemirror.css","css");aa_load_js_css(aa_base_lib()+"/codemirror-3.02/simple-hint.css","css");aa_load_js_css(aa_base_lib()+"/codemirror-3.02/solarized.css","css");aa_load_js_css(aa_base_lib()+"/codemirror-3.02/dialog.css","css");jQuery.getScript(aa_base_lib()+"/codemirror-3.02/codemirror4jbart.js",function(){window.jBartCodeMirrorLoadingObj.onload()})},onload:function(){jBart.trigger(this,"OnLoad");this.loaded=true},runWhenLoaded:function(d){if(this.loaded){d()}else{jBart.bind(this,"OnLoad",d)}}};window.jBartCodeMirrorLoadingObj.load()}var b=document.createElement("div");jQuery(b).css({height:a.height,width:a.width});a.extraKeys=a.extraKeys||{};a.extraKeys["Ctrl-Space"]=function(d){if(a.mode=="javascript"){CodeMirror.simpleHint(d,CodeMirror.javascriptHint)}};a.extraKeys["Ctrl-H"]="replace";aa_addOnAttach(b,function(){window.jBartCodeMirrorLoadingObj.runWhenLoaded(function(){var d=CodeMirror(b,a);d.setSize(a.width,a.height);b.style.height="";b.style.width="";if(a.onchange){d.on("change",a.onchange)}d.setOption("theme","solarized light");b.jbCodeMirrorEditor=d;aa_fixTopDialogPosition();d.refresh();if(a.oninit){a.oninit(d)}})});return b}function aa_enableFullScreenForCodeMirror(a,b){b=b||{};jQuery.extend(b,{escText:"<span>Press ESC or F11 to exit full screen</span>",escCss:"#this { cursor:default; text-align: center; width: 100%; position:absolute; top:0px; left:0px; font-family: arial; font-size: 11px; color: #a00; padding: 2px 5px 3px; } #this:hover { text-decoration: underline; }",escHeight:20,fullScreenBtnHtml:'<div><img title="Full Screen (F11)" src="http://png-1.findicons.com/files/icons/1150/tango/22/view_fullscreen.png"/></div>',fullScreenBtnCss:"#this { position:absolute; bottom:5px; right:5px; -webkit-transition: opacity 1s; z-index: 20; } #this.hidden { opacity:0; } ",editorCss:"#this { position:relative; }",fullScreenEditorCss:"#this { display: block; position: fixed !important; top: 0; left: 0; z-index: 9999; }",lineNumbers:true});var d=a.oninit;var f=document.documentElement.style.overflow;a.oninit=function(l){if(d){d(l)}var n=jQuery(l.getWrapperElement()).addClass(aa_attach_global_css(b.editorCss));var p=l.getOption("lineNumbers");var g=jQuery(b.fullScreenBtnHtml).addClass(aa_attach_global_css(b.fullScreenBtnCss)).appendTo(n).addClass("hidden").click(function(){m()});n.mouseover(function(){g.removeClass("hidden")}).mouseout(function(){g.addClass("hidden")});var h=aa_attach_global_css(b.fullScreenEditorCss+"#this { padding-top: "+b.escHeight+"px; }");function o(){var q=ajaxart_screen_size();l.setSize(q.width,q.height-b.escHeight)}function m(q){if(n.hasClass(h)){n.removeClass(h);window.removeEventListener("resize",o);document.documentElement.style.overflow=f;l.setOption("lineNumbers",p);l.setSize(a.width,a.height);l.refresh();n[0].jEsc.remove()}else{if(!q){n.addClass(h);window.addEventListener("resize",o);o();document.documentElement.style.overflow="hidden";if(b.lineNumbers){l.setOption("lineNumbers",true)}l.refresh();var r=jQuery(b.escText).addClass(aa_attach_global_css(b.escCss)).click(function(){m(true)});n.append(r);n[0].jEsc=r;l.focus()}}}l.addKeyMap({F11:function(q){m()},Esc:function(q){m(true)}})}}function aa_showJsErrorsOnCodeMirror(b,f){var a=(f&&f.errorCss)?f.errorCss:"#this { font-family: arial; font-size: 10px; background: #ffa; color: #a00; padding: 2px 5px 3px; }#this .icon { color: white; background-color: red; font-weight: bold; border-radius: 50%; padding: 0 3px; margin-right: 7px;}";var g=b.onchange;b.onchange=function(l){if(g){g(l)}l.jbWidgets=l.jbWidgets||[];for(var h=0;h<l.jbWidgets.length;++h){l.removeLineWidget(l.jbWidgets[h])}};b.extraKeys=b.extraKeys||{};var d=b.extraKeys["Ctrl-Enter"];b.extraKeys["Ctrl-Enter"]=function(l){l.jbWidgets=l.jbWidgets||[];for(var h=0;h<l.jbWidgets.length;++h){l.removeLineWidget(l.jbWidgets[h])}jBart.onJsError=function(s,r){if(r!=l.getValue()){return}var m=s.stack;var q=m.split("\n")[0];var n=m.match(/<anonymous>:([0-9]+)/);if(n&&n.length>1){n=parseInt(n[1])}n=n||1;var p=$('<span class="text"></span>').text(q);var o=$('<div><span class="icon">!</span></div>').append(p).addClass(aa_attach_global_css(a));l.jbWidgets.push(l.addLineWidget(n-1,o[0],{coverGutter:false,noHScroll:true,above:true}))};if(d){d(l)}jBart.onJsError=null}}aa_gcs("xtml",{Profile:function(b,d,a){return[b.parentNode]},RunXtmlByComponentId:function(d,f,b){var g=aa_text(f,d,"ComponentID",b);if(g==""){return[]}var a=ajaxart.run(f,d,"Input",b);return aa_run_component(g,a,b)},RunDynamicText:function(f,g,a){var h=aa_text(g,f,"Text",a);var d=aa_first(g,f,"Context",a);if(d==null){d=a}var b=ajaxart.run(g,f,"Input",a);if(b==null){b=g}if(d==null){return[]}return ajaxart.dynamicText(b,h,d)},RunXtmlAsBoolean:function(f,l,b){var g=ajaxart.run(l,f,"Xtml",b);var h=aa_bool(l,f,"EmptyAsTrue",b);if(g.length==0){return[]}var a="";if(f.getAttribute("Method")!=null){a=aa_text(l,f,"Method",b)}var m="";if(f.getAttribute("Field")!=null){m=aa_text(l,f,"Field",b)}var n=l;if(f.getAttribute("Input")!=null||ajaxart.childElem(f,"Input")!=null){n=ajaxart.run(l,f,"Input",b)}if(g[0].script!=null){if(h){if(g[0].script.getAttribute(m)==null&&ajaxart.xml.xpath(g[0].script,m).length==0){return["true"]}}if(typeof(g[0].input)!="undefined"){if(!aa_bool(l,f,"ForceInputParam",b)){n=g[0].input}}var d=ajaxart.newContext();if(g[0].context!=null){d.params=g[0].context.params;d.componentContext=g[0].context.componentContext}d.vars=b.vars;if(g[0].objectForMethod){d._This=g[0].objectForMethod[0]}if(!ajaxart.isxml(g[0].script)){ajaxart.log("RunXtml trying to run script not in xml");return[]}var o=aa_bool(n,g[0].script,m,d,a);if(o){return["true"]}else{return[]}}if(!ajaxart.isxml(g[0])){return h?["true"]:[]}if(h){if(g[0].getAttribute(m)==null&&ajaxart.xml.xpath(g[0],m).length==0){return["true"]}}var d={};d.vars=b.vars;d.componentContext=b.componentContext;d.params=[];var o=aa_bool(n,g[0],m,d,a);if(o){return["true"]}else{return[]}},RunXtmlWithFullContext:function(g,h,f){var a=aa_first(h,g,"XtmlAndContext",f);if(a==null){return[]}var l=aa_bool(h,g,"InPreviewMode",f);if(l){ajaxart.inPreviewMode=true}var b=a.input;if(b==null||typeof(b)=="undefined"){b=[]}var d=ajaxart.run(b,a.script,"",a.context);if(l){ajaxart.inPreviewMode=false}return d},UseParamAsBoolean:function(d,f,b){var h=aa_text(f,d,"Param",b);var a=ajaxart.run(f,d,"Input",b);var g=b.params[h];if(ajaxart.isArray(g)){return g}if(g==null||g.script==null){return[]}if(g.compiled=="same"){return a}var l={};l.vars=b.vars;l.params=b.componentContext.params;l.componentContext=b.componentContext.componentContext;if(g.compiled==null){return aa_bool(a,g.script,"",l)}else{return aa_text2bool(aa_totext(g.compiled(a,l)))}},UseParamExcludeVariable:function(b,d,a){var g=aa_text(d,b,"Param",a);var l=aa_text(d,b,"ExcludeVariable",a);var f=a.params[g];if(f==null||f.script==null){return[]}var h=ajaxart.newContext();for(i in a.vars){if(i!=l){h.vars[i]=a.vars[i]}}h.params=a.componentContext.params;h.componentContext=a.componentContext.componentContext;return ajaxart.run(d,f.script,"",h)},ParamEmpty:function(b,d,a){var f=aa_text(d,b,"Param",a);var g=ajaxart.getVariable(a,f);if(g==null){return["true"]}if(typeof(g.script)!="undefined"||g.length>0){return[]}return["true"]},ParamsWithChanges:function(f,g,d){var l=aa_first(g,f,"Params",d);var h=ajaxart.gcs.xtml.Params(f,g,d)[0];var a={isObject:true};for(var b in l){a[b]=l[b]}for(var b in h){a[b]=h[b]}return[a]},CopyAllParams:function(g,h,f){var b={isObject:true};for(var d in f.params){var a=d;var l=f.params[d];if(l.isParamScript==true){b[a]=l;b[a].context=f.componentContext}else{b[a]=l}}return[b]},ScriptParamArrayContents:function(d,f,b){var h=aa_text(f,d,"Param",b);var g=b.params[h];if(typeof(g)=="undefined"||!ajaxart.isArray(g)){return[]}out=[];for(var a=0;a<g.length;a++){out.push({script:g[a],context:b.componentContext})}return out},Xtml:function(h,l,g){var a=ajaxart.run(l,h,"Xtml",g);var d=ajaxart.run(l,h,"Input",g);var b=aa_first(l,h,"Context",g);if(a.length==0){return[]}var f={};if(typeof(a[0].script)!="undefined"){for(i in a[0]){f[i]=a[0][i]}}else{f={isObject:true,script:a[0],context:g.componentContext}}if(b!=null){f.context=b}if(f.context==null){f.context=ajaxart.newContext()}if(g.vars._GlobalVars&&!aa_tobool(g.vars._DisableResourcesAsVars)){f.context.vars._GlobalVars=g.vars._GlobalVars}if(d.length>0){f.input=d}return[f]},ToScript:function(b,d,a){d=ajaxart.run(d,b,"Xtml",a);if(d.length==0){return[]}if(typeof(d[0].script)=="undefined"){return[]}return[d[0].script]},ToInput:function(b,d,a){if(d.length==0){return[]}if(typeof(d[0].input)=="undefined"){return[]}return d[0].input},VariableValue:function(d,f,b){var g=aa_text(f,d,"VarName",b);if(ajaxart.serverData[g]!=null){return ajaxart.serverData[g]}var a=b.vars[g];if(a==null||typeof(a)=="undefined"){return[]}return a},UsagesOfPlugin:function(d,g,b){var f=aa_text(g,d,"Plugin",b);var a=[];for(_plugin in ajaxart.usages){if(f==""||f==_plugin){for(usage in ajaxart.usages[_plugin]){a.push(ajaxart.usages[_plugin][usage])}}}return a},ComponentsOfPlugin:function(b,g,a){var h=aa_text(g,b,"Plugin",a);var l=aa_text(g,b,"Type",a);var f=aa_text(g,b,"Result",a);var n=aa_bool(g,b,"AlsoHidden",a);if(h.length==0){return[]}var d=[];var m=ajaxart.components[h];for(i in m){if(l.length>0&&l!=m[i].getAttribute("type")){continue}if(!n&&"true"==m[i].getAttribute("hidden")){continue}if(f=="full id"){d.push(h+"."+i)}else{d.push(m[i])}}return d},LoadedPlugins:function(d,g,b){var h=aa_bool(g,d,"IncludeUsages",b);var f={};var a=[];for(i in ajaxart.components){if(!h&&i.indexOf("usage",i.length-5)!=-1){continue}a.push(i);f[i]=true}if(h){for(i in ajaxart.usages){if(f[i]==null){a.push(i);f[i]=true}}}return a},LoadComponents:function(f,g,b){var d=aa_text(g,f,"Namespace",b);var h=ajaxart.run(g,f,"Components",b);if(ajaxart.components[d]==null||aa_bool(g,f,"ClearNSBefore",b)){ajaxart.components[d]=[]}for(var a=0;a<h.length;a++){if(!ajaxart.isxml(h[a])){continue}ajaxart.components[d][h[a].getAttribute("id")]=h[a];aa_load_inplace_gc(h[a],d)}ajaxart.componentsXtmlCache=[];window.aaxtmldt_options_cache=window.ajaxart_light_compoftype=window.ajaxart_comp_of_type_cache=null;return["true"]},PluginDescriptor:function(d,g,b){var a=aa_text(g,d,"Plugin",b);var f=ajaxart.plugins[a];if(typeof(f)=="undefined"){return[]}return[f]},AllTypes:function(g,h,d){var a=[];for(var b in ajaxart.types){var f=ajaxart.types[b].parentNode.getAttribute("ns");if(f==null){f=ajaxart.types[b].parentNode.getAttribute("id")}var m=ajaxart.types[b].getAttribute("id");var l=f+"."+m;a.push(l)}return a},TypeDefinition:function(f,g,b){var d=aa_text(g,f,"Type",b);d=d.replace(".","_");var a=ajaxart.types[d];if(a==null){return[]}return[a]},ServerDataVariables:function(d,f,b){var a=[];for(varName in ajaxart.serverData){a.push(varName)}return a},GlobalVariables:function(f,g,d){var a=[];if(d.vars._GlobalVars){for(var b in d.vars._GlobalVars[0]){a.push(b)}}return a},DebugVariableValue:function(b,d,a){var f=aa_text(d,b,"Variable",a);if(f==""){return[]}if(ajaxart.debugData&&ajaxart.debugData[f]!=null){return ajaxart.debugData[f]}return[]},DebugDataVariables:function(d,f,b){var a=[];for(varName in ajaxart.debugData){a.push(varName)}return a},VariablesOfContext:function(g,h,f){var d=aa_first(h,g,"ScriptAndContext",f);var b=[];var a;if(d!=null&&"context" in d){a=d.context}else{return[]}for(varName in a.params){b.push(varName)}for(varName in a.vars){if(varName!="_GlobalVars"){b.push(varName)}else{var l=a.vars._GlobalVars[0];for(varName2 in l){b.push(varName2)}}}for(varName in ajaxart.serverData){b.push(varName)}return b},VariableValueFromContext:function(d,f,b){var a=aa_first(f,d,"ScriptAndContext",b);if(!a){return[]}var h=aa_text(f,d,"Variable",b);if(a.context){var g=ajaxart.getVariable(a.context,h);if(g==null){g=[a.context.params[h]]}return g}return[]},Logs:function(g,h,f){var b=[];var l=ajaxart.logs.error;if(l){for(var d in l){b.push({isObject:true,Level:"error",Log:l[d]})}}for(d in ajaxart.logs){if(d!="error"){for(var a in ajaxart.logs[d]){b.push({isObject:true,Level:d,Log:ajaxart.logs[d][a]})}}}return b},LogContent:function(d,f,b){var g=aa_text(f,d,"Level",b);var a=ajaxart.logs[g];return(a==null)?[]:a},ActiveLogLevels:function(d,f,b){var a=[];for(i in ajaxart.logs){if(i=="error"){a=[i].concat(a)}else{a.push(i)}}return a},LoadXtmlFile:function(b,f,a){var d=aa_first(f,b,"Contents",a);if(ajaxart.isxml(d)){ajaxart.load_xtml_content("",d)}return["true"]},RunUsage:function(d,f,b){if(f.length==0){return f}var a=ajaxart.run([""],f[0],"",b);if(a.length==0){ajaxart.run(f,d,"OnSuccess",b)}else{ajaxart.run(f,d,"OnFailure",b)}ajaxart.run(f,d,"OnFinish",b)},CleanLog:function(b,f,a){var d=aa_bool(f,b,"CleanAllLogs",a);var g=aa_text(f,b,"Level",a);if(d){logs={}}else{if(g!=""){ajaxart.logs[g]=[]}}return f},AllComponentIds:function(d,f,b){var a=[];for(plugin in ajaxart.components){for(j in ajaxart.components[plugin]){a.push(plugin+"."+ajaxart.components[plugin][j].getAttribute("id"))}}return a},ComponentIdsOfType:function(f,g,b){var d=aa_text(g,f,"Type",b);var a=[];for(plugin in ajaxart.components){for(j in ajaxart.components[plugin]){if(ajaxart.components[plugin][j].getAttribute("type")==d){a.push(plugin+"."+ajaxart.components[plugin][j].getAttribute("id"))}}}return a},PartsOfContext:function(h,l,g){var a=aa_first(l,h,"Context",g);if(a==null){return[]}var f=aa_text(l,h,"Part",g);var d=[];if(f=="Global Variable Names"){if(!a.vars._GlobalVars){return[]}for(var b in a.vars._GlobalVars[0]){if(b!="isObject"&&b!="XtmlSource"){d.push(b)}}}if(f=="Variable Names"){for(i in a.vars){if(i!="_GlobalVars"){d.push(i)}else{for(b in a.vars._GlobalVars[0]){if(b!="isObject"&&b!="XtmlSource"){d.push(b)}}}}}else{if(f=="Param Names"){for(i in a.params){d.push(i)}}else{if(f=="Component Context"){return[a.componentContext]}}}return d},CurrentContext:function(b,d,a){return[a]},ManualContext:function(f,g,d){var h=ajaxart.run(g,f,"Variables",d);var a=ajaxart.newContext();for(var b=0;b<h.length;b++){ajaxart.setVariable(a,h[b]["Name"],h[b]["Value"])}return[a]},BuildVersion:function(b,d,a){return[ajaxart.build_version]},XtmlOfParamArray:function(b,d,a){var g=aa_text(d,b,"Param",a);var f=a.params[g];if(ajaxart.isArray(f)){return[]}return aa_xpath(f.script,g)}});if(!ajaxart.xtml){ajaxart.xtml={}}ajaxart.run_xtml_object=function(b,d,a){var f=ajaxart.newContext();if(d.context!=null){f.params=d.context.params;f.componentContext=d.context.componentContext}f.vars=a.vars;if(d.objectForMethod){f._This=d.objectForMethod[0]}return ajaxart.run(b,d.script,"",f)};ajaxart.component_exists=function(f){var a=f.indexOf(".");var d=f.substring(0,a);var b=f.substr(a+1);if(ajaxart.components[d]==null){return false}if(ajaxart.components[d][b]==null){return false}return true};function aa_component_definition(a){if(!a){return null}var b=a.indexOf(".");var f=a.substring(0,b);var d=a.substr(b+1);return ajaxart.components[f]&&ajaxart.components[f][d]}function aa_component_param_def(d,b){var a=aa_component_definition(d);var b=ajaxart.xml.xpath(a,"Param[@name='"+b+"']");if(b.length>0){return b[0]}else{return null}}function aa_component_param_type(a,d){var b=aa_totext(ajaxart.xml.xpath(a,"Param[@name='"+d+"']/@type"));if(b==""){return"data.Data"}return b}aa_gcs("yesno",{EqualsTo:function(b,f,a){var h=ajaxart.run(f,b,"To",a);if(h.length==0&&f.length==0){return["true"]}if(h.length==0||f.length==0){return[]}var g=h[0];var d=f[0];if(ajaxart.yesno.itemsEqual(g,d)){return["true"]}return[]},BooleansEqual:function(f,g,d){var b=aa_bool(g,f,"Item1",d);var a=aa_bool(g,f,"Item2",d);if(b==a){return["true"]}return[]},IsOneOf:function(g,h,f){var l=aa_first(h,g,"Value",f);var m=ajaxart.subprofiles(g,"Option");if(l==null){return[]}for(var d in m){var b=ajaxart.run(h,m[d],"",f);for(var a in b){if(ajaxart.yesno.itemsEqual(l,b[a])){return["true"]}}}return[]},EqualsToList:function(d,g,b){var f=ajaxart.run(g,d,"To",b);if(f.length!=g.length){return[]}for(var a=0;a<f.length;a++){if(!ajaxart.yesno.itemsEqual(f[a],g[a])){return[]}}return["true"]},GreaterThan:function(d,f,a){var b=aa_text(f,d,"Type",a);if(b=="number"){return aa_int(f,d,"Item",a)>aa_int(f,d,"Than",a)?["true"]:[]}if(b=="text"){return aa_text(f,d,"Item",a)>aa_text(f,d,"Than",a)?["true"]:[]}if(b=="date"){return aadate_date2int(aa_text(f,d,"Item",a))>aadate_date2int(aa_text(f,d,"Than",a))?["true"]:[]}return[]},DynamicAnd:function(f,g,d){var a=ajaxart.run(g,f,"DynamicItems",d);for(var b=0;b<a.length;b++){if(!aa_bool([a[b]],f,"ConditionOnItem",d)){return[]}}return["true"]},ContainsRegex:function(b,f,a){var g=aa_text(f,b,"Text",a);var d=aa_text(f,b,"Regex",a);if(g.search(d)>-1){return["true"]}},Contains:function(d,h,b){var n=aa_bool(h,d,"IgnoreCase",b);var f=aa_bool(h,d,"IgnoreOrder",b);var p=aa_bool(h,d,"OneOf",b);var m=ajaxart.run(h,d,"AllText",b);var a="";if(ajaxart.isxml(m)){a=ajaxart.xml2text(m)}else{a=ajaxart.totext(m)}a=a.replace(/\s+/g," ");var o=ajaxart.runsubprofiles(h,d,"Text",b);var q=0;if(a==null||o.length==0){return[]}if(n){a=a.toLowerCase()}for(var g=0;g<o.length;g++){var r=ajaxart.totext_item(o[g]).replace(/\s+/g," ");if(n){r=r.toLowerCase()}var l=a.indexOf(r,q);if(!p&&l==-1){return[]}if(p&&l!=-1){return["true"]}q=l+r.length;if(f||p){q=0}}if(p){return[]}return["true"]},IsInList:function(d,h,b){var g=ajaxart.run(h,d,"List",b);var f=aa_first(h,d,"Item",b);if(f==null){return[]}for(var a=0;a<g.length;a++){if(ajaxart.yesno.itemsEqual(f,g[a])){return["true"]}}return[]},IsStruct:function(b,d,a){return aa_frombool(ajaxart.isObject(d[0]))},IsXml:function(b,d,a){if(d.length==0){return[]}if(ajaxart.isxml(d[0])){return["true"]}return[]},VariableExists:function(d,f,b){var a=aa_text(f,d,"VarName",b);if(!b.vars[a]){return[]}return["true"]},NotInLocalHost:function(b,d,a){if(window.location.href.indexOf("localhost")>-1){return[]}return["true"]},ConditionByJavascript:function(d,g,b){var f=aa_text(g,d,"Javascript",b);var a=aa_run_js_code(f,g,b);if(a==true){return["true"]}},IsSingleValue:function(b,d,a){var f=ajaxart.run(d,b,"Value",a);if(f.length==1){return["true"]}return[]},IsMultipleValue:function(b,f,a){var d=ajaxart.run(f,b,"Value",a);if(d.length>1){return["true"]}return[]},NumberInRange:function(d,f,b){var h=aa_float(f,d,"From",b);var g=aa_float(f,d,"To",b);var a=parseFloat(f[0].toString());if(a>=h&&a<=g){return["true"]}return[]},NotAnyOf:function(d,g,b){var f=ajaxart.subprofiles(d,"Item");for(var a=0;a<f.length;a++){if(aa_bool(g,f[a],"",b)){return[]}}return["true"]},PassesCondition:function(b,d,a){return aa_bool(d,b,"Expression",a)},IsWritableText:function(b,d,a){if(ajaxart.isxml(d)){return["true"]}return[]},IsNumber:function(b,f,a){var d=aa_text(f,b,"Value",a);if(d==""){return[]}if(!isNaN(Number(d))){return["true"]}return[]}});if(!ajaxart.yesno){ajaxart.yesno={}}function aa_textInList(d,b){for(var a=0;a<b.length;a++){if(d==b[a]){return true}}return false};
ajaxart.load_xtml_content('',ajaxart.parsexml('<xtml package="true"><xtml ns="action"><Component id="ActionUsage" type="usage.Usage" execution="xtml"><Param name="Name" /><Param name="Of" /><Param name="Description" /><Param name="Action" type="action.Action" script="true" /><Param name="CleanAfter" type="action.Action" script="true" /><Param name="ExpectedResult" type="data.Boolean" script="true" /><Param name="Result" script="true"><Default value="%%" /></Param><Param name="RunInAllTests" type="data.Boolean" /><Param name="AssignedTo" /><xtml t="usage.DataUsage"><Name value="%$Name%"/><Of value="%$Of%"/><RunBefore t="xtml.UseParam" Param="Action" /><Result t="xtml.UseParam" Param="Result" /><ExpectedResult t="xtml.UseParam" Param="ExpectedResult" /><CleanAfter t="xtml.UseParam" Param="CleanAfter" /></xtml></Component><Component id="IfThenElse" type="action.Action" execution="native"><Param name="If" type="data.Boolean" essential="true" script="true"/><Param name="Then" type="action.Action" script="true" essential="true"/><Param name="Else" type="action.Action" script="true" essential="true"/></Component><Component id="FirstSucceeding" type="action.Action" execution="native" deprecated="true"><Param name="Action" type="action.Action[]" essential="true"/></Component><Component id="Switch" type="action.Action" execution="native"><Param name="Value"><Default t="data.Same"/></Param><Param name="Case" type="inline[]" essential="true"><Param name="If" essential="true"/><Param name="IfCondition" type="data.Boolean" script="true" essential="true"/><Param name="Then" type="action.Action" script="true" essential="true"/></Param><Param name="Default" type="action.Action" /></Component><Component id="IncrementNumber" type="action.Action"><Param name="Number"><Default t="data.Same"/></Param><Param name="Max"/><xtml t="action.WriteValue" To="%$Number%"><Value t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%$Max%"/><Then t="data.Math" Expression="%$Number%+1"/><Else t="data.Math" Expression="(%$Number%+1)&gt;%$Max% ? %$Max% : %$Number%+1"/></Value></xtml></Component><Component id="DecrementNumber" type="action.Action"><Param name="Number"><Default t="data.Same"/></Param><Param name="Min"/><xtml t="action.WriteValue" To="%$Number%"><Value t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%$Min%"/><Then t="data.Math" Expression="%$Number%-1"/><Else t="data.Math" Expression="(%$Number%-1)&lt;%$Min% ? %$Min% : %$Number%-1"/></Value></xtml></Component><Component id="DelayedRun" type="action.Action" execution="native" description="Run on next timer"><Param name="DelayInMilli" Default="500"/><Param name="UniqueActionID"/><Param name="Action" type="action.Action" script="true" essential="true"/></Component><Component id="WriteToLog" type="action.Action" execution="native"><Param name="Message" essential="true"/><Param name="Level" type="enum"><value>error</value><value>warning</value><value>general</value></Param></Component><Component id="WriteToCookie" type="action.Action" execution="native"><Param name="Cookie" essential="true"/><Param name="Value" essential="true"/></Component><Component id="RunOnNextTimer" type="action.Action,action.Action" execution="native"><Param name="Action" type="action.Action" script="true" essential="true"/><Param name="RunNow" type="data.Boolean"/><Param name="WaitInMSec"><Default value="1"/></Param></Component><Component id="RunInTimer" type="action.Action" execution="native"><Param name="IntervalInMilli"><Default value="1000"/></Param><Param name="Action" type="action.Action" script="true" essential="true"/><Param name="RunAlsoNow" type="data.Boolean"/><Param name="ID"/></Component><Component id="ActionReturningResult" type="action.Action" execution="native"><Param name="Action" type="action.Action"/><Param name="Result"/></Component><Component id="DoNothing" type="action.Action"><xtml t="action.RunActions"/></Component><Component id="AddToCommas" type="action.Action" execution="native"><Param name="To"><Default value="%%" /></Param><Param name="Value" essential="true"/></Component></xtml><xtml package="true"><xtml ns="action_async"><Type id="Action" icon="%$_Images%/studio/run.gif"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/run.gif" /><MoreComponents><component id="action_async.RunActions" itemsParam="Action" /></MoreComponents></Type><Type id="PostSuccess"/><Component id="RunAsync" type="action.Action" execution="native"><Param name="Action" type="action_async.Action" script="true" essential="true"/><Param name="OnSuccess" type="action.Action" script="true" /><Param name="OnFailure" type="action.Action" script="true" /></Component><Component id="RunAsyncActions" type="action.Action" execution="native" light="false"><Param name="Action" type="action_async.Action[]" script="true" essential="true"/></Component><Component id="RunActionOnItems" type="action_async.Action" execution="native"><Param name="Items" essential="true"/><Param name="Action" type="action_async.Action" script="true" essential="true"/></Component><Component id="AsyncActionOnAsyncData" type="action_async.Action" execution="native"><Param name="Query" type="data_async.Data" script="true" essential="true"/><Param name="Action" type="action_async.Action" script="true" essential="true"/></Component><Component id="ActionOnAsyncData" type="action_async.Action" execution="native"><Param name="Query" type="data_async.Data" script="true" essential="true"/><Param name="Action" type="action.Action" script="true" essential="true"/></Component><Component id="SyncAction" type="action_async.Action" execution="native"><Param name="Action" type="action.Action[]" script="true" essential="true"/></Component><Component id="Rest" type="action_async.Data,action_async.Action" execution="native"><Param name="SampleResult" /><Param name="Url" essential="true" /><Param name="PostData" /><Param name="Method" type="enum" Options="GET,POST" essential="true"><Default value="GET" /></Param><Param name="ConvertResult" essential="true"><Default value="%%" /></Param><Param name="DetectError" /><Param name="ID" description="aborts all previous calls with this id" /><Param name="ContentType" Default="application/xml; charset=UTF-8"/><Param name="TunnelRequest" type="data.Boolean" /><Param name="ActionOnResult" type="action.Action" script="true" description="Fix the data" /><Param name="KeyForPreLoading" description="for better performance, use preloading in the html with ajaxart_loading mechanism" /><Param name="OnSuccess" type="action.Action" script="true" /><Param name="OnError" type="action.Action" script="true" /></Component><Component id="UrlGet" type="action_async.Action" execution="native"><Param name="Url" essential="true"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="ID"/><Param name="ResultType" type="enum" Options="xml,html,text"/><NativeHelper t="data_async.UrlGet"/></Component><Component id="JBartJsonP" type="action_async.Action" description="If you to wish to implement the service, return a javascript that calls aa_jsonp_callback(data,id,url)"><Param name="Url" essential="true"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="ResultType" type="enum" Options="xml,html,text,json,json to xml"/><xtml t="data_async.JBartJsonP" Url="%$Url%" ResultType="%$ResultType%"><OnSuccess t="xtml.UseParam" Param="OnSuccess"/><OnFailure t="xtml.UseParam" Param="OnFailure"/></xtml></Component><Component id="UrlPost" type="action_async.Action" execution="native"><Param name="Url" essential="true"/><Param name="PostData" type="server.PostData[]"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="ID"/><Param name="SuccessCondition" type="action_async.PostSuccess" advanced="true"/><Param name="ContentType" Default="application/x-www-form-urlencoded; charset=UTF-8"/><Param name="ResultType" type="enum" Options="xml,html,text"/><Param name="TunnelRequest" type="data.Boolean"/><NativeHelper t="data_async.UrlPost"/><NativeHelper name="TunnelRequest" t="action_async.UrlPost" Url="get.php" ResultType="%$ResultType%"><PostData t="server.PostData" Name="contents" Value="%$Url%"/><PostData t="server.PostData" Name="headers" Value="%$Headers%"/><PostData t="server.PostData" Name="__METHOD" Value="POST"/><PostData t="server.PostData" Name="__POSTDATA" Value="%$PostData%"/><OnSuccess t="xtml.UseParam" Param="OnSuccess"/></NativeHelper></Component><Component id="SuccessByHttpCode" type="action_async.PostSuccess" execution="native"><Param name="Code"/></Component><Component id="Code200" type="action_async.PostSuccess" ><xtml t="action_async.SuccessByHttpCode" Code="200"/></Component><Component id="SuccessByContent" type="action_async.PostSuccess" ><Param name="Contains"/></Component><Component id="LoadJsFiles" type="action_async.Action" execution="native"><Param name="JsFiles" essential="true"/></Component><Component id="LoadCssFiles" type="action_async.Action" execution="native"><Param name="CssFiles" essential="true" description="comma separated. Ensure \'real\' commas are encoded as %2C"/></Component><Component id="LoadXtmlPackage" type="action_async.Action" execution="native"><Param name="Package" essential="true"/></Component><Component id="CreateAndDownloadFile" type="action_async.Action"><Param name="FileName" /><Param name="Content" /><Param name="AddUniqueIdentifier" type="data.Boolean" /><xtml t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$FullFileName%" ><Var name="FullFileName" t="data.Pipeline"><Item t="data.List" Data="%$FileName%"><Item value="temp/" /><Item t="text.Split" Separator="." Part="First"/><Item value="_" Condition="%$AddUniqueIdentifier%" /><Item t="data.Now" Condition="%$AddUniqueIdentifier%" /><Item value="."/><Item t="text.Split" Separator="." Part="All but First"/></Item><Aggregator t="text.Concat"/></Var>     <PostData t="server.PostData" Name="contents"><Value t="xml.XmlToText" Data="%$Content%" /></PostData><OnSuccess t="uiaction.DownloadFile" Url="bart.php?op=getfile&amp;download=true&amp;filename=%$FullFileName%" /></xtml></Component><Component id="FillResourceFromAPI" type="action_async.Action.jBart"><Param name="APICall" type="data_async.ApiCall" script="true" essential="true"><Default1 t="data_async.Rest" Url=""/></Param><Param name="PreviewForDT"><Field t="bart_dt.PreviewForFillResourceFromAPI"/></Param><Param name="Target" Description="Put the target for the api data"/><Param name="ProcessAPIResults" Description="transform, clean, enrich, encode API results" Default="%%" script="true"/><Param name="EmptyTargetBeforeCopying" type="data.Boolean" Default="true"/><Param name="OverrideTarget" type="data.Boolean"/><Param name="CallAPIOnlyIfTargetIsEmpty" type="data.Boolean" Default="true" Description="Calls the API only once"/><xtml t="action_async.ActionOnAsyncData"><Condition t="yesno.OR"><Item t="yesno.Not" Of="%$CallAPIOnlyIfTargetIsEmpty%"/><Item t="yesno.IsEmpty" Value="%$Target/*%"/></Condition><Query t="xtml.UseParam" Param="APICall"/><Action t="action.IfThenElse" If="%$OverrideTarget%"><Then t="action.RunActions"><Action t="xml.Delete" To="%$Target%"/><Action t="action.WriteValue" To="%$Target%"><Value t="xtml.UseParam" Param="ProcessAPIResults"/></Action></Then><Else t="action.RunActions"><Action t="xml.DeleteChildren" ParentElement="%$Target%" Condition="%$EmptyTargetBeforeCopying%"/><Action t="xml.AddXmlChildren" Parent="%$Target%"><Children t="xtml.UseParam" Param="ProcessAPIResults"/></Action></Else></Action></xtml></Component><Component id="CustomActionByXtml" type="action_async.Action.jBart"><Param name="Action" type="action_async.Action" script="true"/><xtml t="xtml.UseParam" Param="Action" /></Component></xtml><xtml ns="jbart"><Type id="ApiCall" /><Type id="ApiCallCommunicationType" /><Component id="ApiCall" type="jbart.ApiCall" execution="native"><Param name="Url" /><Param name="DefaultTarget" description="The result will be copied under this location" Default="%$Data%" /><Param name="CommunicationType" type="jbart.ApiCallCommunicationType"><Default t="jbart.RestWithJBartDBProxy" /></Param><Param name="ResultType" type="enum" Options=",xml,json,json to xml" Default="" /><Param name="SkipCallIfDataPresent" type="data.Boolean" Default="true"/></Component><Component id="MultipleApiCalls" type="jbart.ApiCall" execution="native" decorator="Call"><Param name="Call" type="jbart.ApiCall[]" script="true" /></Component><Component id="RestWithJBartDBProxy" type="jbart.ApiCallCommunicationType" description="Tunnels the rest request using the jbartdb proxy" execution="native" /><Component id="JSONP" type="jbart.ApiCallCommunicationType" description="Uses JSONP" execution="native" autoexpand="true"><Param name="UrlParameterForCallback" Default="callback" /><Param name="Timeout" Default="7000" /></Component><Component id="RunApiCommand" type="action.Action"><Param name="Api" type="jbart.ApiCall" script="true" /><Param name="OnSuccess" type="action.Action" script="true" /><Param name="OnError" type="action.Action" script="true" /><xtml t="action_async.RunAsync"><Action t="xtml.UseParam" Param="ApiCall" /><OnSuccess t="xtml.UseParam" Param="OnSuccess" /><OnFailure t="xtml.UseParam" Param="OnError" /></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="async"><Component id="RunOnNextTimer" type="action.Action" execution="native"><Param name="Milliseconds" Default="300" /><Param name="Action" type="action.Action" script="true" /></Component><Component id="RunAsyncActions" type="action.Action" execution="native"><Param name="Action" type="action.Action[]" script="true" /><Param name="OnError" type="action.Action" script="true" /></Component></xtml><xtml ns="async_data"></xtml></xtml><xtml ns="bart" plugin="bart"><Type id="Application" /><Type id="Module" /><Type id="ContentTypes" /><Type id="Language" /><Type id="LoadingPhases" /><Type id="LoadingPhase" /><Type id="ApplicationFeature" Image="%$_Images%/studio/app.gif"/><Component id="Application" type="bart.Application" image="%$_Images%/studio/project.png"><Param name="DesignTimeOnly"><Field t="bart_dt.EditProjectProperties" /></Param><Param name="Pages" type="bart.Pages" script="true" light="false"/><Param name="Resources" type="bart_resource.Resources" light="false"/><Param name="UsingCss" light="false"/><Param name="Title" light="false"/><Param name="Icon" light="false"/><Param name="BrowserTitle" script="true" light="false"/><Param name="ContentTypes" type="bart.ContentTypes" script="true" light="false"/><Param name="Modules" light="false"/><Param name="RequiresLogin" type="data.Boolean" light="false"/><Param name="LoadingPhases" type="bart.LoadingPhases" light="false"/><Param name="CssDefinitions" light="false"/><Param name="JsFiles" description="separate js files by comma" light="false"/><Param name="CssFiles" description="separate css files by comma" light="false"/><Param name="DoOnLoad" type="action_async.Action" script="true" description="Custom behavior when the application loads. E.g. changing the url" light="false"/><Param name="MainPage" light="false"><Default value="main"/></Param><Param name="MainPage1" type="jbart.MyWidgetPage" script="true"><FieldAspect t="field_aspect.Title" Title="Main Page" /></Param><Param name="StyleGuide" type="jbart.StyleGuide"><Default t="style_guide.JBart" /></Param><Param name="GeneralStyling" type="ui.GeneralStyling" script="true" light="false"/><Param name="ApplicationVersion" light="false"/><Param name="Theme" script="true" light="false"/><Param name="Language" type="bart.Language" script="true" light="false" /><Param name="ApplicationFeature" type="bart.ApplicationFeature[]" script="true" /><xtml t="action_async.RunActions"><Var1 name="Language" t="xtml.UseParam" Param="Language" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="Features"><Value t="xtml.UseParamArray" Param="ApplicationFeature" /></Action><Action t="bart.RunApplicationFeatures" Phase="CreateJBartContext" /><Action t="xtml.UseParam" Param="Theme" /><Action t="object.SetMethod" Object="%$_BartContext%" Method="Language"><Xtml t="xtml.UseParam" Param="Language" /></Action><Action t="object.SetMethod" Object="%$_BartContext%" Method="MainPage"><Xtml t="xtml.UseParam" Param="MainPage1" /></Action><Action t="object.SetTextProperty" Object="%$_BartContext%" Property="Version" Value="%$ApplicationVersion%" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="StyleGuide" Value="%$StyleGuide%" IsSingleProperty="true" /><Action t="xtml.UseParam" Param="GeneralStyling" /><Action t="action_async.LoadCssFiles" CssFiles="%$CssFiles%" /><Action t="action_async.LoadJsFiles" JsFiles="%$JsFiles%" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="CssDefinitions" Value="%$CssDefinitions%" /><Action t="object.SetTextProperty" Object="%$_BartContext%" Property="MainPageID" Value="%$MainPage%" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="Resources" Value="%$Resources%" /><Action t="bart_resource.ResourcesToGlobalVars" /><Action t="bart_resource.PrepareResources" LoadingPhases="%$LoadingPhases%"/><Action t="xtml.LoadComponents" Components="%$LanguageNode/Component%" Namespace="%$LanguageNode/@id%"><Var name="LanguageNode" t="bart_resource.ResourceValue" ResourceID="Language" /></Action><Action t="action.RunActions"><Var name="Language" t="object.RunMethod" Object="%$_BartContext%" Method="Language" /><Action t="uiaction.SetBrowserIcon" Icon="%$Icon%" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="ContentTypes"><Value t="data.Pipeline"><Item t="xtml.UseParam" Param="ContentTypes" /><Aggregator t="data.Demote" Items="metadata" ItemText="%ID%" /></Value></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="Pages" ><Value t="xtml.UseParam" Param="Pages" /></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="AppTitle"><Value t="text.Translate" Text="%$Title%" /></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="Modules"><Value t="text.Split" Text="%$Modules%"/></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="GlobalFields" ><Value t="bart_field.GlobalFields" /></Action><Action t="bart_url.UpdateUrl"><ValuePairs t="data.IfThenElse" Then="?screen=login" Else="?mainpage=login" ><If t="yesno.NotEmpty" ><Value t="data.ItemByID" List="%$_BartContext/Screens%" ID="login" /></If></ValuePairs><Condition t="yesno.And"><Item t="yesno.IsEmpty" Value="%$_BartContext/UserID%" /><Item value="%$RequiresLogin%" /></Condition></Action><Action t="xtml.UseParam" Param="DoOnLoad" /></Action><Action t="bart.RunApplicationFeaturesAsync" Phase="Load" /></xtml></Component><Component id="RunApplicationFeatures" type="action.Action"><Param name="Phase" type="enum" Options="CreateJBartContext,Load,AfterShow" /><xtml t="action.RunActionOnItems" Items="%$_BartContext/Features%"><Action t="object.RunMethod" Object="%%" Method="%$Phase%" /></xtml></Component><Component id="RunApplicationFeaturesAsync" type="action_async.Action"><Param name="Phase" type="enum" Options="CreateJBartContext,Load,AfterShow" /><xtml t="action_async.RunActionOnItems" Items="%$_BartContext/Features%"><Action t="object.RunMethod" Object="%%" Method="%$Phase%" /></xtml></Component><Component id="ContentTypes" type="bart.ContentTypes"><Param name="ContentType" type="bart.ContentType[]" /><xtml value="%$ContentType%" /></Component><Component id="ContentType" type="bart.ContentTypes"><Param name="ID" /><Param name="DisplayName" /><Param name="Type" /><Param name="ShortDescription" /><Param name="Image" /><Param name="Tag" /><Param name="BeforeSavingNewNode" type="action_async.Action" script="true" /><Param name="Category" /><xtml t="xtml.Params"><Param name="ID" value="%$ID%" /><Param name="Type" value="%$Type%" /><Param name="DisplayName" value="%$DisplayName%" /><Param name="Image" value="%$Image%" /><Param name="Tag" t="text.FirstSucceeding"><Item value="%$Tag%" /><Item value="%$ID%" /></Param><Method name="BeforeSavingNewNode" t="xtml.UseParam" Param="BeforeSavingNewNode" /><Param name="Category" value="%$Category%" /></xtml></Component><Component id="GlobalVars" type="data.Data"><xtml t="object.Object" /></Component><Component id="Main" type="ui.Control"><Param name="MainUnit"/><Param name="UserId"/><Param name="UIPrefInCookie"><Default value="true"/></Param><Param name="Url"><Default t="bart_url.BrowserUrl" /></Param><xtml t="ui_async.Control"><Var name="_GeneralStyling" t="object.Object" /><Var name="_BartContext" t="bart.Context" Url="%$Url%" /><Var name="_GlobalVars" t="bart.GlobalVars"/><Var name="_UIPref" t="bart.UIPreferences" AlsoInCookie="%$UIPrefInCookie%"/><Var name="BaseUrl" t="ui.BaseUrl"/><AsyncAction t="action_async.RunActions"><Action t="bart.LoadAllUnits" MainUnit="%$MainUnit%"/><Action t="action_async.SyncAction"><Action t="uiaction.BindHashChangeEvent"><Action t="bart_api.RefreshAll" /></Action></Action></AsyncAction><Control t="ui.ControlInObject" Object="%$_BartContext%"><Control t="bart_screen.ShowScreen" /></Control><ControlForLoading t="ui_async.LoadingControl" /></xtml></Component><Component id="Context" type="data.Data"><Param name="Url"><Default t="bart_url.BrowserUrl" /></Param><xtml t="object.Object"><Property name="UserID" t="object.RunMethod" Object="%$_UserProvider%" Method="Value" /><SingleProperty name="Url" value="%$Url%" /><SingleProperty name="ValidationStyle" t="validation.Default" /></xtml></Component><Component id="RequiresLogin" type="data.Boolean"><xtml t="object.RunMethod" Object="%$_BartContext%" Method="RequiresLogin" /></Component><Component id="FixedLanguage" type="bart.Language"><Param name="Language" essential="true"/><xtml value="%$Language%"/></Component><Component id="LanguageInUrl" type="bart.Language"><Param name="Attribute"><Default value="language"/></Param><xtml t="bart_url.UrlAttribute" Attribute="%$Attribute%" /></Component><Component id="DynamiclyDefinedLanguage" type="bart.Language"><Param name="Language" script="true" /><xtml t="xtml.UseParam" Param="Language" /></Component><Component id="LoadingPhases" type="bart.LoadingPhases"><Param name="Phase" type="bart.LoadingPhase[]" /><Param name="LazyResources" type="dynamic_enum_multi" Options="%$_BartContext/Resources/ID%" description="Lazy resources will not be loaded on startup, only when needed"/><xtml t="object.Object"><Property name="Phases" value="%$Phase%" /><TextProperty name="LazyResources" value=",%$LazyResources%," /></xtml></Component><Component id="LoadingPhase" type="bart.LoadingPhase"><Param name="Resources" type="dynamic_enum_multi" Options="%$_BartContext/Resources/ID%" /><xtml value="%$Resources%" /></Component><Component id="UIPreferences" type="uipref.UIPreferences" execution="native"><Param name="AlsoInCookie" type="data.Boolean"><Default value="true"/></Param><NativeHelper name="AppXml" t="data.Pipeline"><Item t="data.Pipeline"><Item value="%$_BartContext/Units%" /><Aggregator t="data.First"/></Item><Item value="%!UIPref%" /></NativeHelper><NativeHelper name="CleanPref" t="xml.Delete"><Data t="data.Pipeline"><Item value="%$_BartContext/Units%" /><Item value="%UIPref/{$Prefix}%" /></Data></NativeHelper><NativeHelper name="WritePref" t="action.WriteValue" Value="%$Value%"><To t="data.Pipeline"><Item t="data.Pipeline"><Item value="%$_BartContext/Units%" /><Aggregator t="data.First"/></Item><Item value="%!UIPref/{$Prefix}%" /><Item value="%!@{$Property}%" /></To></NativeHelper></Component><Component id="LoadAAEditorJs" type="action_async.Action"><xtml t="action_async.LoadJsFiles" JsFiles="package/jbartEditor.js"><Condition t="yesno.Not"><Of t="xtml.ComponentExists" ComponentID="xtml_dt.ParamsAsFields" /></Condition></xtml></Component><Component id="ControlUsingAAEditor" type="ui.Control"><Param name="Control" type="ui.Control" script="true" /><xtml t="ui_async.Control"><ControlForLoading t="ui.Text" Text="loading jBart Studio..." /><AsyncAction t="bart.LoadAAEditorJs" /><Control t="xtml.UseParam" Param="Control" /></xtml></Component><Component id="IsBartRuntime" type="data.Boolean" execution="native" /><Component id="Theme"><Param name="DialogDefaults" /><Param name="PopupDefaults" /><xtml value="" /></Component><Component id="DialogDefaults"><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><xtml t="object.SetMethod" Object="%$_BartContext%" Method="DialogDefaultFeatures" ><Xtml t="xtml.UseParamArray" Param="Feature" /></xtml></Component><Component id="PopupDefaults"><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><xtml t="object.SetMethod" Object="%$_BartContext%" Method="PopupDefaultFeatures"><Xtml t="xtml.UseParamArray" Param="Feature" /></xtml></Component><Component id="MeasureTimings" type="bart.ApplicationFeature" description="Writes timings of operations in the application"><xtml t="object.SetBooleanProperty" Object="%$_BartContext%" Property="MeasureTimings" Value="true" /></Component><Component id="ContentLogs" type="bart.ApplicationFeature" description="Puts content in content log for each save,new,delete. Select with care of database size"><xtml t="object.SetBooleanProperty" Object="%$_BartContext%" Property="ContentLogSupport" Value="true" /></Component><Component id="AuthenticatedUser" type="bart.ApplicationFeature" description="Puts the os authenticated user in _BartCotext/AuthUser"><xtml t="object.Object"><Method1 name="Load" t="action_async.AsyncActionOnAsyncData"><Query t="data_async.Rest" Method="GET" Url="bart.php?op=authuser" /><Action t="object.SetTextProperty" Object="%$_BartContext%" Property="AuthUser" Value="%@authuser%" /></Method1></xtml></Component><Component id="CleanXmlInfos" type="action.Action" execution="native" /><Component id="Css" type="bart.ApplicationFeature" ><Param name="Css" codemirror="true" /><xtml t="object.SetProperty" Object="%$_BartContext%" Property="Css" Value="%$Css%" /></Component></xtml><xtml ns="bart_api" description="includes components applications are free to call" plugin="bart"><Component id="RefreshAfterResourceChanged" type="action_async.Action"><Param name="ResourceID" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" /><xtml t="bart_resource.RefreshAfterResourceChanged" ResourceID="%$ResourceID%" /></Component><Component id="RefreshResources" type="action_async.Action"><xtml t="action_async.RunActions"><Action t="object.SetProperty" Object="%$_BartContext%" Property="Resources"><Value t="xtml.RunXtml" Xtml="%$_BartContext/AppXtml%" Field="Resources" /></Action><Action t="bart_resource.ResourcesToGlobalVars" /></xtml></Component></xtml><xtml ns="bart_field" plugin="bart"><Type id="ContentRefField" /><Component id="Options" type="data_items.Items"><Param name="Source" type="picklist.OptionsProvider" script="true"/><xtml t="data_items.Items"><Items value="%Options%"><Data t="xtml.UseParam" Param="Source"/></Items></xtml></Component><Component id="Content" type="picklist.OptionsProvider"><Param name="DataSource" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" /><Param name="ItemTitle" script="true"><Default value="%@id%" /></Param><Param name="ItemImage" script="true" /><xtml t="bart_field.ReferenceOptions" OptionsResource="%$DataSource%" ShowInplace="false"><ItemTitle t="xtml.UseParam" Param="ItemTitle" /><ItemImage t="xtml.UseParam" Param="ItemImage" /></xtml></Component><Component id="GlobalFields" type="field.Fields"><xtml t="field.Fields"><Field t="field.XmlField" Path="@id" Title="id"><FieldAspect t="field_aspect.ReadOnlyIfNotNew" /></Field><Field t="field.XmlField" ID="created_by" Path="@createdBy" Title="Created By"><FieldAspect t="field_aspect.ReadOnly" /><FieldAspect t="field_aspect.DefaultValue"><Value t="bart_user.CurrentUserID" /></FieldAspect></Field><Field t="field.XmlField" ID="date_created" Path="@dateCreated" Title="Date Created"><Type t="date.Date" /><FieldAspect t="field_aspect.ReadOnly" /><FieldAspect t="field_aspect.DefaultValue"><Value t="data.Now" Format="with time" /></FieldAspect></Field><Field t="field.XmlField" ID="modified_by" Path="@modifiedBy" Title="Modified By"><FieldAspect t="field_aspect.ReadOnly" /><FieldAspect t="field_aspect.RecalcOnSave"><Value t="bart_user.CurrentUserID" /></FieldAspect></Field><Field t="field.XmlField" ID="modified_date" Path="@modifiedDate" Title="Modified Date"><FieldAspect t="field_aspect.ReadOnly" /><FieldAspect t="field_aspect.RecalcOnSave"><Value t="data.Now" Format="with time" /></FieldAspect></Field></xtml></Component><!--  field aspects --><Component id="ReferenceOptions" type="picklist.OptionsDefinition" execution="native"><Param name="OptionsResource" /><Param name="ItemTitle" /><Param name="ItemImage" /><Param name="ShowInplace"/><Param name="Page" type="ui.SinglePage" script="true" /></Component><Component id="PathOfField" type="data.Data" execution="native"><Param name="ContentType" /><Param name="Field" /><NativeHelper name="Fld" t="bart.FieldOfContentType" ContentType="%$ContentType%" FieldID="%$Field%" /></Component><Component id="OptionsFromMetadata" type="picklist.OptionsDefinition"><Param name="MetaDataField" /><xtml t="xtml.RunXtml"><Xtml t="data.Pipeline"><Item t="bart_resource.ResourceValue" ResourceID="MetaData" /><Item value="%{$MetaDataField}%" /></Xtml></xtml></Component></xtml><xtml ns="bart" plugin="bart"><Component id="LoadAllUnits" type="action_async.Action"><Param name="MainUnit" /><xtml t="action_async.AsyncActionOnAsyncData"><Query t="bart_server.LoadNode" ContentType="bart_unit" ID="%$MainUnit%" /><Action t="action.IfThenElse" If="%@reason% != \'os user cannot access the application\'"><Then t="action_async.RunActions"><Action t="action_async.RunActionOnItems"><Items t="text.SplitByCommas" Text="%@using_units%" /><Action t="action_async.ActionOnAsyncData"><Query t="bart_server.LoadNode" ContentType="bart_unit" ID="%%" /><Action t="bart.LoadUnit" /></Action></Action><Action t="action_async.SyncAction"><Action t="bart.LoadUnit" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="AppXtml"><Value t="xtml.ComponentDefinition" ID="%$MainUnit%.App" ToXtml="true" /></Action><Action t="xtml.RunXtmlByComponentId" ComponentID="%$MainUnit%.App" /></Action></Then><Else t="uiaction.GoToUrl" Url="nopremissions.html" /></Action></xtml></Component><Component id="LoadUnit" type="action.Action"><xtml t="action.RunActions"><Action t="xtml.LoadComponents" Components="%Component%" Namespace="%@id%" ClearNSBefore="%@id% != \'bartgallery\'"/><Action t="object.AddToProperty" Object="%$_BartContext%" Property="Units" Value="%%" /><Action t="action.RunActionOnItems" Items="%units/bart_unit%"><Action t="bart.LoadUnit" /></Action></xtml></Component></xtml><xtml ns="bart" plugin="bart"><Component id="EditTranslationComponent" type="ui.Control"><xtml t="ui.ItemList" Class="language"><Var name="Lang" value="%@Language%"/><Var name="LangXtml"/><Items t="xml.XmlItems" Tag="Pattern"/><Fields t="field.Fields"><Field t="field.XmlField" Path="@Original" Title="english"/><Field t="field.XmlField" Path="@T" Title="%$Lang%"><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field></Fields><Operations t="operation.Operations"><Operation t="operation.StdOperations"/><Operation t="operation.Operation" Target="items" Title="auto fill" Icon="%$_Images%/samples/iron1616.png"><Action t="action.RunActions"><Action t="xml.AddChildren" Data="%$LangXtml%"><Children t="data.Pipeline"><Item t="data.Subtract"><List t="bart.GuessLanguagePatterns"/><Subtract t="data.Pipeline"><Item t="data.List"><Item t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="text.MultiLangSuite"/><Item t="xtml.ComponentDefinition" ID="%%" ToXtml="true"/></Item><Item value="%$LangXtml%"/></Item><Item t="yesno.PassesFilter" Filter="%@Language%==%$Lang%"/><Item value="%Pattern/@Original%"/></Subtract></Item><Item t="xml.Xml" DynamicContent="true"><Pattern Original="%%"/></Item></Children></Action><Action t="uiaction.Refresh" RunOn="up(.language)"/></Action></Operation><Operation t="operation.Operation" Target="items" Title="auto translate (using google)" Icon="%$_Images%/translation.png"><Action t="action_async.RunAsyncActions"><Action t="action_async.RunActionOnItems"><Items t="data.Pipeline"><Item value="%$_Cntr/Items/Items%"/><Item t="yesno.PassesFilter"><Filter t="yesno.IsEmpty" Value="%@T%"/></Item><Aggregator1 t="data.First"/></Items><Action t="action_async.ActionOnAsyncData"><Var name="Item" value="%%"/><Query t="bart.GoogleTranslate" Word="%@Original%" Language="%$Lang%"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$Item/!@T%" Value="%%"/><Action t="uiaction.RefreshItemElements"><Var name="Orig" value="%$Item/@Original%"/><ItemElements t="uiaspect.ContainerElementByItemFilter" ItemFilter="%@Original%==%$Orig%"/></Action></Action></Action></Action></Action></Operation><Operation t="operation.Operation" ID="Export to Excel" Icon="%$_Images%/excel.gif" Target="items" Title="Export to excel"><Action t="operation.ExportToExcel"/></Operation></Operations><Aspect t="uiaspect.DefaultFeatures"/><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.FastFind"/><Aspect t="uiaspect.ItemDetails"><OpenNewIn t="uiaspect.DetailsInDialog" DialogTitle="New Pattern"/></Aspect></xtml></Component><Component id="GuessLanguagePatterns" type="data.Data"><xtml t="data.Pipeline"><Item t="data.List"><Item t="data.Pipeline"><Item t="data.FirstSucceeding"><Item value="%$_BartContext/Units%" /><Item value="%$BartUnits%" /></Item><Item t="data.List"><Item t="xml.RecursiveValuesOfAttribute" Attribute="Title" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="Description" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="Question" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="DialogTitle" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="Text" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="Error" /><Item t="xml.RecursiveValuesOfAttribute" Attribute="ErrorMessage" /><Item t="data.Pipeline"><Item value="%//@MultiLang/..%" /><Item t="yesno.PassesFilter" Filter="%@MultiLang% == \'true\'" /><Item value="%@Text%" /><Item t="xml.XmlToText" /></Item><Item t="data.Pipeline"><Item value="%//@Text%" /><Item t="yesno.PassesFilter" Filter="%@t% == \'text.Translate\'" /><Item value="%@Text%" /><Item t="xml.XmlToText" /></Item><Item t="data.Pipeline"><Item value="%//@Pattern%" /><Item t="yesno.PassesFilter" Filter="%@t% == \'text.TranslatePattern\'" /><Item value="%@Pattern%" /><Item t="xml.XmlToText" /></Item><Item t="data.Pipeline"><Item value="%$MetaData///@Options%" /><Item t="text.SplitByCommas" /></Item><Item t="data.Pipeline"><Item value="%$MetaData///Option%" /><Item t="data.IfThenElse" Then="%@Option%" Else="%@DisplayName%"><If t="yesno.IsEmpty" Value="%@DisplayName%" /></Item><Item t="xml.XmlToText" /></Item></Item></Item><Item value="%$_BartContext/ContentTypes/ID%" /></Item><Aggregator t="data.MakeUnique" /></xtml></Component><Component id="GoogleTranslate" type="data_async.Data"><Param name="Word" /><Param name="Language" /><xtml t="data_async.Pipeline"><Item t="data_async.UrlGet" TunnelCookies="false" TunnelRequest="true" ResultType="text" Url1="http://translate.google.com/translate_a/t?client=t&amp;text=%$Word%&amp;hl=en"><Url1 value="http://translate.google.com/translate_a/t?client=t&amp;text=%$Word%&amp;hl=en&amp;sl=en&amp;tl=iw&amp;multires=1&amp;prev=btn&amp;sc=1" /><Url value="http://ajax.googleapis.com/ajax/services/language/translate?v=1.0&amp;q=%$Word%&amp;langpair=en|%$Lang%" /><Var name="Lang" t="data.Switch" Value="%$Language%"><Case If="hebrew" Then="iw" /><Case If="russian" Then="ru" /></Var></Item><Item t="data.Pipeline"><Item t="text.Split" Separator="translatedText&quot;:&quot;" Part="Second"/><Item t="text.Split" Separator="&quot;" Part="First"/></Item></xtml></Component></xtml><xtml ns="bart" plugin="bart"><Type id="Pages" FirstParamsForNew="bart.SinglePage.ID" DefaultPT="bart.SinglePage"/><Type id="DataItemsProvider" /><Component id="Pages" type="bart.Pages" dtsupport="false" light="false"><Param name="Page" type="bart.Pages[]" fastfind="true" /><xtml value="%$Page%" /></Component><Component id="SinglePage_Preview" type="ui.Control"><xtml t="bart_dt.PagePreview" Page="%$Preview/Output%" /></Component><Component id="MultiplePage_Preview" type="ui.Control"><xtml t="bart_dt.PagePreview" Page="%$Preview/Output%" /></Component><Component id="PageIDs" type="data.Data" execution="native"><Param name="Type" /><Param name="ContentType" /></Component></xtml><xtml ns="bart_resource" plugin="bart"><Type id="Resources" FirstParamsForNew="bart_resource.Node.ResourceID" /><Type id="Feature"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/variable.gif" /></Type><Component id="Resources" type="bart_resource.Resources" light="false"><Param name="Resource" type="bart_resource.Resources[]"/><xtml value="%$Resource%"/></Component><Component id="Resource" type="bart_resource.Resources" light="false"><Param name="ID"/><Param name="DependsOn"/><Param name="Items" type="data_items.Items" script="true"/><Param name="Summary" /><Param name="Image" /><Param name="ContentType" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%" /><xtml t="data_items.OverrideItems"><Items t="xtml.UseParam" Param="Items" /><Aspect t="bart_resource.ResourceAspect" ID="%$ID%" DependsOn="%$DependsOn%" Summary="%$Summary%"/><Aspect t="object.SetProperty" Object="%$_Items%" Property="Image" Value="%$Image%" /><Aspect t="object.SetTextProperty" Object="%$_Items%" Property="ContentType" Value="%$ContentType%" /><Aspect t="object.SetMethod" Object="%$_Items%" Method="Refresh"><Xtml t="object.SetProperty" Object="%$_This%" Property="Items"><Value t="xtml.UseParam" Param="Items" /></Xtml></Aspect></xtml></Component><Component id="Node" type="bart_resource.Resources" execution="native"><Param name="ResourceID"><FieldAspect t="field_aspect.Mandatory" /></Param><Param name="ContentType" script="true" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%"><FieldAspect t="field_aspect.Mandatory" /></Param><Param name="ID" script="true" description="node key"><FieldAspect t="field_aspect.Mandatory" /></Param><Param name="AutoCreate" type="data.Boolean" /><Param name="RequiresLogin" type="data.Boolean" /><Param name="AutoSave" type="data.Boolean" /><Param name="DependsOn" type_hint="dynamic_enum_multi" Options="%$_BartContext/Resources/ID%" /><Param name="Feature" type="bart_resource.Feature[]" advanced="true" script="true" /></Component><Component id="Query" type="bart_resource.Resources" execution="native"><Param name="ResourceID"/><Param name="ContentType" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%"><FieldAspect t="field_aspect.Mandatory" /></Param><Param name="HeadersOnly" type="data.Boolean"/><Param name="RequiresLogin" type="data.Boolean" /><Param name="ItemTypeName" advanced="true" /><Param name="AutoSave" type="data.Boolean" /><Param name="Feature" type="bart_resource.Feature[]" script="true" /><Param name="Aspect" type="data_items.Aspect[]" advanced="true" light="false" script="true"/><NativeHelper name="SimpleItems" t="xml.XmlItems" Parent="%%" Tag="%$ContentType%" /></Component><Component id="PrepareUsingContext" type="data_items.Aspect"><Param name="Action" type="action_async.Action" script="true"/><xtml t="object.SetMethod" Object="%$_Items%" Method="PrepareUsingContext"><Xtml t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="ResourceAspect" type="data_items.Aspect" execution="native"><Param name="ID"/><Param name="DependsOn"/><Param name="Summary"/><Param name="ContentType"/><Param name="Type"/></Component><Component id="PrepareResources" type="action_async.Action" execution="native"><Param name="LoadingPhases" /></Component><Component id="PrepareResourcesUsingContext" type="action_async.Action"><xtml t="action_async.RunActionOnItems" Items="%$_BartContext/Resources%"><Action t="object.RunMethod" Object="%%" Method="PrepareUsingContext"><Param name="_Items" value="%%" /></Action></xtml></Component><Component id="RefreshResource" type="action_async.Action"><Param name="ResourceID" type="dynamic_enum" Options="%$_BartContext/Resources/ID%"/><Param name="NotFromServer" type="data.Boolean" /><xtml t="action_async.RunActions"><Action t="object.RunMethod" Method="Refresh"><Var name="_NoRefreshFromServer" value="%$NotFromServer%" /><Object t="bart_resource.ResourceByID" ResourceID="%$ResourceID%" /></Action><Action t="bart_resource.RefreshAfterResourceChanged" ResourceID="%$ResourceID%"/></xtml></Component><Component id="RefreshAfterResourceChanged" type="action_async.Action" execution="native"><Param name="ResourceID" type="dynamic_enum" Options="%$_BartContext/Resources/ID%"/></Component><Component id="NodeInUrl" type="bart_resource.Resources"><Param name="ResourceID"/><Param name="UrlAttribute" /><Param name="Feature" type="bart_resource.Feature[]" advanced="true" script="true" /><xtml t="bart_resource.Node" ResourceID="%$ResourceID%"><ContentType t="text.RemoveSuffix" Separator="."><Data t="bart_url.UrlAttribute" Attribute="%$UrlAttribute%" /></ContentType><ID t="text.RemovePrefix" Separator="."><Data t="bart_url.UrlAttribute" Attribute="%$UrlAttribute%" /></ID><Feature t="xtml.UseParam" Param="Feature" /></xtml></Component><Component id="UrlAttribute" type="bart_resource.Resources"><Param name="ResourceID"/><Param name="Attribute"/><xtml t="data_items.Items"><Items t="bart_url.UrlAttribute" Attribute="%$Attribute%" /><Aspect t="bart_resource.ResourceAspect" ID="%$ResourceID%" Summary="%$Attribute% url attribute"/><Aspect t="object.SetMethod" Object="%$_Items%" Method="Update"><Xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_This%" Property="Items" Value="%$Value%"/><Action t="bart_url.UpdateUrl" ValuePairs="?%$Attribute%=%$Value%;"/></Xtml></Aspect></xtml></Component><!--  Specific resources --><Component id="CurrentPage" type="bart_resource.Resources" light="false"><xtml t="data_items.Items"><Items t="bart_url.UrlAttribute" Attribute="page" /><Aspect t="bart_resource.ResourceAspect" ID="CurrentPage" /><Aspect t="object.SetProperty" Object="%$_Items%" Property="Image" Value="%$_Images%/studio/page1616.gif" /></xtml></Component><Component id="LoggedInUser" type="bart_resource.Resources" light="false"><xtml t="bart_resource.Node" ResourceID="LoggedInUser" ContentType="user" Image="%$_Images%/studio/user.png" AutoSave="true"><ID t="bart_user.CurrentUserID" /></xtml></Component><Component id="CurrentNodeID" type="bart_resource.Resources" light="false"><xtml t="bart_resource.UrlAttribute" ResourceID="CurrentNodeID" Attribute="node" /></Component><Component id="CurrentNode" type="bart_resource.Resources" light="false"><xtml t="bart_resource.Node" ResourceID="CurrentNode" DependsOn="CurrentNodeID"><ContentType t="text.RemoveSuffix" Separator="." Data="%$CurrentNodeID%"/><ID t="text.RemovePrefix" Separator="." Data="%$CurrentNodeID%" /></xtml></Component><!--  resource features --><Component id="CustomFilter" type="bart_resource.Feature" execution="native"><Param name="IncludeIf" type="data.Boolean" script="true"><Default value="true"/></Param></Component><Component id="DoOnSave" type="bart_resource.Feature"><Param name="AfterSavingItem" type="action.Action" paramVars="OriginalData" script="true" /><Param name="AfterCreatingItem" type="action.Action" paramVars="OriginalData" script="true" /><xtml t="data_items.AfterSave"><AfterSavingItem t="xtml.UseParam" Param="AfterSavingItem" /><AfterSavingNewItem t="xtml.UseParam" Param="AfterCreatingItem" /></xtml></Component><Component id="AutoCreateNodes" type="bart_resource.Feature"><Param name="Nodes" alwaysScript="true" script="true"/><xtml t="object.SetMethod" Object="%$_Items%" Method="AutoCreateNodes"><Xtml t="xtml.UseParam" Param="Nodes" /></xtml></Component><Component id="WaitForAutoSave" execution="native" type="action_async.Action" /><Component id="CleanClientCache" execution="native" /></xtml><xtml ns="bart_screen" plugin="bart"><Component id="ShowScreen" type="data.Data" execution="native"><Param name="PageID" /><NativeHelper name="ByPage" t="object.RunMethod" Method="Control"><Var name="_PageParams" t="data.Empty" /><Object t="data.FirstSucceeding"><Var name="UrlMainPage" t="bart_url.UrlAttribute" Attribute="mainpage" /><Item t="xtml.RunXtmlByComponentId" ComponentID="%$ComponentID%" ><Var name="ComponentID" value="%$_BartContext/AppXtml/../../@id%.%$UrlMainPage%" /><Condition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$UrlMainPage%" /><Item t="xtml.ComponentExists" ComponentID="%$ComponentID%" /></Condition></Item><Item t="object.RunMethod" Object="%$_BartContext%" Method="MainPage" Condition="%$PageID% == \'\'" /><Item t="bart.PageByID"><PageID t="text.FirstSucceeding"><Item value="%$PageID%" /><Item value="%$UrlMainPage%" /><Item value="%$_BartContext/MainPageID%" /><Item value="main" /></PageID></Item></Object></NativeHelper><NativeHelper name="RunAppFeatures" t="bart.RunApplicationFeatures" Phase="AfterShow" /></Component></xtml><xtml ns="bart_server" plugin="bart"><Type id="ServerAdapter" /><!-- Actions and Queries --><Component id="LoadNode" type="data_async.Data" execution="native"><Param name="ID" essential="true"/><Param name="ContentType" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%" essential="true"/></Component><!-- Server Interface --><Component id="ServerAdapter"><Param name="Name" /><Param name="InMemory" type="data.Boolean" /><Param name="DB" /><Param name="LoadNode" type="data_async.Data" script="true" paramVars="ID,ContentType"/><xtml t="xtml.CopyAllParams"/></Component><!-- MemoryXmlDb --><Component id="MemoryXmlDb" type="bart_server.ServerAdapter"><Param name="DB"/><Param name="Counters"/><Param name="OnDBChange" type="action.Action" script="true" /><xtml t="bart_server.ServerAdapter" Name="memory xml db" InMemory="true" DB="%$DB%"><LoadNode t="data_async.SyncData"><Query t="data.Pipeline"><Item value="%$DB%"/><Item t="xml.XPath" XPath="%$ContentType%/*[@id=\'%$ID%\']" /><Item t="data.IfThenElse" If="%$_BartReadOnlyTest%" Then="%%"><Else t="data.Duplicate" /></Item></Query></LoadNode></xtml></Component></xtml><xtml ns="bart_user" plugin="bart"><Type id="UserIdProvider" /><Component id="CurrentUserID" type="data.Data"><xtml value="%$_BartContext/UserID%" /></Component><Component id="CustomUserID" type="bart_url.UserIdProvider"><Param name="Value" type="data.Data" script="true" /><Param name="Update" type="action.Action" paramVars="UserID" script="true" /><xtml t="xtml.CopyAllParams" /></Component></xtml><xtml ns="bart_usage" jbart="true"><Component id="JBartUsage" type="usage.Usage" jbart="true"><Param name="Name"/><Param name="Page" /><Param name="RunOnControl" type="uiaction.UsageAction" script="true"/><Param name="ExpectedResult" type="usage.PassesUsage" script="true" /><Param name="UiPref"><Field t="bart_dt.EditUIPref" /></Param><Param name="CleanAfter" type="action.Action" script="true"/><Param name="RunInAllTests" type="data.Boolean"/><Param name="AssignedTo" /><xtml t="ui.ControlUsage"><Var name="_TestObject" t="object.Object" /><Var name="_AsyncCallback" t="data.Empty" /><Control t="ui.ControlWithAction"><Var name="_TestUnit" value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit%"/><RunBeforeControl t="xtml.LoadComponents" Components="%$_TestUnit/Component%" Namespace="%$_TestUnit/@id%" ClearNSBefore="true" /><Control t="jbart_api.ShowWidget" WidgetXml="%$_WidgetXml%" Page="%$Page%" RunAfterControlWithTimer="false"><RunAfter t="object.SetProperty" Object="%$_TestObject%" Property="BartContext" Value="%$_BartContext%" /></Control></Control><RunOnControl t="xtml.UseParam" Param="RunOnControl" /><ExpectedResult t="xtml.UseParam" Param="ExpectedResult"><Var name="_BartContext" value="%$_TestObject/BartContext%" /><Var name="_GlobalVars" t="bart.GlobalVars" /><Var name="Action" t="bart_resource.ResourcesToGlobalVars" /></ExpectedResult><CleanAfter t="xtml.UseParam" Param="CleanAfter" /></xtml></Component><Component id="JBartStudioUsage" type="usage.Usage" jbart="true"><Param name="Name"/><Param1 name="Window" type="enum" Options="properties,tree" /><Param name="FieldPath" description="page/xx/xx/..."/><Param name="NewComponents" type="data.Boolean" Default="false" /><Param name="RunOnControl" type="uiaction.UsageAction" script="true"/><Param name="ExpectedResult" type="usage.PassesUsage" script="true" /><Param name="CleanAfter" type="action.Action" script="true"/><Param name="RunInAllTests" type="data.Boolean"/><Param name="AssignedTo" /><xtml t="ui.ControlUsage"><Var name="_TestObject" t="object.Object" /><Var name="_AsyncCallback" t="data.Empty" /><Var name="_BartContext" t="data.FirstSucceeding"><Item value="%$_BartContext%" /></Var><Var name="_JBartStudio" t="object.Object" NewPTs="%$NewComponents%" /><Control t="ui.ControlWithAction"><Var name="_TestUnit" value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit%"/><RunBeforeControl t="xtml.LoadComponents" Components="%$_TestUnit/Component%" Namespace="%$_TestUnit/@id%" ClearNSBefore="true" /><Control t="jbart_api.ShowWidget" WidgetXml="%$_WidgetXml%" Page="%$Page%" RunAfterControlWithTimer="false"><RunAfter t="object.SetProperty" Object="%$_TestObject%" Property="BartContext" Value="%$_BartContext%" /><ControlToShowInBartContext t="bart_dt.InspectContent"><Data t="bart_dt.PathToXtml" FieldPath="%$FieldPath%" /></ControlToShowInBartContext></Control></Control><RunOnControl t="xtml.UseParam" Param="RunOnControl" /><ExpectedResult t="xtml.UseParam" Param="ExpectedResult"></ExpectedResult><CleanAfter t="xtml.UseParam" Param="CleanAfter" /></xtml></Component><Component id="BartControlUsage" type="usage.Usage" jbart="true"><Param name="Name"/><Param name="RunOnControl" type="uiaction.UsageAction" script="true"/><Param name="ExpectedResult" type="usage.PassesUsage" script="true" /><Param name="User" /><Param name="Url" /><Param name="UiPref"><Field t="bart_dt.EditUIPref" /></Param><Param name="CleanAfter" type="action.Action" script="true"/><Param name="RunInAllTests" type="data.Boolean"/><Param name="AssignedTo" /><Param name="DoesNotChangeWidgetData" type="data.Boolean" desctiption="check it if the test does not do saves. It will make the test run faster" /><xtml t="ui_async.ControlUsage" ><Var name="_ImmediateAutoSave" value="true" /><Var name="_BartDevDtContext" t="object.Object"><SingleProperty name="Studio" t="object.Object" /><Property name="WriteUiPrefs" value="true" /></Var><Var name="_BartReadOnlyTest" value="%$DoesNotChangeWidgetData%" /><Control t="ui.ControlWithAction" Data="InTest"><RunBeforeControl t="xml.ReplaceElement" Element="%$_TestDB/bart_unit/bart_unit/UIPref%" NewElement="%$UiPref%"><Condition t="yesno.NotEmpty" Value="%$UiPref%" /></RunBeforeControl><Control t="bart_usage.Main" DefaultUrl="%$Url%" User="%$User%" DB="%$_TestDB%" /></Control><RunOnControl t="xtml.UseParam" Param="RunOnControl" Data="Test"/><CleanAfter t="xtml.UseParam" Param="CleanAfter" /><ExpectedResult t="xtml.UseParamAsBoolean" Param="ExpectedResult" /></xtml></Component><Component id="BartDataUsage" type="usage.Usage"><Param name="Name"/><Param name="Result" type="data.Data" script="true"/><Param name="ExpectedResult" type="usage.PassesUsage" script="true" /><Param name="User" /><Param name="RunInAllTests" type="data.Boolean"/><Param name="AssignedTo" /><Param name="UserAgent" type="enum" Options="firefox,iphone,ipad,android,chrome,msie 7,msie 8,msie 9"/><xtml t="usage.DataUsage" UserAgent="%$UserAgent%"><Var name="_ServerAdapter" t="bart_server.MemoryXmlDb" DB="%$_TestDB%" /><Var name="_BartContext" t="bart.Context"/><Var name="_GlobalVars" t="bart.GlobalVars"/><Var name="_UserProvider" t="bart_user.CustomUserID" Value="%$User%" /><Var name="MainUnit" value="%$_TestDB/bart_unit/bart_unit[1]/@id%" /><RunBefore t="action_async.RunAsync"><Action t="bart.LoadAllUnits" MainUnit="%$MainUnit%"/></RunBefore><Result t="xtml.UseParam" Param="Result"><Var name="BartAppXtml" value="%$_BartContext/AppXtml%" /></Result><ExpectedResult t="xtml.UseParam" Param="ExpectedResult" /></xtml></Component><Component id="GalleryItemToUsageControl" type="ui.Control"><Param name="GalleryItem" /><Param name="Test" /><xtml t="ui.IfThenElse" If="%$Test/@type%==\'design time\'"><Var name="BaseUrl" t="text.FirstSucceeding"><Item value="%$Test/@url%" /><Item value="%$GalleryItem/url/@url%" /></Var><Var name="User" t="text.FirstSucceeding"><Item value="%$Test/@user%" /><Item value="%$GalleryItem/user/@user%" /></Var><Else t="bart_usage.Main" DefaultUrl="%$BaseUrl%" User="%$User%"><DB t="data.IfThenElse" Then="%$GalleryItem/bart_dev/db%"><If t="yesno.IsEmpty"><Value t="xml.XmlToText" Data="%$Test/UIPref%" /></If><Else t="xml.WithChanges" Xml="%$GalleryItem/bart_dev/db%"><Change t="xml.ReplaceElement" Element="%!bart_unit/bart_unit[1]/UIPref%"><NewElement t="data.Duplicate" Data="%$Test/UIPref%" /></Change></Else></DB></Else></xtml></Component><Component id="AppDevToUsageControl" type="ui.Control"><Param name="TestIndex" /><xtml t="bart_usage.Main"><Var name="_AppDev" value="%$_BartDevDtContext/DevUnits%" /><Var name="TestXml" value="%$_AppDev/AutoTests/Test[{$TestIndex}]%" /><DB value="%$_AppDev/db%" /><DefaultUrl value="%$TestXml/@url%" /><User value="%$TestXml/@user%" /></xtml></Component><Component id="Main" type="ui.Control"><Param name="DB" /><Param name="DefaultUrl" /><Param name="User" /><xtml t="bart.Main" MainUnit="%$DB/bart_unit/bart_unit[1]/@id%" UIPrefInCookie="false" ><Url t="bart_url.InMemoryUrl" DefaultUrl="%$DefaultUrl%" /><Var name="_SimDB" value="%$DB%" /><Var name="_ServerAdapter" t="bart_server.MemoryXmlDb" DB="%$DB%" /><Var name="_UserProvider" t="bart_user.CustomUserID" Value="%$User%" /></xtml></Component><Component id="ShowContactPage" type="ui.Control"><Param name="Resources" type="bart_resource.Resources" script="true" /><Param name="Page" type="bart.Page" script="true" /><Param name="PageID" /><Param name="ContactsDB"><Default t="xml.Xml"><contact><contact id="1" _type="contact" name="Homer" age="50" /><contact id="2" _type="contact" name="Marge" age="48" /></contact></Default></Param><Param name="DefaultUrl" /><Param name="LoadingPhases" /><xtml t="bart_usage.Main" DefaultUrl="%$DefaultUrl%"><Var name="_UsageContext" t="xtml.Params"><ScriptParam name="Resources" t="xtml.UseParam" Param="Resources" /><ScriptParam name="Page" t="xtml.UseParam" Param="Page" /><Param name="LoadingPhases" value="%$LoadingPhases%" /></Var><DB t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><db><bart_unit><bart_unit id="mainunit"><Component id="App" type="bart.Application"><xtml t="bart.Application" MainPage="%$PageID%"><Resources t="object.RunMethod" Object="\\%$_UsageContext\\%" Method="Resources" /><Pages t="object.RunMethod" Object="\\%$_UsageContext\\%" Method="Page" /><ContentTypes t="bart.ContentType" ID="contact" /><LoadingPhases value="\\%$_UsageContext/LoadingPhases\\%" /></xtml></Component></bart_unit></bart_unit></db></Xml><Change t="xml.AddChildren" Children="%$ContactsDB%" CloneChildren="false" /></DB></xtml></Component></xtml><xtml ns="chart"><Component id="Chart" type="ui.Control"><Param name="ObjectWidth"><Default value="500px"/></Param><Param name="ObjectHeight"><Default value="550px"/></Param><Param name="ChartWidth"><Default value="400px"/></Param><Param name="ChartHeight"><Default value="450px"/></Param><Param name="align"><Default value="middle"/></Param><Param name="allowfullscreen"><Default value="true"/></Param><Param name="salign"><Default value="TL"/></Param><Param name="Name"><Default value="my_chart"/></Param><Param name="Play"><Default value="true"/></Param><Param name="ColumnTitles"></Param><Param name="RowTitles"></Param><Param name="RowsData"></Param><Param name="ChartStyle"></Param><xtml t="ui.List"><Var t="data.Pipeline" name="ChartData"><Item t="xml.Xml" DynamicContent=""><chart_data><row><null/></row></chart_data></Item><Item t="xml.WithChanges" Xml="%%"><Change t="xml.PerformChangeOnElements" Elements="%row%"><Change t="xml.PerformChangeWithManyInputs" Inputs="%$ColumnTitles%"><Change t="xml.AddChildren" CloneChildren="false"><Children t="xml.Xml" DynamicContent="true"><string>%%</string></Children></Change></Change></Change><Change t="xml.PerformChangeWithManyInputs" Inputs="%$RowTitles%"><Change t="xml.AddChildren" CloneChildren="false"><Children t="xml.Xml" DynamicContent="true"><row><string>%%</string></row></Children></Change></Change><Change t="xml.PerformChangeOnElements" Elements="%row[position()&gt;1]%"><Change t="xml.PerformChangeWithManyInputs" Inputs="%$RowsData%"><Change t="xml.AddChildren" CloneChildren="false"><Children t="xml.Xml" DynamicContent="true"><number tooltip="%%">%%</number></Children></Change></Change></Change></Item></Var><Var name="ChartXml" t="data.Pipeline"><Item value="%$ChartStyle%"/><Item t="xml.TextToXml"/><Item t="xml.WithChanges"><Change t="xml.AddChildren" Children="%$ChartData%"/><Change t="xml.PerformChangeOnElements" Elements="%chart_rect%"><Change t="xml.PerformChanges"><Change t="xml.SetAttribute" AttributeName="width" Value="%$ChartWidth%"/><Change t="xml.SetAttribute" AttributeName="height" Value="%$ChartHeight%"/></Change></Change></Item><Item t="xml.XmlToText" Escape="false" PrettyPrint="true"/><Item t="text.Replace" UseRegex="true" Find="&#13;"/><Item t="text.Replace" Find="&quot;" ReplaceWith="\'"/><Item t="text.Replace" Find="&gt;   " ReplaceWith="&gt;"/><Item t="text.Replace" Find="&gt;  " ReplaceWith="&gt;"/><Item t="text.Replace" Find="&gt; " ReplaceWith="&gt;"/></Var><Var name="flashvars" value="library_path=lib/chart/charts_library&amp;xml_data=library_path=lib/chart/charts_library&amp;xml_data=%$ChartXml%"/><Control t="ui.HtmlControl" Html="&lt;embed width=&quot;%$ObjectWidth%&quot; height=&quot;%$ObjectHeight%&quot; align=&quot;%$Align%&quot; type=&quot;application/x-shockwave-flash&quot; devicefont=&quot;false&quot; play=&quot;%$Play%&quot; pluginspage=&quot;http://www.macromedia.com/go/getflashplayer&quot; quality=&quot;high&quot; allowscriptaccess=&quot;sameDomain&quot; allowfullscreen=&quot;%$allowFullScreen%&quot; menu=&quot;true&quot; name=&quot;%$Name%&quot; flashvars=&quot;%$flashvars%&quot; src=&quot;lib/Chart/charts.swf&quot; wmode=&quot;opaque&quot; bgcolor=&quot;#FFFFFF&quot; salign=&quot;TL&quot; scale=&quot;scale&quot;/&gt;"/></xtml></Component></xtml><xtml package="true"><xtml ns="chart2"><Component id="Chart" type="field.Fields" advanceddt="true" execution="native"><Param name="ID" advanced="always" idField="true"/><Param name="Title" titleField="true" /><Param name="Chart" type="chart_type.Style"><Default t="googlechart.GooglePieChart" /></Param><Param name="ChartItems" script="true" Default="%$ItemListCntr/Items%" /><Param name="ChartTitle" /><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/></Component></xtml><xtml ns="googlechart"><Component id="GooglePieChart" type="chart_type.Style"><Param name="ConfigurationOptions" Default="{}" codemirror="true"><Description><![CDATA[JSON Format. <a target="_blank" href="http://google-developers.appspot.com/chart/interactive/docs/gallery/piechart#Configuration_Options">See documentation here</a>]]></Description></Param><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this {}]]></Css><Javascript><![CDATA[function(chart) {  function drawChart() {    var data = google.visualization.arrayToDataTable(chart.DataMatrix(true));    var gchart = new google.visualization.PieChart(chart.control);    var options = %$ConfigurationOptions%;    options.title = chart.Title;    gchart.draw(data, options );  }  function loadGoogleCharts() {    jBart.loadJsFile({     url :\'https://www.google.com/jsapi\',     variableToFind: \'google\',     success: function() {        jBart.loadJsFile({          isLoaded: function() { return google.visualization.PieChart != null; },          loadFunction: function() {            google.load("visualization", "1", {callback:\'\' , packages:["corechart"]});          },          success: function() {            aa_addOnAttach(chart.control,function() {              drawChart();            });          }        });     }    });  }  loadGoogleCharts();}]]></Javascript></xtml></Component><Component id="GoogleColumnChart" type="chart_type.Style"><Param name="ConfigurationOptions" Default="{}" codemirror="true"><Description><![CDATA[JSON Format. <a target="_blank" href="http://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart#Configuration_Options">See documentation here</a>]]></Description></Param><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this {}]]></Css><Javascript><![CDATA[function(chart) {  function drawChart() {    var data = google.visualization.arrayToDataTable(chart.DataMatrix(true));    var gchart = new google.visualization.ColumnChart(chart.control);    var options = %$ConfigurationOptions%;    options.title = chart.Title;    gchart.draw(data, options );  }  function loadGoogleCharts() {    jBart.loadJsFile({     url :\'https://www.google.com/jsapi\',     variableToFind: \'google\',     success: function() {        jBart.loadJsFile({          isLoaded: function() { return google.visualization.ColumnChart != null; },          loadFunction: function() {            google.load("visualization", "1", {callback:\'\' , packages:["corechart"]});          },          success: function() {            aa_addOnAttach(chart.control,function() {              drawChart();            });          }        });     }    });  }  loadGoogleCharts();}]]></Javascript></xtml></Component></xtml><xtml ns="chart_type"><Type id="Style" customPT="chart_type.CustomStyle" /><Component id="CustomStyle" type="chart_type.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml package="true"><xtml ns="control"><Component id="Button" type="field.Fields" advanceddt="true" execution="native" image="%$_Images%/studio/button.png"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" titleField="true"/><Param name="ButtonText" script="true" advanced="true" description="Button text can be different than the title"/><Param name="Tooltip" advanced="true"/><Param name="Image" type="image.Image"/><Param name="Action" type="action.Action" script="true" essential="true" /><Param name="Style" type="btn.Style" script="true"><Default t="btn.JBart"/></Param><Param name="HideTitle" type="data.Boolean" advanced="true" Default="true"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/></Component></xtml><xtml ns="btn"><Type id="Style" snippetType="button"><PopupButton t="bart_dt_custom.SelectStyleFromSnippets" SnippetType="button" /></Type><Component id="JBart" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this { cursor: pointer; text-transform:capitalize; text-align: center; color:White;   background:#0F52BA; text-transform:capitalize; font-size: 13px;   margin:0;  border-radius: 2px; padding-top: 0px; padding-right: 25px; padding-bottom: 1px;   padding-left: 25px; border: 1px solid #586E9E;   text-shadow:  0.05em -0.15em 0em #002FA7;   box-shadow:  .03em .03em .05em 0px rgba(0,0,0,0.4);   background-image: -webkit-linear-gradient(-90deg, #5987A8 0% , #0F52BA 100% );   min-width: 56px; vertical-align: middle; line-height: 28px;   }#this:hover {   background-image: -webkit-linear-gradient(-90deg, #75B2DD 0% , #0F52BA 100% );   }#this:active { background:#5987A8;   background-image: -webkit-linear-gradient(90deg, #C04000 0% , #FF5A36 39% , white 100% );   outline: 0; background-image: none; }]]></Css><Javascript><![CDATA[function render(button) {  button.$el.text(button.text).attr(\'title\',button.tooltip);    button.$el.click(function(e) { button.action(e) });}]]></Javascript></xtml></Component><Component id="GreenButton" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {   cursor: pointer; font-family: arial; text-align: center; color:White;   background:#86B300; font-weight:bold; font-size: 13px; border-radius: 6px;   padding-top: 0px; padding-right: 25px; padding-bottom: 1px; padding-left: 25px;   border: 1px solid #6A8C01; text-shadow:  0 1px 0 #668910;   box-shadow:  .03em .03em .05em 0px rgba(0,0,0,0.4);   background-image: -webkit-linear-gradient(-90deg, #86B300 0\\% , #6A8D00 100\\% );   min-width: 56px; -webkit-border-radius: 6px; -moz-border-radius: 6px;   -khtml-border-radius: 6px; vertical-align: middle; line-height: 28px;   -moz-box-shadow: .03em .03em .05em rgba(0,0,0,0.4);   -webkit-box-shadow: .03em .03em .05em rgba(0,0,0,0.4); }#this:hover { transition: background-position 0.1s linear; }#this:active { background:#6A8C01; outline: 0; }]]></Css><Javascript><![CDATA[function(button) {  button.$el.text(button.text).attr(\'title\',button.tooltip);    button.$el.click(function(e) { button.action(e) });}]]></Javascript></xtml></Component><Component id="Hyperlink" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<span />]]></Html><Css><![CDATA[#this {   cursor:pointer; font-family:"lucida grande",tahoma;   color:blue; font-size: 11px; text-decoration: none; }#this:hover { text-decoration:underline; }]]></Css><Javascript><![CDATA[function(button) {    button.$el.text(button.text);      button.$el.click(function(e) { button.action(e) });  }]]></Javascript></xtml></Component><Component id="HyperlinkWithImage" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<span><span class="hypelink_img"/><span class="hypelink_text"/></span>]]></Html><Css><![CDATA[.hypelink_text {  font-family:"lucida grande",tahoma,verdana,arial,sans-serif;   color:#333; font-size: 11px; text-decoration: none;   display: inline-block;}#this:hover .hypelink_text { text-decoration:underline; }.hypelink_img {   display: inline-block;  padding-right: 6px; padding-bottom: 2px;   vertical-align:middle; }#this:active .hypelink_img {  opacity:0.6;}#this {   cursor:pointer; }]]></Css><Javascript><![CDATA[function(button) {    button.$el.find(\'.hypelink_text\').text(button.text);      aa_setImage(button.$el.find(\'.hypelink_img\'),button.image,{ removeIfNoImage: true });    button.$el.click(function(e) { button.action(e) });}]]></Javascript></xtml></Component><Component id="HyperlinkWithArrow" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div><div class="text" /><div class="arrow-down" /></div>]]></Html><Css><![CDATA[.text { cursor:pointer;     font-family:"lucida grande",tahoma;     color:#222; font-size: 11px;     text-decoration: none;     display: inline-block;  }  #this:hover .text { text-decoration:underline; }  .arrow-down {   width: 0px; height: 0px;   margin-left: 4px;   border-top: 5px solid #8A8A89;   border-bottom: 3px solid transparent;   border-right: 4px solid transparent;   border-left: 4px solid transparent;   display: inline-block;   vertical-align: text-bottom;   }  ]]></Css><Javascript><![CDATA[function(button) {      button.$el.find(\'.text\').text(button.text);        button.$el.click(function(e) { button.action(e) });    }]]></Javascript></xtml></Component><Component id="ImageOnlyButton" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this {   cursor:pointer; }#this:active { opacity: 0.8; }]]></Css><Javascript><![CDATA[function(button) {    button.$el.find(\'.hypelink_text\').text(button.text);      aa_setImage(button.el,button.image,{ removeIfNoImage: false });    button.$el.click(function(e) { button.action(e) });}]]></Javascript></xtml></Component><Component id="Bootstrap" type="btn.Style" styleGuide="bootstrap"><Param name="Size" type="bootstrap_btn.ButtonSize" refreshOnHover="true"><Default t="bootstrap_btn.Small" /></Param><Param name="Type" type="bootstrap_btn.ButtonType" refreshOnHover="true"><Default t="bootstrap_btn.Default"/></Param><xtml t="ui.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {margin: 0;        border: 1px solid;color: white;border-radius: 5px;text-align:center;cursor: pointer;-webkit-appearance: button;%$Size%%$Type/Normal%}#this:hover { %$Type/Hover%  transition: background-position 0.1s linear;  }#this:active { background-color: #E6E6E6;background-color: #D9D9D9 9;background-image: none;outline: 0;-webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);-moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);%$Type/Active%}]]></Css><Javascript><![CDATA[function(button) {  button.$el.text(button.text).attr(\'title\',button.tooltip);    button.$el.click(function(e) { button.action(e) });}]]></Javascript></xtml></Component><Component id="GreenWithNextArrow" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div><div class="arrow-right" /></div>]]></Html><Css><![CDATA[#this { cursor: pointer; font-family: arial; text-align: center; color:white;     background:#86B300; font-weight:bold; font-size: 13px; padding-top: 6px;     padding-right: 18px; padding-bottom: 8px; padding-left: 18px; margin-top: 0px;     margin-right: 0px; margin-bottom: 0px; margin-left: 0px;     border: 1px solid #6A8C01; text-shadow:  0 1px 0 #668910;     box-shadow:  .03em .03em .05em 0px rgba(0,0,0,0.4);     background-image: -webkit-linear-gradient(-90deg, #86B300 0\\% , #6A8D00 100\\% );     min-width: 80px; display: inline-block; vertical-align: middle; }  #this:hover { transition: background-position 0.1s linear; }  #this:active { background:#6A8C01; outline: 0; }  .arrow-right { width: 0px; height: 0px; margin-bottom: 2px; margin-left: 10px;     border-top: 6px solid transparent;     border-bottom: 6px solid transparent; border-left: 8px solid white;     display: inline-block; vertical-align: bottom; }  ]]></Css><Javascript><![CDATA[function(button) {      button.$el.find(\'.arrow-right\').before(button.text);        button.$el.click(function() { button.action() });    }]]></Javascript></xtml></Component><Component id="GreenWithBackArrow" type="btn.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div><div class="arrow-left" /></div>]]></Html><Css><![CDATA[#this { cursor: pointer; font-family: arial; text-align: center; color:white;     background:#86B300; font-weight:bold; font-size: 13px; padding-top: 6px;     padding-right: 18px; padding-bottom: 8px; padding-left: 18px; margin-top: 0px;     margin-right: 0px; margin-bottom: 0px; margin-left: 0px;     border: 1px solid #6A8C01; text-shadow:  0 1px 0 #668910;     box-shadow:  .03em .03em .05em 0px rgba(0,0,0,0.4);     background-image: -webkit-linear-gradient(-90deg, #86B300 0\\% , #6A8D00 100\\% );     min-width: 80px; display: inline-block; vertical-align: middle; }  #this:hover { transition: background-position 0.1s linear; }  #this:active { background:#6A8C01; outline: 0; }  .arrow-left { width: 0px; height: 0px; margin-bottom: 2px; margin-right: 10px;     border-top: 6px solid transparent;     border-bottom: 6px solid transparent; border-right: 8px solid white;     display: inline-block; vertical-align: bottom; }  ]]></Css><Javascript><![CDATA[function(button) {      button.$el.find(\'.arrow-left\').after(button.text);        button.$el.click(function() { button.action() });    }]]></Javascript></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="control"><Component id="Label" type="field.Fields" execution="native" advanceddt="true" image="%$_Images%/studio/text.png"><Param name="ID" advanced="always" idField="true" /><Param name="Title" titleField="true" /><Param name="Text" script="true"><ContextMenu t="xtml_dt.EditAsRichText" /></Param><Param name="Style" type="uitext.Style"><Default t="uitext.PlainText" /></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /></Component><Component id="Layout" type="field.Fields" execution="native" image="%$_Images%/studio/cube1616.gif"><Param name="ID" advanced="always" idField="true" /><Param name="Title" titleField="true" /><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="Layout" type="layout.Style" script="true"><Default t="layout.Default" /></Param><Param name="SectionStyle" type="section.Style" description="Select a section style to make it a section" /></Component><Component id="SeparatingLine" type="field.Control" description="An horizontal visual line"><Param name="Style" type="line.Style"><Default t="line.Default" /></Param><xtml t="control.CustomControl" Control="%$Style%" /></Component><Type id="ControlTriplet" /><Component id="CustomControl" type="field.Control" execution="native" autoexpand="true"><Param name="Control" type="control.ControlTriplet"><Default t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this {}]]></Css><Javascript><![CDATA[function(object) {/* Use object.el or object.$el to change the element */  }]]></Javascript></Default></Param></Component><Component id="Page" type="field.Fields" image="%$_Images%/studio/star1616.gif"><Param name="Title" /><Param name="Page" type="jbart.MyWidgetPage" script="true"/><xtml t="xtml.UseParam" Param="Page" /></Component><Component id="ImageGallery" type="field.Fields" execution="native" advanceddt="true"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="Images" type="imagegallery.Images" /><Param name="Style" type="imagegallery.Style"><Default t="imagegallery.Simple" /></Param><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /></Component></xtml><xtml ns="imagegallery"><Type id="Images" /><Component id="Images" type="imagegallery.Images"><Param name="ImagesList" /><Param name="ImageUrl" script="true"/><Param name="ImageTitle" script="true"/><Param name="ImageLink" script="true"/><xtml t="data.Pipeline"><Item value="%$ImagesList%" /><Item t="object.Object"><TextProperty name="url" t="xtml.UseParam" Param="ImageUrl" /><TextProperty name="title" t="xtml.UseParam" Param="ImageTitle" /><TextProperty name="link" t="xtml.UseParam" Param="ImageLink" /></Item></xtml></Component></xtml></xtml><xtml ns="data"><Type id="Data" Icon="%$_Images%/studio/data1616.gif"><MoreComponents><component id="data.Pipeline" itemsParam="Item" /><component id="data.List" itemsParam="Item" /><component id="data.IfThenElse" itemsParam="Then" /><component id="data.Switch" itemsParam="Default" /><component id="text.FirstSucceeding" itemsParam="Item" /></MoreComponents></Type><Type id="Boolean" Icon="%$_Images%/studio/yesno1616.gif" ><MoreComponents><component id="yesno.And" itemsParam="Item" /><component id="yesno.OR" itemsParam="Item" /><component id="yesno.Not" itemsParam="Of" /></MoreComponents></Type><Type id="Aggregator" /><Type id="MultiSelector"><Method name="IsSelected"/><Method name="Toggle"/></Type><Component id="Empty" type="data.Data" execution="xtml"><xtml t="data.List" /></Component><Component id="RecursiveScan" type="data.Data" execution="native" synonyms="ScanTree,ScanStructure"><Param name="ChildNodes" essential="true"/><Param name="OnlyLeaves"><Default value="false" /></Param><Param name="ScanOrder" type="enum"><Default value="Breadth first search" /><value>Depth first search</value><value>Breadth first search</value></Param><Param name="MaxItemsToAvoidInfinitiveLoop"><Default value="1000" /></Param></Component><Component id="PathItems" type="data.Data" synonyms="UpToStructureTop"><Description>Build a chain of elements from current to the last one</Description><Param name="Next" script="true" /><Param name="IncludeOrigianlItem" type="data.Boolean"><Default value="true" /></Param><Param name="StopCondition" type="data.Boolean" script="true"><Default value="false" /></Param><xtml t="data.RecursiveScan"><Data t="data.IfThenElse" If="%$IncludeOrigianlItem%" Then="%%"><Else t="xtml.UseParam" Param="Next" /></Data><ChildNodes t="data.Pipeline"><Item t="xtml.UseParam" Param="Next" /><Item t="yesno.PassesFilter"><Filter t="yesno.Not"><Of t="xtml.UseParam" Param="StopCondition" /></Filter></Item><Aggregator t="data.First" /></ChildNodes></xtml></Component><Component id="Slice" type="data.Aggregator" execution="native"><Param name="From" short="true"/><Param name="To" short="true" /></Component><Component id="Max" type="data.Aggregator" execution="native"><Param name="ToCompare" short="true"><Default value="%%" /></Param></Component><Component id="Average" type="data.Aggregator" execution="native"><Param name="Digits"><Default value="0" /></Param></Component><Component id="Sum" type="data.Aggregator" execution="native" /><Component id="Min" type="data.Aggregator" execution="native"><Param name="ToCompare"><Default value="%%" /></Param></Component><Component id="First" type="data.Aggregator" execution="xtml"><xtml t="data.Subset" From="1" Count="1" /></Component><Component id="Last" type="data.Aggregator" execution="native" /><Component id="RandomPick" type="data.Aggregator" execution="native" /><Component id="RandomNumber" type="data.Data" execution="native"><Param name="From"><Default value="1" /></Param><Param name="To" short="true"><Default value="10" /></Param></Component><Component id="RandomShuffle" type="data.Aggregator" execution="native" /><Component id="UniqueNumber" type="data.Data" execution="native"><Param name="Prefix" /><Param name="Suffix" /></Component><Component id="Single" type="data.Data" execution="native"><Param name="Items" /></Component><Component id="Url" type="data.Data" execution="native" /><Component id="MakeUnique" type="data.Aggregator" execution="native"><Param name="Identifier" script="true" ><Default value="%%" /></Param></Component><Component id="GroupBy" type="data.Aggregator" execution="native"><Param name="GroupBy" script="true" ><Default value="%%" /></Param><Param name="Group" script="true" Description="struct of ID and Items"/><Param name="Items" ><Default value="%%" /></Param></Component><Component id="ExpandWithRelated" type="data.Aggregator" execution="native"><Param name="Identifier" script="true"><Default value="%%" /></Param><Param name="Relation" script="true"/><Param name="MaxDepth"><Default value="2"/></Param><Param name="LogRelationsTo" /></Component><Component id="MakeUniqueAndCount" type="data.Aggregator" execution="native" Description="works on text only. returns a struct with \'text\' and \'count\' attributes"/><Component id="CountUnique" type="data.Aggregator" execution="native" Description="count unique accurances of value"/><Component id="Struct" type="data.Data" execution="native"><Param name="Item" type="struct[]" essential="true"><StructParam name="Name" /><StructParam name="Value" /></Param></Component><Component id="AddToStruct" type="data.Data" execution="native"><Param name="Item" type="struct[]" essential="true"><StructParam name="Name" /><StructParam name="Value" /></Param></Component><Component id="RuntimeObjectType" type="data.Data" execution="native" /><Component id="ReverseOrder" type="data.Aggregator" execution="native" /><Component id="Math" type="data.Data" execution="native"><Param name="Expression" essential="true" /><Param name="RoundResult" type="enum"><value>round</value><value>floor</value><value>ceil</value><value>none</value></Param></Component><Component id="DuplicateNTimes" type="data.Data" execution="native"><Param name="Times"><Defualt value="1" /></Param></Component><Component id="Subtract" type="data.Data" execution="native"><Param name="List" /><Param name="Subtract" /></Component><Component id="Sort" type="data.Aggregator" execution="native"><Param name="SortBy" script="true"><Default value="%%" /></Param><Param name="SortByPath" /><Param name="Order" type="enum"><Default value="Ascending" /><value>Ascending</value><value>Descending</value></Param><Param name="Type" type="enum"><Default value="text" /><value>text</value><value>number</value><value>date</value></Param><Param name="SortAtSource" type="data.Boolean" Description="Side effect to sort in xml source"><Default value="false"/></Param></Component><Component id="Duplicate" type="data.Data" execution="native" /><Component id="VariableValue" type="data.Data" execution="native" visibility="hidden"><Param name="Variable" /></Component><Component id="ValueFromCookie" type="data.Data" execution="native"><Param name="Cookie" essential="true"/><Param name="AsXml" type="data.Boolean" /></Component><Component id="CreateIfDoesNotExist" type="data.Data" execution="native"><Param name="Query" script="true" /><Param name="Create" type="action.Action" script="true" /></Component><Component id="OccurrenceLimit" type="data.Boolean" execution="native"    Description="Return true in first x times, otherwise false"><Param name="Key" /><Param name="Group" /><Param name="TimesToAllow" /></Component><Component id="Now" type="data.Data" visibility="hidden"><Param name="TimeZone" type="enum" Options="local,GMT,GMT+1,GMT+2,GMT+3,GMT+4,GMT+5,GMT+6,GMT+7,GMT+8,GMT+9,GMT+10,GMT+11,GMT-1,GMT-2,GMT-3,GMT-4,GMT-5,GMT-6,GMT-7,GMT-8,GMT-9,GMT-10,GMT-11"/><Param name="Format" type="enum" Options="milliseconds,std,with time"><Default value="milliseconds" /></Param><xtml t="date.Now" Format="%$Format%" TimeZone="%$TimeZone%"/></Component><Component id="Today" type="data.Data" visibility="hidden"><Param name="Format" type="enum" Options="milliseconds,std,with time"><Default value="milliseconds" /></Param><Param name="TimeZone" type="enum" Options="local,GMT,GMT+1,GMT+2,GMT+3,GMT+4,GMT+5,GMT+6,GMT+7,GMT+8,GMT+9,GMT+10,GMT+11,GMT-1,GMT-2,GMT-3,GMT-4,GMT-5,GMT-6,GMT-7,GMT-8,GMT-9,GMT-10,GMT-11"/><xtml t="date.Now" Format="%$Format%" TimeZone="%$TimeZone%"/></Component><Component id="AddToCommaSeparated" type="data.Data"><Param name="Separator"><Default value="," /></Param><Param name="List"><Default value="%%" /></Param><Param name="ToAdd" /><xtml t="data.IfThenElse" Then="%$ToAdd%" Else="%$List%%$Separator%%$ToAdd%"><If t="yesno.IsEmpty" Data="%$List%" /></xtml></Component><Component id="IsInCommaSeparatedList" type="data.Boolean"><Param name="Separator"><Default value=","/></Param><Param name="Item" essential="true"/><Param name="List" essential="true"/><xtml t="yesno.EqualsTo" To="%$Item%"><Data t="data.Pipeline"><Item t="text.Split" Data="%$List%" Separator="%$Separator%"/><Item t="yesno.PassesFilter"><Filter t="yesno.EqualsTo" To="%$Item%"/></Item></Data></xtml></Component><Component id="RemoveFromCommaSeparated" type="data.Data"><Param name="Separator"><Default value="," /></Param><Param name="List"><Default value="%%" /></Param><Param name="ToRemove" /><xtml t="data.Pipeline"><Item t="text.Split" Separator="%$Separator%" Data="%$List%" /><Item t="yesno.PassesFilter"><Filter t="yesno.NotEqualsTo" To="%$ToRemove%" /></Item><Aggregator t="text.Concat" Separator="%$Separator%" /></xtml></Component><Component id="ListByCommas" type="data.Data"><Param name="List" essential="true"/><xtml t="text.Split" Separator="," Data="%$List%" /></Component><Component id="CreateNumbers" type="data.Data" execution="native"><Param name="From" essential="true"/><Param name="To" essential="true"/></Component><Component id="ReplaceItemByIndex" type="data.Aggregator" execution="native"><Param name="Index" /><Param name="NewItem" /></Component><Component id="AssignToColumns" type="data.Data" execution="native"><Param name="Columns" /><Param name="Count" /></Component><Component id="SpecificIndices" type="aggregator.Aggregator" execution="native"><Param name="Indices" /></Component><Component id="RoundCents" type="data.Data" execution="native"><Param name="Indices" /></Component><Component id="HashPassword" type="data.Data" execution="native"/><Component id="BuildCategories" type="data.Data" execution="native"><Param name="Categories" /><Param name="Separator" ><Default value="."/></Param></Component><Component id="NextLevelCategory" type="data.Data" execution="native"><Param name="Categories" /><Param name="Parent" /><Param name="Separator" ><Default value="."/></Param></Component><Component id="IsInSelectedItems" type="data.Boolean" execution="native" Uses="SelectedItems"/><Component id="IsCodeInSelectedItems" type="data.Boolean" execution="native" Uses="SelectedItems"><Param name="Code"/></Component><Component id="SingleSelector" type="data.MultiSelector"><Param name="SelectedItem"/><Param name="Item" script="true" Default="%%"/><xtml t="xtml.Params"><Var name="SelectedItem" value="%$SelectedItem%"/><Param name="SelectedItem" value="%$SelectedItem%"/><Method name="IsSelected" t="yesno.EqualsTo" To="%$SelectedItem%"/><Method name="Toggle" t="action.WriteValue" To="%$SelectedItem%"><Value t="xtml.UseParam" Param="Item"/></Method></xtml></Component><Component id="MultiSelectorByList" type="data.MultiSelector"><Param name="SelectedItems" Description="Camma separated field list"/><Param name="Item" script="true" Default="%%"/><Param name="ReadOnly" type="data.Boolean"/><xtml t="xtml.Params"><Var name="SelectedItems" value="%$SelectedItems%"/><Param name="SelectedItems" value="%$SelectedItems%"/><Method name="IsSelected" t="data.IsInSelectedItems" /><Method name="Toggle" t="action.WriteValue" To="%$SelectedItems%" Condition="!%$ReadOnly%"><Value t="data.IfThenElse"><Data t="xtml.UseParam" Param="Item"/><If t="data.IsInSelectedItems"/><Then t="data.RemoveFromCommaSeparated" List="%$SelectedItems%" ToRemove="%%"/><Else t="data.AddToCommaSeparated" List="%$SelectedItems%" ToAdd="%%" /></Value></Method></xtml></Component><Component id="MultiSelectorByListWithCodes" type="data.MultiSelector" Remark="Separated from MultiSelectorByList for performance reasons"><Param name="SelectedItems" Description="Camma separated field list"/><Param name="ItemCode" type="data.Data" script="true" Default="%%"/><xtml t="xtml.Params"><Var name="SelectedItems" value="%$SelectedItems%"/><Param name="SelectedItems" value="%$SelectedItems%"/><Method name="IsSelected" t="data.IsCodeInSelectedItems" remarks="use native for performance"><Code t="xtml.UseParam" Param="ItemCode"/></Method><Method name="Toggle" t="action.WriteValue" To="%$SelectedItems%"><Value t="data.IfThenElse"><If t="data.IsCodeInSelectedItems"><Code t="xtml.UseParam" Param="ItemCode" /></If><Then t="data.RemoveFromCommaSeparated" List="%$SelectedItems%"><ToRemove t="xtml.UseParam" Param="ItemCode"/></Then><Else t="data.AddToCommaSeparated" List="%$SelectedItems%"><ToAdd t="xtml.UseParam" Param="ItemCode"/></Else></Value></Method></xtml></Component><Component id="RunNativeHelperTest" execution="native"><Param name="FirstName"/><Param name="LastName"><Default value="Black"/></Param><Param name="TransformAll" script="true" Default="%%"/><NativeHelper name="FullName" t="xtml.UseParam" Param="TransformAll" Input="%$FirstName% %$LastName%"/></Component><Component id="StructEntryNames" type="data.Data" execution="native" /><Type id="ValueByRef" /><Component id="GetValue" type="data.Data" commonParams="Data"><xtml t="xtml.RunXtml" Xtml="%GetValue%"/></Component><Component id="ValueByRef" type="data.ValueByRef"><Param name="GetValue" script="true"/><Param name="WriteValue" type="action.Action" script="true"/><xtml t="object.ObjectFromParams"/></Component><Component id="UrlFragmentValue" type="data.ValueByRef"><Param name="Attribute"/><xtml t="xtml.Params"><ScriptParam name="GetValue" t="ui.UrlFragment" Attribute="%$Attribute%"/><ScriptParam name="WriteValue" t="uiaction.SetUrlFragment" Attribute="%$Attribute%" Value="%%" /></xtml></Component><Component id="VariableAsValueByRef" type="data.ValueByRef"><Param name="Value"/><xtml t="xtml.Params"><ScriptParam name="GetValue" value="%$Value%"/><ScriptParam name="WriteValue" t="action.WriteValue" To="%$Value%" Value="%%" /></xtml></Component><Component id="Object" type="data.Data" execution="native" dtsupport="false"><Param name="Property" type="data.Data[]"/><Param name="Method" type="data.Data[]"/></Component><Component id="Demote" type="data.Aggregator" execution="native" dtsupport="false"><Param name="Items"/><Param name="ItemText" script="true" Default="%%"/></Component><Component id="EvaluateTemplate" type="data.Data"><Param name="Template"/><xtml t="xtml.RunXtml" Xtml="%$Template%" /></Component><Component id="ByIndexFromList" type="data.Data" execution="native" ><Param name="List" /><Param name="Index" /><Param name="Base" type="enum" ><Default value="1-Based Index" /><value>0-Based Index</value><value>1-Based Index</value></Param></Component><Component id="DataWithPreAction" type="data.Data"><Param name="Action" type="action.Action" script="true" /><Param name="Query" script="true" /><xtml t="xtml.UseParam" Param="Query"><Var name="_Nothing" t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="HtmlToCleanText" type="data.Data" execution="native" /><Component id="Csv" type="data.Data" execution="native"><Param name="Content"/><Param name="FieldNames" Description="Comma separated"/></Component><Component id="InPreviewMode" type="data.Boolean" execution="native" /><Component id="NotInPreviewMode" type="data.Boolean" ><xtml t="yesno.Not"><Of t="data.InPreviewMode" /></xtml></Component><Component id="Zip" type="data.Data" execution="native" description="[author,author,..] + [title,title,...] = [[author,title],[author,title],...]"><Param name="List" type="data.Data[]" essential="true" /></Component><Component id="MeasureCalculationTime" type="data.Data" execution="native"><Param name="Calculation" type="data.Data" script="true" essential="true" /><Param name="PutTimeInObject" type="data.Data" essential="true" /><Param name="PutTimeInProperty" type="data.Data" essential="true" /></Component></xtml><xtml ns="data_async"><Type id="Data" /><Type id="MergeInput" /><Type id="ApiCall" /><Component id="Rest" type="data_async.Data,data_async.ApiCall" execution="native"><Param name="SampleResult" light="false"/><Param name="Url" essential="true"/><Param name="PostData"/><Param name="Method" type="enum" Options="GET,POST" essential="true"><Default value="GET"/></Param><Param name="ResultType" type="enum" Options=",xml,json,json to xml" Default="" /><Param name="ConvertResult" essential="true"><Default value="%%"/></Param><Param name="DetectError"/><Param name="ContentType" Default="application/xml; charset=UTF-8"/><Param name="ID" description="aborts all previous calls with this id"/><Param name="TunnelRequest" type="data.Boolean"/><Param name="ActionOnResult" type="action.Action" script="true" description="Fix the data"/><Param name="KeyForPreLoading" description="for better performance, use preloading in the html with ajaxart_loading mechanism"/></Component><Component id="CurrentGeoLocation" type="data_async.Data" execution="native" description="Returns the current geo location using GPS"></Component><Component id="JBartJsonP" type="data_async.Data" execution="native" description="If you to wish to implement the service, return a javascript that calls aa_jsonp_callback(data,id,url)"><Param name="SampleResult"/><Param name="Url" essential="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="ResultType" type="enum" Options="xml,html,text,json,json to xml"/><Param name="OnSuccess" type="action.Action" script="true" hidden="true"/></Component><Component id="Pipeline" type="data_async.Data" execution="native"><Param name="Item" type="data_async.Data[]" script="true" essential="true" /></Component><Component id="SyncData" type="data_async.Data" execution="native" hidden="true"><Param name="Query" essential="true" /></Component><Component id="SyncDataOnNextTimer" type="data_async.Data" execution="native" hidden="true"><Param name="Query" essential="true" /></Component><Component id="AsyncDataOnNextTimer" type="data_async.Data" execution="native" hidden="true"><Param name="Query" type="data_async.Data" essential="true" /></Component><Component id="Calculate" type="data_async.Data" execution="native"><Param name="Query" essential="true"/></Component><Component id="UrlGet" type="data_async.Data" execution="native"><Param name="Url" essential="true" /><Param name="ResultType" type="enum" Options="xml,html,text" essential="true" /><Param name="TunnelRequest" type="data.Boolean"/><Param name="TunnelCookies" /><Param name="OnFailure" type="action.Action" script="true"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="CacheResult" type="data.Boolean"/><Param name="Headers" description="Http format. E.g: Accept: application/xml\\n Content-Type: application/xml\\n }"/><NativeHelper name="TunnelRequest" t="data_async.UrlPost" Url="get.php" ResultType="%$ResultType%"><PostData t="server.PostData" Name="contents" Value="%$Url%"/><PostData t="server.PostData" Name="cookies" Value="%$TunnelCookies%"/><PostData t="server.PostData" Name="headers" Value="%$Headers%"/><OnSuccess t="xtml.UseParam" Param="OnSuccess"/></NativeHelper></Component><Component id="UrlPost" type="data_async.Data" execution="native"><Param name="Url" essential="true" /><Param name="PostData" type="server.PostData[]" essential="true" /><Param name="ResultType" type="enum" Options="xml,html,text"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="ContentType" Default="application/x-www-form-urlencoded; charset=UTF-8"/></Component><Component id="Parallel" type="data_async.Data" execution="native"><Param name="Input" type="data_async.MergeInput[]" /><Param name="Result" /></Component><Component id="MergeInput" type="data_async.MergeInput" execution="native"><Param name="Name" /><Param name="Query" type="data_async.Data" /></Component><Component id="DataWithCache" type="data_async.Data"><Param name="CacheName" /><Param name="Query" type="data_async.Data" script="true"/><xtml t="data_async.Pipeline"><Var name="_Input" /><Item t="data_async.UrlGet" Url="bart.php?op=getfile&amp;filename=%$CacheName%" /><Item t="data.IfThenElse" If="%@type%==\'failure\'"><Then t="data_async.Pipeline"><Item t="xtml.UseParam" Param="Query" Input="%$_Input%" /><Item t="data_async.Calculate"><Query t="data.DataWithPreAction" Query="%%"><Action t="action_async.RunAsync"><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$CacheName%"><PostData t="server.PostData" Name="contents"><Value t="xml.XmlToText" /></PostData></Action></Action></Query></Item></Then><Else t="data_async.Calculate" Query="%%" /></Item></xtml></Component><Component id="CurrentGeoLocation" type="data_async.Data" execution="native" /></xtml><xtml ns="data_items"><Type id="Items"/><Type id="Aspect"/><Component id="Writable" type="data_items.Aspect" execution="native"><Param name="CanAcceptExternal" type="data.Boolean" script="true"/><Param name="DeleteItem" type="action.Action" script="true"/><Param name="SubsetForNewItem" type="data.Data" script="true"/><Param name="NewValueFromDetached" type="data.Data" script="true"/></Component><Component id="Filter" type="data_items.Aspect" execution="native"><Param name="Filter" type="data.Boolean" script="true" essential="true" /></Component><Component id="EasyWritable" type="data_items.Aspect"><Param name="DeleteItem" type="action.Action" script="true"/><Param name="NewDetachedItem" type="data.Data" script="true"/><Param name="SaveNewItem" type="action_async.Action" script="true"/><Param name="NewValueFromDetached" type="data.Data" script="true" Default="%%"/><xtml t="data_items.Writable"><DeleteItem t="xtml.UseParam" Param="DeleteItem"/><SubsetForNewItem t="object.Object"><Property name="Items" t="xtml.UseParam" Param="NewDetachedItem"/><Property name="ParentItems" value="%$_This%"/><Method name="Save" t="action_async.RunActions"><Action t="xtml.UseParam" Param="SaveNewItem" Input="%$_This/Items%"><Var name="ParentItems" value="%$_This/ParentItems%" /></Action><Action t="object.AddToProperty" Object="%$_This/ParentItems%" Property="Items"><Value t="xtml.UseParam" Param="NewValueFromDetached" Input="%$_This/Items%" /></Action></Method></SubsetForNewItem><NewValueFromDetached t="xtml.UseParam" Param="NewValueFromDetached" /></xtml></Component><Component id="NextLevel" type="data_items.Aspect" execution="native"><Param name="NextLevel" type="data_items.Items" script="true" essential="true" /></Component><Component id="RecursiveNextLevel" type="data_items.Aspect" execution="native"><Param name="NextLevel" type="data_items.Items" script="true" essential="true" /></Component><Component id="CommaSeparated" type="data_items.Items" execution="native"><Param name="Text" Default="%%"/><Param name="TextToItem" script="true" essential="true" /><Param name="ItemToText" script="true" essential="true"  ><Default value="%%" /></Param><Param name="ItemTypeName"/><Param name="Aspect" type="data_items.Aspect[]" script="true" /></Component><Component id="OverrideItems" type="data_items.Items" execution="native"><Param name="Items" type="data_items.Items" essential="true" /><Param name="Aspect" type="data.ItemsAspect[]" script="true" essential="true" /></Component><Component id="Aspects" type="data_items.Aspect" execution="native"><Param name="Aspect" type="data_items.Aspect[]" script="true" essential="true" /></Component><Component id="AfterSave" type="data_items.Aspect"><Param name="AfterSavingItem" type="action.Action" paramVars="OriginalData" script="true" /><Param name="AfterSavingNewItem" type="action.Action" paramVars="OriginalData" script="true" /><xtml t="action.RunActions"><Action t="object.SetMethod" Object="%$_Items%" Method="AfterSavingItem"><Xtml t="xtml.UseParam" Param="AfterSavingItem" /></Action><Action t="object.SetMethod" Object="%$_Items%" Method="AfterSavingNewItem"><Xtml t="xtml.UseParam" Param="AfterSavingNewItem" /></Action></xtml></Component><Component id="Category" type="data_items.Items" execution="native"><Param name="Name"/><Param name="Category" type="data_items.Items[]"/><Param name="Values"/></Component><Component id="GroupBy" type="data_items.Items" execution="native"><Param name="Items" essential="true" /><Param name="ItemGroup" script="true" essential="true" /><Param name="ExcludeGroups" /></Component><Component id="DoSave" type="action_async.Action" execution="native"><Param name="DataItems" type="data_items.Items" essential="true" /><Param name="Fields" type="field.Fields" essential="true"  /><Param name="OnSuccess" type="action.Action" script="true" /></Component><Component id="LoadFullItem" type="action_async.Action" execution="native"><Param name="Item" essential="true" /><Param name="DataItems" description="advanced. needed only if the node cannot load itself"/></Component><Type id="DataItemsNewItem" /><Component id="AddXmlItem" type="data_items.DataItemsNewItem" execution="native"><Param name="Parent" Default="%%"/><Param name="NewItem" codemirror="true" codemirrorType="xml" Default="&lt;xml /&gt;"/></Component></xtml><xtml ns="dataview"><Type id="DataHolder"/><Type id="DataView"/><Type id="Filter"/><Type id="GroupBy"/><Type id="SortLine"/><Type id="Ranges"/><Type id="Presentation"/><Component id="Graph" type="uiaspect.ItemListPresentation"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/chart1616.png"/><Param name="Graph" type="dataview.Presentation" script="true"/><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.CustomListPresentation"><List t="xtml.UseParam" Param="Graph"/></Aspect></xtml></Component><Component id="PivotFields" type="field.Fields" advanceddt="true" execution="native"><Param name="BasedOnField" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="FieldAspect" type="field.FieldAspect[]"/></Component><!-- Filter, Sort And GroupBy --><Component id="DataViewQuery" type="dataview.DataView" execution="native"><Param name="Filter" type="dataview.Filter[]" /><Param name="Sort" type="dataview.SortLine[]" /></Component><Component id="FilterAndSort" type="uiaspect.Aspect" category="dataview"><Param name="Filter" type="dataview.Filter[]" /><Param name="Sort" type="dataview.SortLine[]" /><Param name="TextQuery" description="E.g., Name like \'dan\' AND Age > 10 "/><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Cntr%" Property="Dataview_PreFilter"><Value t="xtml.UseParamArray" Param="Filter"/></Action><Action t="object.SetProperty" Object="%$_Cntr%" Property="Dataview_PreSort"><Value t="xtml.UseParamArray" Param="Sort"/></Action><Action t="object.SetTextProperty" Object="%$_Cntr%" Property="Dataview_PreTextQuery" Value="%$TextQuery%"/></xtml></Component><Component id="Filter" type="dataview.Filter"><Param name="FieldID" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Expression" description="1-10,21-73"/><Param name="Operator" enum="=,Like,&gt;,&lt;"><Default value="="/></Param><xtml value="%$FieldId% %$Operator% \'%$Expression%\'"/></Component><Component id="SortLine" type="dataview.SortLine" category="dataview" ><Param name="SortBy" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="SortDirection" type="enum" Options="ascending,descending"><Default value="descending"/></Param><xtml t="object.Object" SortBy="%$SortBy%" SortDirection="%$SortDirection%"/></Component><Component id="GroupByDataHolder" type="dataview.DataHolder" execution="native"><Param name="FilterBefore" type="dataview.Filter[]" script="true"/><Param name="GroupByFields" type="dynamic_enum_multi" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Field" type="field.Fields[]" light="false" script="true"/></Component><!-- Calculated Fields --><Component id="JSFormula" type="field.FieldAspect" description="Calculated By Javascript" execution="native" category="calculated"><Param name="ResultType" type="enum" Options="text,truncated_number,integer,real"><Default value="truncated_number"/></Param><Param name="Expression" description="E.g., Math.floor(%@amount%/100) "/></Component><Component id="DatePartFormula" type="field.FieldAspect" todo="should be of type formula" description="Extracts date part (year, month, week or day) of another field" execution="native" category="calculated"><Param name="Type" type="enum" Options="text,date"/><Param name="BasedOnField" type="dynamic_enum" recalc_options="true"><Options t="data.Pipeline"><Item value="%$DataHolderCntr/DataHolder/Fields%"><Var name="Preview" t="dataview.DataViewPreview"/><Var name="DataHolderCntr" t="xtml.VariableValueFromContext" Variable="DataHolderCntr" ScriptAndContext="%$Preview%" /><Var name="Cntr" t="xtml.VariableValueFromContext" Variable="_Cntr" ScriptAndContext="%$Preview%" /></Item><Item t="yesno.PassesFilter" Filter="%IsDate%"/><Item value="%Id%"/></Options></Param><Param name="Part" type="enum" Options="year,month,week,day"/><Param name="Format" description="E.g.: \'dd/mm/yy\'  \'mm/dd/yy\' \'yy-mm-dd\' \'D, dd M yy\' \'DD, dd-M-y\' \'D, d M yy\' "><Default value="dd/mm/yy"/></Param></Component><Component id="SequenceFormula" type="field.FieldAspect" todo="should be of type formula" description="Calculated formula that can use values of the previous item" execution="native" category="calculated"><Param name="Type" type="enum" Options="text,number,date" todo="remove this param and use field type"/><Param name="FirstValue" description="E.g., 0, %amount%"/><Param name="Expression" description="E.g., %$Prev/balance% + %amount%"/><Param name="RestartCondition" description="Condition to re-assign first value. E.g., %$Prev.employee% != %employee%"/></Component><!-- Preview --><Component id="FieldIDs" type="data.Data"><xtml t="data.FirstSucceeding"><Item value="%$DataHolderCntr/DataHolder/Fields/Id%"><Var name="Preview" t="dataview.DataViewPreview"/><Var name="DataHolderCntr" t="xtml.VariableValueFromContext" Variable="DataHolderCntr" ScriptAndContext="%$Preview%" /><Var name="Cntr" t="xtml.VariableValueFromContext" Variable="_Cntr" ScriptAndContext="%$Preview%" /></Item></xtml></Component><Component id="DataViewPreview" type="data.Data"><xtml t="aaeditor.CalcLocalPreviewData"><Var name="ProbeAt" value="%$_Xtml%"/><MainCircuitRunner t="bart_api.ShowPage" Page="%$PageXtml/@ID%"/><State t="aaeditor.State" TreeXtml="%$PageXtml%"><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$ProbeAt%"/></State></xtml></Component></xtml><xtml ns="date"><Component id="Now" type="data.Data" execution="native"><Param name="TimeZone" type="enum" Options="local,GMT,GMT+1,GMT+2,GMT+3,GMT+4,GMT+5,GMT+6,GMT+7,GMT+8,GMT+9,GMT+10,GMT+11,GMT-1,GMT-2,GMT-3,GMT-4,GMT-5,GMT-6,GMT-7,GMT-8,GMT-9,GMT-10,GMT-11"/><Param name="Format" type="enum" Options="milliseconds,std,with time,with time and seconds" essential="true"><Default value="milliseconds"/></Param></Component><Component id="Today" type="data.Data" ><Param name="Format" type="enum" Options="milliseconds,std,with time"><Default value="milliseconds" /></Param><xtml t="date.Now" Format="%$Format%" TimeZone="%$TimeZone%"/></Component><Component id="ExtractDatePart" type="data.Data" execution="native"><Param name="Date" essential="true"/><Param name="Part" type="enum" Options="day,week,month,year" essential="true"/><Param name="OutputFormat" description="Empty is long integer. \'dd/mm/yy\'  \'mm/dd/yy\' \'yy-mm-dd\' \'D, dd M yy\' \'DD, dd-M-y\' \'D, d M yy\' "/></Component><Component id="Time" type="field_aspect.FieldType" description="e.g. 10:40"><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="date.TimeField"/><FieldAspect t="field_aspect.TextSummary"><Text t="text.Split" Separator=" " Part="Last"/></FieldAspect></xtml></Component><Component id="Date" type="field_aspect.FieldType" description="e.g. 21/8/2011 10:20 , 21/8/2011 , 8/21/2011"><Param name="Default" type="enum" Options="none,now,now with time" /><Param name="FilterOptions" type="group.GroupsDefinition" advanced="true"/><Param name="OnUpdate" type="action.Action" script="true" advanced="true"/><Param name="DateEntry" type="data.Boolean" Default="true" /><Param name="DatePickerPopup" type="data.Boolean"><Default value="true"/></Param><Param name="ChangeDateButtons" type="data.Boolean"><Default value="true"/></Param><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.DefaultValue"><Condition t="yesno.NotEmpty" Value="%$Default%"/><Value t="data.Now"><Format t="data.IfThenElse" If="%$Default% == \'now\'" Then="std" Else="with time"/></Value></FieldAspect><FieldAspect t="field_aspect.SortMethodOld" Method="date"/><FieldAspect t="date.DateEntry" Condition="%$DateEntry%"/><FieldAspect t="field_aspect.Toolbar" RefreshOnUpdate="false"><Operations t="operation.Operations"><Operation t="date.DatePicker"><Condition t="yesno.And"><Item value="%$DatePickerPopup%"/><Item t="yesno.Not"><Of t="object.RunMethod" Object="%$_Field%" Method="Disabled"/></Item><Item t="yesno.Not"><Of t="object.RunMethod" Object="%$_Field%" Method="ReadOnly"/></Item></Condition><OnUpdate t="xtml.UseParam" Param="OnUpdate"/></Operation></Operations></FieldAspect><FieldAspect t="field.DateFilter"/><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsDate" Value="true" /></xtml></Component><Component id="DateAndTime" type="field_aspect.FieldType"><Param name="Spacing"><Default value="10px" /></Param><Param name="NowAsDefault" type="data.Boolean" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.WritableControl"><Control t="ui.Document"><Presentation t="uiaspect.Horizontal" Spacing="%$Spacing%" /><Fields t="field.Fields"><Field t="field.XmlField" Path=""><Type t="date.Date" /><FieldAspect t="field_aspect.Css" Class="aa_date_in_datetime" OnElement="cell"/><FieldAspect t="field_aspect.HideTitle" /></Field><Field t="field.XmlField" Path=""><Type t="date.Time" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.Css" Class="aa_time_in_datetime" OnElement="cell"/></Field></Fields></Control></FieldAspect><FieldAspect t="field_aspect.DefaultValue" Condition="%$NowAsDefault%"><Value t="data.Now" Format="with time" /></FieldAspect></xtml></Component><Component id="DatePicker" type="operation.Operations" category="date"><Param name="OnUpdate" type="action.Action" script="true"/><xtml t="operation.Operation" ID="datepicker" Title="pick a date" CssClass="date_picker_popup"><Action t="operation.RunXtmlAction"><Action t="dialog.TogglePopup" PopupCssClass="datepicker" OnElement="%$_Input%" WidthOption="by css class"><Contents t="ui.DatePickerAdapter" Date="%$_FieldData%"><OnUpdate t="action.RunActions"><Action t="dialog.ClosePopup"/><Action t="object.RunMethod" Object="%$_Input%" Method="SetDate"/><Action t="xtml.UseParam" Param="OnUpdate" Input="%%"/></OnUpdate></Contents></Action></Action></xtml></Component><Component id="ChangeDateButtons" type="operation.Operations" category="date"><Param name="OnUpdate" type="action.Action" script="true"/><xtml t="operation.Operations"><Operation t="operation.Operation" ID="substract" Title="One day before" Icon="%$_Images%/studio/back1616.gif"><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="action.WriteValue" To="%$_FieldData%"><Value t="ui.AddToDate" Date="%$_FieldData%" AmountToAdd="-1"/></Action><Action t="xtml.UseParam" Param="OnUpdate"/><Action t="object.RunMethod" Object="%$_Input%" Method="Refresh"/><Action t="field.RefreshDependentFields" Input="%$_Input%" /></Action></Action></Operation><Operation t="operation.Operation" ID="add" Title="One day after" Icon="%$_Images%/forward1616.gif"><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="action.WriteValue" To="%$_FieldData%"><Value t="ui.AddToDate" Date="%$_FieldData%" AmountToAdd="1"/></Action><Action t="xtml.UseParam" Param="OnUpdate"/><Action t="object.RunMethod" Object="%$_Input%" Method="Refresh"/><Action t="field.RefreshDependentFields" Input="%$_Input%" /></Action></Action></Operation></xtml></Component><Component id="TimeField" type="field.FieldAspect" category="date" execution="native" hidden="true" todo="move to time field type"/><Component id="HideTime" type="field.FieldAspect"><xtml t="field_aspect.TextSummary"><Text t="text.Split" Separator=" " Part="First"/></xtml></Component><Component id="GreaterThan" type="yesno.Boolean" execution="native"><Param name="Date" essential="true" /><Param name="GreaterThan" essential="true"/></Component></xtml><xtml ns="ui"><Component id="DatePickerAdapter" type="data.Data" execution="native"><Param name="Locale" type="ui.DateLocale"/><Param name="Date"/><Param name="OnUpdate" type="action.Action" script="true"/></Component><Component id="FormatDate" type="data.Data" execution="native"><Param name="DateFormat"/><Param name="ValueForEmpty"><Default t="text.MultiLang" Pattern="Empty"/></Param></Component><Component id="AddToDate" type="data.Data" execution="native"><Param name="Date" essential="true"><Default value="%%"/></Param><Param name="AmountToAdd" essential="true"/><Param name="Interval" type="enum" Options="day,hour,minute,second" essential="true"><Default value="day"/></Param></Component><type id="DateLocale" type="enum"><value>sq (Albanian (Gjuha shqipe))</value><value>ar (Arabic (&#8235;(&#1604;&#1593;&#1585;&#1576;&#1610;)</value><value>hy (Armenian (&#1344;&#1377;&#1397;&#1381;&#1408;&#1381;&#1398;))</value><value>bg (Bulgarian (&#1073;&#1098;&#1083;&#1075;&#1072;&#1088;&#1089;&#1082;&#1080; &#1077;&#1079;&#1080;&#1082;))</value><value>ca (Catalan (Catal))</value><value>zh-CN (Chinese Simplified (&#31616;&#20307;&#20013;&#25991;))</value><value>zh-TW (Chinese Traditional (&#32321;&#39636;&#20013;&#25991;))</value><value>hr (Croatian (Hrvatski jezik))</value><value>cs (Czech)</value><value>da (Danish (Dansk))</value><value>nl (Dutch (Nederlands))</value><value>eo (Esperanto)</value><value>fa (Farsi/Persian (&#8235;(&#1601;&#1575;&#1585;&#1587;&#1740;)</value><value>fi (Finnish (suomi))</value><value>fr (French)</value><value>de (German (Deutsch))</value><value>el (Greek (&#917;&#955;&#955;&#951;&#957;&#953;&#954;&#940;))</value><value>he (Hebrew (&#8235;(&#1506;&#1489;&#1512;&#1497;&#1514;)</value><value>hu (Hungarian (Magyar))</value><value>is (Icelandic)</value><value>id (Indonesian (Bahasa Indonesia))</value><value>it (Italian (Italiano))</value><value>ja (Japanese (&#26085;&#26412;&#35486;))</value><value>ko (Korean (&#54620;&#44397;&#50612;))</value><value>lv (Latvian )</value><value>lt (Lithuanian (lietuviu kalba))</value><value>ms (Malaysian (Bahasa Malaysia))</value><value>no (Norwegian (Norsk))</value><value>pl (Polish (Polski))</value><value>pt-BR (Portuguese/Brazilian )</value><value>ro (Romanian )</value><value>ru (Russian (&#1056;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;))</value><value>sr (Serbian (&#1089;&#1088;&#1087;&#1089;&#1082;&#1080; &#1112;&#1077;&#1079;&#1080;&#1082;))</value><value>sr-SR (Serbian (srpski jezik))</value><value>sk (Slovak (Slovencina))</value><value>sl (Slovenian (Slovenski Jezik))</value><value>es (Spanish )</value><value>sv (Swedish (Svenska))</value><value>th (Thai (&#3616;&#3634;&#3625;&#3634;&#3652;&#3607;&#3618;))</value><value>tr (Turkish)</value><value>uk (Ukranian (&#1059;&#1082;&#1088;&#1072;&#1111;&#1085;&#1089;&#1100;&#1082;&#1072;))</value></type><Component id="DayOfWeek" type="data.Data" execution="native"><Param name="DateFormat" type="enum"><Default value="dd/mm/yy"/><value>dd/mm/yy</value><value>mm/dd/yy</value><value>yy-mm-dd</value><value>D, dd M yy</value><value>DD, dd-M-y</value><value>D, d M yy</value><value>D, d M y</value></Param></Component></xtml><xtml ns="debugui"><Component id="ComboMasterDetails" type="ui.Control"><Param name="Title" /><Param name="Items" /><Param name="ItemText" script="true" Default="%%" /><Param name="DetailsControl" type="ui.Control" script="true" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" /><xtml t="ui.ItemList"><Items t="data_items.Items" Items="%$Items%" /><Presentation t="uiaspect.PickList" Title="%$Title%" AutoSelectFirst="true" ShowTitle="true"><ItemText t="xtml.UseParam" Param="ItemText" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></Presentation><Aspect t="uiaspect.ItemDetails" Transactional="true"><OpenIn t="uiaspect.DetailsInFixedLocation" Location="bottom" /></Aspect><Aspect t="uiaspect.BottomLocation" /><Field t="field.CustomControl"><Control t="xtml.UseParam" Param="DetailsControl" /></Field></xtml></Component><Component id="Data" type="ui.Control"><xtml t="field.ShowFieldControl"><Data t="xml.Xml" /><Field t="field.Layout"><Field t="field.Field" FieldData="%!@data%" ID="debugui_data" Title="Data" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="false"            RecalculateForEachCell="false"><Options t="picklist.DynamicOptions" OptionCodeByIndex="" OptionLabel="%%" OptionCode="%%"><Options t="data.List"><Item t="xtml.GlobalVariables" /><Item t="xtml.DebugDataVariables" /><Item t="xtml.ServerDataVariables" /><Item value="Dialog Data"><Condition t="yesno.NotEmpty" Data="%$TopDialogData%" /></Item></Options></Options><ControlStyle t="picklist.NativeCombo" /></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="debugui_data_contents" RefreshOn="every click"            RefreshScope="screen" /><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this>select { width: 250px; padding:2px; }]]></GlobalCss></FieldAspect></Field><Field t="field.Field" ID="debugui_data_contents" Title="Contents" ReadOnlyText=""><FieldData t="data.Pipeline"><Item t="data.Switch" Data="%@data%"><Case If="Dialog Data" Then="%$TopDialogData%" /><Default t="data.FirstSucceeding"><Item t="xtml.DebugVariableValue" Variable="%%" /><Item t="data.VariableValue" Variable="%%" /></Default></Item><Item t="xml.XmlToText" PrettyPrint="true" /></FieldData><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Height="400px" Width="100%" /></Type><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this textarea { font-size: 13px;}]]></GlobalCss></FieldAspect></Field></Field></xtml></Component><Component id="ShowAll" type="ui.Control"><xtml t="ui.List" Class="debugui"><Control t="ui.Document"><Var name="TraceCount" t="data.Pipeline"><Item t="debugui.Traces"/><Aggregator t="data.Count"/></Var><Presentation t="uiaspect.TabControl"><KeepSelectedTab t="uiaspect_config.None"/></Presentation><Fields t="field.Fields"><Field t="field.CustomControl" Title="Traces (%$TraceCount%)" Condition="%$TraceCount% &gt; 0"><Control t="field.ShowFieldControl"><Data t="xml.Xml"/><Field t="field.Layout"><Field t="field.Field" FieldData="%!@trace%" ID="debugui_trace" Title="Trace" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.DynamicOptions" OptionCodeByIndex="" OptionLabel="%%" OptionCode="%%"><Options t="data.Pipeline"><Item t="debugui.Traces"/><Item value="%counter% - %id%"/></Options></Options><ControlStyle t="picklist.NativeCombo"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="debugui_trace_contents" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this>select { width: 700px; padding:2px; margin-bottom:5px;}]]></GlobalCss></FieldAspect></Field><Field t="field.PropertySheet" ID="debugui_trace_contents" Title="Contents" ReadOnlyText=""><FieldAspect t="field_aspect.FieldData"><FieldData t="data.Pipeline"><Var name="_SelectedTrace" value="%@trace%"/><Item t="debugui.Traces"/><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsEqual" Item1="%$_SelectedTrace%" Item2="%counter% - %id%"/></Item></FieldData></FieldAspect><Field t="field.CustomControl" ShowTitle="true" Title="Input"><Control t="debugui.RuntimeObjectControl" Object="%%" Data="%input%"/></Field><Field t="field.CustomControl" ShowTitle="true" Title="output"><Control t="debugui.RuntimeObjectControl" Object="%%" Data="%output%"/></Field><Field t="field.Field" FieldData="%stack%" Title="Stack"><Type t="field_aspect.Picklist"><Options t="picklist.DynamicOptions"><Options t="text.Split"/></Options></Type></Field><Field t="field.CustomControl" ShowTitle="true" Title="variables"><Control t="debugui.ComboMasterDetails" Items="%context%" ItemText="%name%"><DetailsControl t="debugui.RuntimeObjectControl" Object="%value%"/></Control></Field><Field t="field.CustomControl" ShowTitle="true" Title="params"><Control t="debugui.ComboMasterDetails" Items="%params%" ItemText="%name%"><DetailsControl t="debugui.RuntimeObjectControl" Object="%value%"/></Control></Field><Style t="group.PropertySheet"/><Operations t="operation.Operations"/><FieldAspect t="scroll.Scroll"><Scroll t="scroll.BrowserScrollbar"/><Height t="scroll.FixedHeight" Height="400px"/><Width t="scroll.FixedWidth" Width="100%"/></FieldAspect></Field><Field t="field.Layout"><Field t="field.Button" Title="Clear Traces"><Action t="action.RunActions"><Action t="debugui.ClearTraces"/><Action t="dlg.CloseDialog"/></Action></Field><Layout t="layout.Default"/><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this { padding: 10px 0 0 0; }]]></GlobalCss></FieldAspect></Field><Layout t="layout.Default"/></Field></Control></Field><Field t="field.CustomControl"><Title value="Logs%$ErrorCount%"><Var name="Count" t="data.Pipeline"><Item t="xtml.LogContent" Level="error"/><Aggregator t="data.Count"/></Var><Var name="ErrorCount" value=" (%$Count% errors)" Condition="%$Count% != 0"/></Title><Control t="field.ShowFieldControl"><Data t="xml.Xml"/><Field t="field.Layout"><Field t="field.Field" FieldData="%!@log%" ID="debugui_log" Title="Log" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.DynamicOptions" OptionCodeByIndex="" OptionLabel="%%" OptionCode="%%"><Options t="xtml.ActiveLogLevels"/></Options><ControlStyle t="picklist.NativeCombo"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="debugui_log_contents" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this>select { width: 250px; padding:2px;}]]></GlobalCss></FieldAspect></Field><Field t="field.Field" ID="debugui_log_contents" Title="Contents" ReadOnlyText=""><FieldData t="data.Pipeline"><Item t="text.FirstSucceeding"><Item t="xtml.LogContent" Level="%@log%"/><Item value="No logs available"/></Item><Aggregator t="text.Concat" Separator="&#xd;"/></FieldData><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Height="400px" Width="100%"/></Type></Field><Field t="field.Layout"><Field t="field.Button" Title="Clear Logs"><Action t="action.RunActions"><Action t="debugui.ClearLogs"/><Action t="dlg.CloseDialog"/></Action></Field><Field t="field.Button" Title="Inspect..."><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="debugui.CaptureSelect"><OnSelect t="dlg.OpenDialog" Title="Content Viewer"><Contents t="debugui.ControlDataBrowser"/><Feature t="dlg.AlwaysLTR"/></OnSelect></Action></Action><Style t="button.JBartButton"/></Field><Field t="field.Button" Title="Memory Leaks Detector..."><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="debugui.MemoryLeaksDetector"/></Action></Field><Layout t="layout.HorizontalHtmlTable" Spacing="5px"/><FieldAspect t="field_aspect.Css" Inline="margin-top:10px;"/></Field></Field></Control></Field><Field t="field.CustomControl" Title="Data"><Control t="debugui.Data"/></Field></Fields></Control></xtml></Component><Component id="MemoryLeaksData" type="data.Data" execution="native" /><Component id="MemoryLeaksDetector" type="action.Action" light="false"><xtml t="dlg.OpenDialog" Title="Run Memory Leaks Detector"><Var name="MemoryLeakSettings" t="debugui.MemoryLeaksData" /><Feature t="dlg.Buttons"><Buttons t="dlg.OkCancel" OkLabel="Run" /></Feature><Contents t="ui.Document" Data="%$MemoryLeakSettings%"><Presentation t="uiaspect.PropertySheet" /><Operations t="operation.Operations" /><Fields t="field.Fields"><Field t="field.Field" FieldData="%!@top_object%" ID="top_object" Title="Top Object" ReadOnlyText=""><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.Description" Description="javascript top object (e.g. window, ajaxart)" /><FieldAspect t="field_aspect.DefaultValue" Value="window" /></Field><Field t="field.Field" FieldData="%!@depth%" ID="depth" Title="Depth" ReadOnlyText=""><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.Description" Description="Recursion level depth" /><FieldAspect t="field_aspect.DefaultValue" Value="3" /></Field><Field t="field.Field" FieldData="%!@output%" ID="count_only" Title="Output" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="false"              RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="object count,detailed" /></Options></Type></Field></Fields></Contents><RunOnOK t="debugui.RunMemoryLeaksCounter" Data="%$MemoryLeakSettings%" TopJsObject="%@top_object%" Depth="%@depth%"        Output="%@output%" /></xtml></Component><Component id="RunMemoryLeaksCounter" type="action.Action" execution="native"  light="false"><Param name="TopJsObject" /><Param name="Depth" /><Param name="Output" /><NativeHelper name="ShowResults" t="dlg.OpenDialog" Title="Object Count Results"><Contents t="ui.Document"><Fields t="field.Fields"><Field t="field.Text" Text="%$PrevDomSize%" Title="Last Dom Size" HideTitle="false" /><Field t="field.Text" Text="%$DomSize%" Title="Dom Size" HideTitle="false" /><Field t="field.Text" Text="%$PrevCount%" Title="Last Count" HideTitle="false" /><Field t="field.Text" Text="%$TotalCount%" Title="Total Count" HideTitle="false" /><Field t="field.Field"><FieldData t="data.Pipeline"><Item value="%$Results%" /><Aggregator t="text.Concat" Separator="&#xd;" /></FieldData><Type t="field_aspect.MultiLineText" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.Css" Inline="font-size: 11px;padding: 3px; width: 600px !important; height: 500px;" /></Field></Fields></Contents></NativeHelper></Component><Component id="OpenDebugUi" type="action.Action"  light="false"><xtml t="action.RunActions"><Var name="TopDialogData" t="dialog.TopDialogContent" Part="Data" /><Action t="dlg.OpenDialog" Title="Content Viewer"><Contents t="debugui.ShowAll" /><Feature t="dlg.AlwaysLTR" /><Style t="dialog_style.DefaultDialog" CssOnTop="width: 80\\%; overflow-x: hidden;" /><Feature1 t="dlg.ZIndex" ZIndex="3100" /></Action></xtml></Component><Component id="ControlDataBrowser"><Param name="Element"><Default value="%%" /></Param><xtml t="debugui.ComboMasterDetails"><Items t="data.List"><Item value="Data" /><Item t="data.Pipeline"><Item t="ui.ControlData" Type="all" /><Item t="xtml.VariablesOfContext" ScriptAndContext="%%" /></Item></Items><DetailsControl t="ui.IfThenElse"><Data t="data.Pipeline"><Item t="data.Switch"><Case If="Data"><Then t="ui.ControlData" Type="data" Control="%$Element%" /></Case><Default t="xtml.VariableValueFromContext" Variable="%%"><ScriptAndContext t="ui.ControlData" Type="all" Control="%$Element%" /></Default></Item></Data><If t="xml.IsElement" /><Then t="xmlui.ReadWriteXml" /><Else t="ui.HtmlControl"><Html t="debugui.DumpObject" /></Else></DetailsControl></xtml></Component><Component id="CaptureSelect" execution="native"><Param name="OnSelect" type="action.Action" script="true" /></Component><Component id="DumpObject" execution="native" hidden="true" /><Component id="Traces" execution="native" visibility="internal" /><Component id="ClearTraces" execution="native" visibility="internal" /><Component id="ClearLogs" execution="native" visibility="internal" /><Component id="GlobalProfilingResult"><xtml t="ui.Section" Title="Total: %@total%ms"><Data t="xml.TextToXml" /><Control t="ui.ItemList"><Presentation t="uiaspect.Table" /><Var name="Total" value="%@total%" /><Items t="data_items.Items"><Items t="data.Pipeline"><Item value="%*%" /><Aggregator t="data.Sort" SortBy="%@total%" Order="Descending" Type="number" /></Items></Items><Fields t="field.Fields"><Field t="field.XmlField" Path="@id" Title="id" /><Field t="field.XmlField" Path="@calls" Title="calls" /><Field t="field.Field1" Title="total (ms)" ShowField="true"><FieldData value="%@total%"><Var name="Perc" t="data.Math" Expression="%@total% * 100 / %$Total%" RoundResult="round" /></FieldData></Field><Field t="field.Field1" Title="average" ShowField="true"><FieldData t="data.Math" Expression="%@total% / %@calls%" RoundResult="round" /></Field></Fields></Control></xtml></Component><Component id="RuntimeObjectControl" type="ui.Control" execution="xtml"><Param name="Object"><Default value="%%" /></Param><xtml t="data.Pipeline"><Item value="%$Object%" /><Aggregator Class="aaeditor_runtime_object_control" t="ui.Switch"><Value t="data.RuntimeObjectType" /><Case><IfCondition t="yesno.IsMultipleValue" Value="%$Object%" /><Then t="ui.ItemList"><Presentation t="uiaspect.Table" /><Items t="data_items.Items"><Items t="data.Pipeline"><Item value="%$Object%" /><Aggregator t="data.Subset" From="1" Count="4" /></Items></Items><Fields t="field.Fields"><Field t="field.CustomControl" ShowTitle="true"><Control t="aaeditor.RuntimeObjectControl" /><Title t="data.Pipeline"><Item value="%$Object%" /><Aggregator t="data.Count" /><Aggregator value="%% items" /></Title></Field></Fields></Then></Case><Case If="text"><Then t="ui.Text" Text="%%" /></Case><Case If="html"><Then t="data.Same" /></Case><Case If="xml"><Then t="tree.Tree" RootItems="%%" AutoExpandFirstLevel="false" NextLevel="%*%" Class="noborder" Height="100%"            ItemImage="%$_Images%/default1616.gif"><ItemControl t="aaeditor.XmlElementInTree" /></Then></Case><Case If="struct"><Then t="tree.Tree" AutoExpandFirstLevel="false" ItemImage="%$_Images%/studio/integer.gif" Borderless="true"><RootItems t="data.StructEntryNames" /><Var name="Input" /><NextLevel t="data.Struct"><Var name="Val" value="%$Input/{}%" /><Condition t="yesno.And"><Item t="yesno.IsEmpty" Value="%StructValue%" /><Item t="yesno.ItemsNotEqual" Item1="text"><Item2 t="data.RuntimeObjectType" Data="%$Val%" /></Item></Condition><Item Name="StructValue" Value="%$Val%" /></NextLevel><ItemControl t="ui.Switch"><Var name="Val" value="%$Input/{}%" /><Case><IfCondition t="yesno.NotEmpty" Value="%StructValue%" /><Then t="aaeditor.RuntimeObjectControl" Object="%StructValue%" /></Case><Case><IfCondition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$Val%" /><Item t="yesno.ItemsEqual" Item1="text"><Item2 t="data.RuntimeObjectType" Data="%$Val%" /></Item></IfCondition><Then t="ui.Text" Text="%%: %$Val%" /></Case><Default t="ui.Text" Text="%%" /></ItemControl><ItemControl1 t="ui.List"><Control t="ui.Text" Text="%%: " /><Control t="aaeditor.RuntimeObjectControl" Object="%$Input/{}%" TODO="prevent endless loop" /><Layout t="ui.SpanList" /></ItemControl1></Then></Case><Case If="context"><Then t="tree.Tree" ItemImage="%$_Images%/studio/yesno1616.gif"><RootItems t="data.List"><Item value="__vars" /><Item value="__params" /></RootItems><Var name="Input" /><ItemControl t="ui.IfThenElse"><If t="text.StartsWith" With="__" /><Then t="ui.Text"><Text t="text.RemovePrefix" Prefix="__" /></Then><Else t="aaeditor.RuntimeObjectControl" /></ItemControl><NextLevel t="data.Switch"><Case If="__vars"><Then t="data.Pipeline"><Item t="xtml.PartsOfContext" Context="%$Input%" Part="Variable Names" /><Item value="__%%" /></Then></Case><Case If="__params"><Then t="data.Pipeline"><Item t="xtml.PartsOfContext" Context="%$Input%" Part="Param Names" /><Item value="__%%" /></Then></Case><Case><IfCondition t="text.StartsWith" With="__" /><Then t="xtml.RunXtml" Context="%$Input%"><Xtml t="data.Pipeline"><Item t="text.RemovePrefix" Prefix="__" /><Item value="\\%$%%\\%" /></Xtml></Then></Case></NextLevel></Then></Case><Case If="function"><Then t="ui.Text" Text="%%" /></Case><Default t="aaeditor.RuntimeObjectSelector" /></Aggregator></xtml></Component><Component id="OpenComponent" type="action.Action"  light="false"><xtml t="dlg.OpenDialog" Title="Open Component"><Contents t="ui.List"><Control t="field.ShowFieldControl" Item="%%"><Field t="field.XmlField" ID="component"><FieldAspect t="field_aspect.Picklist"><Options t="picklist.DynamicOptions" OptionLabel="%%" OptionCode="%%"><Options t="xtml.AllComponentIds" /></Options></FieldAspect></Field></Control><Control t="ui.ButtonOld" Text="edit as xml ..." Image="%$_Images%/studio/xml1616.gif"><Style t="ui.ButtonAsHyperlink" /><OnClick t="xmlui.ShowXmlDialog" Title="%$DialogWorkingData%"><Var name="Id" value="%%" /><Var name="Original" t="xtml.ComponentDefinition" ID="%$Id%" /><Xml value="%$Original%" /><OnUpdate t="action.RunActions"><Action t="debugui.SetComponent" ComponentId="%$Id%"><ComponentXml t="data.Pipeline"><Item t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><xml file="%$Original/../@file%" /></Xml><Change t="xml.AddChildren"><Children t="xml.TextToXml" /></Change></Item><Item value="%*%" /></ComponentXml></Action><Action t="object.RunMethod" Method="MarkComponentIdAsModified" Input="%$Id%"><Object t="xtml_dt_tree.SaveManager" /></Action><Action t="object.RunMethod" Method="Save"><Object t="xtml_dt_tree.SaveManager" /></Action><Action t="action.WriteToCookie" Cookie="aa_last_edit_component" Value="%$Id%" /></OnUpdate></OnClick></Control><Control t="ui.ButtonOld" Text="AA-Editor Playground" Image="%$_Images%/studio/balls1616.png"><OnClick t="xtml_dt_tree.OpenScriptEditor" Xtml="%$Xtml%" XtmlType="data.Data" Title="Play Ground"><Var name="_ShowNonJBartComponents" value="true" /><Var name="Xtml" t="xml.Xml"><xml t="data.Pipeline" /></Var><GlobalPreview t="data.FirstSucceeding"><Var name="Obj" t="xtml.RunXtml" Xtml="%$Xtml%" Input=" " /><Item t="aaeditor.RuntimeObjectControl" Object="%$Obj%" /><Item t="debugui.RuntimeObjectControl" Object="%$Obj%" /><Item t="ui.Text" Text="%$Obj%" /></GlobalPreview><MainCircuit t="xtml.RunXtml" Xtml="%$Xtml%"><Input value=" " /></MainCircuit></OnClick><Style t="ui.ButtonAsHyperlink" /></Control></Contents><DialogData t="data.WritableText"><DefaultValue t="data.ValueFromCookie" Cookie="aa_last_edit_component" /></DialogData><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Var name="Id" value="%$DialogOriginalData%" /><Var name="Component" t="xtml.ComponentDefinition" ID="%$Id%" /><Var name="TopCircuit" t="aaeditor.CalculateTopCircuit" Xtml="%$Component/xtml%" /><Action t="action.WriteToCookie" Cookie="aa_last_edit_component" Value="%$Id%" /><Action t="xtml_dt_tree.OpenScriptEditor" Xtml="%$Component%"><Var name="_ShowNonJBartComponents" value="true" /><GlobalPreview t="object.RunMethod" Object="%$TopCircuit%" Method="GlobalPreview" /><MainCircuit t="object.RunMethod" Object="%$TopCircuit%" Method="RunCircuit" /></Action></RunOnOK></xtml></Component><Component id="SetComponent" type="action.Action" execution="native" light="false"><Param name="ComponentXml" /><Param name="ComponentId" /></Component></xtml><xtml ns="dialog"><Type id="Dialog" Icon="%$_Images%/studio/dialog1616.gif"/><Type id="DialogStyle" /><Type id="DialogButton" /><Component id="DialogButton" type="dialog.DialogButton"><Param name="Text" /><Param name="Image" /><Param name="OnClick" type="action.Action" script="true" paramVars="ControlElement"/><Param name="Style" type="ui.ButtonStyle" script="true" ><Default t="ui.StandardButton"/></Param><xtml t="object.Object"><Method name="Control" t="ui.ButtonOld" Text="%$Text%" Image="%$Image%"><Style t="xtml.UseParam" Param="Style" /><OnClick t="xtml.UseParam" Param="OnClick" Input="%$DialogWorkingData%"/></Method></xtml></Component><Component id="OpenDialog" type="action.Action" execution="xtml" light="false"><Param name="Dialog" type="dialog.Dialog" script="true" essential="true"><Default t="dialog.Dialog" /></Param><xtml t="xtml.UseParam" Param="Dialog"><Var name="OpenDialog" value="true" /></xtml></Component><Component id="Dialog" type="dialog.Dialog" execution="xtml"><Param name="Title" essential="true"/><Param name="DialogData" script="true"><Default value="%%" /></Param><Param name="Content" essential="true" type="ui.Control" script="true" /><Param name="AutoFocus" script="true" /><Param name="RunOnOK" essential="true" type="action.Action" script="true" /><Param name="RunOnClose" type="action.Action" script="true" /><Param name="RunOnDelete" type="action.Action" script="true" /><Param name="CloseOnEnter" type="data.Boolean"><Default value="true" /></Param><Param name="CloseOnEsc" type="data.Boolean"><Default value="true" /></Param><Param name="Style" type="dialog.DialogStyle" script="true" paramVars="DialogContext"><Default t="dialog.JQueryDialog" /></Param><Param name="Buttons" type="enum"><Default value="OK,Cancel" /><value>OK,Cancel</value><value>Close</value><value>OK,Cancel,Delete</value><value>OK,Cancel,Apply</value><value>None</value></Param><Param name="Height" /><Param name="Width" /><Param name="OKLabel"><Default value="OK" /></Param><Param name="CancelLabel"><Default value="Cancel" /></Param><Param name="Direction" Default="Left to Right" /><Param name="FullScreen" type="data.Boolean" /><Param name="LimitHeightToScreenSize" type="data.Boolean"><Default value="true"/></Param><Param name="NoTransaction" type="data.Boolean"><Default value="true"/></Param><Param name="AlwaysLTR" type="data.Boolean" /><Param name="RunOnCancel" type="action.Action" script="true" /><Param name="Validations" type="ui.Validation" script="true" /><Param name="BeforeClose" type="action.Action" script="true" /><Param name="DialogButton" type="dialog.DialogButton[]" /><Param name="ScreenOpacity" description="greyness of the cover behind the dialog"><Default value="0.8"/></Param><xtml t="xtml.UseParam" Param="Style" ><Var name="DialogOriginalData" /><Var name="DialogTransactionData" t="xtml.UseParam" Param="DialogData" /><Var name="DialogWorkingData" t="data.IfThenElse" If="%$NoTransaction%"><Then value="%$DialogTransactionData%" /><Else t="data.Duplicate" Data="%$DialogTransactionData%" /></Var><Var name="OriginalControlElement" value="%$ControlElement%" /><Var name="DialogContext" t="xtml.Params"><Param name="Height" value="%$Height%" /><Param name="Width" value="%$Width%" /><Param name="Title" t="text.MultiLang" Pattern="%$Title%" Dynamic="true" /><Param name="Buttons" value="%$Buttons%" /><Param name="OpenDialog" value="%$OpenDialog%" /><Param name="OKLabel" t="text.MultiLang" Dyanmic="true" Pattern="%$OKLabel%" /><Param name="CancelLabel" t="text.MultiLang" Dyanmic="true" Pattern="%$CancelLabel%" /><Param name="CloseOnEnter" value="%$CloseOnEnter%" /><Param name="CloseOnEsc" value="%$CloseOnEsc%" /><Param name="Direction" value="%$Direction%" /><Param name="FullScreen" value="%$FullScreen%" /><Param name="AlwaysLTR" value="%$AlwaysLTR%" /><Param name="Content" t="xtml.UseParam" Param="Content" Input="%$DialogWorkingData%"><Var name="AAControlMode" value="readwrite" /><Var name="_InDialog" value="true" /></Param><Param name="ScreenOpacity" value="%$ScreenOpacity%" /><Param name="LimitHeightToScreenSize" value="%$LimitHeightToScreenSize%" /><Param name="DialogButtons" value="%$DialogButton%" /><ScriptParam name="OnOK" t="action.RunActions"><Var name="ControlElement" value="%$OriginalControlElement%" /><Action t="action.WriteValue" To="%$DialogTransactionData%" Value="%$DialogWorkingData%"><Condition t="yesno.Not" Of="%$NoTransaction%" /></Action><Action t="xtml.UseParam" Param="RunOnOK" Data="%$DialogWorkingData%"><Var name="OriginalInput" value="%$DialogOriginalData%" /><Var name="_DialogContent" value="%$DialogContext/Content%" /><Var1 name="DialogContext" t="data.Empty" /></Action><Action t="xtml.UseParam" Param="RunOnClose" Data="%$DialogOriginalData%" /></ScriptParam><ScriptParam name="OnCancel" t="action.RunActions"><Var name="ControlElement" value="%$OriginalControlElement%" /><Action t="xtml.UseParam" Param="RunOnClose" Data="%$DialogOriginalData%"/><Action t="xtml.UseParam" Param="RunOnCancel" Data="%$DialogOriginalData%" /></ScriptParam><ScriptParam name="OnDelete" t="xtml.UseParam" Param="RunOnDelete" Input="%$DialogOriginalData%"><Var name="ControlElement" value="%$OriginalControlElement%" /></ScriptParam><ScriptParam name="AutoFocus" t="xtml.UseParam" Param="AutoFocus" /><ScriptParam name="Validations" t="xtml.UseParam" Param="Validations" Input="%$DialogWorkingData%" /><ScriptParam name="BeforeClose" t="xtml.UseParam" Param="BeforeClose" Input="%$DialogWorkingData%" /><ScriptParam name="DisableClose" t="yesno.Not"><Of t="validation.PassingValidations" /></ScriptParam></Var></xtml></Component><Component id="DialogContent" type="ui.Control"><Param name="Dialog" type="dialog.Dialog" script="true" /><Param name="Draggable" type="data.Boolean"><Default value="true" /></Param><xtml t="xml.WithChanges"><Xml t="xtml.UseParam" Param="Dialog"><Var name="OpenDialog" value="false" /></Xml><Change t="ui.ExecJQuery" Expression=".draggable({ cancel: \'.dialog_body\'});" Condition="%$Draggable%" /></xtml></Component><Component id="JQueryDialog" type="dialog.DialogStyle" execution="xtml" databind="true"><xtml t="ui.ControlWithAction" ><Control value="%$Dialog%" /><RunBeforeControl Condition="%$DialogContext/OpenDialog%" t="dialog.PopUpDialog" Dialog="%$Dialog%" ScreenColor="gray" ScreenOpacity="%$DialogContext/ScreenOpacity%"><RunAfterPopup t="uiaction.Focus"><RunOn t="data.FirstSucceeding"><Item t="xtml.RunXtml" Xtml="%$DialogContext/AutoFocus%" /><Item t="uiaction.FindFirstInput" /></RunOn></RunAfterPopup></RunBeforeControl><Var name="FocusCls" t="ui.AttachGlobalCss" Css="#this *:focus { outline: none; }" Name="focus_no_outline" /><Var name="Dialog" t="xml.WithChanges" ><Xml t="ui.Html" DynamicContent="true"><table class="dialog_box ajaxart dialog_content_table %$FocusCls%" style="border: none" cellspacing="0" cellpadding="0"><tr class="dialog_right_shadow_tr"  ><th class="dialog_shadow_extra_th"/><th rowspan="6" class="dialog_right_shadow_th"  ><div class="dialog_right_shadow" /></th></tr><tr><td class="dialog_title"><div class="dialog_title_close" /><div class="dialog_title_text">Title</div></td></tr><tr class="dialog_body"><td><div class="dialog_inner_body"><div class="dialog_content" /><div class="message_bar_placeholder" /></div></td></tr><tr><td class="dialog_footer"><table cellspacing="0" cellpading="0" ><tr class="aa_dialog_buttons_top"><td><span class="okbutton_placeholder" /></td><td><span class="buttons_seperator"/></td><td><span class="cancelbutton_placeholder" /></td><td><span class="buttons_seperator"/></td><td><span class="delbutton_placeholder" /></td><td><span class="applybutton_placeholder" /></td></tr></table></td></tr><tr class="dialog_bottom_shadow" ><td ><span class="dialog_bottom_outer" ><span class="dialog_bottom_inner" ></span></span></td></tr></table></Xml><Var name="OKButton" t="ui.OKButton" Text="%$DialogContext/OKLabel%" Name="dialog_ok_button" Class="dialog_button ok_button"  ><Style t="dialog.DialogButtonStyle" /><ExtraValidations t="xtml.RunXtml" Xtml="%$DialogContext/Validations%"  /><OnClick t="action_async.RunAsync"><Condition t="yesno.Not"><Of t="object.RunMethod" Object="%$DialogContext%" Method="DisableClose" /><RunOn t="dialog.TopDialogContent" /></Condition><Action t="xtml.RunXtml" Xtml="%$DialogContext/BeforeClose%"><RunOn1 t="dialog.TopDialogContent" /></Action><OnSuccess t="dialog.CloseDialog" CloseType="OK" IgnoreAAEditor="false" /></OnClick></Var><Change t="xml.AddChildren" CloneChildren="false"><Data t="ui.ElementOfClass" Cls="message_bar_placeholder" /><Children t="ui.MessageBar" Type="validation" /></Change><Change t="xml.AddChildren"><Data t="ui.ElementOfClass" Cls="aa_dialog_buttons_top" /><Children t="data.Pipeline"><Item value="%$DialogContext/DialogButtons%" /><Item t="xml.WithChanges"><Xml t="ui.Html"><td/></Xml><Change t="xml.AddChildren"><Children t="object.RunMethod" Method="Control" /></Change></Item></Children></Change><Change t="xml.AddChildren" CloneChildren="false" Children="%$OKButton%"><Condition t="yesno.Contains" Data="%$DialogContext/Buttons%"><Text value="OK"/></Condition><Data t="ui.ElementOfClass" Cls="okbutton_placeholder" /></Change><Change t="xml.AddChildren" CloneChildren="false"><Condition t="yesno.Contains" Data="%$DialogContext/Buttons%"><Text value="Cancel"/></Condition><Data t="ui.ElementOfClass" Cls="cancelbutton_placeholder" /><Children t="ui.ButtonOld" Text="%$DialogContext/CancelLabel%" Class="CloseButton dialog_button "><OnClick t="dialog.CloseDialog" CloseType="Cancel" IgnoreAAEditor="false"/><Style t="dialog.DialogButtonStyle" /></Children></Change><Change t="xml.AddChildren" CloneChildren="false"><Condition t="yesno.Contains" Data="%$DialogContext/Buttons%"><Text value="Close"/></Condition><Data t="ui.ElementOfClass" Cls="cancelbutton_placeholder" /><Children t="ui.ButtonOld" Text="Close" Class="dialog_button CloseButton"><Style t="dialog.DialogButtonStyle" /><OnClick t="action.RunActions"><Condition t="yesno.Not"><Of t="object.RunMethod" Object="%$DialogContext%" Method="DisableClose" /><RunOn t="dialog.TopDialogContent" /></Condition><Action t="xtml.RunXtml" Xtml="%$DialogContext/BeforeClose%"><RunOn t="dialog.TopDialogContent" /></Action><Action t="dialog.CloseDialog" CloseType="OK" IgnoreAAEditor="false"/></OnClick></Children></Change><Change t="xml.AddChildren" CloneChildren="false"><Condition t="yesno.Contains" AllText="%$DialogContext/Buttons%"><Text value="Delete"/></Condition><Data t="ui.ElementOfClass" Cls="delbutton_placeholder" /><Children t="ui.ButtonOld" Text="Delete" Class="dialog_button"><Style t="dialog.DialogButtonStyle" /><OnClick t="action.RunActions"><Action t="dialog.CloseDialog" CloseType="Delete" IgnoreAAEditor="false"/></OnClick></Children></Change><Change t="xml.AddChildren" CloneChildren="false"><Condition t="yesno.Contains" AllText="%$DialogContext/Buttons%"><Text value="Apply"/></Condition><Data t="ui.ElementOfClass" Cls="applybutton_placeholder" /><Children t="ui.ButtonOld" Text="Apply" Class="dialog_button"><Style t="dialog.DialogButtonStyle" /><OnClick t="action.RunActions"><Action t="xtml.RunXtml" Xtml="%$DialogContext/OnOK%" /></OnClick></Children></Change><Change t="ui.SetCssProperty" Property="height"><Data t="ui.ElementOfClass" Cls="dialog_box" /><Value t="data.IfThenElse" If="%$DialogContext/FullScreen%" Else="%$DialogContext/Height%" Then="95%" /></Change><Change t="ui.SetCssProperty" Property="width"><Data t="ui.ElementOfClass" Cls="dialog_box" /><Value t="data.IfThenElse" If="%$DialogContext/FullScreen%" Else="%$DialogContext/Width%" Then="95%" /></Change><Change t="ui.SetCssProperty" Property="max-height" Condition="%$DialogContext/LimitHeightToScreenSize%"><Data t="ui.ElementOfClass" Cls="dialog_inner_body" /><Value t="ui.ScreenSize" Axis="height" Margin="120" AsHtmlString="true" /></Change><Change t="ui.SetCssProperty" Property="max-width"><Data t="ui.ElementOfClass" Cls="dialog_inner_body" /><Value t="ui.ScreenSize" Axis="width" Margin="50" AsHtmlString="true" /></Change><Change t="xml.UpdateInnerText" NewValue="%$DialogContext/Title%"><Data t="ui.ElementOfClass" Cls="dialog_title_text" /></Change><Change t="xml.AddChildren" CloneChildren="false" Children="%$DialogContext/Content%"><Data t="ui.ElementOfClass" Cls="dialog_content" /></Change><Change t="uiaction.AddClass" RunOn="%%" Cls="right2left"><Condition t="yesno.EqualsTo" Data="%$DialogContext/Direction%" To="Right to Left" /></Change><Change t="ui.OnKeyDown" RunOn="%%"><Condition t="yesno.EqualsTo" Data="%$DialogContext/CloseOnEnter%" To="true" /><Action t="uiaction.ButtonClick"><RunOn value="%$OKButton%" /><Condition t="yesno.And"><Item t="yesno.EqualsTo" Data="%$KeyPressed%" To="enter" /><Item t="yesno.Not" Of="%$EventTargetIsTextArea%" /></Condition></Action></Change><Change t="xml.AddChildren" CloneChildren="false"><Data t="ui.ElementOfClass" Cls="dialog_title_close" /><Children t="ui.ButtonOld" Image="%$_Images%/close.png" Class="dialog_close_image" ><OnClick t="dialog.CloseDialog" CloseType="Cancel" IgnoreAAEditor="false"/><Style t="ui.ButtonAsHyperlink" /></Children></Change><Change1 t="ui.ExecJQuery"     Expression=".keydown(function(event){        if(event.keyCode == 13) {        	var ok_button = jQuery(this).find(\'#dialog_ok_button\');        	if (ok_button.length > 0)        		ajaxart_runevent(ok_button[0],\'ButtonContext\',\'OnClick\')        }       });"><Condition t="yesno.EqualsTo" Data="%$DialogContext/CloseOnEnter%" To="true" /></Change1><Change t="ui.ExecJQuery"     Expression=".keydown(function(event){        if(event.keyCode == 27) {         ajaxart_runevent(this,\'DialogContext\',\'OnCancel\');         aa_remove(ajaxart.dialog.closeDialog(this),true);        }       });" ><Condition t="yesno.EqualsTo" Data="%$DialogContext/CloseOnEsc%" To="true" /></Change></Var></xtml></Component><Component id="PopUpDialog" type="action.Action" execution="native" hidden="true" light="false"><Param name="Dialog" /><Param name="ScreenColor" /><Param name="ScreenOpacity" /><Param name="RunAfterPopup" type="action.Action" script="true" /><Param name="AlwaysLTR" type="data.Boolean"><Default value="%$DialogContext/AlwaysLTR%" /></Param></Component><Component id="CloseDialog" type="action.Action" execution="native"><Param name="CloseType" type="enum"><Default value="Cancel" /><value>OK</value><value>Cancel</value><value>Delete</value></Param><Param name="IgnoreAAEditor" type="data.Boolean"><Default value="true"/></Param></Component><Component id="TopDialogContent" type="data.Data" execution="native"><Param name="Part" type="enum" Default="Content" Options="Content,Title,Data,All"/></Component><Component id="ContentsOfOpenPopup" type="ui.Control" execution="native" /><Component id="ElementPopupOpensOn" type="data.Data" execution="native" /><Component id="SingleQuestionDialog" type="dialog.Dialog"><Param name="Title" /><Param name="InitialValue" /><Param name="Question" /><Param name="RunOnOK" type="action.Action" script="true" /><xtml t="dialog.Dialog" Title="%$Title%"><RunOnOK t="xtml.UseParam" Param="RunOnOK" Input="%$DialogWorkingData%" /><DialogData t="data.WritableText" DefaultValue="%$InitialValue%" /><Content t="ui.List"><Control t="ui.Text"><Text t="text.MultiLang" Pattern="%$Question%" Dynamic="true"/></Control><Control t="ui.TextControl" Width="100%" /></Content></xtml></Component><Component id="AskForConfirmation" type="action.Action"><Param name="Title"/><Param name="Question"/><Param name="RunOnOK" type="action.Action" script="true"/><Param name="SkipConfirmation" type="data.Boolean" script="true"/><Param name="YesLabel"><Default t="text.MultiLang" Pattern="Yes"/></Param><Param name="NoLabel"><Default t="text.MultiLang" Pattern="No"/></Param><Param name="Mode" type="enum"><Default value="other"/><value>confirm delete</value><value>other</value></Param><Param name="RunOnClose" type="action.Action" script="true"/><Param name="RunOnCancel" type="action.Action" script="true"/><Param name="QuestionAsHtml" type="data.Boolean"/><Param name="DialogStyle" type="dialog_style.Style" script="true"><Default t="dialog_style.DefaultDialog" /></Param><Param name="DialogFeature" type="dlg.DialogFeature[]" script="true" /><xtml t="action.IfThenElse"><If t="xtml.UseParam" Param="SkipConfirmation"/><Then t="action.RunActions"><Action t="xtml.UseParam" Param="RunOnOK"/><Action t="xtml.UseParam" Param="RunOnClose"/></Then><Else t="action.RunActions"><Var name="OriginalInput" /><Action t="dlg.OpenDialog"><Title value="%$Title%"/><Contents Class="confirmation_question" t="ui.Text" HtmlContents="%$QuestionAsHtml%" style="display:block;font-size:13px;margin:6px 16px;"><Text t="text.Translate" Text="%$Question%"/></Contents><RunOnOK t="xtml.UseParam" Param="RunOnOK" Input="%$OriginalInput%"/><Style t="xtml.UseParam" Param="DialogStyle" /><Feature t="dlg.HandleEvents"><OnClose t="xtml.UseParam" Param="RunOnClose"/><OnCancel t="xtml.UseParam" Param="RunOnCancel"/></Feature><Feature t="dlg.OKOnEnter"/><Feature t="dlg.CloseOnEsc"/><Feature t="dlg.Buttons"><Buttons t="dlg.OkCancel"><OkLabel value="%$YesLabel%"/><CancelLabel value="%$NoLabel%"/></Buttons></Feature><Feature t="dlg.DialogClass"><CssClass value="confirm_delete"><Condition t="yesno.ItemsEqual" Item1="%$Mode%" Item2="confirm delete"/></CssClass></Feature><Feature t="xtml.UseParamArray" Param="DialogFeature" /></Action></Else></xtml></Component><Component id="NativeConfirm" type="action.Action" execution="native" light="false"><Param name="Question" /><Param name="RunOnOK" type="action.Action" script="true" /></Component><Component id="OpenMessageDialog" type="action.Action"><Param name="Title" essential="true"/><Param name="Message" essential="true"/><Param name="RunOnOK" type="action.Action" script="true"/><xtml t="dlg.OpenDialog" Title="%$Title%"><Contents t="ui.Text" HtmlContents="true" Class="aa_messagedialog_text"><Text t="text.Translate" Text="%$Message%" /></Contents><RunOnOK t="xtml.UseParam" Param="RunOnOK" /><Feature t="dlg.NoCancel" /><Feature t="dlg.Size" Size="400px," /></xtml><xtml1 t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Class="message_dialog" Title="%$Title%" Buttons="Close" Width="300px" Height="100px"><Content t="ui.Text"><Text t="text.MultiLang" Pattern="%$Message%" Dynamic="true"/></Content><RunOnOK t="xtml.UseParam" Param="RunOnOK"/></Dialog></xtml1></Component><Component id="FixTopDialogPosition" type="action.Action" execution="native" light="false" /><Component id="ShowNotificationMessage" type="action.Action" execution="native" light="false"><Param name="Title" essential="true"/><Param name="Control" type="ui.Control" essential="true"/><Param name="MarginRight"><Default value="10"/></Param><Param name="MarginBottom"><Default value="10"/></Param><Param name="AutoCloseTimeInSeconds"><Default value="20"/></Param></Component><Component id="CloseNotificationMessage" type="action.Action" execution="native" light="false"><Param name="CloseAll" type="data.Boolean" /></Component><Component id="CurrentPopupContains" type="data.Boolean"><Param name="Text" type="data.Data[]" script="true"/><Param name="IgnoreCase" type="data.Boolean"><Default value="false"/></Param><Param name="IgnoreOrder" type="data.Boolean"><Default value="false"/></Param><xtml t="yesno.Contains" IgnoreCase="%$IgnoreCase%" IgnoreOrder="%$IgnoreOrder%" ><Data t="dialog.ContentsOfOpenPopup"/><Text t="xtml.UseParamArray" Param="Text" /></xtml></Component><Component id="CurrentDialogContains" type="data.Boolean"><Param name="Text" type="data.Data[]" script="true"/><Param name="IgnoreCase" type="data.Boolean"><Default value="false"/></Param><Param name="IgnoreOrder" type="data.Boolean"><Default value="false"/></Param><xtml t="yesno.Contains" IgnoreCase="%$IgnoreCase%" IgnoreOrder="%$IgnoreOrder%" ><Data t="dialog.TopDialogContent"/><Text t="xtml.UseParamArray" Param="Text" /></xtml></Component><Component id="IsRuntimeDialog" type="data.Boolean" hidden="true" execution="native" /><Component id="DialogButtonStyle" type="ui.ButtonStyle" light="false"><xtml t="data.FirstSucceeding"><Item t="object.RunMethod" Object="%$_GeneralStyling%" Method="DialogButtonStyle"><Condition t="dialog.IsRuntimeDialog" /></Item><Item t="ui.StandardButton"/></xtml></Component><Component id="ContainerInDialog" type="ui.Control"><xtml t="uiaspect.ContainerFromControl"><Control t="ui.ElementOfClass" Cls="aa_container"><Data t="dialog.TopDialogContent" /></Control></xtml></Component><Component id="SelectedItemInDialog" type="data.Data"><xtml t="data.Pipeline"><Item t="data.List"><Item value="%$DialogContext/Content%" /><Item value="%$_DialogContent%" /></Item><Item t="ui.ElementOfClass" Cls="aa_selected_item" /><Item t="uiaspect.ElementItemData" Element="%%" /></xtml></Component><Component id="ShowValidationError" execution="native"><Param name="Error" /></Component></xtml><xtml ns="facebook"><Component id="Facebook" type="jbart.StyleGuide"><xtml t="style_guide.Custom" ID="facebook"><PrimaryButton t="button.FacebookBlue" /><SecondaryButton t="button.FacebookGray" /><Hyperlink t="button.FacebookHyperlink" /><ColorPallette t="xml.Xml"><pallete><colors></colors><fonts/></pallete></ColorPallette></xtml></Component><Component id="LikeButton" type="field.Control" execution="native"><Param name="Url" /><Param name="AppID" /><Param name="Width" Default="450" /><Param name="LayoutStyle" type="enum" Options="button_count,standard,box_count" Default="button_count" /><Param name="SendButton" type="data.Boolean" /></Component></xtml><xtml ns="datefilter"><Type id="DateFilterOption" /><Component id="DateFilterControl" type="ui.Control" hidden="true"><xtml t="ui.List"><Var name="_FilterData" /><Var name="FilterDataXml" t="field.XmlInFilterAttribute" /><Var name="_CntrForFilters" value="%$_Cntr%" /><Control t="ui.Document" Data="%$FilterDataXml%" Class="aa_datefilter"><Fields t="field.XmlField" ID="%$_OriginalField/ID%_filter" Path="@PickValue"><Type t="field_aspect.Picklist" AllowEmptyValue="true"><Options t="data.FirstSucceeding"><Item value="%$_OriginalField/DateFilterOptions%" /><Item t="datefilter.DefaultFilterOptions" /></Options></Type><FieldAspect t="field_aspect.UnindentOptionPage" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.DescriptionForEmptyText"><Description t="text.MultiLang" Pattern="Filter By %$_OriginalField/Title%" /></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="action.RunActions"><Action t="action.WriteValue" To="%../@Expression%" Value=""><Condition t="yesno.IsEmpty" /></Action><Action t="datefilter.RefreshContainer" /></Action></FieldAspect><FieldAspect t="field_aspect.Resizer"/><FieldAspect t="field.CleanFilterButton" Field="%$_OriginalField%"><CleanFilterAction t="action.RunActions"><Action t="action.WriteValue" To="%$FilterData%" Value=""/><Action t="uiaction.SetText" Text="" DoNotFireEvents="false" DoNotFireEvents2="%$DoNotFireEvents%"><Var name="ControlElement" value="%$_Input%"/></Action><Action t="field.RefreshFilteredItems"><Var name="_Cntr" value="%$_CntrForFilters%"/><Var name="_Field" value="%$_OriginalField%"/></Action><Action t="action.RunOnNextTimer" Wait="500"><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_Input%" Method="ClosePopup"/><Action t="object.RunMethod" Object="%$_Input%" Method="Blur"/></Action></Action></CleanFilterAction><ShowCondition t="yesno.NotEmpty" Value="%$FilterDataXml/@Expression%" /></FieldAspect></Fields></Control></xtml></Component><Component id="LastXDaysOption" type="datefilter.DateFilterOption" hidden="true"><Param name="Option" /><Param name="Days" /><xtml t="datefilter.Option" Option="%$Option%"><Expression value="%$From%-%$Today%"><Var name="Today" t="data.Now" Format="std" /><Var name="From" t="ui.AddToDate" AmountToAdd="-%$Days%" Date="%$Today%" /></Expression></xtml></Component><Component id="ExpressionOption" type="datefilter.DateFilterOption" hidden="true"><Param name="Option" /><Param name="Expression" script="true" /><xtml t="datefilter.Option" Option="%$Option%"><Expression t="xtml.UseParam" Param="Expression" /></xtml></Component><Component id="Option" type="datefilter.DateFilterOption" hidden="true"><Param name="Option" /><Param name="Expression" script="true" /><xtml t="picklist.Option" Option="%$Option%" DisplayName="%$Option%"><OptionPage t="ui.CustomSinglePage"><Control t="ui.ControlWithAction"><RunBeforeControl t="action.WriteValue" To="%!@Expression%"><Value t="xtml.UseParam" Param="Expression" /></RunBeforeControl><Control t="ui.Section"><Control t="ui.Text" Text="%@Expression%" /></Control></Control></OptionPage></xtml></Component><Component id="CustomDateRangeOption" type="datefilter.DateFilterOption" ><Param name="Option" /><xtml t="picklist.Option" Option="%$Option%" DisplayName="%$Option%"><OptionPage t="ui.ItemPage"><Presentation t="uiaspect.Horizontal" /><Field t="field.XmlField" Path="@From"><Type t="field_aspect.Date" ChangeDateButtons="false"/><FieldAspect t="datefilter.FromToFieldAspects" /></Field><Field t="field.CustomControl"><Control t="ui.Text"><Text t="text.Translate" Text="to" /></Control></Field><Field t="field.XmlField" Path="@To"><Type t="field_aspect.Date" ChangeDateButtons="false"/><FieldAspect t="datefilter.FromToFieldAspects" /></Field><Aspect t="uiaspect.RunAction"><RunBeforeControl t="datefilter.ExpressionToFromTo" /></Aspect></OptionPage></xtml></Component><Component id="CustomExpressionOption" type="datefilter.DateFilterOption" ><Param name="Option" /><xtml t="picklist.Option" Option="%$Option%" DisplayName="%$Option%"><OptionPage t="ui.CustomSinglePage"><Control t="ui.Document" Data="%!@Expression%" ><Fields t="field.Field1"><FieldAspect t="field_aspect.Description" Description="e.g. 2007 or 5/2009 or 1/2008-4/2010 or 2009,1/2010"/><FieldAspect t="field_aspect.Text" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.OnUpdate"><Action t="action.RunActions"><Action t="ui.ToggleClassByCondition" Class="cleanable_filter"><ClassCondition t="yesno.NotEmpty" /><Element t="ui.DataFromJavaScript" Expression="jQuery(control).parents(\'.aa_picklist\')" /></Action><Action t="datefilter.RefreshContainer" /></Action></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="datefilter.RefreshContainer" /></FieldAspect></Fields></Control></OptionPage></xtml></Component><Component id="FromToFieldAspects" type="field.FieldAspect" hidden="true"><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.OnUpdate"><Action t="action.RunActions"><Action t="action.WriteValue" To="%!../@Expression%" Value="%../@From%-%../@To%" /><Action t="ui.ToggleClassByCondition" Class="cleanable_filter"><ClassCondition t="yesno.NotEmpty" Value="%../@Expression%"/><Element t="ui.DataFromJavaScript" Expression="jQuery(control).parents(\'.aa_picklist\')" /></Action><Action t="datefilter.RefreshContainer"/></Action></FieldAspect></xtml></Component><Component id="RefreshContainer" type="action.Action" light="false"><xtml t="field.RefreshFilteredItems" FilterData="%$_FilterData%"><Var name="_Field" value="%$_OriginalField%" /><Var name="_Cntr" value="%$_CntrForFilters%" /></xtml></Component><Component id="DefineDateFilterOptions" hidden="true" type="field.FieldAspect" category="filter"><Param name="Options" type="picklist.Options"><Field t="bart_dt.EditDateFilterOptions" /></Param><xtml t="object.SetProperty" Object="%$_Field%" Property="DateFilterOptions" Value="%$Options%" IsSingleProperty="true" /></Component><Component id="DateFilterOptionsDefinition" type="field.Fields"><Param name="ID"/><Param name="Title"/><Param name="Path"/><xtml t="field.XmlField" Path="%$Path%"><FieldAspect t="field_aspect.CellPresentation" Content="control" /><FieldAspect t="field_aspect.Section" /><FieldAspect t="field_aspect.Control"><Control t="datefilter.EditDateFilterOptions" /></FieldAspect></xtml></Component><Component id="EditDateFilterOptions" type="ui.Control"><xtml t="ui.ItemList"><Items t="xml.XmlItems" Tag="Option" /><Fields t="field.Fields"><Field t="field.XmlField" Path="@Option" Mandatory="true"/><Field t="field.XmlField" Path="@t" Title="Type"><FieldAspect t="field_aspect.Picklist" Mandatory="true"><Options t="picklist.SimpleOptions" Options="datefilter.ExpressionOption,datefilter.LastXDaysOption,datefilter.CustomExpressionOption,datefilter.CustomDateRangeOption" /></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="field.RefreshField" FieldID="properties" Scope="group"/></FieldAspect></Field><Field t="field.CustomControl" ID="properties" Title="Properties"><Control t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Path="@Days" Condition="%@t%==\'datefilter.LastXDaysOption\'" /><Field t="field.XmlField" Path="@Expression" Condition="%@t%==\'datefilter.ExpressionOption\'" /></Fields></Control></Field></Fields><Operations t="operation.StdOperations" /><Aspect t="uiaspect.DefaultFeatures" /><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.CellPresentation" Content="expandable text"/></xtml></Component><Component id="DefaultFilterOptions" type="picklist.OptionsDefinition"><xtml t="picklist.RichOptions"><Option t="datefilter.Option" Option="all dates" Expression="" /><Option t="datefilter.LastXDaysOption" Option="today" Days="0" /><Option t="datefilter.LastXDaysOption" Option="last week" Days="7" /><Option t="datefilter.LastXDaysOption" Option="last month" Days="30" /><Option t="datefilter.CustomDateRangeOption" Option="between..." /><Option t="datefilter.CustomExpressionOption" Option="by expression..." /></xtml></Component><Component id="ExpressionToFromTo" type="action.Action" execution="native" light="false"/></xtml><xtml package="true"><xtml ns="field_feature"><Component id="Css" type="field.FieldAspect" execution="native" description="Styles (font, color, padding, borders)" promoted="true"><Param name="Css" css="true"><FieldAspect t="field_aspect.HideTitle" /><Default><![CDATA[#this {} #wrapper {}]]></Default></Param></Component><Component id="Layout" type="field.FieldAspect" description="padding and margin"><Param name="Css" css="true"><FieldAspect t="field_aspect.HideTitle" /><Default><![CDATA[#this {} #wrapper {}]]></Default></Param><xtml t="field_feature.Css" Css="%$Css%" /></Component></xtml><xtml ns="field_aspect"  ><Component id="Multiple" type="field_aspect.Multiple" execution="native" light="false"><Param name="MultipleTitle" /><Param name="Aspect" type="uiaspect.Aspect[]" script="true" /><Param name="Operations" type="operation.Operations" script="true" /><Param name="Fields" type="field.Fields" /><Param name="Items" type="data_items.Items" script="true" /><NativeHelper name="Control" t="ui.ItemList"><Items t="object.RunMethod" Object="%$_Field%" Method="MultipleItems" /><Fields t="xtml.UseParam" Param="Fields" /><Operations t="xtml.UseParam" Param="Operations" /><Aspect t="uiaspect.ItemDetails"><ItemPage t="ui.ItemPage"><Field t="field.CustomControl"><Control t="xtml.RunXtml" Xtml="%$_Field/ItemDetailsControl%" /><FieldAspect t="field_aspect.HideTitle"/></Field></ItemPage></Aspect><Aspect t="xtml.UseParamArray" Param="Aspect" /></NativeHelper></Component><Component id="RecalcOnSave" type="field.FieldAspect" category="other" jbart="false"><Param name="Value" script="true" /><xtml t="object.SetMethod" Object="%$_Field%" Method="RecalcOnSave"><Xtml t="xtml.UseParam" Param="Value" /></xtml></Component><Component id="ReadOnlyIfNotNew" type="field.FieldAspect" category="model" jbart="false"><xtml t="object.SetMethod" Object="%$_Field%" Method="ReadOnly"><Xtml t="yesno.Not" Of="%$IsNewItem%" /></xtml></Component><Component id="Validation" type="field.FieldAspect" execution="native" category="validation" jbart="true"><Param name="Validation" type="validation.Validiation" script="true" essential="true" /><Param name="CheckValidation" type="enum" Options="on change,on blur,on save"><Default value="on blur"/></Param><Param name="ErrorMessage" /><Param name="AddTitleToErrorMessage" type="data.Boolean" Default="true" /><Param name="ShowErrorMessageNextToField" type="data.Boolean" Default="true" advanced="true" /></Component><Component id="ColumnWidth" type="field.FieldAspect" execution="native" category="table" light="false"><Aspect t="component_aspect.Image" Image="%$_Images%/resizer.gif" /><Param name="Width" essential="true" ><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.Description" Description="e.g. 80px,20%" /></Param></Component><Component id="FixedPickList" type="field_aspect.FieldType" light="false"><Param name="Options" type="data.Data" typeHint="comma_separated" Description="options are separated by commas e.g. male,female" essential="true" /><Param name="AllowEmpty" type="data.Boolean" Description="empty value is allowed"><Default value="true"/></Param><Param name="Multiple" type="data.Boolean"><Default value="false" /></Param><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="%$AllowEmpty%" Multiple="%$Multiple%"><Options t="picklist.SimpleOptions" Options="%$Options%"/></FieldAspect><FieldAspect t="field.OptionsFilter"/></xtml></Component><Component id="DynamicPickList" type="field_aspect.FieldType" light="false"><Param name="Options" script="true" essential="true" /><Param name="AllowEmptyValue" type="data.Boolean" boolfeature="true"><Default value="true" /></Param><Param name="AllowValueNotInOptions" type="data.Boolean" boolfeature="true" /><Param name="Multiple" type="data.Boolean" boolfeature="true" /><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><Param name="RecalculateOptions" type="data.Boolean" boolfeature="true"><Default value="true"/></Param><Param name="OptionLabel" script="true" advanced="true" Default="%%"/><Param name="OptionCode" script="true" advanced="true" Default="%%"/><Param name="OptionImage" script="true" advanced="true"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="field_aspect.Picklist" Multiple="%$Multiple%" AllowEmptyValue="%$AllowEmptyValue%"          AllowValueNotInOptions="%$AllowValueNotInOptions%" RecalculateForEachCell="%$RecalculateOptions%"><Options t="picklist.DynamicOptions"><Options t="xtml.UseParam" Param="Options"/><OptionLabel t="xtml.UseParam" Param="OptionLabel"/><OptionCode t="xtml.UseParam" Param="OptionCode"/><OptionImage t="xtml.UseParam" Param="OptionImage"/></Options></FieldAspect></xtml></Component><Component id="Email" type="field_aspect.FieldType" jbart="false"><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><Param name="Multiple" type="data.Boolean" boolfeature="true" /><Param name="Validation" type="data.Boolean" boolfeature="true"><Default value="true"/></Param><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="Multiple" Value="true" Condition="%$Multiple%" /><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field.TextFilter" /><FieldAspect t="field_aspect.Resizer" /><FieldAspect t="field_aspect.Validation" ErrorMessage="invalid email address" Condition="%$Validation%"><Validation t="validation.ContainsText" Text="@" PassEmptyText="true" /></FieldAspect></xtml></Component><Component id="Url" type="field_aspect.FieldType" jbart="false"><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field.TextFilter" /><FieldAspect t="field_aspect.Resizer" /><FieldAspect t="field_aspect.Toolbar"><Operations t="operation.Operation" Title="open" Icon="%$_Images%/studio/world1616.gif"><Action t="uiaction.GoToPage" Url="%%"><Condition t="yesno.NotEmpty" Value="%%" /></Action></Operations></FieldAspect></xtml></Component><!--  Custom Suggestion Box --><Component id="CustomSuggestionBox" todo="move to aaeditor" type="field.FieldAspect" execution="native" databind="true" light="false"><Param name="OnChangeAtEndOfText" type="action.Action" script="true" /><Param name="OnUpdate" type="action.Action" script="true"/><Param name="OnAfterTextAdded" type="action.Action" script="true" /><Param name="OnCtrlSpace" type="action.Action" script="true" /></Component><Component id="AddTextToSuggestionBox" type="action.Action" execution="native" light="false"><Param name="Text" ><Default value="%%" /></Param><Param name="TriggerPopup" type="data.Boolean"><Default value="true" /></Param><Param name="TriggerOnAfterTextAdded" type="data.Boolean"><Default value="true" /></Param></Component><Component id="OpenSuggestionBoxPopup" type="action.Action" execution="native" light="false"><Param name="Control" type="ui.Control" essential="true" /></Component><Component id="OpenSuggestionBoxList" type="action.Action" execution="native" light="false"><Param name="Options" essential="true" /><Param name="OptionLabel" script="true" /><Param name="OptionDescription" script="true" /><Param name="OptionImage" script="true" /><Param name="HalfWrittenPart" /><Param name="OnSelect" type="action.Action" script="true" /><Param name="HalfWrittenAlwaysOnStart" type="data.Boolean" ><Default value="true" /></Param><Param name="FilterItemsDifferantThanHalfWrittern" type="data.Boolean" ><Default value="true" /></Param></Component><Component id="TriggerSuggestionBoxPopup" type="action.Action" execution="native" light="false"><Param name="TextToSimulate" essential="true" /><Param name="TextPatternToAdd" ><Default value="%%" /></Param></Component><Component id="CloseSuggestionBox" type="action.Action" execution="native" light="false"/><Component id="DoNotSelectAllOnFocus" type="field.FieldAspect" gallery="Hyperlink" ><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="DoNotSelectAllOnFocus" Value="true"/></Component><Component id="AddControl" type="field.FieldAspect" execution="native" light="false"><Param name="Control" type="ui.Control" script="true" essential="true" /></Component><Component id="LinkInRichTextAsAction" type="field.FieldAspect" category="richtext" execution="native"><Param name="LinkClass" /><Param name="Action" type="action.Action" script="true" /></Component><Component id="RefreshTabOnSelect" type="field.FieldAspect" catgeory="tabs" description="Refresh strategy of a tab page"><Param name="Strategy" type="enum" Options="refresh,no refresh"><Default value="refresh"/></Param><xtml t="object.SetTextProperty" Object="%$_Field%" Property="RefreshTabOnSelect" Value="%$Strategy%" /></Component><Component id="OnAttach" hidden="true" type="field.FieldAspect" category="ui" execution="native"><Param name="Action" type="action.Action" /></Component><Component id="ImmediateFiltering" type="field.FieldAspect" category="filter" desctription="Used in filter fields to update the filter on update"><xtml t="field_aspect.OnUpdate"><Action t="uiaction.FilterContainer" FilterQueryXml="%..%" /></xtml></Component><Component id="ItemListSelectionWithKeyboard" type="field.FieldAspect" execution="native" category="filter" desctription="Up and down keys change item list selection"><Param name="DoOnEnter" type="action.Action" description="Input is the selected item" /></Component><Component id="PopupOnHover" type="field.FieldAspect" execution="native"><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.HoverPopup" /></Param><Param name="Contents" type="ui.Page"/><Param name="UsePageData" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="OnBeforeOpen" type="action.Action" script="true" advanced="true" /><Param name="PopupData" type="data.Data" script="true" advanced="true" Default="%%"/><NativeHelper name="Open" t="action.RunActions"><Action t="xtml.UseParam" Param="OnBeforeOpen" /><Action t="dlg.OpenDialog" DialogData="%$DialogData%" Style="%$Style%"><Var name="DialogData" t="xtml.UseParam" Param="PopupData"/><Contents t="ui.ShowPage" Page="%$Contents%"><PageParams t="ui.PageParams"><Condition t="yesno.Not" Of="%$UsePageData%" /><DataItems t="data_items.Items" Items="%$DialogData%"/></PageParams></Contents><Feature t="xtml.UseParamArray" Param="Feature"/></Action></NativeHelper></Component><Component id="JavaScript" type="field.FieldAspect" execution="native"><Param name="RunWhen" type="enum" Options="control,control attached,init" essential="true" Default="control" /><Param name="Code" essential="true"><Default value="function(data,html_elem,field,context) {&#xa;  &#xa;}" /><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" Type="js" MarginLeft="" /></Param></Component><Component id="HandleEvent" type="field.FieldAspect" execution="native" description="Handles events such as update,keyup,enter pressed,control attached,focus,mouse hover" promoted="true" ><Param name="Event" type="enum" multiple="true" Options="update,blur,keydown,keyup,enter pressed,control attached,load,focus,mouse over,ctrl enter pressed,mouse click" essential="true" /><Param name="Action" type="action.Action" script="true"/><NativeHelper name="OnLoad" t="field_aspect.AsynchAction"><Action t="xtml.UseParam" Param="Action" /></NativeHelper></Component><Component id="AsynchAction" type="field.FieldAspect" execution="native" description="Runs an async action before the field"><Param name="Action" type="action_async.Action.jBart" script="true"/><Param name="LoadingText" Default="Loading..." essential="true"/><Param name="LoadingStyle" type="loading_style.Style"><Default t="loading_style.Default"/></Param></Component><Component id="CallApi" type="field.FieldAspect" description="Calls an api before the field is shown"><Param name="Api" type="jbart.ApiCall" script="true" /><Param name="Target" /><Param name="LoadingText" Default="Loading..." /><Param name="LoadingStyle" type="loading_style.Style"><Default t="loading_style.Default" /></Param><xtml t="field_aspect.AsynchAction" LoadingText="%$LoadingText%" LoadingStyle="%$LoadingStyle%"><Action t="xtml.UseParam" Param="Api"><Var name="_Target" value="%$Target%" /></Action></xtml></Component><Component id="RunAction" type="field.FieldAspect" execution="native" description="Runs an action before the field control is displayed"><Param name="Action" type="action.Action" script="true" /><Param name="AfterControlCreated" type="action.Action" script="true" /><NativeHelper name="SetupAction" t="field_aspect.AsynchAction"><Action t="xtml.UseParam" Param="Action" /></NativeHelper></Component><Component id="DefineAction" type="field.FieldAspect" execution="native" description="Defines an action that can be called from js or xtml"><Param name="ActionName" Default="action" /><Param name="Action" type="action.Action" script="true" /></Component><Component id="Tooltip" type="field.FieldAspect" execution="native" description="Adds browser tooltip"><Param name="Tooltip" /></Component><Component id="GenericEventHandler" type="field.FieldAspect" execution="native" category="Advanced" description="Adds generic event handling"><Param name="Event" description="Event name comes here, you should know the event you\'re listening to"/><Param name="Action" type="operation.OpreationAction" script="true" /></Component><Component id="TextAreaProperties" type="field.FieldAspect" execution="native" description="Sets html properties of a text area"><Param name="ReadOnly" type="enum" options="readonly,writable,no change" Default="no change" /><Param name="Disabled" type="enum" options="disabled,enabled,no change" Default="no change" /></Component><Component id="GrowingImage" type="field.FieldAspect" category="Image" execution="native" description="Enlarges the image in animation (relevant only for image)"><Param name="NewSize" Default="200,200" /><Param name="Duration" Default="100" description="in milliseconds"/><Param name="NumberOfSteps" Default="30" /></Component><Component id="HighlightSubTextOnFilter" type="field.FieldAspect" execution="native"><Param name="HighlightCss" css="true"><Default><![CDATA[#this { color: blue; } ]]></Default></Param></Component><Component id="SearchResultList" type="field.FieldAspect" light="false"><xtml t="object.RunMethod" Object="%$_PopupField%" Method="ResultListAspects"/></Component><Component id="ChangeFieldID" type="field.FieldAspect" light="false" execution="native"><Param name="ID" /></Component><Component id="TextSearchAlgorithm" execution="native" type="field.FieldAspect" category="filter" description="Add this feature to the filter field to determine the text search algorithm"><Param name="Algorithm" type="search_algorithm.SearchAlgorithm"><Default t="search_algorithm.SimpleSearch" /></Param></Component><Component id="FullHeight" execution="native" type="field.FieldAspect" description="Set height as 100% all the way up to someone that has a specific height" /></xtml><xtml ns="search_algorithm" ><Type id="SearchAlgorithm" /><Component id="SimpleSearch" type="search_algorithm.SearchAlgorithm" execution="native" autoexpand="true"><Param name="MatchOnlyTextBeginning" type="data.Boolean" /></Component><Component id="SearchWords" type="search_algorithm.SearchAlgorithm" execution="native"></Component></xtml><xtml ns="field_type" ><Component id="Text" type="field_aspect.FieldType"><Param name="Style" type="text_field.Style"><Default t="text_field.JBartText" /></Param><xtml value="%$Style%" /></Component><Component id="ReadOnlyText" type="field_aspect.FieldType"><Param name="Style" type="uitext.Style" ><Default t="uitext.PlainText" /></Param><xtml value="%$Style%" /></Component></xtml><xtml ns="field_aspect"><Component id="ClearValueButton" type="field.FieldAspect" execution="native" description="A button to clear the textbox value"><Param name="Title" Default="Clear" /><Param name="Style" type="clear_button.Style"><Default t="clear_button.JBartClearFilterButton" /></Param></Component><Component id="QuickExpandPaneByDrag" type="field.FieldAspect" execution="native" description="Used in panes to expabd a pane (floating) by dragging it"><Param name="Location" type="enum" Option="left,right,top,bottom" /><Param name="BaseSize" type="data.Data" Default="100" /></Component><Component id="DisplayUnits" type="field.FieldAspect" execution="native" description="Shows a unit mark next to the field, e.g. $"><Param name="Unit" /><Param name="Location" type="unit_locations.Location"><Default t="unit_locations.Right" /></Param></Component></xtml><xtml ns="clear_button"><Type id="Style"/><Component id="JBartClearFilterButton" type="clear_button.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<span class="aa_clear_button" />]]></Html><Css><![CDATA[#this {background: url(%$_Images%/clean_filter.gif) no-repeat;margin: 4px 0 0 6px;vertical-align: top;display: inline-block;width: 16px;height: 16px;cursor: pointer;}#this.empty { background: none; } ]]></Css><Javascript><![CDATA[function(clearButton) {    clearButton.control.title = clearButton.Title;     var wrapper = jQuery(clearButton.FieldControlWrapper);    jBart.remove(wrapper.find(\'.aa_clear_button\')[0]);    wrapper[0].appendChild(clearButton.control);    clearButton.control.onclick = clearButton.ClearValue;        if (clearButton.IsValueEmpty) clearButton.jElem.addClass(\'empty\');    else clearButton.jElem.removeClass(\'empty\');}]]></Javascript></xtml></Component></xtml><xtml ns="unit_locations"><Type id="Location" /><Component id="Right" type="unit_locations.Location"><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { padding-left: 3px; display: inline-block; }#this.text { padding-left:0;} ]]></Css><Javascript><![CDATA[function(unit) {  unit.el.innerHTML = unit.unitString;  var input = aa_find_field_input(unit.fieldContent);  if (input) {    jQuery(input).after(unit.el);  } else {    unit.$el.addClass(\'text\');    jQuery(unit.fieldContent).css(\'display\',\'inline-block\').after(unit.el);  }        }]]></Javascript></xtml></Component><Component id="Left" type="unit_locations.Location"><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { padding-right: 5px; display: inline-block; }#this.text { padding-right:0;}]]></Css><Javascript><![CDATA[function(unit) {  unit.el.innerHTML = unit.unitString;  var input = aa_find_field_input(unit.fieldContent);  if (input) {    jQuery(input).before(unit.el);          } else {    unit.$el.addClass(\'text\');    jQuery(unit.fieldContent).css(\'display\',\'inline-block\').before(unit.el);  }        }]]></Javascript></xtml></Component><Component id="LeftInsideInput" type="unit_locations.Location"><Param name="InputLeftPadding" Default="15" /><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { padding-left:0px; display: inline-block; }]]></Css><Javascript><![CDATA[function(unit) {  var leftInputPadding = %$InputLeftPadding%;  unit.el.innerHTML = unit.unitString;  var input = aa_find_field_input(unit.fieldContent);  if (input) {      var jInput = jQuery(input);      jInput.after(unit.el);      aa_addOnAttach(input,function() {        var currLeftPadding = parseInt( jInput.css(\'padding-left\') || 0);        var newWidth = jInput.width() - leftInputPadding + currLeftPadding;        jInput.css(\'padding-left\',leftInputPadding).width(newWidth);                var unitPadLeft = parseInt( unit.$el.css(\'padding-left\') );        var val = -(newWidth+leftInputPadding );        unit.$el.css(\'margin-left\',val+\'px\');      });  }        }]]></Javascript></xtml></Component></xtml></xtml><xtml ns="group"><Type id="GroupsDefinition" /><Component id="DateIntervals" type="group.GroupsDefinition" execution="native"><Param name="Today" type="data.Boolean"><Default value="true"/></Param><Param name="Yesterday" type="data.Boolean"><Default value="true"/></Param><Param name="Last7days" type="data.Boolean"><Default value="true"/></Param><Param name="ThisMonth" type="data.Boolean"><Default value="true"/></Param><Param name="LastMonth" type="data.Boolean"><Default value="true"/></Param><Param name="ThisYear" type="data.Boolean"><Default value="true"/></Param><Param name="LastYear" type="data.Boolean"><Default value="true"/></Param></Component></xtml><xtml ns="field"><Component id="OptionsDefinition" type="field.Fields"><Param name="ID"/><Param name="Title"/><Param name="Path"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.XmlField" Path="%$Path%"><FieldAspect t="object.SetProperty" Object="%$_Field%" Property="Type" Value="Options Definition" /><FieldAspect t="field_aspect.CellPresentation" Content="control" /><FieldAspect t="field_aspect.Section" /><FieldAspect t="field_aspect.Control"><Control t="picklist.EditPicklistOptions" /></FieldAspect><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="EmailTemplateDefinition" type="field.Fields"><Param name="ID"/><Param name="Title"/><Param name="Path"/><xtml t="field.XmlGroup" Title="%$Title%"><FieldAspect t="field_aspect.Section" /><Field t="field.XmlField" Path="%$Path%/@Subject" Title="Subject"><FieldAspect t="field_aspect.Css" InlineCss="width:400px" OnElement="cell"/></Field><Field t="field.XmlField" Path="%$Path%/@Body" Title="Body"><Type t="field_aspect.RichText" /><FieldAspect t="field_aspect.HideTitle" /></Field><Field t="field.XmlField" Path="%$Path%/@AsHtml" Title="As Html"><Type t="field_aspect.Boolean" /></Field></xtml></Component></xtml><xtml package="true"><xtml ns="field"><Component id="PropertySheet1" type="field.Fields" execution="native" image="%$_Images%/studio/pform.gif"><Param name="ID" essential="true" advanced="always"/><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="Style" type="propertysheet.Style" script="true"><Default t="group.PropertySheet"/></Param><Param name="SectionStyle" type="section.Style" description="Select a section style to make it a section" /><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true"/></Component></xtml></xtml><xtml ns="slider" jbart="true"><Type id="Style" customPT="slider.CustomSliderStyle"/><Type id="Unit" /><Component id="Slider" type="field_aspect.FieldType" execution="native" description="visually change numeric values"><Param name="AllowEmptyValue" type="data.Boolean"/><Param name="Width" Default="150px"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="Style" type="slider.Style"><Default t="slider.Thin"/></Param><Param name="Units" type="slider.Unit[]"/><Param name="PopupEditor" type="action.Action" advanced="true"><Default t="slider.EditSliderPopup"/></Param><Param name="TextForEmptyValue" advanced="true" /><Param name="Min" advanced="true" description="depricated"/><NativeHelper name="DefaultUnits" t="slider.UnlimitedNoSymbol" /></Component><Component id="Unit" type="slider.Unit" execution="native"><Param name="Symbol" /><Param name="Min" description="empty means unlimited" /><Param name="Max" description="empty means unlimited"/><Param name="InitialPixelsPerUnit" description="relevant when Min/Max are not both set" Default="1"/><Param name="Step" Default="1" description="value resultion for slider and keyboard"/><Param name="SliderText" Default="%%%$Symbol%"/><Param name="DataFormat" Default="%%%$Symbol%"/></Component><Component id="UnlimitedNoSymbol" type="slider.Unit"><xtml t="slider.Unit"/></Component><Component id="PositiveNoSymbol" type="slider.Unit"><xtml t="slider.Unit" Min="0"/></Component><Component id="Percent" type="slider.Unit"><xtml t="slider.Unit" Min="0" Max="100" Symbol="%"/></Component><Component id="Thin" type="slider.Style"><xtml t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb" /></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px  grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black;  }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { color:#aaa; font-size: 10px; margin: -12px 0 0 -19px; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer;}]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></xtml></Component>    <Component id="SimpleSlider" type="slider.Style"><xtml t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_thumb"><div class="aa_slider_inner"></div><div class="aa_slider_text"></div></div></div></div>      ]]></Html><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript><Css><![CDATA[{ height: 30px; }.aa_slider_scale { background-color: #aaa; height: 1px; border-bottom: 1px solid #efefef; width: 120px; margin: 13px 6px; float: left; border-radius: 3px; position:relative}.aa_slider_thumb { width: 12px; border-radius: 2px; border: 1px solid #adadad; height: 16px; position: relative; top: -7px; left: 0px; background-color: #efefef; cursor: pointer; }.aa_slider_thumb .aa_slider_inner { border-left: 1px solid #adadad; border-right: 1px solid #adadad; position: relative; left: 3px; top: 3px; width: 4px; height: 10px; }.aa_slider_thumb:focus .aa_slider_inner { left: 2px; border-left: 2px solid grey; border-right: 2px solid grey; }.aa_slider_thumb:hover { border-color: #777; background-color: #eee;  }.aa_slider_thumb:focus .aa_slider_text { color: black; }.aa_slider_text { width: 24px; height: 20px; position: absolute; left: -5px; top: 17px; text-align: center; font-size: 10px; color: #aaa; }.aa_slider_text:hover { text-decoration: underline; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s }#this.out_of_range .aa_slider_thumb { background-color: pink; }]]></Css></xtml></Component><Component id="jquerySlider" type="slider.Style"><xtml t="slider.CustomSliderStyle"><Html><![CDATA[<div></div>      ]]></Html><Javascript><![CDATA[function(slider) {aa_addOnAttach(slider,function() { init() } ); function init() {  jQuery(slider).css(\'width\',slider.width);  var settings = {       min: slider.from, max: slider.to, step: slider.step, value: [slider.value],       slide: function() { slider.setValue(jQuery(slider).slider(\'value\'),\'slide\') },      change: function() {         slider.setValue(jQuery(slider).slider(\'value\'));      }  };  if (jQuery(slider).slider) jQuery(slider).slider(settings); } }]]></Javascript><Css><![CDATA[]]></Css></xtml></Component><Component id="CustomSliderStyle" type="slider.Style"><Param name="Html" codemirror="true" /><Param name="Css" codemirror="true" /><Param name="Javascript" codemirror="true"/><Param name="DesignTime_Save"><Field t="bart_dt.StyleSave" /></Param><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component><Component id="EditSliderPopup" type="action.Action" light="false"><xtml t="operation.OpenDialog"><RunOnOK t="operation.RunJavascript" Code="function(data,html_elem,context) {var slider = context.vars.Slider[0]; slider.setValue(jBart.get(\'\\%$Value\\%\',[],context)); slider.adjustScale(); slider.setThumbPosition(); jQuery(context.vars.ControlElement[0]).focus()}"/><Style t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup aa_dialogcontents&quot;/&gt;" Javascript="" Mode="popup"><Feature t="dlg.NearLauncher"/><Feature t="dlg.CloseWhenClickingOutside"/><Feature t="dlg.OKOnEnter"/><Feature t="dlg.CloseOnEsc"/><Css><![CDATA[#this { padding: 0 15px; border-radius: 5px; box-shadow: 0 0 3px 5px rgba(50,50,50,0.5);background:#EEEEFC; border:none; margin-right:20px; overflow-y: auto; overflow-x: hidden; }.ie #this { border: 1px solid black; }]]></Css></Style><Contents t="ui.CustomSinglePage"><Control t="ui.Document"><Presentation t="uiaspect.Vertical"/><Field t="field.Field" FieldData="%!$Value%" ID="value" Title="Value" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.DoNotSelectAllOnFocus"/></Field></Control></Contents><Feature t="dlg.AutomaticFocus"/></xtml></Component><Component id="SliderGroup" type="uiaspect.DocumentPresentation" execution="native" ><Param name="From" Default="0"/><Param name="To" Default="100"/><Param name="Width" Default="150px"/><Param name="Style" type="slider.SliderGroupStyle" script="true"><Default t="slider.SimpleScale"/></Param><Param name="Step" Default="1" description="E.g.: 0.01, 10"/><Param name="KeepThumbsOrder" type="data.Boolean" Default="true"/></Component><Component id="Thumb" type="field.FieldAspect" execution="native" category="textbox,group" description="Define as thumb for scale presentation"><Param name="Value" script="true" Default="%%" description="numeric value for thumb"/><Param name="Prefix" Default="" description="Prefix to remove from data. E.g. \'$\'"/><Param name="Suffix" Default="" description="Suffix to remove from data. E.g. \'px\'"/><Param name="Style" type="slider.ThumbStyle" script="true"><Default t="slider.SimpleThumb"/></Param><NativeHelper name="Fixes" t="field_aspect.Aspects" ><FieldAspect t="field_aspect.CellPresentation" Content="text"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this{ margin: 32px 0 0 0; }]]></Css></FieldAspect></NativeHelper></Component><Component id="CustomSliderGroupStyle" type="slider.SliderGroupStyle"><Param name="Html"><Field1 t="xtml_dt.HtmlParam" ParamName="Html" /><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Css"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Javascript"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="DesignTime_Save"><Field t="bart_dt.StyleSave" Type="uitext.Style" StylePT="style.CustomStyle" /></Param><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component><Component id="CustomThumbStyle" type="slider.ThumbStyle"><Param name="Html"><Field1 t="xtml_dt.HtmlParam" ParamName="Html" /><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Css"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Javascript"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="DesignTime_Save"><Field t="bart_dt.StyleSave" Type="uitext.Style" StylePT="style.CustomStyle" /></Param><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component><Component id="SimpleScale" type="slider.SliderGroupStyle"><xtml t="slider.CustomSliderGroupStyle"><Html><![CDATA[<div class="aa_slider_scale"></div>]]></Html><Javascript><![CDATA[function(group) {   group.addThumbFields();}]]></Javascript><Css><![CDATA[#this.aa_slider_scale { background-color: #aaa; height: 1px; border-bottom: 1px solid #efefef; width: 120px; margin-top: 6px; float: left; position: relative }]]></Css></xtml></Component><Component id="SimpleThumb" type="slider.ThumbStyle"><xtml t="slider.CustomThumbStyle"><Html><![CDATA[<div class="aa_thumb"><div class="aa_thumb_inner"></div><div class="aa_thumb_control"></div></div>]]></Html><Javascript><![CDATA[function(thumb) {  thumb.init(\'.aa_thumb\',\'.aa_thumb_control\');}]]></Javascript><Css><![CDATA[#this.aa_thumb   { width: 12px; border-radius: 2px; border: 1px solid #adadad; position: relative; height: 16px; top: -7px; left: 0px; background-color: #efefef; cursor: pointer; }.aa_thumb_inner { border-left: 1px solid #adadad; border-right: 1px solid #adadad; position: relative; left: 3px; top: 3px; width: 4px; height: 10px; }.aa_slider_thumb:hover { border-color: #777; background-color: #eee;  }.aa_thumb_control { width: 24px; height: 20px; position: relative; top: -25px; left: -6px; text-align: center; font-size: 10px; color: #aaa; }]]></Css></xtml></Component></xtml><xtml ns="validation"><Type id="Validiation" /><Component id="ContainsText" type="validation.Validiation" execution="native" autoexpand="true"><Param name="Text" /></Component><Component id="MatchesRegularExpression" type="validation.Validiation" execution="native"><Param name="Expression" /></Component><Component id="IsChecked" type="validation.Validiation" gallery="IsChecked"><xtml t="yesno.NotEqualsTo" To="true"/></Component><Component id="IsNumber" type="validation.Validiation"><xtml t="validation.MatchesRegularExpression" Expression="[0-9.-]*" /></Component><Component id="Unique" type="validation.Validiation" execution="native" gallery="UniquenessValidation"><Param name="OtherValues" /></Component><Component id="CustomValidation" type="validation.Validiation"><Param name="SuccessCondition" type="data.Boolean" script="true"/><xtml t="yesno.Not"><Of t="xtml.UseParam" Param="SuccessCondition" /></xtml></Component><Component id="PassingValidations" type="data.Boolean" execution="native"><Param name="TopControl"><Default value="%$ControlElement%"/></Param></Component><Component id="ShowValidationError" type="action.Action" execution="native" light="false"><Param name="TopControl"><Default value="%$ControlElement%"/></Param><Param name="Error" /></Component><Type id="Style" customPT="validation.CustomStyle" /><Component id="Default" type="validation.Style"><xtml t="validation.CustomStyle"><Html><![CDATA[<div />]]></Html><Css><![CDATA[#this { color:red; font-weight:bold; font-size:11px; font-family: Arial; }]]></Css><CssForInput><![CDATA[#this { background: pink !important; }]]></CssForInput><Javascript><![CDATA[function (validation) {  validation.innerHTML = validation.errorText;  validation.init({     showError: function(control,errorElement,mandatory) {       jQuery(errorElement).insertAfter(jQuery(control).parent().children().slice(-1));       if (mandatory) jQuery(errorElement).hide();     },    showErrorSummary: function(top,summary) {      summary.setAttribute(\'tabindex\',\'1000\');      top.appendChild(summary);      summary.focus();    }  });}]]></Javascript><CssForSummary><![CDATA[#this { display:block; color:red; font-weight:bold; margin-top:2px; font-family:Arial; font-size:11px; }]]></CssForSummary></xtml></Component><Component id="CustomStyle" type="validation.Style" customPT="true"><Param name="Html" codemirror="true" /><Param name="Css" codemirror="true" /><Param name="Javascript" codemirror="true" /><Param name="CssForSummary" codemirror="true" codemirrortype="css"/><Param name="CssForInput" codemirror="true" codemirrortype="css"/><Param name="DesignTime_Save"><Field t="bart_dt.StyleSave"><ExtraAction t="xml.AddXmlChildren" Parent="%$NewXtml%"><Children t="data.Pipeline"><Item t="xml.Xml"><xtml><CssForSummary><![CDATA[%$Xtml/CssForSummary%]]></CssForSummary><CssForInput><![CDATA[%$Xtml/CssForInput%]]></CssForInput></xtml></Item><Item value="%*%" /></Children></ExtraAction></Field></Param><ParamGenerator t="action.RunActions"><Var name="Style" t="xtml.RunXtml" Xtml="%$PrevXtml%" /><Action t="bart_dt.StyleGenerator" /><Action t="action.WriteValue" To="%!@CssForSummary%" Value="%$Style/CssForSummary%" /><Action t="action.WriteValue" To="%!@CssForInput%" Value="%$Style/CssForInput%" /></ParamGenerator><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /><TextProperty name="CssForSummary" value="%$CssForSummary%" /><TextProperty name="CssForInput" value="%$CssForInput%" /></xtml></Component><Component id="ValidationStyle" type="bart.ApplicationFeature"><Param name="Style" type="validation.Style"><Default t="validation.Default" /></Param><xtml t="object.SetProperty" Object="%$_BartContext%" Property="ValidationStyle" Value="%$Style%" IsSingleProperty="true" /></Component></xtml><xtml ns="formula"><Component id="CalcCells" type="data.Data" execution="native"><Param name="Cells"/></Component></xtml><xtml ns="inteliChoice"><Component id="jBartStudioAccumulator" type="bart.ApplicationFeature" execution="native"></Component><Component id="TriggerUserChoice" type="action.Action" execution="native" ><Param name="Selection" Default="%$_FieldData%"/><Param name="Target" Default="%$_FieldData%" description="element from which can extract selection ancestors"/><Param name="FieldId" Default="%$_Field/Id%"/><Param name="FieldXtml" Default="%$_Field/XtmlSource%"/></Component><Component id="TrackGoogleAnalyticsEvent" type="action.Action" description="To be put in jbartStudio analytics project" execution="native" light="false"><Param name="EventCategory" /><Param name="EventAction" /><Param name="EventLabel" /></Component></xtml><xtml package="true"><xtml ns="itemlist"><Type id="Items" /><Component id="Items" type="itemlist.Items" autoexpand="true"><Param name="Items" /><xtml value="%$Items%" /></Component><Component id="XmlItems" type="itemlist.Items" autoexpand="true" execution="native"><Param name="ParentXml" Default="%%" /><Param name="Tag" Default="*" /><Param name="Filter" type="data.Data" script="true" /></Component></xtml><xtml ns="itemlist2"><Type id="View" style="true" /></xtml><xtml ns="field"><Component id="ItemListContainer" type="field.Fields" advanceddt="true" image="%$_Images%/studio/library.png"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="Items" type="itemlist.Items" script="true"><Default t="itemlist.Items" /></Param><Param name="HideTitle" type="data.Boolean" boolfeature="true" /><Param name="Layout" type="layout.Style" script="true"><Default t="layout.Default" /></Param><Param name="SectionStyle" type="section.Style" description="Select a section style to make it a section" /><Param name="Field" type="field.Fields[]" script="true" light="false" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /><xtml t="control.Layout" ID="%$ID%" Title="%$Title%" HideTitle="%$HideTitle%" SectionStyle="%$SectionStyle%"><Layout t="xtml.UseParam" Param="Layout" /><Field t="xtml.UseParamArray" Param="Field" /><FieldAspect t="field_aspect.ItemListContainer"><Items t="xtml.UseParam" Param="Items" /></FieldAspect><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="ItemList" type="field.Fields" execution="native" advanceddt="true" image="%$_Images%/studio/books.gif"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="View" type="itemlist2.View"><Default t="itemlist2.Simple" /></Param><Param name="SectionStyle" type="section.Style" description="Select a section style to make it a section" /><Param name="Field" type="field.Fields[]" script="true" light="false" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /><DTAction t="bart_dt.ItemListActions" dtsupport="false"/></Component><Component id="DragAndDropItemsHandle" type="field.Fields" execution="native" advanceddt="true"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="Style" type="dragndrophandle.Style" ><Default t="dragndrophandle.Default" /></Param><Param name="CssForDraggedElement" css="true"><Default><![CDATA[{ opacity: 0.9; }]]></Default></Param><Param name="CssForDraggedSpace" css="true" Default="{ }"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /></Component></xtml><xtml ns="field_aspect"><Component id="ItemListContainer" type="field.FieldAspect" execution="native" fieldImage="%$_Images%/studio/library.png"><Param name="Items" type="itemlist.Items"><Default t="itemlist.Items" /></Param></Component><Component id="CustomizeTableHeader" type="field.FieldAspect" execution="native"><Param name="Css" css="true"><Default><![CDATA[#this { } .title {}]]></Default></Param><Param name="ColSpan" /></Component><Component id="ShowOnlyOnItemHover" type="field.FieldAspect" execution="native" description="Is shown only when the user hovers over the item"><Param name="Css" css="true"><Default><![CDATA[#this { display: none !important;}#item:hover #this { display: block !important; }]]></Default></Param></Component><Component id="SortType" type="field.FieldAspect" description="Defines how this field is sorted"><Param name="SortType" type="itemsort.SortType"><Default t="itemsort.Lexical" /></Param><xtml t="object.SetProperty" Object="%$_Field%" Property="SortType" Value="%$SortType%" IsSingleProperty="true" /></Component></xtml><xtml ns="itemlist_aspect"><Component id="ItemSelection" type="field.FieldAspect" category="itemlist" execution="native"><Param name="Css" css="true"><Default><![CDATA[{ background: #D9E8FB; }]]></Default></Param><Param name="OnSelect" type="action.Action" script="true" /><Param name="KeyboardSupport" type="data.Boolean" Default="true" /><Param name="MouseSupport" type="enum" Options="mouse down,mouse click,mouse hover,none" Default="mouse click" /><Param name="AlwaysOneSelected" type="data.Boolean" Default="true" /><Param name="SelectedByDefault" type="itemlist.FindSelected" script="true"/></Component><Component id="UpdateOnAddOrDeleteItem" type="field.FieldAspect" category="itemlist" execution="native" description="Handles UI operations of add and delete" /><Component id="RefreshOnSelectionChange" type="field.FieldAspect" category="itemlist" execution="native" description="Refreshed when the selection changes. Useful for toolbars and item details"><Param name="SelectedItemAsData" type="data.Boolean" Default="true" /><Param name="HideWhenNoSelection" type="data.Boolean" Default="false"/></Component><Component id="RefreshOnItemsChange" type="field.FieldAspect" category="itemlist" execution="native" description="Refreshes when the items change (filter or sort). Useful for summary text" /><Component id="CssForItem" type="field.FieldAspect" category="itemlist" execution="native" description="Set style for an item, potentialy on a condition"><Param name="Css" css="true"/><Param name="ConditionOnItem" type="data.Boolean.promoted"><Default t="data.Always" /></Param></Component><Component id="ItemClick" type="field.FieldAspect" category="itemlist" execution="native" description="Do something when clicking on an item in an itemlist"><Param name="OnClick" type="action.Action" /></Component><Component id="FilterGroup" type="field.FieldAspect" category="itemlist" execution="native" description="Add to a layout to define it as a filter group" fieldImage="%$_Images%/studio/filter.png" /><Component id="Filter" type="field.FieldAspect" category="filter" execution="native" description="Add this to the filter field"><Param name="FieldData" script="true" description="Field Data to filter" /><Param name="FilterType" type="itemlist_filter.FilterType"><Default t="itemlist_filter.Text" /></Param><Param name="FilterOnChange" type="data.Boolean" Default="true" /></Component><Component id="TableColumnDragAndDrop" type="field.FieldAspect" category="itemlist" description="Adds Drag and Drop to table columns" execution="native"><Param name="CssForDraggedElement" css="true"><Default><![CDATA[{ opacity: 0.5; border: solid 1px gray; border-radius: 3px; background:transparent url(%$_Images%/css/shadow_bottom_s.png) bottom right no-repeat; padding:0px 10px 10px 0px;}]]></Default></Param><Param name="CssForDraggedSpace" css="true" Default="{ }"/></Component><Component id="LongList" type="field.FieldAspect" category="itemlist" description="Allows showing large number of items in a responsive way" execution="native"><Param name="MaxTimeToRenderItems" Default="500" Description="After this amount of milliseconds, put Show More text" /><Param name="TextForShowMore" Default="Show More Items..." /><Param name="Style" type="large_items.Style"><Default t="large_items.Default" /></Param></Component><Component id="DragAndDropItems" type="field.FieldAspect" category="itemlist" description="Allows Drag and Drop to the items" execution="native"><Param name="CssForDraggedElement" css="true"><Default><![CDATA[{ opacity: 0.9; }]]></Default></Param><Param name="CssForDraggedSpace" css="true" Default="{ }"/></Component><Component id="ShowTextWhenNoItems" type="field.FieldAspect" category="itemlist" description="Shows a text in the table when there are no items" execution="native"><Param name="Text" Default="No items available" /><Param name="Style" type="uitext.Style"><Default t="uitext.PlainText" /></Param></Component><Type id="FindSelected" description="Retrieves the selected item, given a list of items"/><Component id="SelectedItemByFilter" type="itemlist.FindSelected" execution="native"><Param name="Filter" type="data.Data" script="true" /></Component></xtml><xtml ns="itemsort"><Type id="SortType" /><Component id="SortItems" type="field.FieldAspect" category="itemlistCntr" description="Sorts the items in the itemlist container" execution="native"><Param name="ItemValueToSort" script="true" description="Sort by it. e.g. %@price%"/><Param name="SortType" type="itemsort.SortType"><Default t="itemsort.Lexical" /></Param><Param name="SortDirection" type="enum" Options="ascending,descending" Default="descending" /></Component><Component id="Lexical" type="itemsort.SortType" execution="native" /><Component id="Numeric" type="itemsort.SortType" execution="native" /><Component id="PromoteValues" type="itemsort.SortType" execution="native"><Param name="ValuesToPromote" description="e.g. (high,medium)" /></Component><Component id="TableColumnSort" type="field.FieldAspect" category="itemlist" description="Sorts the table by clicking on the columns" execution="native"><Param name="DefaultSortType" type="itemsort.SortType" light="false"><Default t="itemsort.Lexical" /></Param></Component><Component id="SortInfo" type="field.FieldAspect" description="Defines how the sort should be done (Used by Table Column Sort)" execution="native"><Param name="SortType" type="itemsort.SortType"><Default t="itemsort.Lexical" /></Param></Component></xtml><xtml ns="itemlist_filter"><Type id="FilterType" /><Component id="ExactMatch" type="itemlist_filter.FilterType" execution="native" description="Usually used by picklists"><Param name="ValuesMultiple" type="data.Boolean" description="Multiple values are separated by commas"/><Param name="QueryMultiple" type="data.Boolean" description="Multiple values are separated by commas"/></Component><Component id="Text" type="itemlist_filter.FilterType" execution="native" /><Component id="ValuesFromItems" type="picklist.OptionsProvider" execution="native" description="The picklist options of the field to filter" /><Component id="Occurrences" type="field.FieldAspect" category="filter" execution="native" description="Adds occurrences to filters"><Param name="ShowFilteredOccurrences" type="data.Boolean" Default="true" /><Param name="SortByOccurrences" type="data.Boolean" Default="true" /><Param name="Style" type="occurrences.Style"><Default t="occurrences.Default" /></Param></Component></xtml><xtml ns="itemlist_item"><Type id="ItemIdentifier" /><Component id="ItemOfList" type="data.Data" execution="native"><Param name="Item" type="itemlist_item.ItemIdentifier" /><Param name="Result" type="enum" Options="item,element" Default="item" /></Component><Component id="ItemInContext" type="itemlist_item.ItemIdentifier" execution="native" description="The item of ControlElement (the control being clicked/hovered/etc.)" /><Component id="SelectedItem" type="itemlist_item.ItemIdentifier" execution="native" description="The selected item in the list" /><Component id="SpecificItem" type="itemlist_item.ItemIdentifier" execution="native"><Param name="Item" /></Component><Component id="SpecificItemByFilter" type="itemlist_item.ItemIdentifier" execution="native" description="Select the item by passing a filter (e.g. id in the url)"><Param name="ItemFilter" type="data.Data" script="true"/></Component></xtml><xtml ns="itemlist_action"><Component id="RefreshItem" type="action.Action" execution="native"><Param name="Item" type="itemlist_item.ItemIdentifier" advanced="true"><Default t="itemlist_item.ItemInContext" /></Param></Component><Component id="DeleteItem" type="action.Action" execution="native"><Param name="Item" type="itemlist_item.ItemIdentifier" ><Default t="itemlist_item.ItemInContext" /></Param></Component><Component id="DeleteSelectedItem" type="action.Action" light="false" ><xtml t="itemlist_action.DeleteItem"><Item t="itemlist_item.SelectedItem" /></xtml></Component><Component id="AddItemToItemList" type="action.Action" execution="native"><Param name="Item" Default="%%" /><Param name="ItemList" description="Id of itemlist to add to" Default="" /></Component><Component id="ToggleDetailsInplace" type="action.Action" execution="native"><Param name="DetailsField" Default="Details" description="field id" /><Param name="Item" type="itemlist_item.ItemIdentifier" advanced="true"><Default t="itemlist_item.ItemInContext" /></Param></Component><Component id="OpenDetailsReplacingAll" type="action.Action" execution="native"><Param name="DetailsField" Default="Details" description="field id" /><Param name="Item" type="itemlist_item.ItemIdentifier" advanced="true"><Default t="itemlist_item.ItemInContext" /></Param><Param name="Transition" type="transition.ReplaceTransitionStyle" description="Master and detail must be of the same size"/></Component><Component id="CloseDetailsReplacingAll" type="action.Action" execution="native" ><Param name="Transition" type="transition.ReplaceTransitionStyle" description="Master and detail must be of the same size"/></Component></xtml><xtml ns="occurrences"><Type id="Style" customPT="occurrences.CustomStyle" /><Component id="Default" type="occurrences.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<span/>]]></Html><Javascript><![CDATA[function (occObject) {  var text = occObject.count;  if (occObject.filteredOccurrences) text = occObject.filteredCount + \' of \' + occObject.count;  occObject.control.innerHTML = \'(\' + text + \')\';         }]]></Javascript></xtml></Component><Component id="CustomStyle" type="occurrences.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml package="true"><xtml ns="itemlist_aspect"><Component id="GroupItems" type="field.FieldAspect" category="itemlist" description="Creates item groups" execution="native"><Param name="GroupOfItem" script="true" /><Param name="SortGroups" type="itemsort.SortType" /><Param name="Style" type="items_group.Style"><Default t="items_group.Default" /></Param><Param name="GroupDisplayName" type="data.Data" script="true" Default="%%" /></Component></xtml><xtml ns="items_group"><Type id="Style" style="true" /><Component id="Default" type="items_group.Style"><Param name="IncludeCounter" type="data.Boolean" Default="true" /><xtml t="ui.CustomStyle"><Html><![CDATA[<div><div class="group_title"/></div>]]></Html><Css><![CDATA[#this { clear:both; }      .group_title {   cursor: pointer; color:#3764A0;   font-weight:bold; font-size: 15px;   margin-bottom: 10px;   border-bottom: 2px solid #99BBE8;   max-width:400px;  }      ]]></Css><Javascript><![CDATA[function(group) {  var jElem = jQuery(group.control);  if (\'%$IncludeCounter%\' == \'true\')    group.text += \' (\' + group.ItemElements.length + \')\';      jElem.find(\'.group_title\').html( group.text );  jElem.find(\'.group_title\').click(function() {    group.collapsed = !group.collapsed;    if (group.collapsed)      jQuery(group.ItemElements).animate({height:\'hide\'},300);    else      jQuery(group.ItemElements).animate({height:\'show\'},300);  });}]]></Javascript></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="itemlist2"><Component id="Simple" type="itemlist2.View"><xtml t="ui.CustomStyle"><Html><![CDATA[<div><div class="aa_item"/></div>]]></Html><Javascript><![CDATA[function(itemlist) {       itemlist.ItemTemplate = itemlist.jControl.find(\'.aa_item\').remove()[0];}]]></Javascript><Css><![CDATA[#this>.aa_item {} #this{}]]></Css></xtml></Component><Component id="JBartTable" type="itemlist2.View"><Param name="MinWidth" Default="540px" /><xtml t="ui.CustomStyle"><Html><![CDATA[<div><table><thead><tr><th class="aa_header_field"><span class="title"/><span class="sortArrow"/></th></tr></thead><tbody><tr class="aa_item"><td class="aa_cell" /></tr></tbody></table></div>]]></Html><Javascript><![CDATA[function(itemlist) {    aa_itemlist_as_table(itemlist, { showHeaders: true } );}]]></Javascript><Css><![CDATA[#this >table { color: #404040;min-width: %$MinWidth%;border: 1px #ccc solid;border-collapse: collapse;border-spacing: 0px;border: 1px solid #CCC;}#this>table>tbody>tr.aa_details_inplace>td {  background: #FAFADC;} #this>table>tbody>tr>td {vertical-align:top; border-bottom: 1px solid #ccc;border-top: 0px;border-left: 1px solid #ccc;border-right: 0px;padding: 5px;color: #404040;border-collapse: collapse;border-spacing: 0px;}#this>table>thead>tr>th {   border-left: 1px solid #CCC;  border-bottom: 1px solid #CCC;  background: #eee url(%$_Images%/css/th_bck.gif) repeat-x scroll 0 0;  padding: 4px 5px;}#this>table>thead>tr>th>.title {  padding-right: 5px;  font-weight: bold;  font-size: 11px;  color: #666;} #this>table>thead>tr>th>.sortArrow { padding-right: 10px; cursor:default; }#this>table>thead>tr>th.sort_ascending >.sortArrow { background: url(images/css/sort2.gif) no-repeat 0 5px; }#this>table>thead>tr>th.sort_descending >.sortArrow { background: url(images/css/sort1.gif) no-repeat 0 5px;}]]></Css></xtml></Component>  <Component id="JBartTableNoHeader" type="itemlist2.View"><Param name="MinWidth" Default="540px" /><xtml t="ui.CustomStyle"><Html><![CDATA[<div><table><tbody><tr class="aa_item"><td class="aa_cell" /></tr></tbody></table></div>]]></Html><Javascript><![CDATA[function(itemlist) {    aa_itemlist_as_table(itemlist, { showHeaders: true } );}]]></Javascript><Css><![CDATA[#this >table { color: #404040;min-width: %$MinWidth%;border: 1px #ccc solid;border-collapse: collapse;border-spacing: 0px;border: 1px solid #CCC;}#this>table>tbody>tr.aa_details_inplace>td {  background: #FAFADC;} #this>table>tbody>tr>td {vertical-align:top; border-bottom: 1px solid #ccc;border-top: 0px;border-left: 1px solid #ccc;border-right: 0px;padding: 5px;color: #404040;border-collapse: collapse;border-spacing: 0px;}]]></Css></xtml></Component>  <Component id="CustomStyle" type="itemlist2.View" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="large_items"><Type id="Style" customPT="large_items.CustomStyle" /><Component id="Default" type="large_items.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { cursor: pointer; color:#333; padding-top: 10px; clear: both; }]]></Css><Javascript><![CDATA[function (showMoreObject) {      showMoreObject.control.innerHTML = showMoreObject.text;      showMoreObject.control.onclick = function() { showMoreObject.showMore() };}]]></Javascript></xtml></Component><Component id="CustomStyle" type="large_items.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml ns="transition"><Type id="ReplaceTransitionStyle" style="true" /><Component id="Fade" type="transition.ReplaceTransitionStyle"><Param name="Duration" Default="500" description="in miliseconds"><FieldAspect t="field_dt.SliderParam" ><Units t="slider.Unit" Symbol="" Min="0" /></FieldAspect></Param><xtml t="ui.CustomStyle"><Html><![CDATA[]]></Html><Css><![CDATA[#this {  position:relative;}#this>.aa_new {  position:absolute;  top:0px;  left:0px;  opacity:0;}#this>.aa_original {  position:absolute;  opacity:1;  top:0px;  left:0px;}]]></Css><Javascript><![CDATA[function animate(transition) {  aa_fade_transition(transition, %$Duration%);}]]></Javascript></xtml></Component></xtml><xtml ns="itemtree"><Type id="Style" /><Type id="Items" /><Component id="TreeItems" type="itemtree.Items" autoexpand="true" execution="native"><Param name="Items" /><Param name="SubItems" script="true" /></Component><Component id="Tree" type="field.Fields" execution="native"><Param name="Title" titleField="true" /><Param name="ID" advanced="always" idField="true" /><Param name="Items" type="itemtree.Items" script="true" /><Param name="ItemText" script="true" /><Param name="ItemImage" type="image.Image" script="true" /><Param name="Style" type="itemlist_tree.Style"><Default t="itemtree.Default" /></Param><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/></Component><Component id="Default" type="itemtree.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div class="aa_tree_all"><div class="aa_tree_node"><div class="aa_tree_node_line"><div class="aa_tree_node_expandbox" /><div class="aa_tree_node_image" /><div class="aa_tree_node_text" /></div><div class="aa_tree_node_subnodes"><div class="aa_tree_node" /></div></div></div>]]></Html><Css><![CDATA[.aa_tree_node_subnodes { padding-left: 10px; }]]></Css><Javascript><![CDATA[function render(tree) {  aa_build_tree(tree,{    nodeElement: tree.$el.find(\'.aa_tree_node\')[0],    nodeSettings: function(node) {      return {        expandBoxElement: node.$el.find(\'.aa_tree_node_expandbox\'),        imageElement: node.$el.find(\'.aa_tree_node_image\'),        textElement: node.$el.find(\'.aa_tree_node_text\'),        subnodesElement: node.$el.find(\'.aa_tree_node_subnodes\'),        subnodeElement: node.$el.find(\'.aa_tree_node\')      }    }  });}]]></Javascript></xtml></Component></xtml><xtml ns="jbartdb" plugin="jbartdb"><Component id="CreateNewNodeInJBartDB" type="action.Action" execution="native"><Param name="NodeXml" codemirror="true" codemirrorType="xml" Default="&lt;xml _type=&quot;mytype&quot; /&gt;" /><Param name="AddTimestampToID" type="data.Boolean" Default="true" /><Param name="OnSuccess" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="saved" Text="Item creatred" /></Param><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not add an item" /></Param></Component><Component id="SaveNodeInJBartDB" type="action.Action"><Param name="Node" /><Param name="OnSuccess" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="saved" Text="Item saved" /></Param><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not add an item" /></Param><xtml t="jbartdb.CreateNewNodeInJBartDB" NodeXml="%$Node%" AddTimestampToID="false"><OnSuccess t="xtml.UseParam" Param="OnSuccess" /><OnError t="xtml.UseParam" Param="OnError" /></xtml></Component><Component id="DeleteNodeInJBartDB" type="action.Action" execution="native"><Param name="Node" /><Param name="OnSuccess" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="saved" Text="Item deleted" /></Param><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not delete item" /></Param></Component><Component id="CloneNodeInJBartDB" type="action.Action" execution="native"><Param name="Node" /><Param name="OnSuccess" type="action.Action" script="true" description="New created node as input" /><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not create an item" /></Param></Component><Component id="SaveNodeAsync" type="action_async.Action" execution="native"><Param name="Node" /></Component><Component id="JBartDBNode" type="data_async.Data" execution="native"><Param name="ID" essential="true" /><Param name="ContentType" essential="true" /><Param name="OnLoading" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="loading" Text="Loading item" /></Param><Param name="OnLoad" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="clear" Text="" /></Param><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not load item" /></Param></Component><Component id="JBartDBQuery" type="data_async.Data" execution="native"><Param name="ContentType" essential="true" /><Param name="HeadersOnly" Default="true" essential="true" /><Param name="OnError" type="action.Action" script="true"><Default t="notification_box.ShowNotification" Status="error" Text="Could not load items" /></Param></Component><Component id="LoadFullNodeFromHeader" type="action.Action" execution="native"><Param name="HeaderXml" Default="%%" /><Param name="DoNotLoadIfPresent" type="data.Boolean" Default="true" /></Component></xtml><xtml ns="jbstudio"><Component id="GetOrCreateUserInfoApiCall" type="jbart.ApiCall" light="false" execution="native"></Component><Component id="UserBox" type="field.Fields"><xtml t="control.Button" ID="jbstudio_user" Title="User"><ButtonText t="text.FirstSucceeding"><Item value="%$JBartUserInfo/@name%"/><Item value="%$JBartUserInfo/@id%"/><Item value="Login"/></ButtonText><Style t="ui.CustomCss"><Style t="btn.HyperlinkWithArrow"/><Css><![CDATA[.text { cursor:pointer;     font-family:"lucida grande",tahoma;     color:white; font-size: 11px;     text-decoration: none;     display: inline-block;  }  #this:hover .text { text-decoration:underline; }  .arrow-down {     width: 0px; height: 0px;     margin-left: 4px;     border-top: 5px solid #D3C8C8;     border-bottom: 3px solid transparent;     border-right: 4px solid transparent;     border-left: 4px solid transparent;     display: inline-block;     vertical-align: text-bottom;   }  ]]></Css></Style><Action t="action.IfThenElse" If1="false" If="%$JBartUserInfo/@id% == \'\'"><Then t="operation.OpenDialog"><Style t="dialog_style.DefaultPopup"/><Feature1 t="dlg.ArrowToLaunchingElement"/><Contents t="ui.InnerPage"><Field t="control.Label" ID="Login_with_one_of_these_providers_" Title="Login with one of these providers:"><Style t="uitext.PlainText"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_feature.Layout"><Css><![CDATA[#this { padding-bottom: 6px; }#wrapper { }]]></Css></FieldAspect></Field><Field t="control.Layout" Title="Group"><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Button" Title="Google"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://jbartapps.appspot.com/_ah/login_redir?claimid=www.google.com/accounts/o8/id&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Field t="field.Button" Title="Open ID"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="300,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://jbartapps.appspot.com/_ah/login_redir?claimid=myopenid.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Field t="field.Button" Title="Yahoo"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="100,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://jbartapps.appspot.com/_ah/login_redir?claimid=yahoo.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Field t="field.Button" Title="AOL"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="200,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://jbartapps.appspot.com/_ah/login_redir?claimid=aol.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Layout t="ui.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[#this>div { float: left; padding: 0 10px 10px 0; }#this { width: 230px; }]]></Css><Javascript><![CDATA[function(group) {    group.addFields(\'.field\',function(field) { field.setControl(\'.field\'); });}]]></Javascript></Layout></Field></Contents><Feature t="dlg.Location"><Location t="dlg.NearLauncher" DeltaY="5"/></Feature></Then><Else t="operation.OpenDialog"><Style t="dialog_style.DefaultPopup"/><Feature1 t="dlg.ArrowToLaunchingElement"/><Contents t="ui.InnerPage"><Field t="control.Layout" Title="Group"><FieldAspect t="field_aspect.HideTitle"/><Field t="control.Label" Title="current user id is %$JBartUserInfo/@id%"><Style t="uitext.PlainText"/></Field><Layout t="layout.Default"/><Field t="control.Layout" ID="Buttons" Title="Buttons"><Layout t="layout.HorizontalHtmlTable" Spacing="20px"/><Field t="control.Button" ID="Sign_Out" Title="Sign Out"><Style t="btn.Hyperlink"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://jbartapps.appspot.com/_ah/openid_logout?continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><FieldAspect t="field_feature.Layout"><Css><![CDATA[#this { padding-top: 25px; }]]></Css></FieldAspect></Field></Field></Contents></Else></Action><FieldAspect t="field_feature.Css"><Css><![CDATA[#wrapper { position: absolute;  right: 5px; top: 15px;}]]></Css></FieldAspect></xtml></Component></xtml><xtml ns="menu"><Type id="MenuItem" ><MoreComponents><component id="menu.MenuItems" itemsParam="MenuItem" /></MoreComponents></Type><Type id="ContextMenu" /><Type id="Menu" /><Component id="MenuItem" type="menu.MenuItem"><Param name="Text" essential="true"/><Param name="Action" type="action.Action" script="true" essential="true"/><Param name="Image"><Default value="%$_Images%/studio/bullet1616.gif"/></Param><Param name="Selectable" type="data.Boolean"/><Param name="IsSelected" type="data.Boolean" script="true"/><Param name="SubItem" type="menu.TreeMenuItem[]"/><Param name="ExtraData"/><Param name="ID"/><xtml t="xtml.Params"><Param name="Text" t="text.MultiLang" Pattern="%$Text%" Dynamic="true"/><Param name="Image" value="%$Image%"/><Param name="ExtraData" value="%$ExtraData%"/><Param name="Selectable" value="%$Selectable%"/><Param name="SubItems" value="%$SubItem%"/><Param name="Input" value="%%"/><ScriptParam name="IsSelected" t="xtml.UseParam" Param="IsSelected"/><ScriptParam name="Action" t="xtml.UseParam" Param="Action"><Var name="MenuItemExtraData" value="%$ExtraData%"/></ScriptParam><Param value="%$ID%" name="ID"/></xtml></Component><Component id="DynamicMenuItems" type="menu.MenuItem"><Param name="Items"/><Param name="Text" script="true"/><Param name="Action" type="action.Action" script="true"/><Param name="Image" script="true"/><Param name="ExtraData" script="true" Default="%%"/><Param name="Selectable" type="data.Boolean" script="true"/><Param name="IsSelected" type="data.Boolean" script="true"/><Param name="SubItems" value="%$SubItem%" /><Param name="ItemClass" script="true"/><xtml t="data.Pipeline"><Item value="%$Items%"/><Item t="xtml.Params"><Param name="Text" t="xtml.UseParam" Param="Text" Input="%%"/><Param name="Image" t="xtml.UseParam" Param="Image" Input="%%"/><Param name="ExtraData" t="xtml.UseParam" Param="ExtraData" Input="%%"/><Param name="Selectable" t="xtml.UseParam" Param="Selectable" Input="%%"/><Param name="SubItems" value="%$SubItems%" /><Param name="Input" value="%%" /><ScriptParam name="IsSelected" t="xtml.UseParam" Param="IsSelected"/><ScriptParam name="Action" t="xtml.UseParam" Param="Action" Input="%$MenuItemInfo/Input%"><Var name="MenuItemExtraData" value="%$MenuItemInfo/ExtraData%"/></ScriptParam><Param name="ItemClass" t="xtml.UseParam" Param="ItemClass" Input="%%"/></Item></xtml></Component><Component id="Menu" type="menu.Menu" databind="true"><Param name="Item" type="menu.MenuItem[]" /><Param name="FilterForSelectedItem" type="data.Boolean" script="true" /><Param name="Style" type="menu.MenuStyle" script="true" paramVars="_MenuContext"><Default t="menu.SimpleVerticalMenu" /></Param><Param name="AlwaysOneSelected" type="data.Boolean" /><xtml t="xtml.UseParam" Param="Style"><Var name="_MenuContext" t="xtml.Params"><Param name="Input" value="%%" /><Param name="Items" value="%$Item%" /><Param name="AlwaysOneSelected" value="%$AlwaysOneSelected%" /><ScriptParam name="FilterForSelectedItem" t="xtml.UseParam" Param="FilterForSelectedItem" /><ScriptParam name="MenuItemClass" value="menuitem %$Selected%"><Var name="Selected" value="selected"><Condition t="xtml.RunXtml" Xtml="%$_MenuContext/FilterForSelectedItem%" /></Var></ScriptParam></Var></xtml></Component><Component id="SimpleVerticalMenu" type="menu.MenuStyle"><xtml t="ui.DynamicList"><Items value="%$_MenuContext/Items%"/><Control t="ui.ButtonOld" ><Text t="text.MultiLang" Dynamic="true" Pattern="%Text%" /><Class t="xtml.RunXtml" Xtml="%$_MenuContext/MenuItemClass%"/><Style t="ui.ButtonAsHyperlink" /><OnClick t="xtml.RunXtml" Xtml="%Action%" Input="%$_MenuContext/Input%" ForceInputParam="true"><Var name="MenuItemInfo" value="%%"/></OnClick></Control></xtml></Component><Component id="ContextMenu" type="menu.ContextMenu" execution="native"><Param name="Item" type="menu.MenuItem[]" essential="true"/><Param name="FooterMessage"/><Param name="HeaderMessage"/><Param name="Css" Default=".menu_item {font-size:14px; } .contextmenu_span { display: inline-block; vertical-align: top; color: #333; padding: 5px 3px 0 3px; } .contextmenu_li.selected span { color: #FFF; } .contextmenu { position: absolute; min-width: 120px; z-index:9999; } #this .contextmenu_ul { border: solid 1px #CCC;  background: #EEE;  padding:4px 2px;  margin: 0px; z-index: 99999;} li { cursor:pointer; list-style: none; margin: 0px; padding: 1px 8px;} li:hover { background-color: #3399FF; } li:hover span { color: #FFF; } li.selected { background-color: #3399FF; } .context_menu_footer_message { background:#E4E4E4;color:gray;font-size:12px;padding:4px 8px; } .context_menu_header_message { background:#E4E4E4;color:black; font-weight:bold; font-size:14px;padding:4px 8px; } .contextmenu_image { padding-right:6px; padding-top:4px; }" /></Component><Component id="OpenContextMenu" type="action.Action"><Param name="Menu" type="menu.ContextMenu" script="true" essential="true"/><Param name="FromMenu" type="enum"><value>vmenu</value><value>hmenu</value></Param><xtml t="xtml.UseParam" Param="Menu"><Var name="ContextMenuInput" t="data.FirstSucceeding"><Item value="%$ContextMenuInput%"/><Item value="%%"/></Var><Var name="_ContextMenuContext" t="xtml.Params"><Param name="FromMenu" value="%$FromMenu%"/><Param name="Input" value="%$ContextMenuInput%"/></Var></xtml></Component><Component id="MenuItems" type="menu.MenuItem"><Param name="MenuItem" type="menu.MenuItem[]" /><xtml value="%$MenuItem%" /></Component><Component id="RegisterContextMenuToControl" type="action.Action" light="false"><Param name="Control" type="ui.Control" /><Param name="Menu" type="menu.ContextMenu" script="true" /><xtml t="ui.BindEvent" Event="mouserightclick"><Var name="ContextMenuInput" /><Data value="%$Control%" /><Action t="menu.OpenContextMenu"><Menu t="xtml.UseParam" Param="Menu" /></Action></xtml></Component><Component id="SetContextMenu" type="xml.Change"><Param name="Menu" type="menu.ContextMenu" script="true" /><xtml t="ui.BindEvent" Event="mouserightclick"><Var name="ContextMenuInput" value="%$InputForChanges%" /><Action t="menu.OpenContextMenu"><Menu t="xtml.UseParam" Param="Menu" /></Action></xtml></Component><Component id="RunContextMenuItem" type="action.Action" light="false"><Param name="Control" /><Param name="MenuItemText" /><xtml t="action.RunActions"><Action t="uiaction.MouseRightClick" RunOn="%$Control%" /><Action t="action.IfThenElse"><Var name="ItemToClick" t="data.Pipeline"><Item t="menu.ContextMenuContents" /><Item t="ui.ElementOfClass" Cls="contextmenu_span" OnlyFirst="false" /><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsEqual" Item1="%$MenuItemText%"><Item2 t="xml.InnerTextValue" /></Filter></Item></Var><If t="yesno.Empty" Data="%$ItemToClick%" /><Then t="menu.CloseContextMenu" /><Else t="uiaction.Click" RunOn="%$ItemToClick%" /></Action></xtml></Component><Component id="ContextMenuContents" type="ui.Control" execution="native" /><Component id="CloseContextMenu" type="action.Action" execution="native" light="false"/></xtml><xtml ns="hebrew"><Component id="HebrewBasicTranslations" type="text.MultiLangSuite"><xtml t="text.MultiLangSuite" Language="hebrew"><Pattern Original="OK" Tranlation="" /><Pattern Original="Cancel" Tranlation="" /><Pattern Original="Edit" Tranlation="" /><Pattern Original="Update" Tranlation="" /><Pattern Original="Print" Tranlation="" /><Pattern Original="Try it yourself" Tranlation=" " /><Pattern Original="Data" Tranlation="" /><Pattern Original="Yes" Tranlation="" /><Pattern Original="No" Tranlation="" /><Pattern Original="Usage Exercise" Tranlation=" " /><Pattern Original="Customization Exercise" Tranlation=" " /><Pattern Original="Please enter value for %$FieldTitle%" Tranlation="    %$FieldTitle%" /><Pattern Original="login" Tranlation="" /><Pattern Original="title" Tranlation="" /><Pattern Original="body" Tranlation="" /><Pattern Original="Create" Tranlation="" /><Pattern Original="type" Tranlation="" /><Pattern Original="user" Tranlation="" /><Pattern Original="password" Tranlation="" /><Pattern Original="add %$_WriteContext/NameOfItem%" Tranlation=" %$_WriteContext/NameOfItem%" /><Pattern Original="add %$Item%" Tranlation=" %$Item%" /><Pattern Original="delete %$Item%" Tranlation=" %$Item%" /><Pattern Original="delete %$_WriteContext/NameOfItem%" Tranlation=" %$_WriteContext/NameOfItem%" /><Pattern Original="delete" Tranlation="" /><Pattern Original="Delete" Tranlation="" /><Pattern Original="name" Tranlation="" /><Pattern Original="Name" Tranlation="" /><Pattern Original="new %$ContentTypeDisplay%" Tranlation=" %$ContentTypeDisplay%" /><Pattern Original="new %$_WriteContext/NameOfItem%" Tranlation=" %$_WriteContext/NameOfItem%" /><Pattern Original="more" Tranlation="" /><Pattern Original="no items available" Tranlation="  -   " /><Pattern Original="Are you sure ?" Tranlation=" /  ?" /><Pattern Original="Are you sure you want to delete?" Tranlation=" /    ?" /><Pattern Original="Are you sure you want to delete %$CountItems% Items?" Tranlation=" /    %$CountItems% ?" /><Pattern Original="Delete \'%$Item%\' ?" Tranlation="  \'%$Item%\' ?" /><Pattern Original="save" Tranlation="" /><Pattern Original="loading..." Tranlation="..." /><Pattern Original="delete %$ContentTypeDisplay%" Tranlation=" %$ContentTypeDisplay%" /><Pattern Original="confirm delete" Tranlation=" " /><Pattern Original="are you sure you want to delete %$ContentTypeDisplay% %@name% ?" Tranlation="   %$ContentTypeDisplay% \'%@name%\' ?" /><Pattern Original="user name" Tranlation=" " /><Pattern Original="logout" Tranlation="" /><Pattern Original="property" Tranlation="" /><Pattern Original="value" Tranlation="" /><Pattern Original="new value" Tranlation=" " /><Pattern Original="edit %%" Tranlation=" %%" /><Pattern Original="are you sure you wish to delete ?" Tranlation=" /    ?" /><Pattern Original="are you sure you wish to delete the %$CTDisplay% \'%$NodeDisplay%\' ?" Tranlation=" /    %$CTDisplay% \'%$NodeDisplay%\' ?" /><Pattern Original="users" Tranlation="" /><Pattern Original="admin" Tranlation=" " /><Pattern Original="time" Tranlation="" /><Pattern Original="Close" Tranlation="" /><Pattern Original="delete %$ContentType%" Tranlation=" %$ContentType%"/><Pattern Original="shared %$Plural%:" Tranlation="%$Plural% :"/><Pattern Original="share %$ContentType%" Tranlation=" %$ContentType%"/><Pattern Original="cancel share" Tranlation=" "/><Pattern Original="my %$Plural%:" Tranlation="%$Plural% :"/><Pattern Original="date" Tranlation=""/><Pattern Original="time" Tranlation=""/><Pattern Original="Add %$Title%" Tranlation=" %$Title%"/><Pattern Original="%$ContentType% %$CmsArtCurrentNode/@title% copied to list" Tranlation="%$ContentType% \'%$CmsArtCurrentNode/@title%\'    "/><Pattern Original="here" Tranlation=""/><Pattern Original="login to have your own list" Tranlation="    "/><Pattern Original="error while saving" Tranlation="   ,    "/><Pattern Original="more (total %$Count% items) ..." Tranlation=" (   %$Count% ) ..."/><Pattern Original="%$ContentTypeDisplay% deleted" Tranlation="%$ContentTypeDisplay% "/><Pattern Original="no filter" Tranlation=" "/><Pattern Original="user \'%%\' does not exist" Tranlation="    \'%%\'"/><Pattern Original="new user" Tranlation=" "/><Pattern Original="Type your name" Tranlation="   "/><Pattern Original="your real name" Tranlation=" "/><Pattern Original="\'%%\' is taken. Please choose another one" Tranlation=" \'%%\' .     ."/><Pattern Original="email" Tranlation=" "/><Pattern Original="Email" Tranlation=" "/><Pattern Original="user name must be in english" Tranlation="    "/><Pattern Original="Select %%" Tranlation=" %%"/><Pattern Original="current" Tranlation=""/><Pattern Original="Edit %$ItemTitle%" Tranlation=" %$ItemTitle%"/><Pattern Original="Edit ..." Tranlation=" ..."/><Pattern Original="my %$Plural%" Tranlation="%$Plural% "/><Pattern Original="groups" Tranlation=""/><Pattern Original="size: 16x16" Tranlation=": 16x16"/><Pattern Original="edit" Tranlation=""/><Pattern Original="All %$Plural%" Tranlation=" %$Plural%"/><Pattern Original="related %$Plural%:" Tranlation="%$Plural% :"/><Pattern Original="mail sent successfully" Tranlation="  "/><Pattern Original="mail send has failed" Tranlation="  "/><Pattern Original="The %$ContentType% \'%$NodeDisplay%\' created successfully" Tranlation="%$ContentType% \'%$NodeDisplay%\'  "/><Pattern Original="new %$ContentType%" Tranlation="%$ContentType% "/><Pattern Original="Search:" Tranlation=":"/><Pattern Original="Terms of use" Tranlation=" "/><Pattern Original="Missing Value" Tranlation="  "/><Pattern Original=" and " Tranlation=" "/><Pattern Original="Save" Tranlation=""/><Pattern Original="the %$CTDisplay% \'%%\' already exists" Tranlation="%$CTDisplay% \'%%\'  /"/><Pattern Original="\'%%\' is not a valid %$Title%" Tranlation="\'%%\'  %$Title% .      ."/><Pattern Original="Details" Tranlation=""/><Pattern Original="set password" Tranlation=" "/><Pattern Original="you have to set your password on first login" Tranlation="      "/><Pattern Original="new password" Tranlation=" "/><Pattern Original="The %$ContentType% \'%$NodeDisplay%\' saved" Tranlation="%$ContentType% \'%$NodeDisplay%\' "/><Pattern Original="Id" T=""/><Pattern Original="Created By" T=" &quot;" /><Pattern Original="override" T=" " /><Pattern Original="recalc" T=" " /><Pattern Original="Open" T="" /><Pattern Original="Hours" T="" /><Pattern Original="Days" T="" /><Pattern Original="Day" T="" /><Pattern Original="Year" T="" /><Pattern Original="Minutes" T="" /><Pattern Original="Minute" T="" /><Pattern Original="today" T="" /><Pattern Original="Today" T="" /><Pattern Original="Date Range" T=" " /><Pattern Original="From" T="" /><Pattern Original="To" T=" " /><Pattern Original="all dates" T=" " /><Pattern Original="(clean all filters)" T="( )" /><Pattern Original="%$_OriginalField/Title% Filter" T="%$_OriginalField/Title%  " /><Pattern Original="to" T="" /><Pattern Original="from the beginning of this month" T=" " /><Pattern Original="from the beginning of this quarter" T=" " /><Pattern Original="from the beginning of this year" T=" " /><Pattern Original="last 7 days" T="-7  " /><Pattern Original="last 30 days" T="-30  " /><Pattern Original="last 12 months" T="-12  " /><Pattern Original="last month" T=" " /><Pattern Original="last week" T=" " /><Pattern Original="custom range" T=" " /><Pattern Original="by expression" T=" " /><Pattern Original="clear" T=" " /><Pattern Original="Clear All" T=" " /><Pattern Original="Select All" T=" " /><Pattern Original="Wrong password" T=" " /><Pattern Original="Apply" Tranlation="" /><Pattern Original="New %$_Cntr/Items/ItemTypeName%" T=" %$_Cntr/Items/ItemTypeName%" /><Pattern Original="Edit %$_Cntr/Items/ItemTypeName%" T=" %$_Cntr/Items/ItemTypeName%" /><Pattern Original="%$_Cntr/Items/ItemTypeName% details" T=" %$_Cntr/Items/ItemTypeName%" /><Pattern Original="Delete %$Cntr/Items/ItemTypeName%" T=" %$Cntr/Items/ItemTypeName%" /><Pattern Original="New %$Title%" T=" %$Title%" /><Pattern Original="Edit %$Title%" T=" %$Title%" /><Pattern Original="Edit %$Title%" T=" %$Title%" /><Pattern Original="Are you sure ?" T="   ?" /><Pattern Original="Filter By %$_OriginalField/Title%" T=" &quot; %$_OriginalField/Title%" /><Pattern Original="between..." T=" ..." /><Pattern Original="by expression..." T=" ..." /><Pattern Original="of" T="" /><Pattern Original="Of" T="" /><Pattern Original="show all items" T="   " /><Pattern Original="loading more..." T="  ..." /><Pattern Original="Keep me logged in" T="  " /><Pattern Original="to" T="" /><Pattern Original="Total" T="&quot;" /><Pattern Original="graph settings..." T=" ..." /><Pattern Original="Graph Settings" T=" " /><Pattern Original="Group by %Title%" T=" &quot; %Title%" /><Pattern Original="Group By" T=" &quot;" /><Pattern Original="Ungroup" T=" " /><Pattern Original="Group Amount" T=" " /><Pattern Original="Name Of Empty Group" T="  " /><Pattern Original="Graph Type" T=" " /><Pattern Original="Properties" T="" /><Pattern Original="Restore to defaults" T="  " /><Pattern Original="Graph Data" T=" " /><Pattern Original="Single Column" T=" " /><Pattern Original="Height" T="" /><Pattern Original="Width" T="" /><Pattern Original="Frame Width" T=" " /><Pattern Original="Frame Height" T=" " /><Pattern Original="Title" T="" /><Pattern Original="Google Properties" T="  " /><Pattern Original="e.g. { title: \'my title\' }" T=": { title: \'my title\' }" /><Pattern Original="table" T="" /><Pattern Original="auto saved" T=" " /><Pattern Original="languages" T="" /><Pattern Original="language" T="" /><Pattern Original="new language" T=" " /><Pattern Original="delete language" T=" " /><Pattern Original="server connection error" T="  " /><Pattern Original="no value" T=" "/><Pattern Original="All" T=""/><Pattern Original="is read" T=" "/><Pattern Original="is not read" T="  "/><Pattern Original="read" T=""/><Pattern Original="unread" T=" "/><Pattern Original="No Matching Items Found" T="   "/><Pattern Original="%$TotalItemsCount% Items" T="%$TotalItemsCount% "/><Pattern Original="%$FilteredItemsCount% of %$TotalItemsCount%" T="%$FilteredItemsCount%  %$TotalItemsCount%"/><Pattern Original="enter image url" T="   "/><Pattern Original="Years" T=""/><Pattern Original="Height" T=""/><Pattern Original="Width" T=""/><Pattern Original="Hour" T=""/></xtml></Component></xtml><xtml ns="parser"><Component id="RemoveSection" type="data.Data" execution="native"><Param name="BeginPattern" essential="true"/><Param name="EndPattern" essential="true"/><Param name="Html" Default="%%"/></Component><Component id="ExtractBody" type="data.Data" execution="native"><Param name="Html" Default="%%"/></Component><Component id="RemoveHtmlScripts" type="data.Data"><Param name="Html" Default="%%"/><xtml t="parser.RemoveSection" Html="%$Html%" BeginPattern="&lt;script" EndPattern="&lt;/script&gt;"/></Component><Component id="RemoveHtmlRemarks" type="data.Data"><Param name="Html" Default="%%"/><xtml t="parser.RemoveSection" Html="%$Html%" BeginPattern="&lt;!--" EndPattern="--&gt;"/></Component><Component id="RemoveHtmlTags" type="data.Data"><Param name="Html" Default="%%"/><xtml t="parser.RemoveSection" Html="%$Html%" BeginPattern="&lt;" EndPattern="&gt;"/></Component><Component id="CleanHtml" type="data.Data"><Param name="Html" Default="%%"/><xtml t="data.Pipeline"><Item value="%$Html%"/><Item t="parser.RemoveHtmlRemarks"/><Item t="parser.ExtractBody"/><Item t="parser.RemoveHtmlScripts"/></xtml></Component></xtml><xtml ns="pivot"><Type id="PivotAspect"/><Component id="Pivot" type="uiaspect.Aspect" execution="native"><Param name="GroupByField" type="field.Fields"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true"/><Param name="Fields" type="field.Fields" script="true"/><Param name="Operations" type="operation.Operations" script="true"/><Param name="PivotAspect" type="pivot.PivotAspect[]" script="true"/><NativeHelper name="Control" t="ui.ItemList" Class="aa_pivot"><Operations t="xtml.UseParam" Param="Operations"/><Fields t="field.Fields"><Field t="xtml.UseParam" Param="Fields"/><Field value="%$_Pivot/ItemsOfGroupField%"/></Fields><Items t="data_items.Items"><Items t="object.RunMethod" Object="%$_Pivot%" Method="Group"/></Items><Aspect t="xtml.UseParamArray" Param="Aspect"/></NativeHelper></Component><Component id="ExposedFilters" type="pivot.PivotAspect" execution="native"><Param name="Fields" type="field.Fields"/></Component><Component id="TotalLine" type="pivot.PivotAspect" execution="native"/><Component id="Count" type="field.Fields" category="aggregation"><Param name="Title"><Default value="Count"/></Param><xtml t="field.Field1" ID="%$Title%" Title="%$Title%"><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Control"><Control t="ui.ButtonOld" Text="%=Count(Items)%"><OnClick t="dialog.OpenDialog"><Var name="FormulaVal" t="xtml.UseParam" Param="Formula"/><Dialog t="dialog.Dialog" Title="%$Title% - %$FormulaVal%"><Content t="ui.List"/></Dialog></OnClick><Style t="ui.ButtonAsHyperlink"/></Control></FieldAspect><FieldData t="data_items.Items" Items="%Items/Items%" ItemTypeName="%Items/ItemTypeName%"/></xtml></Component><Component id="AggregationField" type="field.Fields" category="aggregation"><Param name="Title"/><Param name="Formula" type="data.Data" script="true"><Default value="%=Count(Items)%"/></Param><Param name="DrillDownPage" type="ui.MultiplePage"><Default t="ui.MultiplePage"><Field value="%$_Pivot/InnerContainer/Fields%" /><Aspect t="uiaspect.Table" /></Default></Param><Param name="ItemsFilter" type="data.Boolean" script="true"><Default value="true"/></Param><xtml t="field.Field1" ID="%$Title%" Title="%$Title%"><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Control"><Control t="ui.ButtonOld"><Text t="xtml.UseParam" Param="Formula"/><OnClick t="dialog.OpenDialog"><Var name="FormulaVal" t="xtml.UseParam" Param="Formula"/><Dialog t="dialog.Dialog" Title="%$Title% - %$FormulaVal%"><Content t="ui.ShowMultiplePage" Page="%$DrillDownPage%" Items="%%"/></Dialog></OnClick><Style t="ui.ButtonAsHyperlink"/></Control></FieldAspect><FieldData t="data_items.Items" ItemTypeName="%Items/ItemTypeName%"><Items t="data.Pipeline"><Item value="%Items/Items%"/><Item t="yesno.PassesFilter"><Filter t="xtml.UseParam" Param="ItemsFilter"/></Item></Items></FieldData><FieldAspect t="field_aspect.TextSummary"><Text t="xtml.UseParam" Param="Formula"/></FieldAspect></xtml></Component></xtml><xtml ns="plugins"><Component id="PluginDefinitions" type="data.Data"><xtml t="xml.WithChanges"><Xml t="xml.Xml"><plugins><plugin id="jbartdb" name="JBart DB" description="jBart cloud repository based on Google App Engine" /><plugin id="googledocs" name="Google Docs" description="Use google spreadsheet as your widget data" /><plugin id="charts" name="Charts" description="jBart integration with google charts and fusion charts (labs)" /><plugin id="jbart_editor" name="jBart Studio" description="Embed jBart Design-time capabilities in your widgets. Useful for setup and admin apps" /><plugin id="mobile" name="Mobile" description="Mobile web-apps styles and capabilities (labs)" /><plugin id="wix" name="Wix" description="Tools for building Wix Apps (labs)" /></plugins></Xml><Change t="xml.AddChildren"><Children t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="jbart.PluginDefinition" /><Item t="xtml.ComponentDefinition" ID="%%" ToXtml="true"/><Item t="xtml.RunXtml" Xtml="%%" /></Children></Change></xtml></Component></xtml><xtml ns="richtext"><Type name="Buttons" /><Component id="RichText" type="ui.TextControlStyle" execution="native"><Param name="Height"><Default value="300px" /></Param><Param name="Width"><Default value="100%" /></Param><Param name="Buttons" type="richtext.Buttons" ><Default t="richtext.Default" /></Param><Param name="Direction" ><Default t="data.IfThenElse" If="%$Language% == \'hebrew\'" Then="Right to Left" Else="Left to Right" /></Param><Param name="Css"></Param><NativeHelper name="Textarea" t="ui.Textarea" Autogrow="false"/></Component><Component id="Custom" type="richtext.Buttons"><Param name="Buttons" type="data.Data" description="comma sperated, use | for seperator and CR for new line" /><xtml value="%$Buttons%" /></Component><Component id="Simple" type="richtext.Buttons"><xtml value="forecolor,backcolor,|,bullist,numlist,|,bold,italic,underline,strikethrough" /></Component><Component id="Office" type="richtext.Buttons"><xtml value="save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect,CR,cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor,CR,tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen,CR,insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage" /></Component><Component id="LightOffice" type="richtext.Buttons"><xtml value="pastetext,pasteword,cut,copy,paste,|,removeformat,|,forecolor,backcolor,|,bullist,numlist,|,indent,outdent,|,undo,redo,|,link,unlink,|,bold,italic,underline,strikethrough,phpimage,code,CR,pastetext,pasteword,|,search,replace,|,justifyleft,justifycenter,justifyright,justifyfull,ltr,rtl,tablecontrols,|,hr,|,preview,print,|,fullscreen" /></Component></xtml><xtml ns="server"><Type id="ServerCall"/><Type id="PostData"/><Component id="CallServer" type="action.Action" execution="native"><Param name="Call" type="server.ServerCall[]"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="ProgressIndication" type="data.Data"><Default value="true"/></Param></Component><Component id="BasicServerCall" type="server.ServerCall" execution="native"><Param name="Method" type="enum"><Default value="get"/><Value>get</Value><Value>post</Value></Param><Param name="VarNameForResult"/><Param name="Reusable" type="data.Boolean"><Default value="true"/></Param><Param name="Url"/><Param name="PostData" type="server.PostData"/><Param name="OnLoad" type="action.Action" script="true"/></Component><Component id="File" type="server.ServerCall" synonyms="FileFromUrl"><Param name="VarNameForResult"/><Param name="Reusable" type="data.Boolean"><Default value="true"/></Param><Param name="Url"/><Param name="OnLoad" type="action.Action" script="true"/><xtml t="server.BasicServerCall" Method="get" VarNameForResult="%$VarNameForResult%" Reusable="%$Reusable%" Url="%$Url%"><OnLoad t="xtml.UseParam" Param="OnLoad"/></xtml></Component><Component id="PostUrl" type="server.ServerCall"><Param name="VarNameForResult"/><Param name="Reusable" type="data.Boolean"><Default value="false"/></Param><Param name="Url"/><Param name="PostData" type="server.PostData"/><Param name="OnLoad" type="action.Action" script="true"/><xtml t="server.BasicServerCall" Method="post" VarNameForResult="%$VarNameForResult%" Reusable="%$Reusable%" Url="%$Url%"><PostData value="%$PostData%" /><OnLoad t="xtml.UseParam" Param="OnLoad"/></xtml></Component><Component id="ParallelCalls" type="server.ServerCall" execution="native"><Param name="Call" type="server.ServerCall[]" script="true"/><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/></Component><Component id="ImmediateResult" type="server.ServerCall" execution="native"><Param name="VarNameForResult"/><Param name="Reusable" type="data.Boolean"><Default value="false"/></Param><Param name="Result" type="data.Data"/><Param name="OnLoad" type="action.Action" script="true"/></Component><Component id="ImmediateAction" type="server.ServerCall"><Param name="VarNameForResult"><Default value="Result"/></Param><Param name="Action" type="data.Data"/><xtml t="server.ImmediateResult" VarNameForResult="%$VarNameForResult%"><Result t="action.ActionReturningResult"><Action t="xtml.UseParam" Param="Action"/><Result t="xml.Xml"><result type="success"/></Result></Result></xtml></Component><Component id="ExportVirtualFile" type="action.Action" execution="native"><Param name="FileName" essential="true"/><Param name="Content" essential="true"/><Param name="ContentType"><Default value="text/plain"/></Param><Param name="Url" script="true"><Default value="main.php?op=exportFile&amp;cnt=%$Counter%"/></Param></Component><Component id="PostData" type="server.PostData"><Param name="Name" essential="true"/><Param name="Value" essential="true"/><xtml t="xtml.Params"><Param name="Name" value="%$Name%"/><Param name="Value" value="%$Value%"/></xtml></Component><Component id="MultiplePostData" type="server.PostData"><Param name="PostData" type="server.PostData[]"/><xtml value="%$PostData%"/></Component><Component id="OnStartCallingServer" type="action.Action" light="false"><xtml t="xtml.RunXtml" Xtml="%$_ProgressContext/StartCallingServer%" /></Component><Component id="OnEndCallingServer" type="action.Action" light="false"><xtml t="xtml.RunXtml" Xtml="%$_ProgressContext/EndCallingServer%"/></Component></xtml><xtml ns="twitter"><Component id="TwitterShare" type="field.Control" execution="native"><Param name="Url" /><Param name="Text" /><Param name="ShowCount" type="data.Boolean" Default="true" /><Param name="Large" type="data.Boolean" /></Component></xtml><xtml ns="studio_suggest" light="false"><Type id="Suggestion" /><Component id="Suggestions" type="data.Data"><Param name="FieldXtml" Default="%%" /><xtml t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="studio_suggest.Suggestion" /><Item t="xtml.RunXtmlByComponentId" ComponentID="%%" Input="%$FieldXtml%" /></xtml></Component><Component id="Suggestion" type="data.Data"><Param name="Title" /><Param name="Action" type="action.Action" script="true" /><xtml t="object.ObjectFromParams" /></Component><Component id="SuggestAddingFieldAspect" type="data.Data"><Param name="Title" /><Param name="FieldAspectPT" /><xtml t="studio_suggest.Suggestion" Title="%$Title%"><Condition t="yesno.IsEmpty" Value="%FieldAspect[@t=\'{$FieldAspectPT}\']%" /><Action t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%%"><Children t="xml.Xml" DynamicContent="true"><FieldAspect t="%$FieldAspectPT%" /></Children></Action><Action t="studio_suggest.EditXtmlInStudio" /></Action></xtml></Component><Component id="SuggestionsGroup" type="field.Fields"><Param name="FieldXtml" Default="%%"/><xtml t="control.Layout"><Field t="control.Label" ID="Suggestions" Title="Suggestions"><Style t="ui.CustomCss"><Style t="uitext.Bold14"/><Css><![CDATA[#this {  font: 13px arial;  font-weight:bold;  color: #222;}]]></Css></Style><FieldAspect t="field_feature.Css"><Css><![CDATA[#this {  padding-top: 20px;  padding-bottom: 10px;}]]></Css></FieldAspect></Field><Field t="field.ItemList" Title="Suggestions"><View t="itemlist2.Simple"/><FieldAspect t="field_aspect.ItemListContainer"><Items t="itemlist.Items"><Items t="studio_suggest.Suggestions" FieldXtml="%$FieldXtml%"/></Items></FieldAspect><Field t="control.Button" Title="Suggestion" ButtonText="%Title%"><Action t="object.RunMethod" Object="%%" Method="Action" Input="%$FieldXtml%"/><Image t="text.FirstSucceeding"><Item value="%Image%"/><Item value="%$_Images%/studio/run.gif"/></Image><Style t="btn.HyperlinkWithImage"/></Field><View t="itemlist2.Simple"/><FieldAspect t="itemlist_aspect.ShowTextWhenNoItems" Text="No studio suggestions"><Style t="uitext.PlainText"/></FieldAspect></Field></xtml></Component><Component id="EditXtmlInStudio" type="action.Action"><xtml t="action.RunActions"><Action t="bart_dt.RefreshDtPopups" /><Action t="bart_dt.OpenTreePopup" Xtml="%%"/><Action t="field_dt.RefreshPreview"/></xtml></Component><!-- Specific Suggestions --><Component id="ItemListSuggestions" type="studio_suggest.Suggestion"><xtml t="data.List"><Item t="studio_suggest.Suggestion" Title="Expand Itemlist (to allow toolbars etc.)"><Condition t="studio_suggest.IsCompactItemlist" /><Action t="studio_suggest.ExpandCompactItemlist"><DoOnContainerXtml t="studio_suggest.EditXtmlInStudio" /></Action></Item><Item t="studio_suggest.Suggestion" Title="Add a Toolbar"><Condition t="yesno.And"><Item t="studio_suggest.IsItemlistContainer" XmlItemsOnly="true" /><Item t="studio_suggest.HasNoInnerFieldWithIDSuffix" Suffix="_Toolbar" /></Condition><Action t="studio_suggest.AddItemlistToolbar" /></Item><Item t="studio_suggest.Suggestion" Title="Share as itemlist snippet"><Condition t="studio_suggest.IsItemlistContainer" XmlItemsOnly="false" /><Action t="studio_suggest.ExportToItemlistTemplates" /></Item></xtml></Component><Component id="PicklistSuggestions" type="studio_suggest.Suggestion"><xtml t="studio_suggest.SuggestAddingFieldAspect" Title="Customize picklist properties (hide searbox etc.)" FieldAspectPT="fld_aspect.PicklistProperties"><Condition value="%FieldType/@t% == \'fld_type.Picklist\'"/></xtml></Component><Component id="AddDetailsInplaceSuggest" type="studio_suggest.Suggestion"><Param name="FieldXtml" Default="%%" /><xtml t="studio_suggest.Suggestion" Title="Add Details Inplace"><Condition t="yesno.And" ><Item value="%@t% == \'field.ItemList\'" /><Item t="yesno.Not"><Of t="fieldgenerator_dt.HasDetailsInplace" Xtml="%$FieldXtml%" /></Item></Condition><Action t="dlg.OpenDialog" Title="Add Details Inplace to Table"><DialogData t="xml.ByTag" /><Contents t="field.ShowFieldControl"><Field t="field.Layout" ID="Group" Title="Group"><Layout t="layout.Vertical" Spacing="16px" /><Field t="field.Text"                Text="Details Inplace Feature allows editing or viewing item details within the table. &#xa;If your item list is not a table or is not prepared to show item details this feature will not work.&#xa;&#xa;This wizard will do the following:&#xa;1. Add \'Details\' Field and copy all existing fields under it.&#xa;2. Add Hypelink feature to the selected field to toggle the details view."                Title=""><Style t="uitext.YellowBox" /><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { max-width: 450px; }#wrapper { }]]></Css></FieldAspect></Field><Field t="field.PropertySheet" Title=""><Field t="field.Field" ID="FieldWithHyperlink" FieldData="%!@HyperlinkFieldID%" Title="Field With Hyperlink"                  ReadOnlyText=""><Type t="field_aspect.Picklist" AllowEmptyValue="" AllowValueNotInOptions="" RecalculateForEachCell=""                    Multiple=""><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="picklist.SystemPopup" FilterTreshold="30"><Css><![CDATA[.aa_no_items_found { opacity: .4; filter: alpha(opacity=40); display:inline-block; padding-top:8px;}]]></Css></PopupStyle></ControlStyle><Options t="picklist.DynamicOptions" Options="%$FieldXtml/Field%" OptionCodeByIndex="" OptionLabel="%@Title%"                      OptionCode="%@ID%" /></Type><FieldAspect t="field_aspect.Description" Description="The selected field will become a hypelink which toggles the inplace details" /></Field><Style t="group.PropertySheet" PropertiesWidth="110px" VerticalSpacing="8px" IndentationOfPicklistOptions="8px" /></Field></Field></Contents><RunOnOK t="studio_suggest.AddDetailsInplace" Xtml="%$FieldXtml%" Config="%%" /></Action></xtml></Component><!-- Suggestion helpers --><Component id="HasNoInnerFieldWithIDSuffix" type="data.Boolean" execution="native"><Param name="Suffix" /></Component><Component id="IsItemlistContainer" type="data.Boolean" execution="native"><Param name="XmlItemsOnly" type="data.Boolean" /></Component><Component id="IsCompactItemlist" type="data.Boolean"><Param name="FieldXtml" Default="%%" /><xtml t="yesno.And"><Item value="%$FieldXtml/@t% == \'field.ItemList\'" /><Item t="yesno.NotEmpty" Value="%$FieldXtml/FieldAspect[@t=\'field_aspect.ItemListContainer\']%" /></xtml></Component><Component id="ItemListXtmlToItemsXtml" type="data.Data"><xtml t="data.FirstSucceeding"><Item value="%FieldAspect[@t=\'field_aspect.ItemListContainer\']/Items%" /><Item value="%Items%" /></xtml></Component><!-- Suggestion actions (generations) --><Component id="ExpandCompactItemlist" type="action.Action"><Param name="FieldXtml" Default="%%" /><Param name="DoOnContainerXtml" type="action.Action" script="true" /><xtml t="action.RunActions"><Var name="NewXtml" t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Field t="field.ItemListContainer" ID="%$FieldXtml%_Cntr" Title="%$FieldXtml/@Title%"></Field></Xml><Change t="xml.AddChildren" Children="%$FieldXtml/FieldAspect[@t=\'field_aspect.ItemListContainer\']/Items%" /><Change t="xml.AddChildren" Children="%$FieldXtml%" /><Change t="xml.Delete" Data="%Field/FieldAspect[@t=\'field_aspect.ItemListContainer\']%" /></Var><Action t="xml.ReplaceXmlElement" Element="%$FieldXtml%" NewElement="%$NewXtml%"><RunOnNewElement t="xtml.UseParam" Param="DoOnContainerXtml" /></Action></xtml></Component><Component id="AddItemlistToolbar" type="action.Action"><Param name="FieldXtml" Default="%%" /><xtml t="action.RunActions"><Action t="action.IfThenElse"><If t="studio_suggest.IsCompactItemlist" FieldXtml="%$FieldXtml%" /><Then t="studio_suggest.ExpandCompactItemlist"><DoOnContainerXtml t="studio_suggest.AddItemlistToolbar" FieldXtml="%%" /></Then><Else t="xml.AddXmlChildren" Parent="%%" Children="%$ToolbarXtml%" AddAsFirst="true"><Var name="ID" value="%@ID%" /><Var name="ItemsXtml" t="data.FirstSucceeding"><Item value="%Items[@t=\'itemlist.XmlItems\']%" /><Item value="%FieldAspect/Items[@t=\'itemlist.XmlItems\']%" /></Var><Var name="PathTag" value="%ItemsXtml/@Tag%" /><Var name="ItemlistXtml" t="xml.FindXmlByAttribute" ParentXml="%$FieldXtml%" Attribute="t" Value="field.ItemList" /><Var name="ChildFields" t="data.Pipeline"><Item value="%$ItemlistXtml/Field[@ID!=\'Details\']%" /></Var><Var name="ToolbarXtml" t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Field t="field.Layout" ID="%$ID%_Toolbar" Title="Toolbar"><Layout t="layout.HorizontalHtmlTable" Spacing="5px"/><FieldAspect t="itemlist_aspect.RefreshOnSelectionChange"/><FieldAspect t="field_feature.Layout"><Css><![CDATA[#this { padding-bottom: 5px; }]]></Css></FieldAspect><Field t="control.Button" ID="Add_%$ID%" Title="Add %$ItemName%"><Style t="btn.HyperlinkWithImage"/><Image t="image.Image" Url="%$_Images%/add1616.gif"/><Action t="operation.OpenDialog" Title="Add"><DialogData t="xml.ByTag" Tag="%$PathTag%"/><Contents t="ui.InnerPage" Title="Add item"><Field t="field.PropertySheet" ID="PropertySheet" Title="Properties" HideTitle="true" /></Contents><RunOnOK t="itemlist_action.AddItemToItemList" /></Action></Field><Field t="control.Button" ID="Delete_%$ID%" Title="Delete"><Style t="btn.HyperlinkWithImage"/><Image t="image.Image" Url="%$_Images%/delete1616.gif"/><FieldAspect t="itemlist_aspect.RefreshOnSelectionChange"/><Action t="itemlist_action.DeleteSelectedItem"/></Field></Field>            </Xml><Change t="xml.AddChildren" Data="%Field[1]/Action/Contents/Field%" Children="%$ChildFields%" CloneChildren="true"/></Var><DoOnAddedChildren t="studio_suggest.EditXtmlInStudio" /></Else></Action></xtml></Component><Component id="AddDetailsInplace" type="action.Actions" description="Adds inplace details to itemlist (design time)"><Param name="Xtml" /><Param name="Config" /><xtml t="action.RunActions"><Var name="HyperlinkField" value="%$Xtml/Field[@ID=\'{$Config/@HyperlinkFieldID}\']%" /><Var name="FieldsForDetails" value="%$Xtml/Field%" /><Action t="xml.AddXmlChildren" Parent="%$Xtml%"><Children t="xml.WithChanges"><Xml t="xml.Xml"><Field t="field.Layout" ID="Details" Title="Details"><Layout t="layout.Vertical" /><Field t="field.PropertySheet" ID="Fields" Title="Fields" /><FieldAspect t="field_aspect.Hidden" /><Field t="field.Button" ID="Close_details" Title="Close details"><Style t="button.Hyperlink" /><Action t="itemlist_action.ToggleDetailsInplace" /><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { } #wrapper { padding-top: 7px; }]]></Css></FieldAspect></Field></Field></Xml><Change t="xml.AddChildren" Data="%Field[@ID=\'Fields\']%" Children="%$FieldsForDetails%" CloneChildren="true" /></Children></Action><Action t="xml.AddXmlChildren" Parent="%$HyperlinkField%"><Children t="xml.Xml"><FieldAspect t="field_aspect.Hyperlink"><Action t="itemlist_action.ToggleDetailsInplace" DetailsField="Details"><Item t="itemlist_item.ItemInContext"/></Action></FieldAspect></Children></Action><Action t="studio_suggest.EditXtmlInStudio" Data="%$Xtml%" /></xtml></Component><Component id="ExportToItemlistTemplates" type="action.Action"><Param name="FieldXtml" Default="%%" /><xtml t="operation.OpenDialog" UsePageData="true" Title="Export to itemlist snippets"><Style t="dialog_style.DefaultDialog"/><Contents t="field.InnerPage" Title="Export to itemlist snippets"><Layout t="layout.Default"/><Field t="field.PropertySheet1" ID="Fields" Title="Fields"><Style t="group.PropertySheet"/><Field t="fld.Field" FieldData="%!@_snippet_name%" ID="Snippet_Name" Title="Snippet Name"><FieldType t="fld_type.EditableText"><Style t="editable_text.JBartTextbox"/></FieldType></Field><Field t="fld.Field" FieldData="%!@_snippet_screenshot%" ID="Snippet_Screenshot" Title="Screenshot"><FieldType t="fld_type.EditableImage" /></Field><FieldAspect t="field_feature.Layout"><Css><![CDATA[#this { padding-bottom: 22px; }]]></Css></FieldAspect></Field></Contents><Feature t="dlg.Buttons"><Layout t="group.Horizontal" Spacing="0"/><Buttons t="dlg.OkCancel" OkLabel="Export"/></Feature><RunOnOK t="action.RunActions" ><Var name="SnippetID" t="text.FirstSucceeding"><Item value="%$FieldXtml/@_snippet_id%" /><Item t="text.ToId" Data="%$FieldXtml/@_snippet_name%" /></Var><Var name="ItemsXtml" t="studio_suggest.ItemListXtmlToItemsXtml" Data="%$FieldXtml%" /><Var name="PreviewXmlItems" t="xtml.RunXtml" Xtml="%$ItemsXtml%"><Input t="aaeditor.ProbeFieldData" FieldXtml="%$FieldXtml%" /></Var><Var name="XmlTag" t="text.FirstSucceeding"><Item t="xml.Tag" Data="%$PreviewXmlItems%" /><Item value="item" /></Var><Var name="NewItemsXtml" t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Items t="itemlist.XmlItems" Tag="%$XmlTag%"><ParentXml t="xml.Xml" _fromSnippet="true"><top/></ParentXml></Items></Xml><Change t="xml.AddChildren" Data="%ParentXml/top%" Children="%$PreviewXmlItems%" CloneChildren="true" /></Var><Var name="ItemlistXtml" t="xml.WithChanges" Xml="%$FieldXtml%"><Change t="xml.ReplaceElement" NewElement="%$NewItemsXtml%"><Element t="studio_suggest.ItemListXtmlToItemsXtml" /></Change></Var><Var name="TemplateNode" t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><snippet id="%$SnippetID%" _type="itemlist_snippet" name="%$FieldXtml/@_snippet_name%" screenshot="%$FieldXtml/@_snippet_screenshot%" visibility="public" /></Xml><Change t="xml.AddChildren" Children="%$ItemlistXtml%" CloseChildren="true" /></Var><Action t="action.WriteValue" To="%!@_snippet_id%" Value="%$SnippetID%" /><Action t="jbartdb.SaveNodeAsync" Node="%$TemplateNode%"></Action></RunOnOK></xtml></Component></xtml><xtml ns="studio_suggest_ui"></xtml><xtml ns="text"><Type id="NumberFormat"/><Type id="MultiLangSuite" /><Component id="Concat" type="data.Aggregator" execution="native"><Param name="Items" light="false"><Default t="data.Same"/></Param><Param name="Item" light="false" type="data.Data[]"/><Param name="Separator" short="true" essential="true"/><Param name="LastSeparator" advanced="true" short="true"/><Param name="ItemText" short="true"><Default t="data.Same"/></Param><Param name="Prefix" advanced="true"/><Param name="Suffix" advanced="true"/><Param name="MaxLength" advanced="true"/><Param name="SuffixForMax" advanced="true"><Default value="..."/></Param></Component><Component id="Length" type="data.Data" execution="native" ><Param name="Data" title="Text" /></Component><Component id="AddPrefix" type="data.Data" execution="xtml" ><Param name="Data" title="Text" /><Param name="Prefix" ><Default value="..."></Default></Param><xtml t="data.Pipeline" ><Item t="data.List"><Item value="%$Prefix%"/><Item t="data.Same" /></Item><Aggregator t="text.Concat" /></xtml></Component><Component id="RemoveSuffix" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="Suffix" /><Param name="Separator"/><Param name="EmptyIfNoSeparator"><Default value="false" /></Param></Component><Component id="ExtractSuffix" type="data.Data"><Param name="Data" title="Text"/><Param name="Separator" essential="true"/><xtml t="text.Split" Separator="%$Separator%" Part="Last"/></Component><Component id="RemovePrefix" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="Prefix"/><Param name="Separator"/></Component><Component id="KeepPrefix" type="data.Data" hidden="true"><Param name="Data" title="Text" /><Param name="Separator"/><Param name="KeepSeparator" type="data.Boolean"/><xtml t="text.ExtractPrefix" Separator="%$Separator%" KeepSeparator="%$KeepSeparator%"/></Component><Component id="ExtractPrefix" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="Separator"/><Param name="KeepSeparator" type="data.Boolean"/><Param name="UseRegex" type="data.Boolean"/><Param name="Default"/></Component><Component id="Replace" type="data.Data" execution="native" ><Param name="Find" essential="true"/><Param name="ReplaceWith" essential="true"/><Param name="UseRegex" type="data.Boolean" ><Default value="false" /></Param><Param name="ReplaceAll" type="data.Boolean" ><Default value="true" /></Param><Param name="Text" ><Default value="%%" /></Param></Component><Component id="ReplaceWithRegex" type="data.Data" execution="native" ><Param name="Pattern" essential="true" description="/w- alphnumberic, /s- whitespace, ^- beginline, $-endline"/><Param name="ReplaceWith" essential="true" description="Can use \'$1 $2\' to pick matches."/><Param name="Flags" description="g- global, m-multiline"/><Param name="Text" ><Default value="%%" /></Param></Component><Component id="ReplaceMulti" type="data.Data" execution="native" ><Param name="Find" essential="true"/><Param name="ReplaceWith" essential="true"/><Param name="ReplaceAll" type="data.Boolean" ><Default value="true" /></Param><Param name="Text" ><Default value="%%" /></Param></Component><Component id="Pad" type="data.Data" execution="native" ><Param name="Length"/><Param name="Filler"><Default value="0"/></Param><Param name="Text" ><Default value="%%" /></Param></Component><Component id="SplitByCommas" type="data.Data" execution="native"><Param name="Text" Default="%%"/></Component><Component id="Between" type="data.Data" execution="native"><Param name="From" essential="true"/><Param name="To" essential="true"/><Param name="IncludeFrom" type="data.Boolean"><Default value="false"/></Param><Param name="IncludeTo" type="data.Boolean"><Default value="false"/></Param></Component><Component id="CountOfSubtext" type="data.Data" execution="native" ><Param name="Text" /></Component><Component id="FastFindResults" type="data.Aggregator" execution="native"><Param name="Pattern" /><Param name="AllItems" script="true" ><Default t="data.Same"/></Param><Param name="ItemText" ><Default value="%%" /></Param><Param name="ItemSearchFields" type="data.Data[]" Description="for better performance, instead of ItemText" /><Param name="CacheIdentifier"/><Param name="MaxItems" /></Component><Component id="PromoteStartingWith" type="data.Aggregator" execution="native"><Param name="StartsWith"/></Component><Component id="Capitalize" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="Mode" type="enum"><Default value="capital each word"/><value>capital to separate words</value><value>separate words to capital</value><value>capital first word</value><value>capital each word</value><value>upper to separate capital</value></Param></Component><Component id="StartsWith" type="data.Boolean" execution="native"><Param name="Text"><Default t="data.Same"/></Param><Param name="With" essential="true"/></Component><Component id="NotStartsWith" type="data.Boolean"><Param name="Text"><Default t="data.Same"/></Param><Param name="With" essential="true"/><xtml t="yesno.Not"><Of t="text.StartsWith" Text="%$Text%" With="%$With%"/></xtml></Component><Component id="EndsWith" type="data.Boolean" execution="native"><Param name="Text" Default="%%"/><Param name="With" essential="true"/></Component><Component id="Trim" type="data.Data" execution="xtml"><Param name="Text"><Default value="%%" /></Param><Param name="CharsToTrim"><Default value=" \\n\\s\\t&#xa;&#xd;" /></Param><xtml t="data.Pipeline" Data="%$Text%"><Item t="text.Replace" Find="^[%$CharsToTrim%]+" ReplaceWith="" UseRegex="true" /><Item t="text.Replace" Find="[%$CharsToTrim%]+$" ReplaceWith="" UseRegex="true" /></xtml></Component><Component id="FindInText" type="data.Boolean" execution="native"><Param name="Data" title="Text" /><Param name="Pattern" essential="true"><Default value="%%" /></Param><Param name="UseRegex" type="data.Boolean"><Default value="false" /></Param></Component><Component id="ToLowerCase" type="data.Data" execution="native"><Param name="Data" title="Text" /></Component><Component id="ToUpperCase" type="data.Data" execution="native"><Param name="Data" title="Text" /></Component><Component id="ToChars" type="data.Data" execution="native"><Param name="Data" title="Text" /></Component><Component id="ItemsEqual" type="data.Boolean"><Param name="Item1" essential="true"/><Param name="Item2" essential="true"/><Param name="Trim" type="data.Boolean"><Default value="true"/></Param><Param name="CaseSensitive" type="data.Boolean"><Default value="false"/></Param><xtml t="yesno.ItemsEqual"><Item1 t="data.Pipeline"><Item value="%$Item1%"/><Item t="data.IfThenElse" If="%$Trim%" Else="%%"><Then t="text.Trim"/></Item><Item t="data.IfThenElse" If="%$CaseSensitive%" Then="%%"><Else t="text.ToLowerCase"/></Item></Item1><Item2 t="data.Pipeline"><Item value="%$Item2%"/><Item t="data.IfThenElse" If="%$Trim%" Else="%%"><Then t="text.Trim"/></Item><Item t="data.IfThenElse" If="%$CaseSensitive%" Then="%%"><Else t="text.ToLowerCase"/></Item></Item2></xtml></Component><Component id="MatchesRegex" type="data.Boolean" description="Match regular expression" execution="native"><Param name="Expression" essential="true" description="e.g., [0-9]* "/><Param name="Text" ><Default value="%%" /></Param></Component><Component id="UrlEncoding" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="Type" type="enum"><Default value="encode" /><value>encode</value><value>decode</value></Param></Component><Component id="Substring" type="data.Data" execution="native"><Param name="Text" ><Default t="data.Same" essential="true"/></Param><Param name="Start" Description="start from 1" essential="true"><Default value="1" /></Param><Param name="Stop" Description="start from 1, result does not contain this char" essential="true"/></Component><Component id="Encode" type="data.Data" execution="native"/><Component id="IsSubPathOf" type="data.Boolean"><Param name="Item"/><Param name="Base"/><Param name="Separator"/><Param name="OnlyDirect" type="data.Boolean"/><xtml t="yesno.And"><Item t="text.StartsWith" Data="%$Item%" With="%$Base%"/><Item t="yesno.ItemsNotEqual" Item1="%$Item%" Item2="%$Base%"/><Item t="yesno.OR"><Item t="yesno.Not" Of="%$OnlyDirect%"/><Item t="yesno.NotContains" Text="%$Separator%"><Data t="text.RemovePrefix" Data="%$Item%" Prefix="%$Base%"/></Item></Item></xtml></Component><Component id="NewLine" type="data.Data"><xtml value="&#xA;" /></Component><Component id="NormalizeNewLines" type="data.Data" execution="native" description="\\r\\n -> \\n"><Param name="Text" Default="%%"/></Component><Component id="TabCharacter" type="data.Data"><xtml value="&#009;" /></Component><Component id="ReplaceNewLines" type="data.Data" execution="native"><Param name="Data" title="Text" /><Param name="ReplaceWith" essential="true"/></Component><Component id="Translate" type="data.Data" execution="native"><Param name="Text" essential="true"/></Component><Component id="TranslatePattern" type="data.Data" execution="native"><Param name="Pattern" essential="true"/></Component><Component id="DecodeMimeType" type="data.Data" execution="native"><Param name="Text" Default="%%"/><Param name="Encoding" type="enum" Options="auto,Base64,Quoted Printable"><Default value="auto"/></Param><Param name="Charset" type="enum" Options="utf-8,windows-1255"><Default value="utf-8"/></Param></Component><Component id="TimeDifferance" type="data.Data" execution="native"><Param name="EarlierDate" essential="true"/><Param name="LaterDate" ><Default t="data.Now" Format="with time" /></Param><Param name="ShowDifferenaceIn" type="enum"><Default value="free text, first main differance only" /><value>free text, first main differance only</value><value>free text, two main differances</value><value>years</value><value>months</value><value>days</value><value>hours</value><value>minutes</value></Param></Component><Component id="Reverse" type="data.Data" execution="native"><Param name="Text" ><Default value="%%" /></Param></Component><Component id="SplitLines" type="data.Data" execution="native"><Param name="Text" ><Default value="%%" /></Param><Param name="NewLineChars" ><Default value="&#xA;" /></Param></Component><Component id="RemoveEmptyLines" type="data.Data" description="delete clean empty line"><xtml t="text.ReplaceWithRegex" Pattern="^\\s*\\n" Flags="gm"/></Component><Component id="Truncate" type="data.Data" execution="native"><Param name="Text" Default="%%"/><Param name="Length" Defaul="20" /><Param name="Suffix" Default ="..."/></Component><Component id="ToIdText" type="data.Data" execution="native" /><Component id="ToId" type="data.Data" execution="native"><Param name="Text" Default="%%"/><Param name="UsedIDs" /></Component><Component id="AddToCommaText" type="action.Action" execution="native"><Param name="Text" /><Param name="ToAdd" /></Component><Component id="RemoveFromCommaText" type="action.Action" execution="native"><Param name="Text" /><Param name="ToRemove" /></Component><Component id="MultiLangSuite" execution="native" description="A list of key values, where key is translated into value"><Param name="Language" /><Param name="item" type="KeyValue[]" desctiption="A key value array"/></Component></xtml><xtml ns="cntr" jbart="true"><Component id="SelectedItem" type="data.Data" execution="native"><Param name="Cntr"><Default value="%$_Cntr%"/></Param></Component><Component id="ParentItemElement" type="data.Data" execution="native" /><Component id="ContainerOfElement" type="data.Data"><Param name="Element" Default="%$ControlElement%" /><xtml t="uiaspect.ContainerFromControl" Control="%$Element%" /></Component><Component id="ItemDataFromElement" type="data.Data" execution="native"><Param name="Element" Default="%$ControlElement%" /></Component><Component id="RefreshSelectedTextAndImage" type="action.Action" execution="native" light="false"><Var name="Cntr" Default="%$_Cntr%" /></Component></xtml><xtml ns="ui"><Type id="TextControlStyle" /><Type id="ComboStyle" /><Type id="Validation" ><MoreComponents><component id="ui.ValidationList" itemsParam="Validation" /></MoreComponents></Type><Type id="MessageBarStyle" /><Type id="ValidationFailureLevel" type="enum"><value>Error</value><value>Warning</value></Type><Type id="InputAspect" /><Component id="TextControl" type="ui.Control" execution="xtml" databind="true" hidden="true"><Param name="Style" type="ui.TextControlStyle" script="true" paramVars="TextControlContext"><Default t="ui.Textbox" /></Param><Param name="OnUpdate" type="action.Action" script="true" /><Param name="UpdateOnEveryClick" type="data.Boolean" ><Default value="true" /></Param><Param name="Width" /><Param name="Focus" type="data.Boolean" script="true" /><Param name="OnKeyPressed" type="action.Action" script="true" /><Param name="ReadOnly" type="data.Boolean" /><xtml t="ui.ControlWithAction"><Var name="Input" /><Control t="xtml.UseParam" Param="Style"><Var name="TextControlContext" t="xtml.Params"><Param name="UpdateOnEveryClick" value="%$UpdateOnEveryClick%" /><Param name="Width" value="%$Width%" /><Param name="ReadOnly" t="yesno.OR"><Item value="%$ReadOnly%" /><Item t="yesno.Not"><Of t="yesno.IsWritableText" /></Item></Param><ScriptParam name="UpdateData" t="action.RunActions"><Action t="action.WriteValue" To="%%" Value="%$ControlData%"/><Action t="xtml.UseParam" Param="OnUpdate" /></ScriptParam><ScriptParam name="OnKeyPressed" t="xtml.UseParam" Param="OnKeyPressed" /></Var></Control><RunAfterControl t="uiaction.Focus" Condition="%$Focus%" /></xtml></Component><Component id="Textbox" type="ui.TextControlStyle" execution="xtml"><Param name="OnKeyDown" script="true" /><Param name="KeyPressValidator" type="data.Boolean" script="true" /><Param name="MaxLength" /><xtml t="xml.WithChanges"><Var name="InputType" t="text.FirstSucceeding"><Item value="%$TextControlContext/InputType%"/><Item value="text"/></Var><Var name="ReadOnlyClass" value="readonly" Condition="%$TextControlContext/ReadOnly%"/><Xml t="ui.Html" DynamicContent="true"><input maxlength="%$MaxLength%" type="%$InputType%" class="aatextbox %$ReadOnlyClass%" value="%%"            onkeydown="ajaxart_runevent(this, \'\', \'OnKeyDown\', null, event);"/></Xml><Change t="ui.DataBind"/><Change t="ui.BindEvent"><Var name="EventType" t="data.IfThenElse" If="%$TextControlContext/UpdateOnEveryClick%" Then="keyup" Else="blur"/><Event value="%$EventType%"/><Action t="action.RunActions"><Condition t="yesno.ItemsNotEqual" Item1="%$KeyPressed%" Item2="enter"/><Action t="xtml.RunXtml" Xtml="%$TextControlContext/UpdateData%"><Var name="ControlData" t="ui.DataFromJavaScript" Expression="element.value"/></Action></Action></Change><Change t="xml.SetAttribute" AttributeName="onkeypress" Value="return ajaxart_ui_validate(event,this);" ><Condition t="yesno.NotEmpty" Data="%$KeyPressValidator%"/></Change><Change t="ui.BindEvent" Event="keydown"><Action t="xtml.RunXtml" Xtml="%$TextControlContext/OnKeyPressed%"><Var name="ControlData" t="ui.DataFromJavaScript" Expression="element.value"/></Action></Change><Change t="ui.RunJavaScript" Expression="data.readOnly=true"><Condition value="%$TextControlContext/ReadOnly%"/></Change><Change t="ui.SetCssText" Style="width:%$TextControlContext/Width%"><Condition t="yesno.NotEmpty" Data="%$TextControlContext/Width%"/></Change></xtml></Component><Component id="Textarea" type="ui.TextControlStyle"><Param name="Rows"><Default value="1" /></Param><Param name="Cols"><Default value="80" /></Param><Param name="Autogrow" type="data.Boolean"><Default value="true"/></Param><Param name="MaxLength" /><Param name="Wrap" type="enum" Options="hard,soft,off"/><xtml t="xml.WithChanges"><Xml t="data.IfThenElse"><If t="yesno.Empty" Data="%$MaxLength%"/><Then t="ui.Html" DynamicContent="true"><textarea style="width: 100\\%;" class="textcontrol_area" rows="%$Rows%" cols="%$Cols%" wrap="%$Wrap%"          onchange="ajaxart_runevent(this,\'TextControlContext\',\'UpdateData\',this.value) " onkeyup="onchange() ">%%</textarea></Then><Else t="ui.Html" DynamicContent="true"><textarea style="width: 100\\%;" class="textcontrol_area" rows="%$Rows%" cols="%$Cols%" wrap="%$Wrap%"          onchange="ajaxart_runevent(this,\'TextControlContext\',\'UpdateData\',this.value) " onkeyup="onchange() "          onkeypress="return ajaxart_ui_imposeMaxLength(event, this, %$MaxLength%) ">%%</textarea></Else></Xml><Change t="ui.BindEvent" Event="blur"><Action t="uiaction.ValidateField" /></Change><Change t="ui.BindEvent" Event="focus"><Action t="uiaction.CleanFieldValidation" /></Change><Change t="ui.DataBind"/><Change1 t="ui.ExecJQuery" Expression=".autogrow({ maxHeight: 200, minHeight: 16, lineHeight: 16})" Condition="%$Autogrow%"/></xtml></Component><Component id="Validation" type="ui.Validation" execution="xtml" ><Param name="SuccessCondition" type="data.Boolean" script="true" /><Param name="Message" script="true"/><Param1 name="Level" type="ui.ValidationFailureLevel"><Default value="Error"/></Param1><xtml t="server.ImmediateAction"><Action t="action.IfThenElse"><If t="xtml.UseParam" Param="SuccessCondition" /><Else t="uiaction.ShowValidationError" ><Message t="text.MultiLang" Dynamic="true" ><Pattern t="xtml.UseParam" Param="Message" /></Message></Else></Action></xtml></Component><Component id="ValidationList" type="ui.Validation" execution="native"><Param name="Validation" type="ui.Validation[]" /></Component><Component id="MessageBar" type="ui.Control"><Param name="Style" type="ui.MessageBarStyle" ><Default t="ui.DefaultMessageBar" /></Param><Param name="Type" type="enum"><Default value="notification" /><value>validation</value><value>notification</value></Param><xtml t="data.Pipeline" Class="%$Type%"><Item value="%$Style%"  /></xtml></Component><Component id="DefaultMessageBar" type="ui.MessageBarStyle" databind="true"><xtml t="data.Pipeline" Class="message_bar" ><Item t="ui.Text" Class="message_bar_text"/><Item t="xml.Wrap"><Head t="ui.Html"><div /></Head></Item><Item1 t="xml.WithChanges" Xml="%%"><Change t="uiaction.Hide" RunOn="%%"/></Item1></xtml></Component><Component id="OKButton" type="ui.Control"><Param name="Text" /><Param name="OnClick" type="action.Action" script="true"/><Param name="Style" type="ui.ButtonStyle" script="true" paramVars="ButtonContext"><Default t="ui.StandardButton"/></Param><Param name="Image" /><Param name="Tooltip" /><Param name="ExtraValidations" type="ui.Validation" script="true" /><xtml Class="OKButton" t="xtml.UseParam" Param="Style"><Var name="ButtonContext" t="xtml.Params"><Param name="Text" t="text.MultiLang" Pattern="%$Text%" Dynamic="true"/><Param name="Image" value="%$Image%" /><Param name="Tooltip" value="%$Tooltip%" /><ScriptParam name="OnClick" t="uiaction.Validate"><Condition t="yesno.Not"><Of t="ui.HasClass" Cls="aa_loading" Data="%$ControlElement%"/></Condition><OnSuccess t="xtml.UseParam" Param="OnClick" /><ExtraValidation t="xtml.UseParam" Param="ExtraValidations" /></ScriptParam></Var></xtml></Component><Component id="MandatoryMessage"><xtml t="text.MultiLang" Pattern="Please enter value for %$FieldTitle%" /></Component><Component id="SuggestionBox" type="ui.Control" execution="native" databind="true"><Param name="Options"/><Param name="OptionLabel" type="data.Data" script="true"/><Param name="OptionLabelInTextbox" type="data.Data" script="true"/><Param name="OptionImage" type="data.Data" script="true"/><Param name="OptionDescription" type="data.Data" script="true"/><Param name="AllowTextNotInOptions" type="data.Boolean"><Default value="false"/></Param><Param name="OnUpdate" type="action.Action" script="true"/><Param name="AdditionalMenuItem" t="menu.MenuItem[]"/><Param name="TextForEmpty" /><Param name="MaxItems"><Default value="20" /></Param></Component></xtml><xtml ns="fusion_chart"><Type name="Color"/><Component id="FusionChart" type="dataview.Presentation" execution="native"><Param name="LabelField" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="AmountFields" recalc_options="true" type="dynamic_enum_multi"><Options t="dataview.FieldIDs" /></Param><Param name="Colors" type="dynamic_enum_multi"><Options t="fusion_chart.ColorNames"/></Param><Param name="Caption"/><Param name="SubCaption"/><Param name="OnClick" advanced="true" type="action.Action" script="true" /><Param name="Type" type="enum" Options="Line,Column2D,Column3D,Area2D,Bar2D"><Default value="Column3D"/></Param><Param name="Stacked" type="data.Boolean"/><Param name="Width" advanced="true"><Default value="400" /></Param><Param name="Height" advanced="true"><Default value="400" /></Param><Param name="XmlBuilder" advanced="true" script="true"><Default t="fusion_chart.BuildChart"/></Param><NativeHelper name="GraphXml" t="xtml.UseParam" Param="XmlBuilder"><Var name="LabelField" value="%$LabelField%"/><Var name="AmountFields" value="%$AmountFields%"/><Var name="Colors" value="%$Colors%"/><Var name="Caption" value="%$Caption%"/><Var name="SubCaption" value="%$SubCaption%"/></NativeHelper></Component><Component id="BuildChart" type="data.Data"><Param1 name="LabelField"/><Param1 name="AmountFields"/><Param1 name="Colors"/><Param1 name="Caption"/><Param1 name="SubCaption"/><xtml name="GraphXml" t="xml.WithChanges" ><Var name="AllColors" t="fusion_chart.Colors"/><Var name="Fields" value="%$DataHolderCntr/DataHolder/Fields%"/><Var name="FieldTitle" t="data.Pipeline"><Item value="%$Fields%"/><Item t="yesno.PassesFilter" Filter="%Id% == %$LabelField%"/><Item value="%Title%"/></Var><Xml t="xml.Xml" DynamicContent="true"><graph xaxisname="%$FieldTitle%" yaxisname="" hovercapbg="DEDEBE" hovercapborder="889E6D" rotateNames="0" animation="1" yAxisMaxValue="100" numdivlines="9" divLineColor="CCCCCC" divLineAlpha="80" decimalPrecision="0" showAlternateHGridColor="1" AlternateHGridAlpha="30" AlternateHGridColor="CCCCCC" caption="%$Caption%" subcaption="%$SubCaption%"/></Xml><Change t="xml.AddChildren"><Children t="data.Pipeline"><Item value="%$Items/{$LabelField}%"/><Item t="xml.Xml" DynamicContent="true"><category name="%%"/></Item><Aggregator t="xml.Wrap"><Head t="xml.Xml"><categories font="Arial" fontSize="11" fontColor="000000"/></Head></Aggregator></Children></Change><Change t="xml.AddChildren"><Children t="data.Pipeline"><Item t="data.Zip"><List t="text.Split" Text="%$AmountFields%"/><List t="text.Split" Text="%$Colors%"/></Item><Item t="data.Pipeline"><Var name="AmountField" value="%0%"/><Var name="Color" value="%$AllColors/color[@name=\'{1}\']/@hex%"/><Var name="FieldTitle" t="data.Pipeline"><Item value="%$Fields%"/><Item t="yesno.PassesFilter" Filter="%Id% == %$AmountField%"/><Item value="%Title%"/></Var><Item value="%$Items%"/><Item t="xml.Xml" DynamicContent="true"><set value="%{$AmountField}%" link="JavaScript:aa_fusion_eventHandler(\'%$ChartId%\',\'%$LabelField%\',\'%$AmountField%\',\'%__Index%\');"/></Item><Aggregator t="xml.Wrap"><Head t="xml.Xml" DynamicContent="true"><dataset seriesname="%$FieldTitle%" color="%$Color%" alpha="100"/></Head></Aggregator></Item></Children></Change></xtml></Component><Component id="Colors" type="data.Data"><xtml t="xml.Xml"><colors><color name="" hex=""/><color name="AliceBlue" hex="F0F8FF"/><color name="AntiqueWhite" hex="FAEBD7"/><color name="Aqua" hex="00FFFF"/><color name="Aquamarine" hex="7FFFD4"/><color name="Azure" hex="F0FFFF"/><color name="Beige" hex="F5F5DC"/><color name="Bisque" hex="FFE4C4"/><color name="Black" hex="000000"/><color name="BlanchedAlmond" hex="FFEBCD"/><color name="Blue" hex="0000FF"/><color name="BlueViolet" hex="8A2BE2"/><color name="Brown" hex="A52A2A"/><color name="BurlyWood" hex="DEB887"/><color name="CadetBlue" hex="5F9EA0"/><color name="Chartreuse" hex="7FFF00"/><color name="Chocolate" hex="D2691E"/><color name="Coral" hex="FF7F50"/><color name="CornflowerBlue" hex="6495ED"/><color name="Cornsilk" hex="FFF8DC"/><color name="Crimson" hex="DC143C"/><color name="Cyan" hex="00FFFF"/><color name="DarkBlue" hex="00008B"/><color name="DarkCyan" hex="008B8B"/><color name="DarkGoldenrod" hex="B8860B"/><color name="DarkGray" hex="A9A9A9"/><color name="DarkGreen" hex="006400"/><color name="DarkKhaki" hex="BDB76B"/><color name="DarkMagenta" hex="8B008B"/><color name="DarkOliveGreen" hex="556B2F"/><color name="DarkOrange" hex="FF8C00"/><color name="DarkOrchid" hex="9932CC"/><color name="DarkRed" hex="8B0000"/><color name="DarkSalmon" hex="E9967A"/><color name="DarkSeaGreen" hex="8FBC8F"/><color name="DarkSlateBlue" hex="483D8B"/><color name="DarkSlateGray" hex="2F4F4F"/><color name="DarkTurquoise" hex="00CED1"/><color name="DarkViolet" hex="9400D3"/><color name="DeepPink" hex="FF1493"/><color name="DeepSkyBlue" hex="00BFFF"/><color name="DimGray" hex="696969"/><color name="DodgerBlue" hex="1E90FF"/><color name="FireBrick" hex="B22222"/><color name="FloralWhite" hex="FFFAF0"/><color name="ForestGreen" hex="228B22"/><color name="Fuchsia" hex="FF00FF"/><color name="Gainsboro" hex="DCDCDC"/><color name="GhostWhite" hex="F8F8FF"/><color name="Gold" hex="FFD700"/><color name="Goldenrod" hex="DAA520"/><color name="Gray" hex="808080"/><color name="Green" hex="008000"/><color name="GreenYellow" hex="ADFF2F"/><color name="Honeydew" hex="F0FFF0"/><color name="HotPink" hex="FF69B4"/><color name="IndianRed" hex="CD5C5C"/><color name="Indigo" hex="4B0082"/><color name="Ivory" hex="FFFFF0"/><color name="Khaki" hex="F0E68C"/><color name="Lavender" hex="E6E6FA"/><color name="LavenderBlush" hex="FFF0F5"/><color name="LawnGreen" hex="7CFC00"/><color name="LemonChiffon" hex="FFFACD"/><color name="LightBlue" hex="ADD8E6"/><color name="LightCoral" hex="F08080"/><color name="LightCyan" hex="E0FFFF"/><color name="LightGoldenrodYellow" hex="FAFAD2"/><color name="LightGreen" hex="90EE90"/><color name="LightGrey" hex="D3D3D3"/><color name="LightPink" hex="FFB6C1"/><color name="LightSalmon" hex="FFA07A"/><color name="LightSeaGreen" hex="20B2AA"/><color name="LightSkyBlue" hex="87CEFA"/><color name="LightSlateGray" hex="778899"/><color name="LightSteelBlue" hex="B0C4DE"/><color name="LightYellow" hex="FFFFE0"/><color name="Lime" hex="00FF00"/><color name="LimeGreen" hex="32CD32"/><color name="Linen" hex="FAF0E6"/><color name="Magenta" hex="FF00FF"/><color name="Maroon" hex="800000"/><color name="MediumAquamarine" hex="66CDAA"/><color name="MediumBlue" hex="0000CD"/><color name="MediumOrchid" hex="BA55D3"/><color name="MediumPurple" hex="9370DB"/><color name="MediumSeaGreen" hex="3CB371"/><color name="MediumSlateBlue" hex="7B68EE"/><color name="MediumSpringGreen" hex="00FA9A"/><color name="MediumTurquoise" hex="48D1CC"/><color name="MediumVioletRed" hex="C71585"/><color name="MidnightBlue" hex="191970"/><color name="MintCream" hex="F5FFFA"/><color name="MistyRose" hex="FFE4E1"/><color name="Moccasin" hex="FFE4B5"/><color name="NavajoWhite" hex="FFDEAD"/><color name="Navy" hex="000080"/><color name="OldLace" hex="FDF5E6"/><color name="Olive" hex="808000"/><color name="OliveDrab" hex="6B8E23"/><color name="Orange" hex="FFA500"/><color name="OrangeRed" hex="FF4500"/><color name="Orchid" hex="DA70D6"/><color name="PaleGoldenrod" hex="EEE8AA"/><color name="PaleGreen" hex="98FB98"/><color name="PaleTurquoise" hex="AFEEEE"/><color name="PaleVioletRed" hex="DB7093"/><color name="PapayaWhip" hex="FFEFD5"/><color name="PeachPuff" hex="FFDAB9"/><color name="Peru" hex="CD853F"/><color name="Pink" hex="FFC0CB"/><color name="Plum" hex="DDA0DD"/><color name="PowderBlue" hex="B0E0E6"/><color name="Purple" hex="800080"/><color name="Red" hex="FF0000"/><color name="RosyBrown" hex="BC8F8F"/><color name="RoyalBlue" hex="4169E1"/><color name="SaddleBrown" hex="8B4513"/><color name="Salmon" hex="FA8072"/><color name="SandyBrown" hex="F4A460"/><color name="SeaGreen" hex="2E8B57"/><color name="Seashell" hex="FFF5EE"/><color name="Sienna" hex="A0522D"/><color name="Silver" hex="C0C0C0"/><color name="SkyBlue" hex="87CEEB"/><color name="SlateBlue" hex="6A5ACD"/><color name="SlateGray" hex="708090"/><color name="Snow" hex="FFFAFA"/><color name="SpringGreen" hex="00FF7F"/><color name="SteelBlue" hex="4682B4"/><color name="Tan" hex="D2B48C"/><color name="Teal" hex="008080"/><color name="Thistle" hex="D8BFD8"/><color name="Tomato" hex="FF6347"/><color name="Turquoise" hex="40E0D0"/><color name="Violet" hex="EE82EE"/><color name="Wheat" hex="F5DEB3"/><color name="White" hex="FFFFFF"/><color name="WhiteSmoke" hex="F5F5F5"/><color name="Yellow" hex="FFFF00"/><color name="YellowGreen" hex="9ACD32"/></colors></xtml></Component><Component id="ColorNames" type="data.Data"><xtml t="data.Pipeline"><Item t="fusion_chart.Colors"/><Item value="%color/@name%"/></xtml></Component></xtml><xtml ns="gchart"><Component id="GoogleChart" type="dataview.Presentation" execution="native"><Param name="LabelField" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="AmountField" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Title"/><Param name="Amount2Field" advanced="true" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Amount3Field" advanced="true" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Type" type="enum" Options="PieChart,BarChart,ColumnChart,LineChart,AreaChart,ScatterChart,SteppedAreaChart"><Default value="PieChart"/></Param><Param name="Legend" type="enum" Options="right,top,bottom,none" advanced="true"><Default value="right"/></Param><Param name="FrameWidth" advanced="true"><Default value="400px" /></Param><Param name="FrameHeight" advanced="true"><Default value="400px" /></Param><Param name="OnClick" advanced="true" type="action.Action" script="true" /></Component><Component id="PieChart" type="ui.Control" execution="native" remark="depricated" hidden="true"><Param name="Items" /><Param name="ItemText" script="true"><Default value="%%" /></Param><Param name="ItemAmount" script="true" /><Param name="OnItemClick" type="action.Action" script="true" /><Param name="Title" /></Component><Component id="TimelineChart" type="ui.Control" execution="native" remark="depricated" hidden="true"><Param name="Items" /><Param name="Date" script="true"><Default value="%@date%" /></Param><Param name="ItemAmount" script="true" /><Param name="OnItemClick" type="action.Action" script="true" /><Param name="Title" /><Param name="FrameWidth"><Default value="400px" /></Param><Param name="FrameHeight"><Default value="400px" /></Param><Param name="GoogleParams"><Default value="width: 400, height: 400" /></Param></Component></xtml><xtml ns="headerfooter"><Type id="HeaderFooterControl" /><Component id="FastAddItem" type="headerfooter.HeaderFooterControl"><Param name="Page" type="ui.SinglePage" script="true" /><Param name="IncludeAddButton" type="data.Boolean" description="to create call headerfooter.DoAddItem"><Default value="true"/></Param><xtml t="ui.List" Class="add_item_top"><Var name="Subset" t="object.RunMethod" Object="%$_Items%" Method="SubsetForNewItem" /><Var name="_FastAddItemObject" t="headerfooter.FastAddItemObject" Subset="%$Subset%" OriginalCntr="%$_Cntr%"/><Var name="_OriginalCntr" value="%$_Cntr%" /><Control t="ui.ShowSinglePage" Item="%$Subset%" Class="add_item_page" ><Page t="xtml.UseParam" Param="Page" /></Control><Control t="ui.ButtonOld" Text="Add" Class="FastAdd" Condition="%$IncludeAddButton%"><OnClick t="headerfooter.DoAddItem" /></Control></xtml></Component><Component id="CustomControl" type="headerfooter.HeaderFooterControl"><Param name="Control" type="ui.Control" script="true" /><xtml t="xtml.UseParam" Param="Control" /></Component><Component id="FastAddItemObject" hidden="true"><Param name="Subset" /><Param name="OriginalCntr" /><xtml t="object.Object"><Method name="Do" t="action.RunActions"><Condition t="validation.PassingValidations" RunOn="updown(.add_item_top,.add_item_page)" /><Action t="object.RunMethod" Object="%$Subset%" Method="Save" Input="%$Subset/Items%" /><Action t="uiaction.AddItemElement" Item="%$Subset/Items%" SelectIt="%$_DoAddItemContext/SelectIt%"><Var name="_Cntr" value="%$OriginalCntr%" /><RunOn t="uiaspect.ContainerControl" Container="%$OriginalCntr%"/><DoOnAddedElement t="object.RunMethod" Object="%$_DoAddItemContext%" Method="DoOnAddedElement" /></Action><Action t="uiaction.Refresh" RunOn="up(.add_item_top)" /></Method></xtml></Component><Component id="DoAddItem" type="action.Action"><Param name="SelectIt" type="data.Boolean"/><Param name="DoOnAddedElement" type="action.Action" script="true" /><xtml t="object.RunMethod" Object="%$_FastAddItemObject%" Method="Do"><Var name="_DoAddItemContext" t="object.Object" SelectIt="%$SelectIt%"><Method name="DoOnAddedElement" t="xtml.UseParam" Param="DoOnAddedElement" /></Var></xtml></Component><Component id="ItemListPresentation" type="field.Fields" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/chart1616.png"/><Param name="Title"/><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true"/><Param name="Field" type="field.Fields[]" light="false" script="true" /><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /><xtml t="field.CustomControl" Title="%$Title%" ShowTitle="true"><ID t="text.ToIdText" Data="%$Title%"/><Control t="ui.ItemList" ID="%$_Cntr/ID%_%$ID%"><Var name="ID" t="text.ToIdText" Data="%$Title%"/><Presentation t="xtml.UseParam" Param="Presentation"/><Fields t="xtml.UseParamArray" Param="Field"/><Aspect t="uiaspect.InheritsItems"/><Aspect t="xtml.UseParamArray" Param="Aspect"/></Control><FieldAspect t="field_aspect.HeaderFooterField" RefreshStrategy="container change" RunAfterPresentation="true"/><FieldAspect t="field_aspect.Section"/><FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/></xtml></Component><Component id="GroupBy" type="field.Fields" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/groupby.gif"/><Param name="Title"/><Param name="FilterBefore" type="dataview.Filter[]" script="true"/><Param name="GroupByFields" type="dynamic_enum_multi" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Field" type="field.Fields[]" light="false" script="true" /><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true" ><Default t="uiaspect.RichTable" /></Param><Param name="Phase"><Default value="0"/></Param><xtml t="field.CustomControl" ID="%$ID%" Title="%$Title%" ShowTitle="true"><Control t="ui.ItemList" ID="%$_Cntr/ID%_%$ID%"><Var name="ID" t="text.ToIdText" Data="%$Title%"/><DataHolder t="dataview.GroupByDataHolder" GroupByFields="%$GroupByFields%"><FilterBefore t="xtml.UseParamArray" Param="FilterBefore"/><Field t="xtml.UseParamArray" Param="Field"/></DataHolder><Presentation t="xtml.UseParam" Param="Presentation"/><Aspect t="xtml.UseParamArray" Param="Aspect"/></Control><FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/><FieldAspect t="field_aspect.HeaderFooterField" RefreshStrategy="container change" Phase="%$Phase%" RunAfterPresentation="true"/></xtml></Component></xtml><xtml ns="operation"><Type id="Operations"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/run.gif" /><MoreComponents><component id="operation.Operations" itemsParam="Operation" /></MoreComponents></Type><Type id="Menu"/><Type id="MenuAspect"/><Type id="OperationAction" /><Type id="FieldOperationAction" /><Component id="StdOperations" type="operation.Operations"  light="false"><Param name="OpenItemDetails" type="data.Boolean" /><Param name="DoAfterNew" type="action.Action" script="true" /><xtml t="operation.Operations" ><Operation t="operation.NewItem"><Condition t="yesno.Not" Of="%$_Items/ReadOnly%" /><DoAfter t="xtml.UseParam" Param="DoAfterNew" /></Operation><Operation t="operation.DeleteItem"><Condition t="yesno.Not" Of="%$_Items/ReadOnly%"/></Operation><Operation t="operation.OpenItemDetails" Condition="%$OpenItemDetails%"/><Operation1 t="operation.Customize" Condition="%$_Customize%"/></xtml></Component><Type id="ChangeValue" /><Component id="ChangeValue" type="operation.ChangeValue"><Param name="Entry"><PreviewContext t="xtml_dt.PreviewContext" ><Input t="field_dt.PreviewFieldData" /></PreviewContext></Param><Param name="Value"><PreviewContext t="xtml_dt.PreviewContext" ><Input t="field_dt.PreviewFieldData" /></PreviewContext></Param><xtml t="action.WriteValue" To="%$Entry%" Value="%$Value%" /></Component><Component id="WriteValue" type="action.Action" light="false"><Param name="Value" /><Param name="To" /><xtml t="action.WriteValue" To="%$To%" Value="%$Value%" /></Component><Component id="ChangeItem" type="action.Action" light="false"><Param name="Change" type="operation.ChangeValue[]" script="true"><Field t="bart_dt.ChangeParamOfChangeItem" /></Param><Param name="RefreshItem" type="data.Boolean"><Default value="true"/></Param><xtml t="action.RunActions"><Action t="xtml.UseParamArray" Param="Change" /><Action t="uiaction.RefreshItemElements" ItemElements="%$_ElemsOfOperation%" Condition="%$RefreshItem%" /></xtml></Component><Component id="New" type="action.Action" light="false"><Aspect t="operation.GenerateOperation" ID="new" Target="new" Title="new %$ItemTypeName%" Image="%$_Images%/add1616.png" WritableOnly="true"/><Param name="ChangeBeforeEdit" type="action.Action" advanced="true" script="true"/><Param name="ChangeBeforeSave" type="xml.Change" advanced="true" script="true"/><Param name="DoAfter" type="action.Action" advanced="true" script="true"/><Param name="ImmediateAdd" type="data.Boolean" advanced="true" description="If checked it first creates the item and then edits it. The Cancel button will delete it"/><xtml t="object.RunMethod" Object="%$_Cntr%" Method="OpenItemDetails" ><Var name="IsNewItem" value="true" /><Var name="_Items" value="%$_Cntr/Items%" /><Var name="_DataItemsImmediateAdd" value="%$ImmediateAdd%" /><Var name="_SaveActions" t="object.Object"><Method name="BeforeEdit" t="xtml.UseParam" Param="ChangeBeforeEdit" /><Method name="BeforeSave" t="xml.ChangeXml" Xml="%%"><Change t="xtml.UseParam" Param="ChangeBeforeSave" /></Method><Method name="AfterSave" t="xtml.UseParam" Param="DoAfter" /></Var></xtml></Component><Component id="NewItem" type="operation.Operations" visible="true"><Param1 name="Cntr"><Default value="%$_Cntr%"/></Param1><Param name="Title"/><Param name="DoAfter" type="action.Action" script="true"/><xtml t="operation.Operation" ID="NewItem" Target="new" Icon="%$_Images%/add1616.png" Shortcut="Alt+N" WritableOnly="true"><Title t="text.FirstSucceeding" ><Item value="%$Title%"/><Item t="text.TranslatePattern" Pattern="New %$_Cntr/Items/ItemTypeName%" /></Title><Action t="operation.New"><Var1 name="_Cntr" value="%$Cntr%" /><DoAfter t="xtml.UseParam" Param="DoAfter"/></Action></xtml></Component><Component id="Delete" type="action.Action" light="false"><Aspect t="operation.GenerateOperation" ID="delete" Target="item" Title="delete %$ItemTypeName%" Image="%$_Images%/delete1616.gif" WritableOnly="true"/><Param name="AskForConfirmation" type="data.Boolean"><Default value="true"/></Param><Param name="DoAfter" type="action.Action" script="true"/><Param name="ConfirmationText" script="true"/><xtml t="dialog.AskForConfirmation" Title="Delete"><Condition t="yesno.NotEmpty" /><Var name="CountItems" value="%=Count($_ElemsOfOperation)%"/><Question t="text.FirstSucceeding"><Item t="xtml.UseParam" Param="ConfirmationText"/><Item t="data.IfThenElse" If="%$CountItems% == 1" Then="Are you sure you want to delete?" Else="Are you sure you want to delete %$CountItems% Items?" /></Question><SkipConfirmation t="yesno.Not" Of="%$AskForConfirmation%" /><RunOnOK t="action.RunActions"><Var name="_ElemParent" value="%$_ElemsOfOperation/..%" /><Var name="Item" t="data.FirstSucceeding"><Item value="%$_ItemsOfOperation%"/><Item1 value="%%"/></Var><Action t="object.RunMethod" Object="%$_Items%" Method="DeleteItem" Input="%$Item%" /><Action t="xml.Delete" Data="%$Item%" /><Action t="uiaction.DeleteItemElements" ItemElements="%$_ElemsOfOperation%" /><Action t="xtml.UseParam" Param="DoAfter" /><Action t="uiaction.RefreshAfterDataItemsChanged" RunOn="%$_ElemParent%" /></RunOnOK></xtml></Component><Component id="DeleteItem" type="operation.Operations" visible="false" light="false"><Param name="Cntr"><Default value="%$_Cntr%"/></Param><Param name="DoAfter" type="action.Action" script="true"/><Param name="Title"/><xtml t="operation.Operation" ID="DeleteItem" Icon="%$_Images%/delete1616.gif" Shortcut="Delete" Target="item" WritableOnly="true"><Title t="text.FirstSucceeding"><Var name="Cntr_Items" value="%$Cntr/Items%" /><Item value="%$Title%"/><Item t="text.TranslatePattern" Pattern="Delete %$Cntr/Items/ItemTypeName%" /></Title><Action t="operation.Delete"><Var name="_Cntr" value="%$Cntr%" /><DoAfter t="xtml.UseParam" Param="DoAfter" /></Action></xtml></Component><Component id="Save" type="action.Action" light="false"><Aspect t="operation.GenerateOperation" ID="save" Target="items" Image="%$_Images%/studio/save1616.gif" WritableOnly="true"/><Param name="OnSuccess" type="action.Action" script="true" advanced="true"/><xtml t="action.IfThenElse"><Condition t="validation.PassingValidations"><TopControl t="uiaspect.ContainerControl" /></Condition><Var name="Info" t="xml.XmlInfo" Data="%%" /><If t="object.HasMethod" Object="%$Info%" Method="Save" /><Then t="action_async.RunAsync"><Action t="object.RunMethod" Object="%$Info%" Method="Save" /><OnSuccess t="xtml.UseParam" Param="OnSuccess" /></Then><Else  t="data_items.DoSave" DataItems="%$_Cntr/Items%" Fields="%$_Cntr/Fields%"><OnSuccess t="xtml.UseParam" Param="OnSuccess" /></Else></xtml></Component><Component id="OpenItemDetails" type="operation.Operations"><Param name="Cntr"><Default value="%$_Cntr%"/></Param><Param name="Title"/><Param name="TitleForClose"/><xtml t="operation.Operation" ID="OpenItemDetails" Icon="%$_Images%/edit1616.gif" Target="item"><Title t="operation.TextOfOpen" /><Action t="operation.Open"><Var name="_Cntr" value="%$Cntr%" /></Action></xtml></Component><Component id="OpenSecondaryItemDetails" type="action.Action" execution="native" light="false"><Param name="ItemPage" type="ui.SinglePage" script="true" /><Param name="OpenIn" type="uiaspect.OpenIn" script="true"><Default t="uiaspect.DetailsInDialog" /></Param><Param name="Transactional" type="data.Boolean" /><Param name="ReadOnly" type="data.Boolean" /><Param name="ChangeItemBeforeOpen" type="action.Action" script="true" advanced="true" /></Component><Component id="Cut" type="operation.Operations" execution="native" light="false"><Param name="Title" script="true"><Default value="Cut"/></Param><Param name="Icon" script="true"/><Param name="Disabled" type="data.Boolean" script="true"/><Param name="OperationAspect" type="operation_aspect.Aspect" script="true" /><Param name="Shortcut"><Default value="Ctrl+X"/></Param></Component><Component id="Copy" type="operation.Operations" execution="native" light="false"><Param name="Title" script="true"><Default value="Copy"/></Param><Param name="Icon" script="true"/><Param name="Disabled" type="data.Boolean" script="true"/><Param name="OperationAspect" type="operation_aspect.Aspect" script="true" /><Param name="Shortcut"><Default value="Ctrl+C"/></Param></Component><Component id="Paste" type="operation.Operations" execution="native"><Param name="CopyPasteAction" type="action.Action" Description="Using var \'Clipboard\'"/><Param name="CutPasteAction" type="action.Action" Description="Using var \'Clipboard\'"/><Param name="Title" script="true"><Default value="Paste"/></Param><Param name="Icon" script="true"/><Param name="Disabled" type="data.Boolean" script="true"/><Param name="Aspect" type="operation_aspect.Aspect" script="true" /><Param name="Shortcut"><Default value="Ctrl+V"/></Param></Component><Component id="OperationCell" type="ui.Control"><xtml t="ui.ButtonOld" Class="%Id%" Image="%$Img%"><Var name="Img" t="object.RunMethod" Method="Icon" /><Text t="object.RunMethod" Method="Title"><Condition t="yesno.IsEmpty" Value="%$Img%"/></Text><OnClick t="xtml.RunXtml" Xtml="%Action%" Input="%$_ItemsOfOperation%" ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(context.vars.ControlElement[0]).parents(\'.aa_item\')[0]" /></OnClick><Style t="ui.ButtonAsHyperlink"/></xtml></Component><Component id="Customize" type="Operation.Operations"><xtml t="xtml_dt.CustomizeItemListOperation" Input="%$_ItemsOfOperation%" /></Component><Component id="RefreshCurrentItem" type="action.Action" light="false"><xtml t="uiaction.RefreshItemElements" ItemElements="%$_ElemsOfOperation%" /></Component><Component id="ContextMenu" type="Operation.Menu" execution="native"><Param name="MenuAspect" type="operation.MenuAspect[]" script="true"/></Component><Component id="OperationsUnderSelectedItem" type="operation.MenuAspect" execution="native"><Description value="operations from subcontainers under the selected item"/><Param name="Target" type="enum"><Default value="new"/><value>new</value><value>items</value><value>all</value></Param></Component><Component id="Presentation" type="operation.MenuAspect" execution="native"><Param name="Style" type="ui.ButtonStyle"><Default t="ui.ButtonAsHyperlink"/></Param></Component><Component id="IncludeItemOperationsFromParent" type="operation.MenuAspect" execution="native"><Param name="Include" type="data.Boolean"/></Component><Component id="OperationsByIDs" type="operation.MenuAspect" execution="native"><Param name="OperationIDs" /></Component><Component id="Refresh" type="action.Action" execution="native" light="false"><Param name="AlsoFromServer" type="data.Boolean"><Default value="true"/></Param><NativeHelper t="uiaction.Refresh"/></Component><Component id="ChangeTab" type="action.Action" execution="native"><Param name="TabControl" type="dynamic_enum" description="Put tab control field id here"><FieldAspect1 t="field_dt.FieldIdParam" PTForFields="field.TabControl"/><Options t="data.Pipeline"><Item t="bart_dt.AllFieldIDs" FieldPT="field.TabControl" /><Item value="%Options%" /><Item value="%code%" /></Options></Param><Param name="MoveTo" type="enum" Options="next tab,previous tab,refresh current tab,specific tab" /><Param name="TabToMoveTo" /><Param name="Animation" type="animation.Animation" /></Component><Component id="SaveAndCloseInItemDetails" type="action.Action" light="false"><xtml t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="SaveAndClose" /></Component><Component id="CancelInItemDetails" type="action.Action" light="false"><xtml t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel" /></Component><Component id="RunOperationFromParent" type="action.Action" execution="native" light="false"><Param name="Operation" description="operation id" /></Component><Component id="RunActions" type="action.Action" decorator="Action" light="false"><Param name="Action" type="action.Action[]" script="true" /><xtml t="xtml.UseParamArray" Param="Action" /></Component><Component id="ActionWithConfirmation" type="action.Action" decorator="Action" light="false"><Param name="Title" essential="true" /><Param name="Question" essential="true" /><Param name="Action" essential="true" type="action.Action" script="true"/><xtml t="dialog.AskForConfirmation" Title="%$Title%" Question="%$Question%"><RunOnOK t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="RunInOperationContext" type="action.Action" execution="native" light="false"><Param name="Action" type="action.Action" script="true" /></Component><Component id="ExportToExcel" type="action.Action" execution="native" light="false"><Aspect t="operation.GenerateOperation" Image="%$_Images%/excel.gif" /><NativeHelper name="Open" t="server.ExportVirtualFile" ContentType="application/vnd.ms-excel;" FileName="data.xls" Content="%%"><Url value="bart.php?op=exportFile&amp;cnt=%$Counter%" /><Content t="data.Pipeline"><Var name="Prefix" value="&lt;html&gt;&lt;body&gt;" /><Var name="Suffix" value="&lt;/body&gt;&lt;/html&gt;" /><Item t="xml.XmlToText" /><Item value="%$Prefix%%%%$Suffix%"/></Content></NativeHelper></Component><Component id="GenerateOperation" type="component_aspect.Aspect"><Param name="ID" /><Param name="Title" script="true" paramVars="ItemName"/><Param name="Image" /><Param name="Target"><Default value="items"/></Param><Param name="WritableOnly" type="data.Boolean" /><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Component%" Property="Image" Value="%$Image%" /><Action t="object.SetMethod" Object="%$_Component%" Method="GenerateOperation"><Xtml t="data.Pipeline" ><Var name="_Component" value="%$_This%" /><Var name="Title1" t="text.FirstSucceeding"><Item t="xtml.UseParam" Param="Title" /><Item t="xtml_dt.ComponentToLowerCase" Data="%$_Component/Component%" /></Var><Var name="ID" t="text.FirstSucceeding"><Item value="%$ID%" /><Item t="text.ToIdText" Data="%$Title1%" /></Var><Item t="xml.Xml" DynamicContent="true" ><Operation t="operation.Operation" ID="%$ID%" Icon="%$_Component/Image%" Target="%$Target%" Title="%$Title1%" WritableOnly="%$WritableOnly%"><Action t="%$_Component/Component%" /></Operation></Item></Xtml></Action></xtml></Component><Component id="GenerateOperationFullXtml" type="component_aspect.Aspect"><Param name="OperationXtml" /><xtml t="object.SetMethod" Object="%$_Component%" Method="GenerateOperation" Xtml="%$OperationXtml%" /></Component><Component id="ShowInXml" type="action.Action" light="false"><Aspect t="operation.GenerateOperation" ID="xml" Target="item" Title="xml" Image="%$_Images%/studio/xml4.gif"/><xtml t="action_async.RunAsyncActions"><Action t="data_items.LoadFullItem" Item="%%" /><Action t="xmlui.ShowXmlDialog" Title="Edit as xml" AutoWrite="true"/></xtml></Component><Component id="Search" type="action.Action" execution="native" gallery="FilterPage" light="false"><Param name="MorePagesToRefresh" type="dynamic_enum_multi" advanced="true" Options="%$_BartContext/Pages[Type=\'multiple\']/ID%" /></Component><Component id="SelectAll" type="action.Action" gallery="MultiSelect" light="false"><Aspect t="operation.GenerateOperationFullXtml"><OperationXtml t="xml.Xml" ><Operation t="operation.Operation" ID="SelectAll" Icon="" Target="items" Title="Select All"><Action t="operation.SelectAll" /></Operation></OperationXtml></Aspect><xtml t="object.RunMethod" Object="%$_Cntr%" Method="SelectAll"/></Component><Component id="ClearAll" type="action.Action" gallery="MultiSelect" light="false"><Aspect t="operation.GenerateOperationFullXtml"><OperationXtml t="xml.Xml" ><Operation t="operation.Operation" ID="ClearAll" Icon="" Target="items" Title="Clear All"><Action t="operation.ClearAll" /></Operation></OperationXtml></Aspect><xtml t="object.RunMethod" Object="%$_Cntr%" Method="ClearAll"/></Component><Component id="ChangeUrl" type="action.Action" light="false"><Param name="Url" /><xtml t="bart_url.ChangeUrl" Url="%$Url%" /></Component><Component id="CloseDialog" type="action.Action" light="false"><xtml t="dlg.CloseDialog" CloseType="%$CloseType%"/><Param name="CloseType" type="enum"><Default value="Cancel"/><value>OK</value><value>Cancel</value></Param></Component><Component id="PrintElement" type="action.Action" description="Prints an html element" execution="native" light="false"><Param name="Selector" description="A jQuery selector ( e.g. .Page_gallery, .fld_MyGroup )"></Param><Param name="CssOnPrintedBody" advanced="true" description="Inline Css for the printed body element" /><Param name="CssClassOnPrintedBody" advanced="true" Default="print" description="Css class for the printed body element" /></Component><Component id="Validate" type="action.Action" description="Validates before execution" execution="native" decorator="WhenValid"><Param name="Group" description="Put group id here" /><Param name="WhenValid" type="action.Action" script="true" /></Component></xtml><xtml ns="ui"></xtml><xtml ns="ui"><Type id="SectionsListStyle" /><Type id="SectionListPageT" /><Type id="ListMarker" type="enum"><value>none</value><value>disc</value><value>circle</value><value>square</value><value>decimal</value><value>decimal-leading-zero</value><value>lower-roman</value><value>upper-roman</value><value>lower-alpha</value><value>upper-alpha</value><value>hebrew</value><value>cjk-ideographic</value></Type><Type id="Level" type="enum"><value>Heading 1</value><value>Heading 2</value><value>Heading 3</value><value>Heading 4</value><value>Heading 5</value><value>Heading 6</value><value>Box</value></Type><Component id="Section" type="ui.Control" execution="xtml"	databind="true"><Param name="Title" essential="true" /><Param name="Control" type="ui.Control[]" essential="true" /><Param name="ItemsLayout" type="ui.ListLayout" script="true"><Default t="ui.LineBreak" /></Param><Param name="Level" type="ui.Level"><Default value="Heading 3" /></Param><Param name="Collapsion" type="enum"><Default value="Not Collapses" /><value>Not Collapses</value><value>Collapses, Open</value><value>Collapsed</value><value>Collapsed by cookie</value></Param><Param name="CollaptionCookie"/><Param name="Style" type="ui.SectionStyle" script="true" paramVars="Title,Level,Collapsion"><Default t="ui.DefaultSectionStyle" /></Param><xtml t="data.Pipeline"><Var name="Title" t="text.MultiLang" Pattern="%$Title%" Dynamic="true"/><Var name="Level" value="%$Level%" /><Var name="Collapsion" value="%$Collapsion%" /><Var name="CollaptionCookie" value="%$CollaptionCookie%" /><Item value="%$Control%" /><Aggregator t="xtml.UseParam" Param="ItemsLayout"><Input t="data.Same" /></Aggregator><Aggregator t="xtml.UseParam" Param="Style" /></xtml></Component><Component id="DefaultSectionStyle" type="ui.SectionStyle" execution="xtml"><xtml t="data.IfThenElse"><Var name="Controls" value="%%"/><If t="yesno.EqualsTo" Data="%$Level%" To="Box"/><Then t="ui.DefaultBoxStyle"/><Else t="xml.WithChanges" Data=""><Var name="Cls" t="text.Replace" Data="%$Level%" Find=" " ReplaceWith="" UseRegex="true"/><Var name="Collapses" t="yesno.NotEqualsTo" Data="%$Collapsion%" To="Not Collapses"/><Var name="IsExpanded" t="data.IfThenElse" If="%$Collapses%" Else="true"><Then t="data.IfThenElse" If="%$Collapsion% == \'Collapsed by cookie\'"><Then t="yesno.ItemsEqual" Item1="expanded"><Item2 t="data.ValueFromCookie" Cookie="%$CollaptionCookie%"/></Then><Else t="yesno.EqualsTo" Data="%$Collapsion%" To="Collapses, Open"/></Then></Var><Xml t="ui.Html" DynamicContent="true"><div class="aa_DefaultSectionStyle %$Cls%"></div></Xml><Change t="xml.AddChildren" Name="Add Title"><Condition t="yesno.NotEmpty" Data="%$Title%"/><Children t="xml.WithChanges"><Xml t="data.Pipeline"><Var name="Tag" t="data.Switch" Data="%$Level%"><Case If="Heading 1" Then="H1"/><Case If="Heading 2" Then="H2"/><Case If="Heading 3" Then="H3"/><Case If="Heading 4" Then="H4"/><Case If="Heading 5" Then="H5"/><Case If="Heading 6" Then="H6"/><Default value="DIV"/></Var><Item t="ui.Html" Tag="%$Tag%" Class="section_header"/></Xml><Change t="xml.UpdateInnerText" NewValue="%$Title%"/><Change t="xml.SetAttribute" AttributeName="class" Condition="%$Collapses%"><Value t="data.IfThenElse" If="%$IsExpanded%" Then="collapsable_section_title expanded" Else="collapsable_section_title"/></Change><Change t="ui.BindEvent" Event="click" Condition="%$Collapses%"><Var name="Title"/><Action t="action.RunActions" Data="%$Title%"><Action t="action.IfThenElse"><If t="uiaction.HasClass" RunOn="%$Title%" Cls="expanded"/><Then t="uiaction.RemoveClass" RunOn="%$Title%" Cls="expanded"/><Else t="uiaction.AddClass" RunOn="%$Title%" Cls="expanded"/></Action><Action t="action.WriteToCookie" Cookie="%$CollaptionCookie%"><Value t="data.IfThenElse" Then="expanded" Else="collapsed"><If t="uiaction.HasClass" RunOn="%$Title%" Cls="expanded"/></Value></Action><Action t="ui.ExecJQuery" Expression=".siblings().toggle(100);"/></Action></Change></Children></Change><Change t="xml.AddChildren" CloneChildren="false" Children="%$Controls%"/><Change t="uiaction.Hide" RunOn="%$Controls%"><Condition t="yesno.Not" Of="%$IsExpanded%"/></Change></Else></xtml></Component><Component id="CollapsableSectionBox" type="ui.SectionStyle"><Param name="Cookie"/><xtml t="ui.List" Class="collapsable_section_box"><Control t="ui.DefaultSectionStyle"><Var name="Collapsion" value="Collapsed by cookie"/></Control></xtml></Component><Component id="DefaultBoxStyle" type="ui.SectionStyle" execution="xtml"><xtml t="xml.WithChanges"><Xml t="ui.Html"><DIV class="section_box"><DIV class="left_top corner"></DIV><DIV class="right_top corner"></DIV><DIV class="content"><DIV class="box_title"></DIV></DIV><DIV class="left_bottom corner"></DIV><DIV class="right_bottom corner"></DIV></DIV></Xml><Change t="xml.UpdateInnerText" NewValue="%$Title%"><Data t="ui.ElementOfClass" Cls="box_title" /></Change><Change t="xml.AddChildren"  CloneChildren="false" Children="%%"><Data t="ui.ElementOfClass" Cls="content" /></Change></xtml></Component><Component id="NoLayout" type="ui.ListLayout" execution="xtml"><xtml t="data.Pipeline" ><Var name="Controls" /><Item value="%$Controls%" /><Aggregator t="data.IfThenElse" ><If t="yesno.NotEqualsTo" To="1"><Data t="data.Count" /></If><Then t="xml.Wrap"><Head t="ui.Html"><span class="aa_NoLayout"/></Head></Then><Else t="data.Same" /></Aggregator></xtml></Component><Component id="SpanList" type="ui.ListLayout" execution="xtml"><Param name="Padding" /><xtml t="xml.WithChanges" ><Var name="Controls" /><Xml t="ui.Html"><span></span></Xml><Change t="xml.AddChildren" ><Children t="data.Pipeline" ><Item value="%$Controls%" /><Aggregator t="data.AddSeparator" ><Separator t="ui.Html" DynamicContent="true"><span class="spanlist_separator" style="width:%$Padding%" /></Separator></Aggregator></Children></Change></xtml></Component><Component id="SectionsList" type="ui.Control" execution="xtml" databind="true"><Param name="Title" /><Param name="Section" type="ui.Sections[]" essential="true"/><Param name="OnlyOneSectionOpen" type="data.Boolean" ><Default value="false" /></Param><Param name="Style" type="ui.SectionsListStyle" script="true" paramVars="SectionsContext"><Default t="ui.DefaultSectionsListStyle" /></Param><Param name="AutoExpand" type="data.Boolean"><Default value="true"/></Param><Param name="CapitalCaseTitles" type="data.Boolean"><Default value="true"/></Param><Param name="Level"><Default value="1"/></Param><xtml t="xtml.UseParam" Param="Style"><Var name="Input"/><Var name="SectionsContext" t="xtml.Params"><Param name="Title" t="data.Pipeline"><Item t="text.MultiLang" Pattern="%$Title%" Dynamic="true"/><Item t="data.IfThenElse" If="%$CapitalCaseTitles%" Else="%%"><Then t="text.Capitalize" Mode="capital each word"/></Item></Param><Param name="AutoExpand" value="%$AutoExpand%"/><Param name="OnlyOneSectionOpen" value="%$OnlyOneSectionOpen%" /><Param name="CapitalCaseTitles" value="%$CapitalCaseTitles%"/><Param name="Level" value="%$Level%"/><Param name="Sections" value="%$Section%"/></Var></xtml></Component><Component id="DefaultSectionsListStyle" type="ui.SectionsListStyle" execution="xtml"><xtml t="data.Pipeline"><Var name="Input"/><Item t="xml.WithChanges"><Var name="SectionTitle" t="text.MultiLang" Pattern="%$SectionsContext/Title%" Dynamic="true"/><Xml t="ui.Html" DynamicContent="true"><div class="sectionslist"><div class="title">%$SectionTitle%</div><table class="sectionslist_table"><tbody><tr class="row"/></tbody></table></div></Xml><Change t="xml.Delete"><Condition t="yesno.Empty" Data="%$SectionsContext/Title%"/><Data t="ui.ElementOfClass" Cls="title"/></Change><Change t="xml.Duplicate" Items="%$SectionsContext/Sections%"><Element t="ui.ElementOfClass" Cls="row"/><ChangeOnElement t="xml.AddChildren" CloneChildren="false"><Var name="SectionTitle" t="data.Pipeline"><Item value="%$InputForChanges/Title%"/><Item t="text.MultiLang" Pattern="%%" Dynamic="true"/><Item t="data.IfThenElse" If="%$SectionsContext/CapitalCaseTitles%" Else="%%"><Then t="text.Capitalize" Mode="capital each word"/></Item></Var><Var name="SectionListContext" t="xtml.Params"><ScriptParam name="ToggleCollapse" t="uiaction.ToggleVisible" Direction="vertical"><RunOn t="uiaction.ElementByClass" Cls="section_in_list_wrapper"><StartFrom t="uiaction.GoUp" TopClass="section_in_list"/></RunOn><AttachExpandClassOn t="uiaction.ElementByClass" Cls="section_in_list_title"><StartFrom t="uiaction.GoUp" TopClass="section_in_list"/></AttachExpandClassOn></ScriptParam></Var><Children t="xml.WithChanges"><Xml t="ui.Html" DynamicContent="true"><td class="section_in_list section_in_list_level%$SectionsContext/Level%"><div onclick="ajaxart_runevent(this,\'SectionListContext\',\'ToggleCollapse\')" class="section_in_list_title expanded">%$SectionTitle%</div><div class="section_in_list_wrapper"/></td></Xml><Change t="xml.AddChildren" CloneChildren="false"><Data t="ui.ElementOfClass" Cls="section_in_list_wrapper"/><Children t="xtml.RunXtml" Xtml="%Control%" Input="%Input%" ForceInputParam="true"/></Change><Change t="ui.DataBind"><Data t="ui.ElementOfClass" Cls="section_in_list_title"/></Change><Change t="uiaction.RunUiActions"><Condition t="yesno.Not" Of="%$SectionsContext/AutoExpand%"/><Data t="ui.ElementOfClass" Cls="section_in_list_title"/><Action t="uiaction.RemoveClass" Cls="expanded"/><Action t="uiaction.Hide"><RunOn t="uiaction.ElementByClass" Cls="section_in_list_wrapper"><StartFrom t="uiaction.GoUp" TopClass="section_in_list"/></RunOn></Action></Change></Children></ChangeOnElement></Change></Item></xtml></Component><Component id="SectionListPage" type="ui.Sections"><Param name="Title" /><Param name="Image" /><Param name="Control" type="ui.Control" script="true" essential="true"/><xtml t="xtml.Params"><Param name="Input" t="data.Same" /><Param name="Title" value="%$Title%"/><Param name="Image" value="%$Image%"/><ScriptParam name="Control" t="xtml.UseParam" Param="Control"/></xtml></Component><Component id="HorizontalSplitter" type="ui.SectionsListStyle" execution="native" ><Param name="IdForCookie"/><Param name="Height"><Default value="300px"/></Param><Param name="DefaultWidths"><Default t="data.ListByCommas" List="200px,200px,200px,200px"/></Param><Param name="KeepTotalWidth" ><Default value="true" /></Param><Param name="TotalWidth" /><NativeHelper name="Control" t="xtml.RunXtml" Xtml="%Control%" Input="%Input%" /></Component></xtml><xtml ns="ui"><Type id="Control" Icon="%$_Images%/studio/app.gif" ><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/control1616.gif" /><MoreComponents><component id="ui.List" itemsParam="Control" /><component id="ui.Section" itemsParam="Control" /><component id="ui.ControlWithAction" itemsParam="Control" /><component id="ui.IfThenElse" itemsParam="Then" /><component id="ui.Switch" itemsParam="Default" /></MoreComponents></Type><Type id="GeneralStyling" /><Type id="ButtonStyle" style="true" image_width="40px"/><Type id="SectionStyle"/><Type id="ListLayout"/><Type id="Field"/><Type id="ListStyle"/><Component id="ControlUsage" type="usage.Usage" execution="native"><Param name="Name"/><Param name="Of"/><Param name="Description"/><Param name="Control" type="ui.Control" script="true"/><Param name="RunOnControl" type="action.Action" script="true"/><Param name="RunBefore" type="action.Action" script="true"/><Param name="CleanAfter" type="action.Action" script="true"/><Param name="ResultType" type="enum"><Default value="Control" /><value>Data</value><value>Control</value></Param><Param name="ExpectedResult" type="data.Boolean" script="true"/><Param name="RunInAllTests" type="data.Boolean" /><Param name="AssignedTo" /><xtml t="usage.DataUsage"  ><Name value="%$Name%"/><Of value="%$Of%"/><Var name="UsageInput"/><Var name="RunBeforePatch" t="xtml.UseParam" Param="RunBefore" /><Var name="ControlElement" Class="ajaxart" t="xtml.UseParam" Param="Control" /><Var name="TopControlElement" value="%$ControlElement%" /><Result t="data.IfThenElse" Then="%$UsageInput%" Else="%$TopControlElement%" ><If t="yesno.EqualsTo" Data="%$ResultType%" To="Data" /></Result><RunBefore t="action.RunActions"><Action t="xtml.RunXtml" Input="%$UsageInput%" Xtml="%$RunOnControl%"><Condition t="yesno.NotEqualsTo" Data="%$SimulateDontRunOpreration%" To="true"/></Action></RunBefore><ResultTransformer t="data.IfThenElse"><If t="yesno.EqualsTo" Data="%$ResultType%" To="Data" /><Then t="data.Same" /><Else t="data.Pipeline" ><Item t="xml.XmlToText"/><Item t="text.Replace" Find="on(\\w+)=\\&quot;[^\\&quot;]*\\&quot;" ReplaceWith="" UseRegex="true"/><Item t="text.Replace" Find="jQuery([0-9]+)=\\&quot;[^\\&quot;]*\\&quot;" ReplaceWith="" UseRegex="true"/><Item t="ui.TextToHtml" /></Else></ResultTransformer><HtmlResultAsXml t="data.Pipeline"><Item t="xml.XmlToText"/><Item t="text.Replace" Find="class=(\\w+)" ReplaceWith="class=&quot;$1&quot;" UseRegex="true" /><Item t="text.Replace" Find="id=(\\w+)" ReplaceWith="id=&quot;$1&quot;" UseRegex="true" /><Item t="text.Replace" Find="&lt;IMG([^&gt;]+)&gt;" ReplaceWith="&lt;IMG$1/&gt;" UseRegex="true" /><Item t="text.Replace" Find="&lt;BR&gt;" ReplaceWith="&lt;BR/&gt;" Name="fix BR" UseRegex="true"/><Item t="text.Replace" Find="value=(\\w+)" ReplaceWith="value=&quot;$1&quot;" UseRegex="true" /></HtmlResultAsXml><CleanAfter t="xtml.UseParam" Param="CleanAfter" /><ExpectedResult t="xtml.UseParam" Param="ExpectedResult"/></xtml></Component><Type id="ButtonProperties"/><Component id="ButtonProperties" type="ui.ButtonProperties"><Param name="Text" /><Param name="Style" type="ui.ButtonStyle" script="true" ><Default t="ui.StandardButton"/></Param><Param name="Image" /><Param name="Tooltip" /><xtml t="xtml.Params"><Param name="Text" value="%$Text%"/><Param name="Image" value="%$Image%"/><Param name="Tooltip" value="%$Tooltip%"/><ScriptParam name="Style" t="xtml.UseParam" Param="Style"/></xtml></Component><Component id="StandardButton" type="ui.ButtonStyle" Image="%$_Images%/styles/standard_button.png" execution="native" /><Component id="ButtonAsImage" type="ui.ButtonStyle" Image="%$_Images%/styles/button_image.png"><Param name="PressedImage" /><Param name="HoverIndication" type="data.Boolean"><Default value="true"/></Param><Param name="MultiLangImage" type="data.Boolean"><Default value="false"/></Param><xtml t="xml.WithChanges"><Var name="Url" t="data.IfThenElse" Else="%$ButtonContext/Image%"><If t="yesno.And"><Item value="%$MultiLangImage%" /><Item t="yesno.NotEmpty" Value="%$Language%" /></If><Then value="%$Left%%$Language%/%$Right%" ><Var name="Left" t="text.Split" Data="%$ButtonContext/Image%" Part="All but Last" Separator="/"/><Var name="Right" t="text.Split" Data="%$ButtonContext/Image%" Part="Last" Separator="/"/></Then></Var><Xml t="ui.Html" DynamicContent="true"><img class="button_image" title="%$ButtonContext/Text%" pressed_src="%$PressedImage%" src="%$Url%" original_src="%$ButtonContext/Image%" onclick="ajaxart_runevent(this,\'ButtonContext\',\'OnClick\')" /></Xml><Change t="ui.DataBind" /><Change t="ui.AddMousePressedEffect" /><Change t="ui.DisableTextSelection" /><Change t="uiaction.AddClass" RunOn="%%" Cls="hover_indication" Condition="%$HoverIndication%"/></xtml></Component><Component id="ControlData" type="data.Data" execution="native"><Param name="Control"><Default t="data.Same"/></Param><Param name="Type" type="enum"><Default value="original_data"/><Value>original_data</Value><Value>data</Value><Value>script</Value><Value>context</Value><Value>all</Value></Param></Component><Component id="FindControlData" type="data.Data" execution="native"><Param name="StartWith"/><Param name="Direction" type="enum"><Default value="up"/><Value>down</Value><Value>up</Value></Param><Param name="Type" type="enum"><Default value="data"/><Value>data</Value><Value>script</Value><Value>all</Value></Param></Component><Component id="SetCssText" type="xml.Change" execution="native" ><Param name="Style" /></Component><Component id="SetCssProperty" type="xml.Change" execution="native" ><Param name="Property" /><Param name="Value" /></Component><Component id="UseDataBoundParams" type="xml.Change" execution="native"><Param name="Change" type="xml.Change"/></Component><Component id="ExecJQuery" type="xml.Change" execution="native"><Param name="Expression" essential="true"/></Component><Component id="TextboxValue" type="data.Data" execution="native"/><Component id="DataFromJavaScript" type="data.Data" execution="native"><Description>retrieves data from a javascript expression. The expression can access the data and variables as js variables named : data,var1,...</Description><Param name="Expression" essential="true"/></Component><Component id="RunJavaScript" type="action.Action" execution="native" hidden="true" depricated="true"><Param name="Expression" essential="true"/><NativeHelper t="ui.DataFromJavaScript"/></Component><Component id="TextToHtml" type="data.Control" execution="native" /><Component id="UrlFragment" type="data.Data"><Param name="Attribute" essential="true"/><xtml t="data.Pipeline"><Item t="data.Url"/><Item t="text.Split" Separator="#" Part="Second"/><Item t="data.IfThenElse" Then="%%"><If t="yesno.IsEmpty" Value="%$Attribute%"/><Else t="ui.UrlFragmentAttribute" Url="%%" Attribute="%$Attribute%"><Url t="data.Url"/></Else></Item><Item t="text.UrlEncoding" Type="decode"/></xtml></Component><Component id="UrlFragmentAttribute" type="data.Data" execution="native"><Param name="Url" /><Param name="Attribute" /></Component><Component id="UrlAtt" type="data.Data"><Param name="Attribute" essential="true"/><xtml t="data.Pipeline"><Item t="data.Url"/><Item t="text.Split" Separator="%$Attribute%=" Part="Second"/><Item t="text.Split" Separator=";" Part="First"/><Item t="text.Split" Separator="#" Part="First"/><Item t="text.Split" Separator="&amp;" Part="First"/><Item t="text.UrlEncoding" Type="decode"/></xtml></Component><Component id="Switch" type="ui.Control" execution="native" databind="true"><Param name="Value"><Default t="data.Same"/></Param><Param name="Case" type="inline[]" essential="true"><Param name="If" essential="true" /><Param name="IfCondition" type="data.Boolean" script="true" essential="true"/><Param name="Then" type="ui.Control" essential="true"/></Param><Param name="Default" type="ui.Control"><Default t="ui.Text" /></Param></Component><Component id="ControlPutInStruct" type="ui.Control" execution="native"><Param name="Struct"/><Param name="Field"/><Param name="Control" type="ui.Control" script="true"/></Component><Component id="IsHtml" type="data.Boolean" execution="native" /><Component id="BindEvent" type="xml.Change" execution="native" ><Param name="Event" essential="true"/><Param name="Action" type="action.Action" essential="true"/><Param name="KeepOriginalRunOnControl" type="data.Boolean"/></Component><Component id="OnKeyDown" type="action.Action" execution="native" light="false"><Param name="Action" type="action.Action" script="true" essential="true"/></Component><Component id="RunInControlContext" execution="native" ><Param name="Item" /><Param name="Mode"><Default value="full context"/><value>full context</value><value>copy control variables</value></Param></Component><Component id="UrlParameter" type="data.Data" execution="native"><Param name="Param"/></Component><Component id="ScreenSize" type="data.Data" execution="native"><Param name="Axis" type="enum.Enum"><Default value="height"/><value>height</value><value>width</value></Param><Param name="Margin"/><Param name="AsHtmlString" type="data.Boolean"/></Component><Component id="DisableTextSelection" type="xml.Change" execution="native"/><Component id="AddMousePressedEffect" type="xml.Change" execution="native" visibility="internal" /><Component id="LoadCssFile" type="action.Action" execution="native" light="false"><Param name="Url" essential="true"/></Component><Component id="CurrentUrlWithChangedParam" type="data.Data" execution="native"><Param name="Param"/><Param name="Value"/><Param name="Url"><Default t="data.Url"/></Param></Component><Component id="IsChrome" type="data.Boolean" execution="native"/><Component id="HtmlUnderElement" type="data.Data" execution="native"/><Component id="ClassOfElement" type="data.Data" execution="native" ><Param name="Element"><Default value="%%" /></Param></Component><Component id="ControlInObject" type="ui.Control" execution="native"><Param name="Object"/><Param name="Control"/></Component><Component id="BaseUrl" type="data.Data"><xtml t="data.Pipeline"><Item t="data.Url" /><Item t="text.KeepPrefix" Separator="#" /><Item t="text.RemovePrefix" Prefix="http://" /><Item value="%%#" /></xtml></Component><Component id="GeneralStyling" type="ui.GeneralStyling"><Param name="DialogButtonStyle" type="ui.ButtonStyle" script="true" /><xtml t="object.SetMethod" Object="%$_GeneralStyling%" Method="DialogButtonStyle"><Xtml t="xtml.UseParam" Param="DialogButtonStyle" /></xtml></Component><Component id="CssClassesInControl" type="data.Data" execution="native"><Param name="Control" /></Component><Component id="AttachGlobalCss" type="data.Data" execution="native"><Param name="Css" /><Param name="Name" /></Component></xtml><xtml package="true"><xtml ns="ui_async"><Component id="LoadingControl" type="ui.Control" execution="native"><Param name="DivID"><Default value="ajaxart_loading"/></Param></Component><Component id="ControlUsage" type="usage.Usage" execution="native"><Param name="Of"/><Param name="Control" type="ui.Control" script="true"/><Param name="RunOnControl" type="uiaction.UsageAction" script="true"/><Param name="CleanAfter" type="action.Action" script="true"/><Param name="ExpectedResult" type="data.Boolean" script="true"/><NativeHelper name="CloseDialogAndPopUp" t="action.RunActions"><Action1 t="dialog.CloseDialog"/><Action t="dlg.CloseDialogFrame" /><Action t="dialog.ClosePopup" /></NativeHelper></Component><Component id="WaitForAsyncToFinish" type="uiaction.UsageAction" execution="native"/><Component id="ControlWithTimer" execution="native" description="runs and shows the control after a timer"><Param name="Control" type="ui.Control" script="true" /></Component></xtml><xtml ns="loading_style"><Type id="Style" style="true"/><Component id="Default" type="loading_style.Style"><xtml t="ui.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { font-style: italic; }]]></Css><Javascript><![CDATA[function(elem) { elem.control.innerHTML = elem.text; }]]></Javascript></xtml></Component></xtml></xtml><xtml ns="uiaspect" ><Component id="DeleteOnHover" type="uiaspect.Aspect" execution="native" category="table" ><Param name="DeleteImage"><Default value="%$_Images%/delete1616.gif"/></Param><Param name="TopMargin"><Default value="4"/></Param><Param name="RightMargin" Default="10" /><Param name="DoAfterDelete" type="action.Action" script="true"/><Param name="ConfirmationText" script="true"/><NativeHelper name="Delete" t="operation.Delete"><ConfirmationText t="xtml.UseParam" Param="ConfirmationText" /><DoAfter t="xtml.UseParam" Param="DoAfterDelete" /></NativeHelper></Component><Component id="TableSummaryLine" type="uiaspect.Aspect" execution="native" category="table"><Param name="Title"><Default value="Total"/></Param><Param name="Formula" type="enum" Options="Sum,Average,Max,Min,Concat"><Default value="Sum"/></Param><Param name="CustomFormula" type="data.Data" script="true" advanced="true"/><Param name="ShowInGroup" type="enum" Options="never,always,auto"><Default value="auto"/></Param></Component><Component id="DragAndDropMover" type="uiaspect.Aspect" execution="native" category="table" description="drag and drop table lines"><Param name="OnDrop" type="action.Action" script="true"></Param></Component><Component id="DragAndDropItems" type="uiaspect.Aspect" execution="native" category="table" description="drag and drop items on itemlists and grids"><Param name="OnDrop" type="action.Action" script="true"></Param></Component><Component id="TreeDragAndDrop" type="uiaspect.Aspect" execution="native" category="structure"><Param name="OnDrop" type="action.Action" script="true"></Param></Component><Component id="VerticalMasterDetails" type="uiaspect.Aspect"><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.BottomLocation"/><Aspect t="uiaspect.ItemSelection"/><Aspect t="uiaspect.SynchSelectionWithItemDetails"/><Aspect t="uiaspect.ItemDetails" Transactional="false"><OpenIn t="uiaspect.DetailsInFixedLocation"/></Aspect></xtml></Component><Component id="SeparatorControl" type="uiaspect.Aspect" category="Horizontal" jbart="false" execution="native"><Param name="Control" type="ui.Control" script="true" /></Component><Component id="HorizontalMasterDetails" type="uiaspect.Aspect"><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.RightLocation"/><Aspect t="uiaspect.ItemSelection"/><Aspect t="uiaspect.SynchSelectionWithItemDetails"/><Aspect t="uiaspect.ItemDetails"><OpenIn t="uiaspect.DetailsInFixedLocation" Location="right" /></Aspect></xtml></Component><Component id="StretchToBottomRight" type="uiaspect.Aspect" execution="native" jbart="false"><Param name="StretchToBottom" type="data.Boolean"><Default value="true"/></Param><Param name="MarginFromBrowserBottom"><Default value="5"/></Param><Param name="StretchToRight" type="data.Boolean"><Default value="true"/></Param><Param name="MarginFromBrowserRight"><Default value="5"/></Param></Component><Component id="RunAction" type="uiaspect.Aspect" execution="native" category="other"><Param name="RunBeforeControl" type="action.Action" description="can change the data"/><Param name="RunAfterControl" type="action.Action" description="can run ui actions (clicking on buttons, setting text in textboxes etc.)"/><Param name="OnAttach" type="action.Action" description="can activate UI events"/><Param name="RunAsyncBeforeControl" type="action_async.Action" script="true" description="The control will wait till the async action is completed"/><Param name="ShowWhileWaiting"><Default value="Loading..." /></Param></Component><Component id="DetailsInDialog" type="uiaspect.OpenIn"><Param name="RunOnOK" type="action.Action" script="true"/><Param name="CloseOnEnter" type="data.Boolean"><Default value="true"/></Param><Param name="DialogTitle"/><Param name="OKLabel" advanced="true"><Default value="OK" /></Param><Param name="Height" advanced="true"/><Param name="Width" advanced="true"/><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" DialogData="%$_InnerItems/Items%" CloseOnEnter="%$CloseOnEnter%" OKLabel="%$OKLabel%" Height="%$Height%" Width="%$Width%"><Buttons t="data.IfThenElse" Then="OK,Cancel" Else="Close"><If t="yesno.OR"><Item value="%$_Transactional%" /><Item value="%$IsNewItem%" /></If></Buttons><Title t="text.FirstSucceeding"><Item value="%$DialogTitle%"/><Item t="data.IfThenElse" If="%$IsNewItem%"><Then t="text.TranslatePattern" Pattern="New %$Title1%"/><Else t="text.TranslatePattern" Pattern="Edit %$Title1%"/><Var name="Title1" t="text.Translate" Text="%$_Items/ItemTypeName%"/></Item></Title><Content value="%$DetailsControl%" /><BeforeClose t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Save" /><RunOnOK t="action_async.RunAsync"><Action t="action_async.RunActions"><Action t="xtml.UseParam" Param="RunOnOK"/></Action></RunOnOK><RunOnCancel t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel" /></Dialog></xtml></Component><Component id="DetailsInPopup" type="uiaspect.OpenIn"><Param name="PopupStyle" type="dlg.PopupStyle"><Default t="dlg.FullBlackShadow"/></Param><Param name="ShowCloseButton" type="data.Boolean"/><xtml t="dialog.TogglePopup" OnElem="%$ControlElement%" Style="%$PopupStyle%" PopupCssClass="%$PopupCssClass%" ShowCloseButton="%$ShowCloseButton%"><Contents value="%$DetailsControl%"/></xtml></Component><Component id="TabControlOnChangeTab" type="uiaspect.Aspect" category="tabcontrol"><Param name="BeforeChangeTab" type="action.Action" script="true"/><Param name="AfterTabLoaded" type="action.Action" script="true"/><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="action.RunActions"><Action t="object.SetMethod" Object="%$_Cntr%" Method="BeforeChangeTab"><Xtml t="xtml.UseParam" Param="BeforeChangeTab" /></Action><Action t="object.SetMethod" Object="%$_Cntr%" Method="AfterTabLoaded"><Xtml t="xtml.UseParam" Param="AfterTabLoaded" /></Action></InitializeContainer></xtml></Component></xtml><xtml ns="uiaction"><Type id="UsageAction"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/run.gif" /></Type><Component id="Hover" type="action.Action,uiaction.UsageAction" light="false" ><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><xtml t="uiaction.FireEvent" Event="mouseover" ForOnlyOneElement="true"/></Component><Component id="Click" type="action.Action,uiaction.UsageAction" light="false" ><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><xtml t="uiaction.FireEvent" Event="click" ForOnlyOneElement="true"/></Component><Component id="MouseDown" type="action.Action,uiaction.UsageAction"  light="false"><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><xtml t="uiaction.FireEvent" Event="mousedown"/></Component><Component id="KeyDown" type="action.Action,uiaction.UsageAction" light="false" ><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><Param name="KeyCode"><Field t="bart_dt.RunOnDT" /></Param><xtml t="uiaction.FireEvent" Event="keydown"/></Component><Component id="MouseUp" type="action.Action,uiaction.UsageAction" light="false" ><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><xtml t="uiaction.FireEvent" Event="mouseup"/></Component><Component id="ButtonClick" type="action.Action,uiaction.UsageAction" execution="native" light="false"><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param></Component><Component id="ClickOnTab" type="action.Action" light="false"><xtml t="uiaction.FireEvent" Event="mousedown"/></Component><Component id="Refresh" type="action.Action" execution="native" light="false"><Param name="RunOn" essential="true" /><Param name="RunOnControl" type="action.Action" advanced="true" /></Component><Component id="FireEvent" type="action.Action" execution="native" description="" light="false"><Param name="Event" essential="true"/><Param name="MouseButton"/><Param name="KeyCode"/><Param name="ForOnlyOneElement" type="data.Boolean"><Default value="true"/></Param></Component><Component id="MouseRightClick" type="action.Action" light="false"><xtml t="action.RunActions"><Action t="uiaction.FireEvent" Event="mousedown" MouseButton="right"/><Action t="uiaction.FireEvent" Event="mouseup" MouseButton="right"/></xtml></Component><Component id="ControlElementToRunOn" type="data.Data" execution="native"/><Component id="ElementByID" type="data.Data" execution="native"><Param name="StartFrom" type="data.Data"><Default t="uiaction.ControlElementToRunOn"/></Param><Param name="ID" essential="true" /></Component><Component id="ElementByClass" type="data.Data" execution="native"><Param name="StartFrom" type="data.Data"><Default t="uiaction.ControlElementToRunOn"/></Param><Param name="Cls" essential="true" /></Component><Component id="GoUp" type="data.Data" execution="native"><Param name="TopClass"/><Param name="TopId"/><Param name="TopHtmlTag"/></Component><Component id="GoUpAndDown" type="data.Data"><Param name="UpClass" essential="true"  /><Param name="DownClass" essential="true" /><xtml t="uiaction.ElementByClass" Cls="%$DownClass%"><StartFrom t="uiaction.GoUp" TopClass="%$UpClass%"/></xtml></Component><Component id="ElementByInnerFilter" type="data.Data" execution="native"><Param name="TopElement" type="data.Data"><Default t="uiaction.ControlElementToRunOn"/></Param><Param name="Filter" type="data.Boolean" script="true"/></Component><Component id="ToggleVisible" type="action.Action" light="false"><Param name="Direction" type="enum"><value>vertical</value><value>horizontal</value><Default value="vertical" /></Param><Param name="AttachExpandClassOn"/><xtml t="action.RunActions"><Action t="xml.ChangeXml"><Xml t="uiaction.ControlElementToRunOn"/><Change t="ui.ExecJQuery" Expression=".slideToggle(\'fast\')"/></Action><Action t="action.IfThenElse"><If t="uiaction.HasClass" RunOn="%$AttachExpandClassOn%" Cls="expanded"/><Then t="action.RunActions"><Action t="uiaction.RemoveClass" RunOn="%$AttachExpandClassOn%" Cls="expanded"/><Action t="uiaction.AddClass" RunOn="%$AttachExpandClassOn%" Cls="collapsed"/></Then><Else t="action.RunActions"><Action t="uiaction.AddClass" RunOn="%$AttachExpandClassOn%" Cls="expanded"/><Action t="uiaction.RemoveClass" RunOn="%$AttachExpandClassOn%" Cls="collapsed"/></Else></Action><Action t="action.DelayedRun" DelayInMilli="500" UniqueActionID="FixDialog"><Action t="dialog.FixTopDialogPosition" /></Action></xtml></Component><Component id="Alert" type="action.Action" execution="native" light="false"><Param name="Text" essential="true" /></Component><Component id="ReplaceContents" type="action.Action" execution="native" light="false"><Param name="NewContents" type="ui.Control" essential="true" /></Component><Component id="GoToUrl" type="action.Action" execution="native" hidden="true" light="false" ><Param name="Url" essential="true" /></Component><Component id="SetUrlFragment" type="action.Action" light="false"><Param name="Fragment"/><Param name="Attribute" essential="true"/><Param name="Value" essential="true"/><xtml t="action.IfThenElse"><If t="yesno.NotEmpty" Value="%$Fragment%"/><Then t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item t="data.Url"/><Item t="text.Replace" Find="#.*" ReplaceWith="" UseRegex="true"/><Item t="text.Concat" Suffix="#%$Fragment%"/></Url></Then><Else t="uiaction.SetUrlFragment"><Fragment t="bart_url.NewUrlFragment" Proposed="?%$Attribute%=%$Value%"><Current t="ui.UrlFragment"/></Fragment></Else></xtml></Component><Component id="ReplaceControl" type="action.Action" execution="native" light="false"><Param name="NewControl" type="ui.Control" essential="true" /></Component><Component id="Hide" type="action.Action" execution="native" light="false"/><Component id="SelectItem" type="action.Action" light="false"><Param name="TopElement" type="data.Data"><Default t="uiaction.ControlElementToRunOn"/></Param><Param name="Filter" type="data.Boolean" script="true"/><xtml t="uiaction.Click"><RunOn t="uiaction.ElementByInnerFilter" TopElement="%$TopElement%"><Filter t="xtml.UseParam" Param="Filter"/></RunOn></xtml></Component><Component id="ItemElementByFilter" type="data.Data" execution="native"><Param name="FilterOnItem" type="data.Boolean" script="true"/></Component><Component id="Select" type="action.Action,uiaction.UsageAction" execution="native" light="false"><Param name="FilterOnItem" type="data.Boolean" script="true"/><Param name="DoAfter" type="action.Action" script="true"/><Param name="MouseMethod" type="enum" Options="mousedown,click"><Default value="mousedown"/></Param><NativeHelper name="Click" t="action.RunActions"><Action t="uiaction.FireEvent" Event="%$MouseMethod%" /><Action t="xtml.UseParam" Param="DoAfter" /></NativeHelper></Component><Component id="MobileScrollToElement" type="action.Action" execution="native" light="false"><Param name="Element"><Default value="%$ControlElement%" /></Param></Component><Component id="DataOfSelectedItem" type="data.Data"><xtml t="data.Pipeline"><Item t="uiaction.ControlElementToRunOn"/><Item t="data.FirstSucceeding"><Item t="ui.ElementOfClass" Cls="aa_selected_item"/><Item t="ui.ElementOfClass" Cls="selected"/></Item><Item t="ui.ControlData" Type="data"/></xtml></Component><Component id="DataItemsOfItemInTree" type="data.Data" execution="native" description="The data items of a tree node"><Param name="ItemElement" /></Component><Component id="RefreshAfterSelectedDeleted" type="action.Action" execution="native" light="false"/><Component id="SelectInCombo" type="action.Action" light="false"><Param name="ValueText"/><xtml t="ui.RunJavaScript" Expression="if(data != \'\' &amp;&amp; data != null) { data.selected = true;data.parentNode.onchange(); }"><Data t="data.Pipeline"><Item t="ui.ControlToRunOn"/><Item t="ui.ElementOfClass" Cls="aaoption" OnlyFirst="false" /><Item t="yesno.PassesFilter"><Filter t="yesno.EqualsTo"><Data t="xml.InnerTextValue"/><To value="%$ValueText%"/></Filter></Item></Data></xtml></Component><Component id="OpenPopupOfTextbox" type="action.Action" light="false"><xtml t="uiaction.Click"><RunOn t="ui.ElementOfClass" Cls="aatextpopup_img"><Data t="ui.ControlToRunOn"/></RunOn></xtml></Component><Component id="SelectionChangedByData" type="action.Action" visibility="internal" light="false"><Param name="NewSelected" /><xtml t="xtml.RunXtml" Xtml="%$MasterDetailContext/SelectionChanged%" Input="%$NewSelected%" ForceInputParam="true" /></Component><Component id="Focus" type="action.Action" execution="native"><Param name="OnFirstInput" type="data.Boolean" /></Component><Component id="MoveSelection" type="action.Action" execution="native" light="false"><Param name="Direction" type="enum" ><value>One Up</value><value>One Down</value></Param></Component><Component id="RemoveClass" type="action.Action" light="false"><Param name="Cls" essential="true" /><xtml t="ui.RunJavaScript" Expression="jQuery(element).removeClass(ajaxart.getVariable(context, \'Cls\')[0]);" ><Var name="Cls" value="%$Cls%" /></xtml></Component><Component id="HasClass" type="data.Boolean" execution="native"><Param name="Cls" essential="true" /></Component><Component id="SelectedInCombo" type="data.Data" execution="native"/><Component id="SetComboOptionValue" type="xml.Change" execution="native"><Param name="Value" /></Component><Component id="SetEnabling" type="action.Action" execution="native" light="false"><Param name="Enable" type="data.Boolean" /></Component><Component id="Show" type="action.Action" execution="native" light="false"/><Component id="Hide" type="action.Action" execution="native" light="false" /><Component id="SetCssProperty" type="action.Action" light="false"><Param name="Property" essential="true" /><Param name="Value" essential="true" /><xtml t="ui.RunJavaScript" type="action.Action" Expression="if(element != null) jQuery(element).css(\'%$Property%\',\'%$Value%\');"><Condition t="yesno.NotEmpty" Data="%$Property%" /></xtml></Component><Component id="SetMessageBarText" type="action.Action" light="false"><Param name="Hide" type="data.Boolean" ><Default value="false" /></Param><Param name="Text" /><Param name="MessageBarType" ><Default value="notification" /></Param><Param name="Type" type="enum"><value>Error</value><value>Warning</value><value>Info</value><value>Success</value><Default value="Error" /></Param><xtml t="action.RunActions" RunOn=".%$MessageBarType%" RunOn1="updown(.ajaxart,.%$MessageBarType%)" ><Action t="action.RunActionOnItems" Items="%$ControlElement%" ><Action t="action.IfThenElse" If="%$Hide%" RunOn="%%" ><Then t="uiaction.Hide" /><Else t="action.RunActions"><Action t="uiaction.SetText" RunOn=".message_bar_text" ><Text t="text.MultiLang" Pattern="%$Text%" Dynamic="true" /></Action><Action t="uiaction.RemoveClass" Cls="Error Warning Success Info"  /><Action t="uiaction.AddClass" Cls="%$Type%" /><Action t="uiaction.Show" /></Else></Action></Action><Action t="uiaction.HideMessageBarOnUserClick" ><Condition t="yesno.ItemsEqual" Item1="%$MessageBarType%" Item2="notification" /></Action><Action t="dialog.FixTopDialogPosition" /></xtml></Component><Component id="HideMessageBarOnUserClick" execution="native" light="false"></Component><Component id="RunEvent" type="action.Action" execution="native" light="false"><Param name="VarName"/><Param name="Action"/></Component><Component id="ReloadPage" type="action.Action" light="false"><xtml t="ui.RunJavaScript" Expression="if (!ajaxart.inPreviewMode) location.reload(true);" /></Component><Component id="FindFirstInput" execution="native"/><Component id="JQueryFind" type="data.Data" execution="native"><Param name="Expression" essential="true" /><Param name="LogOnEmptyResult" type="data.Boolean"><Default value="true" /></Param><Param name="All" type="data.Boolean"/><Param name="RunOnData" type="data.Boolean"/><Param name="RunOnScreen" type="data.Boolean" essential="true"/></Component><Component id="StretchToBottom" type="ui.Action" execution="native" light="false"><Param name="HeightDelta"/><Param name="WidthDelta"/></Component><Component id="RegisterOnPageClose" type="action.Action" execution="native" light="false"><Param name="ShowMessageIf" type="data.Boolean" script="true"/><Param name="Message" type="data.Data" script="true"/></Component><Component id="UpdateBrowserTitle" type="action.Action" execution="native"><Param name="Title" essential="true" /></Component><Component id="RefreshSelectedInList" type="action.Action" light="false"><xtml t="xml.ReplaceElement"><RunOn t="ui.ElementOfClass" Cls="selected"><Data t="ui.ControlToRunOn"/></RunOn><Data t="ui.ControlToRunOn"/><NewElement t="ui.RunInControlContext"><Item t="ui.TextItemListItem" Class="selected"/></NewElement></xtml></Component><Component id="AddControlUnder" type="xml.Change"><Param name="Element"/><Param name="Control" type="ui.Control" /><xtml t="xml.PerformChanges" Data="%$Element%"><Change t="ui.DataBind"/><Change t="xml.AddChildren" CloneChildren="false" Children="%$Control%"/></xtml></Component><Component id="RefreshCurrentPropertySheet" type="action.Action" light="false"><xtml t="uiaction.Refresh" RunOn="up(.aapropertysheet)" /></Component><Component id="MakeCssInline" type="ui.Control" execution="native"><Param name="Control" type="ui.Control" /><Param name="CssReplacer" /></Component><Component id="Validate" type="action.Action" light="false"><Param name="Input"><Default t="data.Same"/></Param><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="MandatoryMessage" script="true"><Default t="ui.MandatoryMessage"/></Param><Param name="ExtraValidation" type="ui.Validation" script="true"/><Param name="TopItem" ><Default t="uiaction.GoUp" TopClass="ajaxart" /></Param><xtml t="action.RunActions"><Var name="OriginalControlElement" value="%$ControlElement%" /><Action t="action.RunActions" RunOn="%$TopItem%"><Var name="MandatoryErrors" t="data.WritableText"/><Var name="ValidationError" t="data.WritableText"/><Action t="uiaction.Show" RunOn=".field_desc"/><Action t="uiaction.Hide" RunOn=".validation_message"/><Action t="ui.RunInControlContext" RunOn="down(.field_control)" Remark="mandatory" Mode="copy control variables"><Item t="action.RunActions"><Condition t="yesno.And"><Item t="uiaction.HasClass" Cls="mandatory"/><Item t="yesno.IsEmpty"/></Condition><Action t="uiaction.AddClass" Cls="error aa_mandatory_error"/><Action t="action.WriteValue" To="%$MandatoryErrors%"><Value t="data.AddToCommaSeparated" List="%$MandatoryErrors%" ToAdd="%$FieldTitle%"/></Action></Item></Action><Action t="server.CallServer" Remark="valiadtions"><Call t="ui.RunInControlContext" RunOn="down(.field_control)" Mode="copy control variables"><Item t="xtml.RunXtml" Xtml="%$_Field/Validation%"><Condition t="yesno.NotEmpty"/></Item></Call><Call t="xtml.UseParam" Param="ExtraValidation" Remark="extra validations"><Var name="_ValidationContext" t="xtml.Params"><ScriptParam name="OnError" t="action.WriteValue" To="%$ValidationError%" Value="%%"/></Var></Call><Call t="server.ImmediateResult" Remark="avoid empty calls"/><OnSuccess t="action.Switch"><Case><IfCondition t="yesno.NotEmpty" Value="%$MandatoryErrors%"/><Then t="action.RunActions"><Action t="uiaction.SetMessageBarText" MessageBarType="validation" RunOn="%$TopItem%"><Text t="xtml.UseParam" Param="MandatoryMessage"><Var name="FieldTitle" t="text.Concat" Separator=", "><Items t="data.ListByCommas" List="%$MandatoryErrors%"/><LastSeparator t="text.MultiLang" Pattern=" and "/></Var></Text></Action><Action t="xtml.UseParam" Param="OnFailure" RunOn="%$OriginalControlElement%"/></Then></Case><Case><IfCondition t="yesno.NotEmpty" Value="%$ValidationError%"/><Then t="action.RunActions"><Action t="uiaction.SetMessageBarText" RunOn="%$TopItem%" MessageBarType="validation" Text="%$ValidationError%"/><Action t="xtml.UseParam" Param="OnFailure" RunOn="%$OriginalControlElement%"/></Then></Case><Default t="xtml.UseParam" Param="OnSuccess" RunOn="%$OriginalControlElement%"/></OnSuccess><OnFailure t="uiaction.SetMessageBarText" RunOn="%$TopItem%" MessageBarType="validation" Text="error on validation"/></Action></Action></xtml></Component><Component id="ShowValidationError" type="action.Action" light="false"><Param name="SourceControl" ><Default value="%$ControlElement%" /></Param><Param name="Message" /><xtml t="action.RunActions"><Action t="uiaction.Hide" RunOn="updown(.value,.field_desc)" /><Action t="uiaction.Show" RunOn="updown(.value,.validation_message)" /><Action t="uiaction.SetText" Text="%$Message%" RunOn="updown(.value,.validation_message)" /><Action t="uiaction.AddClass" Cls="error" /><Action t="action.WriteValue" To="%$ValidationError%" Value="%$Message%" /></xtml></Component><Component id="ValidateField" type="action.Action" hidden="true" light="false" ><xtml t="xtml.RunXtml" Xtml="%$_Field/Validation%" ><Condition t="yesno.NotEmpty" /></xtml></Component><Component id="CleanFieldValidation" type="action.Action" hidden="true" light="false"><xtml t="action.RunActions" ><Action t="uiaction.Show" RunOn="updown(.value,.field_desc)" /><Action t="uiaction.Hide" RunOn="updown(.value,.validation_message)" /><Action t="uiaction.RemoveClass" Cls="error aa_mandatory_error" /><Action t="uiaction.Hide" RunOn="updown(.ajaxart,.message_bar.validation)" /><Action t="uiaction.Hide" RunOn="updown(.validation_section,.message_bar.validation)" /></xtml></Component><Component id="SetInnerTextOfData" type="action.Action" execution="native" light="false"/><Component id="RefreshItemElements" type="action.Action" execution="native" light="false"><Param name="ItemElements" type="data.Data"><Default value="%$_ElemsOfOperation%"/></Param></Component><Component id="SelectedItemElement" type="data.Data" execution="native"/><Component id="DeleteItemElements" type="action.Action" light="false" execution="native" Description="Takes care for the new selection"><Param name="ItemElements" type="data.Data"/></Component><Component id="AddItemElement" type="action.Action" light="false" execution="native" uses="RunOn" ><Param name="Item" type="data.Data"/><Param name="ParentElement"/><Param name="SelectIt" type="data.Boolean"><Default value="true"/></Param><Param name="DoOnAddedElement" type="action.Action" script="true" /></Component><Component id="CheckAll" type="action.Action" execution="native" light="false" uses="RunOn" ><Param name="Select" type="data.Boolean"/></Component><Component id="RefreshAfterDataItemsChanged" type="action.Action" light="false" execution="native" /><Component id="SetBrowserIcon" type="action.Action" light="false" execution="native"><Param name="Icon" /></Component><Component id="RefreshAllItemsInItemList" type="action.Action" light="false" execution="native"/><Component id="DownloadFile" type="action.Action" light="false" execution="native" ><Param name="Url" essential="true" /></Component><Component id="BindHashChangeEvent" type="action.Action" light="false" execution="native" ><Param name="Action" type="action.Action" script="true" /></Component><Component id="RunXtmlAction" type="uiaction.UsageAction" light="false"><Param name="Action" type="action.Action" script="true" essential="true" /><xtml t="xtml.UseParam" Param="Action" /></Component><Component id="SetTextSelection" type="uiaction.UsageAction" execution="native"><Param name="RunOn" /><Param name="SelectionStart" Description="0-based index"/><Param name="SelectionEnd" Description="0-based index" /></Component><Component id="RunActions" type="uiaction.UsageAction" execution="native" decorator="Action" remark="same imp. as action_async.RunAction" light="false"><Param name="Action" type="uiaction.UsageAction[]" script="true" essential="true" /></Component><Component id="RunInCurrentDialog" type="uiaction.UsageAction" decorator="Action"><Param name="Action" type="uiaction.UsageAction" script="true" essential="true" /><Param name="CloseDialog" type="data.Boolean" /><xtml t="action.RunActions" ><RunOn t="dialog.TopDialogContent"/><Action t="xtml.UseParam" Param="Action" /><Action t="dlg.CloseDialog" CloseType="OK" Condition="%$CloseDialog%" /></xtml></Component><Component id="RefreshOriginatedItem" type="action.Action" light="false"><xtml t="uiaction.RefreshItemElements" RunOn="up(.aa_item)"><ItemElements t="data.Pipeline"><Item value="%$ControlElement%"/><Aggregator t="data.First"/></ItemElements></xtml></Component><Component id="RefreshOriginatedContainer" type="action.Action" light="false"><xtml t="uiaction.Refresh" RunOn="up(.aa_container)" /></Component><Component id="ExpandText" type="action.Action" execution="native" light="false"><Param name="ItemElement" /></Component><Component id="SimulateTreeDragBegin" type="action.Action,uiaction.UsageAction" execution="native" light="false"><Param name="RunOn" description="Item Element e.g. $.find(\'.fld_Folders\').find(\'.aa_item\').slice(1,2)"/></Component><Component id="SimulateTreeDragEnd" type="action.Action,uiaction.UsageAction" execution="native" light="false"><Param name="RunOn" description="PlaceHolder e.g. $.find(\'.aa_move_place_holder\').slice(2,3)"/></Component><Component id="SortContainer" type="action.Action" execution="native" light="false"><Param name="Cntr" description="field or page id for the container. e.g. fld_Teams, or Page_Teams" /><Param name="SortBy" description="field id to sort by"/><Param name="SortDirection" type="enum" Options="ascending,descending" Default="descending" /></Component><Component id="FilterContainer" type="action.Action" execution="native" light="false"><Param name="FilterQueryXml" description="xml identifying the filter query"/><Param name="Cntr" description="field or page id for the container. e.g. fld_Teams, or Page_Teams" advanced="true"/></Component></xtml><xtml ns="usage"><Type id="Usage" /><Type id="PassesUsage" /><Component id="DataUsage" type="usage.Usage" execution="native" dtsupport="false"><Param name="Name" type="data.Data"/><Param name="Description"/><Param name="RunBefore" type="action.Action"/><Param name="Data" essential="true"/><Param name="Result" essential="true"/><Param name="ResultTransformer"><Default t="data.Same"/></Param><Param name="HtmlResultAsXml"/><Param name="ExpectedResult" type="data.Boolean" essential="true" script="true"/><Param name="Of" type="data.Data"/><Param name="CleanAfter" type="action.Action"/><Param name="ServerData" type="struct[]"><StructParam name="VarName"/><StructParam name="Url"/></Param><Param name="UserAgent"/><Param name="RunInAllTests" type="data.Boolean" /><Param name="AssignedTo" /></Component><Component id="RunSingleTest" type="action.Action" execution="native" light="false" /></xtml><xtml ns="usage"><Type id="PassesUsage"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/run.gif" /></Type><Component id="And" type="usage.PassesUsage" execution="native"><Param name="Item" type="usage.PassesUsage[]" script="true" essential="true" /></Component><Component id="Or" type="usage.PassesUsage" execution="native"><Param name="Item" type="usage.PassesUsage[]" script="true" essential="true" /></Component><Component id="ContainsText" type="usage.PassesUsage" execution="native" autoexpand="true"><Param name="Text" type="data.Data[]"><Field t="bart_dt.EditTextArrayField"/></Param><Param name="LookIn" type="enum" Options="screen,current dialog,current popup"/><Param name="IgnoreCase" advanced="true" type="data.Boolean"/><Param name="RemoveHiddenElements" advanced="true" type="data.Boolean"/><Param name="IgnoreOrder" advanced="true" type="data.Boolean"/><Param name="OneOf" type="data.Boolean"/><Param name="AndNotContainingText" type="data.Data"/></Component><Component id="NotContainsText" type="usage.PassesUsage"><Param name="Text" /><Param name="LookIn" advanced="true" type="enum" Options="screen,current dialog,current popup" /><Param name="IgnoreCase" advanced="true" type="data.Boolean"/><xtml t="yesno.NotContains" IgnoreCase="%$IgnoreCase%" IgnoreOrder="%$IgnoreOrder%" Text="%$Text%"><AllText t="data.Switch" Value="%$LookIn%"><Case If="current dialog"><Then t="dialog.TopDialogContent" /></Case><Case If="current popup"><Then t="dialog.ContentsOfOpenPopup" /></Case><Default value="%%" /></AllText></xtml></Component><Component id="CountOfText" type="usage.PassesUsage"><Param name="Text" /><Param name="Count" /><xtml t="yesno.ItemsEqual" Item1="%$Count%"><Item2 t="text.CountOfSubtext" Text="%$Text%" /></xtml></Component><Component id="CustomCondition" type="usage.PassesUsage" autoexpand="true"><Param name="Condition" type="data.Boolean" script="true"/><xtml value="true" Comment="Condition is run as a common param" /></Component><Component id="HasFocus" type="usage.PassesUsage" execution="native" autoexpand="true"><Param name="CssClass" /></Component></xtml><xtml ns="xml"><Type id="Change" ><MoreComponents><component id="xml.PerformChanges" itemsParam="Change" /></MoreComponents></Type><Type id="TargetIndex" /><Component id="XmlToText" type="data.Data" execution="native"><Param name="Data" Title="Xml" /><Param name="PrettyPrint" type="data.Boolean"><Default value="false" /></Param><Param name="Escape" type="data.Boolean"><Default value="false" /></Param></Component><Component id="TextToXml" type="data.Data" execution="native" ><Param name="Data" Title="Text" /></Component><Component id="JSONToXml" type="data.Data" execution="native" ><Param name="JSON" Default="%%"/><Param name="Tag" Default="Top"/><Param name="InputFormat" type="enum" Options="Text,Object" Default="Text"/></Component><Component id="CSVToXml" type="data.Data" execution="native" ><Param name="CSV" Default="%%"/></Component><Component id="XPath" type="data.Data" execution="native"><Param name="Data" Title="Xml"/><Param name="XPath" essential="true"/><Param name="CreateIfDoesNotExist" type="data.Boolean"/><Param name="DefaultValue"/><Param name="From"><Default t="data.Same"/></Param></Component><Component id="XPathFromList" type="data.Data" execution="native"><Param name="List" /><Param name="XPath" /></Component><Component id="XPathOfNode" type="data.Data" execution="native"><Param name="Data" Title="Xml" /><Param name="Specific" type="data.Boolean"><Default value="false" /></Param><Param name="StopAtIDAttribute"><Default value="" /></Param><Param name="TopXml" /></Component><Component id="XPathOfNodeWithTopTags" type="data.Data" execution="native"><Param name="TopXml" /><Param name="TopTags" /><Param name="PrefixByTagToAdd" type="data.Data" script="true" /></Component><Component id="IsArrayElement" type="data.Boolean" execution="native" ><Param name="Data" Title="Xml" /></Component><Component id="NextSibling" type="data.Data" execution="native" ><Param name="Data" Title="Xml" /></Component><Component id="PreviousSibling" type="data.Data" execution="native" ><Param name="Data" Title="Xml" /></Component><Component id="ChangeXml" type="action.Action" execution="native" light="false"><Param name="Xml" essential="true"><Default value="%%" /></Param><Param name="Change" type="xml.Change[]" essential="true"/></Component><Component id="Delete" type="xml.Change" execution="native"><Param name="Element"><Default value="%%" /></Param></Component><Component id="Update" type="xml.Change" execution="native"><Param name="NewValue" /></Component><Component id="RemoveAttributes" type="xml.Change" execution="native"><Param name="AttributeNames" /></Component><Component id="AddXmlChildren" type="action.Action" execution="native"><Param name="Parent" essential="true" /><Param name="Children" essential="true" /><Param name="CloneChildren" type="data.Boolean"><Default value="false" /></Param><Param name="AddAsFirst" type="data.Boolean" /><Param name="DoOnAddedChildren" type="action.Action" script="true" /></Component><Component id="ReplaceXmlChildren" type="action.Action"><Param name="Parent" essential="true" /><Param name="Children" essential="true" /><Param name="CloneChildren" type="data.Boolean"><Default value="false" /></Param><xtml t="action.RunActions"><Action t="xml.DeleteChildren" ParentElement="%$Parent%" /><Action t="xml.AddXmlChildren" Parent="%$Parent%" Children="%$Children%" CloneChildren="%$CloneChildren%" /></xtml></Component><Component id="ReplaceChildren" type="xml.Change" execution="native"><Param name="Children" /><Param name="CloneChildren" type="yeson.YesNo"><Default value="false" /></Param></Component><Component id="AddChildInPosition" type="xml.Change" execution="native"><Param name="Position" Description="1 is the first index" /><Param name="Child" /><Param name="DoOnNewChild" type="action.Action" /><Param name="IdenticalTags" type="data.Boolean"><Default value="true" /></Param></Component><Component id="AddSibling" type="xml.Change"><Param name="ExistingElement"><Default value="%%" /></Param><Param name="NewElement" script="true" /><Param name="Position" type="enum"><Default value="after" /><value>after</value><value>before</value></Param><Param name="DoOnNewChild" type="action.Action" /><xtml t="xml.AddChildInPosition" Data="%$ExistingElement/..%" IdenticalTags="false"><Child t="xtml.UseParam" Param="NewElement" Input="%$InputForChanges%" /><Position t="data.IfThenElse" If="%$Position% == \'after\'" Else="%$ExistingPos%"><Var name="ExistingPos" t="xml.IndexOfElement" Data="%$ExistingElement%" /><Then t="data.Math" Expression="%$ExistingPos%+1" /></Position><DoOnNewChild t="xtml.UseParam" Param="DoOnNewChild" /></xtml></Component><Component id="MultiChange" type="xml.Change" execution="native" deprecated="true"><Param name="Change" type="xml.Change[]" essential="true"/><Param name="PerformChangesOn" essential="true" description="a list of data items to make change on"/><Param name="DataForChanges"><Default t="data.Pipeline"><Item value="%$InputForChanges%"/><Aggregator t="data.First"/></Default></Param></Component><Component id="InnerTextValue" type="data.Data" execution="native" /><Component id="InnerText" type="data.Data" execution="native" /><Component id="IsAttribute" type="data.Boolean" execution="native" /><Component id="IsElement" type="data.Boolean" execution="native" /><Component id="AreSiblings" type="data.Boolean" execution="native" /><Component id="IndexOfElement" type="data.Data" execution="native"><Param name="IndexOfFirstElement"><Default value="1" /></Param></Component><Component id="UpdateInnerText" type="xml.Change" execution="xtml"><Param name="Element"><Default value="%%" /></Param><Param name="NewValue" script="true" /><xtml t="xml.Update"><Data t="data.Pipeline"><Item value="%$Element%" /><Item t="xml.InnerText" /></Data><NewValue t="xtml.UseParam" Param="NewValue" /></xtml></Component><Component id="RemoveInnerText" type="xml.Change" execution="native" /><Component id="XmlWithChangedTag" type="data.Data" execution="native"><Param name="Tag" /><Param name="BaseXml" Description="copy attributes and elements from it" /></Component><Component id="ElementOfDynamicTag" type="data.Data" execution="native"><Param name="Tag" essential="true"/><Param name="Change" type="xml.Change[]"/></Component><Component id="ByTag" type="data.Data" execution="native"><Param name="Tag"><Default value="xml"/></Param><Param name="Change" type="xml.Change[]" /><Param name="XmlForDocument" /></Component><Component id="DeleteChildren" type="xml.Change" execution="native"><Param name="ParentElement"><Default value="%%" /></Param></Component><Component id="RemoveMiddleElement" type="xml.Change" execution="native"><Param name="Element" essential="true" /></Component><Component id="DeleteAttributes" type="xml.Change" execution="native"><Param name="ParentElement"><Default value="%%" /></Param><Param name="Exclude" /></Component><Component id="IsOfTags" type="data.Boolean"><Param name="Tags" /><xtml t="yesno.IsInList"><List t="text.Split" Data="%$Tags%" /><Item t="xml.Tag" /></xtml></Component><Component id="IsPrimitiveElement" type="data.Boolean"><xtml t="yesno.And"><Item t="yesno.Empty" Data="%*%" /><Item t="yesno.Empty"><Data t="xml.AttributeName"><Data t="xml.Attributes" /></Data></Item></xtml></Component><Component id="ReplaceXmlElement" type="action.Action" execution="native"><Param name="Element" Default="%%" /><Param name="NewElement" essential="true"/><Param name="Mode" type="enum" Default="keep original tag" Options="keep original tag,replace tag" /><Param name="RunOnNewElement" type="action.Action" script="true"/></Component><Component id="ReplaceElement" type="xml.Change" execution="native"><Param name="Element"><Default t="data.Same"/></Param><Param name="NewElement" essential="true"/><Param name="Mode" type="enum"><Default value="keep original tag"/><value>keep original tag</value><value>replace tag</value></Param><Param name="RunOnNewElement" type="action.Action" script="true"/></Component><Component id="MoveElement" type="xml.Change" execution="native"><Param name="To" type="enum"><Default value="next" /><value>next</value><value>previous</value><value>first</value><value>last</value></Param><Param name="Tag" /></Component><Component id="MoveElementAfterIndex" type="xml.Change" execution="native"><Param name="Index" Description="0 to add at the begining" /><Param name="Tag" /></Component><Component id="ToLogicalRoot" type="data.Data" execution="native"><Param name="FilterOnRoot" type="data.Boolean" /><Param name="FilterOnRootParent" type="data.Boolean" /></Component><Component id="HasAttribute" type="data.Boolean" execution="native"><Param name="Attribute" /></Component><Component id="HasParent" type="data.Boolean" execution="native"><Param name="Attribute" /></Component><Component id="HasAttributes" type="data.Boolean"><Param name="Element"><Default value="%%" /></Param><xtml t="yesno.ItemsNotEqual" Item1="0"><Item2 t="data.Pipeline"><Item t="xml.Attributes" Data="%$Element%" /><Aggregator t="data.Count" /></Item2></xtml></Component><Component id="HasNoAttributes" type="data.Boolean"><Param name="Element"><Default value="%%" /></Param><xtml t="yesno.Not"><Of t="xml.HasAttributes" Element="%$Element%" /></xtml></Component><Component id="FindElementByID" execution="native"><Param name="Id" /></Component><Component id="RegisterModifyOnXml" execution="native" type="action.Action"><Param name="Xml"><Default value="%%" /></Param><Param name="SaveAction" type="action.Action" script="true" /><Param name="SaveDraftAction" type="action.Action" script="true" /><Param name="Mode" type="enum"><Default value="auto save draft" /><value>auto save draft</value><value>auto save</value><value>manual save</value></Param><Param name="DelayAutoSaveInMilli"><Default value="2000" /></Param></Component><Component id="Clone" type="data.Data" execution="native"><Param name="Xml"><Default value="%%" /></Param></Component><Component id="CopyAttributes" type="xml.Change" execution="native"><Param name="SourceElement"><Default value="%%" /></Param><Param name="OverrideExistingAttributes" type="data.Boolean"><Default value="true" /></Param></Component><Component id="OverrideAttributesAndElements" type="xml.Change" execution="native"><Param name="SourceXml" /></Component><Component id="UpTillMatchesFilter" type="data.Data" execution="native"><Param name="Filter" type="data.Boolean" script="true" /></Component><Component id="PerformChanges" type="xml.Change" execution="native"><Param name="Change" type="xml.Change[]" essential="true"/></Component><Component id="ChangeNodes" type="xml.Change"><Param name="Nodes" essential="true"/><Param name="Change" type="xml.Change[]" script="true" essential="true"/><xtml t="action.RunActionOnItems" Items="%$Nodes%"><Action t="xtml.UseParamArray" Param="Change" /></xtml></Component><Component id="PerformChangeOnElements" type="xml.Change" execution="native"><Param name="Elements" type="data.Data" essential="true"/><Param name="Change" type="xml.Change" essential="true"/></Component><Component id="PerformChangeWithManyInputs" type="xml.Change" execution="native"><Param name="Inputs" /><Param name="Change" type="xml.Change" /></Component><Component id="RunAction" type="xml.Change"><Param name="Action" type="action.Action" script="true" essential="true"/><xtml t="xtml.UseParam" Param="Action"/></Component><Component id="IfThenElse" type="xml.Change" execution="native"><Param name="If" type="data.Boolean" script="true" essential="true" /><Param name="Then" type="xml.Change" script="true" essential="true"/><Param name="Else" type="xml.Change" script="true" essential="true"/></Component><Component id="Switch" type="xml.Change" execution="native"><Param name="Value"><Default value="%%" /></Param><Param name="Case" type="inline[]" essential="true" ><Param name="If" essential="true"/><Param name="IfCondition" type="data.Boolean" script="true" essential="true"/><Param name="Then" type="xml.Change" essential="true"/></Param><Param name="Default" /><xtml t="data.Switch" Value="%$Value%" Case="%$Case%" /></Component><Component id="TextRowToXml" type="data.Data" execution="native"><Param name="Tag" /><Param name="Attributes" /><Param name="Separator"><Default value="&#x9;" /></Param></Component><Component id="ChildAtPosition" type="data.Data" execution="native"><Param name="Position" /></Component><Component id="CreateIfDoesNotExist" type="xml.Change"><Param name="ElementName" /><Param name="DefaultValue" /><xtml t="xml.AddChildren"><Condition t="yesno.Empty" Data="%{$ElementName}%" /><Children t="data.FirstSucceeding"><Item value="%$DefaultValue%" /><Item t="xml.ElementOfDynamicTag" Tag="%$ElementName%" /></Children></xtml></Component><Component id="ToXmlElement" type="data.Data" execution="native" /><Component id="XmlQuery" type="data.Data" execution="native"><Param name="Items" /><Param name="Query" /></Component><Component id="CleanEmptyAttributes" type="xml.Change" execution="native"><Param name="Recursive" type="data.Boolean"><Default value="true" /></Param><Param name="IgnoreAttributes" /></Component><Component id="Siblings" type="xml.Xml" execution="native"><Param name="Element"><Default value="%%" /></Param><Param name="OnlyWithSameTag" t="data.Boolean" /></Component><Component id="WritableXmlList" type="data_items.Items"><Param name="ItemList" /><xtml t="xtml.Params"><Param name="ItemList" value="%$ItemList%" /><Param name="Items" value="%$ItemList%" /><Method name="MoveBefore" t="xml.MoveBefore" /><Method name="MoveToEnd" t="xml.MoveToEnd" /></xtml></Component><Component id="XmlItemsSubset" execution="native"><Param name="Parent"/><Param name="Item"/><xtml1 t="data_items.Items" Items="%$Item%" /></Component><Component id="UpToTag" type="data.Data"><Param name="Tag"/><xtml t="xml.UpTillMatchesFilter"><Filter t="xml.IsOfTag" Tag="%$Tag%"/></xtml></Component><Component id="MoveBefore" type="action.Action" execution="native" light="false" /><Component id="MoveToEnd" type="action.Action" execution="native" light="false" /><Component id="XmlParsingError" type="data.Data" execution="native"><Param name="XmlAsText" ><Default value="%%" /></Param></Component><Component id="ItemByID" type="data.Data" execution="native" dtsupport="false"><Param name="List"/><Param name="ID"/></Component><Component id="Filter" type="data.Data" execution="native" ><Param name="Items"/><Param name="Filter"/></Component><Component id="FindXmlByAttribute" type="data.Data" execution="native"><Param name="ParentXml"/><Param name="Attribute"/><Param name="Value"/><Param name="FindAll" type="data.Boolean" /></Component><Component id="RecursiveValuesOfAttribute" type="data.Data" execution="native"><Param name="Attribute"/><Param name="ExcludeTags" /></Component><Component id="AddToXmlItems" type="action.Action"><Param name="Xml" /><Param name="Items" /><Param name="DoOnAddedXml" type="action.Action" script="true" /><xtml t="action.RunActions"><Var name="NewSubset" t="object.RunMethod" Object="%$Items%" Method="SubsetForNewItem"><Var name="_NewItemTag" t="xml.Tag" Data="%$Xml%" /></Var><Action t="xml.ReplaceElement" Element="%$NewSubset/Items%" NewElement="%$Xml%" /><Action t="object.RunMethod" Object="%$NewSubset%" Method="Save" /><Action t="xtml.UseParam" Param="DoOnAddedXml" Input="%$NewSubset/Items%" /></xtml></Component><Component id="RunMethodOnXml" type="*" execution="native"><Param name="Xml" Default="%%"/><Param name="Method" /></Component><Component id="XmlInfo" type="data.Data" execution="native" /><Component id="UpTillHasXmlInfoWithMethod" type="data.Data" execution="native"><Param name="Method" /></Component><Component id="XmlFromList" type="data.Aggregator" execution="native"><Param name="AttributeNames" description="comma separated" essential="true"/><Param name="Tag"><Default value="item"/></Param></Component><Component id="WriteCData" type="action.Action" execution="native" light="false"><Param name="Element" essential="true"/><Param name="CDataText" essential="true"/></Component><Component id="CDataValue" type="data.Data" execution="native"><Param name="Element" essential="true"/></Component></xtml><xtml ns="xmlui"><Component id="XmlSelector" type="ui.Control" execution="xtml" databind="true"><Param name="OnSelect" type="action.Action" script="true"/><Param name="OnDoubleClick" type="action.Action" script="true"/><Param name="Height" ><Default value="200px" /></Param><Param name="Borderless" type="data.Boolean"><Default value="false"/></Param><xtml t="tree.Tree" Height="%$Height%" RootItems="%%" NextLevel="%*%" ItemImage="%$_Images%/default1616.gif" Borderless="%$Borderless%"><Var name="XmlSelectorContext" t="xtml.Params"><Param name="Input" t="data.Same"/><ScriptParam name="OnSelect" t="xtml.UseParam" Param="OnSelect"><Var name="RelativeXPath" t="xml.XPathOfNode" StopAtIDAttribute="" TopXml="%$XmlSelectorContext/Input%"/><Var name="Selected" /></ScriptParam><ScriptParam name="OnDoubleClick" t="xtml.UseParam" Param="OnDoubleClick"><Var name="RelativeXPath" t="xml.XPathOfNode" StopAtIDAttribute="" TopXml="%$XmlSelectorContext/Input%"/><Var name="Selected" /></ScriptParam></Var><ItemControl t="ui.DynamicList"><Items t="data.List"><Item t="data.Same"/><Item t="xml.Attributes"/></Items><Control t="data.IfThenElse"><If t="xml.IsAttribute"/><Then t="xml.WithChanges"><Var name="attrname" t="xml.AttributeName"/><Xml t="ui.Html" DynamicContent="true"><span ondblclick="ajaxart_runevent(this,\'XmlSelectorContext\',\'OnDoubleClick\');" onclick="ajaxart_runevent(this,\'XmlSelectorContext\',\'OnSelect\');" class="xml_selector_attribute">%$attrname%=	              <span class="xml_selector_attribute_value">%%</span></span></Xml><Change t="ui.DataBind"/></Then><Else t="xml.WithChanges"><Var name="innertext" t="xml.InnerTextValue"/><Var name="isprimitive" t="yesno.And"><Item t="yesno.NotEmpty" Data="%$innertext%"/><Item t="yesno.IsEmpty"><Data t="xml.Attributes"/></Item><Item t="yesno.IsEmpty" Data="%*%"/></Var><Var name="onlytag" t="xml.Tag"/><Var name="tag" t="data.Pipeline"><Item value="%$onlytag%"/><Item t="data.IfThenElse" If="%$isprimitive%" Then="%%=" Else="%%"/></Var><Xml t="ui.Html" DynamicContent="true"><span ondblclick="ajaxart_runevent(this,\'XmlSelectorContext\',\'OnDoubleClick\');" onclick="ajaxart_runevent(this,\'XmlSelectorContext\',\'OnSelect\');" class="xml_selector_tag">%$tag%                <span class="xml_selector_attribute_value">%$innertext%</span></span></Xml><Change t="ui.DataBind"/></Else></Control><Layout t="ui.NoLayout"/></ItemControl></xtml></Component><Component id="ReadWriteXml" type="ui.Control" execution="xtml"	databind="true"><Param name="OnUpdate" type="action.Action" script="true"/><Param name="Rows"><Default value="20"/></Param><Param name="Cols"><Default value="80"/></Param><xtml t="ui.Section" Level="Heading 2" Class="xmlrw_section"><Control t="xml.WithChanges"><Xml t="ui.Html" DynamicContent="true"><TEXTAREA cols="%$Cols%" rows="%$Rows%" class="xml_readwrite" /></Xml><Change t="xml.UpdateInnerText"><NewValue t="xml.XmlToText" PrettyPrint="true" /></Change></Control><Control t="ui.ButtonOld" Class="xmrw_update_button"><Text t="text.MultiLang" Pattern="Update" /><OnClick t="xml.ReplaceElement" Mode="replace tag"><NewElement t="data.Pipeline"><Item t="ui.TextboxValue"><RunOn t="uiaction.GoUpAndDown" UpClass="xmlrw_section" DownClass="xml_readwrite"/></Item><Item t="xml.TextToXml"/></NewElement><RunOnNewElement t="xtml.UseParam" Param="OnUpdate"/></OnClick></Control></xtml></Component><Component id="ShowTextareaXmlDialog" type="action.Action" light="false"><Param name="Xml"/><Param name="Title"/><Param name="Rows"><Default value="30"/></Param><Param name="AutoWrite" type="data.Boolean"/><Param name="AutoWriteAllowTagChange" type="data.Boolean"/><Param name="OnChangeXml" type="action.Action" script="true"/><Param name="OnUpdate" type="action.Action" script="true"/><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" AlwaysLTR="true" Title="%$Title%" Width="550px" NoTransaction="true" CloseOnEnter="false"><DialogData t="data.WritableText"><DefaultValue t="data.Pipeline"><Item value="%$Xml%"/><Item t="xml.XmlToText" PrettyPrint="true" /></DefaultValue></DialogData><Content t="field.ShowFieldControl"><Item value="%%"/><Field t="field.XmlField" Path="" ID="xml" ><Var name="Width" t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true" /><Var name="Height" t="ui.ScreenSize" Axis="height" Margin="300" AsHtmlString="true" /><Type t="field_aspect.MultiLineText" Rows="30"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="white-space1:nowrap; height:%$Height%;font-size:11px;width:%$Width%;"/></Field></Content><RunOnOK t="action.RunActions" Data="%$OriginalInput%" ><Action t="xml.ChangeXml" Xml="%$Xml%" Condition="%$AutoWrite%" ><Change t="xml.ReplaceElement" ><NewElement t="xml.TextToXml" Data="%$DialogWorkingData%" /><Mode t="data.IfThenElse" If="%$AutoWriteAllowTagChange%" Then="replace tag" Else="keep original tag"/></Change></Action><Action t="xtml.UseParam" Param="OnChangeXml"><Input t="data.Pipeline"><Item t="xml.XmlToText" Data="%$DialogWorkingData%"/><Item t="xml.TextToXml"/></Input></Action><Action t="xtml.UseParam" Param="OnUpdate"/></RunOnOK><Validations t="ui.Validation" Message="invalid xml: %$Error%"><Var name="Error" t="xml.XmlParsingError" /><SuccessCondition t="yesno.IsEmpty" Value="%$Error%" /></Validations></Dialog></xtml></Component><Component id="ShowXmlDialog" type="action.Action"><Param name="Xml"><Default value="%%"/></Param><Param name="Title" essential="true"/><Param name="Height"><Default t="ui.ScreenSize" Axis="height" Margin="200" AsHtmlString="true"/></Param><Param name="AutoWrite" type="data.Boolean"/><Param name="AutoWriteAllowTagChange" type="data.Boolean"/><Param name="OnChangeXml" type="action.Action" script="true"/><Param name="OnUpdate" type="action.Action" script="true"/><Param name="OnCancel" type="action.Action" script="true"/><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" AlwaysLTR="true" Title="%$Title%" NoTransaction="true"><Var name="AsText" t="data.WritableText"><DefaultValue t="xml.XmlToText" PrettyPrint="true" Data="%$Xml%"/></Var><Content t="xmlui.CodeMirrorTextarea" Data="%$AsText%" AutoFocus="true" Type="xml" Height="%$Height%" Class="xmltextarea"><Width t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true"/><OnUpdate t="uiaction.Hide" RunOn="updown(.ajaxart,.message_bar.validation)"/></Content><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Var name="AsXml" t="xml.TextToXml" Data="%$AsText%"/><Action t="xml.ChangeXml" Xml="%$Xml%" Condition="%$AutoWrite%"><Change t="xml.ReplaceElement" Data="%$Xml%" NewElement="%$AsXml%"><Mode t="data.IfThenElse" If="%$AutoWriteAllowTagChange%" Then="replace tag" Else="keep original tag"/></Change></Action><Action t="xtml.UseParam" Param="OnChangeXml" Input="%$AsXml%" /><Action t="xtml.UseParam" Param="OnUpdate" Input="%$AsText%"/></RunOnOK><RunOnCancel t="xtml.UseParam" Param="OnCancel"/><Validations t="ui.ValidationList"><Validation t="ui.Validation" Message="invalid xml: %$Error%"><Var name="Error" t="xml.XmlParsingError" XmlAsText="%$AsText%"/><SuccessCondition t="yesno.IsEmpty" Value="%$Error%"/></Validation><Validation t="xmlui.CallUpdateOfCodeMirror" RunOn="updown(.dialog_box,.xmltextarea)"/></Validations></Dialog></xtml></Component><Component id="CodeMirrorTextarea" type="ui.Control" execution="native"><Param name="Text" Default="%%"/><Param name="Type" type="enum" Options="xml,css,js,text"/><Param name="OnUpdate" type="action.Action" script="true"/><Param name="Width" Default="100%"/><Param name="Height" Default="200px"/><Param name="AutoFocus" type="data.Boolean" /><Param name="ReadOnly" type="data.Boolean" /><Param name="LineNumbers" type="data.Boolean" /><Param name="TextWrapping" type="data.Boolean" Default="true" /><Param name="OnCtrlEnter" type="action.Action" script="true"/><Param name="OnShiftEnter" type="action.Action" script="true" /><Param name="Resizer" type="data.Boolean" /><Param name="IdentifierToRecallLastSize" description="Used to recall the last value of resizing" /><Param name="Css" advanced="true" Default="{ border:1px solid lightgray; }" /><Param name="EnableFullScreen" type="data.Boolean" Default="true" /><Param name="ShowJavascriptErrorsOnCtrlSpace" type="data.Boolean" Default="true" /><Param name="AutoIndent" type="data.Boolean" /></Component><Component id="CallUpdateOfCodeMirror" type="action.Action" hidden="true" execution="native" /><Component id="InsertTextToCodeMirror" type="action.Action" hidden="true" execution="native" ><Param name="Text" /></Component></xtml><xtml ns="xtml"><Component id="UsagesOfPlugin" type="data.Data" execution="native"><Param name="Plugin" essential="true" /></Component><Component id="TypeDefinition" type="data.Data" execution="native"><Param name="Type" essential="true" /></Component><Component id="ComponentExists" type="data.Boolean"><Param name="ComponentID" essential="true" /><xtml t="yesno.NotEmpty"><Value t="xtml.ComponentDefinition" ID="%$ComponentID%" /></xtml></Component><Component id="AllTypes" type="data.Data" execution="native"/><Component id="PluginDescriptor" type="data.Data" execution="native" ><Param name="Plugin" essential="true" Default="%%" /></Component><Component id="ComponentsOfPlugin" type="data.Data" execution="native"><Param name="Plugin" essential="true" /><Param name="Type"/><Param name="Result" type="enum"><Default value="xtml" /><value>full id</value><value>xtml</value></Param><Param name="AlsoHidden" type="data.Boolean"><Default value="true"/></Param></Component><Component id="LoadedPlugins" type="data.Data" execution="native"><Param name="IncludeUsages" type="data.Boolean"><Default value="true"/></Param></Component><Component id="RunDynamicText" type="*" execution="native"><Param name="Text" essential="true" /><Param name="Input" /><Param name="Context" /></Component><Component id="RunXtmlAsBoolean" type="*" execution="native"><Param name="Xtml" remark="no default (in js)"/><Param name="Input" remark="default %% in js"/><Param name="ForceInputParam" type="data.Boolean"/><Param name="Field"/><Param name="Method"/><Param name="EmptyAsTrue" type="data.Boolean"/></Component><Component id="UseParamAsBoolean" type="*" execution="native" dtsupport="false"><Param name="Param" essential="true" /><Param name="Input"><Default t="data.Same"/></Param></Component><Component id="RunXtmlWithFullContext" type="*" execution="native"><Param name="XtmlAndContext"/><Param name="InPreviewMode" type="data.Boolean"/></Component><Component id="UseParamExcludeVariable" type="*" execution="native"><Param name="Param" /><Param name="ExcludeVariable"/></Component><Component id="RunXtmlByComponentId" type="*" execution="native" dtsupport="false"><Param name="ComponentID" essential="true" /><Param name="Input" Default="%%" /></Component><Component id="RunXtmlWithDefaultImp" type="*"><Param name="Xtml" remark="no default (in js)"/><Param name="Input"  Default="%%"/><Param name="DefaultImp"/><xtml t="data.IfThenElse"><If t="yesno.NotEmpty" Value="%$Xtml%"/><Then t="xtml.RunXtml" Xtml="%$Xtml%" Input="%$Input%" /><Else t="xtml.RunXtmlByComponentId" ComponentID="%$DefaultImp%" Input="%$Input%"/></xtml></Component><Component id="Profile" type="data.Data" execution="native"/><Component id="UsageByName" execution="xtml" type="data.Data"><Param name="UsageName" essential="true" /><xtml t="data.Pipeline" ><Item t="xtml.LoadedPlugins" /><Item t="xtml.UsagesOfPlugin" Plugin="%%" /><Item t="yesno.PassesFilter" ><Filter t="yesno.EqualsTo" Data="%@Name%" To="%$UsageName%" /></Item></xtml></Component><Component id="ParamEmpty" type="data.Boolean" execution="native"><Param name="Param" essential="true" /></Component><Component id="VariableValue" execution="native"><Param name="VarName" essential="true" /></Component><Component id="CopyAllParams" type="data.Data" execution="native" dtsupport="false"/><Component id="ParamsWithChanges" type="data.Data" execution="native"><Param name="Params"/><Param name="Param" type="data.Data[]"/><Param name="ScriptParam" type="data.Data[]"/><Param name="ScriptParamArray" type="data.Data[]"/><NativeHelper t="xtml.Params"/></Component><Component id="ScriptParamArrayContents" type="data.Data" execution="native"><Param name="Param"/></Component><Component id="Xtml" type="data.Data" execution="native"><Param name="Xtml" essential="true" /><Param name="Input"/><Param name="Context"/></Component><Component id="ComponentHasParam" type="data.Boolean"><Param name="Component" essential="true" /><Param name="Param" essential="true" /><xtml t="yesno.NotEmpty"><Data t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param[@name=\'{$Param}\']%"/></Data></xtml></Component><Component id="ToScript" type="data.Data" execution="native"><Param name="Xtml"><Default t="data.Same"/></Param></Component><Component id="ToInput" type="data.Data" execution="native"/><Component id="ComponentParamType" type="data.Data"><Param name="Component" essential="true" /><Param name="Param" essential="true" /><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param[@name=\'{$Param}\']%"/><Item t="data.FirstSucceeding"><Item value="%@type%"/><Item value="data.Data"/></Item></xtml></Component><Component id="ComponentParam" type="data.Data"><Param name="Component" essential="true" /><Param name="Param" essential="true" /><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param[@name=\'{$Param}\']%"/></xtml></Component><Component id="ToParamDefaultValue" type="data.Data"><Param name="Component" essential="true" /><Param name="Param" essential="true" /><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param[@name=\'{$Param}\']/Default%" /></xtml></Component><Component id="ToParamDefinition" type="data.Data"><Param name="Component" essential="true" /><Param name="Param" essential="true" /><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param[@name=\'{$Param}\']%" /></xtml></Component><Component id="ComponentElementToFullId" type="data.Data"><xtml t="data.IfThenElse"><If t="xml.IsOfTag" Data="%..%" Tag="components"/><Then value="%../../@id%.%@id%"/><Else value="%../@ns%.%@id%"/></xtml></Component><Component id="FileNameOfComponent"><Param name="ID" essential="true" /><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$ID%"/><Item value="%../@file%"/></xtml></Component><Component id="VariablesOfContext" type="data.Data" execution="native"><Param name="ScriptAndContext" essential="true" /></Component><Component id="GlobalVariables" type="data.Data" execution="native" /><Component id="ServerDataVariables" type="data.Data" execution="native" /><Component id="DebugDataVariables" type="data.Data" execution="native" /><Component id="DebugVariableValue" type="data.Data" execution="native"><Param name="Variable" essential="true" /></Component><Component id="VariableValueFromContext" type="data.Data" execution="native"><Param name="ScriptAndContext" essential="true" /><Param name="Variable" essential="true" /></Component><Component id="LoadComponents" type="action.Action" execution="native" light="false"><Param name="Components"/><Param name="Namespace"/><Param name="ClearNSBefore" type="data.Boolean" /></Component><Component id="LoadXtmlFile" type="action.Action" execution="native" light="false"><Param name="Contents" essential="true" /></Component><Component id="CleanLog" type="action.Action" execution="native" light="false"><Param name="CleanAllLogs" type="data.Boolean" /><Param name="Level" /></Component><Component id="Logs" type="data.Data" execution="native" /><Component id="LogContent" type="action.Action" execution="native" light="false"><Param name="Level" type="enum"><value>error</value><value>warning</value><value>general</value></Param></Component><Component id="NamespaceOfComponent" type="data.Data"><Param name="Component"><Default t="data.Same"/></Param><xtml t="text.FirstSucceeding" Data="%$Component%"><Item value="%../@ns%"/><Item value="%../../@id%"/></xtml></Component><Component id="ActiveLogLevels" type="data.Data" execution="native" /><Component id="RunUsage" type="action.Action" execution="native" light="false"><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/><Param name="OnFinish" type="action.Action" script="true"/></Component><Component id="AllComponentIds" type="data.Data" execution="native" /><Component id="ComponentIdsOfType" type="data.Data" execution="native" ><Param name="Type" essential="true" /></Component><Component id="PartsOfContext" type="data.Data" execution="native"><Param name="Context" /><Param name="Part" type="enum" ><value>Variable Names</value><value>Global Variable Names</value><value>Param Names</value><value>Component Context</value></Param></Component><Component id="CurrentContext" type="data.Data" execution="native" /><Component id="ManualContext" type="data.Data" execution="native" ><Param name="Variables" /></Component><Component id="BuildVersion" type="data.Data" execution="native" internal="true"></Component><Component id="XtmlOfParamArray" type="data.Data" execution="native" description="Retrieves the xtml of a param array" /></xtml><xtml ns="yesno"><Component id="EqualsTo" type="data.Boolean" execution="native"><Param name="To" essential="true"/></Component><Component id="IsOneOf" type="data.Boolean" execution="native"><Param name="Value" Default="%%"/><Param name="Option" essential="true" /></Component><Component id="EqualsToList" type="data.Boolean" execution="native"><Param name="To" essential="true" /></Component><Component id="IsSingleValue" type="data.Boolean" execution="native"><Param name="Value" Default="%%" /></Component><Component id="IsStruct" type="data.Boolean" execution="native"/><Component id="IsXml" type="data.Boolean" execution="native"/><Component id="IsMultipleValue" type="data.Boolean" execution="native"><Param name="Value" Default="%%"/></Component><Component id="IsListUnique" type="data.Boolean" execution="xtml"><xtml t="yesno.Not"><Of t="yesno.Empty"/></xtml></Component><Component id="NotEqualsTo" type="data.Boolean" execution="xtml"><Param name="To" essential="true" /><xtml t="yesno.Not"><Of t="yesno.EqualsTo" To="%$To%"/></xtml></Component><Component id="Contains" type="data.Boolean" execution="native"><Param name="AllText"><Default t="data.Same"/></Param><Param name="Text" type="data.Data[]" essential="true" /><Param name="IgnoreCase" type="data.Boolean"><Default value="false"/></Param><Param name="IgnoreOrder" type="data.Boolean"><Default value="false"/></Param><Param name="OneOf" type="data.Boolean"/></Component><Component id="NotContains" type="data.Boolean" execution="xtml"><Param name="Text" type="data.Data" essential="true" /><Param name="IgnoreCase" type="data.Boolean"><Default value="false"/></Param><Param name="AllText"><Default t="data.Same"/></Param><xtml t="yesno.Not"><Of t="yesno.Contains" IgnoreCase="%$IgnoreCase%" AllText="%$AllText%"><Text value="%$Text%"/></Of></xtml></Component><Component id="DynamicAnd" type="data.Boolean" execution="native"><Param name="DynamicItems" essential="true" /><Param name="ConditionOnItem" type="data.Boolean" script="true"/></Component><Component id="PassesCondition" type="data.Boolean" execution="native"><Param name="Expression" essential="true" /></Component><Component id="IsInList" type="data.Boolean" execution="native"><Param name="Item"><Default t="data.Same"/></Param><Param name="List" essential="true" /></Component><Component id="NotInList" type="data.Boolean"><Param name="Item"><Default t="data.Same"/></Param><Param name="List" essential="true" /><xtml t="yesno.Not"><Of t="yesno.IsInList" Item="%$Item%" List="%$List%"/></xtml></Component><Component id="NumberInRange" type="data.Boolean" execution="native"><Param name="From" essential="true" /><Param name="To" essential="true" /></Component><Component id="GreaterThan" type="data.Boolean" execution="native"><Param name="Item"><Default t="data.Same"/></Param><Param name="Than" essential="true" /><Param name="Type" type="enum"><Default value="number" /><value>text</value><value>number</value><value>date</value></Param></Component><Component id="NotAnyOf" type="data.Boolean" execution="native"><Param name="Item" type="data.Boolean[]" essential="true" /></Component><Component id="BooleansEqual" type="data.Boolean" execution="native"><Param name="Item1"/><Param name="Item2"/></Component><Component id="IsWritableText" type="data.Boolean" execution="native"/><Component id="IsNumber" type="data.Boolean" execution="native" ><Param name="Value" ><Default value="%%" /></Param></Component><Component id="VariableExists" type="data.Boolean" execution="native"><Param name="VarName" /></Component><Component id="NotInLocalHost" type="data.Boolean" execution="native" /><Component id="Expression" type="data.Boolean.promoted" autoexpand="true" execution="native"><Param name="Expression" type="data.Boolean" description="E.g. %% &lt; 20" script="true"/></Component><Component id="ConditionByXtml" type="data.Boolean.promoted" customAAEditor="true"><Param name="Expression" type="data.Boolean" light="false"/><xtml value="%$Expression%" /></Component><Component id="ConditionByJavascript" type="data.Boolean.promoted" execution="native" autoexpand="true"><Param name="Javascript" codemirror="true"><Default><![CDATA[function(data,context) {  return true;}]]></Default></Param></Component><Component id="ContainsRegex" type="data.Boolean,data.Boolean.promoted" execution="native"><Param name="Regex" essential="true" /><Param name="Text" Default="%%" advanced="true"/></Component></xtml></xtml> '));
