/*
 * jBart - Packaged at 08-10-2012-11-10
 * Copyright (c) 2011 ArtwareSoft Ltd
 * The software is distributed under the GPL license
 * For commercial use we advice to use our commercial license
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

*/
var ajaxart_capture_top="";var ajaxart_capture_mode="";var ajaxart_capture_onselect=null;var ajaxart_captured_element=jQuery([]);var ajaxart_capture_box=null;var ajaxart_capture_box_add=null;var ajaxart_capture_box_drop=null;var ajaxart_drag=false;var ajaxart_dragged=null;ajaxart.gcs.aaeditor={IsMultipleObject:function(b,c,a){if(ajaxart.run(c,b,"Value",a).length>1){return[true]}return[]},ClearCaptureBox:function(a,b,c){if(ajaxart_capture_box!=null){ajaxart_capture_box.hide()}if(ajaxart_capture_box_add!=null){ajaxart_capture_box_add.hide()}if(ajaxart_capture_box_drop!=null){ajaxart_capture_box_drop.hide()}jQuery("."+ajaxart_capture_top+" .placeholder_toadd_control").css("height","0px").css("background","none").css("border","0px solid #CCCCCC");return["true"]},ClearCaches:function(b,c,a){window.aa_search_comp_of_type_cache=null;window.ajaxart_comp_of_type_cache=null;jBart.vars.compsOfTypeCache={}},CaptureSelect:function(b,c,a){ajaxart_capture_mode=aa_text(c,b,"Mode",a);ajaxart_capture_top=aa_text(c,b,"Top",a);if(ajaxart_capture_mode=="add"){jQuery("."+ajaxart_capture_top).addClass("aaeditor_addcontrol");jQuery("."+ajaxart_capture_top+" .placeholder_toadd_control").css("height","7px")}ajaxart_captured_element=jQuery([]);if(window.captureEvents){window.onclick=ajaxart_capture_click;window.onmousemove=ajaxart_capture_mousemove;window.onkeydown=ajaxart_capture_keydown}else{document.onclick=ajaxart_capture_click;document.onmousemove=ajaxart_capture_mousemove;document.onkeydown=ajaxart_capture_keydown}ajaxart_capture_onselect=function(f){jQuery("."+ajaxart_capture_top).removeClass("aaeditor_addcontrol");if(f==null){ajaxart.gcs.aaeditor.ClearCaptureBox();return}var e={isObject:true};if(ajaxart_drag){ajaxart_drag=false;var d=f;while(!("ajaxart" in d)&&d!=null){d=d.parentNode}e.TargetParent=[d];e.TargetPosition=[""+(ajaxart.aaeditor.getPlaceholderPosition(f)+0)];e.Dragged=ajaxart_dragged;ajaxart.gcs.aaeditor.ClearCaptureBox();ajaxart.run([e],b,"OnDrop",a);return}if(ajaxart_capture_mode=="add"){var d=f;while(!("ajaxart" in d)&&d!=null){d=d.parentNode}e.ParentElement=[d];e.Position=[""+ajaxart.aaeditor.getPlaceholderPosition(f)]}else{e=f}ajaxart.run([e],b,"OnSelect",a)};return[]},InPreview:function(b,c,a){ajaxart.inPreviewMode=true;var d=ajaxart.run(c,b,"Control",a);ajaxart.inPreviewMode=false;return d},CalculateTopCircuit:function(d,e,c){var a=aa_first(e,d,"Xtml",c);if(!a){return[]}var b=bart_find_top_circuit(a,c);if(b){return[b]}b=aaeditor_find_top_circuit(a,c);if(b){return[b]}return[]},CalcLocalPreviewData:function(c,f,e){if(ajaxart.xtmls_to_trace.length>0){ajaxart.log("trying to run tester during tester","warning");return[]}var g=ajaxart.run(f,c,"State",e);if(ajaxart.isObject(g)){var a=g[0];var k=aa_bool(f,c,"ReturnAll",e);var p=a.SelectedInTree[0];if(!ajaxart.isObject(p)){return[]}var h=p.Xtml;if(!h||((!ajaxart.isxml(h))&&h.length>0)){return[]}var o=false;var l=false;if(h.length==0){var m=ajaxart.totext(p.Field);var n=p.ParentXtml;if(m.indexOf("[+]")>-1){h=n;if(n.length>0&&n[0].getAttribute("t")=="data.Pipeline"){l=true}}else{if(m==""||m.indexOf("[")>-1||(!ajaxart.isxml(n))){return[]}if(m=="name"){return[]}n=n[0];o=true;if(n.getAttribute(m)==null){n.setAttribute(m,"")}h=ajaxart.xml.xpath(n,"@"+m)}}aadt_putXtmlTraces(h[0]);if(ajaxart.xtmls_to_trace.length==0){return[]}ajaxart.trycatch(function(){ajaxart.inPreviewMode=true;var s=null;if(ajaxart.subprofiles(c,"MainCircuitRunner").length>0){s=ajaxart.run(f,c,"MainCircuitRunner",e)}else{var t=a.TreeXtml;if(t.length==0){return[]}t=t[0];var r=[];if("input" in t){r=t.input}var u=t.context;if(u==null){u=ajaxart.newContext()}s=ajaxart.run(r,t.script,"",u);if(ajaxart.component_exists(t.script.getAttribute("t")+"_Preview")){ajaxart.setVariable(u,"Preview",[{isObject:true,Output:s}]);aa_run_component(t.script.getAttribute("t")+"_Preview",[],u)}}});var q=[];ajaxart.trycatch(function(){if(ajaxart.xtmls_to_trace[0].results.length>0){q=ajaxart.xtmls_to_trace[0].results}else{q=aaeditor.find_preview_context_over_gap()}},function(r){});ajaxart.xtmls_to_trace=[];ajaxart.inPreviewMode=false;if(o&&n.getAttribute(m)==""){n.removeAttribute(m)}if(l&&q.length>0){q[0].Input=q[0].Output}if(q[0]&&q[0].Output&&q[0].Output.length==0&&q[0].context.vars._AsyncIsQuery){var b={isObject:true,_isAsyncObject:true,_callback:function(){}};var d=function(r){if(!q[0].context.vars._AsyncCallback){q[0].context.vars._AsyncCallback={}}q[0].context.vars._AsyncCallback.callBack=function(t,s){r._callback(t,s)}};d(b);q[0].Output=[b]}return q}return[]},SimulateRunningContextForPreview:function(b,c,a){ajaxart.aaeditor.current_running_context_for_preview={isObject:true};ajaxart.aaeditor.current_running_context_for_preview.Input=c;ajaxart.aaeditor.current_running_context_for_preview.context=a;return c},AsyncObjectControl:function(c,d,b){var a=jQuery("<div>Please wait for async result..</div>")[0];d[0]._callback=function(f,e){a.innerHTML="";a.appendChild(ajaxart.runNativeHelper(f,c,"ShowSync",b)[0])};return[a]},HowLong:function(c,g,b){var f=aa_first(g,c,"Usage",b);if(f==null){return[]}var e=new Date().getTime();ajaxart.run([],f,"",b);var d=new Date().getTime()-e;var a=ajaxart.getControlElement(b,true);jQuery(a).append("time: "+d+"ms<br/>");return[]},ProfileGlobals:function(c,e,a){var h=aa_first(e,c,"Usage",a);if(h==null){return[]}var k=new Date().getTime();ajaxart.profiling_of_globals=[];ajaxart.run([],h,"",a);var b=new Date().getTime()-k;var g='<profile total="'+b+'">';for(var f in ajaxart.profiling_of_globals){g+='<comp id="'+f+'" calls="'+ajaxart.profiling_of_globals[f].calls+'" total="'+ajaxart.profiling_of_globals[f].total+'" />'}g+="</profile>";var d=ajaxart.run([g],ajaxart.parsexml('<Control t="debugui.GlobalProfilingResult" />'),"",ajaxart.newContext());jQuery("#ajaxart_top").append(d[0]);var d=ajaxart.getControlElement(a,true);jQuery(d).append(d[0]);return[]},ComponentTitle:function(b,c,a){return[aa_component_title(c)]},XmlElementInTree:function(c,e,a){if(e.length==0){return[]}var h=e[0];var d=document.createElement("SPAN");if(h.nodeType==2){jQuery(d).text(h.nodeValue+" ("+h.nodeName+")");return[d]}var g=document.createElement("SPAN");jQuery(g).text(h.tagName);g.className="xml_element";d.appendChild(g);for(var f=0;f<h.attributes.length;f++){var b=h.attributes[f].nodeValue;if(b!=""){var l=document.createElement("SPAN");jQuery(l).text(h.attributes.item(f).name+"=");l.className="xml_att";d.appendChild(l);var k=document.createElement("SPAN");jQuery(k).text(b);k.className="xml_att_value";d.appendChild(k)}}return[d]},DynamicTextOpenPart:function(b,d,a){var h=ajaxart.totext(d);if(h==null){return[]}if(aa_text(d,b,"Type",a)=="%"){var f=0;var e=-1;for(i=0;i<h.length;i++){if(h.charAt(i)=="%"){if(i==0||h.charAt(i-1)!="\\"){f++;e=i}}}if(f%2==0){return[]}var c=h.substring(e+1);if(c==""){return["__EMPTY"]}return[c]}else{var g=h.lastIndexOf("{");if(g==-1){return[]}var k=h.substring(g+1);if(k.indexOf("}")!=-1){return[]}if(k==""){return["__EMPTY"]}return[k]}},CalculatePrimitiveInnerParts:function(c,e,a){var l=aa_text(e,c,"Text",a);var m=aa_first(e,c,"Context",a);var b=ajaxart.run(e,c,"Input",a);if(m==null){return[]}var g=false;var f=0;while(true){if(f>=l.length){break}if(l.charAt(f)=="%"&&(f==0||l.charAt(f-1)!="\\")){g=!g}if(l.charAt(f)=="{"&&g){var k=l.indexOf("}",f);if(k!=-1){var d=l.substring(f+1,k);var h=ajaxart.totext(ajaxart.dynamicText(b,"%"+d+"%",m));l=l.substring(0,f)+h+l.substring(k+1);f=k}}f++}return[l]},EditPrimitiveHalfWrittenPart:function(b,c,a){var d=ajaxart.totext(c);var e=0;if(d.lastIndexOf("/")>e){e=d.lastIndexOf("/")}if(d.lastIndexOf("{")>e){e=d.lastIndexOf("{")}if(d.lastIndexOf("%")>e){e=d.lastIndexOf("%")}if(d.lastIndexOf("$")>e){e=d.lastIndexOf("$")}if(d.lastIndexOf("[")>e){e=d.lastIndexOf("[")}if(e<d.length){return[d.substring(e+1)]}else{return[]}},RegisterForToolbarKeyboard:function(b,c,a){if(document.aaeditorRegistered){return}document.aaeditorRegistered=true;jQuery(document).keyup(function(f){if(f.keyCode==83&&f.shiftKey&&f.ctrlKey){if(jQuery(".aaeditor_customize")==null){return}var d=jQuery(".aaeditor_customize")[0];aa_run_component("aaeditor.SaveToServerAction",[],d.ajaxart.params)}});return[]},ComponentsOfTypeNew:function(f,A,c){var n=(c.vars._WidgetXml)?aa_totext(aa_xpath(c.vars._WidgetXml[0],"@plugins")):"";var g=aa_text(A,f,"Type",c);var u=aa_bool(A,f,"LightOnly",c);var z="cache_"+n;if(u){z+="_light"}if(!jBart.vars.compsOfTypeCache){jBart.vars.compsOfTypeCache={}}if(!jBart.vars.compsOfTypeCache[z]){jBart.vars.compsOfTypeCache[z]={};var m=jBart.vars.compsOfTypeCache[z];var b={};var s="jbart";try{if(c.vars._BartContext){s=aa_totext(c.vars._BartContext[0].StyleGuide.ID)}}catch(v){}var y=","+n+",";for(var r in ajaxart.components){for(var p in ajaxart.components[r]){var x=ajaxart.components[r][p];var d=x.getAttribute("styleGuide")==s;if(x.getAttribute("hidden")=="true"){continue}if(u&&x.getAttribute("light")=="false"){continue}var h=x.parentNode.getAttribute("plugin");if(h&&y.indexOf(","+h+",")==-1){continue}var k=(x.getAttribute("type")||"").split(",");for(var l=0;l<k.length;l++){if(k[l].split(".").length>2){k.push(k[l].substring(0,k[l].lastIndexOf(".")))}}for(var l in k){var o=k[l];if(o==""){continue}if(!m[o]){m[o]=[]}if(!b[o]){b[o]=[]}var w={ID:r+"."+p,Definition:x};if(d){b[o].push(w)}else{m[o].push(w)}}}}for(var o in b){var a=b[o];if(a.lenth==0){continue}m[o]=a.concat(m[o])}}if(aa_bool(A,f,"ForAllTypes",c)){if(!jBart.vars.compsOfTypeCache[z][g+"_*"]){var q=[];ajaxart.concat(q,jBart.vars.compsOfTypeCache[z][g]);ajaxart.concat(q,jBart.vars.compsOfTypeCache[z]["*"]);jBart.vars.compsOfTypeCache[z][g+"_*"]=q}return jBart.vars.compsOfTypeCache[z][g+"_*"]}return jBart.vars.compsOfTypeCache[z][g]},ComponentsOfType:function(c,v,b){if(!window.aa_search_comp_of_type_cache){aa_search_comp_of_type_cache={};ajaxart_comp_of_type_advanced_cache={};var l=aa_isjbart()&&!b.vars._ShowNonJBartComponents;for(var q in ajaxart.components){var e=false;if(q.lastIndexOf("_dt")==q.length-3&&q.length>3||q=="aaeditor"){e=true}for(var p in ajaxart.components[q]){var s=ajaxart.components[q][p];if(s.getAttribute("hidden")=="true"){continue}if(l&&s.parentNode.getAttribute("jbart")!="true"){continue}if(l&&s.getAttribute("jbart")=="false"){continue}var g=(s.getAttribute("type")||"").split(",");for(var o=0;o<g.length;o++){if(g[o].split(".").length>2){g.push(g[o].substring(0,g[o].lastIndexOf(".")))}}var n=s.getAttribute("category");if(n){g.push(g[0]+"."+n)}for(var h in g){d=g[h];if(!d){continue}if(!e){if(aa_search_comp_of_type_cache[d]==null){aa_search_comp_of_type_cache[d]=[]}var s=""+q+"."+p;aa_search_comp_of_type_cache[d].push({comp:s,lower:s.toLowerCase()})}else{if(aa_search_comp_of_type_cache[d]==null){aa_search_comp_of_type_cache[d]=[]}var s=""+q+"."+p;aa_search_comp_of_type_cache[d].push({comp:s,lower:s.toLowerCase()})}}if(aa_search_comp_of_type_cache["*"]==null){aa_search_comp_of_type_cache["*"]=[]}aa_search_comp_of_type_cache["*"].push(""+q+"."+p)}}}var d=aa_text(v,c,"Type",b);if(d.lastIndexOf("[]")>-1&&d.lastIndexOf("[]")==d.length-2){d=d.substring(0,d.length-2)}if(d=="enum"||d=="dynamic_enum"||d=="dynamic_enum_multi"){d="data.Data"}var r=aa_search_comp_of_type_cache[d];if(aa_bool(v,c,"IncludeAdvancedComponents",b)){ajaxart.concat(r,ajaxart_comp_of_type_advanced_cache[d])}if(aa_bool(v,c,"ForAllTypes",b)){ajaxart.concat(r,ajaxart_comp_of_type_advanced_cache[d]);ajaxart.concat(r,aa_search_comp_of_type_cache["*"])}if(r==null){r=[]}var u=aa_text(v,c,"TextFilter",b).toLowerCase().replace(" ","");if(u!=""){var m=[];var a=[];for(q in r){if(r[q].lower.indexOf(u)>=0){var f=r[q].lower.lastIndexOf(u);if(f>0&&r[q].lower[f-1]=="."){a.push(r[q].comp)}else{m.push(r[q].comp)}}}a.sort(function(t,k){return t.length-k.length});r=a.concat(m)}else{var m=[];for(q in r){m.push(r[q].comp)}r=m}return r}};aa_gcs("xmltree",{ItemTextHtmlForXmlElement:function(c,h,b){var n=aa_attach_global_css(aa_text(h,c,"TagCss",b),null,"xmltag");var f=aa_attach_global_css(aa_text(h,c,"AttributeNameCss",b),null,"xmlattr");var g=aa_attach_global_css(aa_text(h,c,"ValueCss",b),null,"xmlattrvalue");var k=h[0];var d=jQuery("<span/>");function r(){ajaxart.run(this.jbData||h,c,"OnClick",aa_ctx(b,{ControlElement:[this],_CurrentFocus:[this]}))}var l="";for(var o=k.firstChild;o!=null;o=o.nextSibling){if(o.nodeType==3){l+=o.nodeValue}}l=l.replace(/\s/g,"");var s=jQuery("<span/>").text(k.tagName).addClass(n);s[0].onclick=r;d.append(s);if(l){s.text(k.tagName+"=");var p=jQuery("<span/>").text(l).addClass(g);p[0].onclick=r;d.append(p)}var q=k.attributes;for(var e=0;e<q.length;e++){var a=q.item(e).nodeName;var m=jQuery("<span/>").text(a+"=").addClass(f);d.append(m);var p=jQuery("<span/>").text(k.getAttribute(a)).addClass(g);d.append(p);m[0].jbData=[q.item(e)];p[0].jbData=[q.item(e)];p[0].onclick=r;m[0].onclick=r}return d.get()}});ajaxart.aaeditor={};aaeditor={};aaeditor.record_inputs_end=function(d,c,b){if(d.keyCode==121&&d.ctrlKey==true){if(window.captureEvents){window.onkeydown=null}else{document.onkeydown=null}if(ajaxart.xtmls_to_trace.length!=1){ajaxart.log("aaeditor.record_inputs - someone else had used xtmls_to_trace during recording");return[]}var a=ajaxart.xtmls_to_trace[0].results;ajaxart.xtmls_to_trace=[];ajaxart.run(a,c,"OnFinishRecord",b)}};aaeditor.find_preview_context_over_gap=function(){var l=0;while(l<ajaxart.xtmls_to_trace.length){if(ajaxart.xtmls_to_trace[l].results.length>0){break}l++}if(l==ajaxart.xtmls_to_trace.length){return[]}var b=ajaxart.xtmls_to_trace[l].results[0];for(var g=l;g>=0;g--){var h=aaeditor.type_of_xtml(ajaxart.xtmls_to_trace[g].xtml);if(g==0){if(h!="action.Action"&&h!="operation.OperationAction"&&h!="action_async.Action"&&h!="xml.Change"){b.Output=ajaxart.run(b.Input,ajaxart.xtmls_to_trace[g].xtml,"",b.context)}return[b]}var d=ajaxart.xtmls_to_trace[g].xtml;var c=ajaxart.xtmls_to_trace[g-1].xtml;var f=(c.nodeType==1)?aa_tag(c):c.nodeName;var k=aa_component_param_def(d.getAttribute("t"),f);if(k!=null&&(k.getAttribute("RunningInput")!=null||ajaxart.childElem(k,"RunningInput")!=null)){b.Input=ajaxart.run(b.Input,k,"RunningInput",aa_ctx(b.context,{_Xtml:[d]}));continue}if(g!=l&&h!="action.Action"&&h!="operation.OperationAction"&&h!="action_async.Action"&&h!="xml.Change"&&h!="ui.WritableAddItem"){var e=ajaxart.xtmls_to_trace;ajaxart.xtmls_to_trace=[{xtml:ajaxart.xtmls_to_trace[0].xtml,results:[]}];ajaxart.run(b.Input,d,"",b.context);if(ajaxart.xtmls_to_trace[0].results.length>0){return ajaxart.xtmls_to_trace[0].results}ajaxart.xtmls_to_trace=e}ajaxart.aaeditor.current_running_context_for_preview=null;var a=ajaxart.xml.clone([ajaxart.xtmls_to_trace[g].xtml]);a.setAttribute("t","aaeditor.SimulateRunningContextForPreview");b.Input=ajaxart.run(b.Input,a,"",b.context);if(ajaxart.aaeditor.current_running_context_for_preview==null){return[]}b=ajaxart.aaeditor.current_running_context_for_preview}return[]};aaeditor.type_of_xtml=function(e){var h;if(e.nodeType==2){h=e.nodeName}if(e.nodeType==1||h=="value"){h=e.tagName}var a=ajaxart.xml.parentNode(e);if(a==null){if(e.nodeType==2){return"data.Data"}var n=e.getAttribute("t");if(n==null){return"data.Data"}var f=n.indexOf(".");var m=n.substring(0,f);var l=n.substr(f+1);if(typeof(ajaxart.components[m])=="undefined"){if(m!=""&&n!=""){ajaxart.log("plugin "+m+" is not defined. trying to use component "+n,"error")}return"data.Data"}var c=ajaxart.components[m][l];return c.getAttribute("type")}if(e.tagName=="xtml"&&a.tagName=="Component"){return a.getAttribute("type")}if(a.getAttribute("t")==null&&ajaxart.xml.parentNode(a)!=null){a=ajaxart.xml.parentNode(a)}if(a.getAttribute("t")==null){ajaxart.log("type_of_xtml_element - problem")}if(a.getAttribute("t")==null){return"data.Data"}var g=a.getAttribute("t").split(".");var k=ajaxart.components[g[0]][g[1]];var d=ajaxart.xml.xpath(k,"Param[@name='"+h+"']/@type");if(d.length==0){return"data.Data"}var b=d[0].nodeValue;if(b.indexOf("[]")!=-1){return b.substring(0,b.indexOf("[]"))}return b};function ajaxart_capture_mousemove(f){var b=(typeof event!=="undefined")?event.srcElement:f.target;var d=jQuery(b).parents("."+ajaxart_capture_top).length>0;if(!d){return}if(ajaxart_drag){ajaxart_dragmove(b);return}if(ajaxart_capture_mode=="add"){if(!jQuery(b).hasClass("placeholder_toadd_control")){return}ajaxart_captured_element=jQuery(b);if(ajaxart_capture_box_add==null){ajaxart_capture_box_add=jQuery('<div class="capturebox_add right2left" style="z-index:500"></div>');ajaxart_capture_box_add.appendTo("body")}var g=b.getAttribute("ajaxart_type").split(".")[1];ajaxart_capture_box_add.html("add "+g);ajaxart_capture_box_add.css("left",ajaxart.ui.absoluteLeft(b)-2);ajaxart_capture_box_add.css("top",ajaxart.ui.absoluteTop(b)-2);ajaxart_capture_box_add.width(jQuery(b).outerWidth());ajaxart_capture_box_add.show();return}var c=ajaxart.incmsart;var h=false;while(b!=null&&!h){if("ajaxart" in b&&b.ajaxart.script!=null){if(c){var k=ajaxart.xml.root(b.ajaxart.script);if(k.tagName=="xtml"){h=false}else{h=true}}else{h=true}}if(!h){b=b.parentNode}}if(b==null||ajaxart_captured_element.length>0&&ajaxart_captured_element[0]==b){return}ajaxart_captured_element=jQuery(b);if(ajaxart_capture_box==null){ajaxart_capture_box=jQuery('<div class="capturebox" ><div class="top"> <div class="captureboxtext"></div> </div><div class="right"/><div class="bottom"/><div class="left"/></div>');ajaxart_capture_box.appendTo("body")}jQuery(ajaxart_capture_box).find(".captureboxtext").html(b.ajaxart.script.getAttribute("t").split(".")[1]);var l={x:ajaxart.ui.absoluteLeft(b),y:ajaxart.ui.absoluteTop(b)};var a=jQuery(b).outerWidth();var m=jQuery(b).outerHeight();jQuery(ajaxart_capture_box).find(".top").css("left",l.x-2).css("top",l.y-2).width(a+4);jQuery(ajaxart_capture_box).find(".bottom").css("left",l.x-2).css("top",l.y-2+m).width(a+4);jQuery(ajaxart_capture_box).find(".left").css("left",l.x-2).css("top",l.y-2).height(m+2);jQuery(ajaxart_capture_box).find(".right").css("left",l.x-2+a).css("top",l.y-2).height(m+2);ajaxart_capture_box.height(jQuery(b).outerHeight());ajaxart_capture_box.width(jQuery(b).outerWidth());ajaxart_capture_box.show()}function ajaxart_capture_keydown(a){if(a.keyCode==27){ajaxart_stop_capture();ajaxart_captured_element=jQuery([]);ajaxart_capture_onselect(null)}}function ajaxart_capture_move(a){if(ajaxart_drag){ajaxart_capture_mousemove(a)}}function ajaxart_dragmove(a){if(!jQuery(a).hasClass("placeholder_toadd_control")){return}ajaxart_captured_element=jQuery(a);if(ajaxart_capture_box_drop==null){ajaxart_capture_box_drop=jQuery('<div class="capturebox_add"></div>');ajaxart_capture_box_drop.appendTo("body")}ajaxart_capture_box_drop.css("left",elem_pos.x-2);ajaxart_capture_box_drop.css("top",elem_pos.y-2);ajaxart_capture_box_drop.width(jQuery(a).outerWidth());ajaxart_capture_box_drop.show()}function ajaxart_stop_capture(){if(window.captureEvents){window.captureEvents(Event.Click);window.onclick=null;window.onmousemove=null;window.onkeydown=null}else{document.onclick=null;document.onmousemove=null;document.onkeydown=null}}function ajaxart_capture_click(a){if(ajaxart_captured_element.length==0){return}ajaxart_stop_capture();var b=ajaxart_captured_element[0];ajaxart_captured_element=jQuery([]);ajaxart_capture_onselect(b)}ajaxart.aaeditor.current_running_context_for_preview=null;ajaxart.aaeditor.getPlaceholderPosition=function(a){var d=0;var b=a.parentNode;var c=b.firstChild;while(c!=null){if(c.nodeType==1&&jQuery(c).hasClass("placeholder_toadd_control")){if(c==a){return d}d++}c=c.nextSibling}return d};function aaeditor_find_top_circuit(a,c){var b={isObject:true};b.RunCircuit=function(){var f=aaeditor.type_of_xtml(a);var e=(f!="action.Action"&&f!="operation.OperationAction"&&f!="action_async.Action"&&f!="xml.Change"&&f!="ui.WritableAddItem");var d=[];if(e){d=ajaxart.run([],a,"",c)}else{for(i in ajaxart.xtmls_to_trace){if(a==ajaxart.xtmls_to_trace[i].xtml){ajaxart.fill_trace_result(ajaxart.xtmls_to_trace[i].results,[],d,c,[])}}}return d};b.GlobalPreview=function(){var d=this.RunCircuit();if(ajaxart.ishtml(d)){return d}else{return[jQuery("<span/>").text(ajaxart.totext_array(d))[0]]}};return b}function aa_component_title(c){var b=ajaxart.totext(c);if(b==""){return[""]}var a=b.split(".");if(a.length<2){return[]}if(a[0]=="data"||a[0]=="ui"||a[0]=="yesno"||a[0]=="action"){return aa_text_capitalizeToSeperateWords(a[1])}return aa_text_capitalizeToSeperateWords(a[1])+" ("+a[0]+")"}aa_gcs("css_dt",{numericProps:",font-size,width,height,border-radius,padding-top,padding-right,padding-bottom,padding-left,margin-top,margin-right,margin-bottom,margin-left,",tokenProps:",font-family,overflow,text-transform,text-align,text-overflow,position,float,opacity,",ParseCssDeclaration:function(f,E,b){var n=ajaxart.parsexml("<Css/>");var o=aa_text(E,f,"Css",b)+";";var u=aa_build_color_lookup(o);var o=u.css;var l=u.colors;function x(F,p,G){var e=G.indexOf("!important");if(e!=-1){F.setAttribute("important",(F.getAttribute("important")||"")+","+p+",");G=G.substr(0,e)}F.setAttribute(p,G)}function k(e){return e.replace(/\#\#([0-9]+)/,function(p){return aa_color_lookup(l,p)})}function A(p,F,e){var G=(" "+F).match(/((\s+[a-zA-Z]+)|(\#[\#0-9A-Fa-f]+))/);if(G){x(e,p,G[2]||aa_color_lookup(l,G[3]))}return G[2]||G[3]}function C(p,e){x(e,"background",p)}function a(F,e){function p(J,I){var H=F.match(J);if(!H){return}var G=ajaxart.parsexml("<border/>");x(G,"size",H[1]);x(G,"style",H[2]);x(G,"color",k(H[3]));x(G,"side",I);e.appendChild(G)}p(/^border:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"");p(/^border-left:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"left");p(/^border-right:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"right");p(/^border-top:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"top");p(/^border-bottom:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)/,"bottom")}function v(I,L){var F=I.split(",");for(var G=0;G<F.length;G++){var J=F[G];var e=ajaxart.parsexml("<shadow/>");var K=J.match(/(.*)inset(.*)/);if(K){x(e,"shadow_inset","true");J=K[1]+K[2]}var p=A("shadow_color",J,e);if(p){J=J.replace(p,"")}var H=J.match(/\s*([^\s]+)\s+([^\s]+)(\s+([^\s]+))?(\s+([^\s]+))?/);if(H){x(e,"shadow_x",H[1]);x(e,"shadow_y",H[2]);x(e,"shadow_blur",H[3]||"0");x(e,"shadow_spread",H[5]||"0")}L.appendChild(e)}}function g(H,e){var I=H.split(",");for(var G=0;G<I.length;G++){var J=I[G];var p=ajaxart.parsexml("<textshadow/>");var F=J.match(/^\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/);if(!F){return}x(p,"x",F[1]);x(p,"y",F[2]);x(p,"blur",F[3]);x(p,"color",F[4]);e.appendChild(p)}}function w(I,H,L){x(L,"gradientType",I);var K=H.split(",");var p=K[0].match(/deg$/)?K[0].slice(0,-3):K[0];x(L,"gradientDir",p);for(var F=1;F<K.length;F++){var J=K[F];var e=ajaxart.parsexml("<grad/>");var G=J.match(/^\s*([^\s]+)\s+([0-9]+)/);if(!G){return}x(e,"color",G[1]);x(e,"pos",G[2]);L.appendChild(e)}}var m=[[/^font-weight:\s*bold/,function(e){x(e,"bold","true")}],[/^white-space:\s*nowrap/,function(e){x(e,"nowrap","true")}],[/^font-style:\s*italic/,function(e){x(e,"italic","true")}],[/^text-decoration:\s*underline/,function(e){x(e,"underline","true")}],[/^padding:\s*([^\s]+)$/,function(e,p){x(e,"padding_left",p[1]);x(e,"padding_right",p[1]);x(e,"padding_top",p[1]);x(e,"padding_bottom",p[1])}],[/^padding:\s*([^\s]+)\s+([^\s]+)$/,function(e,p){x(e,"padding_left",p[2]);x(e,"padding_right",p[2]);x(e,"padding_top",p[1]);x(e,"padding_bottom",p[1])}],[/^padding:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/,function(e,p){x(e,"padding_top",p[1]);x(e,"padding_right",p[2]);x(e,"padding_bottom",p[3]);x(e,"padding_left",p[4])}],[/^margin:\s*([^\s]+)$/,function(e,p){x(e,"margin_left",p[1]);x(e,"margin_right",p[1]);x(e,"margin_top",p[1]);x(e,"margin_bottom",p[1])}],[/^margin:\s*([^\s]+)\s+([^\s]+)$/,function(e,p){x(e,"margin_left",p[2]);x(e,"margin_right",p[2]);x(e,"margin_top",p[1]);x(e,"margin_bottom",p[1])}],[/^margin:\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)/,function(e,p){x(e,"margin_top",p[1]);x(e,"margin_right",p[2]);x(e,"margin_bottom",p[3]);x(e,"margin_left",p[4])}],[/^text-shadow:(.+)/,function(e,p){g(p[1],e)}],[/^border:.+/,function(e,p){a(p[0],e)}],[/^border-left:.+/,function(e,p){a(p[0],e)}],[/^border-right:.+/,function(e,p){a(p[0],e)}],[/^border-top:.+/,function(e,p){a(p[0],e)}],[/^border-bottom:.+/,function(e,p){a(p[0],e)}],[/^box-shadow:\s*(.+)/,function(e,p){v(p[1],e)}],[/^color:\s*(.+)/,function(e,p){x(e,"color",k(p[1]))}],[/^background-color:\s*(.+)/,function(e,p){x(e,"background_color",k(p[1]))}],[/^background:\s*(.+)/,function(e,p){C(k(p[1]),e)}],[/^background-image:\s*(-webkit-)?([^-]+)-gradient\(([^)]+)/,function(e,p){w(p[2],k(p[3]),e)}],];var d=o.split(";");var D="";for(var t=0;t<d.length;t++){var c=d[t].replace(/^\s*/,"").replace(/\s*$/,"");if(!c){continue}var s=c.split(":");var r=","+s[0]+",";var z=s[0].replace(/-/,"_");if(ajaxart.gcs.css_dt.numericProps.indexOf(r)!=-1||ajaxart.gcs.css_dt.tokenProps.indexOf(r)!=-1){x(n,z,s[1])}else{var q=false;for(var y=0;y<m.length;y++){try{var h=c.match(m[y][0]);if(h){m[y][1].call({},n,h);q=true}}catch(B){}}if(!q){D+=(D==""?"":";")+k(c)}}}if(D){n.setAttribute("unknown",D)}return[n]},ParseCssBlock:function(d,h,a){var f=aa_text(h,d,"Block",a);var l=/([^\{]*)?\{([^}]*)\}/g;var o=ajaxart.parsexml("<Block/>");while(match=l.exec(f)){var e=match[1]?match[1].replace(/^\s*/,"").replace(/\s*$/,""):"##";var n=ajaxart.runNativeHelper([match[2]],d,"ParseDeclaration",a)[0];var c=aa_xpath(o,"Css[@selector='"+e+"']")[0];if(c){for(var g=0;g<n.attributes.length;g++){var k=n.attributes.item(g).name;var m=c.getAttribute(k);if(k=="unknown"&&m){c.setAttribute(k,n.getAttribute(k)+"; "+m)}else{c.setAttribute(k,n.getAttribute(k))}}for(var b=n.firstChild;b!=null;b=b.nextSibling){c.appendChild(b.cloneNode(true))}}else{n.setAttribute("selector",e);o.appendChild(n)}}return[o]},WorkingElementToCss:function(c,f,a){var b=aa_first(f,c,"WorkingElement",a);if(!b){return[""]}if(b.tagName=="Block"){var m="";var l=aa_xpath(b,"Css");for(var g=0;g<l.length;g++){var k=l[g];var d=k.getAttribute("selector")+" ";if(d=="## "){d=""}m+=d+"{ "+h(e(k),80-d.length)+"}\n"}return[m]}else{return[e(b)]}function h(q,r){var o=q.split(";"),s=0,n="";for(var p=0;p<o.length;p++){if(s+o[p].length>r){n+="\n  ";s=0}s+=o[p].length;if(o[p]){n+=o[p]+"; "}}return n}function e(H){function J(L){return p(H,L)}function p(O,N){var P=O.getAttribute(N);if(!P||P=="0"){return" 0"}P=P.replace(/^\s+/,"").replace(/\s+$/,"");var M="";if(P.match(/^[0-9]+$/)){M="px"}var L=((O.getAttribute("important")||"").indexOf(","+N+",")==-1)?"":" !important";return" "+P+M+L}function t(M,L){return M.getAttribute(L)&&M.getAttribute(L)!="0"}function q(M,L){return M.getAttribute(L)&&M.getAttribute(L)=="true"}H.setAttribute("font_weight",H.getAttribute("bold")=="true"?"bold":"");H.setAttribute("font_style",H.getAttribute("italic")=="true"?"italic":"");H.setAttribute("text_decoration",H.getAttribute("underline")=="true"?"underline":"");H.setAttribute("white_space",H.getAttribute("nowrap")=="true"?"absolute":"");var z="";var B=(ajaxart.gcs.css_dt.tokenProps+"white-space,color,background,background-color,font-weight,font-style,text-decoration,text-shadow,text-overflow,text-transform").split(",");for(var F=0;F<B.length;F++){var r=B[F];var K=r.replace(/-/,"_");if(H.getAttribute(K)!=null&&H.getAttribute(K)!=""){z+=r+":"+H.getAttribute(K)+";"}}var E=ajaxart.gcs.css_dt.numericProps.split(",");for(var F=0;F<E.length;F++){var r=E[F];var K=r.replace(/-/,"_");if(H.getAttribute(K)!=null&&H.getAttribute(K)!=""){z+=r+":"+J(K)+";"}}var C=aa_xpath(H,"border[@side='']")[0];if(C){z+="border:"+p(C,"size")+" "+C.getAttribute("style")+" "+C.getAttribute("color")+";"}var u=aa_xpath(H,"border[@side!='']");for(var F=0;F<u.length;F++){var D=u[F];z+="border-"+D.getAttribute("side")+":"+p(D,"size")+" "+D.getAttribute("style")+" "+D.getAttribute("color")+";"}var y=aa_xpath(H,"textshadow");var I=[];for(var F=0;F<y.length;F++){var x=y[F];I.push(p(x,"x")+p(x,"y")+p(x,"blur")+" "+x.getAttribute("color"))}if(I.length>0){z+="text-shadow: "+I.join(", ")+";"}var o=aa_xpath(H,"shadow");var n=[];for(var F=0;F<o.length;F++){var s=o[F];n.push((q(s,"shadow_inset")?" inset":"")+p(s,"shadow_x")+p(s,"shadow_y")+p(s,"shadow_blur")+p(s,"shadow_spread")+" "+s.getAttribute("shadow_color"))}if(n.length>0){z+="box-shadow: "+n.join(", ")+";"}var G=aa_xpath(H,"grad");var w=[];for(var F=0;F<G.length;F++){var v=G[F];w.push(v.getAttribute("color")+" "+v.getAttribute("pos").match(/^([0-9]*)/)[1]+"% ")}var A=H.getAttribute("gradientDir");if(H.getAttribute("gradientType")=="radial"){A="ellipse cover"}else{if(!isNaN(parseFloat(A))){A+="deg"}}if(w.length>0){z+="background-image: -webkit-"+H.getAttribute("gradientType")+"-gradient("+A+", "+w.join(", ")+");"}if(t(H,"unknown")){z+=H.getAttribute("unknown")+";"}return z.replace(/^\s*/,"").replace(/\s*$/,"")}},RefreshPaddingAndMarginFields:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"OnUpdate",function(p,n){var e=p.Id;var o=e.split("_")[0];var l=e.split("_")[1];var m=aa_xpath(n[0],"..")[0];var g=ajaxart.totext_array(n);var k=m.getAttribute(o+"_mode");var f=[];if(k=="same"){f=["top","right","bottom","left"]}if(k=="xy"){if(l=="top"||l=="bottom"){f=["top","bottom"]}if(l=="left"||l=="right"){f=["left","right"]}}for(var h=0;h<f.length;h++){if(f[h]==l){continue}var q=o+"_"+f[h];m.setAttribute(q,g);aa_refresh_field([q],"screen",false,null,a)}aa_refresh_field(["Result"],"screen",false,null,a)})},RelatedColors:function(d,g,b){var k=aa_text(g,d,"Color",b);k=k.replace(/^\#/,"");var a=aa_text(g,d,"ColorName",b);var h=rgbToHsv(parseInt(k.substring(0,2),16),parseInt(k.substring(2,4),16),parseInt(k.substring(4,6),16));var m=Math.floor(h[2]*100);var n=[];for(var f=100;f>=0;){var e={isObject:true,color:"#"+hsvToRgbHex(h[0],h[1],f/100),};if(m==f){e={isObject:true,current:"true",color:"#"+k,name:a}}n.push(e);var l=Math.max(1,Math.floor(Math.abs(m-f)/6));f-=l}return n}});function rgbToHsv(a,f,l){a=a/255,f=f/255,l=l/255;var m=Math.max(a,f,l),c=Math.min(a,f,l);var e,o,n=m;var k=m-c;o=m==0?0:k/m;if(m==c){e=0}else{switch(m){case a:e=(f-l)/k+(f<l?6:0);break;case f:e=(l-a)/k+2;break;case l:e=(a-f)/k+4;break}e/=6}return[e,o,n]}function hsvToRgbHex(e,d,b){function a(f){if(f<16){return"0"+f.toString(16).toUpperCase()}return f.toString(16).toUpperCase()}var c=hsvToRgb(e,d,b);return""+a(Math.floor(c[0]))+a(Math.floor(c[1]))+a(Math.floor(c[2]))}function hsvToRgb(k,w,o){var a,l,n;var e=Math.floor(k*6);var m=k*6-e;var d=o*(1-w);var c=o*(1-m*w);var u=o*(1-(1-m)*w);switch(e%6){case 0:a=o,l=u,n=d;break;case 1:a=c,l=o,n=d;break;case 2:a=d,l=o,n=u;break;case 3:a=d,l=c,n=o;break;case 4:a=u,l=d,n=o;break;case 5:a=o,l=d,n=c;break}return[a*255,l*255,n*255]}jBart.studiobar=jBart.studiobar||{};aa_gcs("field_dt_model",{ListItemsOfFieldForPreview:function(d,f,c){var e=aa_first(f,d,"FieldXtml",c);if(e.nodeType==2){e=aa_xpath(e,"..")[0]}for(var b=e;b&&b.nodeType==1;b=b.parentNode){var g=aa_xpath(b,"FieldAspect[@t='field_aspect.ItemListContainer']")[0];if(g){var a=aadt_calcPrimitivePreviewContext(g,"Items",c);if(a&&a[0]&&a[0].Output){return a[0].Output}else{return[]}}}},SampleItemsToFieldInfos:function(e,g,c){var l=aa_first(g,e,"SampleItems",c);var m=ajaxart_run_tocommas(g,e,"UsedIDs",c);if(!l){return}var f=[];if(l.nodeType==1){for(var h=0;h<l.attributes.length;h++){var a=l.attributes.item(h).name;var d=l.getAttribute(a);var k=aa_totext(ajaxart.runNativeHelper([d],e,"GuessType",c));var b=aa_string2id(a);f.push({ID:b,Title:a,Type:k,FieldData:"@"+a})}}return f}});ajaxart.gcs.field_dt={GroupingXml:function(b,e,a){var g=aa_first(e,b,"ParentField",a);if(g==null||g.Fields==null){return[]}var c=[];for(var f=0;f<g.Fields.length;f++){var k=g.Fields[f];if(k.Fields==null){c.push(ajaxart.parsexml('<field id="'+k.Id+'"/>'))}else{if(k.IsVirtualGroup){for(var d=0;d<k.Fields.length;d++){var h=k.Fields[d];if(h.Fields==null){c.push(ajaxart.parsexml('<field id="'+h.Id+'" group="'+k.Id+'"/>'))}}}}}return c},TreeItemImage:function(c,d,b){if(!d[0]||d[0].nodeType!=1){return}if(d[0].getAttribute("image")){return[ajaxart.dynamicText([],d[0].getAttribute("image"),b)]}var f=aa_xpath(d[0],"FieldAspect");for(var a=0;a<f.length;a++){var e=aa_component_definition(f[a].getAttribute("t"));if(e&&e.getAttribute("fieldImage")){return[ajaxart.dynamicText([],e.getAttribute("fieldImage"),b)]}}var e=aa_component_definition(d[0].getAttribute("t"));if(e&&e.getAttribute("image")){return[ajaxart.dynamicText([],e.getAttribute("image"),b)]}return[aa_base_images()+"/studio/bullet1616.gif"]},Regroup:function(b,f,a){var h=aa_first(f,b,"ParentField",a);if(h==null||h.Fields==null){return[]}var c=ajaxart.run(f,b,"GroupingXml",a);for(var g=0;g<c.length;g++){var k=c[g].getAttribute("id");var e=c[g].getAttribute("group");var l=ajaxart_object_byid(ajaxart_firstlevel_fields(h),k);var m=h;if(e!=""){for(var d=0;d<h.Fields.length;d++){if(h.Fields[d].Id==e){m=h.Fields[d];break}}}if(ajaxart_object_byid(m.Fields,k)==null){m.XtmlSource[0].script.appendChild(l.XtmlSource[0].script)}}return["true"]},BrotherFieldIDs:function(b,e,a){var d=[];var h=aa_first(e,b,"FieldXtml",a);if(h==null){return[]}var f=h.parentNode,c=null;while(f.tagName!="Page"&&f.tagName!="Component"&&f!=null){c=f;f=f.parentNode}if(f.tagName=="Component"&&f.getAttribute("type")=="jbart.MyWidgetPage"){f=c}var g=aa_first([],f,"",a);if(!g){return[]}var k=function(p,m,q){var l=p.Fields;if(l==null){return}for(var n=0;n<l.length;n++){var o=l[n];if(o.Id!=q){m.push(o.Id)}if(o.Fields){k(o,m,q)}}};k(g,d,h.getAttribute("ID"));return d},FieldSampleData:function(d,f,b){var k=aa_first(f,d,"Page",b);var m=aa_first(f,d,"Field",b);var c=ajaxart.run(f,d,"PageData",b);if(k==m){return c}var n=c[0];var g=[];var l=m;while(l&&l!=k){if(l.tagName=="Field"){g.push(l)}l=l.parentNode}g=g.reverse();for(var e in g){if(!n){return[]}var m=ajaxart.run([],g[e],"",b)[0];if(!m){continue}if(m.IsMultipleGroup){var a=m.FieldData([n],b);var h=m.InnerItems(a,b)[0];n=h.Items[0]}else{if(m.FieldData){n=m.FieldData([n],b)[0]}}}if(!n){return[]}return[n]},FieldsFromOtherPages:function(e,k,c){var g=[];var p=aa_first(k,e,"FieldXtml",c);if(!p){return}var n=p;while(n.tagName!="xtml"&&n){n=n.parentNode}if(!n||!n.parentNode||n.parentNode.getAttribute("type")!="jbart.MyWidgetPage"){return}var m=n.getAttribute("ContentType");var d=aa_xpath(n.parentNode.parentNode,"Component[@type='jbart.MyWidgetPage']/xtml");for(var h=0;h<d.length;h++){var o=d[h];if(o==n||o.getAttribute("ContentType")!=m){continue}var q="page: "+o.parentNode.getAttribute("id");var l=aa_xpath(o,"Field");for(var f=0;f<l.length;f++){var a=l[f].cloneNode(true);a.setAttribute("origin",q);var b=a.getAttribute("ID");if(b&&aa_xpath(n,"Field[@ID='"+b+"']").length>0){a.setAttribute("fieldExists",true)}g.push(a)}}return g},ExistingFieldsToAdd:function(d,h,a){var l=aa_first(h,d,"ParentField",a);var k=aa_text(h,d,"ContentType",a);var c=aa_text(h,d,"ParentFieldPath",a);var e=[];var n=ajaxart_firstlevel_fields(l);var g=a.vars._BartContext[0].Pages;var b=[];for(var f=0;f<g.length;f++){if(ajaxart.totext_array(g[f].ContentType)==k){b.push(aa_first(h,g[f].XtmlSource[0].script,"",a))}}var o=[];for(var f=0;f<b.length;f++){var m=ajaxart_subfield_bypath(b[f],c);if(m!=null){ajaxart.concat(o,ajaxart_firstlevel_fields(m))}}if(a.vars._BartContext){ajaxart.concat(o,a.vars._BartContext[0].GlobalFields)}for(var f=0;f<o.length;f++){if(ajaxart_object_byid(n,o[f].Id)==null){if(ajaxart_object_byid(e,o[f].Id)==null){e.push(o[f])}}}return e},ComponentsOfTypeOptions:function(c,e,a){var d={isObject:true,Options:[]};var l=ajaxart.runNativeHelper(e,c,"Components",a);var h=aa_text(e,c,"CurrentPT",a),b=false;for(var f=0;f<l.length;f++){var k=l[f];var g={isObject:true,code:k.ID,image:aa_jbart_image("/default1616.gif",a)};g.OptionPage=aa_first(e,c,"OptionPage",a);g.text=aa_text_capitalizeToSeperateWords(k.ID.split(".")[1]);if(k.ID==h){b=true}d.Options.push(g)}if(h!=""&&!b){var g={isObject:true,code:h,image:aa_jbart_image("/default1616.gif",a),OptionPage:aa_first(e,c,"OptionPage",a)};g.text=aa_text_capitalizeToSeperateWords(h.split(".")[1]);d.Options.push(g)}return[d]},ComponentsWithCategories:function(c,z,b){var w={isObject:true,IsTree:true,Options:[]};var x={isObject:true,code:"General",UnSelectable:true,IsCategory:true,Options:[],image:aa_jbart_image("/folder-open.png",b)};w.Categories=[x];var o={};var p=aa_isjbart();o.General=x;if(!window.aaxtmldt_options_cache){aaxtmldt_options_cache={};for(var v in ajaxart.components){if(v.lastIndexOf("_dt")==v.length-3&&v.length>3||v=="aaeditor"){continue}for(var u in ajaxart.components[v]){var y=ajaxart.components[v][u];if(y.getAttribute("hidden")=="true"||y.getAttribute("type")==null){continue}if(p&&y.parentNode.getAttribute("jbart")!="true"){continue}if(p&&y.getAttribute("jbart")=="false"){continue}var g=y.getAttribute("light")=="false";var h=y.getAttribute("type").split(",");for(var t=0;t<h.length;t++){if(h[t].split(".").length>2){h.push(h[t].substring(0,h[t].lastIndexOf(".")))}}var s=y.getAttribute("category");if(s){h.push(h[0]+"."+s)}for(var t=0;t<h.length;t++){var n={isObject:true,code:""+v+"."+u,Hidden:g,image:aa_jbart_image("/default1616.gif",b)};n.text=aa_text_capitalizeToSeperateWords(u);n.Category=y.getAttribute("category");if(aaxtmldt_options_cache[h[t]]==null){aaxtmldt_options_cache[h[t]]=[]}aaxtmldt_options_cache[h[t]].push(n)}}}}var e=aa_text(z,c,"Type",b);if(e==""){return[]}var a=ajaxart.types[e.replace(".","_")];if(a!=null&&a.getAttribute("lightPTs")!=null){var A=a.getAttribute("lightPTs").split(",");w.Options=[];for(var v=0;v<A.length;v++){var n=A[v];var m=aa_text_capitalizeToSeperateWords(n.substring(n.indexOf(".")+1));w.Options.push({isObject:true,code:n,OptionPage:aa_first(z,c,"OptionPage",b),text:m})}w.Categories=null;w.IsTree=false;return[w]}var q=aaxtmldt_options_cache[e];if(q==null){q=[]}var r=aa_text(z,c,"CurrentPT",b),l=false;for(var v=0;v<q.length;v++){var n={};if(q[v].Hidden){continue}if(q[v].code==r){l=true}for(var u in q[v]){n[u]=q[v][u]}if(n.code==r){hasCurrentPT=true}n.OptionPage=aa_first(z,c,"OptionPage",b);if(q[v].Category==null){x.Options.push(n)}else{var d=q[v].Category.split(",");for(var u=0;u<d.length;u++){var f=d[u];if(o[f]==null){o[f]={isObject:true,code:[f],UnSelectable:true,IsCategory:true,Options:[],image:aa_jbart_image("/folder-open.png",b)};w.Categories.push(o[f])}o[f].Options.push(n)}}}if(r!=""&&!l){var n={isObject:true,code:r,OptionPage:aa_first(z,c,"OptionPage",b)};n.text=aa_text_capitalizeToSeperateWords(r.split(".")[1]);x.Options.push(n)}if(w.Categories.length==1){w.Options=w.Categories[0].Options;w.Categories=null;w.IsTree=false}return[w]},DualFeatureOptions:function(e,k,b){if(!aa_field_dt_dual_options){var h={isObject:true,IsTree:true,Options:[]};var g=aa_isjbart();var d={isObject:true,code:"General",UnSelectable:true,IsCategory:true,Options:[]};h.Categories=[d];var a={General:d};for(var l in ajaxart.components){if(l.lastIndexOf("_dt")==l.length-3&&l.length>3||l=="aaeditor"){continue}for(var f in ajaxart.components[l]){var n=ajaxart.components[l][f];var p=n.getAttribute("type");if(n.getAttribute("hidden")=="true"||n.getAttribute("light")=="false"){continue}if(p!="field.FieldAspect"&&p!="uiaspect.Aspect"){continue}if(g&&n.parentNode.getAttribute("jbart")!="true"){continue}var c=(p=="field.FieldAspect")?"field":"list";var m={isObject:true,code:""+l+"."+f};m.text=aa_text_capitalizeToSeperateWords(f)+" ("+c+")";var r=n.getAttribute("category")||"General";var q=r.split(",");for(var f=0;f<q.length;f++){var o=q[f];if(a[o]==null){a[o]={isObject:true,code:[o],UnSelectable:true,IsCategory:true,Options:[]};h.Categories.push(a[o])}a[o].Options.push(m)}}}aa_field_dt_dual_options=[h]}return aa_field_dt_dual_options},SyncFieldsData:function(c,g,a){var m=aa_first(g,c,"PageXtml",a);var k=m.getAttribute("ContentType");var e=[];var q="";var o=a.vars._BartContext[0].AppXtml[0];var b=ajaxart.xml.xpath(o,"Pages/Page[@ContentType='"+k+"']");var h=bartdt_subfields(m);for(var f=0;f<h.length;f++){var n=h[f].Field;for(var d=0;d<b.length;d++){if(b[d]==m){continue}var l=bartdt_field_bypath(b[d],h[f].Path);if(!l||ajaxart.xml2text(n)==ajaxart.xml2text(l)){continue}var p={isObject:true,Field:n,OtherField:l,Page:m,OtherPage:b[d]};e.push(p)}}return e},GotoFieldOfFocus:function(c,d,a){var f=jQuery(ajaxart.controlOfFocus).parents().filter(function(){return this.Field!=null})[0];if(f==null){return[]}var b=f.Field.Id;var e=jQuery(document).find(".bartdt_edit_fields").find(".aa_item_fld_"+b);e.parents().each(function(){jQuery(this).show()});xFireEvent(e[0],"mousedown");xFireEvent(e[0],"mouseup");return[]},ToEnglishMultiple:function(c,d,b){var e=aa_totext(d);if(e==""){return[]}var a=e.charAt(e.length-1);if(a=="s"){return[e+"es"]}if(a=="y"){return[e.substring(0,e.length-1)+"ies"]}return[e+"s"]},SelectedFieldInfo:function(c,e,b){var a={isObject:true};var d=b.vars._ElemsOfOperation[0];var g="";while(d.parentNode!=null){if(jQuery(d).hasClass("aa_item")){var f=d.ItemData[0];if(f&&f.getAttribute("ContentType")!=null){a.ContentType=f.getAttribute("ContentType");a.Path=[g];return[a]}if(f&&f.getAttribute("Path")!=null){if(g!=""){g=f.getAttribute("Path")+"/"+g}else{g=f.getAttribute("Path")}}}d=d.parentNode}return[a]},GuessType:function(c,d,b){var a=ajaxart.run(d,c,"SampleData",b);var e=0;for(i in a){var f=ajaxart.totext_item(a[i]);if(!isNaN(parseInt(f))&&isFinite(f)){e++}}if(a.length>0&&e/a.length>0.8){return[ajaxart.parsexml("<Type t='field_aspect.Number' />")]}return[ajaxart.parsexml("<Type t='field_type.Text' />")]},FieldTreeItemsDecorator:function(e,f,b){var a=aa_first(f,e,"DataItems",b);var d=f[0];if(d&&d.nodeType==1){function g(k){for(var h=k.firstChild;h!=null;h=h.nextSibling){if(h.nodeType!=1||h.tagName=="Field"||h.tagName=="xtml"){continue}if(h.getAttribute("t")=="ui.InnerPage"){return h}var l=g(h);if(l){return l}}return null}var c=g(d);if(c){a=a||{Items:[]};a.Items.push(c)}}return a?[a]:[]},AddFeatureFieldOptions:function(d,k,c){var o=aa_text(k,d,"Type",c);var e=aa_first(k,d,"Xtml",c);var b={};if(e){var p=e.getAttribute("t");if(p!="field.Field"&&p!="field.XmlField"){b.notTextbox=true}}var f=(c.vars._WidgetXml)?aa_totext(aa_xpath(c.vars._WidgetXml[0],"@plugins")):"";var n="cache_"+f+"_light";if(!jBart.vars.compsOfTypeCache||!jBart.vars.compsOfTypeCache[n]){ajaxart.runNativeHelper(k,d,"BuildCache",c)}var l=o.split(",");var m=jBart.vars.compsOfTypeCache[n][l[0]];if(l.length>0){m=[];for(var p=0;p<l.length;p++){ajaxart.concat(m,jBart.vars.compsOfTypeCache[n][l[p]])}}if(!m){return[]}var g=[];for(var h=0;h<m.length;h++){var a=m[h].Definition.getAttribute("category");if(a=="textbox"&&b.notTextbox){continue}g.push(m[h].Definition)}return g},ComponentInTable:function(e,f,d){var b=aa_attach_global_css(aa_text(f,e,"Css",d));var a=aa_first(f,e,"Xtml",d);var c=jQuery("<div><span class='component_title'><span style='cursor:inherit' class='aa_field_toolbar_image xtmldt_toggle_left'/><span class='component_title_in_table' /></span><div class='place_holder' /></div>");c.addClass(b);c.find(".component_title_in_table").text(aa_text([a],e,"ComponentTitle",d));var g=ajaxart.tobool_array(ajaxart.runNativeHelper([a],e,"HasParams",d));if(!g){return[c[0]]}c.find(".xtmldt_toggle_left").attr("title",aa_text(f,e,"TitleForExpand",d));c.find(".xtmldt_toggle_left").css("background","url("+aa_text(f,e,"ImageForExpand",d)+") no-repeat");c.find(".component_title").css("cursor","pointer");c.find(".component_title").click(function(l){var h=jQuery((typeof(event)=="undefined")?l.target:event.srcElement);if(jQuery(h).hasClass("doc_icon")){return true}if(this.Expanded){this.Expanded=false;c.find(".place_holder").animate({height:"hide"},300);c.find(".xtmldt_toggle_left").attr("title",aa_text(f,e,"TitleForExpand",d));c.find(".xtmldt_toggle_left").css("background","url("+aa_text(f,e,"ImageForExpand",d)+") no-repeat");c.find(".component_title_in_table").removeClass("expanded");c.find(".documentation").remove()}else{this.Expanded=true;c.find(".xtmldt_toggle_left").attr("title",aa_text(f,e,"TitleForCollapse",d));c.find(".xtmldt_toggle_left").css("background","url("+aa_text(f,e,"ImageForCollapse",d)+") no-repeat");c.find(".place_holder").hide();c.find(".place_holder").children().remove();c.find(".component_title_in_table").addClass("expanded");c.find(".component_title").append(ajaxart.runNativeHelper([a],e,"Documentation",d));var k=ajaxart.runNativeHelper([a],e,"ParamsControl",d);jQuery(k).addClass("dt_intable_props");if(k.length){c.find(".place_holder").append(k[0])}c.find(".place_holder").animate({height:"show"},300,"swing",function(){aa_ensure_visible(k[0])});aa_element_attached(c.find(".place_holder")[0])}});return[c[0]]},UpToPageDef:function(e,g,d){var b=aa_first(g,e,"Xtml",d);if(b&&b.nodeType!=1){b=ajaxart.xml.parentNode(b)}var h=[];var f=null;for(;b&&b.nodeType==1;b=b.parentNode){h.push(b.getAttribute("Title")||b.getAttribute("ID")||b.getAttribute("t"));if("Field,Fields,Operation,Operations".indexOf(b.tagName)==-1){break}}var a=aa_text(g,e,"Result",d);var c={isObject:true,Xtml:b,Path:h.reverse().join("/")};if(a=="xtml"){return[b]}if(a=="path"){return[c.Path]}return[c]},ContainerFields:function(d,f,c){var b=aa_first(f,d,"Container",c);if(!b){return[]}var e=aa_DataviewFields(b.Fields);if(!aa_bool(f,d,"ReturnIDsList",c)){return e}else{var a=[];for(i in e){a.push(e[i].Id)}return a}},FixPercentagesInCss:function(c,d,b){var f=aa_text(d,c,"Text",b);var e=f.split("%");for(var a in e){if(a<e.length-1&&!isNaN(parseInt(e[a].charAt(e[a].length-1)))){e[a]+="\\"}}return[e.join("%")]},IsReadOnly:function(d,e,c){var b=aa_first(e,d,"FieldXtml",c);for(var a=b;a!=null;a=a.parentNode){if(aa_xpath(a,"FieldAspect[@t='field_aspect.ReadOnly']")[0]){return["true"]}if(aa_xpath(a,"Aspect[@t='uiaspect.ReadOnly']")[0]){return["true"]}}return[]}};ajaxart.gcs.bart_dt={NewLinesToJs:function(c,d,b){var a=ajaxart.xml.prettyPrint(d,"",true);a=a.replace(/\r\n/g,"\\n").replace(/\r/g,"\\n").replace(/\n/g,"\\n");return[a]},ResourcesAsContext:function(b,c,a){out={isObject:true,context:ajaxart.newContext()};var d=a.vars._BartContext[0].Resources;return[out]},PagePreview:function(d,f,c){var e=ajaxart.runNativeHelper(f,d,"Control",c);var a=jQuery(e).find(".aa_withpopup");for(var g=0;g<a.length;g++){var k=a[g];var h=k.parentNode.Field;if(!h||!h.PopupContents){continue}var m=aa_ctx(k.ajaxart?k.ajaxart.params:ajaxart.newContext(),{_Input:[k]});var b=h.PopupContents([],m)[0];var l=jQuery(e).find(".aa_container")[0];if(b&&l){l.appendChild(jQuery('<div class="pagedt_pagebreak"/>')[0]);l.appendChild(b);jQuery(b).css("height","300px").css("overflow","auto")}}return e},EditPageFromFieldXtml:function(b,d,a){var g=a.vars._BartDevDtContext[0];var f=aa_first(d,b,"FieldXtml",a);var e=[];while(f.tagName!="Page"){e.push(f.getAttribute("Title"));f=f.parentNode;if(!f){return}}var c=f.getAttribute("ID");e.push(c);g.GoToEditPage([],aa_ctx(a,{Page:[c],TreePath:[e.reverse().join("/")]}))},SamplePageXtmlFromGallery:function(b,d,a){if(!window.aav_GalleryItems){return}var c=aa_text(d,b,"GalleryItem",a);var e=aav_GalleryItems[c];return ajaxart.runNativeHelper(e,b,"Xtml",a)},PreLoadGalleryItem:function(c,e,b){if(!window.aav_GalleryItems){window.aav_GalleryItems={}}var d=aa_text(e,c,"GalleryItem",b);if(aav_GalleryItems[d]){return ajaxart.run(e,c,"AfterLoad",b)}var a={cache:false,type:"GET",httpHeaders:[],url:"bartdev.php?op=loadnode&contenttype=bart_sample&id="+d};a.success=function(h){var g=ajaxart_server_content2result(h);var f=aa_text(e,c,"GalleryItem",b);aav_GalleryItems[f]=g;ajaxart.run(e,c,"AfterLoad",aa_ctx(b,{_GalleryItem:g}))};a.error=function(){ajaxart.run(e,c,"AfterLoad",b)};jQuery.ajax(a)},FieldWithContainingFieldData:function(c,e,b){var d=aa_first(e,c,"FieldXtml",b);if(!d){return}var a=aa_run(e,c,"FieldData",b);if(!a[0]){return}var f=aa_first(a,d,"",b);if(!f){return}f.OrigFieldData=f.FieldData;f.FieldData=function(g,h){return f.OrigFieldData(a,h)};return[f]},ShowPageFromGallery:function(b,c,a){if(!window.aav_GalleryItems){window.aav_GalleryItems={}}var d={};d.LoadItem=function(e,f){var h=aa_text(c,b,"GalleryItem",a);if(aav_GalleryItems[h]){return aav_GalleryItems[h]}var g={cache:false,type:"GET",httpHeaders:[],url:"bartdev.php?op=loadnode&contenttype=bart_sample&id="+h};g.success=function(m){var l=ajaxart_server_content2result(m);var k=aa_text(c,b,"GalleryItem",a);aav_GalleryItems[k]=l;ajaxart_async_CallBack(l,f)};g.error=function(){ajaxart_async_CallBack([],f)};ajaxart_async_Mark(f);jQuery.ajax(g)};return ajaxart.runNativeHelper(c,b,"Control",aa_ctx(a,{_GalleryLoader:[d]}))},CleanInspectSelectedObject:function(b,c,a){jBart.studiobar.object=null},ShowSelectedObjectElements:function(b,c,a){if(jBart.studiobar.object){jBart.studiobar.showObjectElements(jBart.studiobar.object)}},RefreshSelectedObject:function(b,c,a){if(jBart.studiobar.object){window.inJBartRefresh=true;try{jBart.studiobar.object.Refresh(c,a)}catch(d){ajaxart.logException(d)}window.inJBartRefresh=false}},InspectSelectedObject:function(b,d,a){if(jBart.studiobar.object&&jBart.studiobar.object.Xtml&&jBart.studiobar.object.Xtml.tagName=="dtnode"){return[jBart.studiobar.object]}if(jBart.studiobar.object){var k=jQuery(jBart.studiobar.object.Xtml).parents().slice(-1)[0];if(k&&aa_tag(k)!="bart_sample"&&aa_tag(k)!="jbart_project"&&aa_tag(k)!="xtml"){jBart.studiobar.object=null}}if(!jBart.studiobar.object){if(!a.vars._BartContext){return[]}jBart.studiobar.object={isObject:true};var h=a.vars._BartContext[0].AppXtml[0];var c=window.location.href.match(/wpage=([a-zA-Z0-9]+)/);var e=c?c[1]:null;var f=null;if(e){f=aa_xpath(h,"../../Component[@id='"+e+"']/xtml")[0]}if(!f){var g=aa_totext(aa_xpath(h,"MainPage1/@t")).split(".")[1];f=aa_xpath(h,"../../Component[@id='"+g+"']/xtml")[0]}if(!f){f=aa_xpath(h,"../../Component[@type='jbart.MyWidgetPage']/xtml")[0]}f=f||aa_xpath(h,"Pages/Page")[0];jBart.studiobar.object.Xtml=f;jBart.studiobar.object.Element=a.vars._BartContext[0].ControlHolder&&a.vars._BartContext[0].ControlHolder[0]}return[jBart.studiobar.object]},OpenPropertiesWindow:function(f,g,e){var c=false;var b=jQuery("body").find(".aa_dlg");for(var d=0;d<b.length;d++){if(b[d].Dialog.Identifier=="jBart Inspect Properties"){b[d].Dialog.Close()}}ajaxart.runNativeHelper(g,f,"Open",e)[0];var h=aa_xtml_to_path(jBart.studiobar.object.Xtml);if(e.vars._WidgetXml){var a=e.vars._WidgetXml[0].getAttribute("id")+"_prop_path";ajaxart.cookies.writeCookie(a,h)}},PropertiesWindowClosed:function(c,d,b){if(b.vars._WidgetXml){var a=b.vars._WidgetXml[0].getAttribute("id")+"_prop_path";ajaxart.cookies.writeCookie(a,"")}},RestorePopupsState:function(d,e,c){var b=c.vars._WidgetXml[0].getAttribute("id")+"_prop_path";var f=ajaxart.cookies.valueFromCookie(b);if(f){var a=aa_path_to_xtml(f,c);if(a){ajaxart.runNativeHelper([a],d,"OpenPropertiesWindow",c)}}},ListenToAltC:function(b,d,a){var c=false;if(!jBart.studiobar.altCListener){jQuery(document).keydown(function(f){if(event.keyCode==18){c=true}if(f.keyCode==67&&c){jBart.studiobar.altCListener()}if(f.keyCode==78&&c){jBart.studiobar.altNListener()}});jQuery(document).keyup(function(e){c=false})}jBart.studiobar.context=a;jBart.studiobar.altCListener=function(){ajaxart.runComponent("bart_dt.Inspect",[],a)};jBart.studiobar.altNListener=function(){ajaxart.runComponent("bart_dt.InspectInfra",[],a)}},SetSelectedStudiobarObject:function(b,c,a){jBart.studiobar.object=jBart.studiobar.objectFromXtml(aa_first(c,b,"Xtml",a))},Inspect:function(b,c,a){jBart.studiobar.context=a;bartdt_captured_element=jQuery([]);window.bartdt_capture_level=aa_text(c,b,"Level",a);aa_incapture=true;if(window.captureEvents){window.onclick=bartdt_capture_click;window.onmousemove=bartdt_capture_mousemove;window.onmousup=bartdt_capture_mouseup;window.onmousdown=bartdt_capture_mousedown;window.onkeydown=bartdt_capture_keydown;if(window.addEventListener){window.addEventListener("DOMMouseScroll",bartdt_capture_mousewheel,false)}window.onmousewheel=bartdt_capture_mousewheel}else{document.onclick=bartdt_capture_click;document.onmousemove=bartdt_capture_mousemove;document.onkeydown=bartdt_capture_keydown;document.onmousup=bartdt_capture_mouseup;document.onmousdown=bartdt_capture_mousedown;document.onmousewheel=bartdt_capture_mousewheel}return[]},InputOfCustomXtml:function(b,c,a){if(!ajaxart.isxml(c)){return[]}var d=c[0];var k="";var f=d;var e=null;f=f.parentNode;while(f!=null){if(f.tagName=="Field"){var h=f.getAttribute("Path");if(h&&h!=""){k=h+"/"+k}}if(f.tagName=="Page"){e=aa_first([],f,"",a);break}f=f.parentNode}var g=ajaxart.runNativeHelper([e],b,"PageInput",a);if(k!=""&&k.charAt(k.length-1)=="/"){k=k.substring(0,k.length-1)}if(k!=""&&g.length>0){g=aa_xpath(g[0],k)}return g},ResourcesContext:function(d,f,c){var a=ajaxart.newContext();var k=ajaxart_bart_getContext(c);try{var h=k.Resources;for(var b=0;b<h.length;b++){a.vars[ajaxart.totext_array(h[b].ID)]=h[b].Items}}catch(g){}return[a]},PagesPopupLocation:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(f){jQuery(this.Frame).show();var e=jQuery(".fld_toolbar_more_button")[0];this.Frame.style.left=ajaxart.ui.absoluteLeft(e)-Math.floor(this.Frame.offsetWidth/2)+"px";this.Frame.style.top=ajaxart.ui.absoluteTop(e)+e.offsetHeight+"px";this.Frame.style.position="fixed"}},StudioPopupLocation:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(m){jQuery(this.Frame).show();if(m){this.Frame.style.right="3px";this.Frame.style.top="52px";this.Frame.style.position="fixed"}var e=aa_text(c,b,"Popup",a)=="properties"?"aa_studio_tree":"aa_studio_properties";var g=jQuery("."+e);if(g.length){var f=parseInt(this.Frame.style.right.split("px")[0]);var k=f+this.Frame.offsetWidth;var h=parseInt(g[0].style.right.split("px")[0]);var l=h+g[0].offsetWidth;if(l>=f&&h<=k){if(h>this.Frame.offsetWidth){this.Frame.style.right="3px"}else{this.Frame.style.right=l+5+"px"}}}}},PopupTreeLocation:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(n){var m=40;var l=50;var f=jQuery(this.Frame);if(jQuery(".aa_inspect_popup").length>0){var k=aa_int(c,b,"Padding",a);var h=jQuery(".aa_inspect_popup")[0];f.show();var e=ajaxart_screen_size();var g=ajaxart.ui.absoluteLeft(h);if(g+h.offsetWidth+this.Frame.offsetWidth+k<e.width){l=g+h.offsetWidth+k+"px"}else{l=g-this.Frame.offsetWidth-k+"px"}m=h.style.top}this.Frame.style.top=m;this.Frame.style.left=l;this.Frame.style.position="fixed";f.show()}},XtmlToJSon:function(c,d,b){var a=aa_first(d,c,"Xtml",b);return[aa_xtml_to_json(a,"")]},PathToXtml:function(c,d,b){var e=aa_text(d,c,"FieldPath",b);var a=aa_path_to_xtml(e,b);return a?[a]:[]},XtmlToPath:function(c,d,b){var a=aa_first(d,c,"Xtml",b);return[aa_xtml_to_path(a)]}};function aa_path_to_xtml(g,f){var c=g.split("/");var a=c[0];if(!a){return null}var d=f.vars._BartContext[0].AppXtml[0];page=aa_xpath(d,"../../Component[@id='"+a+"']/xtml")[0];if(!page){page=aa_xpath(d,"Pages/Page[@ID='"+a+"']")[0]}if(!page){return null}var b="";for(var e=1;e<c.length;e++){if(e>1){b+="/"}b+="Field[@ID='"+c[e]+"']"}return b!=""?aa_xpath(page,b)[0]:page}function aa_xtml_to_path(a){var b="";for(current=a;current!=null;current=current.parentNode){if(!current.getAttribute("ID")){return""}if(b!=""){b="/"+b}b=current.getAttribute("ID")+b;if(aa_tag(current)=="xtml"||aa_tag(current)=="Page"){break}}return b}function aa_xtml_to_json(f,c,h){var a={};for(var b=f.firstChild;b!=null;b=b.nextSibling){if(b.nodeType!=1){continue}var l=aa_tag(b);if(a[l]){a[l].Count++}else{a[l]={Count:1,Written:0}}}var d=c;if(!h){d+=aa_tag(f)+": "}d+="{ ";var g=true;for(var e=0;e<f.attributes.length;e++){if(g){g=false}else{d+=", "}d+=f.attributes[e].nodeName+':"'+f.attributes[e].nodeValue+'"'}if(f.getAttribute("t")=="xml.Xml"||f.getAttribute("t")=="ui.Html"){d+="\r"+c+" ";return d+', Xml: "'+ajaxart.xml.prettyPrint(ajaxart.childElem(f,"*"),"",true).replace('"','"')+'" }'}for(var b=f.firstChild;b!=null;b=b.nextSibling){if(b.nodeType==1){if(g){g=false}else{d+=", "}d+="\r"+c;var k=a[aa_tag(b)];if(k.Count>1&&k.Written==0){d+=aa_tag(b)+": [ \r"}d+=aa_xtml_to_json(b,c+" ",k.Count>1);k.Written++;if(k.Count>1&&k.Written==k.Count){d+=" ]"}}if(b.nodeType==4){return d.substring(0,d.length-2)+'"'+b.nodeValue+'"'}}d+=" }";return d}function aa_find_top_widget(){var a=jQuery(".gallery_runtime_screen");if(a.length==0){a=jQuery(".aa_preview")}if(a.length==0){a=jQuery(".aa_widget")}return a}aa_gcs("jbart_wizards_dt",{HandleDataSourceChange:function(c,e,b){var a=aa_text(e,c,"DataSourceUrl",b);if(a==""){return[]}jQuery(".feedback_image").attr("src","images/loading.gif").css("height","16px");var d=function(f){var g=jbart_data(f,"single");if(g&&g.length>0&&!ajaxart.ishtml(g)){jQuery(".feedback_image").attr("src","images/studio/yes.gif");ajaxart.run(g,c,"OnSuccess",b)}else{jQuery(".feedback_image").attr("src","images/studio/failure.png").attr("title",f)}};jQuery.ajax({type:"POST",url:"get.php",cache:false,data:{contents:a},success:d,error:function(){jQuery(".fld_DataFeedback").text("loading failed")}})},GuessPathsFromXml:function(e,f,d){var k=aa_first(f,e,"Item",d);var c=aa_first(f,e,"WizardData",d);if(!k||k.nodeType!=1||c.nodeType!=1){return}var h=k.attributes;for(var g=0;g<h.length;g++){var b=k.attributes.item(g).name.toLowerCase();if(b=="title"||b=="name"){c.setAttribute("title","%@"+k.attributes.item(g).name+"%")}if(b=="link"||b=="path"){c.setAttribute("link","%@"+k.attributes.item(g).name+"%")}if(b.indexOf("image")>-1||b.indexOf("photo")>-1){c.setAttribute("image","%@"+k.attributes.item(g).name+"%")}if(b.indexOf("text")>-1||b.indexOf("description")>-1){c.setAttribute("extra_text","%@"+k.attributes.item(g).name+"%")}}var a=aa_xpath(k,"*");for(var g=0;g<a.length;g++){var l=a[g].tagName;var b=l.toLowerCase();if(b=="title"||b=="name"){c.setAttribute("title","%"+l+"%")}if(b=="link"||b=="path"){c.setAttribute("link","%"+l+"%")}if(b.indexOf("image")>-1||b.indexOf("photo")>-1){c.setAttribute("image","%"+l+"%")}if(b.indexOf("text")>-1||b.indexOf("description")>-1){c.setAttribute("extra_text","%"+l+"%")}}},eBayClean:function(e,g,b){var k=aa_first(g,e,"Xml",b);if(!k){return[]}k=ajaxart.xml.clone([k]);var n=aa_xpath(k,"item");for(var h=0;h<n.length;h++){var q=n[h];var m=aa_totext(aa_xpath(q,"description"));var d=m.split('src="')[1]||"";var f=d.split('"')[0];if(f){f=f.replace(/80.jpg/,"140.jpg");var o=q.ownerDocument.createTextNode(f);var p=q.ownerDocument.createElement("Image");p.appendChild(o);q.appendChild(p)}var l=aa_totext(aa_xpath(q,"CurrentPrice"));var a=l.substring(0,l.length-2);if(a==""){a="0"}l="$"+a+"."+l.substring(l.length-2);var o=q.ownerDocument.createTextNode(l);var c=q.ownerDocument.createElement("Price");c.appendChild(o);q.appendChild(c)}return[k]}});function ajaxart_firstlevel_fields(d){var b=[];for(var c=0;c<d.Fields.length;c++){var a=d.Fields[c];if(a.IsVirtualGroup){ajaxart.concat(b,ajaxart_firstlevel_fields(a))}else{b.push(a)}}return b}function bartdt_subfields(e,g){var b=[];if(!g){g=""}var a=ajaxart.xml.xpath(e,"Field");for(var c=0;c<a.length;c++){var f=a[c];var d={Field:f};var h=f.getAttribute("Path")||"";if(g==""){d.Path=h}else{if(h==""){d.Path=g}else{d.Path=g+"/"+h}}ajaxart.concat(b,bartdt_subfields(f,d.Path));if(d.Field.getAttribute("t")=="field.XmlField"){b.push(d)}}return b}function bartdt_field_bypath(d,f){var a=ajaxart.xml.xpath(d,"Field");for(var c=0;c<a.length;c++){var e=a[c];if(e.getAttribute("Path")==f){return e}if(e.getAttribute("t")=="field.XmlField"){if(e.getAttribute("Path")==""){var b=bartdt_field_bypath(e,f);if(b){return b}}if(f.indexOf(e.getAttribute("Path")+"/")==0){return bartdt_field_bypath(e,f.substring(f.indexOf("/"+1)))}}}return null}bartdt_capture_box=null;bartdt_captured_element=null;function bartdt_inspect_element_ispage(c){if(!c.Cntr||!c.ajaxart||!c.ajaxart.params.vars._BartContext){return false}var d=bartdt_element_pageid(c);if(d==""||d=="ItemList"||d=="runtime"){return false}var a=c.ajaxart.params.vars._BartContext[0].Pages;for(var b=0;b<a.length;b++){if(a[b].ID[0]==d){return true}}var e=c.ajaxart.params.vars._BartContext[0].AppXtml[0].parentNode.parentNode;if(aa_xpath(e,"Component[@id='"+d+"']").length>0){return true}return false}function bartdt_element_pageid(a){var b=aa_totext(a.Cntr.ID);if(b.indexOf("__")==b.length-2){b=b.substring(0,b.length-2)}if(bartdt_capture_level=="sample"&&b=="runtime"){return""}return b}function bartdt_element_fieldid(c){if(!c){return""}var b=c.className.split(" ");for(var a=0;a<b.length;a++){if(b[a].indexOf("fld_")==0){return b[a].substring(4)}}return""}function bartdt_capture_mousemove(b){var a=(typeof event!=="undefined")?event.srcElement:b.target;if(a.className=="captureboxtext"){bartdt_capture_box.remove();bartdt_capture_box=null;return true}if(a.id=="capturebox"){a=ajaxart_find_control_at_position(jQuery("body"),b)[0]}jBart.studiobar.originalObjectWhenInspecting=bartdt_capture_mousemove_find_parent(a,jBart.studiobar.originalObjectWhenInspecting)}function bartdt_capture_mouseup(a){return aa_stop_prop(a);return false}function bartdt_capture_mousedown(a){return aa_stop_prop(a);return false}function bartdt_capture_mousewheel(a){var b=0;if(!a){a=window.event}if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=-a.detail/3}}if(b>0){if(jBart.studiobar.objectWhenInspecting){jBart.studiobar.parentObjectWhenInspecting(jBart.studiobar.objectWhenInspecting)}}a.preventDefault();a.returnValue=false}function bartdt_capture_keydown(a){if(a.keyCode==27){bartdt_stop_capture();jQuery(bartdt_capture_box).hide();bartdt_captured_element=jQuery([])}if(a.keyCode==38){if(jBart.studiobar.objectWhenInspecting){jBart.studiobar.parentObjectWhenInspecting(jBart.studiobar.objectWhenInspecting)}}if(a.keyCode==13){bartdt_capture_click()}}function bartdt_capture_click(b){if(!jBart.studiobar.objectWhenInspecting){return}bartdt_stop_capture();if(bartdt_capture_box){bartdt_capture_box.hide()}jBart.studiobar.object=jBart.studiobar.objectWhenInspecting;var a=aa_ctx(jBart.studiobar.context,{_DomEvent:[b]});ajaxart.runComponent("bart_dt.OpenPropertiesWindow",[],a);ajaxart.runComponent("bart_dt.SynchTreePopup",[],a);jBart.studiobar.context=jBart.studiobar.objectWhenInspecting=null;return aa_stop_prop(b)}function bartdt_stop_capture(){jBart.studiobar.originalObjectWhenInspecting=null;aa_incapture=false;if(window.captureEvents){window.captureEvents(Event.Click);window.onclick=null;window.onmousemove=null;window.onkeydown=null;window.onmouseup=null;window.onmousedown=null;window.onmousewheel=null;if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",bartdt_capture_mousewheel,false)}}else{document.onclick=null;document.onmousemove=null;document.onkeydown=null;document.onmousedown=null;document.onmousewheel=null}}function aa_isjbart(){if(typeof(aa_jbart)=="undefined"||!aa_jbart){return false}return true}aa_field_dt_dual_options=null;aa_gcs("jbart_studio",{ToggleDesignTimeClass:function(c,d,b){var a=aa_bool(d,c,"DesignTime",b);if(a){jQuery("body").addClass("designtime")}else{jQuery("body").removeClass("designtime")}}});aa_gcs("bart_dt_compress",{DependentFunctions:function(c,f,b){var a=aa_text(f,c,"Code",b);var g=["aa_","ajaxart_","ajaxart.","ajaxart.xml.","ajaxart.cookies.","ajaxart.ui.","ajaxart.dialog.","ajaxart.yesno.","jBart.utils.","jBart.db.","jBart."];var e=[];for(var o in g){var k=g[o];var l=0,h,d,n;while(true){h=a.indexOf(k,l);if(h==-1){break}d=a.indexOf("(",h);if(d==-1){break}var m=a.substring(h+k.length,d);if(m.match(/^[a-zA-Z0-9_]+$/)){e.push(k+m)}l=h+k.length}}return e},JSMinCompress:function(c,f,b){var k=aa_text(f,c,"Script",b);var a=aa_text(f,c,"Level",b);var g=aa_text(f,c,"Comments",b);var l=2;if(a=="minimal"){l=1}else{if(a=="conservative"){l=2}else{if(a=="agressive"){l=3}}}try{var d=jsmin(g,k,l);if(d){return[d]}else{return[]}}catch(h){ajaxart.log("error in js compression "+h.message||h,"error");return[k]}},FindAllPts:function(e,g,d){var c=aa_first(g,e,"Xtml",d);var f=","+aa_text(g,e,"BlackList",d)+",";var a=d.vars.JsInComponents&&d.vars.JsInComponents[0];var b=[];if(c==null||c.nodeType!=1){return[]}function h(k){if(a&&k.nodeType==1){var m=k.getAttribute("Javascript")||k.getAttribute("Code")||aa_cdata_value(aa_xpath(k,"Javascript")[0])||aa_cdata_value(aa_xpath(k,"Code")[0]);if(m&&m.indexOf("%")!=0){a.JSSnippets=a.JSSnippets||{};a.JSSnippets[m]=true}}var l=k.getAttribute("t");if(l&&f.indexOf(","+l+",")==-1){b.push(l)}for(var n=k.firstChild;n;n=n.nextSibling){if(n.nodeType==1){h(n)}}}h(c);return b},CodeSnippets:function(d,e,c){var b=[];var a=aa_first(e,d,"JsInComponents",c);if(!a||!a.JSSnippets){return b}for(var f in a.JSSnippets){if(a.JSSnippets[f]==true){b.push(f)}}return b},CompressComponent:function(d,f,c){var a=aa_first(f,d,"Component",c);var b=aa_createElement(a,"C");b.setAttribute("id",a.getAttribute("id"));if(a.getAttribute("execution")){b.setAttribute("execution",a.getAttribute("execution"))}for(var e=a.firstChild;e!=null;e=e.nextSibling){if(e.nodeType==1){if(aa_tag(e)!="Param"){b.appendChild(aa_importNode(e,b))}else{var g=aa_createElement(b,"Param");g.setAttribute("name",e.getAttribute("name"));if(e.getAttribute("script")){g.setAttribute("script",e.getAttribute("script"))}var h=ajaxart.childElem(e,"Default");if(h!=null){g.appendChild(aa_importNode(h,g))}b.appendChild(g)}}}return[b]},FunctionDefinition:function(profile,data,context){var name=aa_text(data,profile,"Name",context);var func="";try{func=""+eval(name)}catch(e){}return[func]}});function bartdt_capture_mousemove_find_parent(e,b){var c=jBart.studiobar.objectFromElement(e);if(c&&b&&c.Elements[0]==b.Elements[0]){return b}jBart.studiobar.objectWhenInspecting=c;if(!c){if(bartdt_capture_box){bartdt_capture_box.hide()}return}if(bartdt_capture_box==null){bartdt_capture_box=jQuery('<div class="capturebox" ><div class="top"> <div class="captureboxtext"></div> </div><div class="right"/><div class="bottom"/><div class="left"/></div>');bartdt_capture_box.appendTo("body")}jQuery(bartdt_capture_box).find(".captureboxtext").html(c.Title);var g=c.Elements[0];var f={x:ajaxart.ui.absoluteLeft(g),y:ajaxart.ui.absoluteTop(g)};var d=jQuery(g).outerWidth();var a=jQuery(g).outerHeight();jQuery(bartdt_capture_box).find(".top").css("left",f.x-2).css("top",f.y-3).width(d+5);jQuery(bartdt_capture_box).find(".bottom").css("left",f.x-2).css("top",f.y+a).width(d+5);jQuery(bartdt_capture_box).find(".left").css("left",f.x-3).css("top",f.y-2).height(a+5);jQuery(bartdt_capture_box).find(".right").css("left",f.x+d).css("top",f.y-2).height(a+5);bartdt_capture_box.show();return c}jBart.studiobar.pageId2pageXtml=function(b){if(b==""||b=="ItemList"||b=="runtime"){return null}if(!jBart.studiobar.context.vars._WidgetXml){return""}var d=jBart.studiobar.context.vars._WidgetXml[0];var c=aa_xpath(d,"bart_dev")[0]||d;var a=aa_xpath(c,"db/bart_unit/bart_unit/Component[@id='"+b+"']/xtml");if(a.length>0){return a[0]}a=aa_xpath(c,"db/bart_unit/bart_unit/Page[@id='"+b+"']");if(a.length>0){return a[0]}return null};jBart.studiobar.isXtmlInWidget=function(a){if(!a){return false}var b=(a.nodeType==2)?aa_xpath(a,"..")[0]:a;for(;b&&b.nodeType==1;b=b.parentNode){if(b.tagName&&b.tagName=="bart_sample"&&b.getAttribute("_type")=="bart_sample"){return true}if(b.tagName&&b.tagName=="jbart_project"&&b.getAttribute("_type")=="jbart_project"){return true}if(b.tagName&&b.tagName=="bart_dev"&&b.getAttribute("id")!="bartgallery"){return true}}return false};jBart.studiobar.objectFromXtml=function(a){var b={isObject:true,Xtml:a};if(a.nodeType==1&&a.tagName=="Field"){b.Elements=jBart.studiobar.ElementsFromXtml(a);if(b.Elements[0]){b.Field=b.Elements[0].Field;b.Title=b.Field&&b.Field.Title;b.Data=b.Elements[0].Data||b.Elements[0].FieldData}}jBart.studiobar._addRefreshMethod(b);return b};jBart.studiobar.ElementsFromXtml=function(a){var g=a.getAttribute("ID");if(!g){return[]}var b=jQuery(".fld_"+g);var d=[];for(var c=0;c<b.length;c++){try{if(b[c]&&b[c].Field&&b[c].Field.XtmlSource&&b[c].Field.XtmlSource[0].script==a){d.push(b[c])}else{if(b[c]&&b[c].ajaxart&&b[c].ajaxart.script==a){d.push(b[c])}}}catch(f){}}if(!d.length&&(a.parentNode&&a.parentNode.getAttribute("type")=="jbart.MyWidgetPage")||aa_tag(a)=="Page"){b=jQuery(".Page_"+g);for(var c=0;c<b.length;c++){d.push(b[c])}}return d};jBart.studiobar._addRefreshMethod=function(a){a.Refresh=function(h,e){var c=this.Xtml;if(e.vars.RefreshParent&&e.vars.RefreshParent[0]=="true"){c=c.parentNode}var k=30;var b="StudioRefresh "+c.getAttribute("id");aa_cancel_delayed_action(b);var f=jBart.studiobar.ElementsFromXtml(c);if(f.length==0){for(var g=c;!f.length&&g&&aa_tag(g)!="Component";g=g.parentNode){f=jBart.studiobar.ElementsFromXtml(g)}}if(f.length==0&&c.getAttribute("ID")){f=jQuery(".fld_"+c.getAttribute("ID"))}if(f.length==0&&jBart.studiobar.context){jBart.studiobar.context.vars._BartDevDtContext[0].Refresh([],jBart.studiobar.context);return}if(f[0]&&f[0].Field){function d(p,m){var o=new Date().getTime();for(var n=p;n<m.length;n++){if((new Date().getTime()-o)>k){aa_run_delayed_action(b,function(){d(n,m)});return}elem=m[n];if(elem.Field){if(elem.Field.XtmlSource){var l=elem.Field.XtmlSource[0];var q=aa_first(l.input,l.script,"",l.context);q.counter=++ajaxart.unique_number;if(q){var r=jQuery(elem).hasClass("aa_cell_element")?elem:jQuery(elem).parents(".aa_cell_element")[0];if(r&&r.Field==elem.Field){r.Field=q}elem.Field=q}}aa_refresh_cell(elem,elem.jbContext)}}}d(0,f)}else{if(f[0]&&f[0].Cntr&&f[0].ajaxart){jBart.utils.refresh(f[0])}}}};jBart.studiobar.objectFromElement=function(c){for(var d=c;d&&d.nodeType==1;d=d.parentNode){var b={isObject:true,Elements:[d],Field:d.Field};jBart.studiobar._addRefreshMethod(b);if(d.Field&&d.Field.XtmlSource){b.Field=d.Field;b.Xtml=d.Field.XtmlSource[0].script;var e=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!e)||(bartdt_capture_level=="infra"&&e)){continue}if(b.Xtml.nodeType==1&&b.Xtml.getAttribute("t")=="field.AddFieldsHere"){continue}b.Data=d.Data||d.FieldData;b.Title=d.Field.Title;return b}if(d.Cntr){var a=aa_totext(d.Cntr.ID);if(a.indexOf("__")==a.length-2){a=a.substring(0,a.length-2)}b.Xtml=jBart.studiobar.pageId2pageXtml(a);if(!b.Xtml){continue}var e=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!e)||(bartdt_capture_level=="infra"&&e)){continue}b.Data=d.Cntr.Items.Items;b.Title="Page "+a;return b}if(jQuery(d).hasClass("aa_operation")){b.Xtml=d.ajaxart.data[0].XtmlSource[0].script;var e=jBart.studiobar.isXtmlInWidget(b.Xtml);if((bartdt_capture_level!="infra"&&!e)||(bartdt_capture_level=="infra"&&e)){continue}b.Data=[];b.Title=d.ajaxart.data[0].Id;return b}}return null};jBart.studiobar.showObjectElements=function(a){var c=jQuery('<div class="jbstudio_show_objects" />');if(!a.Elements){return}for(var b=0;b<a.Elements.length;b++){var e=jQuery('<div class="jbstudio_show_object"/>');var d=a.Elements[b];var f={x:ajaxart.ui.absoluteLeft(d),y:ajaxart.ui.absoluteTop(d)};e.css("position","absolute").css("left",f.x).css("top",f.y).width(jQuery(d).outerWidth()).height(jQuery(d).outerHeight());c.append(e)}c.fadeTo("1000",0.5,function(){c.fadeTo("1000",0,function(){c.remove()})});jQuery("body").append(c)};jBart.studiobar.parentObjectWhenInspecting=function(a){var c=a.Elements[0];while(c){var b=jBart.studiobar.objectFromElement(c);if(!b){return}if(b.Xtml!=a.Xtml){bartdt_capture_mousemove_find_parent(c);return}c=c.parentNode}};aa_gcs("jbart_studio",{JBartStudioObject:function(c,e,b){var f=ajaxart.runNativeHelper(e,c,"Object",b)[0];var d=f.UseJBartDB=(window.CloudJBartStudio)?"true":ajaxart.urlparam("jbartdb")=="true";var a=f.ContentType=ajaxart.urlparam("contenttype")||"jbart_project";f.BaseUrl=f.UseJBartDB?"http://jbartdb.appspot.com/bart.php":"bartdev.php";f.LoadUserID=function(g,h){if(window.location.href.indexOf("artwaresoft.com")>-1){ajaxart_async_Mark(h);jQuery.ajax({url:"User",success:function(k){if(k.nodeType==9){k=k.firstChild}f.User=jQuery(k).text();ajaxart_async_CallBack([],h)},error:function(){ajaxart_async_CallBack([],h)}})}else{f.User=ajaxart.cookies.valueFromCookie("jbart_studio_user")}};f.SignOut=function(h,k){ajaxart.cookies.writeCookie("jbart_studio_user","");if(window.location.href.indexOf("artwaresoft.com")>-1){var g=window.location.href;window.location.href="http://buss-art.appspot.com/_ah/openid_logout?continue="+g}else{document.location.reload(true)}};f.CloneCurrentProject=function(g,h){f.NodeToClone=f.Project;f.CloneCounter=0;f.BaseNameForClone=f.BaseDisplayNameForClone="";f._AllocateCloneID()};f._JSLoadProject=function(g){var h={};h.success=function(k){if(k.nodeType==9){k=k.firstChild}if(k.getAttribute("_type")!=a){g.error();return}g.success(k)};h.error=function(){g.error()};if(d){h.contentType=a;h.id=g.id;jBart.db.get(h)}else{h.cache=false;h.type="GET";h.url="bartdev.php?op=loadnode&contenttype="+a+"&id="+g.id;jQuery.ajax(h)}};f.ClonePrototype=function(g,h){f.NodeToClone=null;f.CloneCounter=0;f.BaseNameForClone="";if(!f.UseJBartDB){f.BaseDisplayNameForClone=prompt("Select a name for your new project (localhost only)","");f.BaseNameForClone=aa_string2id(f.BaseDisplayNameForClone)}f.ShowProgressIndicator([{Text:"Creating a new widget - loading prototype",Status:"info"}],b);f._JSLoadProject({id:jQuery(g).attr("id"),success:function(k){f.NodeToClone=k;f.ShowProgressIndicator([{Text:"Creating a new widget - allocating widget id",Status:"info"}],b);f._AllocateCloneID()},error:function(){alert("could not create a new project")}})};f._AllocateCloneID=function(){if(!f.BaseNameForClone){if(f.User){f.BaseNameForClone=f.User+"_"}else{f.BaseNameForClone=""}f.BaseNameForClone+=jQuery(f.NodeToClone).attr("id")+Math.floor(Math.random()*100)}if(f.CloneCounter==10){alert("could not create a new project");return}f.CloneCounter++;var k=f.BaseNameForClone;if(f.CloneCounter>1){k+=f.CloneCounter}var h={};h.success=function(l){if(l.nodeType==9){l=l.firstChild}if(l.getAttribute("reason")=="node does not exist"){g()}else{f._AllocateCloneID()}};h.error=function(l){if(l.code=="node does not exist"){g()}else{alert("could not create a new project")}};if(d){h.contentType=a;h.id=k;jBart.db.get(h)}else{h.cache=false;h.type="GET";h.url="bartdev.php?op=loadnode&contenttype="+a+"&id="+k;jQuery.ajax(h)}function g(){f.ProjectID=k;f.Project=f.NodeToClone;var l=jQuery(f.Project);l.attr("vid","1").attr("id",k).attr("type","widget").attr("_wusers","");if(d){l.attr("name","my "+l.attr("name"))}else{l.attr("name",f.BaseDisplayNameForClone||f.BaseNameForClone)}f.ShowProgressIndicator([{Text:"Creating a new widget - saving new widget",Status:"info"}],b);f._SaveClone()}};f._SaveClone=function(){var g={};g.success=function(h){f.ShowProgressIndicator([],b);f._AddProjectToMyProjects(e,b);f.EditProject([f.ProjectID],b)};g.error=function(h){f.ShowProgressIndicator([],b);alert("could not create a new project")};if(d){g.data=f.Project;jBart.db.save(g)}else{g.cache=false;g.type="POST";g.contentType="application/x-www-form-urlencoded; charset=UTF-8";g.url="bartdev.php?op=savenode";g.data=ajaxart.xml2text(f.Project);g.httpHeaders=[];jQuery.ajax(g)}};f.ShowProjectPreview=function(g,h){var n=aa_totext(g);var l=jQuery("<div>Loading Widget...</div>")[0];if(this.Projects&&this.Projects.length>0){for(var m=0;m<this.Projects.length;m++){if(this.Projects.getAttribute("id")==n){k(this.Projects[m])}}}else{f._JSLoadProject({id:n,success:k,error:k});return[l]}function k(o){var p=o&&f._ShowProjectForPreview([o],h)[0];if(p){l.removeChild(l.firstChild);l.appendChild(p);aa_element_attached(p)}else{l.innerHTML="Could not show widget preview"}}return[l]};f.OpenProjectInNewTab=function(g,l){var k=aa_totext(g);var h=window.location.href.split("#")[0]+"#?project="+k;window.open(h,"_blank")};f.UploadProject=function(g,h){var k=aa_totext(g);if(!k){return}ajaxart_async_Mark(h);f._JSLoadProject({id:k,success:function(m){var l=aa_ctx(h,{_Project:[m]});var n=jBart.parsexml('<Xtml t="jbart_studio.ProjectWithJBartSources" Project="%$_Project%" />');var o=aa_first([],n,"",l);o.setAttribute("_vid","force");jBart.db.save({data:o,success:function(){ajaxart_async_CallBack([],h)},error:function(){ajaxart.log("could not upload "+k,"error");ajaxart_async_CallBack([],h)}})},error:function(){ajaxart.log("could not upload "+k,"error");ajaxart_async_CallBack([],h)}})};return[f]},IsInArtwaresoft:function(b,c,a){if(window.location.href.indexOf("artwaresoft.com")>-1){return["true"]}},DoSignup:function(d,e,b){var a=aa_first(e,d,"UserData",b);var f=b.vars._JBartStudio[0];var c={cache:false,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{userdata:ajaxart.xml2text(a)},httpHeaders:[],url:f.BaseUrl+"?op=signup"};c.success=function(g){if(g.nodeType==9){g=g.firstChild}if(g.getAttribute("type")=="failure"){b.vars._AsyncCallback.success=false;ajaxart.run([g.getAttribute("reason")],d,"OnFailure",b)}else{ajaxart.run(a,d,"OnSuccess",b)}ajaxart_async_CallBack([],b)};c.error=function(){b.vars._AsyncCallback.success=false;ajaxart.run(["no connection"],d,"OnFailure",b);ajaxart_async_CallBack([],b)};ajaxart_async_Mark(b);jQuery.ajax(c)},MyWidgets:function(profile,data,context){var studioObject=context.vars._JBartStudio[0];if(studioObject.User){return ajaxart.runNativeHelper(data,profile,"InUser",context)}else{var result=ajaxart.cookies.valueFromCookie("bartstudio_mywidgets");var out=ajaxart.parsexml("<MyWidgets />");try{if(result){eval("var mywidgets = "+result);for(var i=0;i<mywidgets.length;i++){var projXml=jQuery("<project />").attr("id",mywidgets[i].id).attr("name",mywidgets[i].name).attr("relation",mywidgets[i].relation)[0];ajaxart.xml.append(out,projXml)}}}catch(e){}return[out]}},RecentProjects:function(profile,data,context){var out=jBart.parsexml("<recent/>");var cookieVal=ajaxart.cookies.valueFromCookie("bartstudio_recent_projects","[]");try{eval("var result = "+cookieVal+";")}catch(e){alert(cookieVal);ajaxart.cookies.writeCookie("bartstudio_recent_projects","[]");return[]}for(var i=result.length-1;i>=0;i--){var item=result[i];if(!item||!item.id){continue}var xml=jBart.parsexml("<project/>");jQuery(xml).attr("id",item.id).attr("name",item.name).attr("_type",item._type);out.appendChild(xml)}return[out]},AddToRecentProjects:function(profile,data,context){var project=aa_first(data,profile,"Project",context);if(!project){return}var id=project.getAttribute("id");var cookieVal=ajaxart.cookies.valueFromCookie("bartstudio_recent_projects")||"[]";try{eval("var result = "+cookieVal)}catch(e){var result=[]}if(result.length>7){delete result[result.length-1]}for(var i=0;i<result.length;i++){if(result[i]&&result[i].id==id){return}}result.push({id:project.getAttribute("id"),name:project.getAttribute("name"),_type:project.getAttribute("_type")});var newcookie="[";for(var i=0;i<result.length;i++){if(!result[i]){continue}newcookie+=(i==0)?"{":",{";var first=true;for(var j in result[i]){if(!first){newcookie+=","}newcookie+=j+':"'+result[i][j].replace('"','"')+'"';first=false}newcookie+="}"}newcookie+="]";ajaxart.cookies.writeCookie("bartstudio_recent_projects",newcookie)},WriteToMyWidgets:function(d,e,c){var f=c.vars._JBartStudio[0];if(f.User){return ajaxart.runNativeHelper(e,d,"WriteToUser",c)}else{var a=aa_xpath(aa_first(e,d,"MyWidgets",c),"project");var h="[";for(var b=0;b<a.length;b++){var g=jQuery(a[b]);h+='{ id: "'+g.attr("id")+'",name:" '+g.attr("name").replace('"','"')+'"}'}h+="]";ajaxart.cookies.valueFromCookie("bartstudio_mywidgets",h)}},HasSavePermissions:function(c,d,b){var e=b.vars._JBartStudio[0];var f=e.Project;if(!f.getAttribute("_wusers")){return["true"]}var g=","+f.getAttribute("_wusers")+",";var a=","+e.User+",";if(g.indexOf(a)>-1){return["true"]}},LoadExternalJS:function(profile,data,context){var files=ajaxart.run(data,profile,"ExternalJsFiles",context);ajaxart_async_Mark(context);var isCloud=context.vars._JBartStudio[0].UseJBartDB;var index=0;function loadNextJsFile(){if(index>=files.length){return ajaxart_async_CallBack([],context)}var file=jQuery(files[index]);var url=file.attr("file_name");url=isCloud?file.attr("cloud_base_url")+url:file.attr("local_base_url")+url;url+=(url.indexOf("?")==-1)?"?":"&";url+="_="+(new Date()).getTime();var isReadyJS=file.attr("load_condition");if(!isReadyJS){jQuery.getScript(url,function(){index++;loadNextJsFile()});return}if(isReadyJS.indexOf("function")==-1){if(isReadyJS.indexOf("return")==-1){isReadyJS="function() { return "+isReadyJS+" != null; }"}else{isReadyJS="function() { "+isReadyJS+"}"}}try{eval("var isReadyFunc = "+isReadyJS)}catch(e){ajaxart.logException("error in load condition "+isReadyJS,e);isReadyFunc=function(){return true}}function checkReady(firstTime){try{if(isReadyFunc()){index++;loadNextJsFile();return}}catch(e){}if(firstTime){aa_load_js_css(url,"js")}setTimeout(checkReady,100)}checkReady(true)}loadNextJsFile()}});function aadt_calcPrimitivePreviewContext(f,l,b){var c=aadt_findTopPageXtml(f);var m=c;var a=[];var d=ajaxart.newContext();d.vars._BartContext=b.vars._BartContext;d.vars._GlobalVars=b.vars._GlobalVars;var k=aadt_previewXtmlToTrace(f,l);var n=k.Xtml;aadt_putXtmlTraces(n);ajaxart.inPreviewMode=true;try{var h=ajaxart.run(a,m,"",d)[0];if(h){h.Control([],d)}}catch(g){}ajaxart.inPreviewMode=false;if(k.Cleanup){k.Cleanup()}if(ajaxart.xtmls_to_trace[0].results.length>0){var o=ajaxart.xtmls_to_trace[0].results}else{var o=aaeditor.find_preview_context_over_gap()}ajaxart.xtmls_to_trace=[];return o}function aadt_previewXtmlToTrace(b,c){var a=aa_xpath(b,"@"+c)[0]||aa_xpath(b,c)[0];if(a){return{Xtml:a}}b.setAttribute(c,"");return{Xtml:aa_xpath(b,"@"+c)[0],Cleanup:function(){b.removeAttribute(c)}}}function aadt_putXtmlTraces(b){ajaxart.xtmls_to_trace=[];var a=b;while(a!=null&&a.tagName!="Component"&&a.tagName!="Usage"){ajaxart.xtmls_to_trace.push({xtml:a,results:[]});a=ajaxart.xml.parentNode(a)}}function aadt_findTopPageXtml(b){if(b.nodeType==2){b=aa_xpath(b,"..")[0]}for(var a=b;a&&a.nodeType==1;a=a.parentNode){if(a.tagName=="Component"&&a.getAttribute("type")=="jbart.MyWidgetPage"){return aa_xpath(a,"xtml")[0]}}return null}ajaxart.gcs.tree={RefreshNode:function(f,g,e){var h=aa_text(g,f,"Depth",e);var a=g[0];var b=ajaxart_treeitem_data(a);var d=ajaxart_runevent(b,"TreeContext","NextLevel");var c=jQuery(a).find("ul");c.html("");ajaxart_tree_addChildren(c[0],d,f,g,e,h)},AddChildren:function(c,f,d){var e=ajaxart.getVariable(d,"InputForChanges");var g=ajaxart.run(f,c,"TreeViewCls",d);var b=ajaxart.run(e,c,"Children",d);var a=jQuery(f);if(a.hasClass(g)){var h=a}else{var h=a.parents("."+g)}a.css("display","block");var k=jQuery(b).appendTo(a);h.treeview({add:k});return f},InternalAfterAddingItem:function(d,f,b){var e=aa_first(f,d,"Item",b);if(e==null){return[]}var a="treeview";var g=jQuery(e);if(g.find(".hitarea").length>0){return[]}if(g.hasClass(a)){var c=g}else{var c=g.parents("."+a)}g.css("display","block");c.treeview({add:jQuery(e)});return["true"]},SelectFirst:function(d,e,c){var b=jQuery(e[0]).find(".treeitem_text");var a=ajaxart_tree_find_databound_elem(b[0]);if(a!=null){ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a)}return["true"]},InternalRefreshAddingItem:function(f,k,c){var q=aa_first(k,f,"AboveUL",c);var r=ajaxart.run(k,f,"NewItems",c);if(q==null){return[]}var d=false;if(jQuery(q).find(">ul").length>0){var a=jQuery(q).find(">ul")[0]}else{d=true;var a=document.createElement("ul");a.clasName="treeul";ajaxart.xml.append(q,a)}if(a==null){return[]}var s=jQuery(a).find(">li");var e=r.length-s.length;for(var h=0;h<r.length;h++){if(e==0){break}var b=null;if(h<s.length&&s[h].ajaxart.data.length>0){var l=r[h];var n=s[h].ajaxart.data[0];if(n!=l){b=s[h]}}if(s.length<=h||b!=null){var m=null;if("ajaxart" in a){m=a.ajaxart.params}else{m=a.parentNode.ajaxart.params}var g=aa_first([r[h]],f,"NewNodeItem",m);if(g!=null){if(b==null){ajaxart.xml.append(a,g)}else{a.insertBefore(g,b)}ajaxart.run([g],f,"OnNewItem",c);var o=jQuery(a);if(!o.hasClass("treeview")){o=o.parents(".treeview")}o.treeview({add:jQuery(g)})}e--}}if(d){var p=jQuery(q);jQuery(q).parents(".treeview").treeview({add:p})}return["true"]},SelectItem:function(c,e,b){var d=aa_first(e,c,"Item",b);if(d==null){return[]}var a=ajaxart_tree_find_databound_elem(d);ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a);ajaxart_runevent(a,"TreeContext","OnSelect");return["true"]},OpenAllNodes:function(c,e,b){var d=aa_int(e,c,"MaxDepth",b);if(isNaN(d)||typeof(d)!="number"){d=10}var a=e;if(a.length==0||!ajaxart.ishtml(a[0])){a=ajaxart.getControlElement(b)}if(a.length==0){return[]}var k=a[0];for(var f=0;f<d;f++){var g=jQuery(k).find(".expandable .hitarea");if(g.length==0){break}for(var h=0;h<g.length;h++){jQuery(g[h]).click()}}return["true"]},DeleteSelected:function(f,h,d){var b=ajaxart.getControlElement(d);var e=jQuery(b).find(".selected").parent();if(e.length==1){var g=e[0];var a=g.nextSibling;if(a==null){a=g.previousSibling}if(a==null){var c=jQuery(g).parents(".treeitem");if(c.length>0){a=c[0]}}g.parentNode.removeChild(g);if(a!=null){jQuery(a).find(">span").addClass("selected");xFireEvent(a,"click",null)}}return["true"]},SelectTreeNodeByPath:function(d,g,a){var b=ajaxart.run(g,d,"PathItems",a);var c=jQuery(ajaxart.getControlElement(a)).find(".tree_wrapper");for(var h=0;h<b.length;h++){if(c.hasClass("expandable")){c.find(">.hitarea").trigger("click")}var k=jQuery(c).children("ul").children("li");var l=false;for(var f=0;f<k.length;f++){if(jQuery(k[f]).children(".treeitem_text").find(".treeitem_text_content").text()==ajaxart.totext(b[h])){c=jQuery(k[f]);l=true;break}}if(!l){return[]}}var e=jQuery(c).children(".treeitem_text")[0];ajaxart_css_selection(e,"treeview");ajaxart_selectionchanged(e);return[]},TreeNodeByPath:function(d,g,c){var l=aa_text(g,d,"TreePath",c);var a=jQuery(ajaxart.getControlElement(c)).find(".tree_wrapper");if(a.length==0){return[]}var m=a[0];var b=l.split("/");var n=m;for(var f=0;f<b.length;f++){var k=false;var h=jQuery(n).find(">ul>li");for(var e=0;e<h.length;e++){if(jQuery(h[e]).find(">span").find(".treeitem_text_content").text()==b[f]){k=true;n=h[e]}}if(!k){return[]}}return[n]},PathOfSelectedItem:function(c,f,b){var a=ajaxart.getControlElement(b);if(a.length==0){return[]}var l=a[0];var d=jQuery(l).find(".selected");var k="";var g=d.parents(".treeitem").find(">span");for(var e=0;e<g.length;e++){var h=jQuery(g[e]).find(".treeitem_text_content").text();if(k!=""){k=h+"/"+k}else{k=h}}return[k]},PickTreeRoots:function(c,e,b){if(e.length==0){return[]}var k=ajaxart.xml.xpath(e[0],"Value");var d={};var l=[];for(var f=0;f<k.length;f++){var h=k[f];var a=h.getAttribute("category");if(a==null){l.push(h.getAttribute("val"))}else{var g=a.split(".")[0];if(d[g]==undefined){l.push(g);d[g]=true}}}return l}};ajaxart_tree_keydown=function(a){if(a.keyCode==40||a.keyCode==38){ajaxart_stop_event_propogation(a)}};ajaxart_tree_event=function(e){var c=(typeof(e.target)=="undefined")?e.srcElement:e.target;if(jQuery(c).hasClass("hitarea")){return}if(e.type=="keyup"){var f=jQuery(c).parents(".tree_top").find(".selected");if(f.length>0){c=f[0]}}var a=ajaxart_tree_find_databound_elem(c);var b=false;if(a!=null){if(e.type=="click"){ajaxart_css_selection(a,"treeview");ajaxart_selectionchanged(a);ajaxart_runevent(a,"TreeContext","OnSelect");b=true;if(window.captureEvents&&window.onmousedown!=null){window.onmousedown(e)}if(!window.captureEvents&&document.onmouseclick!=null){document.onmouseclick(e)}}else{if(e.type=="dblclick"){ajaxart_runevent(a,"TreeContext","OnDoubleClick")}else{if(e.type=="keyup"){if(e.keyCode==13&&!e.ctrlKey){ajaxart_runevent(a,"TreeContext","OnDoubleClick")}if(e.keyCode==46){ajaxart_runevent(a,"TreeContext","OnDelete")}if(e.keyCode==40){ajaxart_stop_event_propogation(e);ajaxart_tree_move_cursor(a,1,e.altKey)}if(e.keyCode==38){ajaxart_tree_move_cursor(a,-1,e.altKey)}if(e.keyCode==39||e.keyCode==37){var d=(e.keyCode==39);if(jQuery(a).parents(".right2left").length>0){d=!d}if(!d){if(jQuery(a.parentNode).hasClass("collapsable")){ajaxart_tree_expandCollapse(a,d)}else{ajaxart_tree_move_cursor(a,-2,e.altKey)}}else{ajaxart_tree_expandCollapse(a,d)}}ajaxart_tree_make_selected_visible(jQuery(a).parents(".tree_top").find(".tree_wrapper"));ajaxart.setVariable(a.ajaxart.params,"_CurrentFocus",[jQuery(a).find(".treeitem_dummy4focus")[0]]);ajaxart_runevent(a,"TreeContext","OnKeyPressed","",e)}}}}if(a!=null&&b){if(a.tabIndex==1){jQuery(a).focus()}else{jQuery(a).find(".treeitem_dummy4focus").focus()}}};ajaxart_tree_find_databound_elem=function(a){while(a!=null&&a.nodeType==1){if(a.tagName.toLowerCase()=="li"){return ajaxart_tree_item_from_li(a)}a=a.parentNode}return null};ajaxart_tree_item_from_li=function(a){var b=a.firstChild;while(b!=null){if(b.nodeType==1&&b.tagName.toLowerCase()=="span"){return b}b=b.nextSibling}};ajaxart_tree_expandCollapse=function(b,c){var a=b.parentNode;if(c&&jQuery(a).hasClass("expandable")){jQuery(a).find(">.hitarea").trigger("click")}if(!c&&jQuery(a).hasClass("collapsable")){jQuery(a).find(">.hitarea").trigger("click")}};ajaxart_tree_move_cursor=function(c,g,b){var e=null;var a=c.parentNode;if(g==1){if(jQuery(a).hasClass("collapsable")){var d=jQuery(a).find(".treeul")[0];if(d.firstChild.tagName.toLowerCase()=="li"){e=(d.firstChild)}}while(e==null&&a!=null){if(a.nextSibling!=null){e=a.nextSibling}if(jQuery(a.parentNode).hasClass("treeul")){a=a.parentNode.parentNode}else{a=null}}}if(g==-1){var h=a.previousSibling;if(h==null){if(jQuery(a.parentNode).hasClass("treeul")){e=a.parentNode.parentNode}}while(e==null&&h!=null){if(!jQuery(h).hasClass("collapsable")){e=h}var f=jQuery(h).find(".treeitem");if(f.length==0){e=h}else{h=f[f.length-1]}}}if(g==-2){e=a.parentNode.parentNode}if(e!=null){var c=ajaxart_tree_item_from_li(e);ajaxart_css_selection(c,"treeview");ajaxart_selectionchanged(c);if(b==null||b!=true){ajaxart_runevent(c,"TreeContext","OnSelect")}if(c!=null){if(c.tabIndex==1){jQuery(c).focus()}else{jQuery(c).find(".treeitem_dummy4focus").focus()}}}};ajaxart_tree_toggle=function(e,f,g){var c=jQuery(e);if(c.hasClass("collapsable")){if(c.find(">ul>li").length==0){var h=c.find(">ul")[0];var a=ajaxart_tree_item_from_li(e);var m=a.ajaxart;if(typeof(m)=="undefined"){return}var d=m.params;var k=d.vars[f];if(k==null||k.length==0){return}var l=k[0][g];if(l==null||typeof(l)=="undefined"){return}var b=ajaxart.clone_context(l.context);b.vars=m.params.vars;ajaxart.setVariable(b,"InputForChanges",m.data);ajaxart.run([h],l.script,"",b)}}};ajaxart_tree_make_selected_visible=function(c){var e=c.find(".selected");if(e.length==0){return}var m=e[0];var k=20;var d=20;var f=0;while(m!=null&&m!=c){f+=m.offsetTop;m=m.offsetParent}var g=ajaxart.ui.absoluteTop(c[0],true);var h=false;var b=c[0].scrollTop;var l=f-g;if(l>=b&&l+k<c.height()+b-d){h=true}if(h){return}if(l-b<c.height()/2){var a=Math.max(l-k,0)}else{var a=l-c.height()+k*2}c[0].scrollTop=a};ajaxart_treeitem_data=function(a){if(a.tagName.toLowerCase()=="span"){return a.ajaxart.data}if(a.tagName.toLowerCase()=="li"){return ajaxart_tree_item_from_li(a).ajaxart.data}return null};ajaxart_tree_addChildren=function(g,e,d,s,b,t){var l="";var o=aa_first(s,d,"MultiSelector",b);var h=[];for(var p=0;p<e.length;p++){var f=e[p];var u=aa_text([f],d,"ItemText",b);var m=aa_jbart_image("/default1616.gif",b);if(d.getAttribute("ItemImage")!=null||ajaxart.xml.xpath(d,"ItemImage").length>0){m=aa_text([f],d,"ItemImage",b)}var c=ajaxart.run([f],d,"NextLevel",b);var r=c.length==0;if(r&&o!=null){if(o.IsSelected!=undefined&&aa_bool([f],o.IsSelected.script,"",o.IsSelected.context)){l='<input type="checkbox" onclick="ajaxart_tree_checkbox_clicked(this,event)" class="aacheckbox_value" checked="checked"/>'}else{l='<input type="checkbox" onclick="ajaxart_tree_checkbox_clicked(this,event)" class="aacheckbox_value" />'}}var a="";if(c.length>0&&t==1){a=" closed"}var n=jQuery('<li class="aa_item treeitem'+a+'"><image class="treeitem_image" src="'+m+'" align="top" height="16px"/>'+l+'<span style="position:relative;" class="treeitem_text text_item" tabindex="1" onkeyup="ajaxart_tree_event(event);return false;">'+u+" </span></li>")[0];n.selector=o;var k=jQuery(n).find(".text_item")[0];ajaxart.databind([k],[f],b,d);if(ajaxart.xml.xpath(d,"ItemColoring").length>0){ajaxart.run([k],d,"ItemColoring",b)}g.appendChild(n);h.push(n);if(c.length>0){var q=jQuery('<ul class="treeul"/>')[0];n.appendChild(q);if(t==1){n.Lazy=true}else{ajaxart_tree_addChildren(q,c,d,s,b,t-1)}}}return h};ajaxart_tree_LazyExpand=function(e,d,c,a){var l=ajaxart_treeitem_data(e);var h=jQuery(e);var g=jQuery(e).find("ul");if(h.hasClass("collapsable")){if(e.Lazy){var f=ajaxart.run(l,c,"NextLevel",a);var b=ajaxart_tree_addChildren(g[0],f,c,d,a,1);e.Lazy=false;g.css("display","block");var k=jQuery(b);h.parents(".tree_top").treeview({add:k,toggle:function(){ajaxart_tree_LazyExpand(this,d,c,a)}})}}};ajaxart_tree_checkbox_clicked=function(e,d){var c=e.parentNode;var b=c.selector;if(b!=null){var a=ajaxart.run(c.ajaxart.data,b.Toggle.script,"",b.Toggle.context);ajaxart_runevent(c,"TreeContext","MultiSelect")}};ajaxart.gcs.xtml_dt={ParamsAsFields:function(d,t,c){var s=aa_component_definition(aa_text(t,d,"Component",c));if(s==null){return[]}var k=false;var q=ajaxart_run_commas(t,d,"Params",c),h=[];if(q.length==0){var p=ajaxart.xml.xpath(s,"Param");for(var n=0;n<p.length;n++){ajaxart.run(t,p[n],"Convert",c);if(p[n].getAttribute("light")=="false"){continue}if(aa_xtmldt_is_advanced_param(t[0],p[n])){k=true}else{if(p[n].getAttribute("boolfeature")=="true"){h.push(p[n].getAttribute("name"))}else{q.push(p[n].getAttribute("name"))}}}}var o=[];for(var n=0;n<q.length;n++){var a=ajaxart.xml.xpath(s,"Param[@name='"+q[n]+"']");if(a.length==0){continue}var l=a[0];if(ajaxart.xml.xpath(l,"Field").length>0){var g=aa_first(t,l,"Field",c);if(g){g.Param=q[n];g.ParamXml=l;o.push(g)}continue}var u=aa_text_capitalizeToSeperateWords(""+q[n]);if(l.getAttribute("Title")){u=l.getAttribute("Title")}var b={isObject:true,Id:q[n],Title:u,ParamXml:l,Param:q[n],Type:l.getAttribute("type")};b.FieldData=function(v){return v};b.CheckMandatoryValidation=function(x,v){var w=b.Param;if(x.nodeType==1){if(x.getAttribute(w)){if(x.getAttribute(w)==""){return false}return true}if(!aa_xpath(x,w)[0]){return false}return true}};var r=function(E,v){var w=aa_ctx(c,{_Field:[E]});var D=l.getAttribute("type");var C=(E.Type!=null&&E.Type.indexOf("[]")>-1);var x=(D==null||D=="data.Data");if(!x&&D=="data.Boolean"&&l.getAttribute("script")=="true"){x=true}if(x){E.Control=function(H,I){var J=aa_text(t,d,"Component",c);return ajaxart_xtmldt_primitive_control(H[0],J,E.Param,I)};return}if(C){return ajaxart.runNativeHelper(t,d,"Array",w)}E.Options={isObject:true,Options:[],IsTree:false};var y=false,F=false,B=false;if(E.ParamXml.getAttribute("multiple")=="true"&&D=="enum"){E.AllowValueNotInOptions=E.Multiple=true;if(E.ParamXml.getAttribute("Options")){var G=E.ParamXml.getAttribute("Options").split(",");for(var z=0;z<G.length;z++){E.Options.Options.push({isObject:true,code:ajaxart.totext_item(G[z])})}}F=B=true}else{if(D=="enum"){E.AllowValueNotInOptions=true;var G=ajaxart.xml.xpath(E.ParamXml,"value");if(E.ParamXml.getAttribute("Options")){ajaxart.concat(G,E.ParamXml.getAttribute("Options").split(","))}for(var z=0;z<G.length;z++){var A={isObject:true,code:ajaxart.totext_item(G[z])};E.Options.Options.push(A)}F=B=true}else{if(D=="dynamic_enum"||D=="dynamic_enum_multi"){E.AllowValueNotInOptions=true;if(l.getAttribute("options_pt")){E.Options=ajaxart.runComponent(l.getAttribute("options_pt"),t,c)}else{E.Options=ajaxart.gcs.picklist.DynamicOptions(E.ParamXml,[],w)[0]}if(l.getAttribute("recalc_options")=="true"){E.DelayedOptionCalculation=E.DynamicSuggestions=true;E.RecalcOptions=function(H,I){var K=aa_ctx(aa_merge_ctx(c,I),{_Field:[E],_Xtml:I.vars._FieldData});var J=ajaxart.gcs.picklist.DynamicOptions(E.ParamXml,[],K)[0];aa_initOptionsObject(J,I);return J}}if(D=="dynamic_enum_multi"){E.Multiple=true}F=B=true}else{if(D=="data.Boolean"){F=B=true;ajaxart.runComponent("field_aspect.Boolean",[],w);E.Options=null;B=false}else{if("action.Action,action_async.Action,data_async.Data,xml.Change,ui.Control,".indexOf(D+",")>-1){E.Control=function(H,I){var J=aa_ctx(c,{Xtml:H,Param:[E.Param]});return ajaxart.runComponent("xtml_dt.EditBasicTypeControl",H,J)}}else{y=true}}}}}if(F){E.FieldData=function(I,J){var L=ajaxart.xml.xpath(I[0],"@"+E.Param);if(L.length>0){return L}var H=ajaxart.xml.xpath(v,"Param[@name='"+E.Param+"']")[0];if(H){var K=H.getAttribute("Default");K=K||ajaxart.totext_array(ajaxart.xml.xpath(H,"Default/@value"));K=K||aa_cdata_value(ajaxart.xml.xpath(H,"Default")[0]);K=K||""}else{var K=""}return ajaxart.xml.xpath(I[0],"@"+E.Param,true,K)}}if(y){E.Options=ajaxart.runNativeHelper(t,d,"OptionsObjForTgpType",w);ajaxart.runNativeHelper(t,d,"AspectsForTgpType",w);E.FieldData=function(H,I){var J=ajaxart_writabledata();var M=ajaxart.xml.xpath(H[0],E.Param+"/@t");if(M.length==0){var L=ajaxart.xml.xpath(v,"Param[@name='"+E.Param+"']/Default");if(L.length>0){var K=H[0].ownerDocument.createElement(E.Param);H[0].appendChild(K);ajaxart.xml.copyElementContents(K,L[0])}M=ajaxart.xml.xpath(H[0],E.Param+"/@t")}if(M.length>0){ajaxart.writevalue(J,M)}return J};E.StoreOriginalValue=function(J,I){var H=ajaxart.xml.xpath(I.vars._Item[0],E.Param)[0];J.originalXtml=ajaxart.parsexml(ajaxart.xml2text(H))};E.RevertToOriginalValue=function(J,K,I){if(!J.originalXtml){return}var H=ajaxart.xml.xpath(I.vars._Item[0],E.Param)[0];ajaxart.xml.copyElementContents(H,J.originalXtml);aa_invoke_field_handlers(E.OnUpdate,J,null,E,K,{RevertToOriginalValue:true})};aa_field_handler(E,"OnUpdate",function(O,N,P,M,J){if(J&&J.RevertToOriginalValue){return}var K=jQuery(P).parents(".aa_item")[0].ItemData[0];if(aa_totext(N)==""){var I=aa_xpath(K,O.Param)[0];if(I){I.parentNode.removeChild(I)}}else{var H=aa_totext(N);var L=aa_totext(aa_xpath(K,O.Param+"/@t"));if(L!=H){xtmldt_switch_pt(L,H,K,O.Param,c)}}});B=true}if(B){ajaxart.runNativeHelper(t,d,"Options",w)}};if(l.getAttribute("autoaspects")!="false"&&l.getAttribute("titleField")!="true"){r(b,s)}var e=aa_ctx(c,{_Field:[b]});ajaxart.runNativeHelper([],d,"Aspects",e);ajaxart.runsubprofiles(t,b.ParamXml,"FieldAspect",e);o.push(b)}if(h.length>0){var b={isObject:true,Title:["Light Features"],BoolFeature:["true"],Params:h};ajaxart.runNativeHelper(t,d,"BoolFeatureAspects",aa_ctx(c,{_Field:[b]}));aa_field_handler(b,"OnUpdate",function(z,B,w){var y=","+aa_totext(B)+",";var v=jQuery(w).parents(".aa_item")[0].ItemData[0];for(var x=0;x<z.Params.length;x++){var A=z.Params[x];if(y.indexOf(","+A+",")>-1){v.setAttribute(A,"true")}else{v.setAttribute(A,"false")}}},"boolfeature");var m=function(v){v.FieldData=function(w,x){var y=ajaxart_writabledata(),C="";for(var z=0;z<v.Params.length;z++){var B=v.Params[z];var A=ajaxart.fieldscript(w[0],B,true);if(A&&A.nodeType==2&&A.nodeValue=="true"){C+=B+","}if(A&&A.tagName=="Default"&&A.getAttribute("value")=="true"){C+=B+","}}if(C!=""){C=C.substring(0,C.length-1)}ajaxart.writevalue(y,[C]);return y}};m(b);o.push(b)}if(k){var f={isObject:true,ID:["xtml_morefields"],HideTitle:["true"]};f.Control=function(v,w){var y=document.createElement("div");y.className="xtmldt_advanced_fields";y.ShowAdvancedParams=false;var x=aa_text(t,d,"Component",c);xtmldt_refreshMoreFields(y,v,w,x);return[y]};o.push(f)}return o},IsAdvancedParam:function(b,c,a){return aa_frombool(aa_xtmldt_is_advanced_param(aa_first(c,b,"Xtml",a),aa_first(c,b,"ParamXml",a)))},ToCompositeParam:function(c,f,b){if(!ajaxart.isxml(f)){return[]}var g=aa_text(f,c,"Param",b);var a=ajaxart.xml.xpath(f[0],g);if(a.length==0){f[0].appendChild(f[0].ownerDocument.createElement(g));a=ajaxart.xml.xpath(f[0],g)}var e=a[0];var d=aa_text(f,c,"PTForComposite",b);if(e.getAttribute("t")==null||e.getAttribute("t")==""){e.setAttribute("t",d)}if(e.getAttribute("t")!=d){return[]}return[e]},PreviewContext:function(e,f,d){var b={isObject:true};b.Input=aa_first(f,e,"Input",d);b.context=ajaxart.clone_context(d);var g=ajaxart.subprofiles(e,"ContextVar");for(var c=0;c<g.length;c++){var a=g[c].getAttribute("name");var h=ajaxart.run(f,g[c],"",b.context);b.context.vars[a]=h}return[b]},XtmlTextSummary:function(c,d,b){var a=aa_first(d,c,"Xtml",b);var e=aa_xtmldt_summarytext(a,"<br>");if(e==""&&a.getAttribute("t")){ptdef=aa_component_definition(a.getAttribute("t"));if(aa_xpath(ptdef,"Param").length>0){e='<img src="'+b.vars._Images[0]+'/studio/unsPipeIcon.gif" />'}}return[e]},ToggleInnerTgpParams:function(b,e,a){var g=a.vars._Field[0];var k=aa_attach_global_css(aa_text(e,b,"Css",a));function d(o){var n=aa_totext(o)||"";var l=n.split(".");if(l.length!=2){return null}var m=ajaxart.components[l[0]][l[1]];return m}function f(m){var l=d(m);if(!l){return false}return l.getAttribute("customPT")=="true"}function h(m){var l=d(m);if(!l){return false}return l.getAttribute("customAAEditor")=="true"}function c(o){var l=d(o);if(!l){return false}var n=aa_xpath(l,"Param");for(var m=0;m<n.length;m++){if(n[m].getAttribute("light")=="false"){continue}if(n[m].getAttribute("hidden")=="true"){continue}return true}return false}g.RefreshToggleInnerTgpParams=function(r,u,q,l,w){if(!u.jbToggleButton){jQuery(u).addClass("xtml_dt_toggle_cell");var v=jQuery('<table class="xtml_dt_toggle_table" cellpadding="0" cellspacing="0"><tr><td style="vertical-align:top" class="xtml_dt_picklist"/><td style="vertical-align:top" class="xtmldt_toggle_td"/><td style="vertical-align:top" class="xtml_dt_share_td"></tr></table>');var o=v.find(".xtml_dt_picklist");var n=v.find(".xtmldt_toggle_td");var m=v.find(".xtml_dt_share_td");while(u.firstChild){o[0].appendChild(u.firstChild)}u.jbToggleButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px' class='aa_field_toolbar_image xtmldt_toggle_left'/>");n.append(u.jbToggleButton);u.appendChild(v[0]);u.jbEditButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_edit_style'/>").attr("title","Edit Style");u.jbEditButton.css("background","url("+aa_base_images()+"/studio/designer.png) no-repeat");u.jbEditButton.click(function(z){var y=u.jbXtml;var x=aa_ctx(a,{_DomEvent:[z],ControlElement:[u]});ajaxart.run([y],jBart.parsexml('<xtml t="field_dt.OpenCustomPTDesigner" />'),"",x)});n.append(u.jbEditButton);u.jbOpenAAEditor=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_edit_style'/>").attr("title","Edit");u.jbOpenAAEditor.css("background","url("+aa_base_images()+"/studio/customize1616.gif) no-repeat");u.jbOpenAAEditor.click(function(A){u.jbXtml=u.jbXtml||(w&&ajaxart.xml.xpath(w.vars._Item[0],r.Param)[0]);var y=u.jbXtml;var z=d(q);var B=aa_totext(aa_xpath(z,"Param/@name"));var x=aa_ctx(a,{_DomEvent:[A],ControlElement:[u],_Param:[B]});ajaxart.run([y],jBart.parsexml('<xtml t="field_dt.OpenCustomAAEditor" />'),"",x)});n.append(u.jbOpenAAEditor);u.jbShareButton=jQuery("<div style='cursor:pointer; margin: 6px 0 0 5px;display:none;' class='aa_field_toolbar_image xtmldt_share'/>");u.jbShareButton.css("background","url("+aa_base_images()+"/studio/block_share.png) no-repeat").attr("title","Share your style (Make Global)");u.jbShareButton.click(function(z){var y=u.jbXtml;var x=aa_ctx(a,{ControlElement:[u]});ajaxart.run([y],jBart.parsexml('<xtml t="field_dt.MakeStyleGlobal" />'),"",x)});m.append(u.jbShareButton)}var p=u.jbToggleButton;u.jbEditButton.hide();u.jbShareButton.hide();u.jbOpenAAEditor.hide();if(f(q)){u.jbEditButton.show();u.jbShareButton.show();p.hide().css("display","none");return}if(h(q)){u.jbOpenAAEditor.show();p.hide().css("display","none");return}if(!c(q)){p.hide();return}else{p.show()}p[0].RefreshExapndButton=function(){var x=aa_base_images()+"/studio/"+(p[0].Expanded?"minus.gif":"plus.gif");p.css("background","url("+x+") no-repeat")};var s=l?true:false;var t=d(q);if(!s&&t&&t.getAttribute("autoexpand")=="true"){s=true}p[0].Expanded=s;p[0].RefreshExapndButton();p[0].onclick=function(){var y=jQuery(u.jbOptionsPageElement);function x(){p[0].RefreshExapndButton();aa_htmlContentChanged(u)}p[0].Expanded=!p[0].Expanded;if(p[0].Expanded){y.animate({height:"show"},200,x)}else{y.animate({height:"hide"},200,x)}};if(!s){jQuery(u.jbOptionsPageElement).css("display","none")}};aa_field_handler(g,"ModifyControl",function(l,o,n,m){l.jbXtml=ajaxart.xml.xpath(m.vars._Item[0],g.Param)[0];jQuery(l).addClass(k);g.RefreshToggleInnerTgpParams(g,l,o,false,m)});aa_field_handler(g,"OnUpdate",function(n,o,m){var l=jQuery(m).parents(".xtml_dt_toggle_cell")[0];n.RefreshToggleInnerTgpParams(n,l,o,true)})},CleanXtmlOfParams:function(c,d,b){var e=aa_text(d,c,"PrevComponent",b);var a=d[0];if(e==""||a.getAttribute("t")==null||a.getAttribute("t")==""){return[]}xtmldt_cleanXtmlOfParams(a,e)},Object:function(b,c,a){var d={isObject:true,Xtml:ajaxart.run(c,b,"Xtml",a)};d.Preview=ajaxart.run(c,b,"Preview",a);ajaxart_addMethod(d,"RefreshPreview",b,"RefreshPreview",a,"");var e=aa_ctx(a,{_XtmlObject:[d]});ajaxart.runsubprofiles(c,b,"Aspect",e);return[d]},Aspects:function(b,c,a){ajaxart.runsubprofiles(c,b,"Aspect",a);return[]},OverrideObject:function(b,c,a){var d=aa_first(c,b,"Object",a);if(d==null){return[]}var e=aa_ctx(a,{_XtmlObject:[d]});ajaxart.runsubprofiles(c,b,"Aspect",e);return[d]},LightComponentsOfType:function(b,e,a){if(!window.ajaxart_light_compoftype){ajaxart_light_compoftype={};for(var f in ajaxart.components){if(f.lastIndexOf("_dt")==f.length-3&&f.length>3||f=="aaeditor"){continue}for(var d in ajaxart.components[f]){var h=ajaxart.components[f][d];var l=h.getAttribute("type");if(l==null||l=="data.Data"||l=="action.Action"||l=="ui.Control"){continue}if(h.getAttribute("hidden")=="true"||h.getAttribute("light")=="false"){continue}if(ajaxart_light_compoftype[l]==null){ajaxart_light_compoftype[l]=[];var g=ajaxart.types[l.replace(".","_")];if(g!=null&&g.getAttribute("lightPTs")!=null){ajaxart_light_compoftype[l]=g.getAttribute("lightPTs").split(",")}}var k=""+f+"."+d;if(ajaxart_arr_indexof(ajaxart_light_compoftype[l],k)==-1){ajaxart_light_compoftype[l].push(k)}}}}var l=aa_text(e,b,"Type",a);var c=ajaxart_light_compoftype[l];if(c==null){c=[]}return c},ComponentParams:function(c,s,b){var o=aa_text(s,c,"ComponentID",b);var t=o.split(".")[0];var n=o.split(".")[1];var m=ajaxart.components[t][n];var l=[];var q=ajaxart.xml.xpath(m,"Param");for(var p=0;p<q.length;p++){var h=q[p];var g=h.getAttribute("name");var a={isObject:true};a.Title=g;a.Id=g;a.Param=[h];l.push(a);var d=h.getAttribute("type");var r=true;if(d!=null&&d!="data.Data"){r=false}if(r){var k=function(u){return function(v,x){if(v.length==0){return[]}var w=aa_text(s,c,"ComponentID",b);return ajaxart_xtmldt_primitive_control(v[0],w,u,b)}};var f=k(g)}else{var f=function(u,v){return[]}}var e=aa_ctx(b,{_Field:[a]});ajaxart_addScriptParam_js(a,"Control",f,e);ajaxart.runsubprofiles(s,c,"FieldAspect",e)}return l},ImageOfType:function(c,d,a){var b=aa_text(d,c,"Type",a);if(aa_type_image[b]!=null){return[aa_type_image[b]]}var g=ajaxart.types[b.replace(".","_")];var f={isObject:true};ajaxart.runsubprofiles([],g,"ComponentAspect",aa_ctx(a,{_Component:[f]}));var e=aa_totext(f.Image);aa_type_image[b]=e;return[e]},ComponentObject:function(f,k,c){var b=aa_text(k,f,"Component",c);var h={isObject:true,Component:b};var g=b.indexOf(".");var n=b.substring(0,g);var l=b.substr(g+1);if(ajaxart.components[n]==null||ajaxart.components[n][l]==null){return[]}var a=ajaxart.components[n][l];var e=aa_ctx(c,{_Component:[h]});var m=a.getAttribute("type");if(m!=null){var d=ajaxart.types[m.replace(".","_")];ajaxart.runsubprofiles([],d,"ComponentAspect",e)}ajaxart.runsubprofiles([],a,"Aspect",e);return[h]},CssCustomize:function(c,e,b){var d=e[0];if(d==null||d.parentNode==null){return[]}if(d==null||d.tagName=="HTML"||d.tagName=="BODY"){d=window.getSelection().focusNode}while(d.parentNode){if(d.ajaxart!=null){var a=d.ajaxart.params;if(a.vars._BartDevDtContext==null){return[]}return ajaxart.runNativeHelper(e,c,"Open",a)}d=d.parentNode}return[]},GlobalOpenAAEditor:function(c,d,a){var b=d[0];if(b.tagName=="HTML"||b.tagName=="BODY"){b=window.getSelection().focusNode}var k=null;while(b.parentNode){if(b.ajaxart&&!k){k=b}if(jQuery(b).hasClass("aa_container")&&b.Cntr){var h=b.Cntr;var g=false;for(var e=0;e<h.Fields.length;e++){if(h.Fields[e].ParamXml){g=true}}if(g){var f={isObject:true,script:aa_items(h)[0],input:[]};var l=aa_ctx(h.Context,{_Cntr:[h.Ctrl]});return ajaxart.runNativeHelper([f],c,"OpenAAEditor",l)}}b=b.parentNode}return[];if(k==null){return[]}var f={isObject:true,script:k.ajaxart.script,input:k.ajaxart.data};return ajaxart.runNativeHelper([f],c,"OpenAAEditor",k.ajaxart.params)},GlobalCustomize:function(c,f,a){var b=f[0];if(b.tagName=="HTML"||b.tagName=="BODY"){b=window.getSelection().focusNode}var h="";while(b.parentNode){if(jQuery(b).hasClass("field_control")||jQuery(b).hasClass("aa_container")){var k=b.XtmlSource?b.XtmlSource[0].context:b.ajaxart.params;var g=aa_totext(k.vars.PageID);if(g!=""){var d=b.className.split(" ");for(var e=0;e<d.length;e++){if(d[e].substring(0,4)=="fld_"){h=d[e].substring(4)}}return ajaxart.runNativeHelper([g],c,"GoToPage",aa_ctx(k,{FieldPath:[h]}))}}b=b.parentNode}},ProfileProperty:function(d,e,b){var a=aa_first(e,d,"Profile",b);var f=aa_text(e,d,"Param",b);var c=ajaxart.fieldscript(a,f,true);if(c){return[c]}return[]},AggregatorFields:function(d,f,b){var k=ajaxart.run(f,d,"Items",b);var h={};for(var g=0;g<k.length&&g<5;g++){var l=k[g];for(field_name in l){if(field_name!="isObject"&&field_name!="XtmlSource"&&!h[field_name]){h[field_name]=true}}}var e=[];for(field_name in h){var a={isObject:true,FieldName:field_name,Desc:""};var c=0;for(var g=0;g<k.length;g++){if(k[g][field_name]!=null){if(c>0){a.Desc+=","}if(c==4){a.Desc+="...";break}a.Desc+=k[g][field_name];c++}}e.push(a)}return e},TrimVariables:function(d,f,c){var h=f[0];var a=false;var e=false;var g=0;for(var b=0;b<h.length-1;b++){if(!e){if(h[b]=="\\"){e=true}else{if(h[b]=="%"){a=!a;g=b}}}else{e=false}}if(a){return[h.substring(g)]}return[""]}};var aa_type_image={};function ajaxart_xtmldt_primitive_control(e,p,c,a){var f=document.createElement("div");f.className="xtml_dt_primitive";var m=jQuery('<table class="xtml_text_and_button" cellpadding="0" cellspacing="0"/>')[0];f.appendChild(m);var k=jQuery("<tr/>")[0];m.appendChild(k);var l=document.createElement("SPAN");l.className="xtml_text_wrapper";var h=function(){if(l.context!=null){return}var r={ParentXtml:[e],Field:[c]};var q=aadt_calcPrimitivePreviewContext(e,c,a);if(!q[0]){q=aa_run_component("xtml_dt.CalcPreviewForXtml",[r],a)}l.context=q};var g=function(r,q){return function(){var s=e.getAttribute(c);var z;var E=ajaxart.totext_array(ajaxart.xml.xpath(e,c+"/@t"))=="data.JavaScript";if(s==null&&!E){if(ajaxart.xml.xpath(e,c).length>0){z=document.createElement("INPUT");z.setAttribute("value","computed");r.isAttr=false;z.readOnly=true;z.className="xtml_dt_readonly";jQuery(z).click(function(){var G={isObject:true};ajaxart_addScriptParam_js(G,"Refresh",o,a);if(r.isAttr){var F=["true"]}else{var F=[]}h();var H=aa_ctx(a,{_XtmlDtContext:[G],IsAttribute:F,Xtml:[e],Field:[c],_PrimitiveControl:[r.firstChild],_Context:r.context});ajaxart.runComponent("xtml_dt.EditScriptOfPrimitive",[e],H)})}else{s=""}}if(E){var C={isObject:true};ajaxart_addScriptParam_js(C,"OnUpdate",v,a);ajaxart_addScriptParam_js(C,"Context",y,a);var w=aa_ctx(a,{_XtmlDt:[C]});z=ajaxart.runComponent("xtml_dt.JavaScriptInlineEditor",ajaxart.childElems(e,c),w)[0]}if(s!=null){var v=function(G){var F=ajaxart.totext(G);if(r.DefaultValue!=""&&!r.OverridingDefaultValue&&r.DefaultValue!=F){r.OverridingDefaultValue=true}if(ajaxart.totext(G)!=""||r.OverridingDefaultValue){e.setAttribute(c,F)}else{e.removeAttribute(c)}};var y=function(F){h();if(q.preview_control!=null){q.removeChild(q.preview_control)}var H=aa_ctx(a,{_Context:r.context});var G=ajaxart.runComponent("aaeditor.PrimitiveTextPreview",F,H)[0];q.appendChild(G);q.preview_control=G;return r.context};var x=ajaxart.parsexml('<xml value=""/>');var D="";if(e.getAttribute(c)!=null){D=e.getAttribute(c);x.setAttribute("value",e.getAttribute(c))}var B=aa_get_default_value(p,c);if(B&&typeof(B)!="string"&&B.nodeType){var A=(B.nodeType==1)?ajaxart.totext(ajaxart.xml.xpath(B,"@value")):aa_totext([B]);r.DefaultValue=A;if(e.getAttribute(c)==null){x.setAttribute("value",A)}else{r.OverridingDefaultValue=true}}var C={isObject:true};ajaxart_addScriptParam_js(C,"OnUpdate",v,a);ajaxart_addScriptParam_js(C,"Context",y,a);var u=aa_component_definition(p);var t=[];if(u){t=ajaxart.xml.xpath(u,"Param[@name='"+c+"']")}var w=aa_ctx(a,{_XtmlDt:[C],_ParamXml:t});z=ajaxart.runComponent("aaeditor.EditPrimitiveTextBox",ajaxart.xml.xpath(x,"@value"),w)[0];r.isAttr=true}while(r.firstChild!=null){r.removeChild(r.firstChild)}r.appendChild(z);aa_element_attached(z);ajaxart.runComponent("xtml_dt.RefreshPrimitivePreview",[],ajaxart.ui.contextWithCurrentControl(a,r))}};var o=g(l,f);o();var d=jQuery("<td/>")[0];d.appendChild(l);k.appendChild(d);var n=document.createElement("span");n.className="xtml_dt_pop_button";n.onclick=function(){var r={isObject:true};if(l.OverridingDefaultValue){r.DefaultValue=[l.DefaultValue]}ajaxart_addScriptParam_js(r,"Refresh",o,a);if(l.isAttr){var q=["true"]}else{var q=[]}h();var s=aa_ctx(a,{ControlElement:[n],_XtmlDtContext:[r],IsAttribute:q,Xtml:[e],Field:[c],_PrimitiveControl:[l.firstChild],_Context:l.context});ajaxart.runComponent("xtml_dt.OpenPrimitiveControlPopup",[e],s)};var b=jQuery("<td/>")[0];b.appendChild(n);k.appendChild(b);return[f]}xtmldt_refreshMoreFields=function(h,d,a,k){aa_empty(h);if(h.ShowAdvancedParams){var c=aa_ctx(a,{Component:[k]});var g=ajaxart.runComponent("xtml_dt.MoreFieldsHelper",d,c)[0];h.appendChild(g);var f=jQuery('<a class="xtmldt_showless button_hyperlink">less...</a>')[0];f.onmousedown=function(l){l=l||event;if(l.button==2){return true}h.ShowAdvancedParams=false;xtmldt_refreshMoreFields(h,d,a,k)};h.appendChild(f)}else{var e=jQuery('<a class="xtmldt_showmore button_hyperlink">more...</a>')[0];e.onmousedown=function(l){l=l||event;if(l.button==2){return true}h.ShowAdvancedParams=true;xtmldt_refreshMoreFields(h,d,a,k);aa_ensure_visible(h)};var b=jQuery("<div />")[0];b.appendChild(e);h.appendChild(b)}aa_element_attached(h)};function aa_xtmldt_is_advanced_param(d,c){if(c.getAttribute("advanced")=="always"){return true}if(c.getAttribute("advanced")!="true"){return false}if(!d){return true}var g=c.getAttribute("name");var e=aa_component_definition(d.getAttribute("t"));var b=d.getAttribute(g);if(b!=null){if(b==""){return true}var f=ajaxart.totext_array(aa_xpath(e,"Param[@name='"+g+"']/@Default"));if(f==""){f=ajaxart.totext_array(aa_xpath(e,"Param[@name='"+g+"']/Default/@value"))}return(b==f)}var h=aa_xpath(d,g)[0];if(!h){return true}var f=aa_xpath(e,"Param[@name='"+g+"']/Default")[0];if(!f){return false}var a=h.ownerDocument.createElement("Default");ajaxart.xml.copyElementContents(a,h);return ajaxart.xml2text(a)==ajaxart.xml2text(f)}function aa_xtmldt_summarytext(f,r){var o="";var q=f.getAttribute("t");if(!q){return""}var c=aa_component_definition(q);var g=ajaxart.xml.xpath(c,"Param");for(var h=0;h<g.length;h++){if(g[h].getAttribute("light")=="false"||g[h].getAttribute("summary")=="false"){continue}var e=g[h].getAttribute("name");var l=g[h].getAttribute("type")||"data.Data";var n=(aa_textInList(l,["data.Data","data.Boolean","ui.Control","action.Action"]));var m="";if(f.getAttribute(e)!=null){var b=aa_totext(aa_xpath(g[h],"@Default"));if(b==""){b=aa_totext(aa_xpath(g[h],"Default/@value"))}if(f.getAttribute(e)==b){continue}var d=f.getAttribute(e);if(d.length<50){m=e+": "+f.getAttribute(e)}else{m=e+": ..."}}else{var a=aa_xpath(f,e);if(a.length==1){if(n){m=e+": ..."}else{var p=a[0].getAttribute("t");var b=aa_totext(aa_xpath(g[h],"Default/@t"));if(p&&p!=""&&p!=b){var k=aa_xtmldt_summarytext(a[0]," , ");m=e+": "+p.substring(p.indexOf(".")+1);if(k!=""){if(k.length<10){m+=" ( "+k+" ) "}else{m+=" ..."}}}}}}if(m==""){continue}if(o!=""){o+=r}o+=m}return o}function xtmldt_switch_pt(e,b,h,c,a){var d=aa_xpath(h,"!"+c)[0];var f=aa_component_definition(b);var g=aa_xpath(f,"ParamGenerator")[0];if(g){var k=d.cloneNode(true)}ajaxart.writevalue(aa_xpath(h,"!"+c+"/@t"),b);xtmldt_cleanXtmlOfParams(d,e);if(g){ajaxart.run([d],g,"",aa_ctx(a,{PrevXtml:[k]}))}}function xtmldt_cleanXtmlOfParams(e,f){var c=aa_component_definition(e.getAttribute("t"));var l=aa_component_definition(f);if(aa_hasAttribute(c,"decorator")&&f!=""){var d=c.getAttribute("decorator");var n=e.ownerDocument.createElement(d);ajaxart.xml.copyElementContents(n,e);n.setAttribute("t",f);var m=e.ownerDocument.createElement(aa_tag(e));m.setAttribute("t",e.getAttribute("t"));m.appendChild(n);e.parentNode.replaceChild(m,e);return[]}for(var h=0;h<e.attributes.length;h++){var b=e.attributes.item(h).name;if(b!="t"&&b!="name"){var g=true;var k=ajaxart.xml.xpath(c,"Param[@name='"+b+"']");if(k.length==0||aa_component_param_type(c,b)!=aa_component_param_type(l,b)){e.removeAttribute(b);h--}}}var a=ajaxart.xml.xpath(e,"*");for(var h=0;h<a.length;h++){var b=a[h].tagName;var k=ajaxart.xml.xpath(c,"Param[@name='"+b+"']");if(k.length==0||aa_component_param_type(c,b)!=aa_component_param_type(l,b)){a[h].parentNode.removeChild(a[h])}}}ajaxart.gcs.xtml_dt_tree={TreeDataItems:function(d,e,c){var b={isObject:true,Top:true,Xtml:aa_first(e,d,"TopXtml",c),Type:aa_text(e,d,"Type",c)};var a={isObject:true,ParentXtml:b.Xtml,Top:true,Type:aa_text(e,d,"Type",c)};a.ParamXml=ajaxart.parsexml("<Param type='"+a.Type+"' script='true' />","top param",null,false);b.Items=[a];if(aa_tag(a.ParentXtml)=="Component"){a.Component=true}aa_xtmldt_setnextlevel(b,c);aa_xtmldt_setfunctions(a);return[b]},SaveManager:function(b,c,a){return[aa_save_manager]},FindTreeTopInDialog:function(c,d,b){var a=b.vars.ControlElement[0];return[jQuery(a).find(".aa_xtml_tree").find(">ul").find(">li").find(">.aa_text")[0]]},TreeObject:function(d,f,c){var g={isObject:true};for(var e=d.firstChild;e!=null;e=e.nextSibling){if(e.nodeType==1){var a=e.tagName;var b=e.getAttribute("name");if(b==null||b==""){continue}if(a=="Property"){g[b]=ajaxart.run(f,e,"",c)}else{if(a=="Method"){ajaxart_addMethod(g,b,e,"",c)}}}}g.SetTreeTop=function(k,h){var m=this;m.TreeTop=jQuery(h.vars._Cntr[0].Ctrl).find(".aa_listtop").find(">.aa_item")[0];m.Path="";for(var l=m.TopXtml[0];l!=null&&l.getAttribute;l=l.parentNode){if(aa_tag(l)=="Component"){m.Path=l.getAttribute("id")+"/"+m.Path;break}var o=aa_tag(l);var n=null;if(l.getAttribute("ID")){n=l.getAttribute("ID")}if(l.getAttribute("name")){n=l.getAttribute("name")}if(n){o+="["+n+"]"}m.Path=o+"/"+m.Path}if(m.Path.lastIndexOf("/")==m.Path.length-1){m.Path=m.Path.substring(0,m.Path.length-1)}ajaxart.log(m.Path)};g.KeepCurrentPath=function(k,h){var n=this;var l=h.vars._ElemsOfOperation;var m="";while(!l[0].ItemData[0].Top){var o=l[0].ItemData[0].Text(l[0].ItemData,h)[0].split(" =")[0];m=o+((m=="")?"":"/"+m);l=jQuery(l[0]).parents(".aa_item")}ajaxart.cookies.writeCookie("aaeditor_path",m)};g.GoToPreviousPath=function(k,h){var n=this;var m=ajaxart.cookies.valueFromCookie("aaeditor_path");if(m==null){return}var l=n.GoToPath(m,h);if(l){ajaxart_uiaspects_select(jQuery(l),jQuery(),"auto",h,true)}};g.GoToPath=function(q,h){var p=this;var n=p.TreeTop;if(q==""){return n}var o=q.split("/");for(var l=0;l<o.length;l++){if(!n){continue}if(n.collapsed){h.vars._Cntr[0].CollapseElem(jQuery(n),false)}var m=jQuery(n).children(".aa_list").children(".aa_item");n=null;for(var k=0;k<m.length;k++){if(jQuery(m[k]).children(".aa_text").text().split(" =")[0]==o[l]){n=m[k];break}}}return n};g.Undo=function(n,k){var p=this;var o=null,m;var h=(!k.vars.Redo)?k.vars._UndoData[0].UndoOperations:k.vars._UndoData[0].RedoOperations;if(h.length==0){return[]}if(!k.vars.GotoLastEdit){m=h.pop()}else{m=h[h.length-1]}var o=p.GoToPath(m.Path,k);if(!o){return}if(k.vars.GotoLastEdit){ajaxart_uiaspects_select(jQuery(o),jQuery(),"auto",k,true);return[]}var l=o.ItemData[0][m.Operation];l(o.ItemData,aa_ctx(k,{Undo:[k.vars.Redo==null],Value:m.Primitive,Xml:m.Component,_ElemsOfOperation:[o],Direction:m.Direction}))};return[g]}};function aa_xtmldt_setfunctions(a){a._Type=[a.Type];a._ParamXml=[a.ParamXml];if(a.Param){a._Param=[a.Param]}a.Text=function(q,k){if(a.Component){return[a.ParentXtml.getAttribute("id")]}var c=a.Param,p=a.ParentXtml;if(a.ArrayExtra){return[c+"[+]"]}if(aa_is_static_bool(a)&&c){return[c]}var o=a.Top?"":c+" = ";if(a.ParamXml!=null&&a.ParamXml.getAttribute("title")!=null){o=a.ParamXml.getAttribute("title")+" = "}if(a.IsArrayItem){o=c+"["+(a.Index+1)+"] = ";elems=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.Top){elems=[a.ParentXtml]}else{var h=a.ParentXtml.getAttribute(a.Param);if(h!=null){return[ajaxart.xmlescape(o+h)]}elems=ajaxart.childElems(a.ParentXtml,a.Param)}}if(elems.length==0){return[ajaxart.xmlescape(o)]}if(a.HasName&&elems[0].getAttribute("name")!=null){o=c+"["+elems[0].getAttribute("name")+"] = "}var g=elems[0].getAttribute("value");if(g!=null){o=o+g}else{var b=elems[0].getAttribute("t");if(b==null){o=o.replace(" = ","");if(k.vars.AddTextSummary||(k.vars._ItemElement!=null&&k.vars._ItemElement[0].collapsed)){if(elems[0].tagName=="Case"&&elems[0].getAttribute("If")){o+=": "+elems[0].getAttribute("If")}if(elems[0].tagName=="Case"&&elems[0].getAttribute("IfCondition")){o+=": "+elems[0].getAttribute("IfCondition")}if(elems[0].getAttribute("Remark")!=null&&elems[0].getAttribute("Remark")!=""){o+=" : "+elems[0].getAttribute("Remark")}}return[ajaxart.xmlescape(o)]}o=o+elems[0].getAttribute("t").split(".")[1];if(k.vars.AddTextSummary||(k.vars._ItemElement!=null&&k.vars._ItemElement[0].collapsed)){if(elems[0].getAttribute("Remark")!=null&&elems[0].getAttribute("Remark")!=""){o+=": "+elems[0].getAttribute("Remark")}else{var s=aa_component_definition(elems[0].getAttribute("t"));var l=[];if(s!=null){var r=ajaxart.xml.xpath(s,"Param[@essential='true']");for(var n=0;n<r.length;n++){l.push(r[n].getAttribute("name"))}}var v=[];for(var n=0;n<l.length;n++){var e=elems[0].getAttribute(l[n]);if(e!=null){v.push(e)}else{var u=ajaxart.childElems(elems[0],l[n]);for(var m=0;m<u.length;m++){if(u[m].getAttribute("value")!=null){v.push(u[m].getAttribute("value"))}else{var d=u[m].getAttribute("t");if(d!=null&&d.indexOf(".")!=-1){v.push(d.split(".")[1])}}}}}var f=0;for(var n=0;n<v.length;n++){if(v[n]==null||v[n]==""){break}if(f==3){o+=", ...";break}o+=(f==0?": ":", ")+v[n];f++}}}}if(o.length>50){o=o.substring(0,47)+"..."}return[ajaxart.xmlescape(o)]};a.Update=function(q,r){aa_xtmldt_writeundodata(r.vars._ElemsOfOperation,r);var o=aa_xtmldt_treecntr(r);var p=ajaxart.totext_array(r.vars.Value);var g=p.match(/^=[a-z_A-Z0-9]+[.][a-z_A-Z0-9]+$/)==null;var f=ajaxart.totext_array(r.vars.Xml),k=null;if(f!=""){k=ajaxart.parsexml(f,"script update",null,false,a.ParentXtml);if(k==null){return[]}var m=(a.Top)?aa_tag(a.ParentXtml):a.Param;if(aa_tag(k)!=m){var h=aa_createElement(a.ParentXtml,m);ajaxart.xml.copyElementContents(h,k);k=h}}if(a.ArrayExtra){var d=aa_createElement(a.ParentXtml,a.Param);if(g){d.setAttribute("value",p)}else{d.setAttribute("t",p.substring(1))}if(k!=null){d=k}a.ParentXtml.appendChild(d);a.ArrayExtra=false;var b={isObject:true,ParentXtml:a.ParentXtml,ParamXml:a.ParamXml,Param:a.Param,Type:a.Type,Index:a.Index+1,IsArrayItem:true,ArrayExtra:true};aa_xtmldt_setfunctions(b);var c=jQuery(r.vars._ElemsOfOperation);if(o){var h=ajaxart_uiaspects_addElement([b],o);jQuery(h).insertAfter(c)}}else{if(a.IsArrayItem){var e=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];var h=aa_createElement(a.ParentXtml,a.Param);if(e.getAttribute("name")!=null){h.setAttribute("name",e.getAttribute("name"))}var l=ajaxart.childElems(e,"Var");for(i in l){h.appendChild(aa_importNode(l[i].cloneNode(true),h))}if(g){h.setAttribute("value",p)}else{h.setAttribute("t",p.substring(1))}if(k!=null){h=k}ajaxart.replaceXmlElement(e,h,false)}else{if(a.Param=="name"){a.ParentXtml.setAttribute("name",p.replace(new RegExp("[^a-zA-Z_0-9]","g"),""));aa_invoke_cntr_handlers(o,o.RefreshItemTextAndImage,[jQuery(r.vars._ElemsOfOperation[0]).parents(".aa_item")[0]],r)}else{if(a.OnlyPrimitive){a.ParentXtml.setAttribute(a.Param,p)}else{if(k!=null){if(a.Top){ajaxart.xml.copyElementContents(a.ParentXtml,k)}else{var e=ajaxart.childElem(a.ParentXtml,a.Param);if(e!=null){ajaxart.replaceXmlElement(e,k,false)}else{a.ParentXtml.appendChild(k)}a.ParentXtml.removeAttribute(a.Param)}}else{if(a.Top){if(k!=null){a.ParentXtml=k}else{if(g){a.ParentXtml.setAttribute("value",p)}else{a.ParentXtml.setAttribute("t",p.substring(1))}}}else{if(g&&a.OnlyElement){var d=ajaxart.childElem(a.ParentXtml,a.Param);if(d==null){d=aa_createElement(a.ParentXtml,a.Param);a.ParentXtml.appendChild(d)}d.setAttribute("value",p)}else{if(g){a.ParentXtml.setAttribute(a.Param,p);var d=ajaxart.childElem(a.ParentXtml,a.Param);if(d!=null){d.parentNode.removeChild(d)}}else{var n=p.substring(1);a.ParentXtml.removeAttribute(a.Param);var d=ajaxart.childElem(a.ParentXtml,a.Param);if(d==null){d=aa_createElement(a.ParentXtml,a.Param);a.ParentXtml.appendChild(d)}d.setAttribute("t",n)}}}}}}}}if(r.vars._ElemsOfOperation!=null){aa_save_manager.MarkAsModified([a.ParentXtml],r);var h=aa_xtmldt_refresh_elem(r,r.vars._ElemsOfOperation);o.CollapseElem(jQuery(h[h.length-1]),true);aa_after_update(a,aa_ctx(r,{_ElemsOfOperation:h,_ItemsOfOperation:h[0].ItemData}));if(r.vars._XtmlTreeObj){ajaxart_runMethod([],r.vars._XtmlTreeObj[0],"RefreshLocalPreview",aa_ctx(r,{_Item:[h[0].ItemData]}))}}ajaxart.xml.xml_changed(a.ParentXtml)};a.Delete=function(g,c){var b;if(a.Top){return}if(a.Param=="name"){return}if(a.IsArrayItem){if(a.ArrayExtra){return[]}var h=jQuery(c.vars._ElemsOfOperation).parents(".aa_item");aa_xtmldt_writeundodata(h,c);aa_save_manager.MarkAsModified([a.ParentXtml],c);var f=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];f.parentNode.removeChild(f);b=jQuery(c.vars._ElemsOfOperation).next();jQuery(c.vars._ElemsOfOperation).remove();ajaxart_uiaspects_select(b,jQuery(),"auto",c,true);for(var d=b[0];d!=null;d=d.nextSibling){if(d.ItemData[0].Param==a.Param){d.ItemData[0].Index--;jQuery(d).children(".aa_text").text(d.ItemData[0].Text(d.ItemData,c)[0])}}}else{var h=jQuery(c.vars._ElemsOfOperation).parents(".aa_item");aa_xtmldt_writeundodata(h,c);a.ParentXtml.removeAttribute(a.Param);var e=ajaxart.childElem(a.ParentXtml,a.Param);if(e!=null){e.parentNode.removeChild(e)}aa_save_manager.MarkAsModified([a.ParentXtml],c);if((a.ParamXml==null||a.ParamXml.getAttribute("essential")!="true")&&ajaxart.totext_array(c.vars._HideEmpties)=="true"){b=jQuery(c.vars._ElemsOfOperation).next();if(b.length==0){b=jQuery(c.vars._ElemsOfOperation).prev()}if(b.length==0){b=jQuery(c.vars._ElemsOfOperation).parent().parent()}jQuery(c.vars._ElemsOfOperation).remove();ajaxart_uiaspects_select(b,jQuery(),"auto",c,true)}else{b=ajaxart_uiaspects_refreshElements(c.vars._ElemsOfOperation,true);ajaxart_uiaspects_select(jQuery(b[b.length-1]),jQuery(),"auto",c,true);cntr.CollapseElem(jQuery(b[b.length-1]),true)}}aa_after_update(a,aa_ctx(c,{_ElemsOfOperation:[b[0]],_ItemsOfOperation:b[0].ItemData}));ajaxart.xml.xml_changed(a.ParentXtml)};a.AsPrimitive=function(e,b){var d;if(a.IsArrayItem){if(a.ArrayExtra){return""}d=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.Top){d=[a.ParentXtml]}else{var c=a.ParentXtml.getAttribute(a.Param);if(c!=null){return[c]}d=ajaxart.childElems(a.ParentXtml,a.Param)}}if(d.length==0){return[]}var f=d[0].getAttribute("value");if(f!=null){return[f]}if(d[0].getAttribute("t")==null){return[""]}return["="+d[0].getAttribute("t")]};a.GetXtml=function(d,b){if(a.Top){return[a.ParentXtml]}else{if(a.IsArrayItem){if(a.ArrayExtra){return[]}return ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}else{if(a.ParentXtml.getAttribute(a.Param)!=null){var e=a.ParentXtml.attributes;for(var c=0;c<e.length;c++){if(e.item(c).nodeName==a.Param){return[e.item(c)]}}}else{return ajaxart.childElems(a.ParentXtml,a.Param)}}}};a.AsXml=function(g,b,f){var d;if(a.IsArrayItem){if(a.ArrayExtra){return[]}return ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")}if(a.Top||a.Component){return[a.ParentXtml]}else{d=ajaxart.childElems(a.ParentXtml,a.Param);if(d.length>0){return d}else{if(f){return[]}else{var c=a.ParentXtml.getAttribute(a.Param);if(c==null){c=""}var e=aa_createElement(a.ParentXtml,a.Param);e.setAttribute("value",c);return[e]}}}};a.Copy=function(c,b){ajaxart.xtml_clipboard={isObject:true};if(a.ArrayExtra){return[]}ajaxart.xtml_clipboard.Xml=ajaxart.xml2text(a.AsXml(c,b))};a.Cut=function(c,b){a.Copy(c,b);a.Delete(c,b)};a.Paste=function(c,b){if(ajaxart.xtml_clipboard==null){return}a.Update(c,aa_ctx(b,{Xml:[ajaxart.xtml_clipboard.Xml]}))};a.Move=function(f,b){var h=ajaxart.totext_array(b.vars.Direction);if(!a.IsArrayItem||a.ArrayExtra){return}var e=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index)+"]")[0];var g=(h=="down")?1:-1;var c=ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(1+a.Index+g)+"]");if(c.length==0){return}var d=jQuery(b.vars._ElemsOfOperation[0]);if(h=="down"){c[0].parentNode.insertBefore(c[0],e);a.Index++;d.next()[0].ItemData[0].Index--;aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[d[0]],b);aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[d.next()[0]],b);d.insertAfter(d.next())}else{c[0].parentNode.insertBefore(e,c[0]);a.Index--;d.prev()[0].ItemData[0].Index++;aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[d[0]],b);aa_invoke_cntr_handlers(b.vars._Cntr[0],b.vars._Cntr[0].RefreshItemTextAndImage,[d.prev()[0]],b);d.prev().insertAfter(d)}if(b.vars._Cntr){ajaxart_uiaspects_select(d,jQuery(),"auto",b,true)}aa_xtmldt_writeundodata(d,b,{isObject:true,Operation:"Move",Direction:[(h=="down"?"up":"down")]})};a.HasNoContent=function(d,b){if(a.ArrayExtra){return["true"]}if(a.Top){return[]}if(a.IsArrayItem){return[]}var c=ajaxart.childElems(a.ParentXtml,a.Param);if(c.length>0){return[]}if(a.ParentXtml.getAttribute(a.Param)){return[]}return["true"]};a.IsActionDisabled=function(c,b){var d=ajaxart.totext_array(b.vars.Operation);if(d=="Paste"&&ajaxart.xtml_clipboard!=null){return[]}if(d=="MoveDown"&&a.IsArrayItem&&!a.ArrayExtra&&ajaxart.xml.xpath(a.ParentXtml,a.Param+"["+(2+a.Index)+"]").length>0){return[]}if(d=="MoveUp"&&a.IsArrayItem&&!a.ArrayExtra&&a.Index>0){return[]}if(d=="OpenAAEditor"&&a.Top&&b.vars.AAEditorState){return[]}return["true"]};a.ParamsToAdd=function(k,l){var g=a.AsXml(k,l,true);if(g.length==0){return[]}var e=[];var c=pt_def(g[0],a);if(c!=null){var d=ajaxart.xml.xpath(c,"Param");for(var f=0;f<d.length;f++){var b=d[f];var h=false;if(l.vars._ElemsOfOperation){var m=jQuery(l.vars._ElemsOfOperation[0]).children(".aa_list").children(".aa_item");for(j=0;j<m.length;j++){if(m[j].ItemData[0].Param==b.getAttribute("name")){h=true}}}if(!h){e.push(b)}}}e.push(ajaxart.parsexml("<Param name='Var' title='Variable' icon='"+l.vars._Images[0]+"/studio/bucket.jpg' />"));if(c&&c.getAttribute("id")!=null){e.push(ajaxart.parsexml("<Param name='"+c.getAttribute("id")+"' goto='true' title='Goto "+c.getAttribute("id")+" ...' icon='"+l.vars._Images[0]+"/studio/redo.png' />"))}return e};a.AddParam=function(h,k){aa_xtmldt_writeundodata(k.vars._ElemsOfOperation,k);var g;if(k.vars.Param&&ajaxart.isxml(k.vars.Param)){g=k.vars.Param[0]}else{if(k.vars.SimpleParam){g=aa_createElement(a.ParentXtml,"Param");g.setAttribute("name",ajaxart.totext_array(k.vars.SimpleParam))}}var c=g.getAttribute("name");var d=a.AsXml(h,k,true);if(d.length==0){return[]}if(c=="Var"){var f=aa_createElement(d[0],c);d[0].appendChild(f)}else{if(g.getAttribute("goto")){a.ShowGoto=true}else{if((g.getAttribute("type")==null||g.getAttribute("type").indexOf("[]")==-1)&&d[0].getAttribute(c)==null&&ajaxart.childElem(d[0],c)==null){if(g.getAttribute("Default")){d[0].setAttribute(c,g.getAttribute("Default"))}else{var b=ajaxart.childElems(g,"Default");if(b.length>0){if(b[0].getAttribute("value")){d[0].setAttribute(c,b[0].getAttribute("value"))}else{var f=aa_createElement(d[0],c);ajaxart.xml.copyElementContents(f,b[0]);d[0].appendChild(f)}}else{d[0].setAttribute(c," ");d[0].setAttribute(c,"")}}}else{a.ShowMoreParams=c}}}aa_save_manager.MarkAsModified(d,k);if(k.vars._ElemsOfOperation){var e=aa_xtmldt_refresh_elem(k,k.vars._ElemsOfOperation);var l=jQuery(e).children(".aa_list").children(".aa_item");for(j=0;j<l.length;j++){if(jQuery(l[j]).children(".aa_text").text().indexOf(c)==0){ajaxart_uiaspects_select(jQuery(l[j]),jQuery(),"auto",k,true);if(c!="Var"&&!g.getAttribute("goto")&&!aa_is_static_bool(l[j].ItemData[0])){l[j].ItemData[0].DoubleClick(l[j].ItemData,aa_ctx(k,{_ElemsOfOperation:[l[j]],_ItemsOfOperation:l[j].ItemData}))}}}}};a.Image=function(f,c){var e=aa_base_images()+"/studio/paper.jpg";var b=aa_base_images()+"/studio/boolean.gif";var g=aa_base_images()+"/studio/enum.gif";if(a.Param=="name"){return[aa_base_images()+"/studio/fonts1616.png"]}if(a.Component){return[aa_base_images()+"/studio/plugin1616.png"]}if(a.Param=="Param"){return[aa_base_images()+"/studio/mini-corp-mem.jpg"]}if(aa_is_static_bool(a)){if(a.ParentXtml.getAttribute(a.Param)=="true"){return[aa_base_images()+"/studio/true.bmp"]}else{return[aa_base_images()+"/studio/false.bmp"]}}if(!a.Type||a.Type=="data.Data"){return[e]}var d=a.Type;if(d.indexOf("[]")!=-1){d=d.substring(0,d.length-2)}d=d.replace(".","_");if(d=="enum"||d=="dynamic_enum"||d=="dynamic_enum_multi"){return[g]}if(ajaxart.types[d]&&ajaxart.types[d].getAttribute("icon")!=null){return ajaxart.run([],aa_xpath(ajaxart.types[d],"@icon")[0],"",c)}return[b]};a.DoubleClick=function(e,d){if(aa_is_static_bool(a)){var b;if(a.ParentXtml.getAttribute(a.Param)=="true"){b="false"}else{b="true"}a.Update(e,aa_ctx(d,{Value:[b]}))}else{if(a.Type=="inline"||a.Type=="struct"){if(a.ArrayExtra){a.Update(e,aa_ctx(d,{Xml:["<"+a.Param+"/>"]}))}return}else{if(a.Component){return}else{var f=(a.OnlyPrimitive||a.Param=="name")?["true"]:[];var c=a.ParamXml;if(a.Type=="parent_type"){c=ajaxart.parsexml("<Param type='"+a.ParentXtml.getAttribute("type")+"' />")}aa_run_component("xtml_dt_tree.OpenPrimitivePopup",e,aa_ctx(d,{ParamXml:[c],OnlyPrimitive:f}))}}}};a.ObjectForPreview=function(d,b){var c={isObject:true,ParentXtml:[a.ParentXtml],Field:[a.Param],Xtml:a.AsXml(d,b,true)};if(a.ArrayExtra){c.Field=[a.Param+"[+]"]}return[c]};a.More=function(e,b){var g=b.vars.MoreComponent[0];var f=a.AsXml(e,b)[0];var d=aa_createElement(f,aa_tag(f));var c=aa_createElement(d,g.getAttribute("itemsParam"));ajaxart.xml.copyElementContents(c,f);if(c.getAttribute("name")){d.setAttribute("name",c.getAttribute("name"));c.removeAttribute("name")}d.setAttribute("t",g.getAttribute("id"));d.appendChild(c);a.Update(e,aa_ctx(b,{Xml:[ajaxart.xml2text(d)]}))}}function aa_is_static_bool(b){if(!(b.Type=="data.Boolean"&&b.ParamXml!=null&&b.ParamXml.getAttribute("script")==null)){return false}var c=b.ParentXtml.getAttribute(b.Param);if(c==""||c=="true"||c=="false"){return true}if(c==null){elems=ajaxart.childElems(b.ParentXtml,b.Param);if(elems.length>0){var a=elems[0].getAttribute("value");if(a=="true"||a=="false"||a==""){return true}}else{return true}}return false}function aa_after_update(b,a){a.vars._XtmlTreeObj[0].AfterUpdate([b.ParentXtml],a)}function aa_xtmldt_writeundodata(d,a,h){if(a.vars._UndoData==null){return}var c=(h)?h:{isObject:true};c.Path="";var e=d;while(!e[0].ItemData[0].Top){var g=e[0].ItemData[0].Text(e[0].ItemData,a)[0].split(" =")[0];c.Path=g+((c.Path=="")?"":"/"+c.Path);e=jQuery(e[0]).parents(".aa_item")}if(c.Operation==null){c.Operation="Update"}var f=d[0].ItemData[0];if(f.Top){c.Component=[ajaxart.xml2text(f.ParentXtml)]}else{if(f.IsArrayItem){if(f.ArrayExtra){c.Operation="Delete";c.Path=c.Path.replace("+",f.Index+1)}else{var b=ajaxart.xml.xpath(f.ParentXtml,f.Param+"["+(1+f.Index)+"]")[0];c.Component=[ajaxart.xml2text(b)]}}else{if(f.ParentXtml.getAttribute(f.Param)!=null){c.Primitive=[f.ParentXtml.getAttribute(f.Param)]}else{var d=ajaxart.childElem(f.ParentXtml,f.Param);if(d!=null){c.Component=[ajaxart.xml2text(d)]}else{c.Operation="Delete"}}}}if(a.vars.Undo==null||a.vars.Undo[0]==false){a.vars._UndoData[0].UndoOperations.push(c)}else{a.vars._UndoData[0].RedoOperations.push(c)}}function aa_xtmldt_refresh_elem(a,d){if(!d.length){return[]}var b=d[0].ItemData;var f=ajaxart_uiaspects_refreshElements(d,true);ajaxart_uiaspects_select(jQuery(f[f.length-1]),jQuery(),"auto",a,true);var e=jQuery(f[f.length-1]).find(".aa_item");e.each(function(){var g=aa_xtmldt_treecntr(a);g.CollapseElem(jQuery(this),true)});for(var c=0;c<f.length;c++){if(f[c].ItemData==b){return[f[c]]}}return[]}function aa_xtmldt_treecntr(a){if(a.vars._Cntr){var b=a.vars._Cntr[0];while(aa_totext(b.ID)=="show_field"&&b.ParentCntr){b=b.ParentCntr}return b}return null}function aa_xtmldt_create_xml_obj(a,b,d){var c={};c.IsActionDisabled=function(f,e){return["true"]};c.HasNoContent=function(f,e){return["true"]};c.ParamsToAdd=function(f,e){return[]};c.Image=function(f,e){return[aa_base_images()+"/studio/xml1616.gif"]};c.Text=function(g,e){var f=ajaxart.childElem(a,"*");if(!f){return[b]}else{return[aa_tag(f)+" ..."]}};c.DoubleClick=function(h,e){var f={isObject:true,ParentXtml:[a],DynamicContent:a.getAttribute("DynamicContent")=="true"};var g=ajaxart.childElems(a,"*");if(g.length!=0){f.Xml=g}else{f.Xml=[aa_createElement(a,d)]}f.OnOK=function(m,k){var n=aa_xtmldt_treecntr(e);if(ajaxart.totext_array(m[0].DynamicContent)=="true"){a.setAttribute("DynamicContent","true")}else{a.removeAttribute("DynamicContent")}var l=ajaxart.childElem(a,"*");if(l!=null){a.removeChild(l)}a.appendChild(aa_importNode(m[0].Xml[0],a));aa_invoke_cntr_handlers(n,n.RefreshItemTextAndImage,e.vars._ElemsOfOperation,e);ajaxart_uiaspects_select(jQuery(e.vars._ElemsOfOperation[0]),jQuery(),"auto",e,true)};aa_run_component("xtml_dt_tree.OpenXmlDialog",[f],e)};c.GetXtml=function(){return[a]};return c}function pt_def(a,d){var b=null;var c=a.getAttribute("t");if(d.Type=="inline"){b=d.ParamXml}else{if((a.getAttribute("t")||d.Component)&&a.getAttribute("value")==null){if(d.Component){c="xtml_dt_tree.ComponentDef"}b=aa_component_definition(c)}}return b}function aa_xtmldt_setnextlevel(a,b){a.NextLevel=function(c,p){obj=c[0];var y=obj.ParentXtml;if(obj.IsArrayItem){if(obj.ArrayExtra){return[]}y=ajaxart.xml.xpath(obj.ParentXtml,obj.Param+"["+(1+obj.Index)+"]")[0]}else{if(obj.Param){var h=obj.Param;if(y.getAttribute(h)){return[]}var g=ajaxart.xml.xpath(y,h);if(g.length==0){return[]}y=g[0]}}if(obj.ArrayExtra){return[]}if(!y||y.nodeType!=1){return[]}var m=[];var F={};var u={isObject:true,Xtml:y,Items:[]};var C=pt_def(y,obj);if(C!=null){var A=ajaxart.xml.xpath(C,"Param");for(var t=0;t<A.length;t++){var s=A[t];var q={isObject:true,ParentXtml:y,ParamXml:s,Param:s.getAttribute("name"),Type:s.getAttribute("type")};if(ajaxart.totext_array(p.vars._HideEmpties)=="true"&&y.getAttribute(q.Param)==null&&ajaxart.childElems(y,q.Param).length==0&&q.Param!=obj.ShowMoreParams){if(!s.getAttribute("essential")||ajaxart.childElem(s,"Default")||s.getAttribute("Default")){continue}}if(s.getAttribute("has_name")){q.HasName=true}if(s.getAttribute("only_primitive")){q.OnlyPrimitive=true}if(s.getAttribute("only_element")){q.OnlyElement=true}F[q.Param]=true;if(!q.Type){q.Type="data.Data"}if(q.Type.indexOf("[]")==-1){m.push(q);aa_xtmldt_setfunctions(q)}else{var B=ajaxart.xml.xpath(y,q.Param);var e=q.Type;var z=e.substring(0,e.length-2);for(var r=0;r<=B.length;r++){var v={isObject:true,ParentXtml:y,ParamXml:s,Param:q.Param,Type:z,Index:r,IsArrayItem:true};if(s.getAttribute("has_name")){v.HasName=true}if(r==B.length){v.ArrayExtra=true}m.push(v);aa_xtmldt_setfunctions(v)}}}if(y.getAttribute("t")=="xml.Xml"){m=[aa_xtmldt_create_xml_obj(y,"xml","xml")]}if(y.getAttribute("t")=="ui.Html"){m=[aa_xtmldt_create_xml_obj(y,"html","div")]}}var f=[];var x=[],n=[];var o=y.attributes;if(obj.HasName&&!F.name){f.push("name");F.name=true}for(var t=0;t<o.length;t++){var w=o.item(t).nodeName;if(F[w]==null&&w!="t"&&w!="value"&&w!="customxtml"){f.push(w);F[w]=true}}var k=0;var l=y.childNodes.length;for(var t=0;t<l;t++){if(y.childNodes.item(t).nodeType!=1){continue}var E=aa_tag(y.childNodes.item(t));if(F[E]==null){if(E=="Var"){var q={isObject:true,ParentXtml:y,Param:"Var",IsArrayItem:true,Index:k,Type:"data.Data",HasName:true};k++;q.ParamXml=ajaxart.parsexml('<Param type="data.Data" name="'+q.Param+'" />');aa_xtmldt_setfunctions(q);n.push(q)}else{if(y.getAttribute("t")!="xml.Xml"&&y.getAttribute("t")!="ui.Html"){f.push(E);F[E]=true}}}}for(var t=0;t<f.length;t++){var d=f[t];var q={isObject:true,ParentXtml:y,Param:d};q.ParamXml=ajaxart.parsexml('<Param type="data.Data" name="'+q.Param+'" />');if(q.Param=="Condition"){q.Type="data.Boolean";q.ParamXml.setAttribute("type","data.Boolean");q.ParamXml.setAttribute("script","true")}if(q.Param=="Trace"){q.ParamXml.setAttribute("type","enum");for(var D=0;D<=9;D++){q.ParamXml.appendChild(ajaxart.parsexml("<value>"+D+"</value>","","",true,q.ParamXml))}}F[q.Param]=true;aa_xtmldt_setfunctions(q);if(q.Param=="Condition"||q.Param=="Data"){n.push(q)}else{x.push(q)}}u.Items=n.concat(m).concat(x);aa_xtmldt_setnextlevel(u,b);if(obj.ShowGoto){var v={isObject:true,Component:true,ParentXtml:aa_component_definition(y.getAttribute("t"))};aa_xtmldt_setfunctions(v);u.Items.push(v)}return[u]}}var aa_save_manager={isObject:true,modified:{},MarkAsModified:function(c,a){var b=c[0];while(b!=null&&b.nodeType!=9&&aa_tag(b)!="Component"){b=b.parentNode}if(!b||b.nodeType==9||!b.parentNode||b.parentNode.getAttribute("ns")==null){return}var d=b.parentNode.getAttribute("ns")+"."+b.getAttribute("id");if(aa_save_manager.modified[d]==null){aa_save_manager.modified[d]=true}aa_save_manager.modified.not_empty=true},MarkComponentIdAsModified:function(b,a){var c=ajaxart.totext_array(b);if(aa_save_manager.modified[c]==null){aa_save_manager.modified[c]=true}},Save:function(b,a){var c=[];for(i in aa_save_manager.modified){if(i!="not_empty"){c.push(i)}}aa_run_component("xtml_dt_tree.SaveToServer",b,aa_ctx(a,{_ModifiedComponents:c}))},NoModified:function(b,a){if(aa_save_manager.modified.not_empty!=null){return[]}return["true"]},Clean:function(c,a){aa_save_manager.modified={};var b=jQuery(".dialog_box").find(".aa_xtml_tree")[0];var d=b&&b.Cntr;if(d){container.ContainerChange[0](c,a)}}};
ajaxart.load_xtml_content('',ajaxart.parsexml('<xtml package="true"><xtml ns="aaeditor"><Component id="State" type="data.Data"><Param name="GlobalPreviewXtml"><Default t="xtml.Xtml" Xtml="%%" /></Param><Param name="TreeXtml"><Default t="xtml.Xtml" Xtml="%%" /></Param><Param name="SelectedInTree" /><Param name="SaveAction" script="true" type="action.Action"/><xtml t="xtml.Params"><Param name="GlobalPreviewXtml" value="%$GlobalPreviewXtml%" /><Param name="TreeXtml" value="%$TreeXtml%" /><Param name="SelectedInTree" value="%$SelectedInTree%" /><Param name="Clipboard" value="" /><Param name="ModifiedComponents" t="xml.Xml"><update /></Param><Param name="OriginalGlobalPreviewXtml" value="%$GlobalPreviewXtml%" /><ScriptParam name="Save" t="xtml.UseParam" Param="SaveAction"/></xtml></Component><Component id="UpdateEditorState" type="action.Action"><Param name="GlobalPreviewXtml"><Default t="xtml.Xtml" Xtml="%%" /></Param><Param name="TreeXtml"><Default t="xtml.Xtml" Xtml="%%" /></Param><Param name="SelectedInTree" /><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$AAEditorState%" Property="GlobalPreviewXtml" Value="%$GlobalPreviewXtml%" /><Action t="object.SetProperty" Object="%$AAEditorState%" Property="TreeXtml" Value="%$TreeXtml%" /><Action t="object.SetProperty" Object="%$AAEditorState%" Property="SelectedInTree" Value="%$SelectedInTree%" /></xtml></Component><Component id="CaptureSelect" type="action.Action" execution="native"><Param name="Top" /><Param name="OnSelect" type="action.Action" /><Param name="Mode" type="enum"><Default value="inspect" /><value>inspect</value><value>add</value></Param></Component><Component id="ClearCaptureBox" type="action.Action" execution="native"></Component><Component id="RegisterForToolbarKeyboard" type="action.Action" execution="native" /><Component id="GlobalPreviewControl" type="ui.Control"><xtml t="ui.List" Name="aaeditor global"><Control1 t="xtml.RunXtmlWithFullContext" InPreviewMode="true" XtmlAndContext="%$AAEditorState/TreeXtml%"/><Control t="aaeditor.RuntimeObjectControl"><Condition t="yesno.And" Remark="no global preview for actions"><Item t="yesno.ItemsNotEqual" Item1="action.ActionUsage" ><Item2 t="data.Pipeline" ><Item value="%$AAEditorState/GlobalPreviewXtml/script%" /><Item value="%@t%" /></Item2></Item><Item t="yesno.ItemsNotEqual" Item1="action.Action"  ><Item2 t="data.Pipeline" ><Item value="%$AAEditorState/GlobalPreviewXtml/script%" /><Item value="%@t%" /><Item t="xtml.ComponentDefinition" ID="%%" /><Item value="%@type%" /></Item2></Item></Condition><Object t="data.Pipeline"><Var name="OpenDialog" value="false" Remark="avoid dialog popup when global preview is dialog" /><Item t="xtml.RunXtml" Xtml="%$AAEditorState/GlobalPreviewXtml%" ><Method value="Result"><Condition t="xml.IsOfTag" Tag="Usage" Data="%$AAEditorState/GlobalPreviewXtml/script%" /></Method></Item><Item t="data.IfThenElse" Else="%%" ><Var name="Comp" t="data.Pipeline"><Item value="%$AAEditorState/GlobalPreviewXtml/script%" /><Item value="%@t%_Preview" /></Var><If t="xtml.ComponentExists" ComponentID="%$Comp%"/><Then t="xtml.RunXtmlByComponentId" ComponentID="%$Comp%"><Var name="Preview" t="data.Struct"><Item Name="Output" Value="%%" /></Var></Then></Item></Object></Control></xtml></Component><Component id="Refresh" type="action.Action"><Param name="Original" type="data.Boolean" /><Param name="SelectedInTree" type="data.Boolean" /><Param name="GlobalPreview" type="data.Boolean" /><Param name="LocalPreview" type="data.Boolean" /><xtml t="action.RunActions" ><Action t="uiaction.Refresh" RunOn="aaeditor preview" Condition="%$LocalPreview%" /><Action t="uiaction.Refresh" RunOn="aaeditor global" Condition="%$GlobalPreview%" /><Action t="uiaction.Refresh" RunOn=".aaeditor_global_original" Condition="%$Original%" /><Action t="data.IfThenElse" Condition="%$SelectedInTree%"><If t="yesno.IsEmpty" Value="%$AAEditorState/SelectedInTree/ParentXtml%" Remark="root" /><Then t="uiaction.Refresh" RunOn="script tree control" /><Else t="tree.RefreshSelected" RunOn="script tree control" Condition="%$SelectedInTree%"    RefreshParentChildren="true" IdentifierForSelected="%Field%" RefreshChildren="true"><IdentifierForCurrent t="data.IfThenElse" Else="%Field%"><If t="yesno.Contains" Data="%Field%"><Text value="[+]" /></If><Then t="text.Text" Text="%$FieldTag%[%$Index%]"><Var name="FieldTag" t="text.RemoveSuffix" Data="%Field%" Separator="[" /><Var name="Index" t="data.Pipeline"><Item value="%ParentXtml/{$FieldTag}%" /><Aggregator t="data.Count" /></Var></Then></IdentifierForCurrent></Else></Action></xtml></Component><Component id="RefreshScriptDialog" type="action.Action"><xtml t="aaeditor.Refresh" SelectedInTree="true" GlobalPreview="true" LocalPreview="true" /></Component><Component id="IsMultipleObject" type="data.Data" execution="native"><Param name="Value" ><Default value="%%" /></Param></Component><Component id="InPreview" type="ui.Control" execution="native"><Param name="Control" type="ui.Control" script="true"/></Component><Component id="HowLong" type="action.Action" execution="native"><Param name="Usage" /></Component><Component id="ProfileGlobals" type="action.Action" execution="native"><Param name="Usage" /></Component><Component id="ComponentTitle" type="data.Data" execution="native" internal="true"></Component><Component id="Save" type="action.Action"><xtml t="object.RunMethod" Object="%$XtmlDtContext%" Method="Save" /></Component><Component id="ClearCaches" type="action.Action" execution="native" /><Component id="ComponentsOfTypeNew" type="data.Data" execution="native"><Param name="Type" /><Param name="ForAllTypes" type="data.Boolean"/><Param name="LightOnly" type="data.Boolean"/></Component><Component id="MainControl" type="ui.Control"><Param name="ControlLanguage" /><Param name="ShowSave" type="data.Boolean"><Default value="true"/></Param><xtml t="ui.List" ><Layout t="ui.LineBreak" IncludeMargins="false" /><Control t="ui.List" Class="aaeditor_global_original"><Var name="Language" t="data.FirstSucceeding"><Item value="%$ControlLanguage%" /><Item value="%$Language%" /></Var><Var name="InAAEditorGlobal" value="true" /><Control t="ui.Switch"><Var name="GPXtml" t="xtml.ToScript" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /><Case><IfCondition t="yesno.ItemsEqual" Item1="%$GPXtml/@t%" Item2="usage.DataUsage" /><Then t="xmlui.ReadOnlyXml"><Data t="xtml.RunXtml" Method="Result" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Then></Case><Case><IfCondition t="yesno.ItemsEqual" Item1="%$GPXtml/@t%" Item2="action.ActionUsage" /><Then t="xmlui.ReadOnlyXml"><Data t="xtml.RunXtml" Method="Result" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Then></Case><Case><IfCondition t="yesno.ItemsEqual" Item1="%$GPXtml/@t%" Item2="ui.ControlUsage" /><Then t="xtml.RunXtml" Method="Result" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Case><Case><IfCondition t="yesno.ItemsEqual" Item1="%$GPXtml/@t%" Item2="yesno.FilterUsage"/><Then t="ui.List"><Control t="ui.Text" Text="input for filter:"/><Control t="xmlui.ReadOnlyXml"><Data t="xtml.RunXtml" Method="Data" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Control><Control t="ui.Text"><Text t="xtml.RunXtml" Method="Result" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Control></Then></Case><Default t="xtml.RunXtml" Xtml="%$AAEditorState/OriginalGlobalPreviewXtml%" /></Control></Control></xtml></Component></xtml><xtml ns="aaeditor"><Component id="ShowBasicComponents" type="data.Data" hidden="true"><xtml t="ui.UrlFragment" /></Component><Component id="SelectDialogData" type="data.Data"><Param name="TreeItemData" /><xtml t="xml.WithChanges"><Var name="Type" t="text.RemoveSuffix" Data="%$TreeItemData/Type%" Separator="[" /><Var name="ValueType" t="data.IfThenElse" Then="primitive" Else="component"><If t="yesno.IsOneOf" Value="%$Type%"><Option value="data.Data" /><Option value="data.Boolean" /><Option value="enum" /><Option value="dynamic_enum" /></If></Var><Xml t="xml.Xml" DynamicContent="true"><aaeditor valuetype="%$ValueType%" type="%$Type%" primitive="" component="" /></Xml><Change t="xml.SetAttribute" AttributeName="primitive"><Condition t="xml.IsAttribute" Data="%$TreeItemData/Xtml%" /><Value value="%$TreeItemData/Xtml%" /></Change><Change t="xml.SetAttribute" AttributeName="primitive"><Condition t="yesno.NotEmpty" Data="%$TreeItemData/Xtml/@value%" /><Value value="%$TreeItemData/Xtml/@value%" /></Change><Change t="xml.SetAttribute" AttributeName="component"><Value value="%$TreeItemData/Xtml/@t%" /></Change></xtml></Component><Component id="DescriptionOfComponent"><Param name="ComponentId"><Default value="%%" /></Param><xtml Name="description of component" t="ui.List" Class="aaeditor_description_of_component"><Control t="ui.List"><Layout t="ui.Horizontal" /><Control t="ui.Button"><Var name="SimpleMode" t="aaeditor.ShowBasicComponents" /><Image t="data.IfThenElse" If="%$SimpleMode%" Then="%$_Images%/studio/more.gif" Else="%$_Images%/studio/less.gif" /><Text t="data.IfThenElse" If="%$SimpleMode%" Then="show advanced components" Else="show only basic components" /><OnClick t="action.RunActions"><Action t="uiaction.SetUrlFragment"><Fragment t="data.IfThenElse" If="%$SimpleMode%" Then="false" Else="true" /></Action><Action t="uiaction.Refresh" RunOn=".aaeditor_component_selector" /></OnClick><Style t="ui.ButtonAsImage" /></Control><Control t="ui.Button" Text="see usages of %$Name%"><Var name="Name" t="text.Capitalize" Mode="capital to separate words"><Data t="text.RemovePrefix" Separator="." Data="%$ComponentId%" /></Var><OnClick t="uiaction.GoToPage" Url="http://www.artwaresoft.com/ajaxart/gallery.html?%$DummyId%#%$ComponentId%"><Var name="DummyId" t="data.UniqueNumber" Prefix="_" /></OnClick><Style t="ui.ButtonAsHyperlink" /></Control></Control><Control t="ui.Text" Class="aaeditor_description_of_component_text"><Text t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$ComponentId%" /><Item value="%Description%" /></Text></Control></xtml></Component><Component id="KeyPressedChangesValue" type="data.Boolean"><Param name="KeyPressed" /><xtml t="yesno.OR" Data="%$KeyPressed%"><Item t="text.MatchesRegex" Expression="[a-zA-Z ]" /><Item t="yesno.Empty" /></xtml></Component><Component id="PrimitiveTextBox" type="ui.Control"><xtml t="ui.CustomSuggestionBox" OptionLabel="" TriggerChars="%$/" Class="primitive_text_box" Data="a"><Var name="Context" t="aaeditor.CalcLocalPreviewData" /><Options t="data.Switch"><Case If="" Then=""><IfCondition t="text.EndsWith" With="$" /><Then t="xtml.VariablesOfContext" ScriptAndContext="%$TesterResult%" /></Case></Options></xtml></Component><Component id="OpenPrimitiveAsDialog"><Param name="Context"/><Param name="RunOnOK" type="action.Action" script="true"/><xtml t="dlg.OpenDialog" Title="Set value of %$AttrName%"><Var name="Attribute" value="%$AAEditorState/SelectedInTree/Xtml%"/><Var name="AttrName" t="xml.AttributeName" Data="%$Attribute%"/><Var name="AsText" t="data.WritableText" DefaultValue="%%"/><Contents t="ui.List"><Control t="ui.Button" Text="Insert Dynamic Value ..." Image="%$_Images%/add1616.gif"><Style t="ui.ButtonAsHyperlink"/><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Insert Dynamic Value"><Content t="ui.Document"><Fields t="field.Field1" Title="Expression"><Control t="aaeditor.EditPrimitiveTextWithPreview" DisableLargeText="true" Context="%$Context%"/></Fields></Content><DialogData t="data.WritableText"/><RunOnOK t="xmlui.InsertTextToCodeMirror" Text="%%" RunOn="updown(.dialog_box,.textarea)"/></Dialog></OnClick></Control><Control t="xmlui.CodeMirrorTextarea" AutoFocus="true" Type="text" Class="dt_primitive_textarea" Data="%$AsText%"><Width t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true"/><Height t="ui.ScreenSize" Axis="height" Margin="200" AsHtmlString="true"/></Control></Contents><Feature t="dlg.RunBeforeOK"><Action t="xmlui.CallUpdateOfCodeMirror" RunOn=".dt_primitive_textarea" /></Feature><RunOnOK t="action.RunActions"><Action t="xtml.UseParam" Param="RunOnOK" Data="%$AsText%"/></RunOnOK></xtml></Component></xtml><xtml ns="aaeditor"><Component id="DataPopupControl" type="ui.Control" hidden="true"><Param name="Input"><Default t="data.Same"/></Param><Param name="UpdateValue" type="action.Action" script="true"><Default t="xtml.RunXtml" Xtml="%$_FieldEditorContext/UpdateValue%"/></Param><xtml t="xmlui.XmlSelector" Class="noborder" Data="%$Input%"><Var name="XmlRoot"/><OnDoubleClick t="action.RunActions"><Action t="menu.CloseContextMenu" /><Action t="xtml.UseParam" Param="UpdateValue" ><Data t="xml.XPathOfNode" TopXml="%$XmlRoot%"/></Action></OnDoubleClick><OnSelect t="action.IfThenElse"><Var name="FirstMultiValue" t="data.Pipeline"><Item t="data.PathItems" Next="%..%"><StopCondition t="yesno.ItemsEqual" Item1="%%" Item2="%$XmlRoot%"/></Item><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty"><Value t="xml.Siblings" OnlyWithSameTag="true"/></Filter></Item><Aggregator t="data.First"/></Var><If t="yesno.IsEmpty" Value="%$FirstMultiValue%"/><Then t="xtml.UseParam" Param="UpdateValue"><Data t="xml.XPathOfNode" TopXml="%$XmlRoot%"/></Then><Else t="menu.OpenContextMenu"><Menu t="menu.ContextMenu"><Item t="menu.DynamicMenuItems" ><Image t="xtml.RunXtml" Xtml="%@img%" /><Var name="ValueName" t="text.FirstSucceeding" Data="%$Selected%"><Item t="xml.AttributeName" /><Item t="xml.Tag" /></Var><Text t="xtml.RunDynamicText" Text="%@text%" /><Var name="Type" value="number"><Condition t="yesno.IsNumber"/></Var><Items t="data.Pipeline"><Item t="aaeditor.Aggregators" /><Item value="%aggregator%" /><Item t="yesno.PassesFilter"><Filter t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%@type%"/><Then value="true"/><Else t="yesno.ItemsEqual" Item1="%@type%" Item2="%$Type%"/></Filter></Item></Items><Action t="xtml.UseParam" Param="UpdateValue"><Var name="XPath" t="text.Concat"><Item t="xml.XPathOfNode" Specific="true" Data="%$FirstMultiValue/..%" TopXml="%$XmlRoot%"/><Item value="/"><Condition t="yesno.ItemsNotEqual" Item1="%$FirstMultiValue/..%" Item2="%$XmlRoot%"/></Item><Item t="xml.XPathOfNode" Specific="false" Data="%$Selected%" TopXml="%$FirstMultiValue/..%"/></Var><Var name="SpecificXPath" t="xml.XPathOfNode" Specific="true" Data="%$Selected%" TopXml="%$XmlRoot%"/><Data t="xtml.RunDynamicText" Text="%@out%" Input="%$XPath%"/></Action></Item><Item t="menu.MenuItem" Text="filter by \'%$Att%\'" Image=""><Condition t="xml.IsAttribute" Data="%$Selected%" /><Action t="xtml.UseParam" Param="UpdateValue" ><Data t="text.Concat" Items=""><Item t="xml.XPathOfNode" Data="%$Selected/..%" TopXml="%$XmlRoot%"/><Item value="[@%$Att% = \'%$Selected%\']"><Var name="Att" t="xml.AttributeName" Data="%$Selected%"/></Item></Data></Action><Var name="Att" t="xml.AttributeName" Data="%$Selected%" /></Item></Menu></Else></OnSelect></xtml></Component><Component id="Aggregators" type="data.Data"><xtml t="xml.Xml"><aggregators><aggregator text="All of \'%$ValueName%\'" out="%%" img="%$_Images%/studio/back1616.gif" /><aggregator text="Count" out="=Count(%%)" img="%$_Images%/studio/balls1616.png" /><aggregator text="Concat" out="=Concat(%%,\',\')" img="%$_Images%/studio/chart1616.png" /><aggregator text="Sum" out="=Sum(%%)" img="%$_Images%/studio/chart1616.png" type="number" /><aggregator text="Average" out="=Average(%%)" img="%$_Images%/studio/chart1616.png" type="number" /><aggregator text="Max" out="=Max(%%)" img="%$_Images%/studio/chart1616.png" type="number" /><aggregator text="Min" out="=Min(%%)" img="%$_Images%/studio/chart1616.png" type="number"  /><aggregator text="This specific \'%$ValueName%\'" out="%$SpecificXPath%" img="%$_Images%/studio/back1616.gif" /></aggregators></xtml></Component></xtml><xtml ns="aaeditor"><Component id="XPathEditor" type="field_aspect.Aspect"><Param name="XmlItems" /><Param1 name="SuggestDownToLeafs" type="data.Boolean" ><Default value="true" /></Param1><xtml t="field_aspect.Aspects" ><FieldAspect t="field_aspect.CustomSuggestionBox"  ><OnChangeAtEndOfText t="action.RunActions" ><Var name="HalfWrittenPart" t="text.Split" Separator="/" Part="Last" /><Var name="TextForCalculation" t="data.Pipeline"><Item t="text.RemoveSuffix" Suffix="%$HalfWrittenPart%"/><Item t="text.RemoveSuffix" Suffix="/"/></Var><Var name="CurrentElements" t="data.Pipeline"><Item value="%$XmlItems%" /><Item t="xml.XPath" XPath="%$TextForCalculation%" /></Var><Action t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%$HalfWrittenPart%"><Options t="data.List"><Item t="data.Pipeline" Remark="attributes"><Item value="%$CurrentElements%" /><Item t="xml.Attributes"/><Item t="xml.AttributeName"/><Item value="@%%" /><Aggregator t="data.MakeUnique" /></Item><Item t="data.Pipeline" Remark="elements"><Item value="%$CurrentElements%" /><Item value="%*%" /><Item t="xml.Tag"/><Aggregator t="data.MakeUnique" /></Item></Options><OptionLabel value="%%" /><OptionDescription t="text.Concat" Separator=","><Items t="data.Pipeline"><Item value="%$CurrentElements/{}%" /><Aggregator t="data.MakeUnique"/></Items></OptionDescription><OptionImage value="%$_Images%/studio/yesno1616.gif"/></Action></OnChangeAtEndOfText><OnAfterTextAdded1 t="field_aspect.AddTextToSuggestionBox" Text="/" TriggerOnAfterTextAdded="false"><Var name="CurrentElement" value="%$XmlItems/{}%" /><Condition t="yesno.And"><Item value="%$SuggestDownToLeafs%" /><Item t="yesno.NotEmpty"><Value t="data.Pipeline"><Item value="%$CurrentElement%" /><Item t="data.List"><Item value="%*%" /><Item t="xml.Attributes" /></Item></Value></Item></Condition></OnAfterTextAdded1><OnCtrlSpace t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="%%" TextPatternToAdd="%%"/></FieldAspect><FieldAspect t="field_aspect.OnClick"><Action t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="%%" TextPatternToAdd="%%" /></FieldAspect></xtml></Component><Component id="EditPrimitiveTextBoxAspect" type="field_aspect.Aspect"><Param name="Context" script="true"><Default value="%$_Context%"/></Param><Param name="Param"/><Param name="OnlyPrimitive" type="data.Boolean"/><Param name="OnSelectComponent" type="action.Action" script="true"/><Param name="Simple" type="data.Boolean" /><xtml t="field_aspect.Aspects" ><Var name="EnumValues" t="data.Switch" Value="%$Param/@type%"><Case If="enum"><Then t="data.FirstSucceeding"><Item value="%$Param/value%"/><Item t="data.ListByCommas" List="%$Param/@Options%" /></Then></Case><Case If="dynamic_enum"><Then t="xtml.RunXtml" Xtml="%$Param/Options%"/></Case><Case If="dynamic_enum_multi"><Then t="xtml.RunXtml" Xtml="%$Param/Options%"/></Case></Var><FieldAspect t="object.SetProperty" Object="%$_Field%" Property="SourceParam" Value="%$_ParamXml%"/><FieldAspect t="field_aspect.Css" Class="primitive_text_box" /><FieldAspect t="field_aspect.OnKeyUp"><Action t="field_dt.RefreshPreview"><Condition t="yesno.And"><Item value="%$KeyCode% == \'13\'" /><Item t="yesno.IsEmpty" Value="%$_XtmlTreeObj%" /></Condition></Action></FieldAspect><FieldAspect t="field_aspect.CustomSuggestionBox" Name="suggestion_box"><OnChangeAtEndOfText t="data.Switch" ><Var name="HalfWrittenPart" t="aaeditor.EditPrimitiveHalfWrittenPart" /><Var name="TextForCalculation" t="text.RemoveSuffix" Suffix="%$HalfWrittenPart%"/><Case Remark="component"><IfCondition t="yesno.And"><Item t="text.StartsWith" With="="/><Item t="yesno.NotEmpty" Value="%$Param%"/><Item t="yesno.Not" Of="%$OnlyPrimitive%" /></IfCondition><Then t="data.IfThenElse"><Var name="Type" t="text.FirstSucceeding"><Item value="%$Param/@type%"/><Item value="data.Data"/></Var><If t="yesno.Contains"><Text value="."/></If><Then Remark="with namespace" t="field_aspect.OpenSuggestionBoxList" FilterItemsDifferantThanHalfWrittern="false" HalfWrittenAlwaysOnStart="false" OptionLabel="%%" OptionImage="%$_Images%/studio/integer.gif"><HalfWrittenPart t="text.Substring" Start="2"/><Options t="aaeditor.ComponentsOfType" Type="%$Type%" IncludeAdvancedComponents="true"><TextFilter t="text.Substring" Start="2"/></Options><OnSelect t="xtml.UseParam" Param="OnSelectComponent"/></Then><Else Remark="no namespace" t="field_aspect.OpenSuggestionBoxList" FilterItemsDifferantThanHalfWrittern="false" HalfWrittenAlwaysOnStart="false" OptionImage="%$_Images%/studio/integer.gif"><HalfWrittenPart t="text.Substring" Start="2"/><Options t="aaeditor.ComponentsOfType" Type="%$Type%"><TextFilter t="text.Substring" Start="2"/></Options><OptionLabel t="data.JavaScript" Code="function(data) { return aa_component_title(data); }"/><OnSelect t="xtml.UseParam" Param="OnSelectComponent"/></Else></Then></Case><Case Remark="enum"><IfCondition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$EnumValues%"/><Item t="yesno.NotContains" Text="\\%"/><Item t="yesno.Not" Of="%$OnlyPrimitive%" /></IfCondition><Then t="field_aspect.OpenSuggestionBoxList" OptionLabel="%%" Options="%$EnumValues%" HalfWrittenPart="%%" HalfWrittenAlwaysOnStart="false" OptionImage="%$_Images%/studio/boolean.gif"><OnSelect t="xtml.UseParam" Param="OnSelectComponent"><Var name="_Enum" value="true"/></OnSelect></Then></Case><Case1 Remark="Aggregator, only ="><IfCondition t="yesno.And"><Item t="yesno.Contains" ><Text value="\\%"/></Item><Item t="yesno.ItemsEqual" Item1="%$HalfWrittenPart%"><Item2 value="="/></Item><Item1 t="yesno.NotEmpty"><Value t="data.Pipeline"><Item t="xtml.UseParam" Param="Context" /><Item value="%Input/Items%" /></Value></Item1></IfCondition><Then t="field_aspect.OpenSuggestionBoxList" OptionLabel="%%" HalfWrittenAlwaysOnStart="false" OptionImage="%$_Images%/studio/boolean.gif"><Options t="data.ListByCommas" List="Count,Sum,Max,Min,Average"/><HalfWrittenPart t="text.RemovePrefix" Data="%$TextForCalculation%"><Prefix value="="/></HalfWrittenPart><OnSelect t="action.RunActions"><Action t="field_aspect.AddTextToSuggestionBox" Text="(Items/" TriggerOnAfterTextAdded="true" /></OnSelect></Then></Case1><Case1 Remark="Aggregator, Fields"><IfCondition t="yesno.And"><Item t="text.MatchesRegex" Text="%$TextForCalculation%" Expression="\\%=[a-zA-Z]+[(]Items/" /><Item t="yesno.Contains" ><Text value="\\%"/></Item><Item1 t="yesno.NotEmpty"><Value t="data.Pipeline"><Item t="xtml.UseParam" Param="Context"/><Item value="%Input/Items%"/></Value></Item1></IfCondition><Then t="field_aspect.OpenSuggestionBoxList" OptionLabel="%FieldName%" OptionImage="%$_Images%/studio/boolean.gif" HalfWrittenPart1="%$TextForCalculation%" OptionDescription="%Desc%"><Var name="Ctx" t="xtml.UseParam" Param="Context"/><Options t="xtml_dt.AggregatorFields" Items="%$Ctx/Input/Items%" /><OnSelect t="field_aspect.AddTextToSuggestionBox" Text=")\\%"/></Then></Case1><Default t="action.Switch" Remark="primitive"><Var name="Ctx" t="xtml.UseParam" Param="Context"/><Var name="Values" t="aaeditor.EditPrimitiveAssistValues" Context="%$Ctx%" Text="%$TextForCalculation%"/><Data value="%$Values%"/><Case Remark="vars list"><IfCondition t="yesno.ItemsEqual" Item1="%%" Item2="___VARS LIST"/><Then t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%$HalfWrittenPart%"><Options t="data.List"><Item t="data.Pipeline"><Condition t="yesno.Not" Of="%$Simple%" /><Item t="xtml.PartsOfContext" Context="%$Ctx/context%" Part="Param Names"/><Item value="_PARAM__%%"/></Item><Item t="data.Pipeline"><Item t="xtml.PartsOfContext" Context="%$Ctx/context%"><Part t="data.IfThenElse" If="%$Simple%" Then="Global Variable Names" Else="Variable Names" /></Item><Item value="_VAR__%%"/><Aggregator t="data.ReverseOrder"/></Item></Options><OptionLabel t="text.RemovePrefix" Separator="__"/><OptionDescription t="data.Switch" Value="%$txt%"><Value t="data.RuntimeObjectType"/><Var name="Txt" t="xtml.RunDynamicText" Context="%$Ctx/context%" Input="%$Ctx/Input%"><Text t="data.Pipeline"><Item t="text.RemovePrefix" Separator="__"/><Item value="\\%$%%\\%"/></Text></Var><Case If="text" Then="%%"/><Case If="xml"><Then t="data.Pipeline"><Item t="xml.Tag"/><Item value="&lt;%% ..."/></Then></Case><Case If="html"><Then t="data.Pipeline"><Item t="xml.Tag"/><Item value="&lt;%% ..."/></Then></Case><Case If="struct"><Then t="data.Pipeline"><Item t="data.StructEntryNames"/><Aggregator t="text.Concat" Separator="," Prefix="(" Suffix=")"/></Then></Case></OptionDescription><OptionImage t="data.IfThenElse" Then="%$_Images%/studio/integer.gif" Else="%$_Images%/studio/yesno1616.gif"><If t="text.StartsWith" With="_PARAM__"/></OptionImage></Then></Case><Case Remark="attributes of element"><IfCondition t="yesno.And"><Item t="xml.IsElement"/><Item t="yesno.OR"><Item t="yesno.IsEmpty" Value="%*%"/><Item t="text.StartsWith" Text="%$HalfWrittenPart%" With="@"/></Item></IfCondition><Then t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%$HalfWrittenPart%"><Options t="data.Pipeline"><Item t="xml.Attributes"/><Item t="xml.AttributeName"/><Aggregator t="data.MakeUnique"/></Options><OptionLabel value="@%%"/><OptionDescription t="text.Concat" Separator=","><Items t="data.Pipeline"><Item value="%$Values/@{}%"/><Aggregator t="data.MakeUnique"/></Items></OptionDescription><OptionImage value="%$_Images%/studio/yesno1616.gif"/></Then></Case><Case Remark="xml element"><IfCondition t="yesno.And"><Item t="xml.IsElement"/><Item t="yesno.IsEmpty" Value="%$HalfWrittenPart%"/></IfCondition><Then1 t="xmltree.OpenXmlSelector" TextBox="%$ControlElement%" /><Then t="field_aspect.OpenSuggestionBoxPopup"><Control t="aaeditor.DataPopupControl"><UpdateValue t="field_aspect.AddTextToSuggestionBox" Text="%%"/></Control></Then></Case><Case Remark="xml element : half written"><IfCondition t="yesno.And"><Item t="xml.IsElement"/><Item t="yesno.NotEmpty" Value="%$HalfWrittenPart%"/></IfCondition><Then t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%$HalfWrittenPart%"><Options t="data.Pipeline"><Item value="%*%"/><Item t="xml.Tag"/><Aggregator t="data.MakeUnique"/></Options><OptionLabel value="%%"/><OptionImage value="%$_Images%/studio/yesno1616.gif"/></Then></Case><Case><IfCondition t="yesno.ItemsEqual" Item1="%Type%" Item2="List"/><Then t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%$HalfWrittenPart%" Options="%List%" OptionLabel="%Value%" OptionDescription="%Desc%" OptionImage="%$_Images%/studio/yesno1616.gif"/></Case><Case Remark="Struct"><IfCondition t="yesno.IsStruct"/><Then t="field_aspect.OpenSuggestionBoxList" OptionLabel="%%"><Options t="data.StructEntryNames"/><OptionDescription t="data.Pipeline"><Item value="%$Values/{}%"/><Item t="data.Switch"><Case If="text" Then="%%"/><Case If="xml"><Then t="data.Pipeline"><Item t="xml.Tag"/><Item value="&lt;%% ..."/></Then></Case><Case If="html"><Then t="data.Pipeline"><Item t="xml.Tag"/><Item value="&lt;%% ..."/></Then></Case><Case If="struct"><Then t="data.Pipeline"><Item t="data.StructEntryNames"/><Aggregator t="text.Concat" Separator="," Prefix="(" Suffix=")"/></Then></Case><Value t="data.RuntimeObjectType"/></Item></OptionDescription></Then></Case></Default></OnChangeAtEndOfText><OnUpdate t="action.RunActions"><Action t="object.RunMethod" Object="%$_XtmlDt%" Method="OnUpdate"/><Action t="field_dt.RefreshPreview" /><Action t="uiaction.Refresh" RunOn=".text_preview"/><Action t="uiaction.Refresh" RunOn=".text_dynamic_preview"/><Action t="action.IfThenElse"><If t="yesno.NotEmpty"/><Then t="uiaction.AddClass" Cls="irrelevant" RunOn=".component_suggestion_box"/><Else t="uiaction.RemoveClass" Cls="irrelevant" RunOn=".component_suggestion_box"/></Action></OnUpdate><OnAfterTextAdded t="action.RunActions"><Action t="uiaction.Hide" RunOn="updown(.xtml_dt_primitive,.xtml_dt_primitive_hint)"/><Action t="action.Switch"><Var name="Ctx" t="xtml.UseParam" Param="Context"/><Var name="DynamicText1" t="aaeditor.DynamicTextOpenPart"/><Var name="DynamicText2" t="aaeditor.DynamicTextOpenPart" Data="%$DynamicText1%" Type="{}"/><Var name="DynamicText" t="text.FirstSucceeding"><Item value="%$DynamicText2%"/><Item value="%$DynamicText1%"/></Var><Var name="DynamicValue" t="xtml.RunDynamicText" Context="%$Ctx/context%" Input="%$Ctx/Input%" Text="\\%%$DynamicText%\\%"><Condition t="yesno.NotEmpty" Value="%$DynamicText%"/></Var><Case><IfCondition t="yesno.OR" Data="%$DynamicValue%"><Item t="xml.HasAttributes"/><Item t="yesno.IsStruct"/><Item t="yesno.NotEmpty" Value="%*%"/></IfCondition><Then t="field_aspect.AddTextToSuggestionBox" Text="/" TriggerOnAfterTextAdded="false"/></Case><Case><IfCondition t="yesno.NotEmpty" Value="%$DynamicValue%"/><Then t="field_aspect.AddTextToSuggestionBox" TriggerOnAfterTextAdded1="false"><Text t="data.Pipeline"><Item t="data.IfThenElse" Then="}" Else="\\%"><If t="yesno.NotEmpty" Value="%$DynamicText2%"/></Item><Item t="data.IfThenElse" Then="%%\']\\%" Else="%%" Remark="closing \'] if needed"><If t="text.MatchesRegex" Text="%$DynamicText1%" Expression=".*\\[[^\']*\'[^\'\\]]*"/></Item></Text></Then></Case><Case><IfCondition t="text.MatchesRegex" Text="%$DynamicText%" Expression=".*\\[[a-zA-Z @]+" Remark="e.g %$List[@att"/><Then t="action.RunActions"><Action t="field_aspect.AddTextToSuggestionBox" Text=" = \'"/><Action t="uiaction.SetCssProperty" Property="display" Value="inline" RunOn="updown(.xtml_dt_primitive,.xtml_dt_primitive_hint)"/><Action t="uiaction.SetText" RunOn="updown(.xtml_dt_primitive,.xtml_dt_primitive_hint)" Text="use { for dynamic value"/></Then></Case></Action></OnAfterTextAdded><OnCtrlSpace t="action.IfThenElse"><Var name="Ctx" t="xtml.UseParam" Param="Context"/><If t="yesno.OR" Data="%$Ctx/Input%"><Item t="xml.IsAttribute"/><Item t="yesno.ItemsEqual" Item2="text"><Item1 t="data.RuntimeObjectType"/></Item></If><Then t="field_aspect.AddTextToSuggestionBox" Text="\\%\\%" TriggerOnAfterTextAdded="false"/><Else t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="\\%" TextPatternToAdd="\\%%%\\%"/></OnCtrlSpace></FieldAspect><FieldAspect t="field_aspect.Resizer" RememberLastWidth="false" /></xtml></Component><Component id="EditPrimitiveTextBox" type="ui.Control"><Param name="Context" script="true"><Default value="%$_Context%"/></Param><Param name="Param"/><Param name="OnlyPrimitive" type="data.Boolean"/><Param name="OnSelectComponent" type="action.Action" script="true"/><Param name="Simple" type="data.Boolean"><Default value="true"/></Param><xtml t="field.ShowFieldControl" Item="%$Text%"><Var name="_TreeCntr" value="%$_Cntr%"/><Field t="field.XmlField" Path="" ID="primitive_text_box"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Css" Class="aa_param_%$_ParamXml/@name%" OnElement="cell"/><FieldAspect t="aaeditor.EditPrimitiveTextBoxAspect" Param="%$Param%" OnlyPrimitive="%$OnlyPrimitive%" Simple="%$Simple%"><Context t="xtml.UseParam" Param="Context"/><OnSelectComponent t="xtml.UseParam" Param="OnSelectComponent"/></FieldAspect></Field></xtml><Param name="Text"><Default value="%%"/></Param></Component><Component id="EditPrimitiveHalfWrittenPart" type="data.Data" internal="true" execution="native" /><Component id="EditPrimitiveAssistValues" type="data.Data"><Param name="Context"/><Param name="Text"/><xtml t="data.Switch"><Data t="data.Pipeline"><Item t="aaeditor.DynamicTextOpenPart" Data="%$Text%"/><Item t="data.IfThenElse" Then="%$InnerPart%" Else="%%"><Var name="InnerPart" t="aaeditor.DynamicTextOpenPart" Type="{}"/><If t="yesno.NotEmpty" Value="%$InnerPart%"/></Item></Data><Case If="__EMPTY" Then="%$Context/Input%"/><Case><IfCondition t="yesno.IsEmpty"/></Case><Case Then="___VARS LIST"><IfCondition t="text.EndsWith" With="$"/></Case><Case Remark="value of variable"><IfCondition t="text.EndsWith" With="/"/><Then t="xtml.RunDynamicText" Context="%$Context/context%" Input="%$Context/Input%"><Text t="data.Pipeline"><Item t="text.RemoveSuffix" Suffix="/"/><Item value="\\%%%\\%"/></Text></Then></Case><Case><IfCondition t="yesno.And"><Item t="text.EndsWith" Text="]"/><Item t="yesno.Not"><Of t="yesno.IsSingleValue"><Value t="xtml.RunDynamicText" Input="%$Context/Input%" Context="%$Context/context%"><Text t="data.Pipeline"><Item t="text.RemoveSuffix" Suffix="["/><Item value="\\%%%\\%"/></Text></Value></Of></Item></IfCondition><Then t="data.Struct"><Item Name="Type" Value="List"/><Item Name="List"><Value t="data.Pipeline"><Var name="Values" t="xtml.RunDynamicText" Input="%$Context/Input%" Context="%$Context/context%"><Text t="data.Pipeline"><Item t="text.RemoveSuffix" Suffix="["/><Item value="\\%%%\\%"/></Text></Var><Item t="data.Pipeline"><Item value="%$Values%"/><Item t="xml.Attributes"/><Item t="xml.AttributeName"/><Aggregator t="data.MakeUnique"/></Item><Item t="data.Struct"><Item Name="Value" Value="@%%"/><Item Name="Desc"><Value t="text.Concat" Separator=","><Items t="data.Pipeline"><Item value="%$Values/@{}%"/><Aggregator t="data.MakeUnique"/></Items></Value></Item></Item></Value></Item><Item Name="PutAfter" Value="=\'"/></Then></Case></xtml></Component><Component id="EditPrimitiveTextPreview" type="ui.Control"><Param name="Context"><Default value="%$_Context%" /></Param><xtml t="ui.List"><Control t="ui.List" Class="text_dynamic_preview"><Control t="ui.Text" Class="text_dynamic_preview_text"><Condition t="yesno.Contains"><Text value="\\%"/><Text value="{"/><Text value="}"/></Condition><Text t="aaeditor.CalculatePrimitiveInnerParts" Text="%%" Context="%$Context/context%" Input="%$Context/Input%"/></Control></Control><Control t="ui.List" Class="text_preview"><Control t="ui.Text" CssStyle="display: block; overflow: hidden; max-width: 260px; max-height: 12px;"><Text t="xtml.RunDynamicText" Text="%%" Context="%$Context/context%" Input="%$Context/Input%" /><Condition t="yesno.Contains"><Text value="\\%"/><Text value="\\%"/></Condition></Control></Control><Layout t="ui.LineBreak" IncludeSpacing="false"/></xtml></Component><Component id="EditPrimitiveTextWithPreview" type="ui.Control"><Param name="Context" script="true"><Default value="%$_Context%"/></Param><Param name="DisableLargeText" type="data.Boolean" /><xtml t="ui.List" Class="xtml_dt_primitive"><Control t="ui.List"><Control t="aaeditor.EditPrimitiveTextBox" Simple="false"><Context t="xtml.UseParam" Param="Context" /></Control><Control t="ui.Button" Image="%$_Images%/openmenu.gif"><Style t="ui.ButtonAsImage"/><OnClick t="menu.OpenContextMenu" ><Var name="_CurrentFocus" t="data.Empty" Remark="fix focus bug" /><Menu t="menu.ContextMenu" ><Item t="menu.MenuItem" Text="add data item ..." Image="%$_Images%/add1616.gif"><Condition t="yesno.NotEmpty" Value="%$Context/Input%"/><Action RunOn="updown(.xtml_dt_primitive,.fld_primitive_text_box)" t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="\\%" TextPatternToAdd="\\%%%"/></Item><Item t="menu.MenuItem" Text="add variable ..." Image="%$_Images%/studio/balls1616.png"><Condition t="yesno.NotEmpty"><Value t="xtml.PartsOfContext" Context="%$Context/context%" Part="Variable Names"/></Condition><Action RunOn="updown(.xtml_dt_primitive,.fld_primitive_text_box)" t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="\\%$" TextPatternToAdd="\\%$%%"/></Item><Item t="menu.MenuItem" Text="edit as large text ..." Image="%$_Images%/studio/file1616.png" ><Condition t="yesno.Not" Of="%$DisableLargeText%" /><Action t="action.RunActions" ><Action t="dialog.ClosePopup" /><Action t="aaeditor.OpenPrimitiveAsDialog" Context="%$Context%"><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Action t="aaeditor.WriteValue" To="%$AAEditorState/SelectedInTree%"><Value t="xml.WithChanges"><Xml t="xml.ByTag" Tag="aaeditor"><Change t="xml.SetAttribute" AttributeName="valuetype" Value="primitive"/><Change t="xml.SetAttribute" AttributeName="type" Value="data.Data"/><Change t="xml.SetAttribute" AttributeName="primitive" Value="%$AsText%"/></Xml></Value></Action><Action t="aaeditor.Refresh" SelectedInTree="true" GlobalPreview="true" LocalPreview="true"/></RunOnOK></Action></Action></Item></Menu></OnClick></Control><Layout t="ui.Horizontal" VerticalAlign="middle" /></Control><Control t="aaeditor.PrimitiveTextPreview" Text="%%"><Context t="xtml.UseParam" Param="Context" /></Control><Layout t="ui.LineBreak" IncludeSpacing="false"/></xtml></Component><Component id="PrimitiveTextPreview" type="ui.Control"><Param name="Context"  ><Default value="%$_Context%" /></Param><Param name="Text"><Default value="%%" /></Param><xtml t="ui.List"><Control t="ui.List" Class="text_dynamic_preview"><Control t="ui.Text" Class="text_dynamic_preview_text"><Condition t="yesno.Contains" Data="%$Text%"><Text value="\\%"/><Text value="{"/><Text value="}"/></Condition><Text t="aaeditor.CalculatePrimitiveInnerParts" Text="%$Text%" Context="%$Context/context%" Input="%$Context/Input%"/></Control></Control><Control t="ui.List" Class="text_preview"><Control t="ui.Text" CssStyle="display: block; overflow: hidden; max-width: 260px; max-height: 12px;"><Condition t="yesno.Contains" Data="%$Text%"><Text value="\\%"/><Text value="\\%"/></Condition><Text t="data.Switch" Default="%$Result%%" ><Var name="Result" t="xtml.RunDynamicText" Text="%$Text%" Context="%$Context/context%" Input="%$Context/Input%"/><Case Remark="single element"><IfCondition t="yesno.And"><Item t="xml.IsElement" Data="%$Result%"/><Item t="yesno.IsEmpty"><Value t="text.Text" Text="%$Result%"/></Item><Item t="yesno.IsSingleValue" Value="%$Result%"/></IfCondition><Then value="(%$Tag% ...)"><Var name="Tag" t="xml.Tag" Data="%$Result%"/></Then></Case><Case Then="%$Result%"><IfCondition t="yesno.OR"><Item t="yesno.IsEmpty" Value="%$Result%"/><Item t="yesno.IsSingleValue" Value="%$Result%"/></IfCondition></Case><Case><Then value="%$Values%"><Var name="Values" t="data.Pipeline"><Item value="%$Result%"/><Aggregator t="text.Concat" Separator=","/></Var></Then><IfCondition t="yesno.And"><Item t="yesno.Not"><Of t="yesno.IsSingleValue" Value="%$Result%"/></Item><Item t="yesno.ItemsNotEqual" Item2="0"><Item1 t="text.Length" Data="%$Result%"/></Item></IfCondition></Case><Case Then="(%$Count% Items)"><IfCondition t="yesno.Not"><Of t="yesno.IsSingleValue" Value="%$Result%"/></IfCondition></Case><Var name="Count" t="data.Pipeline"><Item value="%$Result%"/><Aggregator t="data.Count"/></Var></Text></Control></Control><Control t="ui.List"><Control t="ui.Text" Class="xtml_dt_primitive_hint" /></Control><Layout t="ui.LineBreak" IncludeSpacing="false"/></xtml></Component><Component id="CalculatePrimitiveInnerParts" type="data.Data" execution="native"><Param name="Text" /><Param name="Context" /><Param name="Input" /></Component><Component id="DynamicTextOpenPart" type="data.Data" execution="native" ><Param name="Type" type="enum"><Default value="%" /><value>%</value><value>{}</value></Param></Component><Component id="ComponentsOfType" type="data.Data" execution="native"><Param name="Type" essential="true"/><Param name="TextFilter"/><Param name="IncludeAdvancedComponents" type="data.Boolean"/></Component></xtml><xtml ns="aaeditor_usage"><Component id="SampleContext"><Param name="Input"><Default t="xml.Xml"><people><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></people></Default></Param><Param name="TextParam"><Default value="simple text"/></Param><Param name="XmlParam"><Default t="xml.Xml"><person name="Homer" lastName="Simpson"/></Default></Param><xtml t="data.Struct"><Item Name="context"><Value t="xtml.CurrentContext"><Var name="TextVariable" value="simple text"/><Var name="TextVariable2" value="Homer"/><Var name="XmlVariable" t="xml.Xml"><mypeople><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></mypeople></Var><Var name="ListVariable" t="data.Pipeline"><Item t="xml.Xml"><mypeople><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></mypeople></Item><Item value="%*%" /></Var></Value></Item><Item Name="Input" Value="%$Input%" /></xtml></Component><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %" /><ExpectedResult t="yesno.ItemsEqual" Item1="people"><Item2 t="xml.Tag" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.Text"><Var name="Context" t="aaeditor_usage.SampleContext" Input="simple text" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%"  Text="hi %" /><ExpectedResult t="yesno.EqualsTo" To="simple text" /></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.Variables"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %$" /><ExpectedResult t="yesno.EqualsTo" To="___VARS LIST" /></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.ValueOfVariable"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %$XmlVariable/" /><ExpectedResult t="yesno.ItemsEqual" Item1="mypeople"><Item2 t="xml.Tag" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.Internal"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %$XmlVariable/person[@name=\'{" /><ExpectedResult t="yesno.ItemsEqual" Item1="people"><Item2 t="xml.Tag" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.ListVariableCondition"><Var name="Context" t="aaeditor_usage.SampleContext"/><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %$ListVariable["/><ExpectedResult t="yesno.And"><Item t="yesno.ItemsEqual" Item1="%Type%" Item2="List"/><Item t="yesno.ItemsEqual" Item1="%=Concat(List/Value,\',\')%" Item2="@name,@lastName"/><Item t="yesno.ItemsEqual" Item1="%=Concat(List/Desc,\';\')%" Item2="Homer,Marge;Simpson"/><Item t="yesno.ItemsEqual" Item1="%PutAfter%" Item2="=\'"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox.ListVariableCondition" IsTest="false"><Data t="data.WritableText"/><Control t="aaeditor.EditPrimitiveTextWithPreview"><Context t="aaeditor_usage.SampleContext"/></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SetText" Text="%$ListVariable[@lastName = \'{" RunOn=".fld_primitive_text_box" /><Action t="uiaction.SetText" Text="%$ListVariable[@lastName = \'{$" RunOn=".fld_primitive_text_box" /></RunOnControl><CleanAfter t="field_aspect.CloseSuggestionBox" /></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.InternalVar"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %$XmlVariable/person[@name=\'{$TextVariable/" /><ExpectedResult t="yesno.EqualsTo" To="simple text"/></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.SecondPercGivesNothing"><Var name="Context" t="aaeditor_usage.SampleContext"/><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="hi %%"/><ExpectedResult t="yesno.EqualsTo"/></Usage><Usage t="usage.DataUsage" Of="aaeditor.EditPrimitiveAssistValues.PercWithSlash" AssignedTo="yaron"><Var name="Context" t="aaeditor_usage.SampleContext" /><Result t="aaeditor.EditPrimitiveAssistValues" Context="%$Context%" Text="70% of %" /><ExpectedResult t="yesno.ItemsEqual" Item1="people"><Item2 t="xml.Tag" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox" IsTest="false"><Data t="data.WritableText"/><Control t="aaeditor.EditPrimitiveTextBox" ><Context t="aaeditor_usage.SampleContext"/><Param t="xml.Xml" ><Param type="data.Data" /></Param></Control><RunOnControl t="action.RunActions"><Action1 t="uiaction.SetText" Text="%person" RunOn=".fld_primitive_text_box" /><Action1 t="uiaction.SetText" Text="%person/" RunOn=".fld_primitive_text_box" /></RunOnControl><CleanAfter t="field_aspect.CloseSuggestionBox" /></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextWithPreview.Complex" IsTest="false"><Data1 t="data.WritableText" DefaultValue="Hi \\%$TextParam\\% sdasd" /><Data t="data.WritableText" DefaultValue="hi \\%$XmlVariable/person[@name=\'{$TextVariable2}\']/@lastName\\%" /><Control t="aaeditor.EditPrimitiveTextWithPreview"><Context t="aaeditor_usage.SampleContext"/></Control><ExpectedResult t="yesno.Contains"><Text value="hi \\%$XmlVariable/person[@name=\'Homer\']/@lastName\\%" /><Text value="hi Simpson" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextWithPreview.EmptyText" IsTest="false"><Data t="data.WritableText" /><Control t="aaeditor.EditPrimitiveTextWithPreview"><Context t="aaeditor_usage.SampleContext"/></Control><ExpectedResult value="true" /></Usage><Usage t="usage.DataUsage" Of="aaeditor.CalculatePrimitiveInnerParts"><Result t="aaeditor.CalculatePrimitiveInnerParts"><Text value="hi \\%$XmlVariable/person[@name=\'{$TextVariable2}\']/@lastName\\%" /><Context t="data.Pipeline"><Item t="aaeditor_usage.SampleContext"/><Item value="%context%" /></Context></Result><ExpectedResult t="yesno.EqualsTo" To="hi \\%$XmlVariable/person[@name=\'Homer\']/@lastName\\%" /></Usage><Usage t="ui.ControlUsage" Of="aaeditor.PrimitiveTextPreview"><ExpectedResult t="yesno.Contains"><Text value="hi simple text"/><Text value="2 Items"/><Text value="Homer,Marge"/><Text value="(person ...)"/><Text value="Homer"/></ExpectedResult><Control t="ui.List"><Control t="aaeditor.PrimitiveTextPreview" Text="hi \\%$TextVariable\\%"><Context t="aaeditor_usage.SampleContext"/></Control><Control t="aaeditor.PrimitiveTextPreview" Text="\\%person\\%"><Context t="aaeditor_usage.SampleContext"/></Control><Control t="aaeditor.PrimitiveTextPreview" Text="\\%person/@name\\%"><Context t="aaeditor_usage.SampleContext"/></Control><Control t="aaeditor.PrimitiveTextPreview" Text="\\%person[1]\\%"><Context t="aaeditor_usage.SampleContext"/></Control><Control t="aaeditor.PrimitiveTextPreview" Text="\\%name\\%"><Context t="data.Struct"><Item Name="Input" ><Value t="xml.Xml"><xml><name>Homer</name></xml></Value></Item></Context></Control></Control></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox.Aggregator.AfterEquals" IsTest="false"><Control t="aaeditor.EditPrimitiveTextBox" ><Data t="data.WritableText" /><Context t="aaeditor_usage.AggregatorContext" /></Control><RunOnControl t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="%=" RunOn=".fld_primitive_text_box" /><ExpectedResult AllText="%$ControlElement%" RunOn=".customsuggestionpopup" t="yesno.Contains" ><Text value="Sum" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox.Aggregator.Fields" IsTest="false" ><Control t="aaeditor.EditPrimitiveTextBox" ><Data t="data.WritableText" /><Context t="aaeditor_usage.AggregatorContext"/></Control><RunOnControl t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="%=Sum(Items/" RunOn=".fld_primitive_text_box"/><ExpectedResult AllText="%$ControlElement%" RunOn=".customsuggestionpopup" t="yesno.Contains"><Text value="Age" /><Text value="20,30" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt.AggregatorFields"><Result t="data.Pipeline"><Item t="xtml_dt.AggregatorFields"><Items t="data.List"><Item t="object.Object" Age="20" Height="180"/><Item t="object.Object" Age="30" Height="170"/><Item t="object.Object" Age="40" Height="162"/><Item t="object.Object" Age="50" Height="164"/><Item t="object.Object" Age="60" Height="165"/><Item t="object.Object" Age="70" Height="171"/><Item t="object.Object" Age="80" Height="172"/><Item t="object.Object" Age="90" Height="174"/></Items></Item><Aggregator t="text.Concat" ItemText="%FieldName% (%Desc%)" Separator=" "/></Result><ExpectedResult t="yesno.EqualsTo" To="Age (20,30,40,50,...) Height (180,170,162,164,...)"/></Usage><Usage t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox.Aggregator" IsTest="false"><Control t="aaeditor.EditPrimitiveTextBox" ><Data t="data.WritableText" /><Context t="aaeditor_usage.AggregatorContext"/></Control><ExpectedResult AllText="%$ControlElement%" RunOn=".customsuggestionpopup" t="yesno.Contains"><Text value="Age" /><Text value="20,30" /></ExpectedResult></Usage><Usage1 t="ui.ControlUsage" Of="aaeditor.EditPrimitiveTextBox.Aggregator.SuggestEquals" ><Control t="aaeditor.EditPrimitiveTextBox" ><Data t="data.WritableText" /><Context t="aaeditor_usage.AggregatorContext"/></Control><RunOnControl t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="%" RunOn=".fld_primitive_text_box"/><ExpectedResult Data="%$ControlElement%" RunOn=".customsuggestionpopup" t="yesno.Contains"><Text value="=" /></ExpectedResult></Usage1><Usage t="ui.ControlUsage" Of="aaeditor.XPathEditor"><Var name="XmlItems" t="data.Pipeline"><Item t="xml.Xml"><xml><Person Name="Homer" Age="38" MainHobby="Complaining"><Children><Child name="Bart" /><Child name="Lisa" /></Children></Person><Person Name="Marge" Age="32" Gender="Female" ><FullName>Marge Simpson</FullName></Person></xml></Item><Item value="%*%" /></Var><Control t="ui.Document"><Item t="data_items.Items" ><Items t="xml.Xml"><xml/></Items></Item><Field t="field.XmlField" Path="@Path" ID="Path"><FieldAspect t="aaeditor.XPathEditor" XmlItems="%$XmlItems%" /></Field></Control><RunOnControl t="uiaction.Click" RunOn=".fld_Path" /><ExpectedResult t="yesno.Contains" RunOn=".aapopup" IgnoreOrder="true"><Data value="%$ControlElement%" /><Text value="@Name" /><Text value="Marge" /><Text value="@Age" /><Text value="38" /><Text value="@MainHobby" /><Text value="Complaining" /><Text value="Children" /><Text value="FullName" /><Text value="Marge Simpson" /></ExpectedResult></Usage></xtml><xtml ns="aaeditor"><Component id="PreviewControl" type="ui.Control" execution="xtml"><Param name="PreviewContext" /><xtml t="ui.Section" Name="aaeditor preview" ><Control t="ui.IfThenElse"><Var name="PreviewComp" value="%$AAEditorState/SelectedInTree/Xtml/@t%_Preview"/><If t="xtml.ComponentExists" ComponentID="%$PreviewComp%"/><Then t="xtml.RunXtmlByComponentId" ComponentID="%$PreviewComp%"><Var name="Preview" t="aaeditor.CalcLocalPreviewData"/></Then><Else t="ui.SectionsList"><Var name="PreviewData" t="data.FirstSucceeding"><Item value="%$PreviewContext%" /><Item t="aaeditor.CalcLocalPreviewData"/></Var><Var name="RealInput" t="data.FirstSucceeding"><Item value="%$PreviewData/OrigData%"/><Item value="%$PreviewData/Input%"/></Var><Section t="ui.SectionListPage"><Title t="data.FirstSucceeding"><Item t="data.Pipeline"><Item value="%$RealInput%"/><Item t="data.RuntimeObjectType"/><Item value="input (%%)"/></Item><Item value="input"/></Title><Condition t="yesno.NotEmpty" Value="%$RealInput%"/><Control t="ui.IfThenElse"><Then t="aaeditor.RuntimeObjectControl" Object="%$RealInput%" Class="aaeditor_input"/><If t="yesno.Not"><Of t="yesno.IsMultipleValue" Value="%$PreviewData%"/></If><Else t="ui.ItemList" Class="aaeditor_input"><Presentation t="uiaspect.Table" /><Items t="data_items.Items" Items="%$PreviewData%" /><Fields t="field.Fields"><Field t="field.CustomControl" ShowTitle="true"><Control t="aaeditor.RuntimeObjectControl" Data="%Input%"/><Title t="data.Pipeline"><Item value="%$PreviewData%"/><Aggregator t="data.Count"/><Aggregator value="%% items"/></Title></Field><Field t="field.CustomControl" ShowTitle="true" Title="view output"><Control t="ui.Button" Image="%$_Images%/studio/down1616.png"><OnClick t="uiaction.ReplaceControl" RunOn=".preview_output"><NewControl t="aaeditor.RuntimeObjectControl" Object="%Output%" Class="preview_output"/></OnClick><Style t="ui.ButtonAsImage"/></Control></Field></Fields></Else></Control></Section><Section t="ui.SectionListPage"><Var name="OpenDialog" value="false"/><Title t="data.FirstSucceeding"><Item t="data.Pipeline"><Item value="%$RealInput%"/><Item t="data.RuntimeObjectType"/><Item value="output (%%)"/></Item><Item value="output"/></Title><Condition t="yesno.NotEmpty" Value="%$PreviewData/Output%"/><Control t="aaeditor.RuntimeObjectControl" Object="%$PreviewData/Output%" Class="preview_output"/></Section></Else></Control></xtml></Component><Component id="CalculateTopCircuit" type="data.Data" execution="native"><Param name="Xtml" /></Component><Component id="ProbeXtml" type="data.Data"><Param name="Xtml" essential="true"/><xtml t="aaeditor.CalcLocalPreviewData"><State t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$Xtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$Xtml%" ParentXtml="%$Xtml%"/></State><MainCircuitRunner t="object.RunMethod" Method="RunCircuit" Object="%$TopCircuit%"/><Var t="aaeditor.CalculateTopCircuit" Xtml="%$Xtml%" name="TopCircuit"/></xtml></Component><Component id="CalcLocalPreviewData" type="data.Data" execution="native"><Param name="State"><Default value="%$AAEditorState%" /></Param><Param name="ReturnAll" type="data.Boolean" Description="Return all results or only one result" /><Param name="MainCircuitRunner" type="action.Action" script="true" /></Component><Component id="AsyncObjectControl" type="ui.Control" execution="native"><NativeHelper name="ShowSync" t="aaeditor.RuntimeObjectControl" /></Component><Component id="RuntimeObjectControl" type="ui.Control" execution="xtml"><Param name="Object"><Default value="%%"/></Param><xtml t="data.Pipeline"><Item value="%$Object%"/><Aggregator Class="aaeditor_runtime_object_control" t="ui.Switch"><Value t="data.RuntimeObjectType"/><Case IfCondition="%_isAsyncObject%"><Then t="aaeditor.AsyncObjectControl"/></Case><Case><IfCondition t="yesno.IsMultipleValue" Value="%$Object%"/><Then t="ui.ItemList"><Presentation t="uiaspect.Table"/><Items t="data_items.Items"><Items t="data.Pipeline"><Item value="%$Object%"/></Items></Items><Fields t="field.CustomControl" ShowTitle="true"><Control t="aaeditor.RuntimeObjectControl"/><Title t="data.Pipeline"><Item value="%$Object%"/><Aggregator t="data.Count"/><Aggregator value="%% items"/></Title></Fields></Then></Case><Case If="text"><Then t="ui.Text" Text="%%"/></Case><Case If="html"><Then t="data.Same"/></Case><Case If="xml"><Then t="ui.List"><Layout t="ui.Horizontal"/><Control t="ui.Button" Image="%$_Images%/studio/copy.png" Text="Copy"><Style t="ui.ButtonAsImage"/><OnClick t="xmlui.ShowTextareaXmlDialog" Xml="%%"/></Control><Control t="tree.Tree" RootItems="%%" AutoExpandFirstLevel="false" NextLevel="%*%" Class="noborder" Height="100%" ItemImage="%$_Images%/default1616.gif"><ItemControl t="aaeditor.XmlElementInTree"/></Control></Then></Case><Case If="struct"><Then t="tree.Tree" AutoExpandFirstLevel="false" ItemImage="%$_Images%/studio/integer.gif" Borderless="true"><RootItems t="data.StructEntryNames"/><Var name="Input"/><NextLevel t="data.Struct"><Var name="Val" value="%$Input/{}%"/><Condition t="yesno.And"><Item t="yesno.IsEmpty" Value="%StructValue%"/><Item t="yesno.ItemsNotEqual" Item1="text"><Item2 t="data.RuntimeObjectType" Data="%$Val%"/></Item></Condition><Item Name="StructValue" Value="%$Val%"/></NextLevel><ItemControl t="ui.Switch"><Var name="Val" value="%$Input/{}%"/><Case><IfCondition t="yesno.NotEmpty" Value="%StructValue%"/><Then t="aaeditor.RuntimeObjectControl" Object="%StructValue%"/></Case><Case><IfCondition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$Val%"/><Item t="yesno.ItemsEqual" Item1="text"><Item2 t="data.RuntimeObjectType" Data="%$Val%"/></Item></IfCondition><Then t="ui.Text" Text="%%: %$Val%"/></Case><Default t="ui.Text" Text="%%"/></ItemControl><ItemControl1 t="ui.List"><Control t="ui.Text" Text="%%: "/><Control t="aaeditor.RuntimeObjectControl" Object="%$Input/{}%" TODO="prevent endless loop"/><Layout t="ui.SpanList"/></ItemControl1></Then></Case><Case If="context"><Then t="tree.Tree" ItemImage="%$_Images%/studio/yesno1616.gif"><RootItems t="data.List"><Item value="__vars"/><Item value="__params"/></RootItems><Var name="Input"/><ItemControl t="ui.IfThenElse"><If t="text.StartsWith" With="__"/><Then t="ui.Text"><Text t="text.RemovePrefix" Prefix="__"/></Then><Else t="aaeditor.RuntimeObjectControl"/></ItemControl><NextLevel t="data.Switch"><Case If="__vars"><Then t="data.Pipeline"><Item t="xtml.PartsOfContext" Context="%$Input%" Part="Variable Names"/><Item value="__%%"/></Then></Case><Case If="__params"><Then t="data.Pipeline"><Item t="xtml.PartsOfContext" Context="%$Input%" Part="Param Names"/><Item value="__%%"/></Then></Case><Case><IfCondition t="text.StartsWith" With="__"/><Then t="xtml.RunXtml" Context="%$Input%"><Xtml t="data.Pipeline"><Item t="text.RemovePrefix" Prefix="__"/><Item value="\\\\%$%%\\\\%"/></Xtml></Then></Case></NextLevel></Then></Case><Case If="function"><Then t="ui.Text" Text="%%"/></Case><Default t="aaeditor.RuntimeObjectSelector"/></Aggregator></xtml></Component><Component id="RuntimeObjectSelector" type="ui.Control" execution="xtml"><Param name="OnSelect" type="action.Action" script="true" /><xtml t="tree.Tree" Class="noborder" Height="100%" ItemImage="%$_Images%/default1616.gif"><Var name="Input" /><RootItems value="%$Input%" /><NextLevel t="xml.XPath" XPath="*"><Condition t="yesno.EqualsTo" To="xml"><Data t="data.RuntimeObjectType" /></Condition></NextLevel><ItemControl t="ui.Switch"><Value t="data.RuntimeObjectType" /><Case If="html"><Then t="data.Same" /></Case><Case If="text"><Then t="ui.Text" Text="%%" /></Case><Default t="aaeditor.XmlElementInTree" t1="ui.DynamicList"><Items t="data.List"><Item t="data.Same" /><Item t="xml.Attributes" /></Items><Control t="data.IfThenElse"><If t="xml.IsAttribute" /><Then t="xml.WithChanges"><Var name="attrname" t="xml.AttributeName" /><Xml t="ui.Html" DynamicContent="true"><span onclick="ajaxart_runevent(this,\'\',\'OnSelect\');" class="xml_selector_attribute">%$attrname%=               <span class="xml_selector_attribute_value">%%</span></span></Xml><Change t="ui.DataBind"/></Then><Else t="xml.WithChanges"><Var name="innertext" t="xml.InnerTextValue"/><Var name="onlytag" t="xml.Tag"/><Var name="tag" t="data.Pipeline"><Item value="%$onlytag%"/><Item t="data.IfThenElse"><If t="yesno.Empty" Data="%$innertext%"/><Then value="%%"/><Else value="%%="/></Item></Var><Xml t="ui.Html" DynamicContent="true"><span onclick="ajaxart_runevent(this,\'\',\'OnSelect\');" class="xml_selector_tag">%$tag%                <span class="xml_selector_attribute_value">%$innertext%</span></span></Xml><Change t="ui.DataBind"/></Else></Control><Layout t="ui.NoLayout"/></Default></ItemControl></xtml></Component><Component id="XmlElementInTree" type="ui.Control" execution="native"></Component><Component id="SimulateRunningContextForPreview" type="data.Data" execution="native" /></xtml><xtml ns="aaeditor"><Component id="ModifiedComponents" type="data.Data" hidden="true"><xtml t="data.FirstSucceeding"><Item value="%$_JBartStudio/ModifiedComponents%" /><Item value="%$AAEditorState/ModifiedComponents%" /><Item value="%$_BartDevDtContext/ModifiedComponents%" /></xtml></Component><Component id="MarkComponentAsModified" type="action.Action"><Param name="ComponentID"/><xtml t="xml.ChangeXml" ><Xml t="aaeditor.ModifiedComponents" /><Change t="xml.Delete" Data="%component[@fullid=\'{$ComponentID}\']%"/><Change t="xml.AddChildren" CloneChildren="false"><Condition t="yesno.NotEmpty" Data="%$ComponentID%"/><Children t="xml.Xml" DynamicContent="true"><component fullid="%$ComponentID%"/></Children></Change></xtml></Component><Component id="SaveDataToServer" type="data.Data"><xtml t="xml.WithChanges"><Xml t="xml.Xml"><updateServer><component fullid="" file=""/></updateServer></Xml><Change t="xml.Duplicate" Element="%component%" ><Items t="data.Pipeline" ><Item t="aaeditor.ModifiedComponents" /><Item value="%component/@fullid%" /></Items><ChangeOnElement t="xml.MultiChange"><Var name="ComponentElement" t="data.FirstSucceeding" Data="%$InputForChanges%"><Item t="gallery.UsagesByName"><Condition t="text.StartsWith" With="usage:byname:"/><Name t="text.RemovePrefix" Separator="usage:byname:"/></Item><Item t="gallery.UsagesOfComponent"><Condition t="text.StartsWith" With="usage:"/><ComponentId t="text.RemovePrefix" Separator="usage:"/></Item><Item t="xtml.ComponentDefinition" ID="%%"/></Var><Change t="xml.SetAttribute" AttributeName="fullid" Value="%%"/><Change t="xml.SetAttribute" AttributeName="file" Value="%$ComponentElement/../@file%"/><Change t="xml.AddChildren" CloneChildren="true" Children="%$ComponentElement%"/></ChangeOnElement></Change></xtml></Component><Component id="SaveToServerAction" type="action.Action"><Param name="SilentMode" type="data.Boolean"/><xtml t="server.CallServer"><Call t="server.PostUrl" VarNameForResult="Result" Url="php/aaeditorsave.php"><PostData t="server.PostData" Name="contents"><Value t="data.Pipeline"><Item t="aaeditor.SaveDataToServer"/><Item t="xml.XmlToText" PrettyPrint="true"/></Value></PostData></Call><OnSuccess t="xml.ChangeXml" Xml="%$AAEditorState/ModifiedComponents%"><Change t="xml.DeleteChildren"/></OnSuccess></xtml></Component></xtml><xtml ns="aaeditor_usage"><Component id="SampleComponentToUpdate" type="data.Data"><xtml t="text.Text" Text="hello" /></Component><Usage t="usage.DataUsage" Of="aaeditor.SaveDataToServer"><Var name="AAEditorState" t="aaeditor.State" /><RunBefore t="aaeditor.MarkComponentAsModified" ComponentID="aaeditor_usage.SampleComponentToUpdate" /><Result t="aaeditor.SaveDataToServer" /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><updateServer><component fullid="aaeditor_usage.SampleComponentToUpdate"						file="plugins/aaeditor/aaeditor_saveusage.xtml"><Component id="SampleComponentToUpdate" type="data.Data"><xtml t="text.Text" Text="hello" /></Component></component></updateServer></To></ExpectedResult></Usage><Usage1 t="ui.ControlUsage" Name="save aaeditor data to server"><Control t="ui.Button" Text="call php"><OnClick t="action.RunActions"><Var name="AAEditorState" t="aaeditor.State" /><Action t="aaeditor.WriteValue"><Var name="Xtml" t="xtml.ComponentDefinition" ID="aaeditor_usage.SampleComponentToUpdate"						ToXtml="true" /><To t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Text"						Xtml="" Type="data.Data" /><Value t="xml.Xml"><aaeditor valuetype="primitive" primitive="new hello" /></Value></Action><Action t="aaeditor.SaveToServerAction" SilentMode="true" /></OnClick></Control><RunOnControl t="uiaction.ButtonClick" /><ExpectedResult value="true" /></Usage1><Usage1 t="ui.ControlUsage" Name="save aaeditor data to server - writing to a usage"><Control t="ui.Button" Text="call php"><OnClick t="action.RunActions"><Var name="AAEditorState" t="aaeditor.State"/><Action t="aaeditor.WriteValue"><Var name="Xtml" t="gallery.UsagesByName" Name="save aaeditor data to server - writing to a usage"/><To t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Description" Xtml="" Type="data.Data"/><Value t="xml.Xml"><aaeditor valuetype="primitive" primitive="set from php"/></Value></Action><Action t="aaeditor.SaveToServerAction" SilentMode="true"/></OnClick></Control><RunOnControl t="uiaction.ButtonClick"/><ExpectedResult value="true"/></Usage1></xtml><xtml ns="aaeditor_usage"><Usage t="usage.DataUsage" Of="CalcLocalPreviewData"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item value="Homer"/><Item value="hello %%"/></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/Item[2]%"/></Var></Item><Item value="input: %Input% output: %Output%"/></Result><ExpectedResult t="yesno.EqualsTo" To="input: Homer output: hello Homer"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - when no attribute present and no default value"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.Section" Data="my input"/></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$TopXtml%" Field="Title"/></Var></Item><Item value="input: %Input% output: %Output%"/></Result><ExpectedResult t="yesno.EqualsTo" To="input: my input output: "/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - when new array item"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline" Data="my input"/></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$TopXtml%" Field="Item[+]"/></Var></Item><Item value="%Input%"/></Result><ExpectedResult t="yesno.EqualsTo" To="my input"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - when new array item 2"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline" Data="my input"><Item t="data.List" Data="%% 2"/></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$TopXtml/Item%" Field="Item[+]"/></Var></Item><Item value="%Input%"/></Result><ExpectedResult t="yesno.EqualsTo" To="my input 2"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - when new array item (pipeline)"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline" Data="my input"><Item value="%% 2"/></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$TopXtml%" Field="Item[+]"/></Var></Item><Item value="%Input%"/></Result><ExpectedResult t="yesno.EqualsTo" To="my input 2"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - attribute"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="text.Text" Text="hello world"/></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/@Text%"/></Var></Item><Item value="output: %Output%"/></Result><ExpectedResult t="yesno.EqualsTo" To="output: hello world"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - with gap: with unpassing condition"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.List" ><Data t="xml.Xml"><person name="Homer"/></Data><Control t="ui.Button" ><OnClick t="action.WriteValue" To="%@name%" Condition="false"/></Control></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/Control/OnClick/@To%"/></Var></Item><Item value="executed" /></Result><ExpectedResult t="yesno.NotContains" ><Text value="executed" /></ExpectedResult></Usage><Usage t="usage.DataUsage"  Name="CalcLocalPreviewData - with gap: dialog and data flow"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.List" ><Data t="xml.Xml"><person name="Homer"/></Data><Control t="ui.Button" Text="rename"><OnClick t="dlg.OpenDialog" ><Title t="data.Pipeline"><Item value="%@name%" /><Item t="text.Replace" Find=""/></Title></OnClick></Control></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/Control/OnClick/Title/Item[2]/@Find%"/></Var></Item><Item value="input: %Input%" /></Result><ExpectedResult t="yesno.EqualsTo" To="input: Homer"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - with gap"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.List" ><Data t="xml.Xml"><people><family><person name="Homer"/></family></people></Data><Control t="ui.Button" Text="rename"><Var name="family" value="%family%" /><OnClick Data="%$family/person%" t="action.WriteValue" To="%@name%" Value="%$var1% Marge" /></Control></xtml></Var><Item t="aaeditor.CalcLocalPreviewData" ><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/Control/OnClick/@To%"/></Var></Item><Item value="output: %Output%" /></Result><ExpectedResult t="yesno.EqualsTo" To="output: Homer"/></Usage><Usage t="usage.DataUsage" IsTest="false" Name="CalcLocalPreviewData - with gap: no xtml for attribute"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.List" ><Data t="xml.Xml"><people><family><person name="Homer"/></family></people></Data><Control t="ui.Button" Text="rename"><Var name="family" value="%family%" /><OnClick Data="%$family/person%" t="action.WriteValue"  /></Control></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$TopXtml/Control/OnClick%" Field="To"/></Var></Item><Item value="input: %Input/@name%" /></Result><ExpectedResult t="yesno.EqualsTo" To="input: Homer"/></Usage><Usage t="usage.DataUsage" Name="CalcLocalPreviewData - with gap collect input in the middle way"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml" DynamicContent=""><xtml t="ui.Button"><OnClick t="dlg.OpenDialog" DialogData="my text"><Contents t="ui.Text"/></OnClick></xtml></Var><Item t="aaeditor.CalcLocalPreviewData" ><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/OnClick/Contents%"/></Var></Item><Item value="%Input%"/></Result><ExpectedResult t="yesno.Contains"><Text value="my text"/></ExpectedResult></Usage>​  <Usage t="usage.DataUsage" Of="aaeditor.CalcLocalPreviewData.RunningInput"><Result t="data.Pipeline"><Var name="TopXtml" t="xml.Xml" DynamicContent=""><xtml t="ui.ItemList" Class="mylist"><Data t="xml.Xml"><people name="people"><person name="Homer" age="10"/><person name="Bart" age="20"/><person name="Lisa" age="30"/></people></Data>​						  <Aspect t="uiaspect.ContextMenu"/><Aspect t="uiaspect.DefaultFeatures"/><Operations t="operation.Operations"><Operation t="operation.Operation" Title="rename %@name%" ID="Rename"><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="action.WriteValue" To="%@name%" Value="%@name%1"/><Action t="uiaction.RefreshItemElements"/></Action></Action></Operation></Operations><Fields t="field.Fields"><Field t="field.XmlField" Path="@name"/><Field t="field.XmlField" Path="@age"/></Fields><Items t="xml.XmlItems" Tag="person" ItemTypeName="person"/><Presentation t="uiaspect.RichTable"/></xtml></Var><Item t="aaeditor.CalcLocalPreviewData"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%$TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$TopXtml/Operations/Operation/Action%"/></Var></Item><Item t="text.Concat" Items="%Input/@name%" Separator=","/></Result><ExpectedResult t="yesno.EqualsTo" To="Homer,Bart,Lisa" /></Usage>​  </xtml><xtml ns="aaeditor"><Component id="TreeItemData" type="data.Data" execution="xtml"><Param name="ParentXtml" /><Param name="Field" /><Param name="Type" /><Param name="Xtml" /><Param name="IsDrillDown" type="data.Boolean" /><Param name="MakeLocalEntry" /><Param name="MakeLocalDefaultValuePath" /><xtml t="data.Struct"><Item Name="ParentXtml" Value="%$ParentXtml%" /><Item Name="Field" Value="%$Field%" /><Item Name="Type" Value="%$Type%" /><Item Name="Xtml" Value="%$Xtml%" /><Item Name="IsDrillDown" Value="%$IsDrillDown%" /><Item Name="MakeLocalEntry" Value="%$MakeLocalEntry%" /><Item Name="MakeLocalDefaultValuePath" Value="%$MakeLocalDefaultValuePath%" /></xtml></Component><Component id="NextTreeItemData" type="data.Data"><Param name="ParentTreeItem" /><Param name="TreeItem" /><xtml t="aaeditor.TreeItemData" ParentXtml="%$TreeItem/ParentXtml%" Type="%$TreeItem/Type%"      Field="%$TreeItem/Field%" Xtml="%$TreeItem/Xtml%" MakeLocalEntry="%$TreeItem/MakeLocalEntry%"><MakeLocalDefaultValuePath t="text.Text"        Text="%$OrigPath%%$ParentTreeItem/Field%"><Var name="OrigPath" t="data.Pipeline"><Item value="%$ParentTreeItem/MakeLocalDefaultValuePath%" /><Item t="text.Text" Text="%%/"><Condition t="yesno.NotEmpty" Data="%$ParentTreeItem/MakeLocalDefaultValuePath%" /></Item></Var><Condition t="yesno.NotEmpty" Data="%$ParentTreeItem/MakeLocalEntry%" /></MakeLocalDefaultValuePath></xtml></Component><Component id="AddTreeItemMakeLocalInfo" type="data.Data"><Param name="TreeItem" /><Param name="ParentTreeItem" /><xtml t="data.IfThenElse" Else="%$TreeItem%"><If t="yesno.And"><Item t="yesno.ItemsEqual" Item2="Default"><Item1 t="xml.Tag" Data="%$ParentTreeItem/Xtml%" /></Item><Item t="yesno.ItemsEqual" Item2="Param"><Item1 t="xml.Tag" Data="%$ParentTreeItem/Xtml/..%" /></Item></If><Then t="aaeditor.TreeItemData" ParentXtml="%$TreeItem/ParentXtml%" Field="%$TreeItem/Field%"        Type="%$TreeItem/Type%" Xtml="%$TreeItem/Xtml%" IsDrillDown="%$TreeItem/IsDrillDown%"        MakeLocalEntry="%$ParentTreeItem%" MakeLocalDefaultValuePath="" /></xtml></Component><Component id="ImageOfType" type="data.Data" execution="xtml"><Param name="Type" /><xtml t="data.Switch" Value="%$Type%"><Case If="data.Data" Then="%$_Images%/studio/data1616.gif" /><Case If="data.Aggregator" Then="%$_Images%/studio/data1616.gif" /><Case If="data.Boolean" Then="%$_Images%/studio/yesno1616.gif" /><Case If="ui.Control" Then="%$_Images%/studio/control1616.gif" /><Case If="action.Action" Then="%$_Images%/studio/run.gif" /><Default value="%$_Images%/default1616.gif" /></xtml></Component><Component id="ItemImageInTree" type="data.Data" execution="xtml"><xtml t="data.IfThenElse" If="%IsDrillDown%" Then="%$_Images%/studio/track.jpg"><Else t="aaeditor.ImageOfType" Type="%Type%" /></xtml></Component><Component id="ComponentOfScript"><xtml t="data.Pipeline"><Item t="xtml.ToScript" Xtml="%$AAEditorState/TreeXtml%" /><Item t="data.RecursiveScan" OnlyLeaves="true"><ChildNodes value="%..%"><Condition t="yesno.NotInList"><Item t="xml.Tag" /><List t="data.List"><Item value="Component" /><Item value="Usage" /></List></Condition></ChildNodes></Item><Item value="%../@ns%.%@id%"><Condition t="yesno.NotEmpty" Value="%@id%" /></Item></xtml></Component><Component id="WrapWithComposite"><Param name="To" /><Param name="ConfigEntry" /><xtml t="aaeditor.WriteValue" Data="%$To/Xtml%" To="%$To%"><Value t="xml.Xml" DynamicContent="true"><aaeditor valuetype="wrap" component="%$ConfigEntry/@component%"          itemsParam="%$ConfigEntry/@itemsParam%" /></Value></xtml></Component><Component id="ClickOnAdd" type="action.Action"><xtml t="action.RunActions"><Action t="menu.OpenContextMenu"><Menu t="menu.ContextMenu" HeaderMessage="Add :"><Item t="menu.DynamicMenuItems" Text="%%"><Items t="aaeditor.CommonPropertiesToAdd" /><Image t="data.Switch"><Case If="Data" Then="%$_Images%/studio/data1616.gif" /><Case If="Condition" Then="%$_Images%/studio/yesno1616.gif" /><Default value="%$_Images%/default1616.gif" /></Image><Action t="aaeditor.AddCommonPropertyToTreeSelected" CommonProperty="%%" /></Item></Menu></Action><Action t="dialog.TogglePopup" Width="100" Condition="false"><Contents t="ui.DynamicList"><Items t="aaeditor.CommonPropertiesToAdd" /><Control t="ui.Button" Text="%%"><Image t="data.Switch"><Case If="Data" Then="%$_Images%/studio/data1616.gif" /><Case If="Condition" Then="%$_Images%/studio/yesno1616.gif" /><Default value="%$_Images%/default1616.gif" /></Image><OnClick t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="aaeditor.AddCommonPropertyToTreeSelected" CommonProperty="%%" /></OnClick><Style t="ui.ButtonAsHyperlink" /></Control></Contents></Action></xtml></Component><Component id="CommonPropertiesToAdd" type="data.Data"><xtml t="data.List"><Item t="data.Subtract"><List t="data.Switch" Value="%$AAEditorState/SelectedInTree/Type%"><Case If="ui.Control"><Then t="text.Split" Separator="," Data="Data,Name,Condition,Class,Remark" /></Case><Case If="action.Action"><Then t="text.Split" Separator=","              Data="Data,Name,Condition,RunOn,Remark" /></Case><Default t="text.Split" Separator="," Data="Data,Name,Condition,Remark" /></List><Subtract t="data.Pipeline"><Item value="%$AAEditorState/SelectedInTree/Xtml%" /><Item t="data.List"><Item t="data.Pipeline"><Item t="xml.Attributes" /><Item t="xml.AttributeName" /></Item><Item t="data.Pipeline"><Item value="%" /><Item t="xml.Tag" /></Item></Item></Subtract></Item><Item value="Variable" /></xtml></Component></xtml><xtml ns="aaeditor_usage"><Usage t="usage.DataUsage" Of="aaeditor.CommonPropertiesToAdd"><Var name="startingXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.AddPrefix" Prefix="hello " Data="%%"/></xtml></Var><Var name="AAEditorState" t="aaeditor.State"><GlobalPreviewXtml t="xtml.Xtml" Xtml="%$startingXtml%"/><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$startingXtml%" Field="Item[1]" Xtml="%$startingXtml/Item%" Type="data.Data"/></Var><Result t="data.Pipeline"><Item t="aaeditor.CommonPropertiesToAdd"/><Aggregator t="text.Concat" Separator=","/></Result><ExpectedResult t="yesno.EqualsTo" To="Name,Condition,Remark,Variable"/><Description value="determines the common properties available for addition of the selected item in the tree"/></Usage><Usage t="ui.ControlUsage" Name="AddCommonPropertyToTreeSelected" IsTest="false"><Data t="xml.Xml"><xtml t="data.Pipeline"><Item value="hello world" /></xtml></Data><Var name="AAEditorState" t="aaeditor.State"/><Control t="aaeditor.ScriptTree"/><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="script tree control"><Filter t="yesno.ItemsEqual" Item1="%Field%" Item2="Item[1]"/></Action><Action t="aaeditor.AddCommonPropertyToTreeSelected" CommonProperty="Data"/></RunOnControl><CleanAfter t="dialog.CloseDialog"/><ExpectedResult t="yesno.Contains"><Data t="dialog.TopDialogContent"/><Text value="primitive"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="aaedior ScriptTree - popup for enum" IsTest="false" ><Control t="ui.Section"><Data t="xml.Xml"><xtml t="ui.Section" Level="Heading 4"/></Data><Control t="aaeditor.ScriptTree"><Var name="AAEditorState" t="aaeditor.State"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem"><Filter t="yesno.EqualsTo" Data="%Field%" To="Level"/></Action><Action t="tree.DoubleClickOnSelected"/></RunOnControl><CleanAfter t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="dialog.CloseDialog" /></CleanAfter><ExpectedResult t="yesno.Contains"><Data t="dialog.ContentsOfOpenPopup"/><Text value="Heading 1"/><Text value="Box"/></ExpectedResult></Usage></xtml><xtml ns="aaeditor"><Component id="UndoAction" type="data.Data"><Param name="WriteValue" /><Param name="WriteTo" /><Param name="GlobalPreviewXtml" /><Param name="TreeXtml" /><Param name="SelectedInTreeFullPath" /></Component><Component id="XtmlByPath" type="data.Data"><Param name="Path" short="true"/><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition"><ID t="text.Split" Text="%$Path%"/></Item><Item value="sds"/></xtml></Component></xtml><xtml ns="aaeditor_usage"><Usage1 t="usage.DataUsage" Of="aaeditor.XtmlByPath" HtmlResultAsXml=""><Result t="aaeditor.XtmlByPath" Path="data.ListByCommas/@Separator"/></Usage1></xtml><xtml ns="aaeditor_usage"><Usage t="ui.ControlUsage" Of="aaeditor.PreviewControl"><Data t="xml.Xml"><xtml t="ui.Section"><Control t="ui.Text" Text="hello world"/><Control t="ui.Button"><Text t="data.Pipeline"><Item value="hello"/><Item value="%% world"/></Text><OnClick t="uiaction.Alert" Text="hello world"/></Control><Control t="ui.Button" Text="button 2"><OnClick t="uiaction.Alert" Text="button2 clicked"/></Control></xtml></Data><Control t="ui.Section"><Var name="AAEditorState" t="aaeditor.State"><TreeXtml t="xtml.Xtml" Xtml="%%"><Input t="xml.Xml"><person name="Homer"/></Input></TreeXtml><SelectedInTree t="aaeditor.TreeItemData" Xtml="%%"/></Var><Control t="aaeditor.PreviewControl"/></Control><ExpectedResult t="yesno.Contains"><Text value="Homer"/><Text value="hello world"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="aaeditor.RuntimeObjectControl"><Control t="ui.Section"><Control t="aaeditor.RuntimeObjectControl" Object="some text"/><Control t="aaeditor.RuntimeObjectControl"><Object t="xml.Xml"><person name="Homer"/></Object></Control><Control name="large xml" t="aaeditor.RuntimeObjectControl"><Object t="xml.Xml"><Plugin type="Application" name="Gallery" usage="gallery_usage"><Description>Ajaxart Component Gallery</Description><PromotedComponent id="gallery.ComponentBrowser"/><PromotedComponent id="gallery.ApplicationView"/><PromotedComponent id="gallery.ApplicationView"/><PromotedComponent id="gallery.ApplicationView"/><PromotedComponent id="gallery.ApplicationView"/><PromotedComponent id="gallery.ApplicationView"/></Plugin></Object></Control><Control1 name="array" t="aaeditor.RuntimeObjectControl"><Object t="data.List"><Item t="ui.Html"><div><div class="background:red;">html content</div></div></Item><Item t="xml.Xml"><person name="Homer"/></Item><Item value="Marge"/></Object></Control1><Control name="empty" t="aaeditor.RuntimeObjectControl"><Object t="data.Empty"/></Control><Control t="aaeditor.RuntimeObjectControl" Object="partial html text &lt;bold&gt;bbb&lt;/bold&gt;"/><Control name="large xml" t="aaeditor.RuntimeObjectControl"><Object t="ui.HtmlControl" Html="some html &lt;u&gt;control &lt;/u&gt;"></Object></Control><Control t="aaeditor.RuntimeObjectControl" Remark="some items"><Object t="data.List"><Item value="Homer"/><Item value="Marge"/><Item value="Bart"/><Item value="Lisa"/><Item value="Magi"/></Object></Control><Control t="aaeditor.RuntimeObjectControl" Remark="context"><Object t="xtml.CurrentContext"><Var name="Var1" value="sample value"/><Var name="Var2" t="xml.Xml"><person name="homer" /></Var></Object></Control><Control t="aaeditor.RuntimeObjectControl" Remark="field"><Object t="field.XmlField" Path="@Name" /></Control><Control t="aaeditor.RuntimeObjectControl" Remark="object"><Object t="object.Object"><Property name="Name" value="Homer" /><Property name="Details"><value t="xml.Xml" DynamicContent=""><person name="Homer" age="38"/></value></Property><Property name="List"><value t="data.ListByCommas" List="homer,marge,bart" /></Property><Property name="More"><value t="data.Struct"><Item Name="Age" Value="42"/></value></Property><Method name="OnUpdate"><Value t="uiaction.Refresh" /></Method></Object></Control></Control><ExpectedResult t="yesno.Contains"><Text value="some text"/><Text value="Homer"/></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="aaeditor.SelectDialogData"><Description value="an xml for a change action new value"/><Result t="aaeditor.SelectDialogData"><Var name="Xtml" t="xml.Xml"><xtml t="ui.Section"/></Var><TreeItemData t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Style" Type="ui.SectionStyle"/></Result><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" DynamicContent=""><aaeditor valuetype="component" type="ui.SectionStyle" primitive="" component=""/></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Name="aaeditor.SelectDialogData - enum"><Result t="aaeditor.SelectDialogData"><Var name="Xtml" t="xml.Xml"><xtml t="ui.Section"/></Var><TreeItemData t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Level" Type="enum"/></Result><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" DynamicContent=""><aaeditor valuetype="primitive" type="enum" primitive="" component=""/></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Name="SelectDialogData - primitive"><Description value="an xml for a change action new value"/><Result t="aaeditor.SelectDialogData"><Var name="Xtml" t="xml.Xml"><xtml t="ui.Section"/></Var><TreeItemData t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Title" Type="data.Data"/></Result><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" DynamicContent=""><aaeditor valuetype="primitive" type="data.Data" primitive="" component=""/></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Name="SelectDialogData - existing primitive"><Description value="an xml for a change action new value"/><Result t="aaeditor.SelectDialogData"><Var name="Xtml" t="xml.Xml"><xtml t="ui.Section" Title="my title"/></Var><TreeItemData t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="Title" Type="data.Data" Xtml="%$Xtml/@Title%"/></Result><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" DynamicContent=""><aaeditor valuetype="primitive" type="data.Data" primitive="my title" component=""/></To></ExpectedResult></Usage></xtml><xtml ns="bart_dt_compress" plugin="jbart_editor"><Component id="Components" type="data.Data"><Param name="Script"/><Param name="BlackList"/><xtml t="data.List"><Item t="data.Pipeline"><Item t="data.Pipeline"><Item t="data.IfThenElse" ><If t="yesno.OR" Data="%$Script%"><Item t="xml.IsOfTag" Tag="bart_dev"/><Item t="xml.IsOfTag" Tag="bart_sample"/><Item t="xml.IsOfTag" Tag="jbart_project"/></If><Then t="data.List"><Item t="bart_dt_compress.JBartUsedComponents" WidgetSource="%$Script%"/><Item t="xtml.ComponentDefinition" ID="jbart_api.ShowWidget"/><Item t="xml.Xml"><Xtml t="jbart.TextboxCss" /></Item></Then><Else value="%$Script%"/></Item><Item t="bart_dt_compress.FindAllPts" Xtml="%%" BlackList="%$BlackList%"/><Aggregator t="data.ExpandWithRelated" MaxDepth="20" LogRelationsTo="%$XtmlRelations%"><Relation t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%%"/><Item t="data.List"><Item value="%xtml%"/><Item value="%NativeHelper%"/><Item value="%Param/Default%"/></Item><Item t="bart_dt_compress.FindAllPts" Xtml="%%" BlackList="%$BlackList%"/><Item t="yesno.PassesFilter"><Filter t="yesno.Not"><Of t="yesno.Contains"><Text value="aaeditor"/><Text value="_dt"/></Of></Filter></Item></Relation></Aggregator><Aggregator t="data.Sort" Type="text" Order="Descending"><SortBy t="data.Pipeline"><Item value="%Item%"/><Item t="text.Split" Separator="." Part="First"/></SortBy></Aggregator></Item><Item value="%Item%"/></Item><Item value="jbart_api.ShowWidget"/></xtml></Component><Component id="Xtml" type="data.Data"><Param name="Components" /><xtml t="data.Pipeline"><Item t="data.List"><Item t="data.Pipeline"><Item value="%$Components%" /><Aggregator t="data.GroupBy" Items="%%"><GroupBy t="text.Split" Separator="." Part="First"/><Group t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><xtml ns="%ID%"/></Xml><Change t="xml.AddChildren" CloneChildren="true"><Children t="data.Pipeline"><Item value="%Items%"/><Item t="xtml.ComponentDefinition" ID="%%"/><Item1 t="bart_dt_compress.CompressComponent" /></Children></Change></Group></Aggregator></Item><Item t="xml.WithChanges"><Xml t="xml.Xml"><xtml ns="text"/></Xml><Change t="xml.AddChildren"><Children t="xtml.TypeDefinition" Type="text.HebrewText"/></Change></Item></Item><Aggregator t="xml.Wrap"><Head t="xml.Xml"><xtml package="true"/></Head></Aggregator></xtml></Component><Component id="GCs" type="data.Data"><Param name="Components"/><Param name="LogUsage" type="data.Boolean"/><xtml t="data.Pipeline"><Item value="%$Components%"/><Aggregator t="data.GroupBy" Items="%%"><GroupBy t="text.Split" Separator="." Part="First"/><Group t="data.Pipeline"><Item value="%Items%"/><Aggregator t="text.Concat" Separator=",&#xa;" Prefix="aa_gcs(&quot;%$ns%&quot;, { &#xa;" Suffix="&#xa;});"/><Var value="%ID%" name="ns"/><Item t="data.Pipeline"><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa;   var middlePos = data.indexOf(\'.\');&#xa;   var ns = data.substring(0,middlePos);&#xa;   var compName = data.substr(middlePos+1);&#xa;   var content;&#xa;   if (ajaxart.gcs[ns] &amp;&amp; ajaxart.gcs[ns][compName]) &#xa;     content = compName + &quot;:&quot; + ajaxart.gcs[ns][compName]; &#xa;   else return \'\'; &#xa;   var out = content;&#xa;   %$Log%&#xa;   return out;&#xa;}"/><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty" Value="%%"/></Item></Item></Group></Aggregator><Aggregator t="text.Concat" Separator="&#xa;&#xa;/*********/&#xa;&#xa;&#xa;&#xa;"/><Var value="   var index = content.indexOf(&quot;{&quot;);&#xa;   out = content.substring(0,index+1) + &quot;\\n&quot; + &quot;aa_gc_use(\'&quot; + data + &quot;\',&quot; + content.length + &quot;);\\n&quot;+ content.substring(index+1);&#xa;" name="Log" Condition="%$LogUsage%"/></xtml></Component><Component id="DependentFunctions" type="data.Data" execution="native"><Param name="Code" Default="%%" /></Component><Component id="CodeSnippets" type="data.Data" execution="native"><Param name="JsInComponents" Default="%$JsInComponents%" /></Component><Component id="JsUtils" type="data.Data"><Param name="GCs"/><Param name="LogUsage" type="data.Boolean"/><Param name="WidgetXml" /><Param name="JsToAdd" /><xtml t="data.Pipeline"><Item t="data.Pipeline"><Item t="data.List"><Item t="data.Pipeline"><Item t="data.List"><Item t="bart_dt_compress.CodeSnippets" /><Item value="%$GCs%"/><Item value="%$JsToAdd%" /></Item><Item t="bart_dt_compress.DependentFunctions"/></Item><Item t="text.Split" Separator="," Text="%$WidgetXml/compress/@js_white_list%" /><Item t="bart_dt_compress.FunctionsWhiteList" /></Item><Aggregator t="data.ExpandWithRelated" MaxDepth="13" LogRelationsTo="%$JsRelations%"><Relation t="data.Pipeline"><Item t="data.JavaScript"><Code value="function(data,html_elem,context) {&#xa;  if (data.indexOf(&quot;.&quot;) == -1)&#xa;    return window[data];&#xa;  else&#xa;    return data + &quot; = &quot; + eval(data);&#xa;}"/></Item><Item t="bart_dt_compress.DependentFunctions" Code="%%" /><Item1 t="yesno.PassesFilter" remark="Functions BlackList"><Filter t="yesno.NotEqualsTo" To="aa_uidocument"/></Item1></Relation></Aggregator></Item><Aggregator t="text.Concat" Separator="&#xa;&#xa;&#xa;&#xa;" Prefix="%$Globals%&#xa;%$JsToAdd%&#xa;"><Var name="Globals" t="bart_dt_compress.Globals"/><ItemText t="data.Pipeline"><Item value="%Item%"/><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa;  var content = &quot;&quot;;&#xa;  if (data.indexOf(&quot;.&quot;) == -1) { &#xa;    var func_str = &quot;&quot; + window[data];&#xa;    if (func_str.indexOf(&quot;function (&quot;) == 0)&#xa;      content = &quot;function &quot; + data + &quot; &quot; + func_str.substring(8);&#xa;    else&#xa;      content = func_str;&#xa;  } &#xa;  else&#xa;    content = data + &quot; = &quot; + eval(data);&#xa;  var out = content;&#xa;  %$Log%  &#xa;  return out;&#xa;}"/></ItemText></Aggregator><Var name="Log" value="  if (content.indexOf(&quot;//aa_mark_component_usage&quot;) &gt; -1)&#xa;    content = content.replace(&quot;//aa_mark_component_usage&quot;,&quot;aa_mark_component_usage&quot;);&#xa;  out = &quot;aa_mark(\'&quot; + data + &quot;\',&quot; + content.length + &quot;);\\n&quot;;&#xa;  var index = content.indexOf(\'{\');&#xa;  out += content.substring(0,index+1) + &quot;\\n&quot; + &quot;aa_use(\'&quot;+ data + &quot;\',&quot; + content.length + &quot;);\\n&quot; + content.substring(index+1);&#xa;" Condition="%$LogUsage%"/></xtml></Component><Component id="BlackList" type="data.Data"><xtml value="datefilter.DateFilterControl,field.TextFilterControl,debugui.OpenDebugUi" /></Component><Component id="FunctionsWhiteList" type="data.Data"><xtml t="data.ListByCommas" List="aa_gcs,ajaxart.load_plugin,ajaxart.ready,ajaxart.parsexml,ajaxart.start,jbart_init,ajaxart_tree_prev,ajaxart_tree_next,aa_init_ipad,aa_visible,aa_visible_selectable,jbart_data_arrived,jBart.ready,jbart_data,aa_determine_device,_xml,ajaxart_screen_size,aa_crossdomain_call,jBart.activator,jBart.xpath,jBart.parsexml,aa_show_field_widget"/></Component><Component id="Globals" type="data.Data"><xtml t="data.Pipeline"><Item t="data.List"><Item value="var ajaxart = { debugmode: false, xtmls_to_trace: [], trace_level: 2,          traces : [], components: [], componentsXtmlCache: [], usages: [], types: [], plugins: [], gcs: {},          log_str: \'\', loading_objects : 0, logs: {}, default_values: [], inPreviewMode: false, stack_trace: [], build_version: \'ART_NOW\',          xml: {}, cookies: {}, ui: {}, yesno: {}, dialog: { openPopups: []}, xmlsToMonitor: [], lookup_cache: {}, occurrence_cache: {},          unique_number: 1, action: {}, runningTimers: {}, runDelayed: [], hasVarsRegex: /\\%[^ ,;\\(\\)]/ , STRING_WITH_EXP: /%[^ ,;\\(\\)]/, NOT_EXP: /^[ ,;\\(\\)]/,};         window.jBartWidgets = window.jBartWidgets || { vars: {} };" /><Item value="var jBart = { vars: {}, api: {}, utils: {}, dialogs: {}, bart: {}, db: {} }" /><Item value="var aa_noOfOpenDialogs= 0,aa_dialogCounter= 0,openDialogs = [], aa_openDialogs = [];" /><Item value="var aa_intest,aa_incapture;" /><Item value="var aa_navigation_codes = [38,40, 33,34,63277,63276];" /><Item value="var aa_xmlinfos = [], aa_async_finished_listeners = [];" /><Item t="data.Pipeline"><Var name="Func" t="data.JavaScript" Code="function() { return \'\' + jBartPreloader; }" /><Item value="window.jBartPreloader = %$Func%" /></Item><Item value="jbart_init();" /><Item value="aa_determine_device();" /><Item value="var aa_delayed_actions = {};" /><Item1 value="window.ajaxart_runevent = ajaxart_runevent;" remark="ugly, Supports onclick from html"/></Item><Aggregator t="text.Concat" Separator="&#10;" /></xtml></Component><Component id="JBartUsedComponents"><Param name="WidgetSource"/><xtml t="data.List" Data="%$WidgetSource%"><Item value="%//Resource[@t=\'jbart_resource.Data\']%"/><Item value="%//Resource[@t=\'bart_resource.Xml\']%"/><Item value="%//Resource[@t=\'bart_resource.Value\']%"/><Item value="%//ApplicationFeature%"/><Item value="%//StyleGuide%"/><Item t="data.Pipeline"><Item value="%//Component%"/><Item t="yesno.PassesFilter" Filter="%@id% != \'App\'"/></Item><Item value="%//Page%"/></xtml></Component><Component id="JSMinCompress" type="data.Data" execution="native"><Param name="Script" ><Default value="%%" /></Param><Param name="Level" type="enum"><Default value="conservative" /><value>minimal</value><value>conservative</value><value>agressive</value></Param><Param name="Comments" /></Component><Component id="FindAllPts" type="data.Data" execution="native"><Param name="Xtml" /><Param name="BlackList" Description="comma separated"/></Component><Component id="CompressComponent" type="data.Data" execution="native" ><Param name="Component" Default="%%" /></Component><Component id="SizeOfComponent" type="data.Data"><Param name="ID" essential="true"/><xtml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$ID%"/><Item t="xml.XmlToText"/><Item t="text.Length"/></xtml></Component><Component id="DependentComponents" type="data.Data"><Param name="ID" essential="true"/><xtml t="data.List"><Var name="Definition" t="xtml.ComponentDefinition" ID="%$ID%"/><Item t="data.Pipeline"><Item value="%$Definition%"/><Item t="data.List"><Item value="%xtml%"/><Item value="%NativeHelper%"/><Item1 value="%Param/Default%"/></Item><Item value="%//@t%"/><Item t="xml.XmlToText"/><Aggregator t="data.MakeUnique"/></Item><Item value="ajaxart.gcs.%$ID%"/></xtml></Component><Component id="Definition" type="data.Data"><Param name="ID" essential="true"/><xtml t="data.FirstSucceeding"><Item t="xtml.ComponentDefinition" ID="%$ID%"/><Item t="bart_dt_compress.FunctionDefinition" Name="%$ID%"/></xtml></Component><Component id="Dependent" type="data.Data"><Param name="ID" essential="true"/><xtml t="data.IfThenElse"><If t="yesno.NotEmpty"><Data t="xtml.ComponentDefinition" ID="%$ID%"/></If><Then t="bart_dt_compress.DependentComponents" ID="%$ID%"/><Else t="data.Pipeline"><Item t="bart_dt_compress.DependentFunctions"><Code t="bart_dt_compress.FunctionDefinition" Name="%$ID%"/></Item><Aggregator t="data.MakeUnique"/></Else></xtml></Component><Component id="FunctionDefinition" type="data.Data" execution="native"><Param name="Name" essential="true"/></Component></xtml><xtml ns="bart_dt"><Component id="ControlInContext" type="ui.Control"><Param name="DB" /><Param name="Control" type="ui.Control" script="true" /><xtml t="ui.List"><Var name="_BartDTDB" value="%$DB%" /><Var name="_InBartDesignTime" value="true" /><Var name="BartUnits" value="%$DB/bart_unit/bart_unit%" /><Var name="BartMainUnit" t="data.Pipeline"><Item value="%$BartUnits%" /><Item t="data.First" /></Var><Var name="BartAppXtml" t="data.Pipeline"><Item value="%$BartUnits/Component[@id=\'App\']/xtml%" /><Aggregator t="data.First" /></Var><Var name="BartContentTypesXtml" t="data.Pipeline"><Item value="%$BartUnits/Component[@type=\'bart.ContentType\']/xtml%" /><Item t="data.IfThenElse" If="%@t% == \'bart.ContentTypes\'" Then="%ContentType%" Else="%%" /></Var><Control t="xtml.UseParam" Param="Control" /></xtml></Component><Component id="ExternalJSFiles" type="ui.Control"><xtml t="ui.Document" Data="%$_WidgetXml%"><Field t="field.Text" ID="Text" Title="Description" Text="Notice, these files are automatically loaded &lt;b&gt;only&lt;/b&gt; at the studio. The embedding html should include them manually."><Style t="uitext.YellowBox"/><FieldAspect t="field_aspect.Css" Inline="white-space: normal;&#xa;"/></Field><Field t="field.XmlMultipleGroup" ID="files" Title="Files" TitleForSingle="File" HideTitle="true"><FieldAspect t="field_aspect.HideTitle"/><Items t="field.InnerItems" Path="externalJS/file"/><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.DefaultFeatures" ItemSelection="true" Toolbar="true" ItemDetails="true" AutoDoubleClick="false"/><Operations t="operation.Operations"><Operation t="operation.Operation" ID="NewItem" Title="New File" Target="new" Icon="images/add1616.png" Shortcut="Alt+N" WritableOnly="true"><Action t="operation.New"/></Operation><Operation t="operation.Operation" ID="DeleteItem" Target="item" Title="Delete File" Icon="images/delete1616.gif" Shortcut="Delete" WritableOnly="true"><Action t="operation.Delete"/></Operation></Operations><Field t="field.OpenButton" Title="Open" ID="Open" ID__Manual="" ExpandCollapseImages="true"><ButtonStyle t="ui.ButtonAsImage" HoverIndication="true" MultiLangImage="false"/></Field><Field t="field.Field" FieldData="%!@file_name%" ID="file_name" Title="File Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Resizer" Disable="true" RememberLastWidth="false"/><FieldAspect t="field_aspect.Css" Inline="width: 280px;"/><FieldAspect t="field_aspect.HideInProperties"/></Field><Field t="field.Field" FieldData="%!@file_name%" ID="file_name_inner" Title="File Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Resizer" Disable="true" RememberLastWidth="false"/><FieldAspect t="field_aspect.HideInTable"/></Field><Field t="field.Field" FieldData="%!@load_condition%" ID="load_condition" Title="Load Condition" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Resizer" Disable="" RememberLastWidth="false"/><FieldAspect t="field_aspect.HideInTable"/><FieldAspect t="field_aspect.Description" Description="Keep empty for jQuery.getScript"/></Field><Aspect t="uiaspect.ItemDetails" Transactional="true"><OpenIn t="uiaspect.DetailsInplace" CloseInplaceSiblings="" ToolbarLocation="bottom" AutoOpenWhenZooming="none"><InplaceToolbar t="uiaspect.DetailsToolbar"><ButtonStyle t="ui.ButtonAsHyperlink"/></InplaceToolbar></OpenIn><OpenNewIn t="uiaspect.DetailsInplace" CloseInplaceSiblings="" ToolbarLocation="bottom" AutoOpenWhenZooming="none"><InplaceToolbar t="uiaspect.DetailsToolbar"><ButtonStyle t="ui.ButtonAsHyperlink"/></InplaceToolbar></OpenNewIn></Aspect><Field t="field.Field" FieldData="%!@cloud_base_url%" ID="cloud_base_url" Title="Cloud Base Url" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.HideInTable"/></Field><Field t="field.Field" FieldData="%!@local_base_url%" ID="local_base_url" Title="Local Base Url" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.HideInTable"/></Field></Field><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/></xtml></Component><Component id="Resources" type="ui.Control"><xtml t="ui.Section"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Control t="ui.ItemList" Data="%$BartAppXtml/Resources%" Class="resorces"><Items t="xml.XmlItems" Tag="Resource"/><Operations t="operation.StdOperations" OpenItemDetails="true"/><Fields t="field.Fields"><Field t="field.Field1" ID="image"><FieldAspect t="field_aspect.CellPresentation" Content="control"/><Control t="ui.Image" Source="%$_Images%/studio/file.png"/></Field><Field t="field.Field1" Title="Resource" ID="resource"><FieldData t="text.FirstSucceeding"><Item value="%@ResourceID%"/><Item value="%ID%"><Data t="xtml.RunXtml" Xtml="%%"/></Item></FieldData></Field><Field t="field.Field1" Title="Summary" ID="summary"><FieldData t="data.Switch" Value="%@t%" Default=""><Case If="bart_resource.Node" Then="single node: %@ContentType%.%@ID%"/><Case If="bart_resource.Query" Then="query: %@ContentType%"/></FieldData></Field><Field t="field.Field1" Title="Value" ID="value"><Control t="ui.Switch"><Var name="OriginalResource"/><Data t="data.ItemByID" ID="%@ResourceID%" List="%$_BartContext/Resources%"/><Var name="Items" value="%Items%"/><Var name="Count" t="data.Count" Items="%$Items%"/><Case><Then t="ui.Text" Text=""/><IfCondition t="yesno.IsEmpty" Value="%$Items%"/></Case><Case><Then t="ui.Text" Text="%Items%"/><IfCondition t="yesno.And"><Item value="%$Count% == 1"/><Item t="yesno.NotEmpty"><Value t="text.Text" Text="%$Items%"/></Item></IfCondition></Case><Default t="ui.Button" Image="%$_Images%/studio/bullet1616.gif"><Text t="data.IfThenElse" If="%$Count% == 1" Then="1 item" Else="%$Count% items"/><Style t="ui.ButtonAsHyperlink"/><OnClick t="action.IfThenElse"><If t="yesno.And"><Item t="yesno.NotEmpty" Value="%$OriginalResource/Xml/*%"/><Item t="yesno.ItemsEqual" Item1="%$OriginalResource/@t%" Item2="bart_resource.Xml"/></If><Then t="xmlui.ShowTextareaXmlDialog" Xml="%$OriginalResource/Xml/*%" AutoWrite="true" Title="%$OriginalResource/@ResourceID%"><OnUpdate t="uiaction.Refresh" RunOn=".resources_view"/></Then><Else t="dialog.OpenDialog"><Dialog t="dialog.Dialog"><Content t="aaeditor.RuntimeObjectControl" Object="%$Items%"/></Dialog></Else></OnClick></Default></Control><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field></Fields><Aspect t="uiaspect.FastFind"/><Aspect t="uiaspect.DefaultFeatures"/><Presentation t="uiaspect.RichTable" Columns="image,resource,summary,value,OpenItemDetails"/><Aspect t="xtml_dt.XtmlItemDetails" Type="bart_resource.Resources"/></Control><Control t="ui.Section" Title="Loading Phases"><Control t="ui.ItemList" Data="%$BartAppXtml/LoadingPhases%"><Items t="xml.XmlItems" Tag="Phase"><DoOnNewItem t="xml.SetAttribute" AttributeName="t" Value="bart.LoadingPhase"/></Items><Fields t="field.Fields"><Field t="field.XmlField" Path="@Resources"><Type t="field_aspect.Picklist" Multiple="true" AllowEmptyValue="true"><Options t="picklist.DynamicOptions" Options="%$_BartContext/Resources/ID%"/></Type></Field></Fields><Operations t="operation.Operations"><Operation t="operation.StdOperations"/></Operations><Aspect t="uiaspect.DefaultFeatures"/><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.CellPresentation" Content="control"/><Aspect t="uiaspect.ItemDetails"><OpenNewIn t="uiaspect.ExpandAllText"/></Aspect></Control><Control t="ui.Document" Data="%$BartAppXtml/LoadingPhases%"><Fields t="xtml_dt.ParamsAsFields" Params="LazyResources"/></Control><Control t="ui.Text" Text="All other resources are loaded at the end."/></Control></xtml></Component><Component id="XtmlComponentsItems" type="data_items.Items"><xtml t="data_items.Items" Items="%$_BartContext/AppXtml/../../Component%" ItemTypeName="component"><Aspect t="data_items.EasyWritable"><DeleteItem t="xml.Delete" /><NewDetachedItem t="xml.ByTag" Tag="Component"><Change t="xml.SetAttribute" AttributeName="bart_unit" Value="%$_BartContext/Units/@id%" /><Change t="xml.SetAttribute" AttributeName="type" Value="data.Data" /></NewDetachedItem><SaveNewItem t="action.RunActions"><Action t="xml.ChangeXml"><Var name="PT" t="data.Switch" Value="%@type%"><Case If="data.Data" Then="data.Pipeline" /><Case If="ui.Control" Then="ui.Section" /><Case If="action.Action" Then="action.RunActions" /><Default t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="%@type%" AlsoHidden="false" /><Aggregator t="data.First" /></Default></Var><Xml t="xml.ItemByID" List="%$_BartContext/Units%" ID="%@bart_unit%" /><Change t="xml.AddChildren"><Children t="xml.Xml" DynamicContent="true"><Component id="%@id%" type="%@type%"><xtml t="%$PT%" /></Component></Children></Change></Action><Action t="xtml.LoadComponents" Namespace="%@bart_unit%"><Components t="data.Pipeline"><Item t="xml.ItemByID" List="%$_BartContext/Units%" ID="%@bart_unit%" /><Item value="%Component%" /></Components></Action></SaveNewItem><NewValueFromDetached t="xtml.ComponentDefinition" ToXtml="false" ID="%@bart_unit%.%@id%" /></Aspect></xtml></Component><Component id="XtmlComponents" type="ui.Control"><xtml t="ui.SectionsList"><Section t="ui.SectionListPage" Title="xtml components"><Control t="ui.ItemList"><Items t="bart_dt.XtmlComponentsItems"/><Operations t="operation.Operations"><Operation t="operation.StdOperations"/><Operation t="operation.Operation" ID="aaeditor" Title="Open aaeditor tree" Icon="%$_Images%/edit1616.gif"><Action t="xtml_dt_tree.OpenScriptDialog" Data1="%xtml%"><Var name="AAEditorState" t="aaeditor.State"><GlobalPreviewXtml t="xtml.Xtml" Xtml="%xtml%" Input=""/><TreeXtml t="xtml.Xtml" Xtml="%%" Input=""/><SaveAction t="aaeditor.Save"/></Var></Action></Operation><Operation t="operation.Operation" ID="edit_xml" Title="edit as xml" Icon="%$_Images%/studio/xml4.gif"><Action t="xmlui.ShowXmlDialog" AutoWrite="true" Xml="%%" Title="xml of component %@id%"/></Operation><Operation t="operation.Operation" ID="xtml" Title="xtml" Icon="%$_Images%/studio/file1616.png"><Action t="xmlui.ShowXmlDialog" AutoWrite="true" Xml="%$_BartDevDtContext/DevUnits%" Title="%$_BartDevDtContext/DevUnits/@id%"><Var name="OriginalVID" t="text.Text" Text="%$_BartDevDtContext/DevUnits/@vid%"/><OnChangeXml t="xml.SetAttribute" Remark="keep original vid" Data="%$_BartDevDtContext/DevUnits%" AttributeName="vid" Value="%$OriginalVID%"/></Action></Operation></Operations><Fields t="field.Fields"><Field t="field.XmlField" Title="unit" Path="../@id"/><Field t="field.XmlField" Path="@id"/><Field t="field.XmlField" Path="@type"/></Fields><Aspect t="uiaspect.FastFindInHtmlTree"/><Aspect t="uiaspect.DefaultFeatures"/><Aspect t="uiaspect.Table"/><Aspect t="uiaspect.ItemDetails"><NewItemPage t="ui.ItemPage"><Field t="field.CustomControl"><Control t="ui.Document"><Item t="data_items.Items" Items="%%"/><Fields t="field.Fields"><Field t="field.XmlField" Path="@id"><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@bart_unit"><FieldAspect t="field_aspect.DefaultValue" Value="%$BartAppXtml/../../@id%"/><FieldAspect t="field_aspect.Picklist"><Options t="picklist.DynamicOptions" Options="%$_BartContext/Units/@id%"/></FieldAspect><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@type"><FieldAspect t="field_aspect.Mandatory"/><FieldAspect t="field_aspect.Picklist"><Options t="picklist.DynamicOptions"><Options t="xtml.AllTypes"/></Options></FieldAspect></Field></Fields></Control><FieldAspect t="field_aspect.HideTitle"/></Field></NewItemPage></Aspect></Control></Section><Section t="ui.SectionListPage" Title="usages"><Control t="bart_dt.Usages"/></Section></xtml></Component><Component id="Menus" type="ui.Control"><xtml t="ui.ItemList" Data="%$BartAppXtml/Menus%"><Items t="xml.XmlItems" Tag="Menu" /><Fields t="field.Fields"><Field t="field.Field1" Title="menu" FieldData="%@ID%" /></Fields><Aspect t="uiaspect.DefaultFeatures" /><Presentation t="uiaspect.RichTable" /><Aspect t="xtml_dt.XtmlItemDetails" Type="bart.Menus" /><Operations t="operation.StdOperations" OpenItemDetails="true"/></xtml></Component><Component id="Pages" type="ui.Control"><Param name="IncludeMenus" type="data.Boolean"/><xtml t="ui.ItemList" Class="pages"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Data value="%$BartAppXtml/Pages%" /><Items t="xml.XmlItems" Tag="Page" /><Operations t="operation.StdOperations" OpenItemDetails="true"><DoAfterNew t="bart_dt.Refresh" /></Operations>​        <Fields t="field.Fields"><Field t="field.CustomControl" ID="id" Title="page" ShowTitle="true"><Control t="ui.Button" Text="%@ID%"><OnClick t="bart_dt.GoToEditPage" Page="%@ID%"/><Style t="ui.ButtonAsHyperlink"/></Control></Field><Field t="field.Field1" ID="t" Title="type"><FieldData t="text.RemovePrefix" Data="%@t%" Separator="."/></Field></Fields><Aspect t="uiaspect.Table" Columns="id,t,preview,module,menu,OpenItemDetails"/><Aspect t="uiaspect.FastFind"/><Aspect t="uiaspect.DefaultFeatures"/><Aspect t="xtml_dt.XtmlItemDetails" Type="bart.Pages"/><Aspect t="uiaspect.HeaderFooter" Phase="-2"><Control t="headerfooter.CustomControl"><Control t="ui.Document" Data="%$BartAppXtml%"><Fields t="field.XmlField" Path="@MainPage"><Type t="field_aspect.DynamicPickList" Options="%$BartAppXtml/Pages/Page/@ID%" AllowEmptyValue="false"/><FieldAspect t="field_aspect.DefaultValue" Value="main"/></Fields></Control></Control></Aspect></xtml></Component><Component id="AddANewPage" type="action.Action"><Param name="GoToPageAction" type="action.Action" script="true"><Default t="bart_dt.GoToEditPage" Page="%@ID%"/></Param><xtml t="dlg.OpenDialog" Title="Add a New Page"><DialogData t="xml.ByTag"/><Contents t="ui.Document"><Fields t="field.Fields"><Field t="field.Field" FieldData="%!@id%" Title="Page Name"><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.Field" FieldData="%!@contentType%" Title="Content Type" ReadOnlyText=""><Type t="field_aspect.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="true" RecalculateForEachCell="" Multiple=""><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Options t="picklist.DynamicOptions" Options="%$BartAppXtml/ContentTypes/ContentType/@ID%"/></Type></Field><Field t="field.Field" FieldData="%!@resource%" Title="Resource"><Type t="field_aspect.Picklist" AllowEmptyValue="true"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Options t="picklist.DynamicOptions" Options="%$BartAppXtml/Resources/Resource/@ResourceID%"/></Type></Field><Field t="field.Field" FieldData="%!@multiple%" Title="Multiple Page"><Type t="field_aspect.Boolean"/></Field></Fields></Contents><RunOnOK t="action.RunActions"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Var name="NewPage" t="data.IfThenElse" If="%@multiple%"><Then t="xml.Xml" DynamicContent="true"><Component id="%@id%" type="jbart.MyWidgetPage"><xtml t="bart.MultiplePage" ID="%@id%" ContentType="%@contentType%"><Aspect t="uiaspect.DefaultFeatures"/></xtml></Component></Then><Else t="xml.Xml" DynamicContent="true" ><Component id="%@id%" type="jbart.MyWidgetPage"><xtml t="bart.SinglePage" ID="%@id%" ContentType="%@contentType%" ><Presentation t="uiaspect.Group"><Style t="group.Vertical"/></Presentation></xtml></Component></Else></Var><Action t="xml.AddXmlChildren" Parent="%$NewPage/xtml%"><Condition t="yesno.NotEmpty" Value="%@resource%" /><Children t="xml.Xml" DynamicContent="true"><DefaultResource t="bart.Resource" Name="%@resource%"/></Children></Action><Action t="xtml.LoadComponents" Namespace="%$BartAppXtml/../../@id%" Components="%$NewPage%" /><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/../..%" Children="%$NewPage%" ><DoOnAddedChildren t="xtml.UseParam" Param="GoToPageAction" Input="%xtml%" /></Action><Action t="uiaction.Refresh" RunOn=".bartdt_tree" /></RunOnOK></xtml></Component><Component id="PagesNew" type="ui.Control"><xtml t="ui.Document"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Data value="%$BartAppXtml%" /><Fields t="field.Fields"><Field t="xtml_dt.ParamsAsFields" Params="MainPage1"/><Field t="field.CustomControl"><Control t="ui.ItemList" Class="pages"><Items t="xml.XmlItems" Parent="%$BartAppXtml/../..%" Tag="Component" ElementCondition="%@type%==\'jbart.MyWidgetPage\'"/><Operations t="operation.Operation" Title="Add a new Page" Icon="%$_Images%/add1616.gif" Target="new"><Action t="bart_dt.AddANewPage"/></Operations><Fields t="field.Fields"><Field t="field.CustomControl" ID="id" Title="page" ShowTitle="true"><Control t="ui.Button" Text="%@id%"><OnClick t="bart_dt.GoToEditPage" Page="%@id%"/><Style t="ui.ButtonAsHyperlink"/></Control></Field><Field t="field.Button" ID="Delete" Title="Delete" ShowTitle="false"><Style t="button.ImageOnly"/><Image t="image.Image" Url="%$_Images%/delete1616.gif"/><Action t="operation.Delete" ConfirmationText="Are you sure you want to delete page %@id% ?"><DoAfter t="uiaction.Refresh" RunOn=".bartdt_tree"/></Action></Field></Fields><Aspect t="uiaspect.Table"/><Aspect t="uiaspect.FastFind"/><Aspect t="uiaspect.DefaultFeatures"/><Aspect t="xtml_dt.XtmlItemDetails" Type="bart.Pages"/></Control></Field></Fields></xtml></Component><Component id="AddPages" type="action.Action"><Param name="Pages" /><xtml t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/../..%"><Children t="data.Pipeline"><Item value="%$Pages%" /><Item t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Component id="%@ID%" type="jbart.MyWidgetPage"><xtml /></Component></Xml><Var name="Page" /><Change t="xml.ReplaceElement" Element="%xtml%" NewElement="%$Page%" /></Item></Children></Action><Action t="object.AddToProperty" Object="%$_BartContext%" Property="Pages"><Value t="data.Pipeline"><Item value="%$Pages%" /><Item t="xtml.RunXtml" Xtml="%%" /></Value></Action></xtml></Component><Component id="AddResources" type="action.Action"><Param name="Resources" /><xtml t="action.RunActions"><Action t="xml.AddChildren" Data="%$BartAppXtml/Resources%" Children="%$Resources%" /><Action t="object.AddToProperty" Object="%$_BartContext%" Property="Resources"><Value t="data.Pipeline"><Item value="%$Resources%" /><Item t="xtml.RunXtml" Xtml="%%" /></Value></Action><Action t="bart_resource.PrepareResources"><LoadingPhases t="xtml.RunXtml" Xtml="%$BartAppXtml%" Field="LoadingPhases" /></Action></xtml></Component><Component id="PageInput" type="data.Data"><Param name="Page" /><xtml t="data.IfThenElse" If="%$Page/Type%==\'single\'" Else="%$Inputs%"><Var name="Inputs" t="data.FirstSucceeding"><Item value="%Items%"><Data t="object.RunMethod" Object="%$Page%" Method="Items" /></Item><Item t="bart_resource.ResourceValue" ResourceID="%$Page/ResourceID%" /><Item t="bart_resource.ResourceValue" ResourceID="%$Page/Resource%" /><Item value="%$_BartDtDB/{$Page/ContentType}/*%" /><Item t="xml.ByTag" Tag="%$Page/ContentType%" /></Var><Then t="data.Pipeline"><Item value="%$Inputs%" /><Aggregator t="data.First" /></Then></xtml></Component><Component id="EditPageParameters" type="action.Action"><Param name="XtmlForPreview" /><xtml t="dlg.OpenDialog" Title="Page Parameters" Data="%$XtmlForPreview%"><RunOnOK t="uiaction.Refresh" RunOn=".bartdt_editpage" /><Contents t="ui.Document"><Fields t="xtml_dt.ParamsAsFields"/></Contents></xtml></Component><Component id="PageSampleItems" type="data.Data"><Param name="PageXtml" /><xtml t="data.FirstSucceeding"><Item t="data.Pipeline"><Item t="xtml.RunXtml" Xtml="%$PageXtml/DefaultResource%" /><Item value="%Items%" /></Item><Item value="%$_BartDtDB/{$PageXtml/@ContentType}/*%"><Condition t="yesno.NotEmpty" Value="%$PageXtml/@ContentType%" /></Item></xtml></Component><Component id="PageDataPreview" type="data.Data"><Param name="Page" /><xtml t="data.FirstSucceeding"><Item t="data.IfThenElse" If="%=Count($Items)%==1" Then="%$Items%" ><Var name="Items" t="data.FirstSucceeding"><Item t="data.Pipeline"><Item value="%$_BartDtDB/{$Page/ContentType}/*%" /><Aggregator t="data.First" /></Item><Item t="bart_resource.ResourceValue" ResourceID="%$Page/Resource%" /></Var><Else t="xml.WithChanges"><Xml t="xml.ByTag" Tag="items"/><Change t="xml.AddChildren" Children="%$Items%" CloneChildren="true" /></Else></Item><Item t="xml.ByTag" Tag="nosampledata" /></xtml></Component><Component id="PagePreview" type="ui.Control" execution="native"><Param name="Page" /><Param name="Stretch" type="data.Boolean" Default="true" /><NativeHelper name="Control" t="ui.List" Class="aa_preview"><Layout t="ui.LineBreak" IncludeSpacing="false"/><Control t="ui.Html" DynamicContent="true"><style type="text/css">%$_BartContext/CssDefinitions%</style></Control><Control t="ui.Document"><Presentation t="uiaspect.Group"><Layout t="group.Default" /></Presentation><Fields t="field.CustomControl" ShowTitle="false"><Control t="object.RunMethod" Object="%$Page%" Method="Control"><Var name="Language" t="object.RunMethod" Object="%$_BartContext%" Method="Language" /><Class value="runtime %$Right2Left%"><Var name="Right2Left" value="right2left" Condition="%$Language% == \'hebrew\'" /></Class></Control></Fields><Aspect t="uiaspect.StretchToBottomRight" StretchToBottom="true" StretchToRight="true" MarginFromBrowserRight="20" Condition="%$Stretch%"><MarginFromBrowserBottom t="field_dt.PaneBottomMargin" /></Aspect></Control></NativeHelper></Component><Component id="Languages" type="ui.Control"><xtml t="ui.List"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$_BartContext/AppXtml%" /><Item value="%$BartAppXtml%" /></Var><Control t="ui.Document" Data="%$BartAppXtml%"><Fields t="xtml_dt.ParamsAsFields" Params="Language" /></Control><Control t="ui.Text" Text="Please use the multilang module to define the language tables" /></xtml></Component><Component id="OpenScriptTreeOperation" type="operation.Operation"><Param name="OnSuccess" type="action.Action" script="true" /><xtml t="operation.Operation" ID="OpenScriptTree" Title="script" Icon="%$_Images%/studio/customize1616.gif"><Action t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><Var name="_Input" /><Var name="AAEditorState" t="aaeditor.State" GlobalPreviewXtml="%$Xtml%" TreeXtml="%$Xtml%"><Var name="Xtml" t="xtml.Xtml" Xtml="%Xtml%"><Context t="bart_dt.ResourcesContext" /></Var><SaveAction t="aaeditor.Save" /></Var><RunOnOK t="xtml.UseParam" Param="OnSuccess" Input="%$_Input%" /></Action></xtml></Component><Component id="ResourcesContext" type="data.Data" execution="native" /><Component id="RefreshDataModel" type="action.Action"><xtml t="object.SetProperty" Object="%$_BartContext%" Property="Pages"><Value t="xtml.RunXtml" Xtml="%$BartAppXtml/Pages%" /></xtml></Component><Component id="GoToEditPage" type="action.Action"><Param name="Page" Default="%%"/><Param name="TreePath" /><xtml t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="GoToEditPage"><Var name="Page" value="%$Page%" /><Var name="TreePath" value="" /></Action><Action t="dialog.CloseDialog" /></xtml></Component><Component id="OpenCssDialog" type="action.Action"><Param name="RunOnOK" type="action.Action" script="true" /><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" DialogData="%$BartAppXtml/!@CssDefinitions%" Title="Edit application css" CloseOnEnter="false"        NoTransaction="false" RunOn=""><Content t="xmlui.CodeMirrorTextarea" Type="css" AutoFocus="true" Class="csstext" Height="350px"><Width t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true" /></Content><RunOnOK t="xtml.UseParam" Param="RunOnOK" Data="%$OriginalInput%"/><BeforeClose t="xmlui.CallUpdateOfCodeMirror" RunOn="updown(.dialog_box,.csstext)" /></Dialog></xtml></Component><Component id="EditResource" type="action.Action"><Param name="ResourceXtml" /><xtml t="ui.Document" Data="%$ResourceXtml%"><Item t="data_items.Items" Items="%%" /><Fields t="field.Fields"><Field t="field.CustomControl" ID="type" Title="type"><Control t="ui.Text"><Text t="text.RemovePrefix" Separator="." Data="%@t%" /></Control></Field><Field t="xtml_dt.ParamsAsFields" /></Fields></xtml></Component><Component id="ReferenceFieldSinglePageAspects" type="ui.Control"><xtml t="field_aspect.Picklist"><Options t="picklist.RichOptions"><Option t="picklist.Option" Option="ui.ItemPage" DisplayName="define page in field tree" /><Option t="picklist.Option" Option="bart_field.UseSinglePage" DisplayName="use predefined page"><OptionPage t="ui.ItemPage"><Field t="xtml_dt.ParamsAsFields" Component="bart_field.UseSinglePage" /></OptionPage></Option></Options></xtml></Component><Component id="MainUnit" type="data.Data"><xtml value="%$BartMainUnit/@id%" /></Component><Component id="AddXtmlComponent" type="action.Action"><Param name="ComponentXml" /><Param name="Unit"><Default value="%$BartMainUnit%" /></Param><xtml t="action.RunActions"><Action t="xml.AddChildren" Data="%$Unit%" Children="%$ComponentXml%" /><Action t="xtml.LoadComponents" Namespace="%$Unit/@id%" Components="%$Unit/Component%" /></xtml></Component><Component id="InputOfCustomXtml" type="data.Data" execution="native"><NativeHelper name="PageInput" t="bart_dt.PageInput" Page="%%" /></Component><Component id="InplaceAAEditor" type="ui.Control"><xtml t="ui.SectionsList" Name="aaeditor with global preview" Class="aaeditor_top"><Var name="Input" t="bart_dt.InputOfCustomXtml"/><Var name="TopCircuit" t="aaeditor.CalculateTopCircuit" Xtml="%%"/><Var name="_XtmlDtTreeTimeCalculator" t="object.Object"/><Section t="ui.SectionListPage" Title="Script"><Control t="xtml_dt_tree.Tree" TopXtml="%%" Type="ui.Control"><MainCircuit t="object.RunMethod" Object="%$TopCircuit%" Method="RunCircuit"/></Control></Section><Section t="ui.SectionListPage" Title="Local Preview"><Control t="ui.List" Class="xtml_editor_local_preview" ><Control t="ui.Text" /></Control></Section><Section t="ui.SectionListPage" Title="Global Preview"><Control t="ui.List" Class="xtml_editor_global_preview" ><Control t="xtml_dt_tree.ShowWhenNotSlow" ><Control t="data.MeasureCalculationTime" PutTimeInObject="%$_XtmlDtTreeTimeCalculator%" PutTimeInProperty="MainCircuitTime"><Calculation t="object.RunMethod" Object="%$TopCircuit%" Method="GlobalPreview"/></Control></Control></Control></Section><Style t="ui.HorizontalSplitter" IdForCookie="aaeditor_inplace"><Height t="ui.ScreenSize" Axis="height" Margin="100" AsHtmlString="true"/><TotalWidth t="ui.ScreenSize" Axis="width" Margin="250"/><DefaultWidths t="data.ListByCommas" List="320px,320px"/></Style></xtml></Component><Component id="XtmlItemToEmbeddable" type="data.Data"><xtml t="xml.WithChanges" Xml="%%"><Change t="action.RunActionOnItems"><Items t="xml.FindXmlByAttribute" ParentXml="%%" FindAll="true" Attribute="t" Value="bart_field.OptionsInMetadata" /><Action t="xml.ReplaceElement" Element="%%"><Var name="Elem" /><NewElement value="%$MetaData/PicklistOptions/PicklistOptions[@name=\'{$Elem/@OptionsName}\']%" /></Action></Change></xtml></Component><Component id="HtmlToEmbed" type="data.Data"><Param name="WidgetId"/><Param name="ResourceId"/><xtml t="data.Pipeline"><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_WidgetXml%"/><Var name="WidgetJs" t="data.IfThenElse" If="%@hosting% == \'cloud\'" Then="//jbartdb.appspot.com/widget.js?id=%$WidgetId%" Else="jbart_%$WidgetId%.js"/><Var name="_SampleData" t="data.Pipeline"><Item value="%$PageSampleItems%"/><Aggregator t="xml.Wrap" HeadTag="data"/></Var><Var name="_SampleDataInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_SampleData%"/><Var name="PageClass" value=" jBartWidgetPage_%@page%" Condition="%@page% != \'\'"/><Var name="MoreParams" value="page: \'%@page%\'" Condition="%@page% != \'\'"/><Item><![CDATA[<!DOCTYPE html><div><script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script><script type="text/javascript" src="%$WidgetJs%"></script><div id="%$WidgetId%_placeholder"></div><script type="text/javascript">    jBartWidgets.%$WidgetId%.show(document.getElementById(\'%$WidgetId%_placeholder\'),{%$MoreParams%});  </script><div id="ajaxart_log" style="display:none"></div></div>]]></Item></xtml></Component><Component id="IsMobile" type="data.Boolean"><xtml t="text.StartsWith" With="mobile" Text="%$_WidgetXml/@view%" /></Component><Component id="EmbedXtmlItem" type="action.Action"><xtml t="data.IfThenElse"><If t="bart_dt.IsMobile"/><Then t="dlg.OpenDialog"><Style t="dialog_style.HoverPopup"/><Feature1 t="dlg.ArrowToLaunchingElement"/><Contents t="ui.Document"><Field t="field.Layout" HideTitle="true" ID="Group" Title="Group"><Field t="field.Field" ID="Url" Title="Use" FieldData="%!%" ReadOnlyText=""><Type t="field_aspect.Text" Mandatory="false" HideTitle="true" ReadOnly="false"/><FieldAspect t="field_aspect.Css" Inline="width:300px; font-size:10px; border-radius:2px;"/></Field><Field t="field.Image" Title="Image"><Image t="image.Image" KeepImageProportions="true" AsDivBackground="" Size=",200px"><Url t="data.Pipeline" customxtml="true"><Item t="text.UrlEncoding" Data="%%"/><Item value="http://qr.kaywa.com/img.php?s=5&amp;d=%%"/></Url></Image><Style t="image.PlainImage"/></Field><FieldAspect t="field_aspect.FieldData" FieldData="http://jbartdb.appspot.com/jbart.html?id=%$_WidgetXml/@id%"/><Layout t="layout.Default"/></Field><Field t="field.Button" Title="save/upload" ShowTitle="false"><Title t="data.IfThenElse" Then="upload" Else="save"><If t="text.StartsWith" With="http://localhost"><Text t="data.Url"/></If></Title><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/variable.gif"/><Action t="action.RunActions" customxtml="true"><Action t="action.WriteValue" Value="force" To="%$_WidgetXml/@vid%"/><Action t="operation.RunActions"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Status="saving" Text="Saving Project ..."/><Action t="jbartdb.SaveNodeInJBartDB"><Node t="jbart_studio.ProjectWithJBartSources" Project="%$_WidgetXml%"/><OnSuccess t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Status="saved" Text="Project saved"/><OnFailure t="opeation.WriteNotificationText" WriteTo="jbartStudio_notifications" Status="error" Text="Could not save project"/></Action></Action></Action></Field><Field t="field.Button" ID="More" Title="more..." ShowTitle="false"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/variable.gif"/><Action t="dlg.OpenDialog" Title="Embed Widget"><Contents t="bart_dt.EmbedXtmlContent"/><Feature t="dlg.Buttons"><Buttons t="dlg.Close"/></Feature></Action></Field></Contents></Then><Else t="dlg.OpenDialog" Title="Embed Widget"><Contents t="bart_dt.EmbedXtmlContent"/><Feature t="dlg.Buttons"><Buttons t="dlg.Close"/></Feature></Else></xtml></Component><Component id="SaveWidgetCompressedJBart" type="action.Action"><Param name="OnSuccess" type="action.Action" script="true" /><xtml t="action.RunActions"><Var name="JsInComponents" t="object.Object" /><Var name="XtmlRelations" value=" " /><Var name="JsRelations" value=" " /><Var name="Source" t="xml.TextToXml" Data="%$_WidgetXml%" /><Var name="Components" t="bart_dt_compress.Components" Script="%$Source%" BlackList="%$_WidgetXml/compress/@black_list%" /><Var name="Xtml" t="bart_dt_compress.Xtml" Components="%$Components%" /><Var name="GCs" t="bart_dt_compress.GCs" Components="%$Components%" LogUsage="%$_WidgetXml/compress/@log_relations%" /><Var name="Utils" t="bart_dt_compress.JsUtils" GCs="%$GCs%" WidgetXml="%$_WidgetXml%" LogUsage="%$_WidgetXml/compress/@log_relations%" JsToAdd="%$_WidgetXml/compress/@js_to_add%"/><Var name="XtmlInOneLine" t="bart_dt.XmlInOneLine" Xml="%$Xtml%" /><Var name="XtmlSize" t="text.Length"><Data t="xml.XmlToText" Data="%$Xtml%" /></Var><Var name="UtilsSize" t="text.Length" Data="%$Utils%" /><Var name="GCsSize" t="text.Length" Data="%$GCs%" /><Var name="All" t="text.Concat" Separator="&#xa;"><Item value="%$Utils%" /><Item value="%$GCs%" /><Item value="ajaxart.load_xtml_content(\'\',ajaxart.parsexml(\'%$XtmlInOneLine%\'));&#xa;" /><Item value="var aa_xtml_total = %$XtmlSize%;&#xa;" /></Var><Var name="FileName" value="jbart_%$WidgetId%.js" /><Action t="action.Switch"><Case IfCondition="%$_WidgetXml/embed/@as% == \'download file\'"><Then t="action_async.RunAsync"><Action t="action_async.CreateAndDownloadFile" FileName="%$FileName%" Content="%$All%" /></Then></Case><Case IfCondition="%$_WidgetXml/embed/@as% == \'save file\'"><Then t="action.RunActions"><Var name="Cleaned" t="text.Replace" Find="debugger" ReplaceWith="" Data="%$All%" /><Action1 t="data_async.UrlPost" Url="bart.php?op=savefileandcompress&amp;filename=%$_WidgetXml/embed/@dir%%$FileName%"><PostData t="server.PostData" Name="contents" Value="%$Cleaned%" /></Action1><Action t="data_async.UrlPost" Url="bart.php?op=savefileandcompress&amp;filename=%$_WidgetXml/embed/@dir%jbart_%$WidgetId%.js"><PostData t="server.PostData" Name="contents"><Value t="text.Concat" Separator="&#xa;"><Item value="(function(){" /><Item value="%$Cleaned%;" /><Item t="bart_dt.WidgetAsJavascript" /><Item value="}());" /></Value></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%jbart_%$WidgetId%_src.js"><PostData t="server.PostData" Name="contents"><Value t="text.Concat" Separator="&#xa;"><Item value="(function(){" /><Item value="%$Cleaned%;" /><Item t="bart_dt.WidgetAsJavascript" /><Item value="}());" /></Value></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%jbart_js.js"><Condition value="%$_WidgetXml/compress/@uncompressed%" /><PostData t="server.PostData" Name="contents"><Value t="text.Concat" Separator="&#xa;"><Item value="var aa_xtml_total = %$XtmlSize%;" /><Item value="var aa_js_total = %$UtilsSize%;" /><Item value="var aa_gc_total = %$GCsSize%;" /><Item value="%$Utils%" /><Item value="%$GCs%" /></Value></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%jbart_xtml.js"><Condition value="%$_WidgetXml/compress/@uncompressed%" /><PostData t="server.PostData" Name="contents"><Value value="ajaxart.load_xtml_content(\'\',ajaxart.parsexml(\'%$XtmlInOneLine%\'));&#xa; " /></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%rel.js"><Condition t="yesno.And"><Item value="%$_WidgetXml/compress/@uncompressed%" /><Item value="%$_WidgetXml/compress/@log_relations%" /></Condition><PostData t="server.PostData" Name="contents"><Value t="data.JavaScript"                  Code="function(data,html_elem,context) {&#xa;  return \'var rel = {};\\n\' + context.vars.JsRelations[0]; &#xa;}" /></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%rel_xtml.js"><Condition t="yesno.And"><Item value="%$_WidgetXml/compress/@uncompressed%" /><Item value="%$_WidgetXml/compress/@log_relations%" /></Condition><PostData t="server.PostData" Name="contents"><Value t="data.JavaScript"                  Code="function(data,html_elem,context) {&#xa;  return context.vars.XtmlRelations[0] + \'\\n\' &#xa;}" /></PostData></Action><Action t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%xtml.xtml"><Condition t="yesno.And"><Item value="%$_WidgetXml/compress/@uncompressed%" /><Item value="%$_WidgetXml/compress/@log_relations%" /></Condition><PostData t="server.PostData" Name="contents"><Value t="xml.XmlToText" Data="%$Xtml%" PrettyPrint="true" /></PostData></Action><Action t="xtml.UseParam" Param="OnSuccess" /></Then></Case></Action></xtml></Component><Component id="WidgetAsJavascript" type="data.Data"><xtml value="var jBartWidget_%$WidgetId% = \'%$WidgetInOneLine%\'; window.jBart = window.jBart || jBart; jBartWidgets.%$WidgetId% = jBart.activator(jBartWidget_%$WidgetId%); %$JsToAdd%"><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" ><Xml t="data.IfThenElse" If="%$_WidgetXml/embed/@with_data%" Then="%$_WidgetXml%"><Else t="xml.WithChanges"><Xml t="data.Pipeline"><Item value="%$_WidgetXml%"/><Item t="xml.XmlToText"/><Item t="xml.TextToXml"/></Xml><Change t="action.RunActionOnItems"><Items t="data.List"><Item t="data.Pipeline"><Item t="xtml_dt.FindXtmlByT" ParentXtml="%%" T="bart_resource.Xml" FindAll="true"/><Item value="%Xml%"/></Item><Item t="data.Pipeline"><Item t="xtml_dt.FindXtmlByT" ParentXtml="%%" T="jbart_resource.Data" FindAll="true"/><Item value="%Value%"/></Item></Items><Action t="xml.Delete" /></Change></Else></Xml></Var></xtml></Component><Component id="SaveWidgetSource" type="action.Action"><Param name="OnSuccess" type="action.Action" script="true" /><xtml t="action.Switch"><Var name="Content" t="bart_dt.WidgetAsJavascript" /><Case IfCondition="%$_WidgetXml/embed/@as% == \'download file\'"><Then t="action_async.RunAsync"><Action t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%.js" Content="%$Content%"/></Then></Case><Case IfCondition="%$_WidgetXml/embed/@as% == \'save file\'"><Then t="data_async.UrlPost" Url="bart.php?op=savefile&amp;filename=%$_WidgetXml/embed/@dir%%$WidgetId%.js"><PostData t="server.PostData" Name="contents" Value="%$Content%"/><OnSuccess t="xtml.UseParam" Param="OnSuccess" /></Then></Case><Default t="dlg.OpenDialog" Title="Widget source for %$WidgetId%"><Contents t="ui.Document"><Var name="Width" t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true"/><Var name="Height" t="ui.ScreenSize" Axis="height" Margin="300" AsHtmlString="true"/><Fields t="field.XmlField" Path="@widget" ID="widget" Title="Widget"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="2"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="white-space:nowrap; height:%$Height%;font-size:11px;width:%$Width%;"/><FieldAspect t="field_aspect.Calculated" ManualOverride="false" MathFormula="" PrimitiveField="true" Formula="%$Content%"/><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.HideTitle"/></Fields></Contents></Default></xtml></Component><Component id="EmbedXtmlContent" type="ui.Control"><xtml t="ui.List"><Var name="WidgetId" value="%$_WidgetXml/@id%"/><Var name="ResourceId" t="data.FirstSucceeding"><Item value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml/Resources/Resource[@t=\'bart_resource.Xml\']/@ResourceID%"/><Item value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml/Resources/Resource[@t=\'bart_resource.Query\']/@ResourceID%"/></Var><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_WidgetXml%"/><Control t="ui.ControlWithAction"><RunBeforeControl t="action.WriteValue" Value="datefilter.DateFilterControl,field.TextFilterControl,debugui.OpenDebugUi"><Condition t="yesno.IsEmpty" Value="%$_WidgetXml/compress/@black_list%"/><To t="data.Pipeline"><Item value="%$_WidgetXml%"/><Item t="xml.XPath" XPath="compress" CreateIfDoesNotExist="true"/><Item t="xml.XPath" XPath="@black_list" CreateIfDoesNotExist="true"/></To></RunBeforeControl><Control t="ui.Document"><Item t="data_items.Items"><Items t="xml.Xml" DynamicContent="true"><xml Widget_data="%$_WidgetXml/@feed%"/></Items></Item><Presentation t="uiaspect.PropertySheet" Space="18px" HeaderSpace="0"/><Fields t="field.Fields"><Field t="field.XtmlControl"><Control t="ui.Text" Class="embed_notification" Text1="File saved successfully"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Css" Inline="color:green;"/></Field><Field t="field.XmlGroup" Title="top" ID="Top" ID__Manual="" Path=""><FieldAspect t="field_aspect.Section" HideTitle="true" Underline="true"/><Presentation t="uiaspect.PropertySheet" AlighLastToRight="" Widths="250px" PropertiesWidth=""/><Operations t="operation.Operations"/></Field><Field t="field.Group" Title="Widget Source" ID="Group"><FieldAspect t="field_aspect.Section"/><Field t="field.Field" Title="Get content as" FieldData="%!@as%" ID="As"><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="text,download file,save file"/></Options></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="get,dir"/></Field><Layout t="uiaspect.PropertySheet"/><GroupData t="group.DataFlow" FlowData="%$_WidgetXml/!embed%"/><Field t="field.Field" ID="dir" Title="Directory" FieldData="%!@dir%"><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%../@as% == \'save file\'" CheckConditionForEveryItem="true"/></Field><Field t="field.Field" ID="with_data" Title="Include sample data" FieldData="%!@with_data%"><Type t="field_aspect.Boolean"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="Widget,Widget without data"/></Options></Type></Field><Field t="field.Button" ID="get" Title="Get Widget Source" ButtonText="%@as%"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/download.png"/><Action t="bart_dt.SaveWidgetSource"><OnSuccess t="uiaction.SetText" Text="file saved succesfully to %$_WidgetXml/embed/@dir%%$WidgetId%.js" RunOn=".embed_notification"/></Action></Field><Field t="field.Group"><Layout t="uiaspect.Horizontal"/><Field t="field.Button" ID="compress" Title="Get Compressed jBart Version"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/cut.png"/><Action t="bart_dt.SaveWidgetCompressedJBart"><OnSuccess t="uiaction.SetText" Text="compression finished" RunOn=".embed_notification"/></Action></Field><Field t="field.Button" ID="compress_set" Title="settings ..."><Style t="button.Hyperlink"/><Action t="dlg.OpenDialog" Title="compression settings"><Contents t="ui.Document"><Item t="data_items.Items" Items="%$_WidgetXml/!compress%"/><Fields t="field.Fields"><Field t="field.Field" FieldData="%!@black_list%" Title="Black List"/><Field t="field.Field" FieldData="%!@js_white_list%" Title="Function White List"/><Field t="field.Field" FieldData="%!@js_to_add%" Title="Additional Java Script" ReadOnlyText=""><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Height="40px" Width="400px"/></Type></Field><Field t="field.Field" FieldData="%!@log_relations%" Title="Log Relations"><Type t="field_aspect.Boolean"/><FieldAspect t="field_aspect.Description" Description="Add include to http://dl.dropbox.com/u/24083519/jMarker.js.  &#xa;In runtime use ctril+shift+1-5"/></Field><Field t="field.Field" FieldData="%!@uncompressed%" Title="generate uncompressed version"><Type t="field_aspect.Boolean"/></Field></Fields></Contents></Action><Image t="image.Image" Url="%$_Images%/studio/project.png"/></Field><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Button" ID="Button" Title="Upload to jbart db"><Image t="image.Image" Url="http://images-1.findicons.com/files/icons/42/basic/16/up.png" KeepImageProportions="true" AsDivBackground=""/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideByCondition" CheckConditionForEveryItem=""><ShowCondition t="yesno.Contains"><AllText t="data.Url"/><Text value="http://localhost"/></ShowCondition></FieldAspect><Action t="action.RunActions" customxtml="true"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowProgressIndicator"><Input t="object.Object" Text="Uploading to jbart db"/></Action><Action t="action.WriteValue" Value="force" To="%$_WidgetXml/@vid%"/><Action t="action.RunOnNextTimer" WaitInMSec="100"><Action t="jbartdb.SaveNodeInJBartDB"><Node t="jbart_studio.ProjectWithJBartSources" Project="%$_WidgetXml%"/><OnSuccess t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowProgressIndicator" Input=""/><OnError t="action.RunActions"><Action t="opeation.WriteNotificationText" WriteTo="jbartStudio_notifications" Status="error" Text="Could not save project"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowProgressIndicator" Input=""/></OnError></Action></Action></Action></Field></Field><Field t="field.Field" ID="SuccessMessage"><FieldAspect t="field_aspect.ReadOnly"/></Field><Operations t="operation.Operations"/></Field><Field t="field.XmlGroup" Title="Html" ID="Code" ID__Manual=""><FieldAspect t="field_aspect.Section" CollapsedByDefault="false"><Style t="section.DefaultExpandCollapse"/></FieldAspect><Presentation t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/><Field t="field.Group" ID="data" Title="Widget Data"><Layout t="uiaspect.Horizontal" Spacing="10px"/><Field t="field.Field" FieldData="%!$_WidgetXml/!@feed%"><Title value="Widget_data"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="html,link_group" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="url of data source"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="width:370px; font-size:10px;"/><FieldAspect t="field_aspect.HideTitle"/></Field><Field t="field.Field" Title="Cross Domain Proxy" FieldData="%!$_WidgetXml/!@cross_domain%"><Type t="field_aspect.Boolean"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="link_group" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="true"/></Field><FieldAspect t="field_aspect.GlobalCss" GlobalCss="#this .fld_Widget_data_title { font-weight:normal; }"/><GroupData t="group.DataFlow" FlowData="%%"/></Field><Field t="field.Group" ID="link_group"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="5px"/></Layout><GroupData t="group.DataFlow"><FlowData t="data.Pipeline"><Var name="Host" t="ui.DataFromJavaScript" Expression="\'http://\' + window.location.href.split(\'/\')[2] + \'/\'"/><Var name="_WidgetData" t="data.Pipeline"><Condition t="yesno.NotEmpty" Value="%$_WidgetXml/@feed%"/><Item value="%$_WidgetXml/@feed%"/><Item t="text.Replace" Find="&amp;" ReplaceWith="_AMP_"/><Item t="text.Replace" Find="[+]" ReplaceWith="\\%2B"/><Item t="data.IfThenElse" If="%$_WidgetXml/@cross_domain%" Else="%%"><Then t="data.Pipeline"><Item t="text.Replace" Find="\\%" ReplaceWith="\\%25"/><Item value="/bart.php?op=proxy\\%26url=%%"/></Then></Item><Item value="&amp;data=%%"/></Var><Item value="%$Host%widgetpage?id=%$_WidgetXml/@id%%$_WidgetData%"/></FlowData></GroupData><Field t="field.Field" Title="Cloud Page Link" ID="link" FieldData="%!%"><FieldAspect t="field_aspect.Css" Inline="width:500px;font-size:10px;"/><FieldAspect t="field_aspect.Writable"/></Field><Field t="field.Button" Tooltip="Get QR Code"><Style t="button.ImageOnly"/><Image t="image.Image" Url="%$_Images%/studio/qr.png" KeepImageProportions="true"/><Action t="uiaction.GoToPage" Url="http://api.qrserver.com/v1/create-qr-code/?data=%%"/></Field></Field><Field t="field.XmlField" Path="@page" ID="page" Title="Page"><Type t="field_aspect.Picklist" AllowEmptyValue="true"><Options t="picklist.DynamicOptions"><Options t="data.Pipeline"><Item t="data.List"><Item t="bart_dt.GalleryNodeAppXtml" Path="Pages/Page/@ID"/><Item t="bart_dt.GalleryNodeAppXtml" Path="../../Component[@type=\'jbart.MyWidgetPage\']/xtml/@ID"/></Item><Item t="yesno.PassesFilter"><Filter t="yesno.Not" Of="%../@InternalPage%"/></Item></Options></Options></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="html" RefreshScope="screen"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="page to show"/></Field><Field t="field.XmlField" Path="@hosting" ID="server" Title="Hosting"><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="true" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.RichOptions"><Option t="picklist.Option" Option="cloud" DisplayName="jBart cloud (google app engine)" Image=""/><Option Option="my server" DisplayName="" Image="" t="picklist.Option"/></Options></Options><ControlStyle t="picklist.Radio" Vertical="false"/></Type><FieldAspect t="field_aspect.DefaultValue" Value="my server"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="html,Download" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.UnindentOptionPage"/></Field><Field t="field.XmlField" Path="@html" ID="html" Title="html"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="8"><Style t="textarea.Default" Height="" Width=""/></Type><FieldAspect t="field_aspect.Calculated" ManualOverride="false" MathFormula="" PrimitiveField="true"><Formula t="bart_dt.HtmlToEmbed" WidgetId="%$_WidgetXml/@id%" ResourceId="%$ResourceId%"/></FieldAspect><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="min-width: 600px;height:160px;"/><FieldAspect t="field_aspect.HideTitle"/></Field><FieldAspect t="field_aspect.SectionExpandCollapse" ExpandedByDefault="false"/></Field><Field t="field.XmlGroup" Title="Download" ID="Download" ID__Manual="" Path=""><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/><Field t="field.JavaScriptControl" Title="jbart" ID="Jbart" ID__Manual="" Html="&lt;a href=&quot;/jbart.zip&quot;&gt;jbart.zip&lt;/a&gt;&#xa;" JavaScript="function(data,html_elem,context) {&#xa;  &#xa;}"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%@hosting% != \'cloud\'"/></Field><Field t="field.Button1" Title="Publish Example" ID="Download_Example" ID__Manual="" ShowTitle=""><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%@hosting% == \'cloud\'"/><ButtonStyle t="ui.ButtonAsHyperlink"/><Action t="dlg.OpenDialog" Title="Publish"><Contents t="ui.Document"><Item t="data_items.Items"><Items t="xml.Xml"/></Item><Fields t="field.Fields"><Field t="field.Field1" Title="Title"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.FieldData" FieldData="%$_WidgetXml/!@publish_title%"/><FieldAspect t="field_aspect.DefaultValue" Value="%$_WidgetXml/@name% with jBart Search-Box"/></Field><Field t="field.XmlField" Path="@HostingPrefix" Title="Hosting Prefix"><FieldAspect t="field_aspect.DefaultValue" Value="http://dl.dropbox.com/u/24083519/"/></Field><Field t="field.Button1" Title="Html" ID="Download_Example" ID__Manual="" ShowTitle=""><ButtonStyle t="ui.ButtonAsHyperlink"/><Action t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%.html"><Var name="WidgetId" value="%$_WidgetXml/@id%"/><Var name="HostingPrefix" value="%@HostingPrefix%"/><Var name="Title" value="%$_WidgetXml/@publish_title%"/><Var name="EmbedScript" t="bart_dt.XmlInOneLine"><Xml t="xml.Xml" DynamicContent="true"><Action t="dialog.TogglePopup" Title="Html content"><Contents t="ui.Document"><Presentation t="uiaspect.TitlesAboveFields"/><Fields t="field.XmlField" Path="@widget" ID="widget" Title="Copy this content into your web site html"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="12"/><FieldAspect t="field_aspect.Calculated" ManualOverride="false" MathFormula="" PrimitiveField="true"><Formula t="data.Pipeline" customxtml="true"><Item value="&lt;html&gt;&#xa; &lt;head&gt; &#xa;   &lt;script type=&quot;text/javascript&quot; src=&quot;http://www.artwaresoft.com/jquery.js&quot;&gt;&lt;/script&gt;&#xa;   &lt;script type=&quot;text/javascript&quot; src=&quot;http://www.artwaresoft.com/jbart.js&quot;&gt;&lt;/script&gt;&#xa;   &lt;script type=&quot;text/javascript&quot; src=&quot;%$HostingPrefix%%$WidgetId%.js&quot;&gt;&lt;/script&gt;&#xa;   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://www.artwaresoft.com/clean.css&quot;/&gt;&#xa;   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://www.artwaresoft.com/default.css&quot;/&gt;&#xa; &lt;/head&gt;  &#xa; &#xa; &lt;body&gt; &#xa;  &lt;div class=&quot;jBartWidget jBartWidget_%$WidgetId%&quot;&gt;&lt;/div&gt;&#xa; &lt;/body&gt; &#xa;&#xa; &lt;/html&gt;"/></Formula></FieldAspect><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="min-width: 600px;height:240px;overflow: hidden;"/></Fields></Contents></Action></Xml></Var><Content t="bart_dt.EmbeddedHtml" WidgetId="%$WidgetId%" HostingPrefix="%$HostingPrefix%" Title="%$Title%" EmbedScript="%$EmbedScript%"/></Action></Field><Field t="field.Button1" Title="Javascript"><ButtonStyle t="ui.ButtonAsHyperlink"/><Action t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%.js"><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_WidgetXml%"/><Content value="var jBartWidget_%$WidgetId% = \'%$WidgetInOneLine%\'; "/></Action></Field><Field t="field.Button1" Title="Javascript no data"><ButtonStyle t="ui.ButtonAsHyperlink"/><Action t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%.js"><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine"><Xml t="xml.WithChanges"><Xml t="data.Pipeline"><Item value="%$_WidgetXml%"/><Item t="xml.XmlToText"/><Item t="xml.TextToXml"/></Xml><Change t="xml.Delete"><Element t="data.Pipeline"><Item t="xtml_dt.FindXtmlByT" ParentXtml="%%" T="bart_resource.Xml"/><Item value="%Xml%"/></Element></Change></Xml></Var><Content value="var jBartWidget_%$WidgetId% = \'%$WidgetInOneLine%\'; "/></Action></Field><Field t="field.Button1" Title="Data as separate JS"><ButtonStyle t="ui.ButtonAsHyperlink"/><Action t="dlg.OpenDialog" Title="Please enter data xml"><RunOnOK t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%_data.js" Content="jbart_data_arrived(\'%$WidgetId%\',\'Data\',\'%$XmlInOneLine%\');"><Var name="XmlInOneLine" t="bart_dt.XmlInOneLine" Xml="%@xml%"/></RunOnOK><Contents t="ui.Document"><Fields t="field.XmlField" Title="Xml" Path="@xml"><Type t="field_aspect.MultiLineText" Rows="30"/><FieldAspect t="field_aspect.Css" Inline="width:500px;white-space:nowrap;"/><FieldAspect t="field_aspect.DefaultValue"><Value t="data.Pipeline"><Item value="%$_WidgetXml%"/><Item t="xtml_dt.FindXtmlByT" ParentXtml="%%" T="bart_resource.Xml"/><Item value="%Xml/*%"/><Item t="xml.XmlToText" PrettyPrint="true"/></Value></FieldAspect></Fields><Presentation t="uiaspect.TitlesAboveFields"/></Contents><DialogData t="xml.Xml"><xml/></DialogData></Action></Field></Fields></Contents></Action><Action t="action_async.CreateAndDownloadFile" FileName="%$WidgetId%.html"><Var name="WidgetId" value="%$_WidgetXml/@id%"/><Content t="data.Pipeline" customxtml="true"><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_WidgetXml%"/><Item value="&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&#xa;&lt;html&gt;&#xa; &lt;head&gt; &#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;http://www.artwaresoft.com/jquery.js&quot;&gt;&lt;/script&gt;&#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;jbart.js&quot;&gt;&lt;/script&gt;&#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;yaron__Deal_Extreme.js&quot;&gt;&lt;/script&gt;&#xa; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;clean.css&quot;/&gt;&#xa; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://www.artwaresoft.com/default.css&quot;/&gt;&#xa; &lt;script&gt; var jBartWidget_%$WidgetId% = \'%$WidgetInOneLine%\'; &lt;/script&gt; &#xa; &#xa; &lt;style&gt;&#xa; &lt;/style&gt;&#xa; &lt;script&gt; &#xa;// window[\'aa_dont_close_popups\'] = true;&#xa; function embed(button) { &#xa;  var script = \'&lt;Action t=&quot;dialog.TogglePopup&quot; Title=&quot;Html content&quot;&gt;&lt;Contents t=&quot;ui.Document&quot;&gt;&lt;Presentation t=&quot;uiaspect.TitlesAboveFields&quot;/&gt;&lt;Fields t=&quot;field.XmlField&quot; Path=&quot;@widget&quot; ID=&quot;widget&quot; Title=&quot;Copy this content into your web site html&quot;&gt;&lt;Type t=&quot;field_aspect.MultiLineText&quot; NoWrap=&quot;true&quot; Rows=&quot;12&quot;/&gt;&lt;FieldAspect t=&quot;field_aspect.Calculated&quot; ManualOverride=&quot;false&quot; MathFormula=&quot;&quot; PrimitiveField=&quot;true&quot;&gt;&lt;Formula t=&quot;data.Pipeline&quot; customxtml=&quot;true&quot;&gt;&lt;Item value=&quot;&amp;lt;html&amp;gt;&amp;#xa; &amp;lt;head&amp;gt; &amp;#xa;   &amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://www.artwaresoft.com/jquery.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;#xa;   &amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://www.artwaresoft.com/jbart.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;#xa;   &amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://dl.dropbox.com/u/24083519/yaron__Deal_Extreme.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;#xa;   &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; type=&amp;quot;text/css&amp;quot; href=&amp;quot;http://www.artwaresoft.com/clean.css&amp;quot;/&amp;gt;&amp;#xa;   &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; type=&amp;quot;text/css&amp;quot; href=&amp;quot;http://www.artwaresoft.com/default.css&amp;quot;/&amp;gt;&amp;#xa; &amp;lt;/head&amp;gt;  &amp;#xa; &amp;#xa; &amp;lt;body&amp;gt; &amp;#xa;  &amp;lt;div class=&amp;quot;jBartWidget jBartWidget_yaron__Deal_Extreme&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;#xa; &amp;lt;/body&amp;gt; &amp;#xa;&amp;#xa; &amp;lt;/html&amp;gt;&quot;/&gt;&lt;/Formula&gt;&lt;/FieldAspect&gt;&lt;FieldAspect t=&quot;field_aspect.CellPresentation&quot; Content=&quot;control&quot;/&gt;&lt;FieldAspect t=&quot;field_aspect.Css&quot; OnElement=&quot;content&quot; Inline=&quot;min-width: 600px;height:240px;overflow: hidden;&quot;/&gt;&lt;/Fields&gt;&lt;/Contents&gt;&lt;/Action&gt;\';&#xa;  var ctx = ajaxart.newContext();&#xa;  ctx.vars.ControlElement = [button];&#xa;  ajaxart.run([],ajaxart.parsexml(script),&quot;&quot;,ctx);&#xa; }&#xa; &lt;/script&gt;&#xa; &lt;/head&gt;  &#xa; &#xa;&lt;body style=&quot;margin:0; padding:0;&quot; &gt;&#xa; &lt;style&gt;.embed:hover { text-decoration:underline;} &lt;/style&gt;&#xa; &lt;img style=&quot;position:absolute;top:74px;&quot; src=&quot;dx.png&quot; onselectstart=&quot;return false&quot; onmousedown=&quot;return false;&quot; onclick=&quot;return true;&quot; /&gt;&#xa; &lt;div style=&quot;background-image: url(http://www.artwaresoft.com/images/studio/logofill.png); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; height: 73px; width: 100\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\%; background-position: initial initial; background-repeat: initial initial; &quot;&gt;&#xa; &lt;a href=&quot;http://www.artwaresoft.com&quot; &gt;&lt;img style=&quot;border:none;&quot; src=&quot;http://www.artwaresoft.com/images/studio/logo.png&quot; height=&quot;73px&quot; /&gt;&lt;/a&gt;&#xa; &lt;div style=&quot;position:absolute; left: 20px;top: 193px;&quot; id=&quot;jBartWidget_yaron__Deal_Extreme&quot; class=&quot;jBartWidget jBartWidget_yaron__Deal_Extreme&quot;&gt;&lt;/div&gt;&#xa; &lt;span style=&quot;color:wheat; font-size:30px; position:absolute; top:12px; left:180px;&quot; &gt;jBart interactive Search Box - on sample data&lt;/span&gt;&#xa; &lt;span style=&quot;color:wheat; font-size:15px; position:absolute; top:50px; left:190px;&quot; &gt;Data for this example was taken from first page of each category from dealextreme site&lt;/span&gt;&#xa; &lt;div style=&quot;background: url(\'http://dl.dropbox.com/u/24083519/arrow.gif\') transparent no-repeat; position: absolute;top: 16px;left: 850px;z-index: 25;height: 40px;width: 35px;&quot; &gt;&lt;/div&gt;&#xa; &lt;span class=&quot;embed&quot;  style=&quot;position:absolute; font-size:20px; cursor:pointer; color:wheat; top:45px; left:750px;&quot; onclick=&quot;embed(this);&quot;&gt;Embed it in your web site&lt;/span&gt;&#xa;&#xa;  &lt;script type=&quot;text/javascript&quot; src=&quot;yaron__Deal_Extreme_Data.js&quot;&gt;&lt;/script&gt;&#xa;&lt;/body&gt; &#xa;&#xa;&lt;/html&gt;"/></Content></Action></Field><Field1 t="field.Button1" Title="Embed it in your web site" ID="Download_Example" ID__Manual="" ShowTitle=""><ButtonStyle t="ui.ButtonAsHyperlink"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="position:absolute; font-size:20px; color:white; top:50px; left:450px;"/><Action t="dlg.OpenDialog" Title="Html content"><Contents t="ui.Document"><Presentation t="uiaspect.TitlesAboveFields"/><Field t="field.XmlField" Path="@widget" ID="widget" Title="Copy this into your web site html"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="6"/><FieldAspect t="field_aspect.Calculated" ManualOverride="false" MathFormula="" PrimitiveField="true"><Formula t="data.Pipeline" customxtml="true"><Item value="aaa"/></Formula></FieldAspect><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="min-width: 600px;height:40px;overflow: hidden;"/><FieldAspect t="field_aspect.HideTitle"/></Field></Contents></Action></Field1><FieldAspect t="field_aspect.Hide"/></Field><Field t="field.XmlGroup" Title="Widget Source" ID="WidgetSource" Path=""><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.PropertySheet" PropertiesWidth="100"/><Field t="field.XmlField" Path="@widget" ID="widget" Title="Widget"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="2"/><FieldAspect t="field_aspect.Calculated" ManualOverride="false" MathFormula="" PrimitiveField="true"><Formula t="data.Pipeline" customxtml="true"><Var name="WidgetId" value="%$_WidgetXml/@id%"/><Var name="WidgetInOneLine" t="bart_dt.XmlInOneLine" Xml="%$_WidgetXml%"/><Item value="var jBartWidget_%$WidgetId% = \'%$WidgetInOneLine%\';"/></Formula></FieldAspect><FieldAspect t="field_aspect.CellPresentation" Content="control"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="min-width: 600px;height:20px;overflow: hidden;"/><FieldAspect t="field_aspect.HideTitle"/></Field><Field t="field.Field" FieldData="%!$_WidgetXml/!embed/@copyto%" ID="copy_to" Title="Auto copy to file"><FieldAspect t="field_aspect.Css" Css="width: 480px"/><FieldAspect t="field_aspect.Description" Description="Widget definition (script) will be automatically copies to this file when embed is clicked"/><Condition t="yesno.Contains"><AllText t="data.Url"/><Text value="localhost"/></Condition></Field><FieldAspect t="field_aspect.Hide"/><Operations t="operation.Operations"/></Field></Fields><Operations t="operation.Operations"/></Control></Control></xtml></Component><Component id="EmbeddedHtml" type="data.Data"><Param name="WidgetId"/><Param name="HostingPrefix"/><Param name="Title"/><Param name="EmbedScript"/><xtml t="text.Text" Text="&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&#xa;&lt;html&gt;&#xa; &lt;head&gt; &#xa; &lt;title&gt;%$Title%&lt;/title&gt;&#xa; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;&#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;http://www.artwaresoft.com/jquery.js&quot;&gt;&lt;/script&gt;&#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;jbart.js&quot;&gt;&lt;/script&gt;&#xa; &lt;script type=&quot;text/javascript&quot; src=&quot;%$WidgetId%.js&quot;&gt;&lt;/script&gt;&#xa; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;clean.css&quot;/&gt;&#xa; &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;default.css&quot;/&gt;&#xa; &#xa;&lt;/head&gt;  &#xa; &#xa;&lt;body style=&quot;margin:0; padding:0;&quot; &gt;&#xa; &lt;img style=&quot;position:absolute;top:74px;&quot; src=&quot;&quot; onselectstart=&quot;return false&quot; onmousedown=&quot;return false;&quot; onclick=&quot;return true;&quot; /&gt; &#xa; &lt;div style=&quot;background-image: url(http://www.artwaresoft.com/images/studio/logofill.png); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; height: 73px; width: 100\\\\%; background-position: initial initial; background-repeat: initial initial;&quot;&gt;&#xa; &lt;a href=&quot;http://www.artwaresoft.com&quot;&gt;&lt;img src=&quot;http://www.artwaresoft.com/images/studio/logo.png&quot; height=&quot;73px&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&#xa; &lt;div id=&quot;jBartWidget_%$WidgetId%&quot; class=&quot;jBartWidget jBartWidget_%$WidgetId%&quot;&gt;&lt;/div&gt;&#xa; &lt;span style=&quot;color:wheat; font-size:30px; position:absolute; top:20px; left:250px;&quot; &gt;%$Title%&lt;/span&gt;&#xa;&lt;/body&gt; &#xa;&#xa;&lt;/html&gt;"/></Component><Component id="XmlInOneLine" type="data.Data"><Param name="Xml"/><xtml t="data.Pipeline"><Item value="%$Xml%" /><Item t="bart_dt.XtmlItemToEmbeddable" /><Item t="xml.XmlToText" PrettyPrint="false" /><Item t="bart_dt.NewLinesToJs" /><Item1 t="text.Replace" Find="&#xA;" /><Item1 t="text.Replace" Find="&#xD;" /><Item t="text.Replace" Find="&#009;" ReplaceWith=" "/><Item t="text.Replace" Find="\\%" ReplaceWith="\\\\%" /><Item t="text.Replace" Find="\'" ReplaceWith="\\\'" /><Item t="text.Replace" Find="Â" /></xtml></Component><Component id="NewLinesToJs" type="data.Data" execution="native"></Component><Component id="ShowPageFromGallery" type="ui.Control" execution="native"><Param name="GalleryItem" /><Param name="Page"><Default value="main"/></Param><Param name="PageInput" Default="%%"/><NativeHelper name="Control" t="ui_async.Control"><AsyncData t="object.RunMethod" Object="%$_GalleryLoader%" Method="LoadItem" /><Control t="object.RunMethod" Method="Control" ><Object t="xtml.RunXtml"><Xtml t="data.FirstSucceeding"><Item value="%$App/Pages/Page[@ID=\'{$Page}\']%"/><Item value="%bart_dev/db/bart_unit/bart_unit/Component[@id=\'{$Page}\']/xtml%"/></Xtml></Object><Var name="App" value="%bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /><Var name="_PageParams" t="ui.PageParams"><DataItems t="data_items.Items" Items="%$PageInput%" /></Var></Control></NativeHelper></Component><Component id="PreLoadGalleryItem" type="action.Action" execution="native"><Param name="GalleryItem" /><Param name="AfterLoad" type="action.Action" script="true"/></Component><Component id="SamplePageXtmlFromGallery" type="data.Data" execution="native"><Param name="GalleryItem" /><Param name="Page"/><NativeHelper name="Xtml" t="data.Pipeline"><Item value="%bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /><Item t="data.FirstSucceeding"><Item value="%Pages/Page[@ID=\'{$Page}\']%" /><Item value="%../../Component[@id=\'{$Page}\']/xtml%" /></Item></NativeHelper></Component><Component id="GalleryNodeAppXtml" type="data.Data"><Param name="Path" /><xtml value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml/{$Path}%" /></Component><Component id="ImportPage" type="action.Action"><xtml t="dlg.OpenDialog" Title="Import Page"><DialogData t="xml.Xml" /><Var name="GalleryReusablePages" t="xml.Xml"><xml><page sample="AdminPages" page="edit_picklist_options" description="Edit picklist options" /></xml></Var><Contents t="ui.Document"><Field t="field.Field" Title="Select a Page" FieldData="%!@page%"><Type t="picklist.Picklist"><Options t="picklist.DynamicOptions" Options="%$GalleryReusablePages/page%" OptionLabel="%@description%" OptionCode="%@sample%.%@page%" /></Type></Field></Contents><RunOnOK t="bart_dt.PreLoadGalleryItem" GalleryItem="%$GalleryItem%"><Var name="GalleryItem" t="text.RemoveSuffix" Separator="." Data="%@page%"/><Var name="Page" t="text.RemovePrefix" Separator="." Data="%@page%"/><AfterLoad t="action.RunActions" ><Action t="xml.AddXmlChildren" Parent="%$_BartContext/AppXtml/../..%" CloneChildren="true"><Children t="data.Pipeline" ><Item t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="%$GalleryItem%" Page="%$Page%" /><Item value="%..%" /></Children><DoOnAddedChildren t="action.RunActions"><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%xtml%" /><Action t="bart_dt.OpenTreePopup" Xtml="%xtml%" /><Action t="bart_dt.OpenPropertiesWindow" /></DoOnAddedChildren></Action></AfterLoad></RunOnOK></xtml></Component><Component id="ComponentsTopElement" type="data.Data"><xtml t="data.FirstSucceeding"><Item value="%$_WidgetXml/db/bart_unit/bart_unit%" /><Item value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit%" /><Item value="%$_BartDTDB/bart_unit/bart_unit%" /></xtml></Component><Component id="StyleGenerator" type="action.Action"><xtml t="action.RunActions" ><Var name="Style" t="xtml.RunXtml" Xtml="%$PrevXtml%" /><Condition t="yesno.NotEmpty" Value="%$Style%" /><Action t="action.WriteValue" To="%!@Html%" Value="%$Style/Html%" /><Action t="action.WriteValue" To="%!@Css%"><Value t="text.Replace" Data="%$Style/Css%" Find="%" ReplaceWith="\\\\%" /></Action><Action t="action.WriteValue" To="%!@Javascript%" Value="%$Style/Javascript%" /></xtml></Component><Component id="DialogStyleGenerator" type="action.Action"><xtml t="action.RunActions" ><Var name="Style" t="xtml.RunXtml" Xtml="%$PrevXtml%" /><Action t="action.WriteValue" To="%!@Html%" Value="%$Style/Html%" /><Action t="action.WriteValue" To="%!@Css%" ><Value t="text.Replace" Data="%$Style/Css%" Find="%" ReplaceWith="\\\\%" /></Action><Action t="action.WriteValue" To="%!@Javascript%" Value="%$Style/Javascript%" /><Action t="action.WriteValue" To="%!@Mode%" Value="%$Style/Mode%" /><Action t="xml.AddXmlChildren" Parent="%%" Children="%$Style/FeatureXtml%" CloneChildren="true" /></xtml></Component><Component id="DoSaveStyle" type="field.Fields"><Param name="ExtraAction" type="action.Action" script="true" /><Param name="Type" /><xtml t="dlg.OpenDialog" Title="Share Style"><Var name="Xtml" value="%%" /><Var name="DialogData" t="xml.Xml"><xml name="my style" /></Var><Contents t="ui.Document"><Field t="field.Text" Text="Enter the name of the new style" /><Field t="field.Field" FieldData="%$DialogData/@name%" ><FieldAspect t="field_aspect.Mandatory" /><FieldAspect t="field_aspect.HideTitle" /></Field><Field t="field.XmlMultipleGroup" Title="Current Styles in Widget"><Condition value="%$_BartContext/AppXtml/../../Component[@type=\'{$Type}\']/@id% != \'\'" /><FieldAspect t="field_aspect.Section" /><Items t="field.CustomItems" Items="%$_BartContext/AppXtml/../../Component[@type=\'{$Type}\']%" /><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.ReadOnly"/><Field t="field.Text" ID="Text" Title="Name" Text="%@id%" HideTitle="false"/><Field t="field.Button" Title="Override"><Style t="button.JBart"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$DialogData/!@id%" Value="%@id%" /><Action t="dlg.CloseDialog" CloseType="OK" /></Action></Field></Field>​        </Contents><RunOnOK t="action.RunActions" ><Var name="ComponentsTop" t="bart_dt.ComponentsTopElement" /><Var name="ID" t="text.FirstSucceeding"><Item value="%$DialogData/@id%" /><Item t="text.ToId" Data="%$DialogData/@name%" UsedIDs="%$ComponentsTop/Component/@ID%" /></Var><Var name="Html" t="text.FirstSucceeding"><Item value="%$Xtml/@Html%"/><Item value="%$Xtml/Html%" /></Var><Var name="Css" t="text.FirstSucceeding"><Item value="%$Xtml/@Css%" /><Item value="%$Xtml/Css%" /></Var><Var name="Js" t="text.FirstSucceeding"><Item value="%$Xtml/@Javascript%" /><Item value="%$Xtml/Javascript%" /></Var><Var name="Type" value="%$_Field/ParamXml/@type%" /><Var name="CustomPT" value="%$Xtml/@t%" /><Var name="Comp" t="xml.Xml" DynamicContent="true" EncodeDynamicContent="false" ><Component id="%$ID%" type="%$Type%"><xtml t="%$CustomPT%"><Html><![CDATA[%$Html%]]></Html><Css><![CDATA[%$Css%]]></Css><Javascript><![CDATA[%$Js%]]></Javascript></xtml></Component></Var><Var name="NewXtml" value="%$Comp%" /><Action t="xtml.UseParam" Param="ExtraAction" /><Action t="xml.Delete" Data="%$ComponentsTop/Component[@id=\'{$ID}\']%" /><Action t="xml.AddXmlChildren" Parent="%$ComponentsTop%" Children="%$Comp%" /><Action t="xtml.LoadComponents" Components="%$ComponentsTop/Component%" Namespace="%$ComponentsTop/@id%" ClearNSBefore="true"/><Action t="aaeditor.ClearCaches" /></RunOnOK></xtml></Component><Component id="StyleSave" type="field.Fields"><Param name="ExtraAction" type="action.Action" script="true" /><xtml t="field.Button" Title="Save Style"><Style t="button.Hyperlink"/><Action t="bart_dt.DoSaveStyle" Type="%$_Field/ParamXml/@type%"><ExtraAction t="xtml.UseParam" Param="ExtraAction" /></Action></xtml></Component><Component id="DialogStyleSave" type="field.Fields"><Param name="Type" /><Param name="StylePT" /><xtml t="field.Button" Title="Save Style"><Style t="button.Hyperlink"/><Action t="dialog.OpenDialog"><Var name="Xtml" value="%%" /><Dialog t="dialog.SingleQuestionDialog" Title="Save style" Question="Enter the name of the new style" InitialValue="my dialog"><RunOnOK t="action.RunActions" ><Var name="ComponentsTop" t="bart_dt.ComponentsTopElement" /><Var name="ID" t="text.ToId" UsedIDs="%$ComponentsTop/Component/@ID%" /><Var name="Comp" t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Component id="%$ID%" type="%$Type%"><xtml t="%$StylePT%" Html="%$Xtml/@Html%" Css="%$Xtml/@Css%" Javascript="%$Xtml/@Javascript%" Mode="%$Xtml/@Mode%"/></Component></Xml><Change t="xml.AddChildren" Data="%xtml%" CloneChildren="true" Children="%$Xtml/Feature%" /></Var><Action t="xml.AddXmlChildren" Parent="%$ComponentsTop%" Children="%$Comp%" /><Action t="xtml.LoadComponents" Components="%$ComponentsTop/Component%" Namespace="%$ComponentsTop/@id%" ClearNSBefore="true"/><Action t="aaeditor.ClearCaches" /></RunOnOK></Dialog></Action></xtml></Component><Component id="ConvertToNewPages" type="action.Action"><xtml t="action.RunActions"><Action t="action.RunActionOnItems" Items="%$_BartContext/AppXtml/Pages/Page%"><Action t="xml.AddXmlChildren" Parent="%$_BartContext/AppXtml/../..%"><Var name="Page" /><Children t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Component id="%@ID%" type="jbart.MyWidgetPage"><xtml /></Component></Xml><Change t="xml.ReplaceElement" Element="%xtml%" NewElement="%$Page%" /></Children></Action></Action><Action t="xml.Delete" Data="%$_BartContext/AppXtml/Pages%" /><Action t="xtml.LoadComponents" Components="%$_BartContext/AppXtml/../../Component%" Namespace="%$_BartContext/AppXtml/../../@id%" ClearNSBefore="true" /><Action t="action.WriteValue" To="%$_BartContext/AppXtml/!MainPage1/@t%" Value="%$_BartContext/AppXtml/../../@id%.%$_BartContext/AppXtml/@MainPage%" /><Action t="uiaction.Refresh" RunOn=".bartdt_tree" /></xtml></Component><Component id="Refresh" type="action.Action"><xtml t="uiaction.Refresh" RunOn=".bartdt_tree" /></Component><Component id="XtmlToJSon" type="data.Data" execution="native" ><Param name="Xtml" Default="%%" /></Component><Component id="EditProjectProperties" type="field.Field"><xtml t="field.Group"><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Field" Title="Name" FieldData="%!$_WidgetXml/!@name%"/><Field t="field.Field" Title="Type" FieldData="%!$_WidgetXml/!@type%" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="widget,feature,labs,system,widget jBartApp, feature jbartApp,prototype,only for tests,private,tutorial"/></Options></Type><FieldAspect t="field_aspect.DefaultValue" Value="draft"/></Field><Field t="field.Field" Title="Image" FieldData="%!$_WidgetXml/!@image%"><Type t="field_aspect.Image" EditDirectly="true"/></Field><Field t="field.Field" Title="Description" FieldData="%!$_WidgetXml/!@description%"><Type t="field_aspect.MultiLineText"/></Field></xtml></Component></xtml><xtml ns="bart_dt" plugin="jbart_editor"><Component id="PagesTable" type="ui.Control"><Param name="GoToPageAction" type="action.Action" script="true"><Default t="bart_dt.GoToEditPage" Page="%@ID%"/></Param><Param name="NewPageButton" type="data.Boolean" Default="true"/><xtml t="ui.ItemList" Class="content_types"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%"/><Item value="%$_BartContext/AppXtml%"/></Var><Items t="data_items.Items"><Items t="data.Pipeline"><Item t="data.List"><Item value="%$BartAppXtml/Pages/Page/@ContentType%"/><Item value="%$BartAppXtml/../../Component[@type=\'jbart.MyWidgetPage\']/xtml/@ContentType%"/></Item><Aggregator t="data.MakeUnique" /></Items></Items><Field t="field.Layout" ID="pages" Title="Pages"><Field t="field.Image" Title=""><Image t="image.Image"><Url t="text.FirstSucceeding"><Item value="%../@Image%"/><Item value="%$_Images%/studio/page1616.gif"/></Url></Image><Style t="image.PlainImage"/><FieldAspect t="field_aspect.Css" Inline="vertical-align:middle;" OnElement="cell"/></Field><Field t="field.XmlMultipleGroup"><Items t="field.CustomItems"><Items t="data.Pipeline"><Item t="data.List"><Item value="%$BartAppXtml/Pages/Page[@ContentType=\'{}\']%" /><Item value="%$BartAppXtml/../../Component[@type=\'jbart.MyWidgetPage\']/xtml[@ContentType=\'{}\']%"/></Item></Items></Items><Presentation t="uiaspect.TextWithCommas" AsHyperlink="true"><OnClick t="action.RunActions"><Action t="xtml.UseParam" Param="GoToPageAction"/><Action t="dialog.ClosePopup"/></OnClick><ItemText t="text.FirstSucceeding"><Item value="%../@id%"/><Item value="%@ID%"/></ItemText></Presentation></Field><Layout t="layout.HorizontalHtmlTable" Spacing="11px"/></Field><Field t="field.Button" Title="Add a New Page" Condition="%$NewPageButton%"><Action t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%$BartAppXtml/Pages%"/><Then t="bart_dt.AddANewPage"><GoToPageAction t="xtml.UseParam" Param="GoToPageAction"/></Then><Else t="dlg.OpenDialog" Title="Add a new page"><DialogData t="xml.ByTag" Tag="Page"/><Contents t="xtml_dt.NewPTControl" Type="bart.Pages"/><RunOnOK t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/Pages%" Children="%%"/><Action t="xtml.UseParam" Param="GoToPageAction"/></RunOnOK></Else></Action><FieldAspect t="field_aspect.HeaderFooterField" Location="footer"/><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/add1616.gif"/><FieldAspect t="field_aspect.Css" Inline="padding:8px 0 0 6px" OnElement="cell"/></Field><Presentation t="uiaspect.Table"/><Aspect t="uiaspect.TableNoHeader"/></xtml></Component><Component id="ContentTypes" type="ui.Control"><xtml t="ui.Section"><Var name="BartAppXtml" value="%$_BartContext/AppXtml%"/><Control t="ui.Section" Title="Quick Links"><Control t="ui.Button" Text="Create a new content type" Image="%$_Images%/studio/parachute1616.png"><Style t="ui.ButtonAsHyperlink"/><OnClick t="uiaction.Alert" Text="Please click on new content type on the top of the page"/></Control><Control t="ui.Button" Text="Import a spreadsheet" Image="%$_Images%/excel.gif"><Style t="ui.ButtonAsHyperlink"/><OnClick t="bart_dt.ImportSpreadsheetToContentType"/></Control><Control t="ui.Button" Text="Import an xml snippet" Image="%$_Images%/studio/xml1616.gif"><Style t="ui.ButtonAsHyperlink"/><OnClick t="bart_dt.ImportXmlToContentType"/></Control></Control><Control t="jbart_wizards_dt.WizardsInWidget" /></xtml></Component><Component id="AddContentTypes" type="action.Action"><Param name="ContentTypes" /><xtml t="action.RunActions"><Action t="xml.AddChildren" Data="%$BartAppXtml/ContentTypes%" Children="%$ContentTypes%" /><Action t="object.AddToProperty" Object="%$_BartContext%" Property="ContentTypes"><Value t="data.Pipeline"><Item value="%$ContentTypes%" /><Item t="xtml.RunXtml" Xtml="%%" /></Value></Action></xtml></Component><Component id="ImportContentTypeData" type="data.Data"><Param name="ContentTypeName" ><Default value="node" /></Param><xtml t="xml.WithChanges"><Xml t="xml.Xml"><xml><fields/><rows/></xml></Xml><Var name="Rows" t="data.Pipeline"><Item t="text.SplitLines" Text="%%" /><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty"><Value t="text.Trim" /></Filter></Item></Var><Var name="ColumnsNames" Data="%$Rows%" t="text.Split" Separator="&#009;"/><Var name="ColumnsCount" t="data.Count" Items="%$ColumnsNames%"/><Var name="Columns" t="data.Pipeline"><Item value="%$ColumnsNames%"/><Item t="object.Object"><Var name="Name" t="data.Pipeline"><Item t="text.Replace" Find="[^a-z^A-Z^0-9]" ReplaceWith=""/><Item t="data.IfThenElse"><If t="text.MatchesRegex" Expression="[a-zA-Z].*"/><Then value="%%"/><Else value="_%%"/></Item></Var><Property name="Title" value="%%"/><Property name="XPath" value="%$Name%"/><Property name="Name" value="%$Name%"/></Item></Var><Change t="xml.AddChildren" Data="%fields%"><Children t="data.Pipeline"><Item value="%$Columns%"/><Item t="xml.Xml" DynamicContent="true"><Field t="field.XmlField" Path="@%XPath%" ID="%Name%" Title="%Title%"/></Item></Children></Change><Change t="xml.PerformChangeWithManyInputs"><Inputs t="data.Pipeline"><Item value="%$Rows%"/><Aggregator t="data.Subset" From="2"/></Inputs><Change t="xml.AddChildren" Data="%rows%"><Children t="xml.WithChanges" ><Xml t="xml.ElementOfDynamicTag" Tag="%$ContentTypeName%" /><Change t="xml.PerformChangeWithManyInputs"><Inputs t="data.CreateNumbers" From="1" To="%$ColumnsCount%"/><Var name="Atts" t="text.Split" Separator="&#009;" Data="%$InputForChanges%"/><Change t="xml.SetAttribute"><AttributeName t="data.Pipeline" ><Item t="data.ByIndexFromList" List="%$Columns%" Index="%%"/><Item value="%XPath%"/></AttributeName><Value t="data.ByIndexFromList" List="%$Atts%" Index="%%" /></Change></Change></Children></Change></Change><Var name="ImportText"/></xtml></Component><Component id="ImportSpreadsheetToContentType" type="action.Action"><xtml t="dialog.OpenDialog" ><Dialog t="dialog.Dialog" Title="import spreadsheet" OKLabel="Next >>"><DialogData t="xml.Xml"><ContentType t="bart.ContentType" /></DialogData><Content t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Path="@ID" Title="content type" ID="id"><FieldAspect t="field_aspect.Mandatory"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Plural"/><Type t="field_aspect.Text"/></Field><Field t="field.XmlField" Path="@Plural"><FieldAspect t="field_aspect.Calculated" ManualOverride="true" MathFormula="" PrimitiveField="true"><Formula t="field_dt.PluralText" Data="%@ID%"/></FieldAspect><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@Title" ID="Title" Title="SpreadSheet Content"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Control"/><FieldAspect t="field_aspect.Information" Presentation="popup" Title="Spreadsheet content" Text="Paste here copied data from spreadsheet or from an internet table.&#xa;The first line should contain the field names.&#xa;Other lines contains the data.&#xa;Cells are separated by tab delimiter.&#xa;an example :&#xa;"><Control t="ui.List" customxtml="true"><Control t="ui.Text" Text="Paste here copied data from spreadsheet or from an internet table.&#xa;The first line should contain the field names.&#xa;Other lines contains the data.&#xa;Cells are separated by tab delimiter.&#xa;an example :&#xa;"/><Control t="ui.Image" Source="%$_Images%/studio/import_spreadsheet_example.jpg"/></Control></FieldAspect>?                </Field><Field t="field.XmlField" Path="@SpreadSheet_Content" ID="SpreadSheet_Content" Title=""><Type t="field_aspect.MultiLineText" Rows="30"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Mandatory"/><FieldAspect t="field_aspect.Control"><Control t="ui.TextControl"><Style t="ui.Textarea" Rows="35" CssStyle="font-size:10px;width:500px;"/></Control></FieldAspect></Field>?             </Fields></Content><RunOnOK t="dialog.OpenDialog" Data="%$OriginalInput%"><Dialog t="dialog.Dialog" Title="import spreadsheet (step 2)" OKLabel="Finish"><Var name="Params" value="%$DialogWorkingData%" /><Var name="Imported" t="bart_dt.ImportContentTypeData" ContentTypeName="%$Params/@ID%" Data="%$DialogWorkingData/@SpreadSheet_Content%" /><Content t="ui.Document" ><Item t="data_items.Items" Items="%$Params%"/><Fields t="field.Fields" ><Field t="field.XmlGroup" Title="Configure" ID="Configure" ><FieldAspect t="field_aspect.Section" ExpandCollapse="true" ExpandedByDefault="true"/><Presentation t="uiaspect.PropertySheet"/><Field t="field.XmlField" Path="@IdField" Title="ID Field"><Type t="field_aspect.DynamicPickList" Options="%$Imported/fields/*%" OptionCode="%@ID%" OptionLabel="%@Title%" /><FieldAspect t="field_aspect.Information" Presentation="popup" Title="ID field should have a unique value.&#xa;In case of references with other content types, the ID is used to identify the reference."/></Field>?                    </Field><Field t="field.XmlGroup" Title="Data" ID="Data" ID__Manual="" Path=""><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.PropertySheet"/><Field t="field.CustomControl" Title="" AsSection="true" ID="" ID__Manual="" ShowTitle=""><Control t="ui.ItemList"><Items t="data_items.Items" Items="%$Imported/rows/*%" /><Aspect t="uiaspect.DefaultFeatures"/><Presentation t="uiaspect.RichTable" /><Fields t="field.FieldsByItems" Items="%$Imported/fields/*%" ><Field t="xtml.RunXtml" Xtml="%%" /></Fields></Control><FieldAspect t="field_aspect.Section"/></Field></Field>?                  </Fields></Content><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Action t="action.IfThenElse" ><If t="yesno.IsEmpty" Value="%$Params/@IdField%" /><Then t="bart_dt.AddContentType" ID="%$Params/@ID%" Plural="%$Params/@Plural%" FieldsXtml="%$Imported/fields/*%" ><Unit t="bart_dt.MainUnit" /></Then><Else t="action.RunActions" Remark="existing field id"><Action t="action.RunActionOnItems" Items="%$Imported/rows/*%"><Condition t="yesno.ItemsNotEqual" Item1="%$Params/@IdField%" Item2="id"/><Action t="xml.ChangeXml"><Change t="xml.SetAttribute" AttributeName="id" Value="%@{$Params/@IdField}%"/><Change t="xml.SetAttribute" AttributeName="%$Params/@IdField%" RemoveEmptyAttribute="true"/></Action></Action>?                      <Action t="xml.SetAttribute" AttributeName="Path" Value="@id" ><Data t="data.Pipeline" ><Item value="%$Imported/fields/*%" /><Item t="yesno.PassesFilter" Filter="%@ID% == %$Params/@IdField%" /></Data></Action><Action t="bart_dt.AddContentType" NoIdField="true" ID="%$Params/@ID%" Plural="%$Params/@Plural%" FieldsXtml="%$Imported/fields/*%"><Unit t="bart_dt.MainUnit" /></Action></Else></Action><Action t="action.RunActionOnItems" Items="%$Imported/rows/*%"><Action t="xml.ChangeXml"><Change t="xml.SetAttribute" AttributeName="_type" Value="%$Params/@ID%"/></Action></Action><Action t="xml.Delete" Element="%$_BartDtDB/{$Params/@ID}/*%" /><Action t="xml.AddChildren" Children="%$Imported/rows/*%" Data="%$_BartDtDB/{$Params/@ID}%" /><Action t="bart_dt.GoToEditPage" Page="%$Params/@Plural%" /></RunOnOK></Dialog></RunOnOK></Dialog></xtml></Component><Component id="ImportXmlToContentType" type="action.Action"><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="import xml" OKLabel="Next &gt;&gt;" CloseOnEnter="false"><DialogData t="xml.Xml"><ContentType t="bart.ContentType"/></DialogData><Content t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Path="@ID" Title="Content Type Name" ID="id"><FieldAspect t="field_aspect.Mandatory"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Plural"/><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Calculated"><Formula t="xml.Tag"><Data t="data.Pipeline"><Var name="Params"/><Item t="xml.TextToXml" Data="%@Xml%"/><Item t="data.IfThenElse" If="%$Params/@Multiple% == \'true\'" Then="%*%" Else="%%"/></Data></Formula></FieldAspect></Field><Field t="field.XmlField" Path="@Plural" ID="plural"><FieldAspect t="field_aspect.Calculated" ManualOverride="true" MathFormula="" PrimitiveField="true"><Formula t="field_dt.PluralText" Data="%@ID%"/></FieldAspect><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@Xml" ID="Xml" Title="Xml" Description=""><Type t="field_aspect.MultiLineText" Rows="35"/><FieldAspect t="field_aspect.Description" Description="E.g. &amp;lt;books&amp;gt;   &amp;lt;book Author=&amp;quot;David&amp;quot; Title=&amp;quot;Dogs Life&amp;quot;/&amp;gt;   &amp;lt;book Author=&amp;quot;Dan&amp;quot; Title=&amp;quot;Funny life&amp;quot;/&amp;gt; &amp;lt;/books&amp;gt;  "/><FieldAspect t="field_aspect.Css" Inline="width:500px" OnElement="content"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="id,plural" RefreshOn="exit field"/><FieldAspect t="field_aspect.WritableControl"><Control t="xmlui.CodeMirrorTextarea" Type="xml"><OnUpdate t="field.RefreshDependentFields" Input="%$ControlElement%"/></Control></FieldAspect></Field><Field t="field.XmlField" Title="Multiple Items" Path="@Multiple"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="id,plural"/></Field><Field t="field.Button1" Title="Clean NS" ShowTitle=""><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="action.WriteValue" To="%@Xml%"><Value t="data.Pipeline"><Item t="xml.TextToXml" Data="%@Xml%"/><Item t="xml.XmlToText" PrettyPrint="true"/></Value></Action><Action t="field.RefreshField" FieldID="Xml"/></Action></Action><ButtonStyle t="ui.StandardButton"/></Field></Fields></Content><RunOnOK t="dialog.OpenDialog" Data="%$OriginalInput%"><Dialog t="dialog.Dialog" Title="Import Xml (step 2)" OKLabel="Finish"><Var name="Params" value="%$DialogWorkingData%"/><Var name="XmlMetadata" t="field_dt.ExtractXmlMetadata"><SampleItems t="data.Pipeline"><Item t="xml.TextToXml" Data="%$Params/@Xml%"/><Item t="data.IfThenElse" If="%$Params/@Multiple% == \'true\'" Then="%*%" Else="%%"/></SampleItems></Var><Content t="ui.Document"><Item t="data_items.Items" Items="%$Params%"/><Fields t="field.Fields"><Field t="field.XmlGroup" Title="Configure" ID="Configure"><FieldAspect t="field_aspect.Section" ExpandCollapse="true" ExpandedByDefault="true"/><Presentation t="uiaspect.PropertySheet"/><Field t="field.XmlField" Path="@fields" Title="Fields"><Type t="field_aspect.DynamicPickList" Options="%$XmlMetadata/fields/*%" OptionCode="%@ID%" OptionLabel="%@Title%" Multiple="true"/><FieldAspect t="field_aspect.DefaultValue"><Value t="data.Pipeline"><Item value="%$XmlMetadata/fields/*/@ID%"/><Aggregator t="text.Concat" Separator=","/></Value></FieldAspect></Field><Field t="field.XmlField" Path="@create_search_box" Title="Create Search Box"><Type t="field_aspect.Boolean"><Presentation t="field_aspect.CheckBox"/></Type></Field></Field><Field t="field.XmlGroup" Title="Data" ID="Data" ID__Manual="" Path=""><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.PropertySheet"/><Field t="field.CustomControl" Title="" AsSection="true" ID="" ID__Manual="" ShowTitle=""><Control t="ui.ItemList"><Items t="data_items.Items" Items="%$XmlMetadata/rows/*%"/><Aspect t="uiaspect.DefaultFeatures"/><Presentation t="uiaspect.RichTable"/><Fields t="field.FieldsByItems" Items="%$XmlMetadata/fields/*%"><Field t="xtml.RunXtml" Xtml="%%"/></Fields></Control><FieldAspect t="field_aspect.Section"/></Field></Field></Fields></Content><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Action t="bart_dt.AddContentTypeForJBart" WithSearchBox="%$Params/@create_search_box%" ID="%$Params/@ID%" Plural="%$Params/@Plural%" ReadOnly="true"><Unit t="bart_dt.MainUnit"/><FieldsXtml t="data.Pipeline"><Item t="data.ListByCommas" List="%$Params/@fields%"/><Item value="%$XmlMetadata/fields/Field[@ID=\'{}\']%" /></FieldsXtml></Action><Action1 t="action.RunActionOnItems" Items="%$Imported/rows/*%"><Action t="xml.ChangeXml"><Change t="xml.SetAttribute" AttributeName="_type" Value="%$Params/@ID%"/></Action></Action1><Action t="xml.AddXmlChildren" Parent="%$_BartDtDB%"><Children t="xml.ElementOfDynamicTag" Tag="%$Params/@ID%"><Change t="xml.AddChildren" Children="%$XmlMetadata/rows/*%"/></Children></Action><Action t="bart_dt.GoToEditPage" Page="%$Params/@Plural%"/></RunOnOK></Dialog></RunOnOK></Dialog></xtml></Component><Component id="AddContentTypeForJBart" type="action.Action"><Param name="ID" /><Param name="Plural" /><Param name="FieldsXtml" /><Param name="Unit" /><Param name="WithSearchBox" type="data.Boolean"/><xtml t="action.RunActions" ><Var name="ToAdd" t="xml.WithChanges" ><Xml t="xml.Xml" DynamicContent="true"><xml><ContentType t="bart.ContentType" ID="%$ID%" /><Page t="bart.SinglePage" ID="%$ID%" ContentType="%$ID%"><Aspect t="uiaspect.ReadOnly"/></Page><Page t="bart.MultiplePage" ID="%$Plural%" ContentType="%$ID%" ><DefaultResource t="bart.Resource" Name="%$Plural%" /><Presentation t="uiaspect.List" ItemClickable="true"/><Aspect t="uiaspect.ItemDetails" ><ItemPage t="bart_field.UseSinglePage" Page="%$ID%"/><OpenIn t="uiaspect.DetailsInPopup" ><PopupStyle t="dlg.FullBlackShadow" /></OpenIn></Aspect><Aspect t="uiaspect.ReadOnly"/><Operations t="operation.Operations" /></Page><Resource t="bart_resource.Query" ContentType="%$ID%" ResourceID="%$Plural%" /></xml></Xml><Change t="xml.AddChildren" Data="%Page[1]%" Children="%$FieldsXtml%" CloneChildren="true" /><Change t="xml.AddChildren" Data="%Page[2]%" Children="%$FieldsXtml%" CloneChildren="true" /></Var><Action t="action_async.RunAsync"><Action t="bart_resource.RefreshResource" ResourceID="%$Plural%" /></Action><Action t="bart_dt.AddContentTypes" ContentTypes="%$ToAdd/ContentType%" /><Action t="action.RunActions" ><Action t="bart_dt.AddPages" Pages="%$ToAdd/Page%" /><Action t="bart_dt.AddResources" Resources="%$ToAdd/Resource%" /><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/Pages/Page[@ID=\'main\']%"><Children t="data.IfThenElse" If="%$WithSearchBox%"><Then t="xml.Xml" DynamicContent="true"><Field t="field.XmlField" Path="@Search_Box" ID="Search_Box" Title="Search Box"><Type t="picklist.Picklist"><Options t="picklist.DynamicOptions" Options="\\%$%$Plural%\\%" OptionLabel="\\%\\%"/></Type><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Search ..."/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect  t="field_aspect.SearchPopupImage"/></Field></Then><Else t="xml.Xml" DynamicContent="true"><Field t="jbart.Page" Title="%$Plural%" ID="%$Plural%"><Page t="%$BartAppXtml/../../@id%.%$Plural%" /></Field></Else></Children></Action></Action><Action t="xtml.LoadComponents" Namespace="%$Unit%"><Components t="data.Pipeline"><Item t="xml.ItemByID" List="%$_BartContext/Units%" ID="%$Unit%" /><Item value="%Component%" /></Components></Action><Action t="bart_dt.AddOrReplaceContentType"><ContentType t="xtml.RunXtml" Xtml="%$ToAdd/ContentType%" /></Action></xtml></Component><Component id="AddOrReplaceContentType" type="action.Action"><Param name="ContentType"/><xtml t="object.AddOrReplacePropertyItem" Object="%$_BartContext%" Property="ContentTypes" Item="%$ContentType%"/></Component><Component id="Plugins" type="ui.Control" image="%$_Images%/studio/plugin21616.png"><xtml t="ui.Document"><Field t="field.XmlMultipleGroup" ID="dt_plugins" Title="Plugins" TitleForSingle="Plugin"><Items t="field.CustomItems"><Items t="data.Pipeline"><Item t="plugins.PluginDefinitions" customxtml="true"><Item value=""/></Item><Item value="%*%"/></Items></Items><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.DefaultFeatures"/><Aspect t="uiaspect.ReadOnly"/><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.Section" HideTitle=""/><Operations t="operation.Operations"/><Field t="field.Button" ID="button" Title="button" HideTitle="true"><Style t="button.Hyperlink"/><ButtonText t="data.IfThenElse" Then="Installed (click to uninstall)" Else="Install" ><If t="data.IsInCommaSeparatedList" Item="%@id%" List="%$_WidgetXml/@plugins%" /></ButtonText><Action t="action.RunActions"><Action t="action.IfThenElse"><If t="data.IsInCommaSeparatedList" Item="%@id%" List="%$_WidgetXml/@plugins%"/><Then t="text.RemoveFromCommaText" Text="%$_WidgetXml/@plugins%" ToRemove="%@id%"/>​                  <Else t="text.AddToCommaText" Text="%$_WidgetXml/!@plugins%" ToAdd="%@id%"/>​                </Action><Action t="field.RefreshField" FieldID="dt_plugins" Scope="screen"/>​              </Action></Field><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Plugin" ReadOnlyText=""><Type t="field_aspect.Text"/></Field><Field t="field.Field" FieldData="%!@description%" ID="description" Title="Description" ReadOnlyText=""><Type t="field_aspect.Text"/></Field></Field></xtml></Component></xtml><xtml ns="bart_dt"><Component id="EditRuntimeFieldOfMetaData" type="ui.Control"><Param name="Field" /><xtml t="ui.Document"><Var name="MetaDataPage" value="%$BartAppXtml/Pages/Page[@ID=\'metadata\']%" /><Item t="bart_resource.ResourceByID" ResourceID="MetaData" /><Fields t="field.FieldWithAspects"><Field t="xtml.RunXtml" Xtml="%$MetaDataPage/Field[@ID=\'{$Field}\']%" /><FieldAspect t="field_aspect.HideTitle" /></Fields></xtml></Component><Component id="AddMetaDataField" type="action.Action"><Param name="MetaDataField" /><Param name="FieldType" /><Param name="DefaultValue" /><xtml t="action.RunActions"><Var name="MetaDataPage" value="%$BartAppXtml/Pages/Page[@ID=\'metadata\']%" /><Var name="CurrentField" value="%Field[@ID=\'{MetaDataField}\']%" /><Var name="NewField" t="xml.Xml" DynamicContent="true"><Field t="%$FieldType%" ID="%$MetaDataField%" Path="%$MetaDataField%" Title="%$MetaDataField%" /></Var><Var name="NewValue" t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%$DefaultValue%" /><Then t="xml.ByTag" Tag="%$MetaDataField%" /><Else t="xml.XmlWithChangedTag" Tag="%$MetaDataField%"><BaseXml t="data.Duplicate" Data="%$DefaultValue%" /></Else></Var><Var name="MetaData" t="bart_resource.ResourceValue" ResourceID="MetaData" /><Condition t="yesno.IsEmpty" Value="%$CurrentField%" /><Action t="xml.AddChildren" Data="%$MetaDataPage%" Children="%$NewField%" /><Action t="xml.AddChildren" Data="%$MetaData%" Children="%$NewValue%" /></xtml></Component><Component id="ChangeParamOfChangeItem" type="field.Field1"><xtml t="field.CustomControl"><Control t="ui.ControlWithAction"><RunBeforeControl t="xml.AddChildren"><Condition t="yesno.IsEmpty" Value="%Change/@t%" /><Children t="xml.Xml"><Change t="operation.ChangeValue" /></Children></RunBeforeControl><Control t="ui.ItemList"><Items t="xml.XmlItems" Tag="Change"><DoOnNewItem t="xml.SetAttribute" AttributeName="t" Value="operation.ChangeValue" /></Items><Presentation t="uiaspect.RichTable" /><Fields t="xtml_dt.ParamsAsFields" Component="operation.ChangeValue" /><Aspect t="uiaspect.DefaultFeatures" /><Aspect t="uiaspect.CellPresentation" Content="control" /><Aspect t="uiaspect.ItemDetails"><OpenNewIn t="uiaspect.ExpandAllText" /></Aspect><Operations t="operation.StdOperations" /></Control><FieldAspect t="field_aspect.HideTitle" /></Control></xtml></Component><Component id="MetaDataPickListOptions" type="data.Data"><xtml t="data.Pipeline"><Item t="bart.FieldsOfContentType" ContentType="metadata" /><Item t="yesno.PassesFilter" Filter="%Type%==\'Options Definition\'" /><Item value="%ID%" /></xtml></Component><Component id="PickListEdit" type="operation.Operations"><xtml t="ui.Section" Class="picklist_dt"><Var name="Xtml" value="%%" /><Control t="ui.Button" Class="picklist_dt_edit"><Condition t="yesno.NotEmpty" Value="%$Xtml/@Options%" /><Style t="ui.ButtonAsHyperlink" /><Text t="text.FirstSucceeding"><Item t="text.Concat" Separator="," MaxItems="5"><Items t="data.Pipeline"><Item t="bart_resource.ResourceValue" ResourceID="MetaData" /><Item t="xtml.RunXtml" Xtml="%{$Xtml/@Options}%" /><Item value="%Options/code%" /></Items></Item><Item value="edit options" /></Text><OnClick t="dialog.OpenDialog"><Var name="MetaDataR" t="bart_resource.ResourceByID" ResourceID="MetaData" /><Dialog t="dialog.Dialog" Title="Edit picklist %$PLField/Title%" Buttons="Close"><Var name="PLField" t="bart.FieldOfContentType" ContentType="metadata" FieldID="%$Xtml/@Options%" /><Content t="ui.Document" Item="%$MetaDataR%"><Fields t="field.FieldWithAspects"><Field value="%$PLField%" /><FieldAspect t="field_aspect.HideTitle" /></Fields></Content><RunOnOK t="action.RunActions"><Action t="uiaspect.DoSave"><Var name="_Items" value="%$MetaDataR%" /></Action><Action t="uiaction.Refresh" RunOn="up(.picklist_dt)" /><Action t="field_dt.RefreshPreview" /></RunOnOK></Dialog></OnClick></Control><Control t="ui.Button" Text="click to define options"><Condition t="yesno.IsEmpty" Value="%$Xtml/@Options%" /><Style t="ui.ButtonAsHyperlink" /><OnClick t="dialog.OpenDialog"><Dialog t="dialog.SingleQuestionDialog" Title="Add picklist" Question="Enter the name of the new picklist" InitialValue="%$Xtml/../@ID%"><RunOnOK t="action.RunActions"><Action t="xml.ChangeXml" Xml="%$BartAppXtml/Pages/Page[@ID=\'metadata\']%"><Change t="xml.AddChildren"><Children t="xml.Xml" DynamicContent="true"><Field t="field.OptionsDefinition" Path="%$DialogWorkingData%" /></Children></Change></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="Pages"><Value t="xtml.RunXtml" Xtml="%$BartAppXtml/Pages%" /></Action><Action t="action.WriteValue" To="%$Xtml/!@Options%" Value="%$DialogWorkingData%" /><Action t="uiaction.Refresh" RunOn="up(.picklist_dt)" /><Action t="uiaction.Click" RunOn=".picklist_dt_edit" /></RunOnOK></Dialog></OnClick></Control><Layout t="ui.Horizontal" /></xtml></Component><Component id="EditDateFilterOptions" type="field.Fields"><xtml t="field.CustomControl"><FieldAspect t="field_aspect.Hide" New="true" Edit="false" /><Control t="ui.ControlWithAction"><Var name="Xtml" /><RunBeforeControl t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%Options/@t%" /><Then t="action.RunActions"><Action t="action.WriteValue" To="%!Options/@t%" Value="bart_field.OptionsFromMetadata" /><Action t="action.WriteValue" To="%!Options/@MetaDataField%" Value="DateFilter" /><Action t="bart_dt.AddMetaDataField" MetaDataField="DateFilter" FieldType="datefilter.DateFilterOptionsDefinition"><DefaultValue t="xtml.ComponentDefinition" ID="datefilter.DefaultFilterOptions" ToXtml="true" /></Action></Then></RunBeforeControl><Control t="ui.Button" Text="edit options..."><Style t="ui.ButtonAsHyperlink" /><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Edit Date filter options"><DialogData t="data.Pipeline"><Item t="bart_resource.ResourceValue" ResourceID="MetaData" /><Item value="%{$Xtml/Options/@MetaDataField}%" /></DialogData><Content t="datefilter.EditDateFilterOptions" /></Dialog></OnClick></Control></Control></xtml></Component><Component id="EditTextArrayField"><xtml t="field.CustomControl"><Control t="ui.ItemList"><Presentation t="uiaspect.RichTable" /><Items t="xml.XmlItems" Tag="Text" /><Fields t="field.XmlField" Path="@value" Title="Text" /><Aspect t="uiaspect.DefaultFeatures" /><Aspect t="uiaspect.CellPresentation" Content="control" /><Aspect t="uiaspect.ItemDetails"><OpenIn t="uiaspect.ExpandAllText" /><OpenNewIn t="uiaspect.ExpandAllText" /></Aspect><Operations t="operation.StdOperations" /></Control></xtml></Component><Component id="RolesField" type="field.Fields" hidden="true"><xtml t="field.XmlField" Path="@Roles"><Type t="field_aspect.Picklist" Multiple="true" AllowValueNotInOptions="true"><Options t="xtml.RunXtml"><Xtml t="data.Pipeline"><Item t="bart_resource.ResourceValue" ResourceID="MetaData" /><Item value="%Role%" /></Xtml></Options></Type></xtml></Component><Component id="ResourcesAsContext" type="data.Data" execution="native" /><Component id="OptionsNameField" type="field.Fields"><xtml t="field.CustomControl"><Control t="ui.Section" Class="picklist_dt"><Control t="ui.IfThenElse" ><Var name="ActualOptions" value="%$MetaData/PicklistOptions/PicklistOptions[@name=\'{@OptionsName}\']%" /><Var name="Xtml" /><If t="yesno.IsEmpty" Value="%@OptionsName%" /><Then t="ui.Button" Text="define options"><Style t="ui.ButtonAsHyperlink" /><OnClick t="dialog.OpenDialog"><Dialog t="dialog.SingleQuestionDialog" Title="Add picklist" Question="Enter the name of the new picklist options" InitialValue="%../../@ID%"><RunOnOK t="action.RunActions"><Action t="action.RunActions"><Condition t="yesno.IsEmpty" Value="%$MetaData/PicklistOptions/PicklistOptions[@name=\'{}\']%" /><Action t="xml.AddXmlChildren" Parent="%$MetaData/!PicklistOptions%" ><Children t="xml.Xml" DynamicContent="true"><PicklistOptions name="%%" /></Children></Action><Action t="uiaspect.DoSave"><Var name="_Items" t="bart_resource.ResourceByID" ResourceID="MetaData" /></Action></Action><Action t="xml.AddXmlChildren" Parent="%$MetaDataPage%"><Var name="MetaDataPage" value="%$BartAppXtml/Pages/Page[@ID=\'metadata\']%" /><Condition t="yesno.IsEmpty" Value="%$MetaDataPage/Field[@ID=\'PicklistOptions\']%" /><Children t="bart_dt.MetadataPicklistOptionsField" /></Action><Action t="action.WriteValue" To="%$Xtml/!@OptionsName%" Value="%%" /><Action t="uiaction.Refresh" RunOn="up(.picklist_dt)" /><Action t="uiaction.Click" RunOn=".picklist_dt_edit" /></RunOnOK></Dialog></OnClick></Then><Else t="ui.Button"><Style t="ui.ButtonAsHyperlink" /><Text t="text.FirstSucceeding"><Item t="text.Concat" Separator="," MaxLength="50"><Items t="data.Pipeline"><Item t="xtml.RunXtml" Xtml="%$ActualOptions%" /><Item value="%Options/code%" /></Items></Item><Item value="edit options" /></Text><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Edit picklist %@OptionsName%" Buttons="Close" DialogData="%$ActualOptions%"><Content t="ui.Section"><Control t="picklist.EditPicklistOptions" /><Control t="ui.Html" Html="&lt;br/&gt;" /><Control t="ui.Button" Text="switch to another picklist definition"><Style t="ui.ButtonAsHyperlink" /></Control></Content><RunOnOK t="action.RunActions"><Action t="uiaspect.DoSave"><Var name="_Items" t="bart_resource.ResourceByID" ResourceID="MetaData" /></Action><Action t="uiaction.Refresh" RunOn="up(.picklist_dt)" /><Action t="field_dt.RefreshPreview" /></RunOnOK></Dialog></OnClick></Else></Control></Control></xtml></Component><Component id="MetadataPicklistOptionsField" type="data.Data"><xtml t="xml.Xml"><Field ID="PicklistOptions" t="field.XmlMultipleGroup" Path="PicklistOptions/PicklistOptions" Title="Picklist Options" TitleForSingle="Option set"><Field t="field.XmlField" Path="@name" Title="Picklist"><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.ReadOnly" /></Field><Field t="field.CustomControl" Title="Definition" ShowTitle=""><Control t="picklist.EditPicklistOptions" /><FieldAspect t="field_aspect.TextSummary" Text="edit definitions" /><FieldAspect t="field_aspect.HideInTable" /></Field><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.DefaultFeatures" ItemSelection="true" Toolbar="false" AutoDoubleClick="false" /><FieldAspect t="field_aspect.Section" Underline="true" ExpandCollapse="" ExpandedByDefault="true" HideTitle="" /><Operations t="operation.Operations" /><Aspect t="uiaspect.HorizontalMasterDetails" /><Aspect t="uiaspect.TableNoHeader" /></Field></xtml></Component><Component id="BartPages" type="picklist.OptionsDefinition"><xtml t="picklist.OptionsWithOperations"><Options t="picklist.DynamicOptions"><Options t="data.List"><Item value="%$_BartContext/AppXtml/Pages/Page/@ID%" /><Item value="%$_BartContext/AppXtml/../../Component[@type=\'jbart.MyWidgetPage\']/@id%" /></Options></Options><Operation t="operation.Operation" ID="new" Title="add a page"><Action t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%$BartAppXtml/Pages%" /><Then t="bart_dt.AddANewPage"><GoToPageAction t="uiaction.SetText" RunOn="%$_Input%" Text="%@ID%" /></Then><Else t="dlg.OpenDialog" Title="Add a New Page"><DialogData t="xml.ByTag" Tag="Page" /><Contents t="xtml_dt.NewPTControl" Type="bart.Pages" /><RunOnOK t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/Pages%" Children="%%" /><Action t="uiaction.SetText" RunOn="%$_Input%" Text="%@ID%" /></RunOnOK></Else></Action></Action></Operation></xtml></Component><Component id="BartResources" type="picklist.OptionsDefinition"><xtml t="picklist.DynamicOptions" Options="%$_BartContext/AppXtml/Resources/Resource/@ResourceID%" /></Component><Component id="ConvertDefaultResource" type="action.Action"><xtml t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%%"><Condition t="yesno.NotEmpty" Value="%@DefaultResource%" /><Children t="xml.Xml" DynamicContent="true"><DefaultResource t="bart.Resource" Name="%@DefaultResource%" /></Children></Action><Action t="xml.SetAttribute" RemoveEmptyAttribute="true" AttributeName="DefaultResource" /></xtml></Component><Component id="CustomLayoutCreatePage" type="field.Fields"><xtml t="field.Button1" Title="create a custom page" Image="%$_Images%/studio/page1616.gif"><ButtonStyle t="ui.ButtonAsHyperlink"  /><Action t="dlg.OpenDialog" Title="Create a search custom page"><Var name="Xtml" value="%%" /><DialogData t="xml.Xml" /><Contents t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Title="Page ID" Path="@ID" Mandatory="true"><FieldAspect t="field_aspect.DefaultValue" Value="search page" /></Field><Field t="field.XmlField" Path="@items"><Type t="field_aspect.Picklist" AllowEmptyValue="false"><Var name="BartAppXtml" t="data.FirstSucceeding"><Item value="%$BartAppXtml%" /><Item value="%$_BartContext/AppXtml%" /></Var><Options t="picklist.DynamicOptions" Options="%$BartAppXtml/Resources/Resource/@ResourceID%" /></Type></Field></Fields></Contents><RunOnOK t="action.RunActions" ><Var name="ContentType" value="%$BartAppXtml/Resources/Resource[@ResourceID=\'{@items}\']/@ContentType%" /><Action t="xml.AddXmlChildren" Parent="%$BartAppXtml/Pages%"><Children t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true" ><Page t="bart.MultiplePage" ID="%@ID%" ContentType="%$ContentType%"><Presentation t="uiaspect.List" EachItemInLine="true" ItemClickable="false" ItemCss="height:50px; width:300px; &#xa;overflow:hidden; padding:10px;"/><Aspect t="uiaspect.ReadOnly" /><DefaultResource t="bart.Resource" Name="%@items%"/><Operations t="operation.Operations"/><Field t="field.Group" Title="Item" ID="item" Path=""><FieldAspect t="field_aspect.Section"/><Layout t="uiaspect.Horizontal" Spacing="5px" HideInnerTitles="true"/><Field t="field.Field" FieldData="%$FieldXtml/@ItemImage%" ID="image" Title="Image" ><Type t="field_aspect.Image" Height="40px" /></Field><Field t="field.Group" Title="fields" ID="fields" ><Layout t="uiaspect.Vertical" /><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%$FieldXtml/@ItemTitle%" ID="title" Title="Title" ><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="font-weight:bold"/></Field><Field t="field.Field" FieldData="%$FieldXtml/@ItemExtraText%" ID="text" Title="text" ><Type t="field_aspect.Text"/></Field></Field><GroupData t="group.DataFlow" FlowData="\\%\\%"/></Field><Field t="field.Button" ID="Button" Title="show all"><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HeaderFooterField" Location="footer" RefreshStrategy="none"/><Action t="field.ShowAllItemsInSearchBox"/><FieldAspect t="field_aspect.HideByCondition" CheckConditionForEveryItem="true"><ShowCondition t="field.HasMoreItemsToShowInSearchBox" /></FieldAspect><Image t="image.Image" Url="%$_Images%/expand-down.gif"/><FieldAspect t="field_aspect.Css" Inline="margin-left:10px; color:gray; margin-top: 10px; display: block;"/></Field>​	                </Page></Xml><Change t="xml.Delete" Element="%Field/Field/Field[@ID=\'text\']%" ><Condition t="yesno.IsEmpty" Value="%$FieldXtml/@ItemExtraText%" /></Change><Change t="xml.Delete" Element="%Field/Field/Field[@ID=\'image\']%" ><Condition t="yesno.IsEmpty" Value="%$FieldXtml/@ItemImage%" /></Change></Children></Action><Action t="action.WriteValue" To="%$Xtml/@Page%" Value="%@ID%" /><Action t="uiaction.Refresh" RunOn="up(.bartdev_all)" /></RunOnOK></Action></xtml></Component><Component id="ValueForDTOnly"><Param name="Value" /></Component><Component id="DataResourceValue" type="field.Fields"><Param name="Xtml" Default="%%" /><xtml t="field.CustomControl" Title="Value" ShowTitle="true" ID="DataResource_Value" ><Control t="ui.IfThenElse" If="%$Xtml/@ValueType% == \'calculated\'"><Then t="field.ShowFieldControl"><Field t="xtml_dt.ParamsAsFields" Component="bart_dt.ValueForDTOnly" Param="Value" /></Then><Else t="field.ShowFieldControl"><Var name="TempValue" t="text.FirstSucceeding"><Item t="xml.CDataValue" Element="%$Xtml/Value%"/><Item t="xml.XmlToText" Data="%$Xtml/Value/*%"/></Var><Var name="TempData" t="data.WritableText"><DefaultValue t="data.Switch" Default="%$TempValue%"><Case><IfCondition t="yesno.And" ><Item value="%$Xtml/@ValueType% == \'javascript\'"/><Item t="yesno.Not"><Of t="yesno.Contains" AllText="%$TempValue%"><Text value="function" /></Of></Item></IfCondition><Then><![CDATA[function(data,elem,context) {  return [{ title: \'sample js object\' }];                    }]]></Then></Case><Case><IfCondition t="yesno.And" ><Item value="%$Xtml/@ValueType% == \'xml\'"/><Item t="yesno.Not"><Of t="yesno.Contains" AllText="%$TempValue%"><Text value="&lt;" /></Of></Item></IfCondition><Then><![CDATA[<xml/>]]></Then></Case><Case><IfCondition t="yesno.And" ><Item value="%$Xtml/@ValueType% == \'json\' || %$Xtml/@ValueType% == \'json to xml\'"/><Item t="yesno.Not"><Of t="yesno.Contains" AllText="%$TempValue%"><Text value="{" /></Of></Item></IfCondition><Then><![CDATA[{  "title": "my title", "author": "my author"}]]></Then></Case></DefaultValue></Var><Field t="field.Field" FieldData="%$TempData%"><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Height="200px" Width="500px"/></Type><FieldAspect t="field_aspect.OnUpdate"><Action t="action.IfThenElse" If="%$Xtml/@ValueType% == \'xml\' || %$Xtml/@ValueType% == \'xml multiple\'"><Then t="action.IfThenElse"><Var name="ParsedXml" t="xml.TextToXml" Data="%%" /><If t="yesno.NotEmpty" Value="%$ParsedXml%" /><Then t="bart_dt.SaveXmlValueToDataResource" Xtml="%$Xtml%" Xml="%$ParsedXml%" /><Else t="action.RunActions" /></Then><Else t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@Value%"/><Action t="xml.Delete" Data="%$Xtml/Value/@t%"/><Action t="field_dt.WriteCDataAndFix" CDataText="%$TempData%" Element="%$Xtml/!Value%" /></Else></Action></FieldAspect></Field></Else></Control></xtml></Component><Component id="XmlResource" type="field.Fields"><Param name="Param"/><xtml t="field.CustomControl" Title="%$Param%" ShowTitle="true" ID="Resource_Xml"><Control t="ui.Document"><Var name="OrigXtml" value="%%"/><Data t="data.WritableText"><DefaultValue t="xml.XmlToText" Data="%$OrigXtml/{$Param}/*%" PrettyPrint="true"/></Data><Fields t="field.XmlField" ID="xml" Path="" Title=""><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Height="200px"/></Type><FieldAspect t="field_aspect.Css" Inline="width:500px"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.OnUpdate"><Action t="action.RunActions"><Var name="NewXml" t="xml.TextToXml"/><Action t="xml.RemoveAttributes" AttributeNames="%$Param%"/><Action t="xml.Delete" Data="%$OrigXtml/{$Param}%"/><Action t="xml.AddXmlChildren" Parent="%$OrigXtml/!{$Param}%" Children="%$NewXml%"/><Action t="action.WriteValue" To="%$OrigXtml/!{$Param}/@t%" Value="xml.Xml"/></Action></FieldAspect></Fields></Control></xtml></Component><Component id="FillDataSourceForXmlResource" type="field.Fields"><xtml t="field.Button" Title="Click here to fill sample data from the data source"><Style t="button.Hyperlink"/>​          <Action t="action.IfThenElse"><Var name="Xtml" value="%%" /><If t="yesno.IsEmpty" Value="%DataSource%" /><Then t="uiaction.Alert" Text="You must choose a data source" /><Else t="action_async.RunAsync"><Action t="action_async.AsyncActionOnAsyncData"><Query t="object.RunMethod" Method="Retrieve"><Object t="xtml.RunXtml" Xtml="%DataSource%" /></Query><Action t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/Xml/*%" /><Action t="xml.AddXmlChildren" Parent="%$Xtml/Xml%" Children="%%" CloneChildren="true" /><Action t="field.RefreshField" Scope="screen" FieldID="Resource_Xml" /></Action></Action></Else></Action></xtml></Component><Component id="SaveXmlValueToDataResource" type="action.Action"><Param name="Xtml" /><Param name="Xml" /><xtml t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/Value%" /><Action t="xml.AddXmlChildren" Parent="%$Xtml%"><Children t="xml.Xml"><Value t="xml.Xml" /></Children></Action><Action t="xml.AddXmlChildren" Parent="%$Xtml/Value%" Children="%$Xml%" CloneChildren="true" /></xtml></Component></xtml><xtml ns="bart_dt"><Component id="Inspect" type="action.Action" execution="native"><Param name="Level" Options="application,sample,infra"><Default value="sample"/></Param></Component><Component id="InspectInfra" type="action.Action"><xtml t="bart_dt.Inspect" Level="infra" /></Component><Component id="SetSelectedStudiobarObject" type="action.Action" execution="native"><Param name="Xtml"/></Component><Component id="EditXtmlInStudioBar" type="action.Action"><Param name="Xtml" Default="%%"/><Param name="IsNewItem" type="data.Boolean" /><xtml t="action.RunActions" ><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%$Xtml%"/><Action t="bart_dt.OpenPropertiesWindow"><Var name="_StudioIsNewItem" value="%$IsNewItem%" /></Action><Action t="bart_dt.OpenTreePopup" Xtml="%$Xtml%"/><Action t="bart_dt.ShowSelectedObjectElements" /></xtml>​  </Component><Component id="EditPageInDialog" type="action.Action"><xtml t="bart_dt.EditXtmlInDialog"><Var name="Page" value="%%"/><Var name="PageXtml" t="data.FirstSucceeding"><Item value="%$_BartContext/AppXtml/../../Component[@id=\'{$Page}\']/xtml%"/><Item value="%$_BartContext/AppXtml/Pages/Page[@ID=\'{$Page}\']%"/></Var><Data value="%$PageXtml%"/></xtml></Component><Component id="ShowSelectedObjectElements" type="action.Action" execution="native" /><Component id="InspectContent" type="ui.Control"><xtml t="ui.IfThenElse" If="%@dtEditor% != \'\'"><Then t="xtml.RunXtmlByComponentId" ComponentID="%@dtEditor%" /><Else t="field.ShowFieldControl" Item="%%"><Field t="field.Group"><Field t="field_dt.Toolbar" FieldXtml="%%"><ParentXtml t="field_dt.ToolbarFieldXtml" FieldXtml="%%" /></Field><Field t="field.XtmlControl"><FieldAspect t="field_aspect.Css" Inline="padding-left:5px;"/><Control t="field_dt.FieldDetails"><Var name="Language" value=""/></Control></Field><GroupData t="group.DataFlow" FlowData="%%"/><Layout t="uiaspect.Vertical"/><Aspect t="uiaspect.ReadOnly"/></Field></Else></xtml></Component><Component id="InspectPopup" type="dialog_style.Style"><Param name="Padding" Default="5px 15px" /><xtml t="dialog_style.CustomStyle"    Html="&lt;div&gt; &lt;table cellpadding=\'0\' cellspacing=\'0\' &gt;&lt;tbody class=\'aa_dlg_tbody\'&gt;&lt;tr&gt;&lt;td class=\'aa_dialog_title jbartStudio_dialog\'/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=\'vertical-align:top;\'&gt;&lt;div class=\'aa_dialogcontents\'/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=\'aa_dialogbuttons\'/&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; &lt;/div&gt;"    Javascript="" Mode="dialog"><Css><![CDATA[       #this { -moz-box-shadow: 0 0 2px 2px #888;-webkit-box-shadow: 0 0 2px 2px #888;        box-shadow: 0 0 2px 2px #888; border:1px solid rgb(204,204,204);  background:rgb(166,198,255);  position:fixed; %$CssOnTop% }       #this .aa_dlg_tbody { background: white; }       #this .aa_dialog_title {         height:32px;  cursor: move;  text-align: center;          vertical-align:top;  font-family: Arial;  margin-top: 8px;        }        #this .aa_dialog_title_text { padding:8px 30px;  }        #this .aa_dialogcontents { overflow: auto; padding:%$Padding%; margin-top: 2px; margin-bottom:3px;  }        #this .aa_dialogbuttons { border-top: 1px solid #BBB; }        ]]></Css><Feature t="dlg.DragDialog" /><Feature t="dlg.AutomaticFocus" FocusOn="first input" /><Feature t="dlg.JBartStudioDialog" /></xtml></Component><Component id="RefreshSelectedObject" type="action.Action" execution="native"/><Component id="EditXtmlInDialog" type="action.Action"><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="ControlToRefresh" /><xtml t="dlg.OpenDialog"><Var name="_Xtml" /><Var name="_XtmlEditorContext" t="object.Object"><Method name="RefreshPreview" t="action.RunActions"><Action t="bart_dt.RefreshSelectedObject" /><Action t="object.RunMethod" Method="MarkAsModified" Input="%$_Xtml%"><Object t="xtml_dt_tree.SaveManager" /></Action></Method></Var><Contents t="ui.IfThenElse"><Var name="_FromStudio" value="true" /><If t="yesno.NotEmpty" /><Then t="bart_dt.InspectContent"/><Else t="bart_dt.SimpleEditPageContents" /></Contents><Feature t="dlg.HandleEvents"><OnClose t="action.RunActions"><Action t="bart_dt.RefreshSelectedObject" /><Action t="bart_dt.PropertiesWindowClosed" /></OnClose></Feature><Style t="bart_dt.InspectPopup" Padding="1px 3px 3px 6px"/><Feature t="dlg.UniquePopup" Identifier="jBart Inspect Properties" AutoClose="true" KeepPopupLocation="true"><Condition t="yesno.Not" Of="%$_DomEvent/ctrlKey%" /></Feature><Feature t="dlg.AlwaysLTR"/><Feature t="dlg.ClearButtons"/><Feature t="bart_dt.StudioPopupLocation" Popup="properties" /><Feature t="dlg.TopZIndexWhenTouching" /><Feature t="dlg.CloseIcon" CssStyle="top:5px;right:5px"/><Feature t="dlg.DragDialog"/><Feature t="dlg.ButtonsHorizontal" Align="left"/><Feature t="dlg.DialogButtonsStyle"><Style t="button.JBartHyperlink" Color="black"/></Feature><Feature t="xtml.UseParamArray" Param="Feature"/><Feature t="dlg.Size" MaxSize="340px,80%" Size="340px,70%"/><Feature t="dlg.Resizer" /><Feature t="dlg.DialogButton"><Button t="dlg.Button" Text="Outline" Image="%$_Images%/studio/tree.png"><OnClick t="bart_dt.OpenTreePopup" Xtml="%%"/></Button><Button1 t="dlg.Button" Text="ToolBox" Image="%$_Images%/studio/toolbox.png"><OnClick t="bart_dt.OpenToolbox" Xtml="%%"/></Button1><Button t="dlg.Button" Text="Delete" Image="%$_Images%/delete1616.gif"><Condition t="xml.IsOfTag" Tag="Field"/><OnClick t="dialog.AskForConfirmation" Question="Are you sure you want to delete the field %@Title% ?" Title="Confirm Delete" Mode="other" QuestionAsHtml=""><RunOnOK t="action.RunActions"><Var name="Parent" value="%$DialogOriginalData/..%" /><Action t="xml.Delete" Data="%$DialogOriginalData%"/><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%$Parent%" /><Action t="field_dt.RefreshPreview" /><Action t="bart_dt.OpenPropertiesWindow" /><Action t="bart_dt.OpenTreePopup" Xtml="%$Parent%"/></RunOnOK><DialogFeature t="dlg.DontCloseOtherPopupsOnOpen"/><DialogFeature t="dlg.Location"><Location t="dlg.NearLauncher" Location="below,above or aside of launcher"/></DialogFeature></OnClick></Button></Feature><Title t="data.IfThenElse" Else="Simple Properties"><If t="yesno.NotEmpty" /><Then t="data.Pipeline"><Item t="text.FirstSucceeding"><Item value="%@Title%"/><Item value="%@ID%"/><Item value="Project" Condition="%@t%==\'bart.Application\'" /></Item><Item value="Properties of %%"/></Then></Title><Feature t="dlg.DialogClass" CssClass="aa_click_dosent_close_popup aa_studio_properties jbstudio"/><Feature t="dlg.DontCloseOtherPopupsOnOpen"/></xtml></Component><Component id="EditFieldInDialog" type="action.Action"><xtml t="bart_dt.EditXtmlInDialog" /></Component><Component id="EditPageFromFieldXtml" type="action.Action" execution="native"><Param name="FieldXtml" Default="%%"/></Component><Component id="InspectDeleteButton" type="dialog.DialogButton" hidden="true"><Param name="ItemType" /><xtml t="dialog.DialogButton" Text="Delete"><OnClick t="dialog.AskForConfirmation" Question="Are you sure you want to delete the %$ItemType% ?" Title="Delete"><RunOnOK t="action.RunActions"><Action t="xml.Delete" /><Action t="dialog.CloseDialog" CloseType="OK" /></RunOnOK></OnClick></xtml></Component><Component id="EditOperationInDialog" type="action.Action"><xtml t="dialog.OpenDialog"><Var name="Top" value="%..%" /><Dialog t="dialog.Dialog" Title="Edit Operation %@Title%" Buttons="Close,Apply" AlwaysLTR="true" ScreenOpacity="0.3"><Content t="ui.Document"><Var name="Language" value="" /><Fields t="xtml_dt.ParamsAsFields" /></Content><RunOnOK t="uiaction.RefreshOriginatedContainer" /><DialogButton t="dialog.DialogButton" Text="Add"><OnClick t="uiaspect_dt.AddOperationDialog" IsCustom="false"><DoOnNewOperation t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%$Top%" Children="%%" /><Action t="dialog.CloseDialog" CloseType="OK" /></DoOnNewOperation></OnClick></DialogButton><DialogButton t="dialog.DialogButton" Text="Add Custom"><OnClick t="uiaspect_dt.AddOperationDialog" IsCustom="true"><DoOnNewOperation t="action.RunActions"><Action t="xml.AddXmlChildren" Parent="%$Top%" Children="%%" /><Action t="dialog.CloseDialog" CloseType="OK" /></DoOnNewOperation></OnClick></DialogButton><DialogButton t="bart_dt.InspectDeleteButton" ItemType="operation" /></Dialog></xtml></Component><Component id="EditCustomXtml" type="action.Action"><xtml t="xtml_dt_tree.OpenScriptEditor"><Xtml t="ui.ControlData" Type="script" Control="%$ControlElement%"/><Var name="_OriginalElement" value="%$ControlElement%" /><Var name="XtmlWithContext" t="xtml.Xtml"><Xtml t="ui.ControlData" Type="script" Control="%$ControlElement%"/><Context t="ui.ControlData" Type="context" Control="%$ControlElement%"/><Input t="ui.ControlData" Type="original_data" Control="%$ControlElement%"/></Var><Var name="AAEditorState" t="aaeditor.State" Data="%$XtmlWithContext%" /><RunOnOK t="uiaction.Refresh" RunOn="%$_OriginalElement%"/><GlobalPreview t="xtml.RunXtml" Xtml="%$XtmlWithContext%" /><MainCircuit t="xtml.RunXtml" Xtml="%$XtmlWithContext%" /></xtml></Component><Component id="EditInfraItemList" type="action.Action"><xtml t="xtml_dt_tree.OpenScriptEditor" Xtml="%$Cntr/XtmlSource/script%"><Var name="_OriginalElement" value="%$ControlElement%" /><Var name="Ctrl" t="uiaspect.ContainerControl" Container="%$Cntr%" /><Var name="XtmlWithContext" t="xtml.Xtml"><Xtml t="ui.ControlData" Type="script" Control="%$Ctrl%"/><Context t="ui.ControlData" Type="context" Control="%$Ctrl%"/><Input t="ui.ControlData" Type="original_data" Control="%$Ctrl%"/></Var><Var name="AAEditorState" t="aaeditor.State" Data="%$Cntr/XtmlSource%" /><RunOnOK t="uiaction.Refresh" RunOn="%$_OriginalElement%"/><GlobalPreview t="xtml.RunXtml" Xtml="%$XtmlWithContext%" /><MainCircuit t="xtml.RunXtml" Xtml="%$XtmlWithContext%" /></xtml></Component><Component id="SynchTreePopup" type="action.Action"><xtml t="action.IfThenElse"><If t="yesno.NotEmpty" Value="%$ControlElement%" RunOn=".jbstudio_tree" /><Then t="bart_dt.OpenTreePopup" Xtml="%$InspectSelectedObject/Xtml%"><Var name="InspectSelectedObject" t="bart_dt.InspectSelectedObject"/></Then></xtml></Component><Component id="OpenTreePopup" type="action.Action"><Param name="Xtml" /><xtml t="action.RunActions"><Var name="PageXtml" t="field_dt.UpToPageDef" Data="%$Xtml%" /><Var name="Path" t="field_dt.UpToPageDef" Data="%$Xtml%" Result="path" /><Action t="bart_url.ChangeUrl" Url="#?pagedt_path=%$Path%" /><Action t="dlg.OpenDialog" Title="Outline"><Contents t="ui.ItemList" ID="pagedt" Class="inspect_tree jbstudio_tree"><Var name="PageSampleItems" t="bart_dt.PageSampleItems" PageXtml="%$PageXtml%" /><Items t="field_dt.FieldTreeItems" RootXtml="%$PageXtml%" /><Presentation t="uiaspect.Tree" SelectedInUrl="true"><ItemImage t="field_dt.TreeItemImage" /><ItemText t="text.FirstSucceeding"><Item value="%@Title%" /><Item value="%@ID%" /><Item value="Project" Condition="%@t%==\'bart.Application\'" /><Item value="%../@id%" /><Item value="%@t%" /></ItemText></Presentation><Aspect t="uiaspect.TreeDragAndDrop"><OnDrop t="field_dt.RefreshPreview" RefreshParent="true" /></Aspect><Aspect t="uiaspect.ContextMenu" /><Aspect t="uiaspect.Shortcuts" /><Aspect t="uiaspect.OnDoubleClick"><Action t="action.RunActions"><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%%" /><Action t="bart_dt.ShowSelectedObjectElements" /><Action t="bart_dt.OpenPropertiesWindow" /></Action></Aspect><Aspect t="uiaspect.Css" Class="jbstudio_tree_in_window" /><Aspect t="uiaspect.ItemSelection" /><Operations t="field_dt.FieldOperations" /></Contents><Style t="bart_dt.InspectPopup" Padding="2px 0 0 5px"/><Feature t="dlg.UniquePopup" Identifier="jBart Inspect Tree" KeepPopupLocation="true" AutoClose="true"/><Feature t="dlg.AlwaysLTR" /><Feature t="dlg.ClearButtons" /><Feature t="dlg.CloseIcon" CssStyle="top:5px;right:5px" /><Feature t="dlg.DragDialog" /><Feature t="dlg.ButtonsHorizontal" Align="left" /><Feature t="dlg.DialogButtonsStyle"><Style t="button.JBartHyperlink" Color="black"/></Feature><Feature t="dlg.ButtonsHorizontal" Align="left" /><Feature t="dlg.DontCloseOtherPopupsOnOpen" /><Feature t="dlg.DialogClass" CssClass="aa_studio_tree jbstudio"/><Feature t="bart_dt.StudioPopupLocation" Popup="tree" /><Feature t="dlg.TopZIndexWhenTouching" /><Feature t="dlg.DialogButton"><Button t="dlg.Button" Text="Pages" Image="%$_Images%/studio/page1616.png"><OnClick t="bart_dt.OpenPagesDialog" /></Button></Feature></Action></xtml></Component><Component id="StudioPopupLocation" type="dlg.DialogFeature" hidden="true" execution="native" ><Param name="Padding"><Default value="5" /></Param><Param name="Popup" type="enum"><value>tree</value><value>properties</value><value>toolbox</value></Param></Component><Component id="StudioPropertiesLocation" type="dlg.DialogFeature" hidden="true" execution="native" ><Param name="Padding"><Default value="5" /></Param></Component><Component id="InpectBarDialogStyle" type="dialog_style.Style" hidden="true"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup aa_dialogcontents aa_dialog_title aa_click_dosent_close_popup&quot;/&gt;"      Css="#this { z-index:2100; padding: 0px 20px 4px 10px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 2px 2px #888;-webkit-box-shadow: 0 0 2px 2px#888;&#xa;box-shadow: 0 0 2px 2px #888;&#xa; background:#EEEEFC; border:none; &#xa; overflow-y: auto; overflow-x: hidden; &#xa;position:fixed !important; top: 2px; right: 2px; min-width: 300px;&#xa;} #this .aa_button_text { padding-top:0px; }"      Javascript="" Mode="dialog"><Feature t="dlg.DontCloseOtherPopupsOnOpen" /><Feature t="dlg.CloseIcon" CssStyle="top:2px; right:2px;" /><Feature t="dlg.UniquePopup" Identifier="inspect" /><Feature t="dlg.ZIndex" ZIndex="2100" /><Feature t="dlg.DragDialog" /></xtml></Component><Component id="EditDataResource" type="action.Action"><Param name="IsNew" type="data.Boolean" /><xtml t="dlg.OpenDialog"><Title t="data.IfThenElse" If="%$IsNew%" Then="New Data Resource" Else="Settings of Data Resource %@ResourceID%" /><Contents t="ui.Document"><Fields t="xtml_dt.ParamsAsFields" /></Contents><RunOnOK t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Feature t="dlg.Buttons"><Layout t="group.Horizontal" Spacing=""/><Buttons t="dlg.Custom" KeepOriginalButtons=""><Button t="dlg.Button" Text="Delete"><Style t="button.Hyperlink" /><OnClick t="dialog.AskForConfirmation" customxtml="true" Question="Are you sure?" Title="Delete Data Source"><RunOnOK t="action.RunActions"><Action t="xml.Delete" /><Action t="dlg.CloseDialog" /></RunOnOK></OnClick></Button><Button t="dlg.OKButton" Text="OK"/></Buttons></Feature></xtml></Component><Component id="ShowDataResource" type="action.Action"><Param name="DataResourceXtml" Default="%%"/><xtml t="dlg.OpenDialog" Title="Data Resource - %@ResourceID%"><Var name="Value" t="data.FirstSucceeding"><Item value="%$_BartContext/Resources[ID=\'{@ResourceID}\']/Xml%" /><Item value="%$_BartContext/Resources[ID=\'{@ResourceID}\']/Items%" /></Var><Var name="ResourceValue" t="data.WritableText"><DefaultValue t="xml.XmlToText" PrettyPrint="true" Data="%$Value%" /></Var><Contents t="xmlui.CodeMirrorTextarea" AutoFocus="true" Class="xmltextarea" Data="%$ResourceValue%" IdentifierToRecallLastSize="codemirror" Resizer="true"><Type t="data.IfThenElse" Then="xml" Else="js"><If t="yesno.IsXml" Data="%$Value%" /></Type><Height t="ui.ScreenSize" Axis="height" Margin="200" AsHtmlString="true" /><Width t="ui.ScreenSize" Axis="width" Margin="500" AsHtmlString="true" /></Contents><Feature t="dlg.Buttons"><Buttons t="dlg.Custom" KeepOriginalButtons="false"><Button t="dlg.Button" Text="Settings"><OnClick t="action.RunActions" Data="%$DataResourceXtml%"><Action t="operation.CloseDialog"/><Action t="bart_dt.EditDataResource" /></OnClick></Button><Button t="dlg.Button" Text="Save as Sample Data" Condition="%$DataResourceXtml/@t% == \'bart_resource.Xml\'"><OnClick t="action.RunActions"><Action t="xml.ReplaceXmlChildren" Parent="%$DataResourceXtml/Xml%" Children="%%"><Data t="xml.TextToXml" Data="%$ResourceValue%" /><Condition t="yesno.IsXml" /></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="operation.CloseDialog"/></OnClick></Button><Button t="dlg.Button" Text="Save as Sample Data"><Condition t="yesno.And" ><Item value="%@t% == \'jbart_resource.Data\'" /><Item t="yesno.OR"><Item value="%@ValueType% == \'xml\'"/><Item value="%@ValueType% == \'json\'" /></Item></Condition><OnClick t="action.RunActions"><Var name="_Status" t="object.Object" /><Action t="action.IfThenElse" If="%@ValueType% == \'xml\'"><Then t="action.IfThenElse"><Var name="ParsedXml" t="xml.TextToXml" Data="%$ResourceValue%" /><If t="yesno.NotEmpty" Value="%$ParsedXml%" /><Then t="bart_dt.SaveXmlValueToDataResource" Xtml="%$DataResourceXtml%" Xml="%$ParsedXml%" /><Else t="action.RunActions"><Action t="object.SetProperty" Object="%$_Status%" Property="Error" Value="true" /><Action t="uiaction.Alert" Text="Xml is not well formed" /></Else></Then><Else t="field_dt.WriteCDataAndFix" Element="%$DataResourceXtml/Value%" CDataText="%$ResourceValue%" /></Action><Action t="action.RunActions"><Condition t="yesno.Not" Of="%$_Status/Error%" /><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="operation.CloseDialog"/></Action></OnClick></Button><Button t="dlg.Button" Text="Close"><OnClick t="operation.CloseDialog"/></Button></Buttons></Feature></xtml></Component><Component id="DataSourceMiniEditor" type="field.Fields"><xtml t="field.Group" HideTitle="true"><Condition t="yesno.NotEmpty" Value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource[@ResourceID=\'Data\']/DataSource%" /><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><Field t="field.Group"><Layout t="uiaspect.Group"><Style t="group.Horizontal"/></Layout><Field t="field.Field" ID="Data" ><FieldData t="data.Pipeline"><Item value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource[@ResourceID=\'Data\']/DataSource%" /><Item value="%!@UrlToGetData%" /></FieldData><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" Class="data_source_link" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Data source link ..."/><FieldAspect t="field_aspect.HandleEvent" Event="update"><Action t="operation.RunXtmlAction"><Action t="jbart_wizards_dt.HandleDataSourceChange"><OnSuccess t="action.RunActions"><Action t="xml.WriteCData" Element="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource[@ResourceID=\'Data\']/Value%"><CDataText t="data.Pipeline"><Item value="%%" /><Item t="xml.XmlToText"/><Aggregator t="text.Concat" Separator="&#xa;"/></CDataText></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh" /></OnSuccess></Action></Action></FieldAspect></Field><Field t="field.JavaScriptControl" ID="Control" Title="Feedback Image"><Html><![CDATA[<img class=\'feedback_image\' />]]></Html><Css><![CDATA[#this {margin-right:20px; margin-left:10px; margin-top:5px; } ]]></Css></Field></Field><Field t="field.JavaScriptControl" Title="separator" ID="separator"><Html><![CDATA[<div class="data_source_link_separator"/>]]></Html></Field></xtml>​  </Component><Component id="InspectDataPopupContents" type="ui.Control"><xtml t="ui.ItemPage"><Var name="InspectObject" t="bart_dt.InspectSelectedObject"/><Field t="bart_dt.DataSourceMiniEditor"/><Field t="field.Button" Title="Data of Selected"><Image t="image.Image" Url="%$_Images%/studio/data1616.gif"/><Condition t="yesno.IsXml" Data="%$InspectObject/Data%"/><Style t="button.JBartHyperlink" Spacing="4px"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="xmlui.ShowXmlDialog" Xml="%$InspectObject/Data%" Title="Data of Selected Field - %$InspectObject/Field/Title%"/></Field><Field t="field.XmlMultipleGroup" Title="Data Resources"><Items t="field.CustomItems"><Items t="data.Pipeline"><Item value="%$_BartContext/AppXtml/Resources/Resource%"/><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty" Value="%@ResourceID%"/></Item></Items></Items><Aspect t="uiaspect.ReadOnly"/><Aspect t="uiaspect.ItemClickable"><ClickAction t="bart_dt.ShowDataResource"/></Aspect><FieldAspect t="field_aspect.HideTitle"/><Presentation t="uiaspect.ItemList"><Style t="itemlist.VerticalItems"/></Presentation><Field t="field.Group" HideTitle="true" ID="group" Title="group"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="5px"/></Layout><GroupData t="group.DataFlow" FlowData="%%"/><Operations t="operation.Operations"/><Field t="field.Image1" Title="Resource" ID="Resource" ID__Manual="" ShowTitle="" Image="%$_Images%/studio/data1616.gif"/><Field t="field.Text" ID="text" Title="Name" Text="%@ResourceID%"><FieldAspect t="field_aspect.Css" Inline="color:black; padding-top:2px; display:block; "/></Field></Field><FieldAspect t="field_aspect.GlobalCss" GlobalCss="#this .aa_item:hover { text-decoration:  underline; cursor:pointer; }"/></Field><Field t="field.Button" Title="Add Data Resource"><Image t="image.Image" Url="%$_Images%/add1616.png"/><Style t="button.JBartHyperlink" Color="grey"/><Action t="action.RunActions"><Var name="NewDataResource" t="xml.Xml"><Resource t="jbart_resource.Data"><Value><![CDATA[<xml/>]]></Value></Resource></Var><Action t="dlg.CloseDialog"/><Action t="xml.AddXmlChildren" Parent="%$_BartContext/AppXtml/Resources%" Children="%$NewDataResource%" CloneChildren="false"><DoOnAddedChildren t="action.RunActions"><Action t="bart_dt.EditDataResource" IsNew="true"/></DoOnAddedChildren></Action></Action></Field></xtml></Component><Component id="OpenPropertiesWindow" type="action.Action" execution="native"><NativeHelper name="Open" t="bart_dt.EditXtmlInDialog"><Data t="data.Pipeline"><Item t="bart_dt.InspectSelectedObject" /><Item value="%Xtml%" /></Data></NativeHelper></Component><Component id="PropertiesWindowClosed" type="action.Action" execution="native" /><Component id="InspectSelectedObject" type="data.Data" execution="native" /><Component id="CleanInspectSelectedObject" type="action.Action" execution="native" /><Component id="Credit" type="field.Fields"><Param name="DisplayName" /><Param name="Url" /><Param name="Images" /><xtml t="field.Text"><Text t="data.Pipeline"><Var name="FirstImage" t="text.Split" Separator="," Part="First" Text="%$Images%" /><Var name="Image" t="text.FirstSucceeding"><Item value="%$_Images%/%$FirstImage%" Condition="%$FirstImage% != \'\'" /><Item value="%$_Images%/studio/blackboard.png" /></Var><Item><![CDATA[<div><img width="16px" height="16px" style="vertical-align: bottom;padding-right:5px;" src="%$Image%" /><a href="%$Url%" target="new">%$DisplayName%</a></div>]]></Item></Text></xtml></Component><Component id="InspectBarRepositoryPopupContents" type="ui.Control"><xtml t="ui.ItemPage"><Var name="_FromStudio" value="true"/><Var name="InspectObject" t="bart_dt.InspectSelectedObject"/><Field t="field.Button" Title="Sample Widgets"><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/studio/gallery2.png"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="GoToSamplesPage"/></Action></Field><Field t="field.Button" Title="Create a New Widget"><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/add1616.gif"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="GoToCreateNewProject"/></Action></Field><Field t="field.Button" ID="Button" Title="Upload prototypes and samples"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/upload.png"/><Condition t="yesno.Not"><Of t="yesno.NotInLocalHost"/></Condition><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="action.RunActionOnItems"><Items t="data.List"><Item t="data.Pipeline"><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.projectPrototypeHeaders;&#xa;}"/><Item value="%*%"/></Item><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.promotedProjectHeaders;&#xa;}"/><Item value="%@id%"/></Items><Action t="action.RunActions"><Action t="jbart_studio.ShowStudioProgressIndication" Text="Uploading %@name%"/></Action></Action><Action t="action_async.RunAsyncActions"><Action t="action_async.RunActionOnItems"><Items t="data.List"><Item t="data.Pipeline"><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.projectPrototypeHeaders;&#xa;}"/><Item value="%*%"/></Item><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.promotedProjectHeaders;&#xa;}"/><Item value="%@id%"/></Items><Action t="action_async.RunActions"><Action t="jbart_studio.ShowStudioProgressIndication" Text="Uploading %@name%"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="UploadProject" Input="%@id%"/></Action></Action><Action t="jbart_studio.ShowStudioProgressIndication"/></Action></Action></Action></Field><Field t="field.Button" Title="Search Projects..."><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/search.gif"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="action_async.RunAsyncActions"><Action t="jbart_studio.ShowStudioProgressIndication" Text="Loading Projects" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="EnsureProjectsLoaded"/><Action t="jbart_studio.ShowStudioProgressIndication" Text="" /><Action t="dlg.OpenDialog" Title="Search a Project" NoCancel=""><Contents t="bart_dt.SearchMoreProjects"/><Style t="dialog_style.DefaultDialog"/><Feature t="dlg.Buttons"><Buttons t="dlg.Close"/></Feature></Action></Action></Field><Field t="field.Control" ID="Control" Title="Separator" HideTitle="true"><Control t="field_control.CustomControl"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { height: 1px; margin: 5px 0px; background-color: #E5E5E5; border-bottom: 1px solid white;]]></Css></Control></Field><Field t="field.Button" Title="My Widgets"><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/studio/favorites.png"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="GoToMyProjects"/></Action></Field><Field t="data.Pipeline"><Item t="data.Pipeline"><Item t="data.List"><Item1 t="object.RunMethod" Object="%$_JBartStudio%" Method="MyProjects"/><Item t="object.RunMethod" Object="%$_JBartStudio%" Method="RecentProjects"/></Item><Item value="%project[@_type=\'{$_JBartStudio/ContentType}\']%"/><Aggregator t="data.Subset" From="1" Count="7"/></Item><Item t="bart_dt.MyProjectButton" Header="%%"/></Field><Operations t="operation.Operations"/></xtml></Component><Component id="InspectBarMorePopupContents" type="ui.Control"><xtml t="ui.ItemPage"><Var name="_FromStudio" value="true"/><Var name="InspectObject" t="bart_dt.InspectSelectedObject"/><Field t="field.Button" Title="Project Properties..."><Image t="image.Image" Url="%$_Images%/studio/project.png" KeepImageProportions="true" AsDivBackground="" Size="16,16"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="bart_dt.EditXtmlInStudioBar" Xtml="%$_BartContext/AppXtml%"/></Action></Field><Field t="field.Button" Title="Convert To New Pages"><Image t="image.Image" Url="%$_Images%/studio/loop.gif" KeepImageProportions="true" AsDivBackground="" Size="16,16"/><Style t="button.Hyperlink"/><Condition t="yesno.NotEmpty" Value="%$_BartContext/AppXtml/Pages/Page/@ID%" /><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="bart_dt.ConvertToNewPages" /></Action></Field><Field t="field.Button" Title="Widget Source (Xml)"><Image t="image.Image" Url="%$_Images%/studio/xml4.gif" KeepImageProportions="true" AsDivBackground="" Size="16,16"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="xmlui.ShowXmlDialog" Title="Xtml Source of %$_WidgetXml/@name%" AutoWrite="true" AutoWriteAllowTagChange="" Xml="%$_WidgetXml%"><Var name="Xtml" value="%$InspectObject/Xtml%"/><Var name="Name" t="text.FirstSucceeding"><Item value="%$Xtml/@Title%"/><Item value="%$Xtml/@ID%"/></Var><OnUpdate t="action.RunActions"><Action t="bart_dt.RefreshDtPopups"/><Action t="field_dt.RefreshPreview"/></OnUpdate></Action></Field><Field t="field.Button" Title="Show Logs and Traces (ctrl ~)"><Image t="image.Image" Url="%$_Images%/studio/track.jpg" KeepImageProportions="true" AsDivBackground="" Size="16,16"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="debugui.OpenDebugUi"/></Field><Field t="field.Button" Title="Strong Refresh"><Image t="image.Image" Url="%$_Images%/refresh.gif"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/></Field><Field t="field.Button" Title="View ..."><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/mobile.png" Size="16,16"/><Action t="dlg.OpenDialog" Title="Set mobile view"><Style1 t="dialog_style.HoverPopup"/><Contents t="ui.Document"><Presentation1 t="uiaspect.Horizontal" HideInnerTitles="true" Spacing="10px" EnforceSpacing="true" AlighLastToRight="false" FullWidth="false"/><Fields t="field.Fields"><Field t="field.Button" Title="Phone Portrait"><Image t="image.Image" Url="%$_Images%/studio/mobile.png"/><Style t="button.JBartHyperlink" Spacing="0"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$GalleryNode/!@view%" Value="mobile"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="dlg.CloseDialog"/></Action></Field><Field t="field.Button" Title="Phone Landscape"><Image t="image.Image" Url="%$_Images%/studio/mobile_rotated.png"/><Style t="button.JBartHyperlink" Spacing="0"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$GalleryNode/!@view%" Value="mobile_landscape"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="dlg.CloseDialog"/></Action></Field><Field t="field.Button" Title="Facebook"><Image t="image.Image" Url="%$_Images%/studio/facebook_logo.png"/><Style t="button.JBartHyperlink" Spacing="0"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$GalleryNode/!@view%" Value="facebook"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="dlg.CloseDialog"/></Action></Field><Field t="field.Button" Title="Facebook (no header)"><Image t="image.Image" Url="%$_Images%/studio/facebook_logo.png"/><Style t="button.JBartHyperlink" Spacing="0"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$GalleryNode/!@view%" Value="facebook_no_header"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="dlg.CloseDialog"/></Action></Field><Field t="field.Button" Title="Normal View"><Image t="image.Image" Url="%$_Images%/studio/desktop_monitor.png"/><Style t="button.JBartHyperlink" Spacing="0"/><FieldAspect t="field_aspect.Css" Inline="color: black;"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$GalleryNode/!@view%" Value=""/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="dlg.CloseDialog"/></Action></Field></Fields></Contents></Action></Field><Field t="field.Button" Title="Automatic Tests"><Var name="SelectedObject" t="bart_dt.InspectSelectedObject"/><Image t="image.Image" Url="%$_Images%/studio/task1616.gif" Size="16,16"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="bart_dt.ActionFromPopupMenu"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ToTestsMode"/></Action></Field><Field t="field.Button" Title="Import a Page"><Image t="image.Image" Url="%$_Images%/studio/star1616.gif" Size="16,16"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="bart_dt.ActionFromPopupMenu"><Action t="bart_dt.ImportPage"/></Action></Field><Field t="field.Button" Title="Pages ..."><Image t="image.Image" Url="%$_Images%/studio/page1616.png"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="bart_dt.OpenPagesDialog" FromTopMenu="true"/></Field><Field t="field.Button" Title="Credits"><Image t="image.Image" Url="%$_Images%/studio/blackboard.png" Size="16,16"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="dlg.OpenDialog" Title="Credits" NoCancel=""><Contents t="bart_dt.Credits"/><Style t="dialog_style.DefaultDialog"/><Feature t="dlg.Buttons"><Layout t="group.Horizontal"/><Buttons t="dlg.Close"/></Feature></Action></Action></Field><Field t="field.Button" Title="Delete Current Project"><Condition t="yesno.NotEmpty" Value="%$_JBartStudio/Project/@id%"/><Image t="image.Image" Url="%$_Images%/delete1616.gif" Size="16,16"/><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="dialog.AskForConfirmation" Title="Delete Project %$_WidgetXml/@name%" Question="Are you sure?"><RunOnOK t="object.RunMethod" Object="%$_JBartStudio%" Method="DeleteProject"/></Action></Action></Field><Operations t="operation.Operations"/></xtml></Component><Component id="SwitchPage" type="action.Action"><Param name="PageXtml" Default="%%" /><xtml t="action.RunActions" Data="%$PageXtml%"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?wpage=%@ID%" /></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh" /><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%%" /><Action t="bart_dt.ShowSelectedObjectElements" /><Action t="bart_dt.OpenTreePopup" Xtml="%%" /><Action t="bart_dt.OpenPropertiesWindow" /></xtml></Component><Component id="OpenPagesDialog" type="action.Action"><Param name="FromTopMenu" type="data.Boolean" /><xtml t="dlg.OpenDialog" NoCancel=""><Style t="dialog_style.DefaultPopup"/><Contents t="bart_dt.PagesTable" ><GoToPageAction t="bart_dt.SwitchPage" /></Contents><Feature t="bart_dt.PagesPopupLocation" Condition="%$FromTopMenu%"/><Feature t="dlg.ScreenCover" Opacity="0.3"/></xtml></Component><Component id="SearchMoreProjects" type="ui.Control"><xtml t="ui.Document"><Field t="field.SearchBox" ID="item" Title="Search Other Projects" Items="%$_JBartStudio/Projects/*%" ItemTitle="%@name%" ItemImage="%@image%" DefaultImage="http://t3.gstatic.com/images?q=tbn:ANd9GcRXiOa3CIHeX6sJn0tazrYJp38kvpAE03l2wjH-G00cNyCJgvpv" ItemLink="%@id%" PoweredByJBart="false" SearchIn="title and extra text" ItemExtraText="%@type%   %@description% ( %@id% )"><DoOnSelect t="action.RunActions"><Action t="dlg.CloseDialog" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="EditProject" /></DoOnSelect><FieldAspect t="field_aspect.Css" OnElement="content" Inline="font-size:14px;&#xa;-webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; width:200px&#xa;"/><FieldAspect t="field_aspect.PopupPage1"><Page t="uiaspect.SearchLayout" ImageSize="70,50" TextMaxLength="50"/></FieldAspect></Field>​              </xtml></Component><Component id="PagesPopupLocation" type="dlg.Feature" light="false" execution="native" /><Component id="ActionFromPopupMenu" type="action.Action"><Param name="Action" type="action.Action[]" script="true"/><xtml t="action.RunActions"><Action t="dlg.CloseDialog" /><Action t="xtml.UseParamArray" Param="Action" /></xtml></Component><Component id="ListenToAltC" type="field.FieldAspect" execution="native" /><Component id="StudioBar" type="field.Fields"><xtml t="field.Group" ID="group1" HideTitle="true" Title=""><Var name="_FromStudio" value="true" /><FieldAspect t="bart_dt.ListenToAltC"/><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><Field t="field.Group" ID="group" Title="group" HideTitle="true" gradientDir="0" gradientType="linear"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><GroupData t="group.DataFlow" FlowData="%%"/><Operations t="operation.Operations"/><Field t="field.Image" HideTitle="true" ID="Jbart_Logo" Title="Logo"><Image t="image.Image" Url="%$_Images%/studio/jbartlogo.png" KeepImageProportions="true" AsDivBackground="" Size=",45"/><Style t="image.PlainImage"/><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="margin: 8px 0 -8px 10px;"/></Field><Field t="field.Button" Title="Select"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/select.png"/><Action t="bart_dt.Inspect"/></Field><Field t="field.Button" Title="Save"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/save3_2424.png"/><Action t="action.RunActions"><Action t="object.RunMethod" Method="Save"><Object t="xtml_dt_tree.SaveManager"/></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="Save"/></Action></Field><Field1 t="field.Button" Title="Properties"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/properties2_24.png"/><Action t="bart_dt.OpenPropertiesWindow"/></Field1><Field t="field.Button" Title="Outline"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/tree2_24.png"/><Action t="bart_dt.OpenTreePopup" Xtml="%$InspectSelectedObject/Xtml%"><Var name="InspectSelectedObject" t="bart_dt.InspectSelectedObject"/></Action></Field><Field t="field.Button" Title="Edit"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/config_24.png"/><Var name="ShownPage" t="text.FirstSucceeding"><Item t="ui.UrlFragment" Attribute="wpage"/><Item value="main"/></Var><Var name="PageXtml" value="%$_BartContext/AppXtml/../../Component[@id=\'{$ShownPage}\']/xtml%"/><Condition t="yesno.NotEmpty"><Value t="data.List"><Item t="xml.FindXmlByAttribute" Attribute="t" Value="field_dt.InfoForSimpleEdit" ParentXml="%$PageXtml%"/><Item value="%$_BartContext/AppXtml/Resources/Resource/@_feed%"/></Value></Condition><Action t="bart_dt.EditXtmlInDialog"><Data t="data.Empty" /></Action></Field><Field value="%$_BartDevDtContext/Studio/ExtraBarButtons%"/><Field t="field.Button" Title="Data  &#9662;"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/data_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Feature t="dlg.ArrowToLaunchingElement"/><Contents t="bart_dt.InspectDataPopupContents"/></FieldAspect></Field><Field t="field.Button" Title="Refresh"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/refresh_24.png"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%"><Method t="data.IfThenElse" If="%$_DomEvent/ctrlKey%" Then="StrongRefresh" Else="Refresh" /></Action></Field><Field t="field.Button" Title="Advanced"><Condition t="yesno.IsEmpty" Value="%$_JBartStudio%"/><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/customize_24.png"/><Action t="action.RunActions"><Action t="dlg.CloseAllDialogs"/><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ToCustomizeMode"/></Action></Field><Field t="field.Button" Title="Embed"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/internet_24.png"/><Action t="operation.RunXtmlAction"><Var name="GalleryNode" value="%$CurrentNode%"/><Action t="bart_dt.EmbedXtmlItem" customxtml="true"/></Action></Field><Field t="field.Button" Title="Repository &#9662;" ID="toolbar_repository_button"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/docs_24.png"/><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Feature t="dlg.ArrowToLaunchingElement"/><Contents t="bart_dt.InspectBarRepositoryPopupContents"/></FieldAspect></Field><Field t="field.Button" Title="More &#9662;" ID="toolbar_more_button"><Style t="button.StudioBarButton"/><Image t="image.Image" Url="%$_Images%/studio/more_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Feature t="dlg.ArrowToLaunchingElement"/><Contents t="bart_dt.InspectBarMorePopupContents"/></FieldAspect></Field><Field t="field.Button" Title="Exit Full Screen"><Condition t="yesno.IsEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/studio/leave-fullscreen.png"/><Style t="button.StudioBarButton"/><FieldAspect t="field_aspect.HideByCondition"><ShowCondition t="bartgallery.IsFullScreen"/></FieldAspect><FieldAspect t="field_aspect.Css" Inline="width: 73px;"/><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?fullscreen="/></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="GalleryRefresh"/></Action></Field><Field t="field.Button" Title="Full Screen"><Condition t="yesno.IsEmpty" Value="%$_JBartStudio%"/><Image t="image.Image" Url="%$_Images%/studio/fullscreen_24.png"/><Style t="button.StudioBarButton"/><FieldAspect t="field_aspect.HideByCondition"><ShowCondition t="bartgallery.NotFullScreen"/></FieldAspect><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?fullscreen=true"/></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="GalleryRefresh"/></Action></Action></Field><Field t="field.Field" FieldData="%!$_WidgetXml/@name%"><FieldAspect t="field_aspect.Css" Class="studio_bar_widget_name"/><FieldAspect t="field_aspect.CellPresentation" Content="expandable text"/></Field><Field t="field.Button" ID="jbart_studio_user" Title=""><Condition t="yesno.NotEmpty" Value="%$_JBartStudio%"/><ButtonText t="text.FirstSucceeding"><Item value="%$_JBartStudio/User%"/><Item value="Login"/></ButtonText><Image1 t="image.Image" Size="24,24"><Url t="text.FirstSuccedding"><Item value="%$_JBartStudio/UserInfo/@photo%"/></Url></Image1><Style t="button.JBartHyperlink" Color="white"/><FieldAspect t="field_aspect.Css" Class="studio_bar_user"/><Action t="action.IfThenElse" If="%$_JBartStudio/User% == \'\'"><Then t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowLoginDialog"/><Else t="operation.OpenDialog"><Style t="dialog_style.DefaultPopup"/><Feature t="dlg.ArrowToLaunchingElement"><ArrowImage t="image.Image" Url="%$_Images%/arrow.png"/></Feature><Contents t="ui.ItemPage"><Presentation t="uiaspect.PropertySheet"/><Field t="field.Button" Title="Edit user settings"><Style t="button.Hyperlink"/><Image t="image.Image" Size="16,16"><Url t="text.FirstSucceeding"><Item value="%$_JBartStudio/UserInfo/@photo%"/><Item value="%$_Images%/studio/user.png"/></Url></Image><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowUserInfo"/></Action></Field><Field t="field.Button" Title="Logout"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/logout.png"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="SignOut"/></Action></Field></Contents></Else></Action></Field><Field t="field.Button" ID="shown page warning"><Style t="button.Hyperlink"/><Var name="ShownPage" t="ui.UrlFragment" Attribute="wpage"/><Condition t="yesno.NotEmpty" Value="%$ShownPage%"/><Title value="Current view shows page \'%$ShownPage%\'. Click to return to main page"><Var name="ShownPage" t="ui.UrlFragment" Attribute="wpage"/></Title><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?wpage="/></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="bart_dt.CleanInspectSelectedObject"/><Action t="bart_dt.ShowSelectedObjectElements"/><Action t="bart_dt.OpenTreePopup" Xtml="%$InspectSelectedObject/Xtml%"><Var name="InspectSelectedObject" t="bart_dt.InspectSelectedObject"/></Action><Action t="bart_dt.OpenPropertiesWindow"/></Action><FieldAspect t="field_aspect.Css" Class="studio_bar_page_warning"/></Field><Field t="field.JavaScriptControl" ID="save_notification" Html="&lt;div style=&quot;position: absolute; display:none; right: 50px; top: 10px; background: #98AFC7; border-radius: 10px; padding: 4px 20px;color: white; font-weight: bold;&quot; class=&quot;save_notification bart_dblog&quot; &gt;"/><Field t="field.Control"><Control t="notification_box.NotificationBox" ID="jbart_studio_notification"/><FieldAspect t="field_aspect.Css" OnElement="cell" Class="jbartStudio_notification"/></Field><FieldAspect t="field_aspect.Css" Class="jbartStudio_topbar" OnElement="content"/><FieldAspect t="field_aspect.Css" Class="jbstudio_dlg" OnElement="content"/><FieldAspect t="field_aspect.Css" Class="aa_click_dosent_close_popup"/><FieldAspect t="field_aspect.BorderAndShadow" Inline="color:black;border-radius: 0;box-shadow:  0 1px 2px 0 grey;"/></Field><Operations t="operation.Operations"/></xtml></Component><Component id="ShowStudioBar" type="action.Action"><Param name="Show" type="data.Boolean" Default="true" /><xtml t="action.RunActions"><Action t="bart_dt.CleanInspectSelectedObject" /><Action t="operation.OpenDialog" Condition="%$Show%"><Style t="bart_dt.InpectBarDialogStyle" /><Contents t="ui.ItemPage"><Field t="bart_dt.StudioBar" /></Contents></Action></xtml></Component><Component id="RefreshDtPopups" type="action.Action"><xtml t="action.RunActions"><Var name="Xtml" t="data.Pipeline"><Item t="bart_dt.InspectSelectedObject" /><Item value="%Xtml%" /></Var><Action t="bart_dt.OpenTreePopup" Xtml="%$Xtml%"/><Action t="bart_dt.OpenPropertiesWindow"/></xtml></Component><Component id="MyProjectButton" type="field.Field"><Param name="Header" Default="%%" /><xtml t="field.Button" Title="%$Header/@name%"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/ball1616.gif"/><Action t="action.RunActions"><Action t="dlg.CloseDialog" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="EditProject" Data="%$Header/@id%"/></Action></xtml></Component><Component id="PathToXtml" type="data.Data" execution="native"><Param name="FieldPath"/></Component><Component id="XtmlToPath" type="data.Data" execution="native"><Param name="Xtml"/></Component><Component id="RestorePopupsState" type="action.Action" execution="native"><NativeHelper name="OpenPropertiesWindow" t="action.RunActions"><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%%" /><Action t="bart_dt.OpenPropertiesWindow" /></NativeHelper></Component><Component id="SimpleEditPageContents" type="ui.Control"><xtml t="field.ShowFieldControl" Data=""><Var name="Page" t="text.FirstSucceeding"><Item t="ui.UrlFragment" Attribute="wpage"/><Item value="main"/></Var><Var name="PageXtml" t="data.FirstSucceeding"><Item value="%$_BartContext/AppXtml/../../Component[@id=\'{$Page}\']/xtml%"/><Item value="%$_BartContext/AppXtml/Pages/Page[@ID=\'{$Page}\']%"/></Var><Field t="field.PropertySheet"><Var name="ResourceWithFeed" value="%$_BartContext/AppXtml/Resources/Resource/@_feed/..%" /><Field t="bart_dt.EditFeed" ResourceXtml="%$ResourceWithFeed%"><Condition t="yesno.NotEmpty" Value="%$ResourceWithFeed%" /></Field><Field t="data.Pipeline"><Item t="xml.FindXmlByAttribute" FindAll="true" Attribute="t" Value="field_dt.InfoForSimpleEdit" ParentXml="%$PageXtml%" /><Item t="bart_dt.FieldWithContainingFieldData" FieldXtml="%Field%" FieldData="%..%"/></Field><Field value="%$_BartDevDtContext/Studio/SimplePropertiesFields%" /></Field></xtml></Component><Component id="FieldWithContainingFieldData" type="field.Fields" light="false" execution="native" dtsupport="false"><Param name="FieldXtml" /><Param name="FieldData" /></Component><Component id="EditFeed" type="field.Fields" light="false" dtsupport="false"><Param name="ResourceXtml"/><xtml t="field.Fields"><Field t="field.Text" ID="Text" Title="Widget Data" HideTitle="false" Text="%$ResourceXtml/@_feed%"><Style t="uitext.PlainText"/><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this>div { color:#536878; padding: 3px 0 0 0; }]]></GlobalCss></FieldAspect></Field><Field t="field.Button" ID="Button" Title="Change Widget Data"><Style t="button.PrimaryButton"/><Action t="operation.OpenDialog" Title="Set Widget Data"><Var name="_DialogData" t="xml.Xml" DynamicContent="true"><xml name="%$ResourceXtml/@_feed%" feed="%$ResourceXtml/@_feedSource%" xml=""/></Var><DialogData value="%$_DialogData%"/><Style t="dialog_style.DefaultDialog"/><RunOnOK t="action.RunActions"><Action t="action.WriteValue" To="%$ResourceXtml/!@_feed%" Value="%$_DialogData/@name%"/><Action t="action.WriteValue" To="%$ResourceXtml/!@_feedSource%" Value="%$_DialogData/@feed%"/><Action t="xml.DeleteChildren" ParentElement="%$ResourceXtml/Xml%"/><Action t="xml.AddXmlChildren" Parent="%$ResourceXtml/Xml%" ><Children t="xml.TextToXml" Data="%$_DialogData/@xml%"/></Action><Action t="bart_api.RefreshResources"/></RunOnOK><Contents t="ui.ItemPage"><Field t="field.Field" FieldData="%$_DialogData/@name%" ID="name" Title="Name"/><Field t="field.Field" FieldData="%$_DialogData/@feed%" ID="feed" Title="Source DB"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="url for xml data (e.g rss)"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="width:592px"/><FieldAspect t="field_aspect.Resizer" Disable="true"/><FieldAspect t="field_aspect.Toolbar"><Operations t="operation.Operations"><Operation t="operation.Operation" Icon="%$_Images%/natgeo.gif" Title="Data From National Geographics"><Action t="uiaction.SetText" Text="http://feeds.nationalgeographic.com/ng/photography/photo-of-the-day" RunOn=".fld_feed"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/ebay.gif" Title="Data Drom eBay"><Action t="uiaction.SetText" Text="" RunOn=".fld_feed"/></Operation></Operations></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Condition t="yesno.NotEmpty" Value="%%"/><Action t="action.WriteValue" To="%../@xml%" Value="loading..."/><Action t="field.RefreshField" FieldID="xml" Scope="screen"/><Action t="action_async.RunAsync"><Action t="action_async.ActionOnAsyncData"><Query t="data_async.UrlGet" Url="%%" ResultType="text" TunnelRequest="true"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$_DialogData/@xml%"><Value t="data.Pipeline"><Item t="data.CleanNS"/><Item t="data.IfThenElse" Else="%%"><If t="text.StartsWith" Data="%$_DialogData/@feed%" With="http://shop.ebay.com/"/><Then t="jbart_wizards_dt.eBayClean" Xml="%%"/></Item><Item t="xml.XmlToText" PrettyPrint="true"/></Value></Action><Action t="xtml.UseParam" Param="DoAfterEnteringXml" Input="%$_DialogData%"/><Action t="jbart_wizards_dt.GuessPaths" Data="%$_DialogData%"/><Action t="field.RefreshField" FieldID="xml" Scope="screen"/><Action t="field.RefreshField" FieldID="embed_btn" Scope="screen"/><Action t="field.RefreshField" FieldID="embed_txt" Scope="screen"/><Action t="field.RefreshField" FieldID="wizard_specific" Scope="screen"/></Action></Action></Action></Action></Action></FieldAspect></Field><Field t="field.CustomControl" ID="feeds" ShowTitle="" Title=""><Control t="ui.ItemList" DataHolderCntr=""><Items t="data_items.Items"><Items t="jbart_wizards_dt.PopularFeeds"/></Items><Presentation t="uiaspect.Tiles" ImageSize="50,50" TileExtraSize="35,40" ImageOrVideo="%@image%" Title="%@title%"><Action t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%@action%"/><Then t="uiaction.SetText" RunOn=".fld_feed" Text="%@feed%"/><Else t="xtml.RunXtmlByComponentId" ComponentID="%@action%"/></Action></Presentation></Control><FieldAspect t="field_aspect.Css" OnElement="content" Inline="padding-left:80px"/></Field><Field t="field.Field" FieldData="%$_DialogData/@xml%" ID="xml" Title="Xml/JSON/CSV"><Type t="field_aspect.MultiLineText" Rows="10"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="word-space:nowrap; font-size:11px;width:592px;"/><FieldAspect t="field_aspect.Description" Description="Sample xml of potential results"/><FieldAspect t="field_aspect.DefaultValue" Value="&lt;items&gt;&#xa;  &lt;item image=&quot;...&quot; title=&quot;Spain&quot; more=&quot;spain, europe&quot; /&gt;&#xa;  &lt;item image=&quot;...&quot; title=&quot;Brazil&quot; more=&quot;brazil, america&quot; /&gt;&#xa;&lt;/items&gt;"/></Field><Field t="field_dt.CleanNSButton" XmlFieldPath="@xml" XmlFieldID="xml" Title="clean namespace"/></Contents></Action><FieldAspect t="field_aspect.Css" Inline="padding-bottom: 20px;" OnElement="cell"/></Field></xtml></Component><Component id="OpenToolbox" type="action.Action"><Param name="ParentXtml" /><xtml t="dlg.OpenDialog" Title="Add"><Var name="_XtmlEditorContext" t="object.Object"><Method name="RefreshPreview" t="action.RunActions"><Action t="bart_dt.RefreshSelectedObject" /><Action t="object.RunMethod" Method="MarkAsModified" Input="%$_ParentXtml%"><Object t="xtml_dt_tree.SaveManager" /></Action></Method></Var><Contents t="bart_dt.ToolBoxPageContents" /><Style t="bart_dt.InspectPopup" Padding="1px 3px 3px 6px"/><Feature t="dlg.UniquePopup" Identifier="jBart Toolbox" AutoClose="true" KeepPopupLocation="true"><Condition t="yesno.Not" Of="%$_DomEvent/ctrlKey%" /></Feature><Feature t="dlg.AlwaysLTR"/><Feature t="bart_dt.StudioPopupLocation" Popup1="toolbox" Popup="properties" /><Feature t="dlg.TopZIndexWhenTouching" /><Feature t="dlg.CloseIcon" CssStyle="top:5px;right:5px"/><Feature t="dlg.DragDialog"/><Feature t="dlg.Size" MaxSize="80px,80%" Size="80px,70%"/><Feature t="dlg.Resizer" /><Feature t="dlg.DialogClass" CssClass="aa_click_dosent_close_popup jbstudio"/><Feature t="dlg.DontCloseOtherPopupsOnOpen"/></xtml></Component><Component id="ToolboxButton" type="field.Fields"><Param name="Title" /><Param name="Image" /><Param name="Action" type="action.Action" script="true"/><xtml t="field.Button" Title="%$Title%" Tooltip="%$Title%"><Image t="image.Image" Url="%$Image%"/><Style t="button.ImageOnly"/><Action t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="ToolBoxPageContents" type="field.Fields"><Param name="ParentXtml" Default="%%"/><xtml t="field.ShowFieldControl"><Field t="field.Layout" ID="studio_toolbox_layout"><Layout t="layout.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[#this { width: 100\\%; }#this>.field { float:left; padding: 3px 3px 3px 3px;   border: 1px solid #fff;   opacity: 0.5;}#this>.field:hover { opacity:1; border: 1px solid #eee; }]]></Css><Javascript><![CDATA[function(group) {    group.addFields(\'.field\',function(field) { field.setControl(\'.field\'); });}]]></Javascript></Layout><Field t="bart_dt.ToolboxButton" Image="%$_Images%/studio/more_32.png" Title="Add Textbox"><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix=""><FieldXtml t="xml.Xml"><Field t="field.Field" FieldData=""><Type t="field_type.Text" /></Field></FieldXtml></Action></Field><Field t="bart_dt.ToolboxButton" Image="%$_Images%/studio/text_big.png" Title="Add Text"><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Text"><FieldXtml t="xml.Xml"><Field t="field.Text"/></FieldXtml></Action></Field><Field t="bart_dt.ToolboxButton" Image="%$_Images%/studio/button_big.png" Title="Add Button"><Action t="field_dt.FastAddFieldByPT" ParentXtml="%$ParentXtml%" Component="field.Button" IDPrefix="Button"/></Field><Field t="bart_dt.ToolboxButton" Image="%$_Images%/studio/image_32.png" Title="Add Image"><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Image"><FieldXtml t="xml.Xml"><Field t="field.Image" HideTitle="true"><Image t="image.Image"/></Field></FieldXtml></Action></Field><Field t="bart_dt.ToolboxButton" Image="%$_Images%/studio/propertysheet_32.png" Title="Add Property Sheet"><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="PropertySheet"><FieldXtml t="xml.Xml"><Field t="field.PropertySheet"/></FieldXtml></Action></Field></Field><Field t="field.PropertySheet" ID="PropertySheet" Title="PropertySheet"><Style t="group.PropertySheet"/><Operations t="operation.Operations"/><Field t="field.Image" HideTitle="true" ID="Image" Title="Image"><Image t="image.Image"/><Style t="image.PlainImage"/></Field></Field></xtml></Component></xtml><xtml ns="bart_dt"><Component id="EditXtmlTests" type="ui.Control"><Param name="IsGallery" type="data.Boolean"><Default value="true"/></Param><xtml t="ui.ItemList"><Var name="_ActionToAddDesignTimeFlag" t="jbart_studio.ToggleDesignTimeClass" DesignTime="true" /><Items t="xml.XmlItems" Tag="Test"/><Presentation t="uiaspect.RichTable" Sort="false" ColumnsResizer="false" DragAndDropColumns="false"/><Aspect t="uiaspect.DefaultFeatures" ItemSelection="true"/><Aspect t="uiaspect.ItemDetails"><NewItemPage t="ui.ItemPage" FieldsFromList="Name"/></Aspect><Fields t="field.Fields"><Field t="field.CustomControl" ID="test" Title="Test" ShowTitle="true"><Control t="ui_async.Control"><Var name="_TestPassed" t="data.WritableText"/><Var name="_WidgetXml" t="data.Duplicate" Data="%../..%" /><Var name="_TestDB" t="data.Duplicate" Condition="%@t% != \'bart_usage.JBartUsage\'" ><Data t="data.IfThenElse" If="%$IsGallery%" Then="%../../bart_dev/db%" Else="%../../db%" /></Var><ControlForLoading t="ui.Image" Source="%$_Images%/running_animated.gif"/><AsyncAction t="action_async.ActionOnAsyncData"><Query t="data_async.AsyncDataOnNextTimer"><Query t="xtml.RunXtml" Xtml="%%"/></Query><Action t="action.WriteValue" To="%$_TestPassed%"><Value t="yesno.IsEmpty" Value="%%"/></Action></AsyncAction><Control t="ui.Image"><Source t="data.IfThenElse" If="%$_TestPassed%" Then="%$_Images%/studio/yes.gif" Else="%$_Images%/studio/error.gif"/></Control></Control></Field><Field t="field.XmlField" Path="@Name"/><Field t="field.CustomControl" Title="Definition" ID="properties"><Control t="ui.Document"><Var name="_ItemDB" t="data.IfThenElse" If="%$IsGallery%" Then="%../../bart_dev/db%" Else="%../../db%"/><Fields t="field.Fields"><Field t="field.Text1" Text="You should run this page with jbart=false"><Condition t="yesno.ItemsEqual" Item1="true"><Item2 t="ui.UrlParameter" Param="jbart"/></Condition></Field><Field t="xtml_dt.PTSelectorField" Type="usage.Usage" FieldTitle="Test Type"/></Fields></Control><FieldAspect t="field_aspect.CellPresentation" Content="expandable text"/><FieldAspect t="field_aspect.TextSummary" Text="Click to edit test definition"/></Field></Fields><Operations t="operation.Operations"><Operation t="operation.NewItem"><DoAfter t="action.RunActions"><Action t="action.WriteValue" To="%!@t%" Value="bart_usage.JBartUsage"/><Action t="action.WriteValue" To="%!ExpectedResult/@t%" Value="usage.ContainsText"/><Action t="action.WriteValue" To="%!ExpectedResult/Text/@value%" Value=""/><Action t="action.WriteValue" To="%!@RunInAllTests%" Value="true"/></DoAfter></Operation><Operation t="operation.DeleteItem"/><Operation t="operation.Operation" ID="Show Output" Title="Show Output" Target="item" Icon="%$_Images%/studio/control1616.gif"><Action t="operation.RunXtmlAction"><Action t="action_async.RunAsyncActions"><Var name="_TestOutput" t="object.Object"/><Var name="_WidgetXml" t="data.Duplicate" Data="%../..%" /><Var name="_TestDB" t="data.Duplicate" Condition="%@t% != \'bart_usage.JBartUsage\'"><Data t="data.IfThenElse" If="%$IsGallery%" Then="%../../bart_dev/db%" Else="%../../db%"/></Var><Action t="xtml.RunXtml" Xtml="%%"/><Action t="dlg.OpenDialog" Title="output of test %@Name%"><Contents value="%$_TestOutput/OutputControl%"/></Action></Action></Action></Operation><Operation t="operation.Operation" ID="refresh" Title="Rerun Test" Target="item" Icon="%$_Images%/refresh.gif"><Action t="operation.RefreshCurrentItem"/></Operation><Operation t="operation.Operation" ID="xml" Title="Xml" Target="items" Icon="%$_Images%/studio/xml4.gif"><Action t="xmlui.ShowXmlDialog" Xml="%$_Items/ParentXml%" AutoWrite="true"><OnUpdate t="uiaction.Refresh" RunOn="%$_Cntr/Ctrl%"/></Action></Operation><Operation t="operation.Operation" Title="Advanced Mode" Icon="%$_Images%/studio/customize1616.gif" ID="aaeditor" Shortcut="Alt+x"><Action t="xtml_dt_tree.OpenScriptDialog"><Var name="AAEditorState" t="aaeditor.State" TreeXtml="%$Xtml%"><Var name="Xtml" t="xtml.Xtml" Xtml="%%"><Context t="bart_dt.ResourcesContext"/></Var></Var></Action></Operation><Operation t="operation.Operation" Title="Single Xml" Icon="%$_Images%/studio/xml4.gif" ID="aaeditor_xml" Shortcut="Alt+e"><Action t="xmlui.ShowXmlDialog" Xml="%%" Title="xtml source" AutoWrite="true"><OnUpdate t="uiaction.Refresh" RunOn="up(.bartdt_edit_fields)"/></Action></Operation><Operation t="operation.Operation" Title="Measure Time" ID="Measure_Time" Target="item" Icon="%$_Images%/studio/timer.gif"><Action t="operation.RunXtmlAction"><Action t="ui.ControlWithAction"><Var name="_TestTimeKeeper" t="object.Object" /><Var name="_WidgetXml" t="data.Duplicate" Data="%../..%" /><Var name="_TestDB" t="data.Duplicate" Condition="%@t% != \'bart_usage.JBartUsage\'"><Data t="data.IfThenElse" If="%$IsGallery%" Then="%../../bart_dev/db%" Else="%../../db%"/></Var><Var name="ButtonControl" value="%$ControlElement%" /><Control t="data.MeasureCalculationTime" PutTimeInObject="%$_TestTimeKeeper%" PutTimeInProperty="Time"><Calculation t="xtml.RunXtml" Xtml="%%"/></Control><RunAfterControl t="dlg.OpenDialog" ><Var name="ControlElement" value="%$ButtonControl%" /><Contents t="ui.List"><Control t="ui.Text" Text="time: %$_TestTimeKeeper/Time% ms" /><Control t="ui.Text" Text="(time does not include html rendering or asynchronous calculations)" CssStyle="font-size:9px" /></Contents><Style t="dialog_style.DefaultPopup" /></RunAfterControl></Action></Action></Operation></Operations></xtml></Component><Component id="EditUIPref" type="field.Fields" hidden="true"><xtml t="field.Button1" Title="UI Prefs" AsSection="false" ID="UIPrefs" ShowTitle="true" ButtonText="edit"><ButtonStyle t="ui.ButtonAsHyperlink" /><Action t="xmlui.ShowXmlDialog" Title="Edit UI Preferences" AutoWrite="true"><Data t="data.CreateIfDoesNotExist" Query="%UiPref/UIPref%"><Create t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.ByTag" Tag="UiPref"><Change t="xml.SetAttribute" AttributeName="t" Value="xml.Xml" /><Change t="xml.AddChildren" Children="%$_ItemDB/bart_unit/bart_unit/UIPref%" CloneChildren="true" /></Children></Change></Create></Data></Action></xtml></Component><Component id="EditTests" type="ui.Control" deprecated="true"><Param name="IsGallery" type="data.Boolean"><Default value="true" /></Param><xtml t="ui.ItemList"><Items t="xml.XmlItems" Tag="Test" /><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false" /><Aspect t="uiaspect.VerticalMasterDetails" /><Operations t="operation.Operations"><Operation t="operation.Operation" ID="NewItem" Title="New test" Target="new" Icon="%$_Images%/add1616.png" Shortcut="Alt+N"><Action t="operation.New"><DoAfter t="action.RunActions"><Action t="xml.ChangeXml"><Change t="xml.SetAttribute" AttributeName="t" Value="bart_dt.TestProperties" /><Change t="xml.AddChildren"><Children t="xml.Xml"><ExpectedResult t="usage.ContainsText"><Text value="" /></ExpectedResult></Children></Change></Action></DoAfter></Action><Aspect /></Operation><Operation t="operation.DeleteItem" /><Operation t="operation.Operation" ID="show test" Title="show output" Target="item" Icon="%$_Images%/studio/control1616.gif"><Action t="operation.RunXtmlAction"><Action t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="output of test %@name%"><Content t="ui.ControlWithAction"><Control t="ui.IfThenElse" If="%$IsGallery%"><Then t="bart_usage.GalleryItemToUsageControl" GalleryItem="%../..%" Test="%%" /><Else t="bart_usage.AppDevToUsageControl"><TestIndex t="xml.IndexOfElement" /></Else></Control><RunAfterControl t="xtml.RunXtml" Xtml="%%" Field="RunOnControl" /></Content></Dialog></Action></Action></Operation><Operation t="operation.Operation" ID="show usage xml" Title="show usage xml" Target="item" Icon="%$_Images%/studio/xml1616.gif"><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Action t="xmlui.ShowXmlDialog" Title="Usage Xml (%@name%)"><Xml t="bart_dt.TestToUsageXml" IsGallery="%$IsGallery%" /></Action></Action></Action></Operation><Operation t="operation.Operation" ID="run test" Title="run test" Target="item" Icon="%$_Images%/studio/run.gif"><Action t="operation.RunXtmlAction"><Action t="action.RunActions"><Data t="xtml.RunXtml"><Xtml t="bartgallery.TestToUsageXml" IsGallery="%$IsGallery%" /></Data><Action t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%%" /><Then t="dialog.OpenMessageDialog" Title="test" Message="Test passed" /><Else t="dialog.OpenMessageDialog" Title="test" Message="Test failed" /></Action></Action></Action><Aspect /></Operation><Operation t="operation.Operation" ID="refresh" Title="rerun tests" Target="items" Icon="%$_Images%/refresh.gif"><Action t="operation.Refresh" /></Operation></Operations><Fields t="field.Fields"><Field t="field.CustomControl" ID="test" Title="Test" ShowTitle="true"><Control t="ui_async.Control"><Var name="_TestPassed" t="data.WritableText" /><ControlForLoading t="ui.Image" Source1="%$_Images%/loading-bar.gif" Source="%$_Images%/running_animated.gif" /><AsyncAction t="action_async.ActionOnAsyncData"><Query t="data.IfThenElse" If="%@isasync%"><Then t="xtml.RunXtml"><Xtml t="bart_dt.TestToUsageXml" IsGallery="%$IsGallery%" /></Then><Else t="data_async.SyncDataOnNextTimer"><Query t="xtml.RunXtml"><Xtml t="bart_dt.TestToUsageXml" IsGallery="%$IsGallery%" /></Query></Else></Query><Action t="action.WriteValue" To="%$_TestPassed%"><Value t="yesno.IsEmpty" Value="%%" /></Action></AsyncAction><Control t="ui.Image"><Source t="data.IfThenElse" If="%$_TestPassed%" Then="%$_Images%/studio/yes.gif" Else="%$_Images%/studio/error.gif" /></Control></Control><FieldAspect t="field_aspect.HideInProperties" /></Field><Field t="field.XmlField" Path="@name" ID="name" Title="Name"><Type t="field_aspect.Text" /></Field><Field t="field.XmlField" Path="@url" ID="url" Title="Url"><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.HideInTable" /></Field><Field t="field.XmlGroup" Title="checkboxes" ID="Checkboxes" ID__Manual="" Path=""><FieldAspect t="field_aspect.HideInTable" /><FieldAspect t="field_aspect.Section" Underline="true" ExpandCollapse="" ExpandedByDefault="true" HideTitle="true"><Style t="" /></FieldAspect><Presentation t="uiaspect.MultipleColumns" Columns="3" /><Operations t="operation.Operations" /><Field t="field.XmlField" Path="@run_in_all_tests" ID="run_in_all_tests" Title="Run In All Tests" Condition="%$IsGallery%"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox" /></Type><FieldAspect t="field_aspect.DefaultValue" Value="true" /></Field><Field t="field.XmlField" Path="@run_in_more_tests" ID="run_in_more_tests" Title="Run In More Tests" Condition="%$IsGallery%"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox" /></Type></Field><Field t="field.XmlField" Path="@isasync" ID="isasync" Title="Async Integratrion test"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox" /></Type></Field></Field><Field t="field.XmlField" Path="@user" ID="user" Title="User"><FieldAspect t="field_aspect.HideInTable" /><Type t="field_aspect.Text" /></Field><Field t="field.Button1" Title="UI Prefs" AsSection="false" ID="UIPrefs" ID__Manual="" ShowTitle="true" ButtonText="edit"><FieldAspect t="field_aspect.HideInTable" /><ButtonStyle t="ui.ButtonAsHyperlink" /><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="xmlui.ShowXmlDialog" Title="Edit UI Preferences" AutoWrite="true" /><Data t="data.CreateIfDoesNotExist" Query="%UIPref%"><Create t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.ByTag" Tag="UIPref"><Change t="xml.AddChildren" Children="%$CurrentNode/bart_dev/db/bart_unit/bart_unit/UIPref/*%" CloneChildren="true" /></Children></Change></Create></Data></Action></Action></Field><Field t="field.CustomControl" Title="props" ID="Props" ShowTitle=""><FieldAspect t="field_aspect.HideInTable" /><Control t="ui.ControlWithAction"><RunBeforeControl t="action.WriteValue" To="%ExpectedResult/@t%" Value="usage.ContainsText" Condition="%ExpectedResult/@t%==\'yesno.Contains\'" /><Control t="ui.Document"><Fields t="xtml_dt.ParamsAsFields" /></Control></Control></Field><Field t="field.XmlField" Path="@type" ID="type" Title="Type"><FieldAspect t="field_aspect.HideInTable" /><Type t="field_aspect.FixedPickList" Options="runtime,design time" AllowEmpty="false" Multiple="false" /><FieldAspect t="field_aspect.DefaultValue" Value="runtime" /></Field></Fields></xtml></Component><Component id="TestToUsageXml" type="data.Data"><Param name="IsGallery" type="data.Boolean"><Default value="true" /></Param><xtml t="data.IfThenElse" If="%$IsGallery%"><Var name="Test" value="%%" /><Var name="T" t="data.IfThenElse" If="%@isasync%" Then="ui_async.ControlUsage" Else="ui.ControlUsage" /><Then t="xml.WithChanges"><Var name="Sample" value="%../..%" /><Xml t="xml.Xml" DynamicContent="true"><Usage t="%$T%" Of="gallery_%$Sample/@id%.%@name%"><Control t="bart_usage.GalleryItemToUsageControl"><GalleryItem t="xml.Xml" /></Control></Usage></Xml><Change t="xml.AddChildren" Children="%$Sample%" CloneChildren="true" Data="%Control/GalleryItem%" /><Change t="xml.AddChildren" Data="%Control%"><Children t="xml.WithChanges"><Xml t="xml.Xml"><Test t="xml.Xml" /></Xml><Change t="xml.AddChildren" Children="%$Test%" CloneChildren="true" /></Children></Change><Change t="xml.AddChildren" Children="%RunOnControl%" CloneChildren="true" /><Change t="xml.AddChildren" Children="%ExpectedResult%" CloneChildren="true" /><Change t="xml.AddChildren" Children="%CleanAfter%" CloneChildren="true" /></Then><Else t="xml.WithChanges"><Var name="AppDev" value="%../../%" /><Var name="TestIndex" t="xml.IndexOfElement" /><Xml t="xml.Xml" DynamicContent="true"><Usage t="%$T%" Of="app_%$AppDev/@id%.%@name%"><Control t="bart_usage.AppDevToUsageControl" TestIndex="%$TestIndex%" /></Usage></Xml><Change t="xml.AddChildren" Children="%RunOnControl%" CloneChildren="true" /><Change t="xml.AddChildren" Children="%ExpectedResult%" CloneChildren="true" /></Else></xtml></Component><Component id="TestProperties" type="data.Data"><Param name="RunOnControl" type="uiaction.UsageAction" /><Param name="ExpectedResult" type="usage.PassesUsage" script="true" /><Param name="CleanAfter" type="action.Action" /><xtml /></Component><Component id="Usages" type="ui.Control"><xtml t="ui.ItemList"><Items t="xml.XmlItems" ParentXml="%$BartUnits%" Tag="Usage" /><Operations t="operation.Operations"><Operation t="operation.StdOperations" /><Operation t="operation.Operation" ID="aaeditor" Title="edit" Icon="%$_Images%/edit1616.gif"><Action t="xtml_dt_tree.OpenScriptDialog"><Var name="AAEditorState" t="aaeditor.State"><GlobalPreviewXtml t="xtml.Xtml" Xtml="%%" Input="" /><TreeXtml t="xtml.Xtml" Xtml="%%" Input="" /><SaveAction t="aaeditor.Save" /></Var></Action></Operation></Operations><Fields t="field.Fields"><Field t="field.CustomControl" ID="test" Title="Test" ShowTitle="true"><Control t="ui_async.Control"><Var name="_TestPassed" t="data.WritableText" /><ControlForLoading t="ui.Image" Source1="%$_Images%/loading-bar.gif" Source="%$_Images%/running_animated.gif" /><AsyncAction t="action_async.ActionOnAsyncData"><Query t="data_async.SyncDataOnNextTimer"><Query t="xtml.RunXtml" Xtml="%%" /></Query><Action t="action.WriteValue" To="%$_TestPassed%"><Value t="yesno.IsEmpty" Value="%%" /></Action></AsyncAction><Control t="ui.Image"><Source t="data.IfThenElse" If="%$_TestPassed%" Then="%$_Images%/studio/yes.gif" Else="%$_Images%/studio/error.gif" /></Control></Control><FieldAspect t="field_aspect.HideInProperties" /></Field><Field t="field.XmlField" Path="@t" Title="Usage Type"><Type t="field_aspect.DynamicPickList" AllowEmptyValue="false" Mandatory="true"><Options t="text.Split" Data="usage.DataUsage,ui.ControlUsage,action.ActionUsage" /></Type><FieldAspect t="field_aspect.HideInTable" /></Field><Field t="field.XmlField" Path="@Of" /></Fields><Aspect t="uiaspect.DefaultFeatures" /><Aspect t="uiaspect.Table" Columns="test,id,Of,aaeditor" /></xtml></Component><Component id="RunOnDT" type="field.Fields"><xtml t="field.XmlField" Path="@RunOn" Title="Run On"><Type t="field_aspect.Picklist" AllowValueNotInOptions="true" RecalculateForEachCell="true"><Options t="picklist.DynamicOptions"><Options t="ui.CssClassesInControl"><Condition t="yesno.Not"><Of t="xml.IsOfTag" Tag="Test" /></Condition><Data t="xml.UpToTag" Tag="Test" /><Control t="ui.IfThenElse" If="%../../@_type%==\'bart_sample\'"><Then t="bart_usage.GalleryItemToUsageControl" GalleryItem="%../..%" Test="%%" /><Else t="bart_usage.AppDevToUsageControl"><TestIndex t="xml.IndexOfElement" /></Else></Control></Options></Options></Type><FieldAspect t="field_aspect.Description" Description="use .cls to find by class, or $.find(\'input\').slice(2,3) for jquery" /></xtml></Component></xtml><xtml ns="bart_dt_usage"><Component id="ControlInContext" type="ui.Control"><Param name="DB" /><Param name="UserID" /><Param name="Control" type="ui.Control" script="true" /><Param name="AdvancedMode" /><xtml t="ui_async.Control"><Var name="_Customize" value="true" /><Var name="_UserProvider" t="bart_user.CustomUserID" Value="%$UserID%" /><Var name="_GlobalVars" t="bart.GlobalVars"/><Var name="_BartContext" t="bart.Context" /><Var name="_GeneralStyling" t="object.Object" /><Var name="_UIPref" t="bart.UIPreferences" /><Var name="_ServerAdapter" t="bart_server.MemoryXmlDb" DB="%$DB%" /><Var name="_BartDtDB" value="%$DB%" /><Var name="_BartDevDtContext" t="object.Object"><Property name="AdvancedMode" Value="%$AdvancedMode%" /><SingleProperty name="Studio" t="object.Object" /></Var><AsyncAction t="bart.LoadAllUnits" MainUnit="%$DB/bart_unit/bart_unit/@id%" /><Control t="bart_dt.ControlInContext" DB="%$DB%"><Control t="xtml.UseParam" Param="Control" /></Control></xtml></Component><Usage t="ui.ControlUsage" Of="bart_dt.XtmlComponents"><Control t="bart_dt_usage.ControlInContext" UserID="user1"><DB t="xml.Xml"><db><bart_unit><bart_unit id="Simple"><Component id="App" type="bart.Application"><xtml t="bart.Application" /></Component></bart_unit></bart_unit></db></DB><Control t="bart_dt.XtmlComponents" /></Control><ExpectedResult t="yesno.Contains"><Text value="Simple" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="bart_dt.ImportContentTypeData"><Data value="My Name&#009;My Age&#xA;Homer&#009;42&#xA;Marge&#009;35" /><Result t="bart_dt.ImportContentTypeData" /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><xml><fields><Field t="field.XmlField" Path="@MyName" ID="MyName" Title="My Name"/><Field t="field.XmlField" Path="@MyAge" ID="MyAge" Title="My Age"/></fields><rows><node MyName="Homer" MyAge="42"/><node MyName="Marge" MyAge="35"/></rows></xml></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="bart_dt_compress.DependentFunctions"><Result t="data.Pipeline"><Item t="bart_dt_compress.DependentFunctions" Code="item = option.ItemForOptionPage || item; &#xa;      var pageId = aa_totext(field_data).replace(new RegExp(\' \', &quot;g&quot;),\'_\').replace(new RegExp(\'/\', &quot;g&quot;),\'_\');&#xa;      var page_params = {isObject:true, PageID: pageId , DataItems: {isObject: true, Items: item }}&#xa;      if (readonly) page_params.ReadOnly = true; &#xa;      var newContext = aa_ctx(context, { _PageParams: [page_params] } ); &#xa;      out = ajaxart_runMethod(item,option.OptionPage,\'Control\',newContext)[0];&#xa;    }&#xa;    jQuery(out).addClass(\'aa_option_page\');&#xa;    aa_field_fix_indentation(out,field.UnindentOptionPage,field);&#xa;      " /><Aggregator t="text.Concat" Separator="," /></Result><ExpectedResult t="yesno.EqualsTo" To="aa_totext,aa_ctx,aa_field_fix_indentation,ajaxart_runMethod" /></Usage><Usage t="usage.DataUsage" Of="bart_dt_compress.JSMinCompress" IsTest="false"><Result t="bart_dt_compress.JSMinCompress" Script="function aa_invoke_cntr_handlers(cntr,eventFuncs,data,ctx,extra) {   if (! eventFuncs || eventFuncs.RunningFlag) return;   eventFuncs.RunningFlag = true; // avoid recursion   var newContext = aa_ctx(ctx,{_Cntr: [cntr]});   try   {     for(var i=0;i&lt;eventFuncs.length;i++)       eventFuncs[i](data,newContext,extra);   }   catch (e) {}   eventFuncs.RunningFlag = false; } " /><ExpectedResult t="yesno.Contains"></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="bart_dt_compress.CompressComponent" IsTest="false"><Result t="data.Pipeline"><Item t="xml.Xml"><Component id="abc"><Param name="param1" description="abc"><Default value="aaa" /><value>xx</value><value>yy</value><FieldAspect t="xx" /></Param><xtml /></Component></Item><Item t="bart_dt_compress.CompressComponent" /></Result><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><C id="abc"><Param name="param1" ><Default value="aaa" /></Param><xtml /></C></To></ExpectedResult></Usage></xtml><xtml ns="bart_resource_dt"><Component id="EditResource" type="ui.Control"><Param name="PreviewControl" type="ui.Control" script="true"><Default t="bart_resource_dt.PreviewControl" /></Param><Param name="Operations" type="operation.Operations" script="true" /><Param name="Root" Default="%%"/><xtml t="ui.List" Class="aa_resource_dt"><Control t="bart_resource_dt.FieldTree" Root="%%"><Operations t="xtml.UseParam" Param="Operations" /></Control><Control t="bart_resource_dt.Preview" Root="%%"><PreviewControl t="xtml.UseParam" Param="PreviewControl" /></Control><Layout t="ui.Horizontal" /></xtml></Component><Component id="PreviewControl" type="ui.Control"><xtml t="ui.TextControl"><Data t="data.IfThenElse"><If t="yesno.NotEmpty" Value="%$ResourceObject/Items%" /><Then t="data.Pipeline"><Item value="%$ResourceObject/Items%" /><Aggregator t="text.Concat" Separator="&#xA;"><ItemText t="xml.XmlToText" PrettyPrint="true"/></Aggregator></Then><Else value="%$ResourceObject/Error/@error%" /></Data><Style t="ui.Textarea" Rows="20" /></xtml></Component><Component id="FieldTree" type="ui.Control"><Param name="Root" /><Param name="Operations" type="operation.Operations" script="true" /><xtml t="ui.ItemList"><Items t="data_items.Items" Items="%$Root%"><Aspect t="data_items.RecursiveNextLevel"><NextLevel t="xml.XmlItems" Tag="Field"><Condition t="bart_resource_dt.IsGroup" /></NextLevel></Aspect></Items><Presentation t="uiaspect.Tree" ItemText="%@Title%%@ResourceID%"><ItemImage t="xtml_dt.ComponentImage" /></Presentation><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false"><MenuAspect t="operation.Presentation"><Style t="ui.ButtonAsImage" /></MenuAspect></Aspect><Aspect t="uiaspect.TreeDragAndDrop" /><Aspect t="uiaspect.ContextMenu" /><Aspect t="uiaspect.VerticalMasterDetails" /><Aspect t="uiaspect.ItemDetails"><ItemPage t="ui.CustomSinglePage"><Control t="ui.IfThenElse" If="%@t%==%$Root/@t%"><Then t="ui.Document"><Fields t="xtml_dt.ParamsAsFields" /></Then><Else t="xtml_dt.ComponentEditor" ShowReadOnlyT="false" /></Control></ItemPage></Aspect><Operations t="operation.Operations"><Operation t="xtml.UseParam" Param="Operations" /><Operation t="xtml_dt.AdvancedCustomizationOperation" /></Operations></xtml></Component><Component id="Preview" type="ui.Control"><Param name="PreviewControl" type="ui.Control" script="true" /><Param name="Root" /><xtml t="ui.List" Class="preview"><Control t="ui.Button" Text="refresh preview"><Style t="ui.ButtonAsHyperlink" /><OnClick t="uiaction.Refresh" RunOn="up(.preview)" /></Control><Control t="ui_async.Control"><Var name="ResourceObject" t="xtml.RunXtml" Xtml="%$Root%" /><AsyncAction t="action_async.RunActions"><Var name="_PrevieMode" value="true" /><Action t="bart_resource.ClearResourceCache" Resource="%$Root/@ResourceID%" /><Action t="object.RunMethod" Method="Prepare" Object="%$ResourceObject%" /></AsyncAction><Control t="xtml.UseParam" Param="PreviewControl" /></Control></xtml></Component><Component id="IsGroup" type="data.Boolean"><xtml t="xtml.ComponentHasParam" Component="%@t%" Param="Field" /></Component></xtml><xtml ns="bartdev_dt"><Component id="LoadAllUnits" type="action_async.Action"><xtml t="action_async.RunActions"><Data value="%$_BartDevDtContext/DevUnits/db/bart_unit/bart_unit%" /><Action t="bart.LoadUnit" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="AppXtml"><Value t="xtml.ComponentDefinition" ID="%@id%.App" ToXtml="true" /></Action><Action t="xtml.RunXtmlByComponentId" ComponentID="%@id%.App" /></xtml></Component></xtml><xtml ns="css_dt"><Component id="PreDefinedColors" type="data.Data" ><xtml t="xml.Xml"><Colors><group name="white"><c name="White" hex="#FFFFFF"/><c name="Ivory" hex="#FFFFF0"/><c name="Splashed white" hex="#FEFDFF"/><c name="Snow" hex="#FFFAFA"/><c name="Cosmic latte" hex="#FFF8E7"/><c name="Floral white" hex="#FFFAF0"/><c name="Linen" hex="#FAF0E6"/><c name="Lavender blush" hex="#FFF0F5"/><c name="Seashell" hex="#FFF5EE"/><c name="Old lace" hex="#FDF5E6"/><c name="Ghost white" hex="#F8F8FF"/><c name="Isabelline" hex="#F4F0EC"/><c name="Anti-flash white" hex="#F2F3F4"/><c name="White smoke" hex="#F5F5F5"/><c name="Munsell" hex="#F2F3F4"/><c name="Honeydew" hex="#F0FFF0"/><c name="Mint cream" hex="#F5FFFA"/><c name="Magnolia" hex="#F8F4FF"/><c name="Beige" hex="#F5F5DC"/><c name="Cornsilk" hex="#FFF8DC"/><c name="Eggshell" hex="#F0EAD6"/><c name="Pearl" hex="#EAE0C8"/><c name="Papaya whip" hex="#FFEFD5"/><c name="Antique white" hex="#FAEBD7"/><c name="Navajo white" hex="#FFDEAD"/><c name="Vanilla" hex="#F3E5AB"/><c name="Blond" hex="#FAF0BE"/><c name="Lemon chiffon" hex="#FFFACD"/><c name="Cream" hex="#FFFDD0"/></group><group name="blue"><c name="Teal" hex="#008080" /><c name="Eton blue" hex="#96C8A2" /><c name="Cambridge Blue" hex="#A3C1AD" /><c name="Turquoise" hex="#40E0D0" /><c name="Tiffany Blue" hex="#81D8D0" /><c name="Cyan" hex="#00FFFF" /><c name="Electric blue" hex="#7DF9FF" /><c name="Celeste" hex="#B2FFFF" /><c name="Alice blue" hex="#F0F8FF" /><c name="Light blue" hex="#ADD8E6" /><c name="Powder blue" hex="#B0E0E6" /><c name="Non-photo blue" hex="#A4DDED" /><c name="Sky blue" hex="#87CEEB" /><c name="Baby blue" hex="#89CFF0" /><c name="Maya blue" hex="#73C2FB" /><c name="Deep sky blue" hex="#00BFFF" /><c name="Dodger blue" hex="#1E90FF" /><c name="Cornflower blue" hex="#6495ED" /><c name="Royal blue" hex="#4169E1" /><c name="Brandeis blue" hex="#0070FF" /><c name="Bleu de France" hex="#318CE7" /><c name="Azure" hex="#007FFF" /><c name="True Blue" hex="#0073CF" /><c name="Glaucous" hex="#6082B6" /><c name="Tufts Blue" hex="#417DC1" /><c name="Steel blue" hex="#4682b4" /><c name="Carolina blue" hex="#56A0D3" /><c name="Columbia blue" hex="#75B2DD" /><c name="Bondi blue" hex="#0095B6" /><c name="Cerulean" hex="#007BA7" /><c name="Air Force blue" hex="#5D8AA8" /><c name="UCLA Blue" hex="#536895" /><c name="Blue" hex="#0000FF" /><c name="Palatinate blue" hex="#273BE2" /><c name="Dark blue" hex="#0000B8" /><c name="Persian blue" hex="#1C39BB" /><c name="Egyptian blue" hex="#1034A6" /><c name="Sapphire" hex="#0F52BA" /><c name="International Klein Blue" hex="#002FA7" /><c name="Yale Blue" hex="#0F4D92" /><c name="Navy blue" hex="#000080" /><c name="Phthalo blue" hex="#000f89" /><c name="Federal blue" hex="#16166B" /><c name="Prussian blue" hex="#003153" /><c name="Oxford blue" hex="#002147" /><c name="Duke blue" hex="#001A57" /><c name="Midnight blue" hex="#003366" /><c name="Ultramarine" hex="#120A8F" /><c name="Cobalt blue" hex="#0047AB" /><c name="Iris" hex="#5A4FCF" /><c name="Electric indigo" hex="#6F00FF" /><c name="Majorelle Blue" hex="#6050DC" /><c name="Periwinkle" hex="#CCCCFF" /></group><group name="orange"><c name="Brown" hex="#964B00" /><c name="Rust" hex="#B7410E" /><c name="Mahogany" hex="#C04000" /><c name="Burnt orange" hex="#CC5500" /><c name="Tenné" hex="#CD5700" /><c name="Persian orange" hex="#D99058" /><c name="Lion" hex="#C19A6B" /><c name="Satin sheen gold" hex="#CBA135" /><c name="Old gold" hex="#CFB53B" /><c name="Gold (metallic)" hex="#D4AF37" /><c name="Flame" hex="#E25822" /><c name="Vermilion" hex="#E34234" /><c name="Deep carrot orange" hex="#E9692C" /><c name="Tangelo" hex="#F94D00" /><c name="International orange" hex="#FF4F00" /><c name="Orange-red" hex="#FF4500" /><c name="Tea rose" hex="#F88379" /><c name="Dark salmon" hex="#E9967A" /><c name="Carrot orange" hex="#ED9121" /><c name="Gamboge" hex="#EF9B0F" /><c name="Tangerine" hex="#F28500" /><c name="Orange" hex="#FF7F00" /><c name="Pumpkin" hex="#FF7518" /><c name="Safety orange" hex="#FF6700" /><c name="Bittersweet" hex="#FF6F5E" /><c name="Portland Orange" hex="#FF5A36" /><c name="Tomato" hex="#FF6347" /><c name="Coral" hex="#FF7F50" /><c name="Salmon" hex="#FF8C69" /><c name="Atomic tangerine" hex="#FF9966" /><c name="ECE/SAE Amber" hex="#FF7E00" /><c name="Princeton orange" hex="#FF8F00" /><c name="Orange peel" hex="#FFA000" /><c name="Orange (web)" hex="#FFA500" /><c name="Amber" hex="#FFBF00" /><c name="Gold" hex="#FFD700" /><c name="Peach-orange" hex="#FFCC99" /><c name="Apricot" hex="#FBCEB1" /><c name="Sunset" hex="#FAD6A5" /><c name="Peach-yellow" hex="#FADFAD" /><c name="Peach" hex="#FFE5B4" /><c name="Champagne" hex="#F7E7CE" /><c name="Papaya whip" hex="#FFEFD5" /></group><group name="brown"><c name="Seal brown" hex="#321414" /><c name="Bistre" hex="#3D2B1F" /><c name="Taupe" hex="#483C32" /><c name="Liver" hex="#534B4F" /><c name="Umber" hex="#635147" /><c name="Wenge" hex="#645452" /><c name="Field drab" hex="#6C541E" /><c name="Coffee" hex="#6F4E37" /><c name="Sepia" hex="#704214" /><c name="Bole" hex="#79443B" /><c name="Chocolate" hex="#7B3F00" /><c name="Russet" hex="#80461B" /><c name="Maroon" hex="#800000" /><c name="Sienna" hex="#882D17" /><c name="Cordovan" hex="#893F45" /><c name="Burnt umber" hex="#8A3324" /><c name="Burgundy" hex="#900020" /><c name="Chestnut" hex="#954535" /><c name="Auburn" hex="#A52A2A" /><c name="Rufous" hex="#A81C07" /><c name="Redwood" hex="#AB4E52" /><c name="Brown" hex="#964B00" /><c name="Raw umber" hex="#926644" /><c name="Chamoisee" hex="#A0785A" /><c name="Beaver" hex="#9F8170" /><c name="Rust" hex="#B7410E" /><c name="Mahogany" hex="#C04000" /><c name="Sinopia" hex="#CB410B" /><c name="Tawny" hex="#CD5700" /><c name="Burnt sienna" hex="#E97451" /><c name="Copper" hex="#B87333" /><c name="Camel" hex="#C19A6B" /><c name="Fallow" hex="#C19A6B" /><c name="Sand" hex="#C2B280" /><c name="Lion" hex="#C19A6B" /><c name="Ecru" hex="#C2B280" /><c name="Tan" hex="#D2B48C" /><c name="Earth yellow" hex="#E1A95F" /><c name="Fawn" hex="#E5AA70" /><c name="Sandy brown" hex="#F4A460" /><c name="Fulvous" hex="#E48400" /><c name="Ochre" hex="#CC7722" /><c name="Bronze" hex="#CD7F32" /><c name="Desert sand" hex="#EDC9AF" /><c name="Buff" hex="#F0DC82" /><c name="Khaki" hex="#F0E68C" /><c name="Wheat" hex="#F5DEB3" /><c name="Isabelline" hex="#F4F0EC" /><c name="Beige" hex="#F5F5DC" /></group><group name="pink"><c name="Peach" hex="#FFE5B4"  /><c name="Apricot" hex="#FDD5B1"  /><c name="Coral pink" hex="#F88379"  /><c name="Salmon" hex="#FA8072"  /><c name="Brink pink" hex="#FB607F"  /><c name="French rose" hex="#F64A8A"  /><c name="Amaranth" hex="#E52B50"  /><c name="Deep carmine" hex="#EF3038"  /><c name="Cerise" hex="#DE3163"  /><c name="Carmine" hex="#960018"  /><c name="Ultra pink" hex="#FF6FFF"  /><c name="Fuchsia" hex="#FF00FF"  /><c name="Hot magenta" hex="#FF00CC"  /><c name="Shocking pink" hex="#FC0FC0"  /><c name="Hollywood cerise" hex="#F400A1"  /><c name="Magenta" hex="#FF0090"  /><c name="Persian Rose" hex="#FE28A2"  /><c name="Deep pink" hex="#FF1493"  /><c name="Rose" hex="#FF007F"  /><c name="Ruby" hex="#E0115F"  /><c name="Rose pink" hex="#FF66CC"  /><c name="Hot pink" hex="#FF69B4"  /><c name="Pink" hex="#FFCBDB"  /><c name="Lavender pink" hex="#FBAED2"  /><c name="Carnation pink" hex="#FFA6C9"  /><c name="Amaranth pink" hex="#F19CBB"  /><c name="Thulian pink" hex="#DE6FA1"  /><c name="Puce" hex="#CC8899"  /><c name="Fandango" hex="#B53389"  /></group><group name="red"><c name="Magenta" hex="#FF0090" /><c name="Electric crimson" hex="#FF003F" /><c name="Folly" hex="#FF004F" /><c name="Rose" hex="#FF007F" /><c name="Scarlet" hex="#FF2400" /><c name="Red" hex="#FF0000" /><c name="Rosewood" hex="#65000B" /><c name="Tuscan red" hex="#66424D" /><c name="Wine" hex="#722F37" /><c name="Dark red" hex="#8B0000" /><c name="Carmine" hex="#960018" /><c name="Chestnut" hex="#9A1A00" /><c name="Burgundy" hex="#9F1D35" /><c name="Auburn" hex="#A52A2A" /><c name="Redwood" hex="#AB4E52" /><c name="Fire brick" hex="#B22222" /><c name="Rust" hex="#B7410E" /><c name="Cardinal" hex="#C41E3A" /><c name="Red-violet" hex="#C71585" /><c name="Terra cotta" hex="#CC4E3C" /><c name="Crimson" hex="#DC143C" /><c name="Cerise" hex="#DE3163" /><c name="Ruby" hex="#E0115F" /><c name="Flame" hex="#E25822" /><c name="Raspberry" hex="#E30B5C" /><c name="Vermilion" hex="#E34234" /><c name="Amaranth" hex="#E52B50" /><c name="Alizarin crimson" hex="#E32636" /><c name="Lust" hex="#E62020" /></group><group name="yellow"><c name="Yellow" hex="#FFFF00" /><c name="Cream" hex="#FFFDD0" /><c name="Lemon chiffon" hex="#FFFACD" /><c name="Maize" hex="#FBEC5D" /><c name="Jonquil" hex="#FADA5E" /><c name="Naples yellow" hex="#FADA5E" /><c name="School bus yellow" hex="#ffd800" /><c name="Gold" hex="#FFD700" /><c name="Stil de grain yellow" hex="#FADA5E" /><c name="Apricot" hex="#FBCEB1" /><c name="Amber" hex="#FFBF00" /><c name="Selective yellow" hex="#FFBA00" /><c name="Sunglow" hex="#FFCC33" /><c name="Mikado yellow" hex="#FFC40C" /><c name="Saffron" hex="#F4C430" /><c name="Goldenrod" hex="#DAA520" /><c name="Gold (metallic)" hex="#D4AF37" /><c name="Dark goldenrod" hex="#B8860B" /><c name="Olive" hex="#808000" /><c name="Lion" hex="#C19A6B" /><c name="Khaki" hex="#C3B091" /><c name="Ecru" hex="#CDB280" /><c name="Buff" hex="#F0DC82" /><c name="Vanilla" hex="#F3E5AB" /><c name="Jasmine" hex="#F8DE7E" /><c name="Navajo white" hex="#FFDEAD" /><c name="Papaya whip" hex="#FFEFD5" /><c name="Beige" hex="#F5F5DC" /><c name="Green-yellow" hex="#ADFF2F" /><c name="Lime" hex="#BFFF00" /></group><group name="gray"><c name="Black" hex="#000000" /><c name="Taupe" hex="#483C32" /><c name="Charcoal" hex="#36454F" /><c name="Purple taupe" hex="#50404D" /><c name="Davy\'s gray" hex="#555555" /><c name="Medium taupe" hex="#674C47" /><c name="Payne\'s gray" hex="#536878" /><c name="Gray" hex="#808080" /><c name="Battleship gray" hex="#848482" /><c name="Taupe gray" hex="#8B8589" /><c name="Slate gray" hex="#708090" /><c name="Rose quartz" hex="#AA98A9" /><c name="Cool gray" hex="#8C92AC" /><c name="Cadet gray" hex="#91A3B0" /><c name="Ash gray" hex="#B2BEB5" /><c name="Silver" hex="#C0C0C0" /><c name="Timberwolf" hex="#DBD7D2" /><c name="White" hex="#FFFFFF" /></group><group name="green"><c name="Phthalo green" hex="#123524" /><c name="Cal Poly Pomona" hex="#1E4D2B" /><c name="Hunter green" hex="#355E3B" /><c name="Pakistan green" hex="#006600" /><c name="Dark olive green" hex="#556B2F" /><c name="Dartmouth green" hex="#00693E" /><c name="Dark spring green" hex="#177245" /><c name="Fern green" hex="#4F7942" /><c name="Pine green" hex="#01796F" /><c name="Olive" hex="#808000" /><c name="Teal" hex="#008080" /><c name="Office green" hex="#008000" /><c name="India green" hex="#138808" /><c name="Sea green" hex="#2E8B57" /><c name="Forest green" hex="#228B22" /><c name="Olive drab" hex="#6B8E23" /><c name="Islamic green" hex="#009900" /><c name="Shamrock green" hex="#009E60" /><c name="Asparagus" hex="#7BA05B" /><c name="Pigment green" hex="#00A550" /><c name="Persian green" hex="#00A693" /><c name="Jungle green" hex="#29AB87" /><c name="Mint" hex="#3EB489" /><c name="Apple green" hex="#8DB600" /><c name="Mantis" hex="#74C365" /><c name="Pistachio" hex="#93C572" /><c name="Paris Green" hex="#50C878" /><c name="Lime green" hex="#32CD32" /><c name="Lawn green" hex="#7CFC00" /><c name="Spring bud" hex="#A7FC00" /><c name="Mint cream" hex="#F5FFFA" /><c name="Honeydew" hex="#F0FFF0" /><c name="Harlequin" hex="#3FFF00" /><c name="Green-yellow" hex="#ADFF2F" /><c name="Lime" hex="#BFFF00" /><c name="Chartreuse" hex="#7FFF00" /><c name="Spring green" hex="#00FF7F" /><c name="Bright green" hex="#66FF00" /><c name="Yellow-green" hex="#80FF00" /><c name="Green" hex="#00FF00" /></group><group name="cyan"><c name="Skobeloff" hex="#007A74" /><c name="Pine green" hex="#01796F" /><c name="Teal" hex="#008080" /><c name="Sea green" hex="#2E8B57" /><c name="Cerulean" hex="#007BA7" /><c name="Persian green" hex="#00A693" /><c name="Jungle green" hex="#29AB87" /><c name="Mint" hex="#3EB489" /><c name="Robin egg blue" hex="#00CCCC" /><c name="Tiffany Blue" hex="#81D8D0" /><c name="Turquoise" hex="#40E0D0" /><c name="Magic mint" hex="#AAF0D1" /><c name="Aqua" hex="#00FFFF" /><c name="Electric blue" hex="#7DF9FF" /><c name="Cyan" hex="#00FFFF" /><c name="Celeste" hex="#B2FFFF" /><c name="Aquamarine" hex="#7FFFD4" /><c name="Alice blue" hex="#F0F8FF" /></group><group name="violet"><c name="Lavender (web)" hex="#E6E6FA" /><c name="Indigo" hex="#6F00FF" /><c name="Violet" hex="#8F00FF" /><c name="Amethyst" hex="#9966CC" /><c name="Thistle" hex="#D8BFD8" /><c name="Lavender (floral)" hex="#B57EDC" /><c name="Wisteria" hex="#C9A0DC" /><c name="Orchid" hex="#DA70D6" /><c name="Heliotrope" hex="#DF73FF" /><c name="Fuchsia" hex="#FF00FF" /><c name="Rose" hex="#FF007F" /><c name="Magenta" hex="#FF0090" /><c name="Cerise" hex="#DE3163" /><c name="Fandango" hex="#B53389" /><c name="Red-violet" hex="#C71585" /><c name="Eggplant" hex="#614051" /><c name="Plum" hex="#8E4585" /><c name="Byzantium" hex="#702963" /><c name="Purple" hex="#800080" /><c name="Lavender blush" hex="#FFF0F5" /></group></Colors></xtml></Component></xtml><xtml ns="component_aspect"><Type id="Aspect" /><Component id="Image" type="component_aspect.Aspect"><Param name="Image"/><xtml t="object.SetProperty" Object="%$_Component%" Property="Image" Value="%$Image%" /></Component><Component id="Operations" type="component_aspect.Aspect"><Param name="Operation" type="operation.Operations[]"/><xtml t="object.SetProperty" Object="%$_Component%" Property="Operations" Value="%$Operation%" /></Component><Component id="EditControl" type="component_aspect.Aspect"><Param name="Control" type="ui.Control" script="true"/><xtml t="object.SetMethod" Object="%$_Component%" Method="Control"><Xtml t="xtml.UseParam" Param="Control" /></xtml></Component></xtml><xtml ns="css_dt"><Component id="ParseCssDeclaration" type="data.Data" execution="native" description="returns xml in proprietary format for the dt"><Param name="Css" /></Component><Component id="ParseCssBlock" type="data.Data" execution="native" description="returns xml with selectors and declarations"><Param name="Block" Default="%%"/><NativeHelper name="ParseDeclaration" t="css_dt.ParseCssDeclaration" Css="%%"/></Component><Component id="WorkingElementToCss" type="data.Data" execution="native" description="build a css declaration from the working elem attributes"><Param name="WorkingElement" Default="%%"/></Component><Component id="RelatedColors" type="data.Data" execution="native" description="return similar colors sorted by hsv value"><Param name="Color" Default="%%"/><Param name="ColorName"/></Component><Component id="RefreshPaddingAndMarginFields" type="field.field_aspect" execution="native"></Component><Component id="RefreshScript" type="action.Action"><Param name="WorkingElement" Default="%%"/><xtml t="action.RunActions" Data="%$WorkingElement%" customxtml="true" ><Var name="Css" t="css_dt.WorkingElementToCss" /><Var name="CssParamName" t="text.FirstSucceeding"><Item value="%$_CssParamName%" /><Item value="Css" /></Var><Action t="xml.SetAttribute" AttributeName="Inline" Value="%$Css%" /><Action t="xml.SetAttribute" Data="%$Script%" AttributeName="Inline" Value="%$Css%"><Condition t="yesno.NotEmpty" Data="%$Script%" /></Action><Action t="xml.WriteCData" Element="%$HtmlCssJs/!{$CssParamName}%"><CDataText t="css_dt.WorkingElementToCss" WorkingElement="%$data/Block%" /><Condition t="yesno.NotEmpty" Data="%$HtmlCssJs%" /></Action><Action t="field_dt.RefreshPreview"/></xtml></Component><Component id="FontAndText" type="field.Fields"><Param name="Xtml" /><xtml t="field.CustomControl"><Control t="field.ShowFieldControl"><Field t="css_dt.Font"><Var name="Script" value="%$Xtml%" /><Var name="data" t="xml.Xml"><data/></Var><Data t="css_dt.ParseCssDeclaration" Css="%$Xtml/@Inline%" /></Field></Control></xtml></Component><Component id="ColorWithLargePicker" type="field_aspect.FieldType"><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Css" Inline="border-left: 4px solid %%;"/><FieldAspect t="picklist.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="true" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.RichOptions"/></Options><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="picklist.CustomPopup" DoNotLookInAllFields=""><Style t="dialog_style.DraggablePopup"/><Contents t="ui.CustomSinglePage"><Control t="field.ShowFieldControl"><Field t="css_dt.ColorPicker" Data="%$_FieldData%"/></Control></Contents><Feature t="dlg.HandleEvents"><OnOK t="field.RefreshField" FieldID="%$_Field/ID%" FireOnUpdate="" Scope="document"/></Feature><Feature t="dlg.Location"><Location t="dlg.NearLauncher" PopupAtLeastWideAsLauncher="true" Location="below,above or aside of launcher"/></Feature><Feature t="dlg.Size" Size="780,340"/><Feature t="dlg.CloseIcon"/></PopupStyle></ControlStyle></FieldAspect></xtml></Component><Component id="Fonts" type="data.Data"><xtml t="data.List"><Var name="Pallete" t="css_dt.GetOrCreatePallete"/><Item value="%$Pallete/fonts/*%"/><Item t="data.Pipeline"><Item t="xml.Xml"><FontFamily><Font name="Arial" family="Arial, Helvetica"/><Font name="Times" family="Times" /><Font name="Calibri" family="Calibri" /><Font name="Arial Black" family="\'Arial Black\', Gadget, sans-serif"/><Font name="MS Sans Serif" family="\'MS Sans Serif\', Geneva, sans-serif"/><Font name="MS Serif" family="\'MS Serif\', \'New York\', sans-serif"/><Font name="Bookman Old Style" family="\'Bookman Old Style\', serif"/><Font name="Comic Sans MS" family="\'Comic Sans MS\', cursive"/><Font name="Courier" family="Courier, monospace"/><Font name="Courier New" family="\'Courier New\', Courier, monospace"/><Font name="Garamond" family="Garamond, serif"/><Font name="Georgia" family="Georgia, serif"/><Font name="Impact" family="Impact, Charcoal, sans-serif"/><Font name="Lucida Console" family="\'Lucida Console\', Monaco, monospace"/><Font name="Lucida Sans Unicode" family="\'Lucida Sans Unicode\', \'Lucida Grande\', sans-serif"/><Font name="Palatino Linotype" family="\'Palatino Linotype\', \'Book Antiqua\', Palatino, serif"/><Font name="Symbol" family="Symbol, sans-serif"/><Font name="Tahoma" family="Tahoma, Geneva, sans-serif"/><Font name="Trebuchet MS" family="\'Trebuchet MS\', Helvetica, sans-serif"/><Font name="Verdana" family="Verdana, Geneva, sans-serif"/></FontFamily></Item><Item value="%Font%"/></Item></xtml></Component><Component id="ColorGroups" type="data.Data"><xtml t="data.List"><Var name="Pallete" t="css_dt.GetOrCreatePallete"/><Item value="%$Pallete/colors%"/><Item t="data.Pipeline"><Item t="css_dt.PreDefinedColors"/><Item value="%*%"/></Item></xtml></Component><Component id="TextShadows" type="data.Data"><xtml t="xml.Xml"><TextShadow><Shadow name="dark gray" value="0.1em 0.1em #333" /><Shadow name="little fuzziness" value="0.1em 0.1em 0.05em #333" /><Shadow name="fuzzy" value="0.1em 0.1em 0.2em black" /><Shadow name="readable white" value="0.1em 0.1em 0.2em black" /><Shadow name="out" value="-1px -1px white, 1px 1px #333" /><Shadow name="in" value="1px 1px white, -1px -1px #444" /><Shadow name="outline"  value="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black" /><Shadow name="neon" value="0 0 0.2em #8F7" /><Shadow name="neon glow" value="0 0 0.2em #F87, 0 0 0.2em #F87" /><Shadow name="neon double" value="0 0 0.2em #87F, 0 0 0.2em #87F,0 0 0.2em #87F" /></TextShadow></xtml></Component><Component id="GetOrCreatePallete" type="data.Data"><xtml t="data.DataWithPreAction" Query="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'Palletes\']/xtml/pallete%"><Action t="xml.ChangeXml" Xml="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit%"><Change t="xml.AddChildren" Condition="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'Palletes\']/xtml/pallete/colors/@name% == \'\'"><Children t="xml.Xml"><Component id="Palletes" type="data.Data"><xtml t="xml.Xml"><pallete><colors name="custom"/><fonts/></pallete></xtml></Component></Children></Change></Action></xtml></Component><Component id="AddFontToPallete" type="action.Action"><Param name="FontElement" essential="true"/><xtml t="action.RunActions"><Var name="Pallete" t="css_dt.GetOrCreatePallete"/><Action t="xml.ChangeXml" Xml="%$Pallete/fonts%"><Change t="xml.AddChildren" Children="%$FontElement%"/></Action></xtml></Component><Component id="AddColorToPallete" type="action.Action"><Param name="Hex" essential="true"/><xtml t="action.RunActions"><Var name="Pallete" t="css_dt.GetOrCreatePallete"/><Action t="xml.ChangeXml" Xml="%$Pallete/colors%" Condition="%$Pallete/colors/c[@hex=\'{$Hex}\']/@hex% == \'\'"><Change t="xml.AddChildren"><Children t="xml.Xml" DynamicContent="true"><c name="" hex="%$Hex%"/></Children></Change></Action></xtml></Component><Component id="W3CHelp" type="operation.Operations"><xtml t="operation.Operation" Target="items" Title="w3c" Icon="%$_Images%/studio/help.png"><Action t="operation.Link" OpenInANewTab="true" Link="%$Url%"/></xtml><Param name="Url"/></Component>​<Component id="Links" type="picklist.ControlStyle"><xtml t="picklist.CustomStyle"><Html><![CDATA[<div><div class="aa_option" /></div>]]></Html><Css><![CDATA[.aa_option { float:left; color:#D8D8D8; padding: 0 21px 0 0; }.aa_option.selected { color:#545454; text-decoration:underline; }.aa_option:hover { color:#7F7F7F; text-shadow:  2px  2px  3px #EFEFEF; }#this { padding: 0 0 10px 63px; }]]></Css><Javascript><![CDATA[function(picklist) {  picklist.addOptions(\'.aa_option\',function(option) {    option.setInnerHTML(\'\',option.Text);    option.setSelectedOnClick(\'selected\');  });    if ( \'false\' == \'true\' ) {    var clearBtn = jQuery(picklist.createClearButton(\'selected\',\'None\')).addClass(\'aa_option\');    jQuery(picklist).prepend( clearBtn );  }}]]></Javascript></xtml></Component><Component id="Effects" type="field.Fields"><xtml t="field.Layout" ID="Border" ContentType=""><Layout t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[#this { width: 350px; }>.field { padding: 0 0 12px 0; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field)      {       field.setControl(\'.field\');       }  );;}]]></Javascript></Layout><Field t="field.Group" HideTitle="true" ID="Group" Title="Top"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Field t="field.PropertySheet" ID="PropertySheet" Title="border radius"><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@border_radius%" ID="radius" Title="Border Radius" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="slider.Slider" To="30" Width="60px" Min="0" SliderText="%%px" AllowEmptyValue="true" TextForEmptyValue=""><Style t="slider.Thin"/><PopupEditor t="slider.EditSliderPopup"/></FieldAspect><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Style t="group.TitlesAboveFields" HorizontalSpacing="42px" VerticalSpacing=""/><Field t="field.Field" FieldData="%!@opacity%" ID="opacity" Title="Opacity" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="" Width=""><Style t="slider.Thin"/><Units t="slider.Unit" Min="0" Max="1" InitialPixelsPerUnit="10" Step="0.05"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field></Field><Operations t="operation.Operations"/></Field><Field t="field.XmlMultipleGroup" ID="borders" Title="borders" TitleForSingle="border" HideTitle="true"><Items t="field.CustomDataItems"><DataItems t="xml.XmlItems" Tag="border"/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item { width: 350px; height: 48px; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript></Style></Presentation><Operations t="operation.Operations"><Operation t="operation.Operation" ID="new" Icon="%$_Images%/add1616.png" Target="new" Title="add border" WritableOnly="true"><Action t="operation.RunActions"><Action t="operation.New" ImmediateAdd="true"/><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="border"/><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="Result"/></Action><Operations t="operation.Operations"/></Operation></Operations><Field t="field.Group" HideTitle="true" ID="border" Title="border"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="11px" VerticalSpacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@size%" ID="size" Title="Size" ReadOnlyText=""><Type t="slider.Slider" Width="90px" gradientDir="0" gradientType="linear"><Style t="slider.Thin"/><Units t="slider.Unit" Symbol="px" Min="0" InitialPixelsPerUnit="10"/></Type><FieldAspect t="field_aspect.DefaultValue" Value="1"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@style%" ID="style" Title="Style" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="solid,dashed,dotted,double,groove,inset,outset,ridge,none"/></Options></Type><FieldAspect t="field_aspect.DefaultValue" Value="solid"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { width: 50px; }#wrapper { }]]></Css></FieldAspect></Field><Field t="field.Field" FieldData="%!@side%" ID="side" Title="Side" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="left,right,top,bottom"/></Options></Type><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { width: 64px; }#wrapper { }]]></Css></FieldAspect><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@color%" ID="color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { width: 60px; }#wrapper { }]]></Css></FieldAspect><FieldAspect t="field_aspect.DefaultValue" Value="black"/></Field></Field><Aspect t="uiaspect.Toolbar" Location="header" RefreshStrategy="item selection"/><Aspect t="uiaspect.DeleteOnHover" RightMargin="0" TopMargin="0" ConfirmationText="Are you sure you want to delete the border line?"><DoAfterDelete t="field.RefreshField" customxtml="true" FieldID="Result">&#xa;                  </DoAfterDelete></Aspect><Aspect t="uiaspect.ItemDetails" Transactional="true"><OpenNewIn t="uiaspect.ExpandAllText"/></Aspect></Field><Field t="field.XmlMultipleGroup" ID="shadows" Title="shadows" TitleForSingle="shadow" HideTitle="true"><Items t="field.CustomDataItems"><DataItems t="xml.XmlItems" Tag="shadow"/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item { width: 350px; height: 52px; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript></Style></Presentation><FieldAspect t="field_aspect.Section" HideTitle="true" CollapsedByDefault=""><Style t="section.Default"/></FieldAspect><Operations t="operation.Operations"><Operation t="operation.Operation" ID="add" Title="add shadow" Target="items" Icon="%$_Images%/add1616.png"><Action t="operation.RunActions" gradientDir="0" gradientType="linear"><Action t="operation.New" ImmediateAdd="true"><ChangeBeforeEdit t="action.RunActions" customxtml="true"><Action t="action.WriteValue" Value="3px" To="%!@shadow_blur%"/><Action t="action.WriteValue" Value="2px" To="%!@shadow_x%"/><Action t="action.WriteValue" Value="2px" To="%!@shadow_y%"/><Action t="action.WriteValue" Value="1px" To="%!@shadow_spread%"/></ChangeBeforeEdit></Action><Action t="field.RefreshField" FireOnUpdate="true" Scope="screen" FieldID="Result,shadows"/></Action><Operations t="operation.Operations"/></Operation></Operations><Field t="field.Group" HideTitle="false" ID="Group" Title="Shadow"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="6px" VerticalSpacing="10px"/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@shadow_inset%" ID="inset" Title="Inset" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.Property"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 8px 9px;"/></Field><Field t="field.Field" FieldData="%!@shadow_blur%" ID="shadow_blur" Title="Blur" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Min="0" Width="28px"><Style t="slider.Thin"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field><Field t="field.Field" FieldData="%!@shadow_spread%" ID="shadow_spread" Title="Spread" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="30px" Min="0"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field><Field t="field.Field" FieldData="%!@shadow_x%" ID="h_shadow" Title="Offset X" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="30px"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field><Field t="field.Field" FieldData="%!@shadow_y%" ID="v_shadow" Title="Offset Y" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="30px"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@shadow_color%" ID="shadow_color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 60px;"/><FieldAspect t="field_aspect.DefaultValue" Value="grey"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/></Field></Field><Aspect t="uiaspect.Toolbar" Location="header" RefreshStrategy="item selection"/><Aspect t="uiaspect.DeleteOnHover" RightMargin1="0" TopMargin="0" RightMargin="0" ConfirmationText="Are you sure you want to delete the shadow line?"><DoAfterDelete t="field.RefreshField" customxtml="true" FieldID="Result"/></Aspect><Aspect t="uiaspect.ItemDetails" Transactional="false" KeepOpenItemInUrl="false" FullLoadItem="true"><OpenNewIn t="uiaspect.ExpandAllText"/></Aspect></Field><Field t="field.Group" ID="Result" Title="Result" HideTitle="true"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Aspect t="uiaspect.RunAction"><RunBeforeControl t="css_dt.RefreshScript" Condition="%$data/@disable_designer% != \'true\'"/></Aspect><Field t="field.Control" ID="Control1" Title="Control1"><Control t="field_control.CustomControl"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[{ width: 100px; height: 28px; padding: 3px; margin: 0 0 0 24px; %@Inline%;   max-height:200px;  overflow:hidden;}]]></Css><Javascript><![CDATA[function(html_elem,context) { } ]]></Javascript><![CDATA[]]></Control></Field><Operations t="operation.Operations"/></Field><Field t="field.Group" HideTitle="false" ID="Gradient" Title="Background Gradient"><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><Operations t="operation.Operations"/><Field t="field.Group" HideTitle="true" ID="DirectionAndType" Title="direction and type"><Layout t="uiaspect.Group"><Style t="group.CustomStyle"><Html><![CDATA[<div><div class="field"><div class="field_title"/><div class="field_contents"/></div></div>]]></Html><Css><![CDATA[#this>.field { float: left;}#this>.field:not(:first-child) { padding-left:16px; }#this>.field>.field_title {   padding-bottom:10px;   color: #666;  font-weight: bold;  font-size: 11px;  font-family: "lucida grande",tahoma,verdana,arial,sans-serif;}#this>.field>.field_contents { vertical-align: top; padding-bottom: 17px; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {      var title = field.HideTitle ? \'\' : field.Title+\':\';      field.setInnerHTML(\'.field_title\',title);      field.setControl(\'.field_contents\'); })}]]></Javascript></Style></Layout><Operations t="operation.Operations"/><Field t="field.Layout" ID="direction" Title="Direction"><Layout t="layout.HorizontalHtmlTable" Spacing="57px"/><Field t="field.Layout" ID="direction_arrows" Title="direction arrows"><Layout t="layout.HorizontalHtmlTable" Spacing="20px"/><Field t="field.Button" ID="right" Title="right"><Style t="button.Arrow" Direction="Right" Size=""/><Action t="operation.RunXtmlAction"><Action t="operation.RunActions"><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$CssWorkingElement/!@gradientDir%" Value="180"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="gradientDir,Result"/></Action></Action></Field><Field t="field.Button" ID="left" Title="left"><Style t="button.Arrow" Direction="Left" Size=""/><Action t="operation.RunXtmlAction"><Action t="operation.RunActions"><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$CssWorkingElement/!@gradientDir%" Value="0"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="gradientDir,Result"/></Action></Action></Field><Field t="field.Button" ID="top" Title="top"><Style t="button.Arrow" Direction="Top" Size=""/><Action t="operation.RunXtmlAction"><Action t="operation.RunActions"><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$CssWorkingElement/!@gradientDir%" Value="-90"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="gradientDir,Result"/></Action></Action><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { margin-top: 22px; margin-left: -62px; }#wrapper { }]]></Css></FieldAspect></Field><Field t="field.Button" ID="bottom" Title="bottom"><Style t="button.Arrow" Direction="Bottom" Size=""/><Action t="operation.RunXtmlAction"><Action t="operation.RunActions"><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$CssWorkingElement/!@gradientDir%" Value="90"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="gradientDir,Result"/></Action></Action><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { margin-top: -23px; margin-left: -83px; }#wrapper { }]]></Css></FieldAspect></Field><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { position:absolute; margin-top: 12px; }#wrapper { }]]></Css></FieldAspect></Field><Field t="field.Field" FieldData="%!$CssWorkingElement/@gradientDir%" ID="gradientDir" Title="Direction" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="" Width="180px"><Style t="slider.Thin"/><Units t="slider.Unit" Min="-180" Max="180"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field></Field><Field t="field.Field" FieldData="%!$_Items/ParentXml/@gradientType%" ID="gradientType" Title="Type" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="linear,radial"/></Options></Type><FieldAspect t="field_aspect.DefaultValue" Value="linear"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { width: 60px; }#wrapper { }]]></Css></FieldAspect></Field><FieldAspect t="field_aspect.HideByCondition" CheckConditionForEveryItem="" ShowCondition="%=Count(grad)% != 0"/><FieldAspect t="field_aspect.HeaderFooterField" Location="header" RefreshStrategy="none"/></Field><Field t="field.XmlMultipleGroup" ID="gradient" Title="gradient" TitleForSingle="stop" HideTitle="true"><Items t="field.CustomDataItems"><DataItems t="xml.XmlItems" Tag="grad"/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this >.item { color:black; height: 25px; margin-top: 0; margin-right: 0; margin-bottom: 0;   margin-left: 10px; }#this { color:black; width: 370px;  }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript></Style></Presentation><Operations t="operation.Operations"><Operation t="operation.Operation" ID="new" Icon="images/add1616.png" Target="new" Title="add gradient stop" WritableOnly="true"><Action t="operation.RunActions"><Action t="operation.New" ImmediateAdd="true"><DoAfter t="action.RunActions" Remark="Add two lines at the first time"><Var name="grads" value="%=Count($CssWorkingElement/grad)%"/><Condition value="%$grads% == 1"/><Action t="xml.ChangeXml" Xml="%$CssWorkingElement%"><Change t="xml.AddChildren"><Children t="xml.Xml"><grad color="#c9c9c9" pos="100"/></Children></Change></Action></DoAfter></Action><Action t="field.RefreshField" FireOnUpdate="true" Scope="screen" FieldID="Result,Gradient"/></Action><Operations t="operation.Operations"/></Operation></Operations><Field t="field.Group" HideTitle="true" ID="grad" Title="gradient"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@pos%" ID="pos" Title="Pos" ReadOnlyText=""><Type t="slider.Slider" Width="228px" AllowEmptyValue=""><Style t="slider.Thin"/><Units t="slider.Percent"/></Type><FieldAspect t="field_aspect.DefaultValue" Value="0"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 0 11px 0 5px;"/></Field><Field t="field.Field" FieldData="%!@color%" ID="color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 60px;"/><FieldAspect t="field_aspect.DefaultValue" Value="black"/></Field></Field><Aspect t="uiaspect.DeleteOnHover" RightMargin="0" TopMargin="0" ConfirmationText="Are you sure you want to delete the stop?"><DoAfterDelete t="field.RefreshField" customxtml="true" FieldID="Result,Gradient"/></Aspect><Aspect t="uiaspect.ItemDetails" Transactional="true"><OpenNewIn t="uiaspect.DetailsInplace" CloseInplaceSiblings="" ToolbarLocation="bottom" AutoOpenWhenZooming="none"><InplaceToolbar t="uiaspect.DetailsToolbar"><ButtonStyle t="ui.ButtonAsHyperlink"/></InplaceToolbar></OpenNewIn></Aspect><Aspect t="uiaspect.Toolbar" Location="header" RefreshStrategy="item selection"/></Field><FieldAspect t="field_aspect.Section" CollapsedByDefault=""><Style t="section.Default"/></FieldAspect></Field><DefaultResource t="bart.Resource" Name="data"/></xtml></Component><Component id="Font" type="field.Fields"><xtml t="field.Layout"><Layout t="group.Vertical"/><Field t="field.Group" ID="Section" Title="size" HideTitle="true"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="12px" VerticalSpacing="">&#xa;&#xa;                  </Style></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@font_size%" ID="size" Title="Size" ReadOnlyText=""><Type t="slider.Slider" Width="111px" AllowEmptyValue="true"><Style t="slider.Thin"/><Units t="slider.Unit" Symbol="px" Min="8" Step="0.5"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@font_family%" ID="family" Title="Family" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="true"><Options t="picklist.DynamicOptions" OptionLabel="%@name%" OptionCodeByIndex="" OptionCode="%@family%"><Options t="css_dt.Fonts"><Item t="data.Pipeline"><Item t="sample.Palletes"/><Item value="%fonts/f%"/></Item><Item t="data.Pipeline" customxtml="true"><Item t="css_dt.SafeFonts"/><Item value="%Font%"/></Item></Options></Options><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="picklist.CustomPopup" DoNotLookInAllFields=""><Style t="dialog_style.DraggablePopup"/><Contents t="ui.CustomSinglePage"><Control t="field.ShowFieldControl"><Field t="css_dt.FontPicker"/></Control></Contents><Feature t="dlg.Size" Size="840,"/><Feature t="dlg.CloseIcon"/></PopupStyle></ControlStyle></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 93px;"/></Field><Field t="field.Field" FieldData="%!@text_transform%" ID="transform" Title="Transform" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="capitalize,uppercase,lowercase"/></Options></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 78px;"/></Field></Field><Field t="field.Group" HideTitle="true" ID="Group" Title="more"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="21px" VerticalSpacing="">&#xa;&#xa;                  </Style></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@color%" ID="color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 65px;"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_aspect.Css" Inline="border-left: 4px solid %%;"/></Field><Field t="field.Field" FieldData="%!@background_color%" ID="background_color" Title="Bg Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 65px;"/><FieldAspect t="field_aspect.Css" Inline="border-left: 4px solid %%;" OnElement="content" OnCondition="%% != \'\'"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/></Field><Aspect t="uiaspect.Css" OnElement="container" Inline="padding-bottom:15px;"/><Field t="field.Field" FieldData="%!@text_align%" ID="align" Title="Align" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="left,right,center,justify"/></Options></Type><FieldAspect t="field_aspect.Css" Inline="width:50px;"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@text_overflow%" ID="overflow" Title="Overflow" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="ellipsis,clip"/></Options></Type><FieldAspect t="field_aspect.Css" Inline="width:65px"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field></Field><Aspect t="uiaspect.Css" OnElement="container body" Inline="width:350px;"/><Field t="field.Group" HideTitle="true" ID="Group1" Title="check boxes"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="45px">&#xa;                  </Style></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@bold%" ID="bold" Title="Bold" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@italic%" ID="italic" Title="Italic" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@underline%" ID="underline" Title="Underline" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Aspect t="uiaspect.Css" OnElement="container" Inline="padding-bottom:10px;"/><Field t="field.Field" FieldData="%!@nowrap%" ID="nowrap" Title="Nowrap" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field></Field><Field t="field.XmlMultipleGroup" ID="shadows" Title="shadows" TitleForSingle="shadow" HideTitle="true"><Items t="field.CustomDataItems"><DataItems t="xml.XmlItems" Tag="textshadow"/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item { width: 350px; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript></Style></Presentation><FieldAspect t="field_aspect.Section" HideTitle="true" CollapsedByDefault=""><Style t="section.Default"/></FieldAspect><Operations t="operation.Operations"><Operation t="operation.Operation" ID="add" Title="add text shadow" Target="items" Icon="%$_Images%/add1616.png"><Action t="operation.RunActions"><Action t="operation.New" ImmediateAdd="true"><ChangeBeforeEdit t="action.RunActions" customxtml="true"><Action t="action.WriteValue" Value="0.1em" To="%!@blur%"/><Action t="action.WriteValue" Value="0.1em" To="%!@x%"/><Action t="action.WriteValue" Value="0.1em" To="%!@y%"/></ChangeBeforeEdit></Action><Action t="field.RefreshField" FireOnUpdate="true" Scope="screen" FieldID="shadows,Result"/></Action><Operations t="operation.Operations"/></Operation></Operations><Field t="field.Group" HideTitle="false" ID="Group" Title="Shadow"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="10px" VerticalSpacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@blur%" ID="shadow_blur" Title="Blur" ReadOnlyText=""><Type t="slider.Slider" Width="60px"><Units t="slider.Unit" Symbol="em" Min="0" Max="2" Step="0.01" InitialPixelsPerUnit="100"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field><Field t="field.Field" FieldData="%!@x%" ID="h_shadow" Title="Offset X" ReadOnlyText=""><Type t="slider.Slider" Width="55px"><Units t="slider.Unit" Symbol="em" Min="" Max="" Step="0.05" InitialPixelsPerUnit="20"/><Style t="slider.Thin"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="0"/></Field><Field t="field.Field" FieldData="%!@y%" ID="v_shadow" Title="Offset Y" ReadOnlyText=""><Type t="slider.Slider" Width="55px"><Units t="slider.Unit" Symbol="em" Min="" Max="" Step="0.05" InitialPixelsPerUnit="20"/><Style t="slider.Thin"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@color%" ID="shadow_color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.DefaultValue" Value="grey"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 60px;"/></Field></Field><Aspect t="uiaspect.Toolbar" Location="header" RefreshStrategy="item selection"/><Aspect t="uiaspect.DeleteOnHover" RightMargin="0"><DoAfterDelete t="field.RefreshField" customxtml="true" FieldID="Result"/></Aspect><Aspect t="uiaspect.ItemDetails" Transactional="false" KeepOpenItemInUrl="false" FullLoadItem="true"><OpenNewIn t="uiaspect.ExpandAllText"/></Aspect></Field><Field t="field.Group" ID="Section1" Title="Bottom"><Layout t="uiaspect.Group"><Style t="group.PropertySheet"/></Layout><Field t="field.Group" ID="Result" Title="Result" HideTitle="true"><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><Field t="field.Group" ID="Section1" Title="Preview"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Control" ID="Preview" Title="Preview" HideTitle="false"><Control t="field_control.CustomControl"><Html><![CDATA[<div>Hello World 123</div>]]></Html><Css><![CDATA[{ %@Inline% }]]></Css></Control></Field></Field><Aspect t="uiaspect.RunAction"><RunBeforeControl t="css_dt.RefreshScript" Condition="%$data/@disable_designer% != \'true\'" customxtml="true"/></Aspect></Field><FieldAspect t="field_aspect.Css" Inline="height:120px;"/></Field><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 350px;"><Css><![CDATA[]]></Css></FieldAspect></xtml></Component><Component id="Size" type="field.Fields"><xtml t="field.Layout" Title=""><Layout t="group.CustomStyle"><Html><![CDATA[<div><div class="field"><div class="field_title"/><div class="field_contents"/></div></div>]]></Html><Css><![CDATA[#this>.field { float: left; }#this>.field:not(:first-child) { }#this>.field>.field_title {   font-family: "lucida grande",tahoma,verdana,arial,sans-serif;   color:#666; font-weight:bold; font-size: 11px;   padding-bottom:3px; }#this>.field>.field_contents { vertical-align: top; padding-bottom: 8px; }#this { width: 350px;}]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {      var title = field.HideTitle ? \'\' : field.Title+\':\';      field.setInnerHTML(\'.field_title\',title);      field.setControl(\'.field_contents\'); },true)}]]></Javascript></Layout><Field t="field.Group" HideTitle="true" ID="Group" Title="Dimentions"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="30px" VerticalSpacing=""/></Layout><Field t="field.Field" FieldData="%!@width%" ID="width" Title="Width" ReadOnlyText=""><Type t="slider.Slider" Width="120px" AllowEmptyValue="true"><Style t="slider.Thin"/><Units t="slider.Unit" Symbol="px" Min="0" InitialPixelsPerUnit="1"/><PopupEditor t="slider.EditSliderPopup"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Field t="field.Field" FieldData="%!@height%" ID="height" Title="Height" ReadOnlyText=""><Type t="slider.Slider" Width="140px" AllowEmptyValue="true"><Style t="slider.Thin"/><Units t="slider.Unit" Symbol="px" Min="0" InitialPixelsPerUnit="1"/></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/></Field><Operations t="operation.Operations"/></Field><Field t="field.Group" HideTitle="false" ID="Margins" Title="Margins"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@margin_mode%" ID="margin_mode" Title="mode" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.RichOptions"><Option t="picklist.Option" Option="xy" DisplayName="left/right and top/bottom margins are the same" Image=""/><Option t="picklist.Option" Option="same" DisplayName="same margin for all sides" Image=""/></Options></Options><ControlStyle t="picklist.CustomStyle"><Html><![CDATA[<div><div class="aa_option"><div class="inner"/></div></div>]]></Html><Css><![CDATA[#this { position:absolute; color:black; margin-top: -14px; margin-left: 285px; }.aa_option { float: left; color:black; background:#FBFBFB; background-color:#F2F2F2;   width: 12px; height: 12px; border-radius: 4px; padding-top: 4px;   padding-right: 4px; padding-bottom: 4px; padding-left: 4px;   margin-right: 2px; border: 1px solid #D6D6D6; opacity:0.4; cursor:pointer; }.inner { background-color:#BFBFBF; width: 12px; height: 12px; }.aa_option.selected { color:black; box-shadow:  1px 1px 1px 1px   grey; opacity: 1; }.aa_option:hover { opacity:1; }]]></Css><Javascript><![CDATA[function(picklist) {  picklist.addOptions(\'.aa_option\',function(option) {    if (option.Option.code == \'xy\') {      option.style.paddingLeft = \'1px\';      option.style.paddingRight = \'1px\';      option.style.width = \'18px\';      jQuery(option).find(\'.inner\').width(\'18px\');    }    option.setAttribute(\'title\',option.Text);    option.setSelectedOnClick(\'selected\');  });  }]]></Javascript></ControlStyle></Type></Field><Field t="field.Field" FieldData="%!@margin_top%" ID="margin_top" Title="Top" ReadOnlyText=""><Type t="slider.Slider" Width="145px" AllowEmptyValue="true"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px      grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { color:#aaa; font-size: 10px; margin: -21px 0 0 61px; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer; }]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin-top: 0;margin-right: 0;margin-bottom: 0;margin-left: 80px;"><Css/></FieldAspect></Field><Field t="field.Field" FieldData="%!@margin_left%" ID="margin_left" Title="Left" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="145px"><Units t="slider.Unit" Symbol="px"/><Style t="slider.Thin"/></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/></Field><Field t="field.Field" FieldData="%!@margin_right%" ID="margin_right" Title="Right" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="145px"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px    grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { float:right; color:#aaa; font-size: 10px; margin: -12px -11px 0 0; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer; }]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: -10 0 0 280px;"/></Field><Field t="field.Field" FieldData="%!@margin_bottom%" ID="margin_bottom" Title="Bottom" ReadOnlyText=""><Type t="slider.Slider" AllowEmptyValue="true" Width="145px"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px     grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { color:#aaa; font-size: 10px; margin: 7px 0 0 61px; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer;}]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 0 0 0 80px;"/></Field></Field><Field t="field.Group" HideTitle="false" ID="Padding" Title="Padding"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@padding_mode%" ID="padding_mode" Title="mode" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="false" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.OptionsInplace"><Options t="picklist.RichOptions"><Option t="picklist.Option" Option="xy" DisplayName="left/right and top/bottom padding are the same" Image=""/><Option t="picklist.Option" Option="same" DisplayName="same padding for all sides" Image=""/></Options></Options><ControlStyle t="picklist.CustomStyle"><Html><![CDATA[<div><div class="aa_option"><div class="inner"/></div></div>]]></Html><Css><![CDATA[#this { position:absolute; color:black; margin-top: -14px; margin-left: 285px; }.aa_option { float: left; color:black; background:#FBFBFB; background-color:#F2F2F2;   width: 12px; height: 12px; border-radius: 4px; padding-top: 4px;   padding-right: 4px; padding-bottom: 4px; padding-left: 4px;   margin-right: 2px; border: 1px solid #D6D6D6; opacity:0.4; cursor:pointer; }.inner { background-color:#BFBFBF; width: 12px; height: 12px; }.aa_option.selected { color:black; box-shadow:  1px 1px 1px 1px  grey; opacity: 1; }.aa_option:hover { opacity:1; }]]></Css><Javascript><![CDATA[function(picklist) {  picklist.addOptions(\'.aa_option\',function(option) {    if (option.Option.code == \'xy\') {      option.style.paddingLeft = \'1px\';      option.style.paddingRight = \'1px\';      option.style.width = \'18px\';      jQuery(option).find(\'.inner\').width(\'18px\');    }    option.setAttribute(\'title\',option.Text);    option.setSelectedOnClick(\'selected\');  });  }]]></Javascript></ControlStyle></Type></Field><Field t="field.Field" FieldData="%!@padding_top%" ID="padding_top" Title="Top" ReadOnlyText=""><Type t="slider.Slider" Width="145px" AllowEmptyValue="true"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px   grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { color:#aaa; font-size: 10px; margin: -20px 0 0 61px; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer;}]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 0 0 0 80px;"/></Field><Field t="field.Field" FieldData="%!@padding_left%" ID="padding_left" Title="Left" ReadOnlyText=""><Type t="slider.Slider" Width="145px" AllowEmptyValue="true"><Units t="slider.Unit" Symbol="px"/></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/></Field><Field t="field.Field" FieldData="%!@padding_right%" ID="padding_right" Title="Right" ReadOnlyText=""><Type t="slider.Slider" Width="145px" AllowEmptyValue="true"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px   grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { float:right; color:#aaa; font-size: 10px; margin: -12px -12px 0 0; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer;}]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: -10 0 0 280px;"/></Field><Field t="field.Field" FieldData="%!@padding_bottom%" ID="padding_bottom" Title="Bottom" ReadOnlyText=""><Type t="slider.Slider" Width="145px" AllowEmptyValue="true"><Units t="slider.Unit" Symbol="px"/><Style t="slider.CustomSliderStyle"><Html><![CDATA[<div><div class="aa_slider_scale"><div class="aa_slider_text"/><div class="aa_slider_thumb"/></div></div>]]></Html><Css><![CDATA[#this { height: 30px; padding: 0 0 0 12px; }.aa_slider_scale { position:relative; float: left; background-color:#aaa; width: 94px;   height: 1px; border-radius: 3px; margin: 13px 6px 13px 6px;   border-bottom: 1px solid #efefef; }.aa_slider_thumb { position: absolute; color:black; background-color:#efefef; width: 6px;   height: 13px; border-radius: 2px; border: 1px solid #adadad;   box-shadow:  inset 0 0 3px 0px   grey; top: -7px; left: 0px;   cursor: pointer; }.aa_slider_thumb:hover { background-color:#eee; border-color: #777; }.aa_slider_scale:hover .aa_slider_text { color:black; }.aa_slider_thumb:focus { background-color:#383838; }.aa_slider_text { color:#aaa; font-size: 10px; margin: 7px 0 0 61px; }#this.empty_value { opacity: 0.5; -webkit-transition: opacity, 0.5s; }.aa_slider_text:hover { text-decoration:underline; cursor: pointer;}]]></Css><Javascript><![CDATA[function(slider) {  slider.init(\'.aa_slider_scale\',\'.aa_slider_thumb\',\'.aa_slider_text\');}]]></Javascript></Style></Type><FieldAspect t="css_dt.RefreshPaddingAndMarginFields"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 0 0 0 80px;"/></Field></Field><Field t="field.Group" HideTitle="true" ID="Group1" Title="Position"><Layout t="uiaspect.Group"><Style t="group.TitlesAboveFields" HorizontalSpacing="21px" VerticalSpacing=""/></Layout><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@position%" ID="position" Title="Position" ReadOnlyText=""><Type t="picklist.Picklist" Multiple="false"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="absolute,relative,fixed"/></Options><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="picklist.SystemPopup"><FooterOperation t="css_dt.W3CHelp" Url="http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning"/></PopupStyle></ControlStyle></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 51px;"/></Field><Field t="field.Field" FieldData="%!@float%" ID="float" Title="Float" ReadOnlyText=""><Type t="picklist.Picklist"><Options t="picklist.OptionsInplace"><Options t="picklist.SimpleOptions" Options="left,right"/></Options><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="picklist.SystemPopup"><FooterOperation t="css_dt.W3CHelp" Url="http://www.w3.org/wiki/CSS/Properties/float"/></PopupStyle></ControlStyle></Type><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 52px;"/></Field><Field t="field.Field" FieldData="%!@color%" ID="color" Title="Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 65px;"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/><FieldAspect t="field_aspect.Css" Inline="border-left: 4px solid %%;"/></Field><Field t="field.Field" FieldData="%!@background_color%" ID="background_color" Title="Bg Color" ReadOnlyText=""><Type t="css_dt.ColorWithLargePicker"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 65px;"/><FieldAspect t="field_aspect.Css" Inline="border-left: 4px solid %%;" OnElement="content" OnCondition="%% != \'\'"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Result" RefreshOn="exit field" RefreshScope="screen"/></Field></Field><Field t="field.Group" HideTitle="true" ID="Result" Title="Result"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="20px"/></Layout><Aspect t="uiaspect.RunAction"><RunBeforeControl t="css_dt.RefreshScript" Condition="%$data/@disable_designer% != \'true\'"/></Aspect><FieldAspect t="field_aspect.Css" Inline="padding:5px 18px"/><Operations t="operation.Operations"/><FieldAspect t="field_aspect.Hide" New="true" Edit="true" ReadOnly="true"/></Field></xtml></Component><Component id="CssDesigner" type="field.Fields"><xtml t="field.Layout"><Layout t="group.Vertical"/><Field t="field.Group" HideTitle="true" ID="Tabs" Title="Tabs"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="20px"/></Layout><Field t="field.Field" FieldData="%!$data/!@current_selector%" ID="locator" Title="Locator" ReadOnlyText=""><Type t="picklist.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="true" Multiple="false" Mandatory="false" RecalculateForEachCell="true"><Options t="picklist.DynamicOptions" Options="%$data/Block/Css/@selector%" OptionCodeByIndex=""><OptionLabel t="data.Pipeline" customxtml="true"><Item value="%% (%$count%)"/><Var name="count" t="data.Pipeline"><Item t="data.Pipeline"><Item value="%$data/Block/Css[@selector = \'{}\']%"/><Item t="css_dt.WorkingElementToCss"/><Item t="text.Split" Separator=";"/><Aggregator t="data.Count"/></Item></Var></OptionLabel></Options></Type><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="position:absolute;margin: 0 0 0 192px;" OnElement="cell"/><FieldAspect1 t="field_aspect.RefreshDependentFields" FieldsIds="Tabs" RefreshOn="every click" RefreshScope="screen"/><FieldAspect t="field_aspect.DefaultValue" Value="%$data/Block/Css[1]/@selector%"/><FieldAspect t="field_aspect.HandleEvent" Event="update"><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="Tabs"/></FieldAspect></Field><Field t="field.TabControl" ID="TabControl" Title="Tabs"><FieldAspect t="field_aspect.FieldData" FieldData="%$data/Block/Css[@selector = \'{$data/@current_selector}\']%"/><Style t="tabcontrol.CustomStyle"><Html><![CDATA[<div><div class="tabs"><div class="aatabs_tab"><div class="aatabs_tab_image"/><div class="aatabs_tab_text"/></div></div><div class="separator"/><div class="aatabs_contents"/></div>]]></Html><Css><![CDATA[#this >div>div.aatabs_tab { float: left; color:#002FA7; font-size: 11px;   padding: 7px 10px 0 0; }#this >div>div>div.aatabs_tab_text { cursor: pointer; }#this >div>div.aa_selected_tab { font-weight:bold; text-decoration:underline; }#this >div>div>div.aatabs_tab_image { float: left; }#this >.aatabs_contents { color:black; padding: px 0 15px px; margin: 15px 0 0 0;   clear: both; width: 380px; padding-left: 8px;}>.separator { color:black; width: 100\\%; margin: 6px 0 0 0;   box-shadow:  0 0 1px 1px                       grey; }>.tabs { height: 20px; padding: 0 0 0 px; }#this { width: 100\\%; }]]></Css><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {              tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);               tab.setImageSource(\'.aatabs_tab_image\',tab.Image);      tab.setOnClick(\'\',tab.Select); });}]]></Javascript></Style><Field t="field.CustomControl" ID="Css_dt_Size" Title="Size &amp; Position"><Control t="field.ShowFieldControl"><Var name="CssWorkingElement"/><Field t="css_dt.Size"/></Control></Field><Field t="field.CustomControl" ID="Css_dt_Shadow" Title="Effects"><Control t="field.ShowFieldControl"><Var name="CssWorkingElement"/><Field t="css_dt.Effects"/></Control></Field><Field t="field.CustomControl" ID="Css_dt_Text" Title="Text"><Control t="field.ShowFieldControl"><Var name="CssWorkingElement"/><Field t="css_dt.Font"/></Control></Field></Field></Field></xtml></Component><Component id="ColorPicker" type="field.Fields"><Param name="FieldData" Default="%%"/><Param name="TempData"><Default t="xml.Xml"/></Param><xtml t="field.Layout"><Layout t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[{ width: 740px; } #this >.field {margin-bottom:5px;}]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field)      {       field.setControl(\'.field\');       }  );;}]]></Javascript></Layout><Field t="field.Group" HideTitle="true" ID="CurrentColor" Title="current color"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="4px"/></Layout><Operations t="operation.Operations"/><Field t="field.Control" ID="Control" Title="Control"><Control t="field_control.CustomControl"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[{ width: 45px; height: 25px; border-radius: 7px; box-shadow: 0 0 5px 0 #F4EFE6; }]]></Css><Javascript><![CDATA[function(html_elem,context) {     var hex = jBart.get(\'\\%$FieldData\\%\',[],context);    jQuery(html_elem).css(\'background\',hex );} ]]></Javascript></Control></Field><Field t="field.Field" FieldData="%!$FieldData%" ID="CurrentColorHex" Title="CurrentColor" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.HandleEvent" Event="enter pressed"><Action t="operation.RunXtmlAction"><Action t="picklist.SetPicklistValue" Value="%%" ClosePopup="true"/></Action></FieldAspect><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 54px;"/><FieldAspect t="field_aspect.BorderAndShadow" Inline="border-radius: 5px;"/></Field><Field t="field.Button" ID="Button" Title="add to pallete"><Style t="button.Hyperlink"/><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="css_dt.AddColorToPallete" Hex="%$FieldData%"/><Action t="field.RefreshField" FieldID="custom_colors" Scope="screen"/><Action t="action.WriteValue" To="%$TempData/@suspendMDMode%"/></Action></Action><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="position:absolute;margin: 9px 0 0 0;"/></Field></Field><Field t="field.XmlMultipleGroup" ID="custom_colors" Title="custom colors" TitleForSingle="color" HideTitle="true"><Items t="field.CustomDataItems"><DataItems t="data_items.CustomData"><Items t="data.List"><Item t="data.Pipeline"><Item t="css_dt.GetOrCreatePallete"/><Item value="%colors/c%"/></Item><Item value="%$_BartContext/StyleGuide/ColorPallette/colors/c%"/></Items></DataItems></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"/></div>]]></Html><Css><![CDATA[#this>.item { width: 52px; height: 28px; border-radius: 3px; border: 1px solid #EDEDED;   float:left; }#this>.item:hover { border: 1px dashed grey; }]]></Css><Javascript><![CDATA[function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {      var hex = item.data[0].getAttribute(\'hex\');    var name = item.data[0].getAttribute(\'name\');                                         jQuery(item).css(\'background\',hex );  });}]]></Javascript></Style></Presentation><Aspect t="uiaspect.ReadOnly"/><Operations t="operation.Operations"/><Aspect t="uiaspect.HighlightSelectionOnHover"><Action t="operation.RunActions" Condition="%$TempData/@suspendMDMode% != \'true\'"><Action t="picklist.SetPicklistValue" Value="%@hex%" ForPreviewOnly="true"/><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$FieldData%" Value="%@hex%"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="Refine,CurrentColor"/></Action></Aspect><Aspect t="uiaspect.DoOnSelection"><Action t="operation.RunActions"><Action t="picklist.SetPicklistValue" Value="%@hex%" ForPreviewOnly="" ClosePopup="true"/></Action></Aspect><Aspect t="uiaspect.ItemSelection" KeyboardSupport="true" IncludeSubContainers="false" PropagateSelection="" AutoSelectFirstItem="false" MouseSupport="mouse click"/><Aspect t="uiaspect.DragAndDropItems"/></Field><Field t="field.XmlMultipleGroup" ID="colors0" Title="colors" TitleForSingle="color" HideTitle="true"><Items t="field.CustomItems"><Items t="data.Pipeline"><Item t="css_dt.PreDefinedColors" customxtml="true"><Item t="css_dt.Colors"/><Item value="%group%"/></Item><Item value="%group%"/></Items></Items><Operations t="operation.Operations"/><Aspect t="uiaspect.ReadOnly"/><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.FontAndText" Inline="font-family:\'Comic Sans MS\', cursive;font-size: 13px;"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="padding: 0 0 6px 0;"/></Field><Field t="field.XmlMultipleGroup" ID="colors1" Title="colors" TitleForSingle="color" HideTitle="true"><Items t="field.CustomItems"><Items t="data.Pipeline" customxtml="true"><Item value="%c%"/></Items></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"/></div>]]></Html><Css><![CDATA[#this>.item { float:left; width: 18px; height: 18px; border-radius: 3px;   border: 1px solid #EDEDED; }#this>.item:hover { border: 1px dashed grey; }]]></Css><Javascript><![CDATA[function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {      var hex = item.data[0].getAttribute(\'hex\');    var name = item.data[0].getAttribute(\'name\');                                         jQuery(item).css(\'background\',hex );  });}]]></Javascript></Style></Presentation><Aspect t="uiaspect.ReadOnly"/><Operations t="operation.Operations"/><Aspect t="uiaspect.HighlightSelectionOnHover"><Action t="operation.RunActions" Condition="%$TempData/@suspendMDMode% != \'true\'"><Action t="picklist.SetPicklistValue" Value="%@hex%" ForPreviewOnly="true"/><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$FieldData%" Value="%@hex%"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="Refine,CurrentColor"/></Action></Aspect><Aspect t="uiaspect.DoOnSelection"><Action t="operation.RunActions"><Action t="picklist.SetPicklistValue" Value="%@hex%"/><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$TempData/!@suspendMDMode%" Value="true"/></Action><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$FieldData%" Value="%@hex%"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="Refine"/></Action></Aspect><Aspect t="uiaspect.ItemSelection" KeyboardSupport="true" IncludeSubContainers="false" PropagateSelection="" AutoSelectFirstItem="false" MouseSupport="mouse click"/><Aspect t="uiaspect.OnDoubleClick"><Action t="picklist.SetPicklistValue" Value="%@hex%" ClosePopup="true"/></Aspect></Field><Presentation t="uiaspect.ItemList"><Style t="itemlist.HorizontalSlider" Width="660px" ItemWidth="200px"/></Presentation></Field><Field t="field.Group" Title="Refine" ID="Refine"><Layout t="uiaspect.Group"><Style t="group.Vertical" CssOnElement="margin-bottom:5px;position:relative;"/></Layout><Field t="field.XmlMultipleGroup" ID="colors2" Title="colors" TitleForSingle="color" HideTitle="true"><Items t="field.CustomItems"><Items t="data.Pipeline" customxtml="true"><Item t="css_dt.RelatedColors" Color="%$FieldData%"/></Items></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item {width: 17px; height: 18px; border-radius: 3px; padding: 0 0 0 2px;margin: 2px;border: 1px solid #EDEDED;float:left;}#this>div>.fields {font-family:\'Arial\'; font-size: 12px; vertical-align:top;padding-left:5px;padding-top: 10px;}#this>.item.current {box-shadow: 0 0 11px 2px      black;}#this>.item:hover {box-shadow: 0 0 11px 2px      black;}]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {         jQuery(item).css(\'background\', item.data[0].color);    if (item.data[0].current) jQuery(item).addClass(\'current\');});}]]></Javascript></Style></Presentation><Aspect t="uiaspect.HighlightSelectionOnHover"><Action t="operation.RunActions"><Action t="picklist.SetPicklistValue" Value="%color%" ForPreviewOnly="true"/><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$TempData/!@suspendMDMode%" Value=""/></Action><Action t="operation.ChangeItem" RefreshItem="false"><Change t="operation.ChangeValue" Entry="%$FieldData%" Value="%color%"/></Action><Action t="field.RefreshField" FireOnUpdate="" Scope="screen" FieldID="ColorTitle,CurrentColor"/></Action></Aspect><Aspect t="uiaspect.ItemClickable" PointerCursor="true"><ClickAction t="operation.RunActions"><Action t="picklist.SetPicklistValue" Value="%color%" ClosePopup="true"/></ClickAction></Aspect><Aspect t="uiaspect.ItemSelection" KeyboardSupport="true" IncludeSubContainers="false" PropagateSelection="" AutoSelectFirstItem="false" MouseSupport="mouse click"/><Operations t="operation.Operations"/></Field><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 636px; height: 87px; padding: 0 0 0 56px;"/><FieldAspect t="field_aspect.JavaScript" RunWhen="control"><Code><![CDATA[function(data,html_elem,field,context) {  jQuery(html_elem).mouseover(function() {     jBart.set("\\%$TempData/@suspendMDMode\\%",\'\',\'\',context);  });}]]></Code></FieldAspect></Field></xtml></Component><Component id="FontPicker" type="field.Fields"><xtml t="field.Layout"><Layout t="group.Vertical"/><DefaultResource t="bart.CustomData"><DataItems t="xml.XmlItems"/></DefaultResource><Field t="field.XmlMultipleGroup" ID="fonts" Title="fonts" TitleForSingle="font" HideTitle="true"><Items t="field.CustomItems"><Items t="css_dt.Fonts"><Item t="data.Pipeline"><Item t="sample.Palletes"/><Item value="%fonts/*%"/></Item><Item t="data.Pipeline" customxtml="true"><Item t="css_dt.SafeFonts"/><Item value="%Font%"/></Item></Items><AddNewItem t=""/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="font_name">Ariel</div><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item { position: relative; float:left; color:black; font-size: 11px; width: 130px;   height: 30px; border-radius: 10px; padding: 5px 10px 10px 10px;   margin: 10px 10px 0 0; border: 1px solid #A3A3A3; cursor:pointer; }#this>div>.fields { }>div>.font_name { text-align:right; position:absolute; width: 132px; margin: 24px 0 0 0; }#this { width: 811px; }#this>.item:hover { font-family:Times; color:black; background-color:#CECECE;   box-shadow:  2px 2px 3px 1px  grey; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {      var name = item.data[0].getAttribute(\'name\');    jQuery(item).find(\'>.font_name\').text(name);    item.setFields(\'.fields\');  });}]]></Javascript><![CDATA[]]></Style></Presentation><Aspect t="uiaspect.ReadOnly"/><FieldAspect t="field_aspect.Section" HideTitle="true" CollapsedByDefault=""><Style t="section.Default"/></FieldAspect><Operations t="operation.Operations"/><Field t="field.Text" ID="Text" Title="text" Text="Hello World 3"><Style t="uitext.CustomStyle"><Html><![CDATA[<div />]]></Html><Css><![CDATA[#this { font-size: 16px; margin: 7px 0 0 0; }]]></Css><Javascript><![CDATA[function(text) {   var font = jBart.get(\'\\%@family\\%\',text.data);  text.setInnerHTML(\'\',text.text);   jQuery(text).css(\'font-family\',font);}]]></Javascript></Style></Field><Aspect t="uiaspect.HighlightSelectionOnHover"><Action t="operation.RunXtmlAction"><Action t="picklist.SetPicklistValue" ForPreviewOnly="true" Value="%@family%"/></Action></Aspect><Aspect t="uiaspect.DoOnSelection"><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="dialog.ClosePopup"/></Action></Action></Aspect><FieldAspect t="field_aspect.OnClick"><Action t="operation.RunXtmlAction"><Action t="dialog.ClosePopup"/></Action></FieldAspect></Field><Field t="field.PropertySheet" ID="PropertySheet" Title="new font"><Style t="group.TitlesAboveFields" HorizontalSpacing="5px" VerticalSpacing="">&#xa;&#xa;                </Style><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Font Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 77px;"/><FieldAspect t="field_aspect.Writable"/></Field><Field t="field.Field" FieldData="%!@family%" ID="css" Title="Font Family (as defined in css)" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Writable"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 174px;"/></Field><GroupData t="group.DataFlow"><FlowData t="xml.Xml" customxtml="true"><Font/></FlowData></GroupData><Field t="field.Field" FieldData="%!@url%" ID="font_external_url" Title="Font Css File Url" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="width: 301px;"/></Field><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 23px 0 0 7px;"><Css><![CDATA[]]></Css></FieldAspect><Field t="field.Group" HideTitle="true" ID="Group" Title="buttons"><Layout t="uiaspect.Group"><Style t="group.Horizontal" Spacing="15px"/></Layout><Operations t="operation.Operations"/><Field t="field.Button" ID="Button" Title="add custom font"><Style t="button.Hyperlink"/><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="css_dt.AddFontToPallete" FontElement="%%"/><Action t="picklist.RecalcPicklistOptions"/><Action t="ui.LoadCssFile" Url="%@url%" Condition="%@url% != \'\'"/><Action t="picklist.SetPicklistValue" Value="%@family%" ClosePopup="true"/></Action></Action><Image t=""/></Field><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 21px 0 0 0;"/></Field></Field></xtml></Component><Component id="Palletes" type="data.Data"><xtml t="xml.Xml"><pallete><colors name="custom"><c name="" hex="#417DC1"/><c name="" hex="#96C8A2"/><c name="" hex="#A3C1AD"/><c name="" hex="#CD5700"/><c name="" hex="#B7410E"/><c name="" hex="#003D68"/><c name="" hex="#FF00FF"/><c name="" hex="#00FFFF"/><c name="" hex="#FADFAD"/><c name="" hex="#89CFF0"/><c name="" hex="#E34234"/><c name="" hex="#ccc"/><c name="" hex="#FF6F5E"/><c name="" hex="#123524"/></colors><fonts><Font name="Lovers" family="\'Lovers Quarrel\', cursive" url="http://fonts.googleapis.com/css?family=Lovers+Quarrel"/><Font name="lucida" family="&quot;lucida grande&quot;,tahoma,verdana,arial,sans-serif;" url=""/></fonts></pallete></xtml></Component></xtml><xtml ns="field_dt"><Component id="TreeItemImage" type="data.Data" execution="native" /><Component id="PaneBottomMargin" type="data.Data"><xtml t="data.IfThenElse" Then="20" Else="20"><If t="yesno.IsEmpty" Value="%$GalleryNode/@id%" /></xtml></Component><Component id="HasPanes" type="data.Boolean"><xtml t="ui.UrlFragment" Attribute="dtpanes" /></Component><Component id="FieldDetails" type="ui.Control"><xtml t="ui.Section" Class="field_details"><Var name="FieldXtml"/><Control1 t="ui.Text" Class="field_title"><Text t="text.FirstSucceeding"><Item value="%@Title%"/><Item value="%@ID%"/></Text></Control1><Control t="ui.Document"><Fields t="field.Fields"><Field t="field.Text1" Title="Type" ShowTitle="true"><Condition t="yesno.And"><Item value="%@t%!=\'field.Field\'"/><Item value="%@t%!=\'field.Group\'"/><Item value="%@t%!=\'field.XmlField\'"/><Item value="%@t%!=\'field.XmlGroup\'"/><Item value="%@t%!=\'field.XmlMultipleGroup\'"/><Item t="xml.IsOfTag" Tag="Field"/></Condition><Text t="xtml_dt.ComponentToLowerCase" Data="%@t%"/></Field><Field t="xtml_dt.ParamsAsFields"/></Fields><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Operations t="operation.Operations"/></Control><Control t="ui.IfThenElse"><If t="yesno.And"><Item t="xtml.ComponentHasParam" Component="%@t%" Param="FieldAspect"/><Item t="xtml.ComponentHasParam" Component="%@t%" Param="Aspect"/></If><Then t="ui.List"><Control t="ui.Section" Title="Features"><Control t="field_dt.DualFeatureList"/></Control><Control t="ui.Section" Title="Operations"><Data t="xtml_dt.ToCompositeParam" Param="Operations" PTForComposite="operation.Operations"/><Condition t="xtml.ComponentHasParam" Component="%../@t%" Param="Operations"/><Control t="uiaspect_dt.EditOperationsTable"/></Control></Then><Else t="ui.List"><Control t="ui.Section" Title="Features"><Condition t="xtml.ComponentHasParam" Component="%@t%" Param="FieldAspect"/><Control t="ui.ItemList" Name="features"><Var name="FieldXtml" value="%%"/><Items t="xml.XmlItems" Tag="FieldAspect" ItemTypeName="Feature"/><Fields t="field.Fields"><Field t="field.Field1" Title="Feature"><FieldAspect t="field_aspect.Control"><Control t="field_dt.ComponentInTable" Xtml="%%"/></FieldAspect><FieldAspect t="field_aspect.ColumnWidth" Width="250px"/><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field></Fields><Presentation t="uiaspect.Table"/><Aspect t="uiaspect.DragAndDropMover"/><Aspect t="uiaspect.TableNoItems"/><Aspect t="uiaspect.InheritSelection" Inherit="false"/><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false" Toolbar="false"/><Aspect1 t="uiaspect.ItemSelection" OnDoubleClick=""/><Aspect1 t="xtml_dt.XtmlItemDetails" Type="field.FieldAspect"/><Aspect t="uiaspect.DeleteOnHover"><DoAfterDelete t="field_dt.RefreshPreview"/></Aspect><Aspect t="uiaspect.HeaderFooter"><Control t="headerfooter.FastAddItem" IncludeAddButton="false"><Page t="ui.ItemPage"><Field t="field_dt.AddFeatureField" Type="field.FieldAspect"/></Page></Control></Aspect><Aspect t="uiaspect.TableNoItems" HideTable="true"/></Control></Control><Control t="uiaspect_dt.EditItemList" Xtml="%%"><Data t="field_dt.XtmlForItemList" BaseXtml="%%"/><Condition t="xtml.ComponentHasParam" Component="%@t%" Param="Aspect"/><ItemsForPreview t="data.Pipeline" Comment="TODO: support inner fields"><Item t="bart_dt.PagePreview" Page="%Preview%"/><Item t="ui.ElementOfClass" Cls="aa_container"/><Item t="uiaspect.ContainerFromControl" Control="%%"/><Item value="%Items/Items%"/></ItemsForPreview></Control></Else></Control></xtml></Component><Component id="AddFeatureFieldOptions" type="data.Data" execution="native"><Param name="Type" /><Param name="Xtml" /><NativeHelper name="BuildCache" t="aaeditor.ComponentsOfTypeNew" Type="%$Type%" LightOnly="true" /></Component><Component id="AddFeatureField" type="field.Fields"><Param name="Type"/><Param name="NewSearchBox" type="data.Boolean" Default="true" /><Param name="Xtml" description="The xtml to add the feature to" Default="%%" /><xtml t="data.IfThenElse" If="%$NewSearchBox%" ><Then t="field.SearchBox" ID="Add_Feature" Title="Add Feature" DefaultImage="" PoweredByJBart="false" SearchIn="title and extra text" ItemLink="%../@ns%.%@id%"><Var name="Components" t="field_dt.AddFeatureFieldOptions" Type="%$Type%" Xtml="%$Xtml%" /><Items value="%$Components%" /><PromotedItems value="%$Components[@promoted=\'true\']%" /><ItemExtraText value="%$Category%%@description%"><Var name="Category" value="%@category% category. "><Condition t="yesno.NotEmpty" Value="%@category%" /></Var><Var name="Type" t="data.Switch" Value="%@type%"><Case If="field.FieldAspect" Then="Field" /><Case If="uiaspect.Aspect" Then="List" /></Var></ItemExtraText><ItemImage t="data.FirstSucceeding"><Item t="xtml.RunXtml" Xtml="%@image%"><Condition t="yesno.NotEmpty" Value="%@image%"/></Item><Item value="%$_Images%/studio/bonuses2421.gif" Condition="%@type% == \'field.FieldAspect\'" /><Item value="%$_Images%/studio/feature_24.png" Condition="%@type% == \'uiaspect.Aspect\'" /></ItemImage><ItemTitle t="text.Capitalize" Data="%@id%" Mode="capital to separate words" /><DoOnSelect t="xml.AddToXmlItems" Items="%$_OriginalCntr/Items%"><Condition t="yesno.NotEmpty" Value="%%" /><Var name="_Cntr" value="%$_OriginalCntr%" /><Var name="ComponentDef" t="xtml.ComponentDefinition" ID="%%" /><Var name="Type" value="%$ComponentDef/@type%" /><Xml t="xml.ByTag"><Tag t="data.IfThenElse" If="%$ComponentDef/@type%==\'uiaspect.Aspect\'" Then="Aspect" Else="FieldAspect" /><Change t="xml.SetAttribute" AttributeName="t" Value="%%" /></Xml><DoOnAddedXml t="action.RunActions"><Action t="xtml.RunXtml" Xtml="%$ComponentDef/ParamGenerator%" /><Action t="uiaction.AddItemElement" Item="%%" SelectIt="true"><DoOnAddedElement t="uiaction.Click" RunOn=".aa_field_toolbar_image"/></Action><Action t="field_dt.RefreshPreview" /><Action1 t="uiaction.Refresh" RunOn="up(.fielddt_addfeature)" /></DoOnAddedXml></DoOnSelect><FieldAspect t="field_aspect.ImageInTextbox" Image="%$_Images%/add1616.gif" CssForImage="margin: 0 0 -4px -22px"/>?        <FieldAspect t="field_aspect.Css" OnElement="content" Inline="font-size:11px;-webkit-border-radius: 5px; width:265px; margin-bottom:5px;"/><FieldAspect t="field_aspect.PopupPage1"><Page t="uiaspect.SearchLayout" ImageSize="24,24" TextMaxLength="50" ItemSize="300,30"/></FieldAspect></Then><Else t="field.XmlField" Path="@t" Title="Add Feature" ID="Add_Feature"><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="true"><Options t="field_dt.ComponentsWithCategories" Type="%$Type%"/></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="action.RunActions"><Var name="ComponentDef" t="xtml.ComponentDefinition" ID="%%"/><Action t="xtml.RunXtml" Xtml="%$ComponentDef/ParamGenerator%" Input="%..%"/><Action t="headerfooter.DoAddItem" SelectIt="true"><Condition t="yesno.NotEmpty"/><DoOnAddedElement t="action.RunActions"><Action t="uiaction.Click" RunOn=".aa_field_toolbar_image"/><Action t="field_dt.RefreshPreview"/></DoOnAddedElement></Action></Action></FieldAspect><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Add Feature"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Css" Inline="margin-bottom:5px; width: 265px;"/></Else></xtml></Component><Component id="FieldTreeItemsDecorator" type="data_items.Items" light="false" execution="native" description="Adds inner pages"><Param name="DataItems" /></Component><Component id="FieldTreeItems" type="data_items.Items"><Param name="RootXtml" /><xtml t="data_items.Items" Items="%$RootXtml%"><Aspect t="data_items.RecursiveNextLevel"><NextLevel t="field_dt.FieldTreeItemsDecorator"><DataItems t="data.IfThenElse"><Var name="ParentField" t="data.FirstSucceeding"><Item value="%Page%" Remark="for inner page of embedded content types" /><Item value="%%" /></Var><If t="field_dt.IsGroup" Data="%$ParentField%" /><Then t="xml.XmlItems" Parent="%$ParentField%" Tag="Field,Fields" ><ElementCondition t="yesno.ItemsNotEqual" Item1="%@t%" Item2="field.AddFieldsHere" /></Then><Else t="data.Switch"><Case IfCondition="%@t% == \'field.SearchBox\'"><Then t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%FieldAspect[@t=\'field_aspect.PopupPage\']%" /><Then t="data_items.Items" Items="%$Feature%"><Var name="Feature" t="data.CreateIfDoesNotExist" Query="%FieldAspect[@t=\'field_aspect.PopupPage1\']%"><Create t="xml.AddXmlChildren" Parent="%%"><Children t="xml.Xml"><FieldAspect t="field_aspect.PopupPage1" /></Children></Create></Var><Var name="SetTitle" t="action.WriteValue" To="%$Feature/!@Title%" Value="Results" /></Then><Else t="data_items.Items" Items="%FieldAspect[@t=\'field_aspect.PopupPage\']/Group%" /></Then></Case><Case IfCondition="%@t% == \'jbart.Page\'"><Then t="data_items.Items" ><Var name="PageId" t="text.Split" Separator="." Data="%Page/@t%" Part="Second" /><Items value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'{$PageId}\']/xtml%" /></Then></Case><Case IfCondition="%@t% == \'bart.Application\'"><Then t="data_items.Items" ><Items t="field_dt.NodesInProjectTree" /></Then></Case></Else></DataItems></NextLevel></Aspect></xtml></Component><Component id="NodesInProjectTree" type="data.Data"><xtml t="data.Pipeline"><Item t="xml.Xml"><dttree><dtnode dtEditor="bart_dt.Plugins" Title="Plugins" image="%$_Images%/studio/plugin21616.png" /><dtnode dtEditor="bart_dt.XtmlComponents" Title="Xtml Components" image="%$_Images%/studio/customize1616.gif" /><dtnode dtEditor="bart_dt.Resources" Title="Data Resources" image="%$_Images%/studio/file.png" /><dtnode dtEditor="bart_dt.PagesNew" Title="Pages" image="%$_Images%/studio/page1616.gif" /><dtnode dtEditor="bart_dt.ContentTypes" Title="Quick Links" image="%$_Images%/studio/parachute1616.png" /><dtnode dtEditor="bart_dt.ExternalJSFiles" Title="External JS" image="%$_Images%/studio/js.png" /></dttree></Item><Item value="%dtnode%" /></xtml></Component><Component id="XtmlForItemList" type="data.Data"><Param name="BaseXtml" /><xtml t="data.FirstSucceeding" Data="%$BaseXtml%"><Item value="%Page%" Condition="%Page/@t%==\'ui.ItemPage\'" /><Item value="%Page%" Condition="%Page/@t%==\'ui.MultiplePage\'" /><Item value="%%" /></xtml></Component><Component id="TitleField" type="field.FieldAspect"><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.HandleEvent" Event="update"><Action t="action.RunActions"><Action t="cntr.RefreshSelectedTextAndImage"><Cntr t="cntr.ContainerOfElement" RunOn=".jbstudio_tree" /></Action><Action t="action.RunActions" Condition="%$_StudioIsNewItem%" ><Var name="NewID" t="text.ToId" Text="%%" UsedIDs="%../../@ID%" /><Action t="action.WriteValue" To="%../@ID%" Value="%$NewID%" /><Action t="field.RefreshField" FieldID="dt_id" Scope="screen" /><Action t="action.RunActions"><Action t="action.WriteValue" To="%../@FieldData%" Value="\\%@%$NewID%\\%" /><Action t="field.RefreshField" FieldID="dt_field_data" Scope="screen" /></Action></Action></Action></FieldAspect><FieldAspect t="field_aspect.HandleEvent" Event="enter pressed"><Action t="action.RunActions"><Action t="cntr.RefreshSelectedTextAndImage"><Cntr t="cntr.ContainerOfElement" RunOn=".jbstudio_tree" /></Action><Action t="field_dt.RefreshPreview" /></Action></FieldAspect></xtml></Component><Component id="NewFieldBasicFields" type="field.Fields"><Param name="IsAttribute" /><Param name="PathCalculated"><Default value="true" /></Param><xtml t="field.Fields"><Field t="field.XmlField" Path="@Title"><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="ID,Path" /><FieldAspect t="field_aspect.Mandatory" /></Field><Field t="field.XmlField" Path="@ID" Title="Field Name" ID="ID"><FieldAspect t="field_aspect.Calculated" ManualOverride="true"><Formula t="text.Capitalize" Mode="separate words to capital" Data="%@Title%" /></FieldAspect></Field><Field t="field.XmlField" Path="@Path" Title="Path in Xml"><FieldAspect t="field_aspect.Calculated" ManualOverride="true" Condition="%$PathCalculated%"><Formula value="%$Prefix%%$ID%"><Var name="ID" t="text.Capitalize" Mode="separate words to capital" Data="%@Title%" /><Var name="Prefix" t="data.IfThenElse" If="%$IsAttribute%" Then="@" Else="" /></Formula></FieldAspect></Field></xtml></Component><Component id="AddField" type="action.Action"><Param name="Xtml" /><Param name="DataItems" /><Param name="ParentElement"><Default value="%$_ElemsOfOperation%" /></Param><Param name="MoreItemsComing" type="data.Boolean" /><xtml t="xml.AddToXmlItems" Xml="%$Xtml%"><Var name="IsLastItem" t="yesno.Not" Of="%$MoreItemsComing%" /><Items t="data.FirstSucceeding"><Item value="%$DataItems%" /><Item value="%$ChildDataItems%" /><Item value="%$_Items%" /></Items><DoOnAddedXml t="action.RunActions"><Action t="uiaction.AddItemElement" Item="%%" ParentElement="%$ParentElement%" SelectIt="%$IsLastItem%" /><Action t="field_dt.RefreshPreview" Condition="%$IsLastItem%" /></DoOnAddedXml></xtml></Component><Component id="IsGroup" type="data.Boolean"><xtml t="yesno.OR"><Item t="xtml.ComponentHasParam" Param="Field" Component="%@t%" /><Item t="xtml.ComponentHasParam" Param="Fields" Component="%@t%" /></xtml></Component><Component id="ToGroupXtml" type="data.Data"><Param name="ParentXtml" /><xtml t="xml.WithChanges"><Var name="ID" t="text.ToId" Text="%@Title%" UsedIDs="%$ParentXtml/Field/@ID%" /><Var name="HideTitle" t="yesno.Not" Of="%@Is_Section%" /><Xml t="xml.Xml" DynamicContent="true"><Field t="field.Group" ID="%$ID%" Title="%@Title%" HideTitle="%$HideTitle%"><FieldAspect t="field_aspect.Section" /></Field></Xml><Change t="xml.Delete" Data="%FieldAspect%" Condition="%$HideTitle%" /></xtml></Component><Component id="ToListXtml" type="data.Data"><Param name="ParentXtml" /><Param name="NewItemList" type="data.Boolean"/><xtml t="data.IfThenElse" If="%$NewItemList%"><Var name="ID" t="text.ToId" Text="%@Title%" UsedIDs="%$ParentXtml/Field/@ID%" /><Var name="Title" value="%@Title%" /><Var name="HideTitle" t="yesno.Not" Of="%@Is_Section%" /><Var name="ReadOnly" value="%@read_only%" /><Var name="Writable" t="yesno.Not" Of="%@read_only%" /><Var name="ItemName" t="text.Capitalize" Data="%@TitleForSingle%" /><Var name="ItemNameID" t="text.ToId" Text="%$ItemName%" /><Var name="Path" value="%@Path%" /><Var name="PathParent" t="text.RemoveSuffix" Text="%@Path%" Separator="/"/><Var name="PathTag" t="text.FirstSucceeding"><Item t="text.Split" Part="Last" Text="%$Path%" Separator="/" /><Item value="%$Path%" /></Var><Then t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Field t="field.Layout" ID="%$ID%_Top" Title="%$Title%_Top"><FieldAspect t="field_aspect.ItemListContainer"><Items t="itemlist.XmlItems" ParentXml="\\%!%$PathParent%\\%" Tag="%$PathTag%"/></FieldAspect><Field t="field.Layout" ID="%$ID%_Toolbar" Title="Toolbar"><Layout t="layout.HorizontalHtmlTable" /><FieldAspect t="itemlist_aspect.RefreshOnSelectionChange"/><Field t="field.Button" ID="Add_%$ItemNameID%" Title="Add %$ItemName%"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/add1616.gif"/><Action t="operation.OpenDialog" Title="Add %$ItemName%"><DialogData t="xml.ByTag" Tag="%$PathTag%"/><Contents t="ui.InnerPage" Title="Add %$ItemName%"><Field t="field.PropertySheet" ID="PropertySheet" Title="Properties" HideTitle="true" /></Contents><RunOnOK t="itemlist_action.AddItemToItemList" /></Action></Field><Field t="field.Button" ID="Delete_%$ItemNameID%" Title="Delete %$ItemName%"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/delete1616.gif"/><Action t="itemlist_action.DeleteSelectedItem"/></Field></Field>​            <Field t="field.ItemList" Title="%$Title%" ID="%$ID%_List"><View t="itemlist2.JBartTable" /></Field></Field></Xml><Var name="ChildFields" t="data.Pipeline"><Condition t="yesno.NotEmpty" Value="%@Fields%" /><Item t="text.Split" Data="%@Fields%" Separator="," /><Item t="field_dt.FieldNameToXtml" /></Var><Change t="xml.Delete" Data="%Field[@Title=\'Toolbar\']%" Condition="%$ReadOnly%" /><Change t="xml.AddChildren" Data="%Field[@t=\'field.ItemList\']%" Children="%$ChildFields%" /><Change t="xml.AddChildren" Data="%Field[@Title=\'Toolbar\']/Field[1]/Action/Contents/Field%" Children="%$ChildFields%" CloneChildren="true"/></Then><Else t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Field t="field.XmlMultipleGroup" ID="%$ID%" Title="%@Title%" TitleForSingle="%@TitleForSingle%" HideTitle="%$HideTitle%"><Items t="field.InnerItems" Path="%@Path%" /><Presentation t="uiaspect.RichTable" /><Field t="field.OpenButton" Title="open" ID="Open" ExpandCollapseImages="true"><ButtonStyle t="ui.ButtonAsImage" HoverIndication="true" MultiLangImage="false"/></Field><Aspect t="uiaspect.DefaultFeatures" /><Aspect t="uiaspect.ReadOnly" /><Aspect t="uiaspect.ItemDetails" Transactional="false"><OpenIn t="uiaspect.DetailsInplace" /><OpenNewIn t="uiaspect.DetailsInplace" /></Aspect><FieldAspect t="field_aspect.Section" HideTitle="%$HideTitle%" /><Operations t="operation.Operations"><Operation t="operation.Operation" ID="NewItem" Title="New %$ItemName%" Target="new" Icon="%$_Images%/add1616.png" Shortcut="Alt+N" WritableOnly="true"><Action t="operation.New" /></Operation><Operation t="operation.Operation" ID="DeleteItem" Target="item" Title="Delete %$ItemName%" Icon="%$_Images%/delete1616.gif" Shortcut="Delete" WritableOnly="true"><Action t="operation.Delete" /></Operation></Operations></Field></Xml><Change t="xml.Delete" Data="%Aspect[@t=\'uiaspect.ReadOnly\']%" Condition="%$Writable%" /><Change t="xml.Delete" Data="%Operations%" Condition="%$ReadOnly%" /></Else></xtml></Component><Component id="FieldOperations" type="operation.Operations"><xtml t="operation.Operations"><Operation t="operation.Operation" Title="View This Page Only" Icon="%$_Images%/studio/page1616.png" ID="view_page"><Disabled value="%../@type% != \'jbart.MyWidgetPage\'" /><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?wpage=%@ID%"/></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh"/><Action t="bart_dt.EditXtmlInStudioBar" Xtml="%%" /></Action></Operation><Operation t="operation.DeleteItem"><DoAfter t="field_dt.RefreshPreview" /></Operation><Operation t="xtml_dt.AdvancedCustomizationOperation"><Condition1 t="field_dt.AdvancedMode" /></Operation><Operation t="operation.Operation" Title="Duplicate" Icon="%$_Images%/studio/duplicate.png" ID="duplicate" Disabled="\'jbart.MyWidgetPage\' == %../@type%"><Action t="xml.AddXmlChildren" Parent="%..%"><Children t="xml.WithChanges" Xml="%%"><Change t="xml.SetAttribute" AttributeName="Title" Value="Copy of %@Title%" /></Children><DoOnAddedChildren t="action.RunActions"><Action t="field_dt.RefreshPreview" /><Action t="bart_dt.EditXtmlInStudioBar" Xtml="%%"/></DoOnAddedChildren></Action></Operation></xtml></Component><Component1 id="NewFromData" type="operation.OperationAction" hidden="true"><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="New Fields By Data"><Var name="SuggestedCT" t="field_dt.ExtractXmlMetadata" SampleItems="%$PageSampleItems%" /><Content t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Title="Fields From Data" Path="@fields"><FieldAspect t="field_aspect.Picklist" Multiple="true"><Options t="picklist.DynamicOptions" Options="%$SuggestedCT/fields/Field%" OptionLabel="%@Title%" OptionCode="%@Path%"/></FieldAspect></Field></Fields></Content><DialogData t="xml.Xml"/><RunOnOK t="action.RunActions" Data="%$OriginalInput%"><Action t="action.RunActionOnItems"><Items t="text.Split" Data="%$DialogWorkingData/@fields%" Separator=","/><Action t="field_dt.AddField" Xtml="%$SuggestedCT/fields/Field[@Path=\'{}\']%"/></Action><Action t="field_dt.RefreshPreview"/></RunOnOK></Dialog></xtml></Component1><Component id="NewContentRefOperation" type="operation.OperationAction" hidden="true"><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Add Content Reference"><DialogData t="xml.ByTag" Tag="Field" /><Content t="ui.Document"><Fields t="field.Fields"><Field t="field_dt.NewFieldBasicFields" IsAttribute="false" /><Field t="xtml_dt.PTSelectorField" Type="bart_field.ContentRefField"><ParamsForOptionPage t="data.Pipeline"><Item t="xtml_dt.ParamsAsFields" Component="%$_PageParams/DataItems/Items/@t%" /><Item t="yesno.PassesFilter"><Filter t="yesno.NotInList" Item="%Param%"><List t="text.Split" Data="Path,Title,ID" /></Filter></Item></ParamsForOptionPage></Field></Fields></Content><RunOnOK t="action.RunActions"><Action t="xtml_dt.RunGenerations" Xtml="%$DialogWorkingData%" /><Action t="field_dt.AddField" Xtml="%$DialogWorkingData%" /></RunOnOK></Dialog></xtml></Component><Component id="AdvancedMode" type="data.Boolean"><xtml value="%$_BartDevDtContext/AdvancedMode%" /></Component><Component id="SimpleMode" type="data.Boolean"><xtml t="yesno.Not" Of="%$_BartDevDtContext/AdvancedMode%" /></Component><Component id="SelectedFieldInfo" execution="native" /><Component id="ExistingFieldsToAdd" type="data.Data" execution="native" dtsupport="false"><Param name="ParentField" /><Param name="ParentFieldPath" /><Param name="ContentType" /></Component><Component id="FieldsFromOtherPages" type="data.Data" execution="native" dtsupport="false"><Param name="FieldXtml" /></Component><Component id="OptionsTree" type="ui.Control"><Param name="Xtml" /><xtml t="ui.ItemList"><Items t="field_dt.FieldTreeItems" Xtml="%$Xtml%" /><Aspect t="uiaspect.DefaultFeatures" /><Aspect t="uiaspect.ItemImage" ItemImage="%$_Images%/studio/bullet1616.gif" /><Aspect t="uiaspect.ItemText" ItemText="%Preview/Title%" /><Aspect t="uiaspect.NextLevels"><NextLevelAspect t="uiaspect.NextLevels" /><NextLevelAspect t="uiaspect.ItemImage" ItemImage="%$_Images%/studio/bullet1616.gif" /><NextLevelAspect t="uiaspect.ItemText" ItemText="%Preview/Title%" /><NextLevelAspect t="uiaspect.TreeNode" /><NextLevelAspect t="uiaspect.Indent" /><NextLevelAspect t="uiaspect.ExpandCollapse" /></Aspect><Aspect t="uiaspect.Indent" /><Aspect t="uiaspect.ExpandCollapse" /><Operations t="operation.StdOperations" /></xtml></Component><Component id="RefreshPreview" type="action.Action"><Param name="RefreshParent" type="data.Boolean"/><xtml t="object.RunMethod" Object="%$_XtmlEditorContext%" Method="RefreshPreview" ><Param name="RefreshParent" value="%$RefreshParent%"/></xtml></Component><Component id="ComponentsWithCategories" type="picklist.OptionsDefinition" execution="native"><Param name="Type" /><Param name="OptionPage" type="ui.SinglePage" script="true" /><Param name="Xtml" description="used to show relevant dynamic categories, e.g. picklist" Default="%%"/><Param name="CurrentPT" description="used to show deprecated pts" /><NativeHelper name="Components" t="aaeditor.ComponentsOfTypeNew" Type="%$Type%" /></Component><Component id="ComponentsOfTypeOptions" type="picklist.OptionsDefinition" execution="native"><Param name="Type" /><Param name="OptionPage" type="ui.SinglePage" script="true" /><Param name="Xtml" description="used to show relevant dynamic categories, e.g. picklist" Default="%%"/><Param name="CurrentPT" description="used to show deprecated pts" /><NativeHelper name="Components" t="aaeditor.ComponentsOfTypeNew" Type="%$Type%" LightOnly="true"/></Component><Component id="OptionsEditor" type="ui.Control"><Param name="Xtml" /><xtml t="ui.ItemList"><Items t="xml.XmlItems" Tag="Item" ItemTypeName="Item1" Parent="%$Xtml%"><Aspect t="data_items.RecursiveNextLevel"><NextLevel t="xml.XmlItems" Tag="Item" ItemTypeName="Item2"><Aspect t="data_items.Filter" Filter="%@t% == \'picklist.Category\'" /></NextLevel></Aspect></Items><Aspect t="uiaspect.ItemText" ItemText="%@Name%" /><Aspect t="uiaspect.NextLevels"><NextLevelAspect t="uiaspect.ItemText" ItemText="%@Name%" /><NextLevelAspect t="uiaspect.Indent" /><NextLevelAspect t="uiaspect.ExpandCollapse" /><Operations t="operation.StdOperations" /><Fields t="field.XmlField" Path="@Name" /></Aspect><Aspect t="uiaspect.Indent" /><Aspect t="uiaspect.ExpandCollapse" /><Aspect t="uiaspect.SynchSelectionWithItemDetails" /><Aspect t="uiaspect.ItemDetails"><OpenIn t="uiaspect.DetailsInFixedLocation" /></Aspect><Aspect t="uiaspect.BottomLocation" /><Aspect t="uiaspect.Toolbar" AddNewUnderSelected="true" /><Aspect t="uiaspect.ItemSelection" /><Fields t="field.Fields"><Field t="field.XmlField" Path="@Name" /><Field t="field.XmlField" Path="@Image" /></Fields><Operations t="operation.StdOperations" /></xtml></Component><Component id="PreviewFieldData" type="data.Data"><xtml t="data.FirstSucceeding"><Var name="PageSingleItem" t="data.Pipeline"><Item value="%$PageSampleItems%" /><Aggregator t="data.First" /></Var><Item t="object.RunMethod" Method="FieldData" Input="%$PageSingleItem%"><Object t="xtml.RunXtml" Xtml="%$FieldXtml%" /></Item><Item value="%$PageSingleItem%" /></xtml></Component><Component id="GotoFieldOfFocus" type="action.Action" hidden="true" execution="native"></Component><Component id="BrotherFieldIDs" type="data.Data" execution="native"><Param name="FieldXtml"><Default value="%$FieldXtml%" /></Param></Component><Component id="FieldNameToXtml" type="data.Data"><xtml t="data.Pipeline"><Item t="text.Trim" /><Item t="data.Pipeline"><Var name="ID1" t="text.Replace" Find=" " ReplaceWith="_" /><Var name="Type" t="data.Switch" Value="%%"><Case Then="date.Date"><IfCondition t="yesno.Contains" IgnoreCase="true"><Text value="date" /></IfCondition></Case><Case Then="field_aspect.Image"><IfCondition t="yesno.Contains" IgnoreCase="true"><Text value="image" /></IfCondition></Case><Case Then="field_aspect.Image"><IfCondition t="yesno.Contains" IgnoreCase="true"><Text value="photo" /></IfCondition></Case><Case Then="field_aspect.Email"><IfCondition t="yesno.Contains" IgnoreCase="true"><Text value="email" /></IfCondition></Case><Case If="description" Then="field_aspect.RichText" /><Default value="field_aspect.Text" /></Var><Var name="Title" t="text.Capitalize" Mode="capital each word" /><Item t="xml.Xml" DynamicContent="true"><Field t="field.Field" FieldData="\\%!@%$ID1%\\%" ID="%$ID1%" Title="%$Title%"><Type t="%$Type%" /></Field></Item></Item></xtml></Component><Type id="NewField" /><Component id="NewBasicFields" type="field_dt.NewField"><Param name="Names" description="you can add several fields separated by comma" /><xtml t="data.Pipeline"><Item t="text.Split" Data="%$Names%" /><Item t="field_dt.FieldNameToXtml" /></xtml></Component><Component id="NewExistingFields" type="field_dt.NewField"><Param name="Fields" description="should be picklist with field id from other pages (not working yet)" /></Component><Component id="NewGroup" type="field_dt.NewField"><Param name="Name" /><xtml t="data.Pipeline"><Var name="ID" t="text.ToIdText" Data="%$Name%" /><Item t="xml.Xml" DynamicContent="true"><Field t="field.Group" ID="%$ID%" Title="%$Name%"><FieldAspect t="field_aspect.Section" /></Field></Item></xtml></Component><Component id="AddFieldDialog" type="action.Action"><Param name="DoOnNew" type="action.Action" script="true" /><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Add Field"><DialogData t="xml.Xml" /><Content t="ui.Document"><Fields t="field.XmlField" Path="@t" Title="Type"><Type t="field_aspect.Picklist" AllowEmptyValue="false"><Options t="picklist.DynamicOptions"><Options t="text.Split" Data="field_dt.NewBasicFields,field_dt.NewExistingFields,field_dt.NewGroup,field_dt.NewAdvanced" /><OptionLabel t="data.Pipeline"><Item t="xtml_dt.ComponentToLowerCase" /><Item t="text.RemovePrefix" Prefix="new " /></OptionLabel><OptionPage t="ui.CustomSinglePage"><Control t="ui.Document"><Var name="_IsNew" value="true" /><Fields t="xtml_dt.ParamsAsFields" /></Control></OptionPage></Options></Type><FieldAspect t="field_aspect.UnindentOptionPage" /><FieldAspect t="field_aspect.Mandatory" /></Fields></Content><RunOnOK t="xtml.UseParam" Param="DoOnNew"><Input t="xtml.RunXtml" Xtml="%%" /></RunOnOK></Dialog></xtml></Component><Component id="DualFeatureOptions" type="data.Data" execution="native" /><Component id="DualFeatureList" type="ui.Control"><xtml t="ui.ItemList"><Items t="xml.XmlItems" Tag="FieldAspect,Aspect" /><Fields t="field.Fields"><Field t="field.Field1" Title="Feature"><FieldAspect t="field_aspect.Control"><Control t="field_dt.ComponentInTable" Xtml="%%"></Control></FieldAspect><FieldAspect t="field_aspect.ColumnWidth" Width="250px"/><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field></Fields><Presentation t="uiaspect.RichTable" /><Aspect1 t="uiaspect.DefaultFeatures" ItemSelection="false" Toolbar="false" /><Aspect1 t="uiaspect.ItemSelection" OnDoubleClick="" /><Aspect1 t="uiaspect.InheritSelection" Inherit="false" /><Aspect t="uiaspect.DeleteOnHover"><DoAfterDelete t="field_dt.RefreshPreview" /></Aspect><Aspect t="uiaspect.TableNoItems"/><Aspect t="uiaspect.HeaderFooter"><Control t="ui.Document" Class="fielddt_addfeature"><Var name="OriginalXtml" /><Var name="_OriginalCntr" value="%$_Cntr%" /><Data t="xml.Xml" /><Fields t="field_dt.AddFeatureField" Type="field.FieldAspect,uiaspect.Aspect" Xtml="%$OriginalXtml%"/></Control><Control t="headerfooter.FastAddItem" IncludeAddButton="false"><Page t="ui.ItemPage"></Page></Control></Aspect></xtml></Component><Component id="OpenCustomPTDesigner" type="action.Action"><xtml t="field_dt.OpenCodeMirrorTabsPopup" Xtml="%%" InNewWindow="%$_DomEvent/ctrlKey%" ><ParamXml t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%@t%" /><Item value="%Param[1]%" /></ParamXml></xtml></Component><Component id="MakeStyleGlobal" type="action.Action"><xtml t="bart_dt.DoSaveStyle"><Type t="data.Pipeline" ><Item t="xtml.ComponentDefinition" ID="%@t%" /><Item value="%@type%" /></Type></xtml></Component><Component id="OpenCodeMirrorTabsPopup" type="action.Action"><Param name="ParamXml"/><Param name="Xtml" Default="%%"/><Param name="Large" type="data.Boolean"/><Param name="InNewWindow" type="data.Boolean"/><xtml t="action.RunActions"><Action t="action.RunActionOnItems" Items="%$ParamXml/../Param[@codemirror=\'true\']%"><Action t="field_dt.MoveContentToCData" Xtml="%$Xtml%" ParamXml="%%"/></Action><Action t="dlg.OpenDialog" Title="Style"><Contents t="ui.Document" ID="studio_style_tabs"><Presentation t="uiaspect.TabControl"><Style t="field_dt.CodeMirrorsTabControlStyle"/><KeepSelectedTab1 t="object.Object"><Method name="Get" value="%$ParamXml/@name%"/></KeepSelectedTab1></Presentation><Field t="data.Pipeline"><Item value="%$ParamXml/../Param[@codemirror=\'true\']%"/><Item t="field_dt.CodeMirrorTab" ParamXml="%%" Xtml="%$Xtml%" Large1="%$Large%"/></Field><Field t="field.CustomControl" ID="dt_css_designer" Title="Designer"><Condition t="yesno.NotEmpty" Value="%$ParamXml/../Param[@name=\'Css\']%"/><Control t="ui.ControlWithAction"><Var name="data" t="xml.Xml"><WorkingData/></Var><Var name="HtmlCssJs" value="%$Xtml%"/><Var name="Large" value="%$Large%"/><RunBeforeControl t="action.WriteValue" To="%$data/!Block%" customxtml="true"><Value t="css_dt.ParseCssBlock" Block="%$HtmlCssJs/Css%"/></RunBeforeControl><Control t="field.ShowFieldControl"><Field t="css_dt.CssDesigner" /></Control></Control><FieldAspect t="field_aspect.Section"><Image t="image.Image" Url="%$_Images%/studio/designer.png"/></FieldAspect></Field></Contents><Style t="bart_dt.InspectPopup" Padding="1px 3px 3px 6px"/><Style1 t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup inspect_popup&quot;&gt;&#xa;  &lt;div class=&quot;aa_dialog_title&quot;&gt;&#xa;    &lt;/div&gt;&#xa;  &lt;div class=&quot;aa_dialogcontents&quot;/&gt;&#xa;  &lt;div class=&quot;aa_dialogbuttons&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this { padding:15px 15px 5px 15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; border:none; &#xa; margin-right:20px; overflow-y: auto; overflow-x: hidden; }&#xa;#this .aa_dialog_title { background1:red; z-index:0;height:35px; width:100\\%; cursor:move; margin-left:-15px; margin-top:-15px; }&#xa;#this .aa_dialogcontents { overflow:auto; padding-left:5px; padding-right:5px; }&#xa;  #this .help { position:absolute; right:25px; top:3px; cursor:default;  }" Javascript="" Mode="dialog"/><Feature t="dlg.JBartStudioDialog" /><Feature t="dlg.DragDialog"/><Feature t="dlg.Location"><Location t="dlg.AboveLauncher" DeltaX="-20px"/></Feature><Feature t="dlg.CloseIcon" CssStyle="top:3px;right:3px"/><Feature t="dlg.Css" Css="#this { background:white; padding:0px; }"/><Feature t="dlg.HandleEvents"><OnBeforeClose t="xmlui.CallUpdateOfCodeMirror" RunOn=".cmtextarea"/><OnClose t="action.RunActions"><Action t="uiaction.Refresh" RunOn=".code_mirror_list"/><Action t="field_dt.RefreshPreview"/></OnClose></Feature><Feature t="dlg.UniquePopup" Identifier="codemirror_%$ParamName%" AutoClose="true" KeepPopupLocation="false"><Condition t="yesno.Not" Of="%$InNewWindow%" /></Feature><Feature t="dlg.TopZIndexWhenTouching"/></Action></xtml></Component><Component id="OpenCssTabsPopup" type="action.Action"><Param name="CssParamXml"/><Param name="Xtml" Default="%%"/><Param name="InNewWindow" type="data.Boolean"/><xtml t="action.RunActions"><Action t="field_dt.MoveContentToCData" Xtml="%$Xtml%" ParamXml="%$CssParamXml%"/><Action t="dlg.OpenDialog" Title="Style"><Feature t="dlg.JBartStudioDialog" /><Contents t="ui.Document" ID="studio_style_tabs"><Presentation t="uiaspect.TabControl"><Style t="field_dt.CodeMirrorsTabControlStyle"/></Presentation><Field t="field.CustomControl" ID="dt_css_designer" Title="Designer"><Control t="ui.ControlWithAction"><Var name="_CssParamName" value="%$CssParamXml/@name%" /><Var name="data" t="xml.Xml"><WorkingData/></Var><Var name="HtmlCssJs" value="%$Xtml%"/><RunBeforeControl t="action.WriteValue" To="%$data/!Block%" customxtml="true"><Value t="css_dt.ParseCssBlock" Block="%$HtmlCssJs/{$CssParamXml/@name}%" /></RunBeforeControl><Control t="field.ShowFieldControl"><Field t="css_dt.CssDesigner" /></Control></Control><FieldAspect t="field_aspect.Section"><Image t="image.Image" Url="%$_Images%/studio/designer.png"/></FieldAspect></Field><Field t="field_dt.CodeMirrorTab" ParamXml="%$CssParamXml%" Xtml="%$Xtml%" /></Contents><Style t="bart_dt.InspectPopup" Padding="1px 3px 3px 6px"/><Style1 t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup inspect_popup&quot;&gt;&#xa;  &lt;div class=&quot;aa_dialog_title&quot;&gt;&#xa;    &lt;/div&gt;&#xa;  &lt;div class=&quot;aa_dialogcontents&quot;/&gt;&#xa;  &lt;div class=&quot;aa_dialogbuttons&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this { padding:15px 15px 5px 15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; border:none; &#xa; margin-right:20px; overflow-y: auto; overflow-x: hidden; }&#xa;#this .aa_dialog_title { background1:red; z-index:0;height:35px; width:100\\%; cursor:move; margin-left:-15px; margin-top:-15px; }&#xa;#this .aa_dialogcontents { overflow:auto; padding-left:5px; padding-right:5px; }&#xa;  #this .help { position:absolute; right:25px; top:3px; cursor:default;  }" Javascript="" Mode="dialog"/><Feature t="dlg.DragDialog"/><Feature t="dlg.Location"><Location t="dlg.AboveLauncher" DeltaX="-20px"/></Feature><Feature t="dlg.CloseIcon" CssStyle="top:3px;right:3px"/><Feature t="dlg.Size" Size="400px,413px" /><Feature t="dlg.Css" Css="#this { background:white; padding:0px; }"/><Feature t="dlg.HandleEvents"><OnClose t="action.RunActions"><Action t="uiaction.Refresh" RunOn=".dt_textbox_editing_css"/><Action t="field_dt.RefreshPreview"/></OnClose></Feature><Feature t="dlg.UniquePopup" Identifier="codemirror_%$ParamName%" AutoClose="true" KeepPopupLocation="false"><Condition t="yesno.Not" Of="%$InNewWindow%" /></Feature><Feature t="dlg.TopZIndexWhenTouching"/></Action></xtml></Component><Component id="WriteCDataAndFix" type="action.Action"><Param name="CDataText" /><Param name="Element" /><xtml t="xml.WriteCData" CDataText="%$TextToWrite%" Element="%$Element%"><Var name="TextToWrite" t="data.IfThenElse"><If t="xml.IsOfTag" Tag="Css" Data="%$Element%" /><Then t="field_dt.FixPercentagesInCss" Text="%$CDataText%" /><Else value="%$CDataText%" /></Var></xtml></Component><Component id="FixPercentagesInCss" execution="native" ><Param name="Text" /></Component><Component id="MoveContentToCData" type="action.Action"><Param name="Xtml"/><Param name="ParamXml"/><Param name="DefaultValue" /><xtml t="action.RunActions"><Var name="Content" t="data.FirstSucceeding"><Item value="%$Xtml/@{$ParamXml/@name}%" /><Item t="xml.CDataValue" Element="%$Xtml/{$ParamXml/@name}%" /><Item value="%$ParamXml/@Default%" /><Item value="%$ParamXml/Default/@value%" /><Item t="xml.CDataValue" Element="%$ParamXml/Default%" /><Item value="%$DefaultValue%" /></Var><Action t="xml.Delete" Data="%$Xtml/@{$ParamXml/@name}%" /><Action t="field_dt.WriteCDataAndFix" CDataText="%$Content%" Element="%$Xtml/!{$ParamXml/@name}%" /></xtml></Component><Component id="CodeMirrorTab" type="field.Fields" light="false"><Param name="ParamXml"/><Param name="Xtml"/><Param name="Large" type="data.Boolean"/><xtml t="field.CustomControl" HideTitle="true" ID="%$ParamXml/@name%" Title="%$ParamXml/@name%"><Control t="ui.List" Class="dt_tabtop"><Control t="xmlui.CodeMirrorTextarea" Class="cmtextarea" WrapperCss="" AutoFocus="true" TextWrapping="false" Resizer="true"><IdentifierToRecallLastSize t="data.IfThenElse" If="%$Large%" Then="CodeMirrorForStyles_Large" Else="CodeMirrorForStyles"/><Width t="data.IfThenElse" If="%$Large%" Then="900px" Else="390px"/><Height t="data.IfThenElse" If="%$Large%" Then="500px" Else="380px"/><Type t="text.FirstSucceeding"><Item value="%$ParamXml/@codemirrorType%"/><Item value="xml" Condition="%$ParamXml/@name% == \'Html\'"/><Item value="css" Condition="%$ParamXml/@name% == \'Css\'"/><Item value="js" Condition="%$ParamXml/@name% == \'Javascript\'"/><Item value="text"/></Type><Data t="data.FirstSucceeding"><Item value="%$Xtml/@{$ParamXml/@name}%"/><Item t="xml.CDataValue" Element="%$Xtml/{$ParamXml/@name}%"/><Item value="%$ParamXml/@Default%"/><Item value="%$ParamXml/Default/@value%"/><Item value=""/></Data><OnUpdate t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@{$ParamXml/@name}%"/><Action t="field_dt.WriteCDataAndFix" CDataText="%%" Element="%$Xtml/!{$ParamXml/@name}%"/></OnUpdate><OnCtrlEnter t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@{$ParamXml/@name}%"/><Action t="field_dt.WriteCDataAndFix" CDataText="%%" Element="%$Xtml/!{$ParamXml/@name}%"/><Action t="field_dt.RefreshPreview"/></OnCtrlEnter><OnShiftEnter t="dlg.CloseDialog"/></Control><Control t="ui.Document" Condition="%$ParamXml/@jsMetaData% != \'\'"><Data t="data.WritableText"/><Field t="field.SearchBox" SearchIn="title" ItemImage="%$_Images%/studio/js.png" ItemTitle="%Name%" ShowPopupOnEmptySearch="true" PoweredByJBart="false" HideResultsOnClick="true" Title="Add a code snippet..." ItemLink="%Code%" ItemExtraText="%Description% (Relevant for %Object%)"><Items t="data.Pipeline"><Item t="xtml.RunXtmlByComponentId" ComponentID="%$ParamXml/@jsMetaData%"/><Item value="%Snippet%"/></Items><DoOnSelect t="xmlui.InsertTextToCodeMirror" RunOn=".cmtextarea" Text="%%"/><FieldAspect t="field_aspect.PopupPage1" Title="Results"><Page t="uiaspect.SearchLayout" ImageSize="16,16" ItemSize="300,30"/></FieldAspect><FieldAspect t="field_aspect.HideTitle"/><Style t="searchbox.Round"/></Field><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Horizontal" HideInnerTitles=""><Css><![CDATA[]]></Css></Presentation><Operations t="operation.Operations"/><Field t="field.Button" ID="Button" Title="Js Files" HideTitle="true" Tooltip="External JS Files"><Style t="button.ImageOnly"/><Image t="image.Image" Url="%$_Images%/studio/js.png"/><Action t="operation.OpenDialog" Title="External JS Files"><Style t="dialog_style.JBartDialog"/><Contents t="ui.CustomSinglePage"><Control t="bart_dt.ExternalJSFiles"/></Contents><Feature t="dlg.Buttons"><Layout t="group.Horizontal"/><Buttons t="dlg.Ok"/></Feature></Action></Field></Control></Control><FieldAspect t="field_aspect.Section"><Image t="image.Image"><Url t="text.FirstSucceeding"><Item value="%$_Images%/studio/html.png" Condition="%$ParamXml/@name% == \'Html\'"/><Item value="%$_Images%/studio/css.png" Condition="%$ParamXml/@name% == \'Css\'"/><Item value="%$_Images%/studio/js.png" Condition="%$ParamXml/@name% == \'Javascript\'"/><Item value="%$_Images%/studio/embed.png"/></Url></Image></FieldAspect></xtml></Component><Component id="OpenCodeMirrorPopup" type="action.Action"><Param name="Xtml"/><Param name="ParamName"/><Param name="AsText"/><Param name="Width" Default="500px"/><Param name="Height" Default="300px"/><Param name="Type" /><xtml t="dlg.OpenDialog"><Feature t="dlg.JBartStudioDialog" /><Contents t="xmlui.CodeMirrorTextarea" Class="cmtextarea" WrapperCss="" AutoFocus="true" TextWrapping="false" Width="%$Width%" Height="%$Height%" Type="%$Type%" Text="%$AsText%" ><OnCtrlEnter t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@{$ParamName}%"/><Action t="field_dt.WriteCDataAndFix" CDataText="%%" Element="%$Xtml/!{$ParamName}%"/><Action t="field_dt.RefreshPreview"/></OnCtrlEnter><OnShiftEnter t="dlg.CloseDialog"/></Contents><Style t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup inspect_popup&quot;&gt;&#xa;  &lt;div class=&quot;aa_dialog_title&quot;&gt;&#xa;      &lt;/div&gt;&#xa;  &lt;div class=&quot;aa_dialogcontents&quot;/&gt;&#xa;  &lt;div class=&quot;aa_dialogbuttons&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this { padding:15px 15px 5px 15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; border:none; &#xa; margin-right:20px; overflow-y: auto; overflow-x: hidden; }&#xa;#this .aa_dialog_title { background1:red; z-index:0;height:35px; width:100\\%; cursor:move; margin-left:-15px; margin-top:-15px; }&#xa;#this .aa_dialogcontents { overflow:auto; padding-left:5px; padding-right:5px; }&#xa;  #this .help { position:absolute; right:25px; top:3px; cursor:default;  }" Javascript="" Mode="dialog"/><Feature t="dlg.DragDialog"/><Feature t="dlg.Location"><Location t="dlg.AboveLauncher"/></Feature><Feature t="dlg.CloseIcon" CssStyle="top:3px;right:3px"/><Feature t="dlg.Css" Css="#this { background:white; padding:0px; }"/><Feature t="dlg.HandleEvents"><OnBeforeClose t="xmlui.CallUpdateOfCodeMirror" RunOn=".cmtextarea"/><OnClose t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@{$ParamName}%"/><Action t="field_dt.WriteCDataAndFix" CDataText="%$AsText%" Element="%$Xtml/!{$ParamName}%"/><Action t="uiaction.Refresh" RunOn=".code_mirror_list"/><Action t="field_dt.RefreshPreview"/></OnClose></Feature><Feature t="dlg.UniquePopup" Identifier="codemirror_%$ParamName%" AutoClose="true" KeepPopupLocation="false"/></xtml></Component><Component id="CodeMirrorPopupFieldEditor2" type="field.FieldAspect" light="false"><xtml t="field_dt.CodeMirrorPopupFieldEditor1" ParamXml="%$_Field/ParamXml%" /></Component><Component id="CssEditingFieldAspect" type="field.FieldAspect" light="false"><Param name="ParamXml" essential="true" Default="%$_Field/ParamXml%"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Control"><Control t="field_dt.CssEditingFieldAspectControl" ParamXml="%$ParamXml%" Xtml="%%" /></FieldAspect></xtml></Component><Component id="CssEditingFieldAspectControl" type="ui.Control" light="false"><Param name="ParamXml"/><Param name="Xtml"/><xtml t="ui.ControlWithAction"><RunBeforeControl t="field_dt.MoveContentToCData" Xtml="%$Xtml%" ParamXml="%$ParamXml%" DefaultValue="#this {}"/><Control t="field.ShowFieldControl" Class="dt_textbox_editing_css"><Field t="field.Layout"><Field t="field.Field" ReadOnlyText="" Title=""><Type t="field_aspect.CustomDataType"><Html><![CDATA[<textarea disabled="true" />]]></Html><Css><![CDATA[#this { font-size: 11px; width: 235px; height: 50px; padding-top: 3px; padding-right: 3px;   padding-bottom: 3px; padding-left: 3px; border: 1px solid #BDC7D8;   cursor: pointer; }]]></Css><Javascript><![CDATA[function(textbox) {   return jQuery(textbox).attr("value",textbox.val)[0]; } ]]></Javascript><![CDATA[]]></Type><FieldData t="xml.CDataValue" Element="%{$ParamXml/@name}%"/><FieldAspect t="field_aspect.HandleEvent" Event="mouse click"><Action t="field_dt.OpenCssTabsPopup" CssParamXml="%$ParamXml%" Data="%$Xtml%" InNewWindow="%$_DomEvent/ctrlKey%"/></FieldAspect></Field><Field t="field.Button" Tooltip="Edit" Title=""><Style t="button.ImageOnly"/><Image t="image.Image" Url="%$_Images%/studio/designer.png"/><Action t="field_dt.OpenCssTabsPopup" CssParamXml="%$ParamXml%" Data="%$Xtml%" InNewWindow="%$_DomEvent/ctrlKey%"/></Field><Layout t="layout.HorizontalHtmlTable" Spacing="3px"/></Field></Control></xtml></Component><Component id="CodeMirrorPopupFieldAspect" type="field.FieldAspect" light="false"><Param name="ParamXml" essential="true" Default="%$_Field/ParamXml%"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Control"><Control t="ui.List" Class="code_mirror_list"><Control t="ui.Document" Class="code_mirror_field"><Var name="Xtml"/><Presentation t="uiaspect.Group"><Style t="group.Vertical" CssOnElement=""/></Presentation><Field t="field.Group"><Layout t="uiaspect.Group"><Style t="group.Horizontal"/></Layout><Field t="field.Text" Text="%$ParamXml/@name%:"><FieldAspect t="field_aspect.Css" Class="jbstudio_style_param_title"/></Field><Field t="field.Button" Tooltip="Edit in Full Screen" Title=""><Style t="button.ImageOnly"/><Image t="image.Image" Url="%$_Images%/studio/fullscreen.gif"/><FieldAspect t="field_aspect.Css" OnElement="cell" Class="jbstudio_open_codemirror_param_button"/><Action t="field_dt.OpenCodeMirrorTabsPopup" ParamXml="%$ParamXml%" Xtml="%$Xtml%" Large="true"><InNewWindow value="%$_DomEvent/ctrlKey%" /></Action></Field></Field><Field t="field.Field" ReadOnlyText="" Title=""><Type t="field_aspect.MultiLineText"><Style t="textarea.Default" Width="320px" Height="50px"/></Type><FieldData t="data.WritableText"><DefaultValue t="data.FirstSucceeding"><Item value="%@{$ParamXml/@name}%"/><Item t="xml.CDataValue" Element="%{$ParamXml/@name}%"/><Item value="%$ParamXml/@Default%"/><Item value="%$ParamXml/Default/@value%"/></DefaultValue></FieldData><FieldAspect t="field_aspect.Css" Class="jbstudio_style_param_textarea"/><FieldAspect t="field_aspect.TextAreaProperties" ReadOnly="readonly"/><FieldAspect t="field_aspect.OnClick"><Action t="field_dt.OpenCodeMirrorTabsPopup" ParamXml="%$ParamXml%" Xtml="%$Xtml%"/></FieldAspect></Field></Control></Control></FieldAspect></xtml></Component><Component id="CodeMirrorPopupFieldEditor" type="field.FieldAspect" light="false"><Param name="ParamXml" essential="true" Default="%$_Field/ParamXml%"/><Param name="Type" type="enum"><value>xml</value><value>css</value><value>js</value><value>text</value><value>html</value></Param><Param name="Width"><Default value="300px"/></Param><Param name="Height"><Default value="100px"/></Param><Param name="MarginLeft" Default="margin-left:-15px;"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Control"><Control t="ui.List" Class="code_mirror_list"><Control t="ui.List" CssStyle="position: relative; %$MarginLeft%"><Var name="RequiredType" t="text.FirstSucceeding" ><Item value="%$Type%" /><Item value="xml" Condition="%$ParamXml/@name% == \'Html\'" /><Item value="css" Condition="%$ParamXml/@name% == \'Css\'" /><Item value="js" Condition="%$ParamXml/@name% == \'Javascript\'" /><Item value="text" /></Var><Var name="OriginalData"/><Var name="AsText" t="data.WritableText"><DefaultValue t="data.FirstSucceeding"><Item value="%$OriginalData/@{$ParamXml/@name}%"/><Item t="xml.CDataValue" Element="%$OriginalData/{$ParamXml/@name}%"/><Item value="%$ParamXml/@Default%" /><Item value="%$ParamXml/Default/@value%" /></DefaultValue></Var><Control t="ui.List"><Layout t="ui.Horizontal"/><Control t="ui.Text" Text="%$ParamXml/@name%:" Class="propertysheet field"/><Control t="ui.Button" Image="%$_Images%/studio/fullscreen.gif" Text="Edit in Full Screen" CssStyle="position: absolute;right: 0px;z-index: 10;"><Style t="ui.ButtonAsImage"/><OnClick t="field_dt.OpenCodeMirrorPopup" Type="%$RequiredType%" Xtml="%$OriginalData%" ParamName="%$ParamXml/@name%" AsText="%$AsText%" Data="%$AsText%" Width="700px"><Var name="ControlElement" value="%$ControlElement%" RunOn="up(.code_mirror_list)"/><Height t="ui.ScreenSize" Axis="height" AsHtmlString="true" Margin="100px"/></OnClick></Control></Control><Control t="ui.Document" Class="code_mirror_field"><Fields t="field.JavaScriptControl" Html="&lt;textarea wrap=&quot;off&quot; class=&quot;style_text_area&quot;&gt;%%&lt;/textarea&gt;&#xa;"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.FieldData" FieldData="%$AsText%"/><FieldAspect t="field_aspect.Css" Inline="width:320px; height:120px; cursor:pointer;"/><FieldAspect t="field_aspect.OnClick"><Action t="operation.RunXtmlAction"><Action t="field_dt.OpenCodeMirrorPopup" Type="%$RequiredType%" Xtml="%$OriginalData%" ParamName="%$ParamXml/@name%" AsText="%$AsText%"/></Action></FieldAspect></Fields></Control></Control></Control></FieldAspect></xtml></Component><Component id="CodeMirrorFieldEditor" type="field.FieldAspect" light="false"><Param name="CompId" essential="true"/><Param name="ParamName" essential="true" /><Param name="Type" type="enum"><Default value="css" /><value>xml</value><value>css</value><value>js</value><value>text</value></Param><Param name="Width"><Default value="230px" /></Param><Param name="Height"><Default value="100px" /></Param><xtml t="field_aspect.Control"><Control t="ui.List" Class="code_mirror_field"><Var name="OriginalData" /><Data t="data.WritableText"><DefaultValue t="data.FirstSucceeding"><Item value="%$OriginalData/@{$ParamName}%" /><Item t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$CompId%" /><Item value="%Param[@name=\'{$ParamName}\']/Default/@value%" /></Item></DefaultValue></Data><Control t="field.ShowFieldControl"><Field t="field.XmlField"><Type t="field_aspect.MultiLineText" /><FieldAspect t="field_aspect.Css" Inline="width:%$Width%; height:%$Height%; white-space:nowrap"/>?            <FieldAspect t="field_aspect.OnUpdate"><Action t="action.WriteValue" Value="%%"><To value="%$OriginalData/!@{$ParamName}%" /></Action></FieldAspect><FieldAspect t="field_aspect.OnKeyUp"><Action t="field_dt.RefreshPreview"><Condition t="yesno.And" ><Item value="%$CtrlKey%" /><Item value="%$KeyCode% == \'13\'" /></Condition></Action></FieldAspect></Field></Control><Layout t="ui.Horizontal" /><Control t="ui.List"><Control t="ui.Button" Image="%$_Images%/refresh.gif" Text="Refresh preview"><Style t="ui.ButtonAsImage" /><OnClick t="field_dt.RefreshPreview" /></Control><Control t="ui.Button" Image="%$_Images%/studio/fullscreen.gif" Text="Edit in Full Screen"><Style t="ui.ButtonAsImage" /><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="%$ParamName%"><Content t="xmlui.CodeMirrorTextarea" Type="%$Type%" UpdateOnClick="true"><Width t="ui.ScreenSize" Axis="width" AsHtmlString="true" Margin="200px" /><Height t="ui.ScreenSize" Axis="height" AsHtmlString="true" Margin="200px" /></Content><RunOnOK t="action.RunActions"><Action t="action.WriteValue" Value="%%"><To value="%$OriginalData/!@{$ParamName}%" /></Action><Action t="uiaction.Refresh" RunOn="up(.code_mirror_field)" /><Action t="field_dt.RefreshPreview" /></RunOnOK></Dialog></OnClick></Control></Control></Control></xtml></Component><Component id="PluralText" type="field.FieldAspect"><xtml t="data.IfThenElse" Else="%%s"><If t="text.EndsWith" With="y"/><Then t="data.Pipeline"><Item t="text.RemoveSuffix" Suffix="y"/><Item value="%%ies"/></Then></xtml></Component><Component id="GuessType" type="data.Data" execution="native"><Param name="SampleData" /><Param name="Filter" type="data.Boolean" /></Component><Component id="ExtractXmlMetadata" type="data.Data"><Param name="SampleItems"/><Param name="ReadOnly" type="data.Boolean"/><xtml t="xml.WithChanges"><Xml t="xml.Xml"><xml><fields/><rows/></xml></Xml><Var name="SampleItem" t="data.Pipeline"><Item value="%$SampleItems%"/><Aggregator t="data.First"/></Var><Var name="Fields" t="data.List"><Item t="data.Pipeline"><Item t="data.Pipeline"><Item value="%$SampleItem/*%"/><Item t="xml.Tag"/><Aggregator t="data.MakeUniqueAndCount"/></Item><Item t="data.IfThenElse" If="%count% == 1" ><Var name="Tag"/><Var name="Title" t="text.Capitalize" Data="%text%"/><Var name="Plural" t="field_dt.PluralText" Data="%text%"/><Var name="Primitive" t="yesno.Empty" Data="%$SampleItem/{text}/*%"/><Var name="Type" t="field_dt.GuessType" SampleData="%$SampleItem/{text}/*%" /><Then t="data.IfThenElse" If="%$Primitive%"><Then t="xml.Xml" DynamicContent="true"><Field t="field.XmlField" Path="%text%" ID="%text%" Title="%$Title%"/></Then><Else t="xml.WithChanges"><Var name="Tag"/><Xml t="xml.Xml" DynamicContent="true"><Field t="field.Group" Title="%$Title%" ID="%text%" Path="%text%" /></Xml><Change t="xml.AddChildren" CloneChildren="true"><Children t="data.Pipeline"><Item t="field_dt.ExtractXmlMetadata" SampleItems="%$SampleItem/{$Tag/text}%"/><Item value="%fields/Field%"/></Children></Change>?               </Else></Then><Else t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Field t="field.XmlMultipleGroup" ID="%$Plural%" Title="%$Plural%" TitleForSingle="%$Title%"><Items t="field.InnerItems" Path="%text%"/><Presentation t="uiaspect.RichTable"/><Aspect t="uiaspect.DefaultFeatures"/></Field></Xml><Change t="xml.AddChildren"><Children t="data.Pipeline"><Item t="field_dt.ExtractXmlMetadata" SampleItems="%$SampleItem/{$Tag/text}%"/><Item value="%fields/Field%"/></Children></Change>?            </Else></Item></Item><Item t="data.Pipeline"><Item value="%$SampleItem%"/><Item t="xml.Attributes"/><Item t="data.Pipeline"><Var name="Attr" t="xml.AttributeName"/><Var name="Title" Data="%$Attr%" t="text.Capitalize"/><Var name="Sample" value="%%" /><Var name="Type" t="data.IfThenElse" If="%$ReadOnly%" Then="field_type.ReadOnlyText" Else="field_aspect.Text" /><Item t="xml.Xml" DynamicContent="true"><Field t="field.Field" FieldData="\\%!@%$Attr%\\%" ID="%$Attr%" Title="%$Title%" origin="data" sample="%$Sample%"><Type t="%$Type%" /><FieldAspect t="field_feature.Css" /></Field></Item></Item></Item></Var><Change t="xml.AddChildren" Data="%fields%" Children="%$Fields%"/><Change t="xml.AddChildren" Data="%rows%" Children="%$SampleItems%" CloneChildren="true"/></xtml></Component><Component id="FieldXPathEditor" type="field.FieldAspect"><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Control"><Control t="field.ShowFieldControl" Item="%%"><Field t="field.Field1" ><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="aaeditor.XPathEditor" ><Var name="ParentsPath" t="data.Pipeline" ><Item t="data.PathItems" Data="%$FieldXtml%" Next="%..%" IncludeOrigianlItem="false" ><StopCondition t="yesno.Not" ><Of t="xml.IsOfTag" Tag="Field" Data="%..%" /></StopCondition></Item><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty" Value="%@Path%" /></Item><Aggregator t="text.Concat" Separator="/" ItemText="%@Path%" /></Var><XmlItems t="data.Pipeline"><Item value="%$PageSampleItems%" /><Item t="xml.XPath" XPath="%$ParentsPath%" /></XmlItems></FieldAspect><FieldAspect t="field_aspect.Resizer" /></Field></Control></FieldAspect><FieldAspect t="field_aspect.FieldData" FieldData="%!@Path%" /></xtml></Component><Component id="CleanNSButton" type="field.Fields"><Param name="XmlFieldPath"/><Param name="XmlFieldID"/><xtml t="field.Button1" Title="Clean Data" ShowTitle=""><Action t="operation.RunXtmlAction" ><Var name="Xml" t="xml.XPath" XPath="%$XmlFieldPath%"/><Action t="action.RunActions" customxtml="true"><Action t="action.WriteValue" To="%$Xml%" ><Value t="xml.XmlToText" PrettyPrint="true"><Data t="data.CleanNS" Data="%$Xml%"/></Value></Action><Action t="field.RefreshField" FieldID="%$XmlFieldID%"/></Action></Action></xtml></Component><Component id="FieldSampleData" type="data.Data" execution="native"><Param name="Page" /><Param name="Field" /><Param name="PageData" /></Component><Component id="FieldsToAddForFilter" type="data.Data"><xtml t="data.List"><Var name="CurrentField" /><Var name="CntrFields" t="data.Pipeline"></Var><Item t="data.Pipeline"><Item value="%../Field%" /><Item t="yesno.PassesFilter" ><Filter t="yesno.And"><Item value="%@ID% != %$CurrentField/@ID%" /><Item t="yesno.IsEmpty" Value="%FieldAspect[@t=\'field_aspect.HeaderFooterField\']%" /></Filter></Item><Item t="xml.Xml" DynamicContent="true"><Field t="field.FilterField" BasedOn="%@ID%" Title="Filter by %@Title%" ID="Filter_%@ID%"><Type t="field_type.Text" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Filter by %@Title%"/><FieldAspect t="field_aspect.ImmediateFiltering" /><FieldAspect t="field_aspect.ClearValueButton" Title="Clear Filter" /></Field></Item></Item><Item t="xml.Xml"><Field t="field.Button" Title="Search" ID="Search"><Action t="uiaction.FilterContainer" FilterQueryXml="%%" /></Field></Item></xtml></Component><Component id="FieldsToAddForFilter2" type="data.Data"><xtml t="data.Pipeline"><Var name="FieldXtml" value="%%" /><Item t="field_dt_model.SampleItemsToFieldInfos" ><SampleItems t="field_dt_model.ListItemsOfFieldForPreview" FieldXtml="%%" /></Item><Item t="yesno.PassesFilter" ><Filter t="yesno.IsEmpty" Value="%$FieldXtml/Field[@ID=\'Filter_{ID}\']%" /></Item><Item t="xml.Xml" DynamicContent="true"><Field t="field.Field" Title="Filter By %Title%" ID="Filter_%ID%"><Type t="field_type.Text" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Filter By %Title%"/><FieldAspect t="itemlist_aspect.Filter" FieldData="\\%%FieldData%\\%"><FilterType t="itemlist_filter.ExactMatch"/></FieldAspect><FieldAspect t="field_aspect.ClearValueButton" /><FieldAspect t="itemlist_filter.Occurrences"/></Field></Item></xtml></Component><Component id="ComponentInTable" type="ui.Control" execution="native"><Param name="Xtml"/><Param name="ComponentTitle" script="true"><Default t="data.Pipeline"><Var name="ComponentDefinition" t="xtml.ComponentDefinition" ID="%@t%"/><Var name="GalleryNode" value="%$ComponentDefinition/@gallery%"/><Item value="%@t%"/><Item t="text.RemovePrefix" Separator="."/><Item t="text.Capitalize" Mode="capital to separate words"/></Default></Param><Param name="TitleForExpand" advanced="true"><Default value="show params"/></Param><Param name="TitleForCollapse" advanced="true"><Default value="Hide Params"/></Param><Param name="ImageForCollapse" advanced="true"><Default value="%$_Images%/studio/minus.gif"/></Param><Param name="ImageForExpand" advanced="true"><Default value="%$_Images%/studio/plus.gif"/></Param><Param name="Css" advanced="true" css="true"><Default><![CDATA[  .aa_field_toolbar_image { margin: 1px 0 0 3px; vertical-align: top; display: inline-block; width:16px; height:16px; cursor: pointer;}        ]]></Default></Param><NativeHelper name="ParamsControl" t="ui.Document"><Fields t="xtml_dt.ParamsAsFields"/><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Operations t="operation.Operations"/></NativeHelper><NativeHelper name="HasParams" t="yesno.NotEmpty"><Value t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%@t%"/><Item value="%Param%"/><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsNotEqual" Item1="%@light%" Item2="false"/></Item><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsNotEqual" Item1="%@hidden%" Item2="true"/></Item></Value></NativeHelper><NativeHelper name="Documentation" t="xtml_dt.DocumentationIcon" Class="documentation" Icon="%$_Images%/studio/help.png"><ComponentDefinition t="xtml.ComponentDefinition" ID="%@t%"/></NativeHelper></Component><Component id="AddAdvancedFieldDialog" type="action.Action"><Param name="ParentXtml"/><xtml t="action.RunActions"><Action t="dialog.ClosePopup"/><Action t="dlg.OpenDialog" Title="New Field"><Feature t="dlg.JBartStudioDialog" /><Data t="xml.Xml"><Field t=""/></Data><Contents t="ui.Document" ID__Manual=""><Var name="IsNewItem" value="true"/><Fields t="field.Fields"><Field t="field.XmlField" Path="@Title"><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="ID"/><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@t" Title="Type"><Type t="field_aspect.Picklist" AllowEmptyValue="true"><Options t="picklist.DynamicOptions"><Options t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="field.Fields"/><Item t="yesno.PassesFilter"><Filter t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%%"/><Item value="%@advanceddt%"/></Filter></Item></Options><OptionLabel t="xtml_dt.ComponentToLowerCase"/><OptionPage t="ui.CustomSinglePage"><Control t="ui.Document"><Var name="_IsNew" value="true"/><Fields t="data.Pipeline"><Item t="xtml_dt.ParamsAsFields"/><Item t="yesno.PassesFilter" Filter="%Param% != \'Title\'"/></Fields></Control></OptionPage></Options></Type><FieldAspect t="field_aspect.UnindentOptionPage"/><FieldAspect t="field_aspect.Mandatory"/></Field><Field t="field.XmlField" Path="@ID" Title="Field ID" ID="ID"><FieldAspect t="field_aspect.Calculated" ManualOverride="true"><Formula t="text.Capitalize" Mode="separate words to capital" Data="%@Title%"/></FieldAspect></Field></Fields><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"/><Operations t="operation.Operations"/></Contents><RunOnOK t="field_dt.AddFieldFromPopup" ParentXtml="%$ParentXtml%" FieldXtml="%%"/></Action></xtml></Component><Component id="FastAddField" type="action.Action"><Param name="ParentXtml" /><Param name="FieldXtml" /><Param name="IDPrefix" /><xtml t="action.RunActions"><Var name="ID" t="text.ToId" Text="%$IDPrefix%"><UsedIDs t="data.List"><Item value="%$ParentXtml/Field/@ID%" /><Item value="%$ParentXtml/../Field/@ID%" /></UsedIDs></Var><Action t="action.WriteValue" To="%$FieldXtml/!@ID%" Value="%$ID%" /><Action t="action.WriteValue" To="%$FieldXtml/!@Title%" Value="%$ID%" /><Action t="field_dt.AddFieldFromPopup" ParentXtml="%$ParentXtml%" FieldXtml="%$FieldXtml%" AlsoClosePopup="true"/></xtml></Component><Component id="FastAddFieldByPT" type="action.Action"><Param name="ParentXtml" /><Param name="Component" /><Param name="IDPrefix" /><xtml t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="%$IDPrefix%" ><FieldXtml t="xml.Xml" DynamicContent="true"><Field t="%$Component%" /></FieldXtml></xtml></Component><Component id="ToEnglishMultiple" type="data.Data" execution="native" /><Component id="NewMultipleGroup" type="action.Action"><Param name="ParentXtml" /><Param name="DialogTitle" Default="New Item List" /><Param name="CreateNewItemList" type="data.Boolean" /><xtml t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="dlg.OpenDialog" Title="%$DialogTitle%"><Data t="xml.Xml" DynamicContent="true"><Field /></Data><Contents t="ui.Document"><Fields t="field.Fields"><Field t="field.XmlField" Path="@TitleForSingle" Title="Single Name" Mandatory="true"><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Title,Path" RefreshScope="container" /><FieldAspect t="field_aspect.Mandatory" /></Field><Field t="field.XmlField" Path="@Fields" Title="Fields" Condition="%$CreateNewItemList%"><FieldAspect t="field_aspect.Description" Description="E.g. name,age,photo" /></Field><Field t="field.XmlField" Path="@Title" Title="Plural Name"><FieldAspect t="field_aspect.Calculated" ManualOverride="true"><Formula t="field_dt.ToEnglishMultiple" Data="%@TitleForSingle%" /></FieldAspect><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="Path" /></Field><Field t="field.XmlField" Path="@Path" ID="Path"><FieldAspect t="field_aspect.Calculated" ManualOverride="true"><Formula t="data.Pipeline"><Item value="%$_Title%/%$_Single%"><Var name="_Title" t="text.Capitalize" Mode="separate words to capital" Data="%@Title%" /><Var name="_Single" t="text.Capitalize" Mode="separate words to capital" Data="%@TitleForSingle%" /></Item></Formula></FieldAspect></Field><Field t="field.XmlField" Path="@read_only" ID="read_only" Title="Read Only"><Type t="field_aspect.Boolean" CheckedByDefault1="true"><Presentation t="field_aspect.CheckBox" /></Type></Field><Field t="field.XmlField" Path="@Is_Section" ID="Show_Title" Title="Section"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox" /></Type></Field></Fields></Contents><RunOnOK t="field_dt.AddFieldFromPopup" ParentXtml="%$ParentXtml%"><FieldXtml t="field_dt.ToListXtml" NewItemList="%$CreateNewItemList%"/></RunOnOK><Feature t="dlg.JBartStudioDialog" /></Action></xtml></Component><Component id="AddFieldFromPopup" type="action.Action"><Param name="FieldXtml" Default="%%"/><Param name="ParentXtml" /><Param name="AlsoClosePopup" type="data.Boolean" /><Param name="AlsoSelect" type="data.Boolean"><Default value="true"/></Param><xtml t="action.RunActions"><Var name="IsGroup" t="field_dt.IsGroup" Data="%$ParentXtml%" /><Var name="CalculatedParent" t="data.IfThenElse" If="%$IsGroup%" Then="%$ParentXtml%" Else="%$ParentXtml/..%" /><Var name="_Cntr" t="cntr.ContainerOfElement" RunOn=".jbstudio_tree" /><Var name="CntrCtrl" value="%$ControlElement%" RunOn=".jbstudio_tree" /><Var name="SelectedFieldElement" t="data.Pipeline"><Item t="uiaction.SelectedItemElement" RunOn="%$CntrCtrl%" /><Item t="data.IfThenElse" If="%$IsGroup%" Then="%%"><Else t="cntr.ParentItemElement" RunOn="%%" /></Item></Var><Action t="xml.RemoveAttributes" Data="%$FieldXtml%" AttributeNames="sample,origin,fieldExists,ID_Manual" /><Action t="action.IfThenElse"><If t="yesno.NotEmpty" Value="%$SelectedFieldElement%" /><Then t="xml.AddToXmlItems" Xml="%$FieldXtml%"><Items t="uiaction.DataItemsOfItemInTree" ItemElement="%$SelectedFieldElement%" /><DoOnAddedXml t="uiaction.AddItemElement" Item="%%" ParentElement="%$SelectedFieldElement%" SelectIt="%$AlsoSelect%"><DoOnAddedElement t="action.IfThenElse" If="%$InPageDT%" Condition="%$AlsoSelect%"><Var name="InPageDT" t="yesno.NotEmpty" Value="%$ControlElement%" RunOn=".bartdt_edit_fields" /><Then t="uiaction.Focus" OnFirstInput="true" RunOn=".DetailsControl"  /><Else t="bart_dt.EditXtmlInStudioBar" IsNewItem="true"><Xtml t="cntr.ItemDataFromElement" Element="%%" /></Else></DoOnAddedElement></DoOnAddedXml></Then><Else t="xml.ChangeXml" Xml="%$CalculatedParent%" ><Change t="xml.AddChildren" Children="%$FieldXtml%" ><RunOnChildren t="bart_dt.EditXtmlInStudioBar" Condition="%$AlsoSelect%" Xtml="%%" IsNewItem="true"/></Change></Else></Action><Action t="xml.Delete" Element="%$CalculatedParent/Field[@t=\'field.AddFieldsHere\']%" /><Action t="dialog.ClosePopup" Condition="%$AlsoClosePopup%" /><Action t="field_dt.RefreshPreview" /></xtml></Component><Component id="IsReadOnly" type="data.Boolean" execution="native"><Param name="FieldXtml" /></Component><Component id="FieldsToAdd" type="data.Data"><Param name="FieldXtml" /><xtml t="data.Pipeline"><Var name="FieldDataList" value="%$FieldXtml/Field/@FieldData%" /><Item t="data.Switch"><Var name="PageXtml" t="field_dt.UpToPageDef" Data="%$FieldXtml%" /><Var name="PageSampleItems" t="bart_dt.PageSampleItems" PageXtml="%$PageXtml%" /><Var name="SampleData" t="field_dt.FieldSampleData" PageData="%$PageSampleItems%" Field="%$FieldXtml%" Page="%$PageXtml%" /><Var name="Tag" t="xml.Tag" Data="%$SampleData%" /><Case IfCondition="%$Tag% == \'cntr_filters\'"><Then t="field_dt.FieldsToAddForFilter" Data="%$FieldXtml%" /></Case><Case ><IfCondition t="yesno.NotEmpty" Value="%$FieldXtml/FieldAspect[@t=\'itemlist_aspect.FilterGroup\']%" /><Then t="field_dt.FieldsToAddForFilter2" Data="%$FieldXtml%" /></Case><Default t="data.List"><Item t="data.Pipeline"><Item t="field_dt.ExtractXmlMetadata" SampleItems="%$SampleData%"><ReadOnly t="field_dt.IsReadOnly" FieldXtml="%$FieldXtml%" /></Item><Item value="%fields/Field%" /></Item><Item t="field_dt.FieldsFromOtherPages" FieldXtml="%$FieldXtml%" /></Default></Item><Item t="data.IfThenElse" Else="%%"><If t="yesno.IsInList" List="%$FieldDataList%" Item="%@FieldData%" /><Then t="xml.WithChanges"><Change t="xml.WriteValue" To="%!@fieldExists%" Value="true" /></Then></Item></xtml></Component><Component id="AddFieldButton" type="field.Field" ><Param name="ParentField" /><Param name="ParentXtml" /><xtml t="field.Button" Title="Add Field" ID="AddField" ID__Manual="" ShowTitle="" ButtonText="" Tooltip=""><Style t="button.ToolbarButton"/><Image t="image.Image" Url="%$_Images%/studio/new_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Feature t="dlg.ArrowToLaunchingElement" /><Contents t="ui.ItemPage"><Var name="CntrCtrl" value="%$ControlElement%" RunOn=".jbstudio_tree" /><Var name="SelectedFieldElement" t="uiaction.SelectedItemElement" RunOn="%$CntrCtrl%"/><Presentation t="uiaspect.Vertical" Align=""/><Operations t="operation.Operations"/><Field t="field_dt.AddFieldMultipleGroup" ><FieldXtml t="data.FirstSucceeding" ><Item value="%$ParentField%" /><Item t="data.Pipeline"><Item t="uiaction.DataOfSelectedItem" RunOn=".jbstudio_tree" /><Item t="data.IfThenElse" Then="%%" Else="%..%"><If t="field_dt.IsGroup" /></Item></Item></FieldXtml></Field><Field t="field.Group" ID="add_field" Title="Add Field" HideTitle="true"><GroupData t="group.TransientData"/><Layout t="uiaspect.Horizontal" HideInnerTitles="" EnforceSpacing="true" AlighLastToRight1="true" FullWidth="false"/><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@fields%" ID="fields" Title="Add New Fields" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="e.g. name,age,gender"/><FieldAspect t="field_aspect.HandleEvent" Event="enter pressed"><Action t="uiaction.ButtonClick" RunOn=".fld_studio_add_field" /></FieldAspect></Field><Field t="field.Button" Title="Add" ID="studio_add_field"><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.Css" Inline="padding-right:21px; padding-top:5px; color:gray;" OnElement="cell"/><FieldAspect t="field_aspect.Css" Inline="opacity:0.8;" OnElement="cell"/><Action t="action.RunActionOnItems" IndicateLastItem="true" IndicateItemIndex=""><Items t="text.Split" Data="%@fields%"/><Action t="field_dt.AddFieldFromPopup" ParentXtml="%$ParentXtml%" AlsoSelect="%$_IsLastItem%" AlsoClosePopup="%$_IsLastItem%"><FieldXtml t="field_dt.FieldNameToXtml"/></Action></Action></Field><FieldAspect t="field_aspect.Css" Inline="padding-top:5px;padding-left:4px;&#xa;"/></Field><Field t="field.Button" Title="Add Table"><Image t="image.Image" Url="%$_Images%/studio/newtable.png"/><Style t="button.Hyperlink"/><Action t="field_dt.NewMultipleGroup" ParentXtml="%$ParentXtml%" DialogTitle="New Table" CreateNewItemList="true"/></Field></Contents></FieldAspect><FieldAspect t="field_aspect.HideTitle"/></xtml></Component><Component id="ToolbarFieldXtml" type="data.Data"><Param name="FieldXtml" /><xtml t="data.FirstSucceeding"><Item value="%$FieldXtml%" /><Item t="cntr.SelectedItem"><Cntr t="cntr.ContainerOfElement" RunOn=".jbstudio_tree" /></Item></xtml></Component><Component id="Toolbar" type="field.Fields"><Param name="FieldXtml"/><Param name="ParentXtml"/><Param name="PreButtons" type="field.Field" script="true"/><xtml t="field.Group"><Layout t="uiaspect.Horizontal" HideInnerTitles="" Spacing="0"/><Field t="xtml.UseParam" Param="PreButtons"/><Field t="field.Fields"><Field t="field_dt.AddFieldButton" ParentField="%$FieldXtml%" ParentXtml="%$ParentXtml%" /><Field t="field.Button" Title="Add Control" Tooltip=""><Style t="button.ToolbarButton"/><Image t="image.Image" Url="%$_Images%/studio/addcontrol_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Contents t="ui.ItemPage"><Var name="ParentXtml" t="field_dt.ToolbarFieldXtml" FieldXtml="%$FieldXtml%"/><Field t="field.Button" Title="Text"><Image t="image.Image" Url="%$_Images%/studio/text_big.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Text"><FieldXtml t="xml.Xml"><Field t="field.Text"/></FieldXtml></Action></Field><Field t="field.Button" Title="Button"><Image t="image.Image" Url="%$_Images%/studio/button_big.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddFieldByPT" ParentXtml="%$ParentXtml%" Component="field.Button" IDPrefix="Button"/></Field><Field t="field.Button" Title="Image"><Image t="image.Image" Url="%$_Images%/studio/image_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Image"><FieldXtml t="xml.Xml"><Field t="field.Image" HideTitle="true"><Image t="image.Image"/></Field></FieldXtml></Action><Action t="field_dt.FastAddFieldByPT" ParentXtml="%$ParentXtml%" Component="field.Button" IDPrefix="Button"/></Field><Field t="field.Button" Title="Item List"><Image t="image.Image" Url="%$_Images%/studio/list_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.NewMultipleGroup" ParentXtml="%$ParentXtml%"/></Field><Field t="field.Button" Title="Custom Control"><Image t="image.Image" Url="%$_Images%/studio/html_big.png"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Control"><FieldXtml t="xml.Xml"><Field t="field.Control"><Control t="field_control.CustomControl"/></Field></FieldXtml></Action><Style t="button.Hyperlink"/></Field><Field t="field.Button" Title="Custom Xtml Control"><Image t="image.Image" Url="%$_Images%/studio/xtml_control_big.png"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Control"><FieldXtml t="xml.Xml"><Field t="field.Control"><Control t="field_control.CustomXtmlControl"/></Field></FieldXtml></Action><Style t="button.Hyperlink"/></Field><Field t="field.Button" Title="Searchbox"><Image t="image.Image" Url="%$_Images%/studio/deploy_24.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="SearchBox"><FieldXtml t="xml.Xml"><Field t="field.SearchBox"><FieldAspect t="field_aspect.PopupPage"><Group t="field.XmlMultipleGroup" Title="Search Results"><Presentation t="uiaspect.List" EachItemInLine="true" ItemSize="300,50"/><Aspect t="uiaspect.ReadOnly"/><Aspect t="field_aspect.SearchResultList"/><Field t="field.Group" Title="Item" ID="item" Path="" HideTitle="true"><GroupData t="group.DataFlow" FlowData="%%"/><FieldAspect t="field_aspect.Section"/><Layout t="uiaspect.Horizontal" Spacing="25px"/><Field t="field.XmlField" ID="image" Title="image"><Type t="field_aspect.Image" KeepImageProportions="true" Width="70" Height="70"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.FieldData"><FieldData t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemImage"/></FieldAspect></Field><Field t="field.XmlGroup" Title="right" ID="Right" Path="" HideTitle="true"><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.PropertySheet"/><Field t="field.Text" ID="Title" Title="Title"><Text t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemTitle"/><FieldAspect t="field_aspect.HideTitle"/></Field><Field t="field.Text1" Title="Second Title" ID="SecondTitle" ShowTitle="" HtmlContents="false"><Text t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemExtraText"/><FieldAspect t="field_aspect.LimitTextLength" FullTextAsTooltip="false" MaxLength="30"/></Field></Field></Field><Field t="field.Button" ID="_ShowAllInSearchBox" Title="Show All"><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HeaderFooterField" Location="footer" RefreshStrategy="none"/><Action t="field.ShowAllItemsInSearchBox"/><FieldAspect t="field_aspect.HideByCondition" CheckConditionForEveryItem="true"><ShowCondition t="field.HasMoreItemsToShowInSearchBox"/></FieldAspect><Image t="image.Image" Url="%$_Images%/expand-down.gif"/><FieldAspect t="field_aspect.Css" Inline="margin-left:10px; color:gray; margin-top: 10px; display: block;"/></Field></Group></FieldAspect></Field></FieldXtml></Action></Field><Field t="field.Button" Title="Page"><Image t="image.Image" Url="%$_Images%/studio/brick_link_big.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddFieldByPT" ParentXtml="%$ParentXtml%" Component="jbart.Page" IDPrefix="Page"/></Field><Field value="%$_BartDevDtContext/Studio/AddControlFields%"/><Field t="field.Button" Title="More..."><Image t="image.Image" Url="%$_Images%/studio/more_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.AddAdvancedFieldDialog" ParentXtml="%$ParentXtml%"/></Field></Contents><Feature t="dlg.ArrowToLaunchingElement"/></FieldAspect></Field><Field t="field.Button" Title="Add Group" Tooltip=""><Style t="button.ToolbarButton"/><Image t="image.Image" Url="%$_Images%/studio/newgroup_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Contents t="ui.ItemPage"><Var name="ParentXtml" t="field_dt.ToolbarFieldXtml" FieldXtml="%$FieldXtml%"/><Field t="field.Button" Title="Property Sheet"><Image t="image.Image" Url="%$_Images%/studio/propertysheet_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="PropertySheet"><FieldXtml t="xml.Xml"><Field t="field.PropertySheet"/></FieldXtml></Action></Field><Field t="field.Button" Title="Vertical Layout"><Image t="image.Image" Url="%$_Images%/studio/vertical_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Group"><FieldXtml t="xml.Xml"><Field t="field.Layout"><Layout t="layout.Vertical"/></Field></FieldXtml></Action></Field><Field t="field.Button" Title="Horizontal Layout (Css3)"><Image t="image.Image" Url="%$_Images%/studio/horizontal_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Horizontal"><FieldXtml t="xml.Xml"><Field t="field.Layout"><Layout t="layout.HorizontalCss3" Spacing="20px"/></Field></FieldXtml></Action></Field><Field t="field.Button" Title="Horizontal Layout (Html Table)"><Image t="image.Image" Url="%$_Images%/studio/horizontal_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Horizontal"><FieldXtml t="xml.Xml"><Field t="field.Layout"><Layout t="layout.HorizontalHtmlTable" Spacing="20px"/></Field></FieldXtml></Action></Field><Field t="field.Button" Title="Tab Control"><Image t="image.Image" Url="%$_Images%/studio/tabs32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Tabs"><FieldXtml t="xml.Xml"><Field t="field.TabControl"/></FieldXtml></Action></Field><Field t="field.Button" Title="Section"><Image t="image.Image" Url="%$_Images%/studio/section32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Section"><FieldXtml t="data.Pipeline"><Var name="_Style" t="data.IfThenElse"><If t="field_dt.IsMobile"/><Then value="section.FacebookMobile"/><Else value="section.Default"/></Var><Item t="xml.Xml" DynamicContent="true"><Field t="field.Group" Title="Section"><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><FieldAspect t="field_aspect.Section"><Style t="%$_Style%"/></FieldAspect></Field></Item></FieldXtml></Action></Field><Field1 t="field.Button" Title="Title, Image and More Fields"><Condition t="data.IsInCommaSeparatedList" Item="%$ParentXtml/@t%" List="field.XmlMultipleGroup,bart.MultiplePage"/><Image t="image.Image" Url="%$_Images%/studio/card32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Group"><FieldXtml t="xml.Xml"><Field t="field.Group" HideTitle="true"><Layout t="uiaspect.Group"><Style t="group.Horizontal"/></Layout><Field t="field.Image" ID="Image" Title="Image" HideTitle="true"/><Field t="field.Group" ID="Title and Fields" HideTitle="true"><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><Field t="field.Text" ID="Title" Title="Title" HideTitle="true"/></Field></Field></FieldXtml></Action></Field1><Field t="field.Button" Title="Header or Footer"><Condition t="data.IsInCommaSeparatedList" Item="%$ParentXtml/@t%" List="field.XmlMultipleGroup,bart.MultiplePage"/><Image t="image.Image" Url="%$_Images%/studio/header_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Header"><FieldXtml t="xml.Xml"><Field t="field.Group" HideTitle="true"><GroupData t="group.ContainerItems"/><FieldAspect t="field_aspect.HeaderFooterField"/></Field></FieldXtml></Action></Field><Field t="field.Button" Title="Filters Section"><Condition t="data.IsInCommaSeparatedList" Item="%$ParentXtml/@t%" List="field.XmlMultipleGroup,bart.MultiplePage"/><Image t="image.Image" Url="%$_Images%/studio/filter_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddField" ParentXtml="%$ParentXtml%" IDPrefix="Filters"><FieldXtml t="xml.Xml"><Field t="field.FilterSection" HideTitle="true" Location="header"><Layout t="uiaspect.Horizontal" HideInnerTitles="" Spacing="15px"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="padding-bottom:10px;"/></Field></FieldXtml></Action></Field></Contents><Feature t="dlg.ArrowToLaunchingElement"/></FieldAspect></Field><Field t="field.Button" Title="More" Tooltip=""><Style t="button.ToolbarButton"/><Image t="image.Image" Url="%$_Images%/studio/more_24.png"/><FieldAspect t="field_aspect.PopupOnHover"><Style t="dialog_style.HoverPopup"/><Feature t="dlg.ArrowToLaunchingElement"/><Contents t="ui.ItemPage"><Var name="CntrCtrl" t="uiaspect.ContainerControl" Container="%$HeaderFooterCntr%"/><Var name="SelectedFieldElement" t="uiaction.SelectedItemElement" RunOn="%$CntrCtrl%"/><Var name="Item" t="field_dt.ToolbarFieldXtml" FieldXtml="%$FieldXtml%"/><Field t="field.Button" Title="Add Fields From Metadata"><Image t="image.Image" Url="%$_Images%/studio/dynamic_32.png"/><Style t="button.Hyperlink"/><Action t="field_dt.FastAddFieldByPT" ParentXtml="%$Item%" Component="field.DynamicFields" IDPrefix="Fields" AddToTree="%$InTree%"/></Field><Field t="field.Button" Title="Delete Item"><Image t="image.Image" Url="%$_Images%/studio/del32.png"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="dialog.AskForConfirmation" Title="Delete Item" Question="Are you sure you want to delete field %$Item/@Title%?"><RunOnOK t="action.RunActions"><Var name="Parent" value="%$Item/..%"/><Action t="xml.Delete" Data="%$Item%"/><Action t="uiaction.DeleteItemElements" ItemElements="%$SelectedFieldElement%" Condition="%$InTree%"/><Action t="action.RunActions"><Condition t="yesno.Not" Of="%$InTree%"/><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%$Parent%"/><Action t="field_dt.RefreshPreview"/><Action t="bart_dt.OpenPropertiesWindow"/><Action t="bart_dt.OpenTreePopup" Xtml="%$Parent%"/></Action></RunOnOK></Action></Field><Field t="field.Button" Title="Data Preview"><Image t="image.Image" Url="%$_Images%/studio/preview_32.png"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="dlg.OpenDialog" Title="Data Preview" NoCancel="true"><DialogData t="xml.XmlToText" PrettyPrint="true"><Data t="field_dt.FieldSampleData" PageData="%$PageSampleItems%" Field="%$Item%" Page="%$PageXtml%"/></DialogData><Contents t="ui.TextControl"><Style t="ui.Textarea" Rows="20"/></Contents></Action></Field><Field t="field.Button" Title="Script Xml"><Image t="image.Image" Url="%$_Images%/studio/xml_32.png"/><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HideTitle"/><Action t="xmlui.ShowXmlDialog" Title="Xtml Source for %$FieldPath%" AutoWrite="true" Data="%$FieldXtml%" ><Var name="FieldPath" t="bart_dt.XtmlToPath" Xtml="%%"/><Var name="ParentTag" t="xml.Tag" Data="%..%"/><Var name="IsComponent" t="yesno.ItemsEqual" Item1="%$ParentTag%" Item2="Component"/><Var name="XtmlToEdit" t="data.IfThenElse" If="%$IsComponent%" Then="%..%" Else="%%"/><Xml value="%$XtmlToEdit%"/><OnUpdate t="action.RunActions"><Action t="bart_dt.SetSelectedStudiobarObject" Xtml="%$XtmlToEdit/xtml%" Condition="%$IsComponent%"/><Action t="bart_dt.RefreshDtPopups"/></OnUpdate></Action></Field><Field t="field.Button" Title="Advanced Customization"><Image t="image.Image" Url="%$_Images%/studio/customize_32.png"/><Style t="button.Hyperlink"/><Action t="xtml_dt_tree.OpenScriptDialog" Data="%$FieldXtml%"><Var name="AAEditorState" t="aaeditor.State" TreeXtml="%$Xtml%"><Var name="Xtml" t="xtml.Xtml" Xtml="%%"><Context t="bart_dt.ResourcesContext"/></Var><SaveAction t="aaeditor.Save"/><GlobalPreviewXtml t="xtml.Xtml"><Xtml t="field_dt.UpToPageDef" Data="%$Xtml/script%"/></GlobalPreviewXtml></Var></Action></Field></Contents></FieldAspect></Field></Field><FieldAspect t="field_aspect.HeaderFooterField"/></xtml></Component><Component id="IsMobile" type="data.Boolean"><xtml t="yesno.IsInList" Item="%$_WidgetXml/@view%" ><List t="data.List"><Item value="mobile" /><Item value="mobile_landscape" /></List></xtml></Component><Component id="AddFieldMultipleGroup" type="field.Fields"><Param name="FieldXtml"/><xtml t="field.XmlMultipleGroup" ID="Fields" Title="Fields" TitleForSingle="Field" HideTitle="true"><Aspect t="uiaspect.Css" OnElement="items" Inline="opacity:0.5;" OnCondition="%@fieldExists% == \'true\'"/><Aspect t="uiaspect.Css" OnElement="items" Inline="color:rgb(181,169,222);" OnCondition="%@origin%.indexOf(\'page\') == 0"/><FieldAspect t="field_aspect.Css" Inline="max-height:250px;&#xa;overflow: auto; overflow-x: hidden;padding-right:20px"/><Items t="field.CustomItems"><Items t="field_dt.FieldsToAdd" FieldXtml="%$FieldXtml%" /></Items><Presentation t="uiaspect.RichTable" Sort="true" ColumnsResizer="false" DragAndDropColumns="false" DragAndDropRows="false" HideEmptyTable="true"/><Aspect t="uiaspect.ReadOnly"/><Operations t="operation.Operations"/><Field t="field.Button" Title="Add" ID="Add" ID__Manual=""><Style t="button.ImageOnly"/><Action t="action.RunActions"><Action t="field_dt.AddFieldFromPopup" ParentXtml="%$FieldXtml%" AlsoSelect="false"/><Action t="action.WriteValue" To="%!@fieldExists%" Value="true"/><Action t="uiaction.RefreshItemElements"><ItemElements t="cntr.ParentItemElement"/></Action><Action t="uiaction.Refresh" RunOn=".inspect_tree"/></Action><Image t="image.Image" Url="%$_Images%/add1616.gif"/></Field><Field t="field.Field" FieldData="%!@Title%" ID="Title" Title="Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" Inline="font-weight: bold;"/></Field><Field t="field.Field" ID="sample" Title="Sample" ReadOnlyText="true"><FieldData t="text.FirstSucceeding"><Item value="%!@sample%" /><Item value="(Group)"><Condition t="field_dt.IsGroup" /></Item></FieldData><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" Inline="font-style:italic;"/><FieldAspect t="field_aspect.LimitTextLength" FullTextAsTooltip="true" MaxLength="30"/></Field><Field t="field.Field" ID="origin" Title="Origin" ReadOnlyText="true"><FieldData t="data.IfThenElse" If="%@origin% == \'data\'" Then="" Else="%@origin%" /><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" Inline="font-style:italic;"/></Field><Aspect t="uiaspect.TableNoHeader"/><Aspect t="uiaspect.Css" OnElement="cells" Inline="border-bottom:1px solid #CCC; border-left:none; border-right:none;"/></xtml></Component><Component id="UpToPageDef" type="data.Data" execution="native"><Param name="Xtml" Default="%%" /><Param name="Result" type="enum" options="xtml,path,object" Default="xtml" /></Component><Component id="ContainerFields" type="data.Data" execution="native"><Param name="Container" /><Param name="ReturnIDsList" type="data.Boolean" Default="true" /></Component><Component id="CodeMirrorsTabControlStyle" type="tabcontrol.Style"><xtml t="tabcontrol.CustomStyle"><Css><![CDATA[#this >div>div.aatabs_tab { font-size: 93\\%; font-family: arial; float: left; padding: 6px 15px 4px 6px; cursor: pointer;  background-color:#FADFAD; margin-right:2px;   color: #A08271;   min-width:30px;   -webkit-border-top-left-radius:6px; -webkit-border-top-right-radius:6px;   -moz-border-radius-topleft: 6px; -moz-border-radius-topright: 6px;}#this >div>div>div.aatabs_tab_text {  padding:0 0 0 5px; float:left; }#this >div>div.aa_selected_tab  { background-color:#73C2FB; color: #230E0E; }#this >div>div>div.aatabs_tab_image { float: left; }#this >.aatabs_contents { clear: both; padding:0px 0 3px 0; }]]></Css><Html><![CDATA[<div><div><div class="aatabs_tab"><div class="aatabs_tab_image"/><div class="aatabs_tab_text"/></div></div><div class="aatabs_contents"/></div>]]></Html><![CDATA[]]><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {              tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);               tab.setImageSource(\'.aatabs_tab_image\',tab.Image);      tab.setOnClick(\'\',tab.Select); });}]]></Javascript></xtml></Component><Component id="SliderParam" type="field.FieldAspect"><Param name="Units"><Default t="slider.Unit" Symbol="px" Min="0" /></Param><Param name="Width" Default="125px"/><Param name="AllowEmptyValue" type="data.Boolean" Default="true"/><xtml t="field_aspect.FieldAspects"><FieldAspect t="field_aspect.FieldData" ><FieldData t="data.CreateIfDoesNotExist" Query="%@{$_Field/ParamXml/@name}%"><Create t="action.WriteValue" To="%!@{$_Field/ParamXml/@name}%"><Value t="xtml.RunXtml" Xtml="%$_Field/ParamXml%" Field="Default" /></Create></FieldData></FieldAspect><FieldAspect t="slider.Slider" Units="%$Units%" Width="%$Width%" AllowEmptyValue="%$AllowEmptyValue%"/><FieldAspect t="field_aspect.OnUpdate"><Action t="field_dt.RefreshPreview" /></FieldAspect></xtml></Component><Component id="FieldIdParam" type="field.FieldAspect"><Param name="PTForFields" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="true" AllowValueNotInOptions="true" Multiple="false" Mandatory="false" RecalculateForEachCell="false"><Options t="picklist.DynamicOptions" OptionCode="%ID%"><Options t="data.Pipeline"><Item t="data.IfThenElse"><If t="yesno.NotEmpty" Value="%$PTForFields%" /><Then t="xtml_dt.FindXtmlByT" FindAll="true" ParentXtml="%$_WidgetXml%" T="%$PTForFields%"/><Else value="%$_WidgetXml///Field%"/></Item><Item t="object.Object" ID="%@ID%" Title="%@Title%"/><Aggregator t="data.MakeUnique" Identifier="%ID%,%Title%"/></Options><OptionLabel value="%Title% %$IdText%"><Var name="IdText" t="data.Switch"><Case><IfCondition t="yesno.IsEmpty" Value="%ID%"/></Case><Case Then="%ID%"><IfCondition t="yesno.IsEmpty" Value="%Title%"/></Case><Case Then="(%ID%)"><IfCondition t="yesno.ItemsNotEqual" Item1="%ID%" Item2="%Title%"/></Case></Var></OptionLabel></Options></FieldAspect><FieldAspect t="field_aspect.FieldData" ><FieldData t="data.FirstSucceeding"><Item value="%{$_Field/ParamXml/@name}%"/><Item value="%!@{$_Field/ParamXml/@name}%"/></FieldData></FieldAspect><FieldAspect t="field_aspect.HandleEvent" Event="update"><Action t="field_dt.RefreshPreview" /></FieldAspect></xtml></Component><Component id="InfoForSimpleEdit" type="field.FieldAspect"><xtml value="" /></Component><Component id="OpenCustomAAEditor" type="action.Action"><Param name="Xtml" Default="%%" /><Param name="Param" Default="%$_Param%" /><xtml t="action.RunActions"><Action t="xml.AddChildren"><Condition t="yesno.IsEmpty" Value="%$Xtml/{$Param}%" /><Children t="xml.ByTag" Tag="%$Param%"><Change t="xml.SetAttribute" AttributeName="t"><Value t="data.Switch"><Value t="xtml.ComponentParamType" Component="%$Xtml/@t%" Param="%$Param%" /><Case If="data.Data" Then="data.Pipeline" /><Case If="action.Action" Then="action.RunActions" /><Case If="xml.Change" Then="xml.PerformChanges" /><Case If="ui.Control" Then="ui.List" /><Case If="data_async.Data" Then="data_async.Pipeline" /><Case If="action_async.Action" Then="action_async.RunActions" /></Value></Change></Children></Action><Action t="xtml_dt_tree.OpenScriptDialog" ><Var name="_Context" t="xtml_dt.CalcPreviewForXtml"><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="" /></Var><Var name="XtmlWithContext" t="xtml.Xtml" Xtml="%$Xtml%" Context="%$_Context/context%"><Input t="data.FirstSucceeding"><Item value="%$_Context/Input%" /><Item value="%$_AAEditorPreparedInput%" /></Input></Var><Var name="AAEditorState" t="aaeditor.State"><Data value="%$XtmlWithContext%" /></Var><RunOnOK t="action.RunActions"><Action t="uiaction.Refresh" /><Action t="field_dt.RefreshPreview" /></RunOnOK></Action></xtml></Component></xtml><xtml ns="field_dt_model" type="Non UI model and utility components"><Component id="ListItemsOfFieldForPreview" type="data.Data" description="Given the field xtml, returns the preview itemlist items" execution="native"><Param name="FieldXtml" Default="%%" /></Component><Component id="SampleItemsToFieldInfos" type="data.Data" execution="native" description="Given a list of sample items (xml/json) returns a list of possible fields, and for each field show ID,Title,FieldData,Type"><Param name="SampleItems" /><NativeHelper name="GuyessType" t="field_dt.GuessType" SampleData="%%"/></Component></xtml><xtml ns="jbart_studio"><Component id="Main" type="ui.Control"><xtml t="ui.Section" ><Var name="_JBartStudio" t="jbart_studio.JBartStudioObject" /><Control t="ui.List" Class="jbartstudio_holder"><Control t="ui_async.Control"><AsyncAction t="action_async.RunActions"><Action t="action_async.AsyncActionOnAsyncData"><Query t="object.RunMethod" Object="%$_JBartStudio%" Method="LoadProjectNode" /><Action t="action_async.RunActions"><Action t="object.SetProperty" Object="%$_JBartStudio%" Property="Project" IsSingleProperty="true"><Value t="data.IfThenElse" If="%@_type% != \'error\'" Then="%%"><Else t="data.Empty" /></Value></Action><Action t="jbart_studio.LoadExternalJS" /></Action></Action><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="LoadUserID" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="LoadUserInfo" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="OpenUserSettingsForFirstTime" /><Action t="jbart_studio.AddToRecentProjects" Project="%$_JBartStudio/Project%" /></AsyncAction><Control t="ui.List" Class="jbartstudio_after_project_loaded"><Control t="data.FirstSucceeding"><Var name="StudioPage" t="ui.UrlFragment" Attribute="studiopage" /><Item t="jbart_studio.StudioPageControl" Condition="%$StudioPage% == \'home\'"><Field t="jbart_studio.CreateNewProject" /></Item><Item t="jbart_studio.StudioPageControl" Condition="%$StudioPage% == \'samples\'"><Field t="jbart_studio.Samples" /></Item><Item t="jbart_studio.StudioPageControl" Condition="%$StudioPage% == \'newproject\'"><Field t="jbart_studio.NewProject" /></Item><Item t="jbart_studio.StudioPageControl" Condition="%$StudioPage% == \'myprojects\'"><Field t="jbart_studio.MyProjectsField" /></Item><Item t="jbart_studio.ShowProject"><Condition t="yesno.NotEmpty" Value="%$_JBartStudio/Project/@id%" /></Item><Item t="jbart_studio.ShowProjectDoesNotExist" Condition="%$_JBartStudio/ProjectID% != \'\'" /><Item t="jbart_studio.StudioPageControl"><Field t="jbart_studio.NewProject" /></Item></Control></Control></Control></Control></xtml></Component><Component id="ProjectWithJBartSources" type="data.Data"><Param name="Project" Default="%$_JBartStudio/Project%"/><xtml t="xml.WithChanges" Xml="%$Project%"><Var name="JsInComponents" t="object.Object" /><Var name="Components" t="bart_dt_compress.Components" Script="%$Project%" BlackList="%$Project/compress/@black_list%" /><Var name="Xtml" t="bart_dt_compress.Xtml" Components="%$Components%" /><Var name="GCs" t="bart_dt_compress.GCs" Components="%$Components%" /><Var name="Utils" t="bart_dt_compress.JsUtils" GCs="%$GCs%" WidgetXml="%$Project%" JsToAdd="%$Project/compress/@js_to_add%"/><Change t="xml.Delete" Element="%JBartJs%" /><Change t="xml.Delete" Element="%JBartXtml%" /><Change t="xml.AddChildren"><Children t="xml.ElementOfDynamicTag" Tag="JBartXtml"><Change t="xml.AddChildren" Children="%$Xtml%" /></Children></Change><Change t="xml.AddChildren"><Children t="xml.ElementOfDynamicTag" Tag="JBartJs"><Change t="xml.WriteCData" Element="%%"  ><CDataText><![CDATA[              %$Utils%              %$GCs%              ]]></CDataText></Change></Children></Change></xtml></Component><Component id="JBartStudioObject" type="data.Data" execution="native"><NativeHelper name="Object" t="object.Object"><TextProperty name="ProjectID" t="ui.UrlFragment" Attribute="project"/><TextProperty name="User" t="data.ValueFromCookie" Cookie="jbart_studio_user"/><Property name="ModifiedComponents" t="xml.Xml"/><Method name="LoadProjectNode" t="data.IfThenElse" If="%$_JBartStudio/UseJBartDB%"><Then t="jbartdb.JBartDBNode" ID="%$_JBartStudio/ProjectID%" ContentType="%$_JBartStudio/ContentType%"><OnLoad t="xml.ChangeXml" Xml="%%"><Change t="xml.Delete" Element="%JBartJs%"/><Change t="xml.Delete" Element="%JBartXtml%"/></OnLoad></Then><Else t="data_async.Rest" Url="bartdev.php?op=loadnode&amp;contenttype=%$_JBartStudio/ContentType%&amp;id=%$_JBartStudio/ProjectID%"/></Method><Method name="EditProject" t="action.RunActions"><Action t="dlg.CloseAllDialogs"/><Action t="object.SetTextProperty" Object="%$_JBartStudio%" Property="ProjectID" Value="%%"/><Action t="uiaction.SetUrlFragment" Fragment="?project=%%"/><Action t="uiaction.Refresh" RunOn=".jbartstudio_holder"/></Method><Method name="EnsureProjectsLoaded" t="action_async.ActionOnAsyncData"><Condition t="yesno.IsEmpty" Value="%$_JBartStudio/Projects/*%"/><Query t="data.IfThenElse" If="%$_JBartStudio/UseJBartDB%"><Then t="jbartdb.JBartDBQuery" ContentType="%$_JBartStudio/ContentType%" HeadersOnly="true"/><Else t="data_async.Rest" Url="bartdev.php?op=query&amp;contenttype=%$_JBartStudio/ContentType%&amp;headersonly=true"/></Query><Action t="object.SetProperty" Object="%$_JBartStudio%" Property="Projects" IsSingleProperty="true"><Value t="data.IfThenElse" If="%@_type% != \'error\'" Then="%%"><Else t="data.Empty"/></Value></Action></Method><Method name="OpenUserSettingsForFirstTime" t="action.RunActions"><Condition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$_JBartStudio/User%" /><Item t="yesno.IsEmpty" Value="%$_JBartStudio/UserInfo/@id%" /></Condition><Action t="object.SetProperty" Object="%$_JBartStudio%" IsSingleProperty="true" Property="UserInfo"><Value t="xml.Xml" DynamicContent="true"><user _type="user" id="%$_JBartStudio/User%" /></Value></Action><Action t="jbart_studio.ShowUserInfoDialog" FirstTime="true"/></Method><Method name="LoadUserInfo" t="action_async.ActionOnAsyncData"><Condition t="yesno.And"><Item value="%$_JBartStudio/User% != \'\'"/><Item value="%$_JBartStudio/UserInfo/@id% != %$_JBartStudio/User%"/></Condition><Query t="data_async.Rest" Url="bartdev.php?op=loadnode&amp;contenttype=user&amp;id=%$_JBartStudio/User%"/><Action t="object.SetProperty" Object="%$_JBartStudio%" Property="UserInfo"><Value t="data.IfThenElse" If="%@_type% != \'error\'" Then="%%" /></Action></Method><Method name="SaveUserInfo" t="action.IfThenElse" If="%$_JBartStudio/UseJBartDB%"><Then t="jbartdb.SaveNodeAsync" Node="%$_JBartStudio/UserInfo%"/><Else t="action_async.UrlPost" Url="bartdev.php?op=savenode"><PostData t="xml.XmlToText" Data="%$_JBartStudio/UserInfo%" PrettyPrint="true"/><OnSuccess t="action.WriteValue" To="%$_JBartStudio/UserInfo/!@vid%" Value="%@vid%"/></Else></Method><Method name="ShowUserInfo" t="jbart_studio.ShowUserInfoDialog"/><Method name="ShowLoginDialog" t="jbart_studio.ShowLoginDialog"/><Method name="GoToSamplesPage" t="jbart_studio.ShowStudioPage" Page="samples"/><Method name="GoToCreateNewProject" t="jbart_studio.ShowStudioPage" Page="newproject"/><Method name="GoToMyProjects" t="jbart_studio.ShowStudioPage" Page="myprojects"/><Method name="SaveAndAddNewProject" t="jbart_studio.SaveAndAddNewProject" WidgetXml="%$NewWidgetXml%"/><Method name="DeleteProject" t="action.RunActions"><Action t="action_async.RunAsync"><Action t="action.IfThenElse" If="%$_JBartStudio/UseJBartDB%"><Else t="action_async.Rest" Url="bartdev.php?op=deletenode&amp;contenttype=%$_JBartStudio/ContentType%&amp;id=%$_JBartStudio/Project/@id%"><OnSuccess t="uiaction.ReloadPage"/></Else></Action></Action></Method><Method name="SaveProject" t="action.IfThenElse"><If t="jbart_studio.HasSavePermissions"/><Else t="jbart_studio.SuggestCloneInsteadOfSave"/><Then t="action.RunActions"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Text="Saving Project..." Status="saving"/><Action t="action_async.RunAsync"><Action t="action.IfThenElse" If="%$_JBartStudio/UseJBartDB%"><Then t="jbartdb.SaveNodeAsync"><Node t="jbart_studio.ProjectWithJBartSources" Project="%$_JBartStudio/Project%"/></Then><Else t="action_async.UrlPost" Url="bartdev.php?op=savenode"><PostData t="xml.XmlToText" Data="%$_JBartStudio/Project%" PrettyPrint="true"/><OnSuccess t="action.WriteValue" To="%$_JBartStudio/Project/!@vid%" Value="%@vid%"/></Else></Action><OnSuccess t="action.RunActions"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Status="saved"><Text t="data.IfThenElse" If="%$_DomEvent/ctrlKey%" Then="Project Saved and Deployed" Else="Project Saved"/></Action></OnSuccess><OnFailure t="opeation.WriteNotificationText" WriteTo="jbartStudio_notifications" Status="error" Text="Could not save project"/></Action></Then></Method><Method name="MyProjects" t="jbart_studio.MyWidgets"/><Method name="RecentProjects" t="jbart_studio.RecentProjects"/><Method name="_AddProjectToMyProjects" t="jbart_studio.AddToMyProjects" Project="%$_JBartStudio/Project%"/><Method name="_ShowProjectForPreview" t="ui.ControlWithAction"><Var name="_Unit" value="%bart_dev/db/bart_unit/bart_unit%"/><RunBeforeControl t="xtml.LoadComponents" Components="%$_Unit/Component%" Namespace="%$_Unit/@id%" ClearNSBefore="true"/><Control t="ui_async.Control"><AsyncAction t="action_async.RunActions"><Action t="action_async.LoadJsFiles" JsFiles="%$_Unit/Component[@id=\'App\']/xtml/@JsFiles%"/><Action t="jbart_studio.LoadExternalJS" ExternalJsFiles="%externalJS/file%"/></AsyncAction><Control t="field.ShowFieldControl"><Field t="field.Layout"><Field t="field.Text" Title="Description" Text="%@description%"><Condition t="yesno.NotEmpty" Value="%@description%"/><Style t="uitext.CustomStyle"><Html><![CDATA[<div />]]></Html><Css><![CDATA[#this {    color:#778994;    font: 12px Arial;   padding: 10px 20px 10px 15px;   margin: 0 20px 0 0;   line-height: 20px; }#this p { margin:0; padding:0;}]]></Css><Javascript><![CDATA[function(text) { text.setInnerHTML(\'\',text.text); }]]></Javascript><![CDATA[]]></Style><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this { margin: 5px 0 10px 0; border: 1px solid #feb600; background:#fff7d3; }]]></GlobalCss></FieldAspect></Field><Field t="field.Layout"><Layout t="data.IfThenElse"><If t="xtml.ComponentExists" ComponentID="jbart_studio.%@view%_simulator"/><Then t="xtml.RunXtml"><Xtml t="xml.Xml" DynamicContent="true"><xtml t="jbart_studio.%@view%_simulator"/></Xtml></Then><Else t="layout.Default"/></Layout><Field t="field.Control"><Control t="field_control.CustomXtmlControl"><Var name="_PageParams" t="data.List"/><Control t="jbart_api.ShowWidget" WidgetXml="%%"/></Control></Field></Field></Field></Control></Control></Method><Method name="ShowProgressIndicator" t="action.IfThenElse"><Var name="Info" value="%%"/><If t="yesno.NotEmpty" Value="%Text%"/><Then t="dlg.OpenDialog"><Style t="jbart_studio.ProgressIndicatorInfoPopupStyle"/><Contents t="field.ShowFieldControl"><Field t="field.Layout"><Field t="field.Image" HideTitle="true" ID="Image" Title="Image"><Image t="image.Image" Url="%$_Images%/studio/loading.gif" KeepImageProportions="true" AsDivBackground="" Size="16,16"/><Style t="image.PlainImage"/></Field><Field t="field.Text" Text="%$Info/Text%" Title=""><Style t="uitext.PlainText"/></Field><Layout t="layout.HorizontalHtmlTable" Spacing="12px"/></Field></Contents><Feature t="dlg.UniquePopup" Identifier="jbartstudio_progress"/></Then><Else t="dlg.CloseDialogByID" Identifier="jbartstudio_progress"/></Method></NativeHelper></Component><Component id="ShowStudioProgressIndication" type="action.Action"><Param name="Text" /><xtml t="object.RunMethod" Object="%$_JBartStudio%" Method="ShowProgressIndicator"><Input t="object.Object" Text="%$Text%" /></xtml></Component><Component id="ShowStudioPage" type="action.Action"><Param name="Page" /><xtml t="action.RunActions"><Action t="uiaction.SetUrlFragment" Attribute="studiopage" Value="%$Page%" /><Action t="dlg.CloseAllDialogs" /><Action t="uiaction.Refresh" RunOn=".jbartstudio_after_project_loaded" /></xtml></Component><Component id="ShowProjectDoesNotExist" type="ui.Control"><xtml t="jbart_studio.StudioPageControl"><Field t="field.Group" HideTitle="true" ID="Group" Title="Group"><Layout t="uiaspect.Group"><Style t="group.Vertical" CssOnElement="margin-bottom:25px;"/></Layout><Operations t="operation.Operations"/><Field t="field.Text" Text="The project %$_JBartStudio/ProjectID% does not exist" Title=""><Style t="group.FacebookTitle"/><FieldAspect t="field_aspect.Css" Inline="color: #333;&#xa;font-size: 15px;&#xa;font-family: arial;&#xa;"/></Field><Field t="field.Button" ID="Button" Title="Click here to go to the main page"><Style t="button.Hyperlink"/><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Action t="uiaction.SetUrlFragment"/><Action t="object.SetTextProperty" Object="%$_JBartStudio%" Property="ProjectID"/><Action t="uiaction.Refresh" RunOn=".jbartstudio_holder" /></Action></Action><Image t="image.Image" Url="%$_Images%/studio/back1616.png"/></Field></Field></xtml></Component><Component id="ShowProject" type="ui.Control"><xtml t="ui.List" Class="jbartstudio_top"><Control t="ui_async.Control" Data="%$_JBartStudio/Project%"><Var name="_WidgetXml" value="%$_JBartStudio/Project%" /><Var name="GalleryNode" value="%$_JBartStudio/Project%" /><Var name="_BartDevDtContext" t="object.Object"><SingleProperty name="Studio" t="object.Object" /><Property name="App" value="%@id%" /><Property name="DevUnits" value="%bart_dev%" /><Property name="WriteUiPrefs" value="true" /><Method name="Refresh" t="action.RunActions"><Action t="uiaction.Refresh" RunOn=".aa_with_bartcontext" /><Action1 t="bart_dt.RefreshDtPopups" /></Method><Method name="StrongRefresh" t="action.RunActions"><Action t="uiaction.Refresh" RunOn=".jbartstudio_after_project_loaded" /></Method><Method name="Save" t="action.RunActions"><Action t="action.RunActionOnItems"><Items t="data.Pipeline"><Item value="%$_BartContext/Resources%" /><Item t="yesno.PassesFilter" Filter="%AutoSaveSampleData%" /></Items><Action t="action.RunActions"><Var name="ResourceXtml" value="%$_BartContext/AppXtml/Resources/Resource[@ResourceID=\'{ID}\']%" /><Action t="xml.ReplaceXmlChildren" Parent="%$ResourceXtml/Xml%" Condition="%$ResourceXtml/@t% == \'bart_resource.Xml\'"><Children t="data.Duplicate" Data="%Items%" /></Action><Action t="field_dt.WriteCDataAndFix" Element="%$ResourceXtml/Value%" Condition="%$ResourceXtml/@t% == \'jbart_resource.Data\'" ><CDataText t="xml.XmlToText" PrettyPrint="true" Data="%Items%" /></Action></Action></Action><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="SaveProject" /><Action t="action.RunActions" Condition="%$_DomEvent/ctrlKey%"><Var name="_WidgetXml" value="%$_JBartStudio/Project%" /><Var name="WidgetId" value="%$_WidgetXml/@id%" /><Data value="%$_WidgetXml%" /><Action1 t="bart_dt.SaveWidgetSource"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Text="Project Specific Source Deployed"                  Status="saved" /></Action1><Action t="bart_dt.SaveWidgetCompressedJBart" /><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Text="Project Compressed Base Source Deployed"                Status="saved" /></Action></Method><Method name="ToTestsMode" t="action.RunActions"><Action t="uiaction.SetUrlFragment"><Fragment t="bart_url.NewUrlFragment" Proposed="?mode=tests"><Current t="ui.UrlFragment" /></Fragment></Action><Action t="uiaction.Refresh" RunOn=".jbartstudio_top" /></Method><Method name="ChangeOuterUrl" t="uiaction.SetUrlFragment"><Fragment t="bart_url.NewUrlFragment" ><Proposed t="text.RemovePrefix" Data="%$Url%" Separator="#" /><Current t="ui.UrlFragment" /></Fragment></Method></Var><Var name="XtmlDtContext" t="object.Object"><Method name="Save" t="aaeditor.SaveToServerAction" /></Var><Var name="_Customize" value="true" /><Var name="_GeneralStyling" t="object.Object" /><Var name="_GlobalVars" t="bart.GlobalVars" /><Var name="_BartContext" t="bart.Context"><Url t="object.Object"><Property name="All" value="%!url/@url%" /><Method name="GetValue" t="ui.UrlFragmentAttribute" Url="%$_This/All%" Attribute="%$Attribute%" /><Method name="Update" paramVars="ValuePairs" t="action.WriteValue" To="%$_This/All%"><Value t="bart_url.NewUrlFragment" Current="%$_This/All%"><Proposed t="text.Concat"><Items value="%$ValuePairs%" /></Proposed></Value></Method></Url></Var><Var name="_UIPref" t="bart.UIPreferences" /><Var name="_ServerAdapter" t="bart_server.MemoryXmlDb" DB="%$_BartDevDtContext/DevUnits/db%" /><Var name="_BartDtDB" value="%$_BartDevDtContext/DevUnits/db%" /><AsyncAction t="action_async.RunActions"><Action t="jbart_studio.ToggleDesignTimeClass" DesignTime="%$DesignTime%" /><Action t="bart.CleanXmlInfos" /><Action t="xtml.RunXtml" Xtml="%$AppDef/ApplicationFeature[@t=\'jbart_jsloader.LoadJavascriptFile\']%"><Var name="AppDef" value="%$_BartDevDtContext/DevUnits/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /></Action><Action t="object.SetProperty" Object="%$_BartContext%" Property="Units" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="AppXtml"            Value="%bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /><Action t="xtml.LoadComponents" Components="%$_BartContext/AppXtml/../../Component%" Namespace="%$_BartContext/AppXtml/../../@id%"            ClearNSBefore="true" /><Action t="action_async.RunActions"><Data value="%$_BartDevDtContext/DevUnits/db/bart_unit/bart_unit%" /><Var name="BartAppXtml" value="%$_BartContext/AppXtml%" /><Action t="bart.LoadUnit" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="AppXtml"><Value t="xtml.ComponentDefinition" ID="%@id%.App" ToXtml="true" /></Action><Action t="xtml.RunXtmlByComponentId" ComponentID="%@id%.App" /></Action><Action t="action.RunActionOnItems"><Items t="data.Pipeline"><Var name="PluginDef" t="plugins.PluginDefinitions" /><Item t="text.Split" Data="%$_WidgetXml/@plugins%" Separator="," /><Item value="%$PluginDef/plugin[@id=\'{}\']/@enhanceStudio%" /></Items><Action t="xtml.RunXtmlByComponentId" ComponentID="%%" /></Action><Action t="bart_dt.RestorePopupsState" /></AsyncAction><ControlForLoading t="ui.Text" Text="loading..." /><Control t="ui.List" Class="jbartstudio_runtime aa_with_bartcontext"><Control t="field.ShowFieldControl"><Field t="bart_dt.StudioBar" ID="StudioBar" /></Control><Control t="ui.Switch"><Value t="ui.UrlFragment" Attribute="mode" /><Case If="tests"><Then t="ui.List" Class="jbstudio"><Control t="field.ShowFieldControl"><Field t="field.Button" ID="Button" Title="Back to widget"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/back1616.png"/><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="ChangeOuterUrl"><Param name="Url" value="?mode=" /></Action><Action t="object.RunMethod" Object="%$_BartDevDtContext%" Method="StrongRefresh" /></Action></Field></Control><Control t="bart_dt.EditXtmlTests" Data="%$_JBartStudio/Project/!Tests%" IsGallery="true" /></Then></Case><Default t="field.ShowFieldControl"><Field t="field.Group"><Layout t="uiaspect.Group"><Style t="data.IfThenElse"><If t="xtml.ComponentExists" ComponentID="jbart_studio.%$_WidgetXml/@view%_simulator" /><Then t="xtml.RunXtml"><Xtml t="xml.Xml" DynamicContent="true"><xtml t="jbart_studio.%$_WidgetXml/@view%_simulator" /></Xtml></Then><Else t="group.Vertical" /></Style></Layout><Field t="field.Control"><FieldAspect t="field_aspect.GlobalCss" GlobalCss="%$_BartContext/Css%" /><Control t="ui.ControlWithAction"><Control t="field_control.CustomXtmlControl"><Control t="ui.IfThenElse"><Var name="Page" t="ui.UrlFragment" Attribute="wpage" /><If t="yesno.IsEmpty" Value="%$Page%" /><Then t="bart_screen.ShowScreen" /><Else t="bart_screen.ShowScreen" PageID="%$Page%" /></Control></Control><RunAfterControl t="object.RunMethod" Object="%$_BartDevDtContext/Studio%" Method="AutoOpen"><Var name="Page" t="ui.UrlFragment" Attribute="wpage" /><Var name="PageXtml" value="%$_BartDevDtContext/DevUnits/db/bart_unit/bart_unit/Component/xtml[@ID=\'{$Page}\']%" /></RunAfterControl></Control></Field></Field></Default></Control></Control></Control></xtml></Component><Component id="SaveAndAddNewProject" type="action.Action"><Param name="WidgetXml" /><xtml name="Save" t="action.RunActions"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Text="Saving New Project..."        Status="saving" /><Action t="action_async.RunAsync"><Action t="action_async.UrlPost" Url="bartdev.php?op=savenode"><PostData t="xml.XmlToText" Data="%$WidgetXml%" PrettyPrint="true" /><OnSuccess t="action.RunActions"><Action t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Status="saved"              Text="Project Created" /><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="EditProject" Data="%$WidgetXml/@id%" /></OnSuccess><OnError t="opeation.WriteNotificationText" WriteTo="jbartStudio_notifications" Status="error"            Text="Could not create project" /></Action></Action></xtml></Component><Component id="ShowUserInfoDialog" type="action.Action"><Param name="FirstTime" type="data.Boolean"/><xtml t="dlg.OpenDialog" Data="%$_JBartStudio/UserInfo%" ><Title t="data.IfThenElse" If="%$FirstTime%" Then="Welcome to jBart" Else="Edit User Settings"/><Contents t="ui.Document"><Field t="field.Text" ID="Text" Title="Text" Text="Please fill in some basic info about yourself" Condition="%$FirstTime%"><Style t="uitext.PlainText"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { padding: 0 0 8px 0; color: #333; }#wrapper { }]]></Css></FieldAspect></Field><Field t="field.Field" FieldData="%!@fullName%" Title="Name"><FieldAspect t="field_aspect.Resizer" RememberLastWidth="false"/></Field><Field t="field.Field" FieldData="%!@photo%" Title="Photo"><FieldAspect t="field_aspect.Resizer" RememberLastWidth="false"/><Type t="field_aspect.Image"/></Field><Field t="field.Field" FieldData="%!@email%" Title="Email"><FieldAspect t="field_aspect.Resizer" RememberLastWidth="false"/></Field></Contents><RunOnOK t="action_async.RunAsync"><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="SaveUserInfo"/><OnSuccess t="notification_box.ShowNotification" NotificationBox="jbart_studio_notification" Status="saved" Text="User Info Saved"/><OnError t="opeation.WriteNotificationText" WriteTo="jbartStudio_notifications" Status="error" Text="Could not save user info"/></RunOnOK><Feature t="dlg.Buttons"><Layout t="group.Horizontal"/><Buttons t="dlg.Ok"/></Feature></xtml></Component><Component id="ShowSignupDialog" type="action.Action"><xtml t="dlg.OpenDialog" Title="Signup to JBart Studio"><Var name="SignupData" t="xml.Xml"><user _type="user" /></Var><Data value="%$SignupData%" /><Contents t="ui.Document"><Field t="field.XmlField" Path="@id" ID="user" Title="User"><Type t="field_aspect.Text" Mandatory="true" Multiple="false" /></Field><Field t="field.XmlField" Path="@email" ID="email" Title="Email"><Type t="field_aspect.Email" /><FieldAspect t="field_aspect.Description" Description="Optional" /></Field><Field t="field.XmlField" Path="@password" ID="password" Title="Password"><Type t="field_aspect.Text" Mandatory="false" Multiple="false" /><FieldAspect t="field_aspect.Password" /><FieldAspect t="field_aspect.Description" Description="Optional" /></Field><Presentation t="uiaspect.PropertySheet" Space="true" /><Field t="field.XmlField" Path="@confirm_password" ID="confirm_password" Title="Confirm Password"><Type t="field_aspect.Text" Mandatory="false" Multiple="false" /><FieldAspect t="field_aspect.Password" /><FieldAspect t="field_aspect.Validation" CheckValidation="on blur" ErrorMessage="passwords do not match"><Validation t="validation.CustomValidation"><SuccessCondition t="yesno.EqualsTo" To="%../@password%" /></Validation></FieldAspect></Field><Field t="field.XmlField" Path="@full_name" ID="full_name" Title="Full Name"><Type t="field_aspect.Text" /></Field><Field t="field.XmlField" Path="@photo" ID="photo" Title="Photo"><Type t="field_aspect.Image" /><FieldAspect t="field_aspect.Description" Description="A link to your photo on the web" /></Field><Field t="field.XmlField" Path="@keepLoggedIn" ID="keeplogin" Title="Keep me logged in"><Type t="field_aspect.Boolean" CheckedByDefault=""><Presentation t="field_aspect.CheckBox" /></Type><FieldAspect t="field_aspect.DefaultValue" Value="true" /></Field></Contents><Feature t="dlg.RunBeforeOK"><Action t="jbart_studio.DoSignup" UserData="%$SignupData%"><OnFailure t="validation.ShowValidationError"><RunOn t="dlg.TopDialog" /><Error t="text.FirstSucceeding"><Item value="user by that name already exists" Condition="%% == \'user already exists\'" /><Item value="can not create account %%" /></Error></OnFailure></Action></Feature><RunOnOK t="action_async.RunAsyncActions"><Action t="object.SetTextProperty" Object="%$_JBartStudio%" Property="User" Value="%$SignupData/@id%" /><Action t="action.WriteToCookie" Cookie="jbart_studio_user"><Value value="%$LoginData/@user%" Condition="%$SignupData/@keepLoggedIn%" /></Action><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="LoadUserInfo" /><Action t="uiaction.Refresh" RunOn=".jbartstudio_after_project_loaded" /></RunOnOK></xtml></Component><Component id="ShowLoginDialog" type="action.Action"><xtml t="dlg.OpenDialog" Title="Login"><Style t="dialog_style.DefaultPopup"/><Feature t="dlg.AutomaticFocus"/><Feature t="dlg.ArrowToLaunchingElement"><ArrowImage t="image.Image" Url="%$_Images%/arrow.png"/></Feature><Var name="LoginData" t="xml.Xml"/><Data value="%$LoginData%"/><Contents t="ui.IfThenElse"><If t="jbart_studio.IsInArtwaresoft"/><Then t="ui.Document"><Field t="field.Text" ID="Text" Title="Text" Text="Please login with one of these providers:"><Style t="uitext.PlainText"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { }#wrapper { padding: 0 0 15px 0; }]]></Css></FieldAspect></Field><Field t="field.Layout"><Field t="field.Button" Title="Google"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://buss-art.appspot.com/_ah/login_redir?claimid=www.google.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Layout t="layout.HorizontalHtmlTable" Spacing=""/><Field t="field.Button" Title="Yahoo"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="100,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://buss-art.appspot.com/_ah/login_redir?claimid=yahoo.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Field t="field.Button" Title="AOL"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="200,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://buss-art.appspot.com/_ah/login_redir?claimid=aol.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field><Field t="field.Button" Title="Open ID"><Image t="image.ImageInSprite" Url="http://openid-selector.googlecode.com/svn/trunk/images/openid-providers-en.png" Size="100,60" PositionInSprite="300,0"/><Style t="button.ImageOnly"/><Action t="uiaction.GoToUrl"><Url t="data.Pipeline"><Item value="http://buss-art.appspot.com/_ah/login_redir?claimid=myopenid.com&amp;continue=%$MyUrl%"/><Var name="MyUrl" t="data.Url"/></Url></Action></Field></Field><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"><Style t="group.Default"/></Presentation><Operations t="operation.Operations"/></Then><Else t="ui.Document" keepLoggedIn="true" user="" password=""><Field t="field.Text" ID="Text" Title="Text" Text="This is a login form for locahost only.&#xa;"><Style t="uitext.PlainText"/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this { }#wrapper { padding: 0 0 7px 0; }]]></Css></FieldAspect></Field><Field t="field.Group"><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Field" FieldData="%!@user%" ID="name" Title="User Name" ReadOnlyText=""><Type t="field_aspect.Text" Mandatory="true" HideTitle="false" ReadOnly="false"/></Field><Field t="field.Field" FieldData="%!@password%" ID="password" Title="Password" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Password" HashPassword="true"/></Field><Field t="field.Field" FieldData="%!@keepLoggedIn%" ID="keepLoggedIn" Title="Keep me logged in" ReadOnlyText=""><Type t="field_aspect.Boolean" CheckedByDefault="true"><Presentation t="field_aspect.CheckBox"/></Type></Field><Field t="field.Button" ID="SignUp" Title="SignUp" HideTitle="true" ButtonText="New user? click here for easy sign up"><Style t="button.Hyperlink"/><Action t="action.RunActions"><Action t="dlg.CloseDialog"/><Action t="jbart_studio.ShowSignupDialog"/></Action></Field></Field><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/></Else></Contents><Feature t="dlg.RunBeforeOK"><Action t="action_async.ActionOnAsyncData"><Query t="data_async.UrlPost" Url="%$_JBartStudio/BaseUrl%?op=login"><PostData t="server.PostData" Name="user" Value="%$LoginData/@user%"/><PostData t="server.PostData" Name="password" Value="%$LoginData/@password%"/></Query><Action t="action.IfThenElse" If="%@type% != \'success\'"><Then t="validation.ShowValidationError" Error="wrong user or password"><RunOn t="dlg.TopDialog"/></Then></Action></Action></Feature><RunOnOK t="action_async.RunAsyncActions"><Action t="object.SetTextProperty" Object="%$_JBartStudio%" Property="User" Value="%$LoginData/@user%"/><Action t="action.WriteToCookie" Cookie="jbart_studio_user"><Value value="%$LoginData/@user%" Condition="%$LoginData/@keepLoggedIn%"/></Action><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="LoadUserInfo"/><Action t="uiaction.Refresh" RunOn=".jbartstudio_after_project_loaded"/></RunOnOK></xtml></Component><Component id="StudioPageControl" type="ui.Control"><Param name="Field" type="field.Fields[]"/><xtml t="field.ShowFieldControl"><Field t="field.Group"><FieldAspect t="field_aspect.Css" Class="jbartstudio_runtime"/><Field t="bart_dt.StudioBar" ID="StudioBar"/><Field t="field.Button" Title="Back to %$_JBartStudio/Project/@name%" Condition="%$_JBartStudio/Project/@name% != \'\'"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/studio/back1616.png"/><Action t="action.RunActions"><Action t="uiaction.SetUrlFragment" Fragment="?project=%$_JBartStudio/ProjectID%"/><Action t="uiaction.Refresh" RunOn=".jbartstudio_after_project_loaded"/></Action><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="margin-bottom:10px;"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="padding: 0 0 5px 0;" OnElement="cell"><Css><![CDATA[]]></Css></FieldAspect></Field><Field value="%$Field%"/></Field></xtml></Component><Component id="DoSignup" type="action_async.Action" execution="native"><Param name="UserData" /><Param name="OnSuccess" type="action.Action" script="true"/><Param name="OnFailure" type="action.Action" script="true"/></Component><Component id="LoadExternalJS" type="action_async.Action" execution="native"><Param name="ExternalJsFiles" Default="%$_JBartStudio/Project/externalJS/file%" /></Component><Component id="MyWidgets" type="data.Data" execution="native"><NativeHelper name="InUser" value="%$_JBartStudio/UserInfo/!MyWidgets%" /></Component><Component id="WriteToMyWidgets" type="data.Data" execution="native"><Param name="MyWidgets" /><NativeHelper name="WriteToUser" t="action.RunActions"><Action t="xml.Delete" Data="%$_JBartStudio/UserInfo/MyWidgets%" /><Action t="xml.AddXmlChildren" Parent="%$_JBartStudio/UserInfo%" Children="%$MyWidgets%" /><Action t="action_async.RunAsync"><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="SaveUserInfo" /></Action></NativeHelper></Component><Component id="HasSavePermissions" type="data.Data" execution="native" /><Component id="RecentProjects" type="action.Action" execution="native" /><Component id="AddToRecentProjects" type="action.Action" execution="native"><Param name="Project" /></Component><Component id="AddToMyProjects" type="action.Action"><Param name="Project" /><xtml t="jbart_studio.WriteToMyWidgets" Condition="%$Project/@id% != \'\'"><Var name="MyWidgets" t="jbart_studio.MyWidgets" /><Var name="ExistingInMyProjects" value="%$MyWidgets/project[@id=\'{$Project/@id}\']%" /><Condition value="%$ExistingInMyProjects/@id% == \'\'" /><MyWidgets t="xml.WithChanges" Xml="%$MyWidgets%"><Change t="xml.AddChildren"><Children t="xml.Xml" DynamicContent="true"><project id="%$Project/@id%" _type="%$Project/@_type%" name="%$Project/@name%" relation="%$Relation%" /></Children></Change></MyWidgets></xtml></Component><Component id="SuggestCloneInsteadOfSave" type="action.Action"><xtml t="dialog.AskForConfirmation" Question="You do not have the right permissions to save this project. Would you like to create your own copy?" Title="JBart Studio"><RunOnOK t="object.RunMethod" Object="%$_JBartStudio%" Method="CloneCurrentProject" /></xtml></Component><Component id="PromotedProjects" type="data.Data"><xtml t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.promotedProjectHeaders;&#xa;}"/></Component><Component id="SelectedSampleProject" type="data.Data"><xtml t="data.Pipeline"><Var name="_Selected" t="ui.UrlFragment" Attribute="sample_project" /><Item t="jbart_studio.PromotedProjects" /><Item t="yesno.PassesFilter"><Filter t="text.ItemsEqual" Item1="%@id%" Item2="%$_Selected%" /></Item><Item value="%@id%" /></xtml></Component><Component id="ProgressIndicatorInfoPopupStyle" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;" Mode="popup"><Css><![CDATA[#this { padding:15px 50px;-moz-border-radius: 3px; border-radius: 3px; -webkit-border-radius: 3px; -webkit-box-shadow: 0 0 3px 5px rgba(50,50,50,0.5);background:#FEEFB3; border:none;margin-right:20px;​ overflow-y: auto; overflow-x: hidden; font-size: 12px;position:fixed; top:-2px; left:40%;min-width:200px;}.ie #this { border: 1px solid black; }]]></Css><Javascript><![CDATA[function(elem) { }]]></Javascript></xtml></Component><Component id="IsInArtwaresoft" type="data.Boolean" execution="native" /><Component id="mobile_simulator" type="group.Style" hidden="true"><xtml t="group.CustomStyle" ><Css><![CDATA[        #this { position:relative; }         #this >.field { position:absolute; top:88px;left:30px; width:300px;           height: 429px; overflow:auto; }        #this >.field::-webkit-scrollbar { height: 0px; width: 0px; background-color: #FFF;}         #this >.field:hover::-webkit-scrollbar { height: 1px; width:1px; }         #this >.field::-webkit-scrollbar-thumb { background: #696969; -webkit-border-radius: 5px; }         #this >.field::-webkit-scrollbar-track { background-color: inherit; }        ]]></Css><Javascript><![CDATA[            function(group) {              aa_addOnAttach(group,function() {                 group.addFields(\'.field\',function(field)                 {                      field.setControl(\'.field\');                 });              });           }          ]]></Javascript><Html><![CDATA[            <div><img src="%$_Images%/studio/big_phone.png" style="width:368px" /><div class="field studio_simulator" /></div>          ]]></Html></xtml></Component><Component id="mobile_no_scroll_simulator" type="group.Style" hidden="true"><xtml t="group.CustomStyle" Css="#this { position:relative; } #this >.field { position:absolute; top:88px;left:30px; width:300px; &#xa; height: 429px; overflow:hidden;}" ><Javascript><![CDATA[            function(group) {              aa_addOnAttach(group,function() {                 group.addFields(\'.field\',function(field)                 {                      field.setControl(\'.field\');                 });              });           }          ]]></Javascript><Html><![CDATA[            <div><img src="%$_Images%/studio/big_phone.png" style="width:368px" /><div class="field studio_simulator" /></div>          ]]></Html></xtml></Component><Component id="mobile_landscape_simulator" type="group.Style" hidden="true"><xtml t="group.CustomStyle" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Css><![CDATA[#this { position:relative; }           #this >.field { position:absolute; width: 480px;top: 42px;left: 98px;height: 334px; overflow: auto; }          #this >.field::-webkit-scrollbar { height: 5px; width: 0px; background-color: #FFF;}           #this >.field::-webkit-scrollbar-thumb { background: #696969; -webkit-border-radius: 5px; }           #this >.field::-webkit-scrollbar-track { background-color: inherit; }          ]]></Css><Html><![CDATA[            <div><img src="%$_Images%/studio/big_phone_landscape.png" style="width:716px" /><div class="field studio_simulator" /></div>          ]]></Html></xtml></Component><Component id="facebook_simulator" type="group.Style" hidden="true"><xtml t="group.CustomStyle" Css="#this { position:relative; } #this >.field { position:absolute; top:96px; left:214px; width: 520px; overflow: auto; }" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Html><![CDATA[            <div><img src="%$_Images%/studio/facebook_cover.jpg" /><div class="field studio_simulator" /></div>          ]]></Html></xtml></Component><Component id="facebook_no_header_simulator" type="group.Style" hidden="true"><xtml t="group.CustomStyle" Css="#this >.field { width: 520px; overflow: auto; border: 18px solid black; border-radius: 10px; }" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Html><![CDATA[            <div><div class="field studio_simulator" /></div>          ]]></Html></xtml></Component><Component id="ToggleDesignTimeClass" type="action.Action" execution="native"><Param name="DesignTime" type="data.Boolean" Default="true"/></Component></xtml><xtml ns="jbart_wizards_dt"><Component id="Wizards" type="data.Data"><Param name="WidgetExists" type="data.Boolean"/><xtml t="data.Pipeline"><Item t="data.IfThenElse"><If t="yesno.Not" Of="%$WidgetExists%"/><Then t="xml.Xml" DynamicContent="true"><wizards><wizard image="%$_Images%/studio/searchbox_wizard.png" name="New Searchbox Widget" page="add search box" action="jbart_wizards_dt.NewSearchBox" sample="SearchWizard"/><wizard image="%$_Images%/studio/gallery.jpg" name="New Gallery Widget" page="add gallery" action="jbart_wizards_dt.NewGallery" sample="GalleryWizard"/><wizard image="%$_Images%/studio/mobile_phone.png" name="New Mobile Widget" allaction="jbart_wizards_dt.NewMobileListNoWizard" sample="MobileListWizard"/><wizard image="%$_Images%/studio/blank_widget.png" name="New Blank Widget" allaction="jbart_wizards_dt.NewBlank"/></wizards></Then><Else t="xml.Xml" DynamicContent="true"><wizards><wizard image="%$_Images%/studio/searchbox_wizard.png" name="New Searchbox" page="add search box" action="jbart_wizards_dt.NewSearchBox" sample="SearchWizard"/><wizard image="%$_Images%/studio/gallery.jpg" name="New Gallery" page="add gallery" action="jbart_wizards_dt.NewGallery" sample="GalleryWizard"/><wizard image="%$_Images%/studio/mobile_phone.png" name="New Mobile Widget" allaction="jbart_wizards_dt.NewMobileListNoWizard" sample="MobileListWizard"/></wizards></Else></Item><Item value="%*%"/></xtml></Component><Component id="WizardsControl" type="ui.Control"><xtml t="ui.ItemList"><Items t="data_items.Items"><Items t="jbart_wizards_dt.Wizards"/></Items><Presentation t="uiaspect.List" EachItemInLine="" ItemClickable="true" ItemSize="150,150" ItemCss="overflow:hidden; padding:10px;"><ClickAction t="operation.RunXtmlAction"><Action t="jbart_wizards_dt.RunWizard"/></ClickAction></Presentation><Fields t="field.Fields"><Field t="field.XmlField" Path="@image" ID="image" Title="Image"><Type t="field_aspect.Image" KeepImageProportions="true" Height="100" Width="100"/><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="padding-left:8px"/></Field><Field t="field.XmlField" Path="@name" ID="name" Title="Name"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="font-weight:bold;padding-top:10px"/></Field></Fields><Aspect t="uiaspect.ReadOnly"/><Aspect t="uiaspect.HoverCss" Css="opacity:0.8;"/></xtml></Component><Component id="PopularFeeds" type="data.Data"><xtml t="data.Pipeline"><Item t="xml.Xml"><feeds><feed image="http://png-2.findicons.com/files/icons/51/capital_suite/128/sites.png" title="My Site" action="jbart_wizards_dt.MyOwnSiteFeed" /><feed image="http://png-4.findicons.com/files/icons/816/icons_web_2_0/128/ebay.png" title="eBay" feedTemplate="http://shop.ebay.com/i.html?_nkw=%$Search%&amp;_sacat=0&amp;_odkw=%$Search%&amp;_osacat=0&amp;_trksid=p3286.c0.m270.l1313&amp;_rss=1" action="jbart_wizards_dt.eBayFeed" /><feed image="http://images.nationalgeographic.com/wpf/media-live/photos/000/334/custom/ngm-cover-apr-2011_33435_69x100.jpg" title="Nat Geo" description="National Geographics Photo Of The Day" feed="http://feeds.nationalgeographic.com/ng/photography/photo-of-the-day" /><feed image="http://eatoneducationalinsights.edublogs.org/files/2010/07/GoogleyEyes.png" title="Google Fusion Tables" description="Google Fusion Tables" feed="https://www.google.com/fusiontables/api/query?sql=SELECT+*+FROM+105221" /><feed image="http://eatoneducationalinsights.edublogs.org/files/2010/07/GoogleyEyes.png" title="Google SpreadSheet" description="Google SpreadSheet" feed="https://spreadsheets.google.com/pub?key=0AlF3XS2c9yptdEFyYWNNcWtEZ3R6Y1RSdmI2QkoxNVE&amp;output=csv" /></feeds></Item><Item value="%*%" /></xtml></Component><Component id="WizardsInWidget" type="ui.Control"><xtml t="ui.ItemList"><Condition t="yesno.NotEmpty" Value="%$_BartContext/AppXtml/Resources/Resource[@ResourceID=\'Data\']%" /><Items t="data_items.Items"><Items t="jbart_wizards_dt.Wizards" WidgetExists="true" /></Items><Presentation t="uiaspect.List" ItemClickable="true" ItemCss="height:150px; width:150px; &#10;overflow:hidden; padding:10px;"><ClickAction t="jbart_wizards_dt.RunWizard" WidgetExists="true"/></Presentation><FieldAspect t="field_aspect.Section" HideTitle="true" Underline="true"/><Aspect t="uiaspect.ReadOnly"/><Fields t="field.Fields"><Field t="field.XmlField" Path="@image" ID="image" Title="Image"><Type t="field_aspect.Image" KeepImageProportions="true" Height="100" Width="100"/><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="padding-left:8px"/></Field><Field t="field.XmlField" Path="@name" ID="name" Title="Name"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" OnElement="cell" Inline="font-weight:bold;padding-top:10px"/></Field></Fields><Aspect t="uiaspect.HoverCss" Css="border:1px solid white"/></xtml></Component><Component id="NewMobileListNoWizard" type="action.Action"><xtml t="bart_dt.PreLoadGalleryItem" GalleryItem="%@sample%"><Var name="Wizard" /><Var name="IsNewWidget" value="true" /><AfterLoad t="jbart_wizards_dt.FinishWizard" ShowEmbed="false"><NewWidget t="xml.WithChanges" Xml="%$_GalleryItem%" ><Change t="xml.SetAttribute" AttributeName="id"><Value t="jbart_wizards_dt.WidgetNameToId" Name="mobile" /></Change><Change t="xml.SetAttribute" AttributeName="name" Value="untitled" /><Change t="xml.SetAttribute" AttributeName="type" Value="private" /><Change t="xml.SetAttribute" AttributeName="modifiedDate" Value="" RemoveEmptyAttribute="true"/><Change t="xml.SetAttribute" AttributeName="dateCreated" Value="" RemoveEmptyAttribute="true"/><Change t="xml.SetAttribute" AttributeName="createdBy" Value="" RemoveEmptyAttribute="true"/><Change t="xml.SetAttribute" AttributeName="vid" Value="" RemoveEmptyAttribute="true"/><Change t="xml.SetAttribute" AttributeName="image" Value="" RemoveEmptyAttribute="true"/><Change t="xml.Delete" Element="%bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource[@ResourceID=\'Data\']/Xml/*%" /></NewWidget></AfterLoad></xtml></Component><Component id="RunWizard" type="action.Action"><Param name="WidgetExists" type="data.Boolean" /><xtml t="action.IfThenElse"><Var name="WizardDef" /><If t="yesno.NotEmpty" Value="%@allaction%" /><Then t="xtml.RunXtmlByComponentId" ComponentID="%@allaction%" /><Else t="bart_dt.PreLoadGalleryItem" GalleryItem="%@sample%"><Var name="Wizard" /><Var name="WidgetExists" value="%$WidgetExists%"/><Var name="IsNewWidget" t="yesno.Not" Of="%$WidgetExists%" /><AfterLoad t="dlg.OpenDialog" Title="%@name%"><DialogData t="xml.Xml" /><Contents t="ui.ControlWithAction"><RunBeforeControl t="action.RunActions" Condition="%$WidgetExists%"><Action t="action.WriteValue" To="%!@feed%" Value="%$GalleryNode/@feed%" /><Action t="action.WriteValue" To="%!@xml%"><Value t="data.Pipeline"><Item value="%$_BartContext/AppXtml/Resources/Resource[@ResourceID=\'Data\']/@ContentType%" /><Item value="%$_ServerAdapter/DB/{}%" /><Item t="xml.XmlToText" PrettyPrint="true" /></Value></Action><Action t="jbart_wizards_dt.GuessPaths" /></RunBeforeControl><Control t="ui.Document"><Fields t="field.Fields"><Field t="jbart_wizards_dt.NameAndIdFields" Title="Name and ID" Condition="%$IsNewWidget%" /><Field t="jbart_wizards_dt.FeedAndXmlFields" Condition="%$IsNewWidget%"/><Field t="field.XmlField" Path="@xml" ID="xml" Title="Data" Condition="%$WidgetExists%"><Type t="field_aspect.MultiLineText" Rows="10"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="word-space:nowrap; font-size:11px;width:550px;"/></Field><Field t="field.CustomControl" ID="wizard_specific"><Control t="bart_dt.ShowPageFromGallery" GalleryItem="%$Wizard/@sample%" Page="%$Wizard/@page%" /></Field><Field t="jbart_wizards_dt.EmbedField" Title="embed" ResourceId="Data" Condition="%$IsNewWidget%"/></Fields></Control></Contents><RunOnOK t="xtml.RunXtmlByComponentId" ComponentID="%$Wizard/@action%"   /></AfterLoad></Else></xtml></Component><Component id="MyOwnSiteFeed" type="action.Action"><xtml t="dlg.OpenDialog" Title="Feed from my site"><DialogData t="xml.Xml"><xml site="" /></DialogData><Contents t="ui.Document"><Fields t="field.XmlField" Path="@site" Title="Feed url of your site" /></Contents><RunOnOK t="uiaction.SetText" RunOn=".fld_feed" Text="%@site%" /></xtml></Component><Component id="eBayFeed" type="action.Action"><xtml t="dlg.OpenDialog" Title="Feed from eBay"><Var name="FeedXml" /><DialogData t="xml.Xml"><xml search="cellular" /></DialogData><Contents t="ui.Document"><Fields t="field.XmlField" Path="@search" Title="Keyword to search" /></Contents><RunOnOK t="uiaction.SetText" RunOn=".fld_feed"><Var name="Search" value="%@search%" /><Text t="data.EvaluateTemplate" Template="%$FeedXml/@feedTemplate%" /></RunOnOK></xtml></Component><Component id="eBayClean" type="data.Data" execution="native"><Param name="Xml" /></Component><Component id="GuessPathsFromXml" type="action.Action" execution="native"><Param name="Item" /><Param name="WizardData" /></Component><Component id="GuessPaths" type="action.Action"><xtml t="action.Switch" ><Case Name="eBay"><IfCondition t="text.StartsWith" Data="%@feed%" With="http://shop.ebay.com/" /><Then t="action.RunActions"><Action t="action.WriteValue" To="%!@title%" Value="\\%title\\%" /><Action t="action.WriteValue" To="%!@image%" Value="\\%Image\\%" /><Action t="action.WriteValue" To="%!@link%" Value="\\%link\\%" /><Action t="action.WriteValue" To="%!@extra_text%" Value="\\%Price\\%" /></Then></Case><Case Name="Nat Geo"><IfCondition t="text.StartsWith" Data="%@feed%" With="http://feeds.nationalgeographic.com" /><Then t="action.RunActions"><Action t="action.WriteValue" To="%!@title%" Value="\\%title\\%" /><Action t="action.WriteValue" To="%!@image%" Value="\\%content/@url\\%" /><Action t="action.WriteValue" To="%!@link%" Value="\\%link\\%" /><Action t="action.WriteValue" To="%!@extra_text%" Value="\\%credit\\%" Value1="\\%description\\%" /></Then></Case><Default t="jbart_wizards_dt.GuessPathsFromXml" WizardData="%%"><Item t="data.Pipeline"><Item value="%@xml%" /><Item t="xml.TextToXml" /><Item value="%*%" /></Item></Default></xtml></Component><Component id="NameAndIdFields" type="field.Fields"><xtml t="field.XmlField" Path="@name" Title="Widget Name" ID="widget_name"><Type t="field_aspect.Text" Mandatory="true" Multiple="false"/><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="embed_btn,embed_txt" RefreshOn="every click" RefreshScope="screen"/></xtml></Component><Component id="EmbedField" type="field.Fields"><Param name="ResourceId" script="true"/><xtml t="field.Fields"><Field t="field.XmlGroup" ID="embed_btn" ><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.HideByCondition"><ShowCondition t="yesno.And"><Item t="yesno.NotEmpty" Value="%@name%" /><Item t="yesno.NotEmpty" Value="%@feed%" /></ShowCondition></FieldAspect><Field t="field.Button1" Title="Embed"><Var name="Domain" t="data.Pipeline"><Item value="%@feed%" /><Item t="text.Split" Separator="http://" Part="Second" /><Item t="text.RemovePrefix" Prefix="www." /><Item t="text.RemovePrefix" Prefix="feeds." /><Item t="text.Split" Separator="/" Part="First" /></Var><Condition t="yesno.NotEmpty" Value="%$Domain%" /><ButtonText value="Embed in %$Domain%"></ButtonText><Action t="action.RunActions"><Action t="action.WriteValue" To="%!@showembed%" Value="true" /><Action t="field.RefreshField" FieldID="embed_txt" Scope="screen" /></Action></Field><Field1 t="field.Text1" ID="embed_txt" Text="For other domains see a href=\'...\' jBart Data Integration" /></Field><Field t="field.XmlField" ID="embed_txt"><Type t="field_aspect.MultiLineText" NoWrap="true" Rows="3"/><FieldAspect t="field_aspect.HideByCondition"><ShowCondition t="yesno.And"><Item value="%@showembed%"/><Item t="yesno.NotEmpty" Value="%@name%" /><Item t="yesno.NotEmpty" Value="%@feed%" /></ShowCondition></FieldAspect><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.Description" Description="Paste this html in you own page"/><FieldAspect t="field_aspect.FieldData"><FieldData t="bart_dt.HtmlToEmbed"><Var name="WizardData" /><ResourceId t="xtml.UseParam" Param="ResourceId" Input="%$WizardData%" /><WidgetId t="jbart_wizards_dt.WidgetNameToId" Name="%$WizardData/@name%" /><Data t="xml.Xml" DynamicContent="true"><embed hosting="cloud" Widget_data="%$WizardData/@feed%" /></Data></FieldData></FieldAspect><FieldAspect t="field_aspect.Css" OnElement="content" Inline="min-width: 690px;height:160px;"/></Field></xtml></Component><Component id="FeedAndXmlFields" type="field.Fields"><Param name="DoAfterEnteringXml" type="action.Action" script="true"/><xtml t="field.Fields"><Field t="field.XmlField" Path="@feed" ID="feed" Title="Source DB"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="url for xml data (e.g rss)"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="width:592px"/><FieldAspect t="field_aspect.Resizer" Disable="true"/><FieldAspect t="field_aspect.Toolbar"><Operations t="operation.Operations"><Operation t="operation.Operation" Icon="%$_Images%/natgeo.gif" Title="Data From National Geographics"><Action t="uiaction.SetText" Text="http://feeds.nationalgeographic.com/ng/photography/photo-of-the-day" RunOn=".fld_feed"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/ebay.gif" Title="Data Drom eBay"><Action t="uiaction.SetText" Text="" RunOn=".fld_feed"/></Operation></Operations></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="operation.RunXtmlAction"><Action t="action.RunActions" customxtml="true"><Condition t="yesno.NotEmpty" Value="%%"/><Action t="action.WriteValue" To="%../@xml%" Value="loading..."/><Action t="field.RefreshField" FieldID="xml" Scope="screen"/><Action t="action_async.RunAsync"><Var name="WizardData" value="%..%"/><Action t="action_async.ActionOnAsyncData"><Query t="data_async.UrlGet" Url="%%" ResultType="text" TunnelRequest="true"/><Action t="action.RunActions"><Action t="action.WriteValue" To="%$WizardData/@xml%"><Value t="data.Pipeline"><Item t="data.CleanNS"/><Item t="data.IfThenElse" Else="%%"><If t="text.StartsWith" Data="%$WizardData/@feed%" With="http://shop.ebay.com/"/><Then t="jbart_wizards_dt.eBayClean" Xml="%%"/></Item><Item t="xml.XmlToText" PrettyPrint="true"/></Value></Action><Action t="xtml.UseParam" Param="DoAfterEnteringXml" Input="%$WizardData%"/><Action t="jbart_wizards_dt.GuessPaths" Data="%$WizardData%"/><Action t="field.RefreshField" FieldID="xml" Scope="screen"/><Action t="field.RefreshField" FieldID="embed_btn" Scope="screen"/><Action t="field.RefreshField" FieldID="embed_txt" Scope="screen"/><Action t="field.RefreshField" FieldID="wizard_specific" Scope="screen"/></Action></Action></Action></Action></Action></FieldAspect></Field><Field t="field.CustomControl" ID="feeds"><Control t="ui.ItemList"><Items t="data_items.Items"><Items t="jbart_wizards_dt.PopularFeeds"/></Items><Presentation t="uiaspect.Tiles" ImageSize="50,50" TileExtraSize="35,40" ImageOrVideo="%@image%" Title="%@title%"><Action t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%@action%"/><Then t="uiaction.SetText" RunOn=".fld_feed" Text="%@feed%"/><Else t="xtml.RunXtmlByComponentId" ComponentID="%@action%"/></Action></Presentation></Control><FieldAspect t="field_aspect.Css" OnElement="content" Inline="padding-left:80px"/></Field><Field t="field.XmlField" Path="@xml" ID="xml" Title="Xml/JSON/CSV"><Type t="field_aspect.MultiLineText" Rows="10"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="word-space:nowrap; font-size:11px;width:592px;"/><FieldAspect t="field_aspect.Description" Description="Sample xml of potential results"/><FieldAspect t="field_aspect.DefaultValue" Value="&lt;items&gt;&#xa;  &lt;item image=&quot;...&quot; title=&quot;Spain&quot; more=&quot;spain, europe&quot; /&gt;&#xa;  &lt;item image=&quot;...&quot; title=&quot;Brazil&quot; more=&quot;brazil, america&quot; /&gt;&#xa;&lt;/items&gt;"/></Field><Field t="field_dt.CleanNSButton" XmlFieldPath="@xml" XmlFieldID="xml" Title="clean namespace"/></xtml></Component><Component id="WidgetNameToId" type="data.Data"><Param name="Name" /><xtml t="text.ToId" Text="%$LoggedInUser/@id%__%$Name%"><UsedIDs t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%$_JBartStudio%" /><Else value="%$_JBartStudio/UsedIDs%" /></UsedIDs></xtml></Component><Component id="BuildNewWidget" type="data.Data"><Param name="Name" /><Param name="ResourceName"><Default value="Data" /></Param><Param name="ResourceXml" /><Param name="MainPage"><Default value="main" /></Param><Param name="Page" type="data.Data[]" /><Param name="Feed" /><Param name="View" /><Param name="ApplicationFeatures" /><xtml t="xml.WithChanges"><Var name="ID" t="jbart_wizards_dt.WidgetNameToId" Name="%$Name%" /><Var name="ContentType" t="data.Pipeline"><Item value="%$ResourceXml%" /><Item value="%*%" /><Item t="xml.Tag" /></Var><Xml t="xml.Xml" DynamicContent="true"><bart_sample _type="bart_sample" id="%$ID%" name="%$Name%" feed="%$Feed%" user="%$LoggedInUser/@id%" type="private" view="%$View%"><bart_dev><db><bart_unit><bart_unit id="sample1" _type="bart_unit"><Component id="App" type="bart.Application"><xtml t="bart.Application" MainPage="%$MainPage%"><Resources t="bart_resource.Resources"><Resource t="bart_resource.Xml" ResourceID="Data" Mode="plural"><Xml t="xml.Xml"></Xml></Resource></Resources></xtml></Component></bart_unit></bart_unit></db></bart_dev></bart_sample></Xml><Change t="xml.AddChildren" Data="%bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource/Xml%" Children="%$ResourceXml%" CloneChildren="true" /><Change t="xml.AddChildren" Data="%bart_dev/db/bart_unit/bart_unit/Component/xtml%" Children="%$ApplicationFeatures%" CloneChildren="true" /><Change t="xml.AddChildren" Data="%bart_dev/db/bart_unit/bart_unit%"><Children t="data.Pipeline"><Item value="%$Page%" /><Item t="xml.WithChanges"><Xml t="xml.Xml" DynamicContent="true"><Component id="%@ID%" type="jbart.MyWidgetPage"><xtml /></Component></Xml><Change t="xml.ReplaceElement" Element="%xtml%" NewElement="%%" /><Change t="xml.SetAttribute" Data="%xtml%" AttributeName="ContentType" Value="%$ContentType%" /></Item></Children></Change><Change1 t="xml.AddChildren" Data="%!bart_dev/db/{$ContentType}%" Children="%$ResourceXml/*%" CloneChildren="true" /></xtml></Component><Component id="FinishWizard" type="action.Action"><Param name="NewWidget" /><Param name="ShowEmbed" type="data.Boolean"><Default value="true" /></Param><xtml t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%$_JBartStudio%" /><Else t="object.RunMethod" Object="%$_JBartStudio%" Method="SaveAndAddNewProject"><Var name="NewWidgetXml" value="%$NewWidget%" /></Else></xtml></Component><!-- Specific wizards --><Component id="NewBlank" type="action.Action"><xtml t="dlg.OpenDialog" Title="New blank widget"><DialogData t="xml.Xml" /><Contents t="ui.Document"><Fields t="jbart_wizards_dt.NameAndIdFields" /></Contents><RunOnOK t="action.RunActions"><Var name="DialogData" /><Action t="jbart_wizards_dt.FinishWizard" ShowEmbed="false" ><Var name="IsNewWidget" value="true" /><Var name="ID" t="jbart_wizards_dt.WidgetNameToId" Name="%@name%" /><NewWidget t="xml.Xml" DynamicContent="true"><bart_sample _type="bart_sample" id="%$ID%" name="%@name%" user="%$LoggedInUser/@id%" type="private"><bart_dev><db><bart_unit><bart_unit id="sample" _type="bart_unit" ns="sample"><Component id="App" type="bart.Application"><xtml t="bart.Application" MainPage="main"><Resources t="bart_resource.Resources"/><ContentTypes t="bart.ContentTypes" /></xtml></Component><Component id="main" type="jbart.MyWidgetPage"><xtml t="bart.SinglePage" ID="main" /></Component></bart_unit></bart_unit></db></bart_dev></bart_sample></NewWidget></Action></RunOnOK></xtml></Component><Component id="NewGallery" type="action.Action"><xtml t="action.RunActions"   ><Var name="DialogData" /><Action t="jbart_wizards_dt.FinishWizard"><NewWidget t="jbart_wizards_dt.BuildNewWidget" Name="%$DialogData/@name%" ResourceName="Data" Feed="%$DialogData/@feed%" MainPage="gallery"><ResourceXml t="xml.TextToXml" Data="%$DialogData/@xml%" /><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="GalleryWizard" Page="gallery" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field[@ID=\'Title\']%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Image\']%" Value="%$DialogData/@image%" /><Change1 t="xml.SetAttribute" AttributeName="ItemName" Data="%Presentation%" Value="%$DialogData/@title%" /><Change1 t="xml.SetAttribute" AttributeName="Url" Data="%Presentation/ItemImage%" Value="%$DialogData/@image%" /><Change1 t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field/Field[@ID=\'Text\']%" Value="%$DialogData/@extra_text%" /><Change1 t="xml.Delete" Element="%Field[@ID=\'Text\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@extra_text%" /></Change1></Page><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="GalleryWizard" Page="item" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Title\']%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Image\']%" Value="%$DialogData/@image%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field[@ID=\'Text\']%" Value="%$DialogData/@extra_text%" /><Change t="xml.SetAttribute" AttributeName="Link" Data="%Field[@ID=\'Link\']/Action%" Value="%$DialogData/@link%" /><Change t="xml.SetAttribute" AttributeName="ButtonText" Data="%Field[@ID=\'Link\']%" Value="%$DialogData/@title%" /><Change t="xml.Delete" Element="%Field[@ID=\'Link\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@link%" /></Change><Change t="xml.Delete" Element="%Field[@ID=\'Text\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@extra_text%" /></Change></Page></NewWidget></Action></xtml></Component><Component id="NewMobileList" type="action.Action"><xtml t="action.RunActions" ><Var name="DialogData" /><Action t="jbart_wizards_dt.FinishWizard"><NewWidget t="jbart_wizards_dt.BuildNewWidget" Name="%$DialogData/@name%" ResourceName="Data" Feed="%$DialogData/@feed%" MainPage="list" View="mobile"><ResourceXml t="xml.TextToXml" Data="%$DialogData/@xml%" /><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="MobileListWizard" Page="list" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field[@ID=\'Title\']%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Image\']%" Value="%$DialogData/@image%" /><Change1 t="xml.SetAttribute" AttributeName="ItemName" Data="%Presentation%" Value="%$DialogData/@title%" /><Change1 t="xml.SetAttribute" AttributeName="Url" Data="%Presentation/ItemImage%" Value="%$DialogData/@image%" /><Change1 t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field/Field[@ID=\'Text\']%" Value="%$DialogData/@extra_text%" /><Change1 t="xml.Delete" Element="%Field[@ID=\'Text\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@extra_text%" /></Change1></Page><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="MobileListWizard" Page="item" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Title\']%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Image\']%" Value="%$DialogData/@image%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field[@ID=\'Text\']%" Value="%$DialogData/@extra_text%" /><Change t="xml.SetAttribute" AttributeName="Link" Data="%Field[@ID=\'Link\']/Action%" Value="%$DialogData/@link%" /><Change t="xml.SetAttribute" AttributeName="ButtonText" Data="%Field[@ID=\'Link\']%" Value="%$DialogData/@title%" /><Change t="xml.Delete" Element="%Field[@ID=\'Link\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@link%" /></Change><Change t="xml.Delete" Element="%Field[@ID=\'Text\']%"><Condition t="yesno.IsEmpty" Value="%$DialogData/@extra_text%" /></Change></Page><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="MobileListWizard" Page="search_list" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Title\']%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="FieldData" Data="%Field/Field[@ID=\'Image\']%" Value="%$DialogData/@image%" /></Page><ApplicationFeatures t="data.List"><Item t="xml.Xml"><ApplicationFeature t="mobile.MobileDefaultFeatures" /></Item><Item t="xml.WithChanges"><Xml t="xml.Xml"><ApplicationFeature t="bart.HtmlPageTitle" /></Xml><Change t="xml.SetAttribute" AttributeName="Title" Value="%$DialogData/@App_Title%" /></Item></ApplicationFeatures></NewWidget></Action></xtml></Component><Component id="NewSearchBox" type="action.Action"><xtml t="action.RunActions"><Var name="DialogData" /><Action t="jbart_wizards_dt.FinishWizard"><NewWidget t="jbart_wizards_dt.BuildNewWidget" Name="%$DialogData/@name%" ResourceName="Data" Feed="%$DialogData/@feed%" MainPage="searchbox"><ResourceXml t="xml.TextToXml" Data="%$DialogData/@xml%" /><Page t="xml.WithChanges"><Xml t="bart_dt.SamplePageXtmlFromGallery" GalleryItem="SearchWizard" Page="searchbox" /><Change t="xml.SetAttribute" AttributeName="ItemTitle" Data="%Field%" Value="%$DialogData/@title%" /><Change t="xml.SetAttribute" AttributeName="ItemImage" Data="%Field%" Value="%$DialogData/@image%" /><Change t="xml.SetAttribute" AttributeName="ItemExtraText" Data="%Field%" Value="%$DialogData/@extra_text%" /><Change t="xml.SetAttribute" AttributeName="ItemLink" Data="%Field%" Value="%$DialogData/@link%" /><Change t="xml.SetAttribute" AttributeName="SearchIn" Data="%Field%" Value="title and extra text"><Condition t="yesno.Not" Of="%$DialogData/@search_only_in_title%" /></Change></Page></NewWidget></Action></xtml></Component><Component id="WizardPathCompletion" type="field.field_aspect"><xtml t="aaeditor.EditPrimitiveTextBoxAspect"><Context t="object.Object"  ><Property name="Input" t="data.Pipeline" ><Item t="xml.TextToXml" Data="%../@xml%" /><Item value="%*%" /></Property></Context></xtml></Component><Component id="HandleDataSourceChange" type="action.Action" execution="native"><Param name="DataSourceUrl" Default="%%" /></Component><Component id="DataSources" type="data.Data"><xtml t="xml.Xml"><sources><source Title="Custom" Image="http://png-2.findicons.com/files/icons/51/capital_suite/128/sites.png"></source><source Title="eBay API" Image="http://png-4.findicons.com/files/icons/816/icons_web_2_0/128/ebay.png"></source><source Title="Google Docs" Image="https://5974211319426565655-a-1802744773732722657-s-sites.googlegroups.com/site/jbartwidgets/images/googledocs.gif"></source><source Title="Data Feed (Atom) National Geographic" Image="http://images.nationalgeographic.com/wpf/media-live/photos/000/334/custom/ngm-cover-apr-2011_33435_69x100.jpg"></source></sources></xtml></Component></xtml><xtml ns="jbart_studio"><Component id="NewProject" type="field.Fields"><xtml t="field.Group" Title=""><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Text" ID="Text" Title="Title" Text="Create a New Widget"><Style t="group.FacebookTitle"/></Field><Field t="field.CustomControl" Title="add widgets" ID="AddWidgets" ID__Manual="" Path="" HideTitle="true" ShowTitle=""><Control t="jbart_wizards_dt.WizardsControl"/></Field><Field t="field.XmlMultipleGroup" ID="Prototypes" Title="Prototypes" TitleForSingle="Prototype" HideTitle=""><Items t="field.CustomItems"><Items t="data.Pipeline"><Item t="data.JavaScript" Code="function(data,html_elem,context) {&#xa; return jBart.projectPrototypeHeaders;&#xa;}"/><Item value="%jbart_project%"/></Items></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.Tiles" Height="" Width="200px"/></Presentation><Aspect t="uiaspect.ReadOnly"/><Aspect t="uiaspect.ItemDetails" Transactional="false"><OpenIn t="uiaspect.DetailsInplace"/><OpenNewIn t="uiaspect.DetailsInplace"/></Aspect><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.FontAndText" Inline="text-align:left;font-weight:bold;font-size: 16px;"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="padding: 0 0 11px 0;"/></Field><Field t="field.Field" FieldData="%!@image%" ID="image" Title="Image" ReadOnlyText=""><Type t="field_aspect.Image" Width="200px" Height="200px" HideEmptyImage="true" KeepImageProportions="true" EditDirectly=""><OnClick t="object.RunMethod" Object="%$_JBartStudio%" Method="ClonePrototype" Input="%..%"/></Type><FieldAspect t="field_aspect.FontAndText" Inline="text-align:left;"/><FieldAspect t="field_aspect.GlobalCss" GlobalCss="#this {&#xa;opacity: 0.8; &#xa;}&#xa;#this:hover {&#xa;opacity: 1; &#xa;}"/></Field><Field t="field.Button" ID="CreatePrototype" Title="Create"><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="ClonePrototype" Input="%%"/><Style t="button.Bootstrap"><Type t="bootstrap_btn.Primary"/><Size t="bootstrap_btn.Large"/></Style><FieldAspect t="field_aspect.FontAndText" Inline="text-align:right;" OnElement="cell"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="margin: 15px 0 0 0;" OnElement="cell"/></Field><FieldAspect t="field_aspect.HideTitle"/></Field><Layout t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/></xtml></Component><Component id="Samples" type="field.Fields"><xtml1 t="jbart_studio.NewProject"/><xtml t="field.Layout"><FieldAspect t="field_aspect.HideTitle"/><Layout t="layout.Default"/><Field t="field.Layout" ID="Horizontal" Title="Horizontal"><Layout t="layout.HorizontalHtmlTable" Spacing="22px"/><Field t="field.Group" Title="Sample Widgets" ID="Section"><Layout t="uiaspect.Group"><Style t="group.Vertical" CssOnElement=""/></Layout><FieldAspect t="field_aspect.Section" CollapsedByDefault=""><Style t="section.JBartClean"/></FieldAspect><Operations t="operation.Operations"/><Field t="field.XmlMultipleGroup" ID="projects" Title="projects" TitleForSingle="project" HideTitle="true"><Items t="field.CustomItems"><Items t="jbart_studio.PromotedProjects"/></Items><Presentation t="uiaspect.ItemList"><Style t="itemlist.Tiles" Width="200px"/></Presentation><Aspect t="uiaspect.ReadOnly"/><FieldAspect t="field_aspect.Section" HideTitle="true"/><Operations t="operation.Operations"/><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this { font-weight:bold; padding: 0 0 5px 0; }]]></GlobalCss></FieldAspect></Field><Field t="field.Image" HideTitle="true" ID="Image" Title="Image"><Image t="image.Image" Url="%@image%" KeepImageProportions="true" AsDivBackground="" Size="100,100"/><Style t="image.PlainImage"/></Field><Aspect t="uiaspect.Css" OnElement="items" Inline="cursor: pointer;"/><Aspect t="uiaspect.ScrollItems"><Style t="itemlist_scroll.BrowserScroll"/><Height t="scroll_size.DeviceHeight" StretchFromCurrentLocation="true" ReducePixels="13px" ApplyOn="height"/></Aspect><Aspect t="uiaspect.BindSelectedItem" ItemIdentifier="%@id%"><SelectedIdentifier t="jbart_studio.SelectedSampleProject" customxtml="true"/></Aspect><Aspect t="uiaspect.ItemSelection" KeyboardSupport="true" IncludeSubContainers="false" PropagateSelection="" AutoSelectFirstItem="true" MouseSupport="mouse down"><OnSelect t="action.RunActions"><Action t="uiaction.SetUrlFragment" Attribute="sample_project" Value="%@id%"/><Action t="field.RefreshField" Scope="screen" FieldID="SampleWidgets_Preview"/></OnSelect></Aspect></Field><FieldAspect t="field_aspect.Css" Inline="overflow-x: hidden;&#xa;width: 485px;"/></Field><Field t="field.Control" ID="Control" Title="Separator"><Control t="field_control.CustomControl"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[{ color:black;   width: 2px;   height: 500px; margin: 0 10px 0 -2px;   background-image: -webkit-linear-gradient(14deg, #FFFFF0 7\\% , #75ADD3 100\\% ); }]]></Css><Javascript><![CDATA[function(html_elem,context) { } ]]></Javascript><![CDATA[]]></Control></Field><Field t="field.Group" Title="Preview" ID="SampleWidgets_Preview"><Layout t="uiaspect.Group"><Style t="group.Vertical"/></Layout><FieldAspect t="field_aspect.Section" CollapsedByDefault=""><Style t="section.JBartClean"/></FieldAspect><Operations t="operation.Operations"/><Field t="field.Button" ID="Button" Title="Open in Studio"><Style t="button.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {border: 1px solid;background-color: #650d0d;background-image: -webkit-gradient(linear, 0 0, 0 100\\%, from(#5b0a0a), to(#bd1717));background-image: -moz-linear-gradient(top, #5b0a0a, #bd1717);background-image: -ms-linear-gradient(top, #5b0a0a, #bd1717);background-image: -webkit-linear-gradient(top, #5b0a0a, #bd1717);background-image: -o-linear-gradient(top, #5b0a0a, #bd1717);background-image: linear-gradient(top, #5b0a0a, #bd1717);background-repeat: repeat-x;border-color: #030303;filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);color: white;padding: 5px 14px;font-size: 15px;line-height: normal;border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;text-align:center;cursor: pointer;-webkit-appearance: button;}#this:hover { background-image: -webkit-gradient(linear, 0 0, 0 100\\%, from(#bd1717), to(#5b0a0a));}#this:active { background-color: #890e12; background-image: none;}]]></Css><Javascript><![CDATA[function(button) {  button.setInnerHTML(\'\',button.text);    button.setOnClick(\'\',button.Action);}]]></Javascript><![CDATA[]]></Style><Action t="object.RunMethod" Method="OpenProjectInNewTab" Object="%$_JBartStudio%"><Input t="jbart_studio.SelectedSampleProject" customxtml="true"/></Action><FieldAspect t="field_aspect.GlobalCss"><GlobalCss><![CDATA[#this { float:right; margin: -35px 0 4px 0; }]]></GlobalCss></FieldAspect></Field><Field t="field.Layout" ID="Group" Title="Group For Scroll"><FieldAspect t="scroll.Scroll"><Scroll t="scroll.BrowserScrollbar"/><Height t="scroll.DeviceBottom" Delta="30"/><Width t="scroll.DeviceRight" Delta="30"/></FieldAspect><FieldAspect t="field_aspect.Css" Inline="position: relative;"/><Layout t="layout.Vertical" Spacing=""/><Field t="field.Control" ID="Control" Title="Control"><Control t="field_control.CustomXtmlControl"><Control t="object.RunMethod" customxtml="true" Object="%$_JBartStudio%" Method="ShowProjectPreview"><Input t="jbart_studio.SelectedSampleProject"/></Control></Control></Field></Field></Field></Field></xtml></Component><Component id="MyProjectsField" type="field.Fields"><xtml t="field.Group" Title="My Projects"><FieldAspect t="field_aspect.HideTitle"/><Field t="field.Text" ID="Text" Title="My Widgets" Text="My Widgets"><Style t="group.FacebookTitle"/><FieldAspect t="field_aspect.SizePaddingsAndMargins" Inline="padding: 0 0 7px 0;"/></Field><Field t="field.XmlMultipleGroup" ID="Studio_MyProjects" Title="Projects" TitleForSingle="Project" HideTitle=""><Operations t="operation.Operations"/><Items t="field.CustomDataItems"><DataItems t="xml.XmlItems" Tag="project"><Parent t="jbart_studio.MyWidgets" customxtml="true"><Item value=""/></Parent></DataItems></Items><FieldAspect t="field_aspect.HideTitle"/><Presentation t="uiaspect.RichTable"/><Field t="field.Image" HideTitle="true" ID="Image" Title="Image"><Image t="image.Image" Url="http://t3.gstatic.com/images?q=tbn:ANd9GcRXiOa3CIHeX6sJn0tazrYJp38kvpAE03l2wjH-G00cNyCJgvpv" KeepImageProportions="true" AsDivBackground="" Size="32,32"/><Style t="image.PlainImage"/><FieldAspect t="field_aspect.HideInProperties"/></Field><Field t="field.Field" FieldData="%!@name%" ID="name" Title="Name" ReadOnlyText=""><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Hyperlink"><Action t="operation.RunXtmlAction"><Action t="object.RunMethod" Object="%$_JBartStudio%" Method="EditProject" customxtml="true" Input="%@id%">&#xa;</Action></Action></FieldAspect><FieldAspect t="field_aspect.HideInProperties"/></Field><Aspect t="uiaspect.ItemDetails" Transactional="true"><OpenIn t="uiaspect.DetailsInplace" CloseInplaceSiblings="" ToolbarLocation="bottom" AutoOpenWhenZooming="none"><InplaceToolbar t="uiaspect.DetailsToolbar"><ButtonStyle t="ui.ButtonAsHyperlink"/></InplaceToolbar></OpenIn></Aspect><Field t="field.Button" ID="Button" Title="Actions" HideTitle="false" ButtonText="Delete Project"><Style t="button.Hyperlink"/><Image t="image.Image" Url="%$_Images%/delete1616.gif" KeepImageProportions="true" AsDivBackground=""/><FieldAspect t="field_feature.Css"><Css><![CDATA[#this{ display: none;}tr.aa_item:hover #this { display: block ;}#wrapper { width:100px; }]]></Css></FieldAspect><Action t="operation.ActionWithConfirmation" Question="Are you sure?" Title="My Widgets - Delete Project"><Action t="operation.RunJavascript" Code="function(data,html_elem,context) {&#xa; alert(\'not implemented yet\');&#xa;}"/></Action></Field><Aspect t="uiaspect.ReadOnly"/></Field><Layout t="uiaspect.PropertySheet"/><Operations t="operation.Operations"/></xtml></Component></xtml><xtml ns="bart_dt"><Component id="Credits" type="ui.Control"><xtml t="ui.Document"><Aspect t="uiaspect.Css" Inline="max-height:200px"/><Field t="bart_dt.Credit" DisplayName="jQuery" Url="http://www.jquery.com"/><Field t="bart_dt.Credit" DisplayName="TinyMCE" Url="http://www.tinymce.com"/><Field t="bart_dt.Credit" DisplayName="Code Mirror" Url="http://codemirror.net"/><Field t="bart_dt.Credit" DisplayName="Pretty Office Icon Set Part 7 (Bill Lee)" Url="http://www.customicondesign.com"/><Field t="bart_dt.Credit" DisplayName="Ravenna Icon Pack" Url="http://www.doublejdesign.co.uk/"/><Field t="bart_dt.Credit" DisplayName="YUUMINCO Icon Pack by dReamxis" Url="http://findicons.com/pack/980/yuuminco"/><Field t="bart_dt.Credit" DisplayName="AEON Icon Pack by Asher" Url="http://findicons.com/pack/986/aeon"/><Field t="bart_dt.Credit" DisplayName="Silk Icon Pack by Mark James" Url="http://findicons.com/pack/1581/silk"/><Field t="bart_dt.Credit" DisplayName="Human-O2 Icon Pack by schollidesign" Url="http://findicons.com/pack/1035/human_o2"/><Field t="bart_dt.Credit" DisplayName="FatCow Web Hosting" Url="http://http://www.fatcow.com"/><Field t="bart_dt.Credit" DisplayName="dReamxis" Url="http://dreamxis.deviantart.com"/><Field t="bart_dt.Credit" DisplayName="Momenticons" Url="http://momentumdesignlab.com"/><Field t="bart_dt.Credit" DisplayName="Patricia Clausnitzer" Url="http://pc.de/icons/"/><Field t="bart_dt.Credit" DisplayName="Momenticons" Url="http://momentumdesignlab.com"/><Field t="bart_dt.Credit" DisplayName="Ruby Software" Url="http://www.rubysoftware.nl/"/><Field t="bart_dt.Credit" DisplayName="Bdate Kaspar/Franziska Sponsel" Url="http://rrze-icon-set.berlios.de/index.html" Images="studio/tree.png" FindIcons="http://findicons.com/icon/84717/tree_diagramm_move?id=397472" /><Field t="bart_dt.Credit" DisplayName="Jrdn88" Url="http://jrdn88.deviantart.com" GalleryImages="blank_widget.png" FindIcons="http://findicons.com/icon/125650/control?id=125666" /><Field t="bart_dt.Credit" DisplayName="Asher" Url="http://kyo-tux.deviantart.com" Images="studio/home.png" FindIcons="http://findicons.com/icon/68703/home" /><Field t="bart_dt.Credit" DisplayName="FatCow Web Hosting" Url="http://www.fatcow.com" Images="studio/gallery2.png" FindIcons="http://findicons.com/icon/164073/application_view_gallery" /><Field t="bart_dt.Credit" DisplayName="GNOME icon artists" Url="http://gnome.org" Images="studio/monitor.png" FindIcons="http://findicons.com/icon/67222/gnome_utilities_system_monitor?id=373096" /><Field t="bart_dt.Credit" DisplayName="Crayola Kidd" Url="http://n/A" Images="studio/config.png,studio/config_24.png" FindIcons="http://findicons.com/icon/206452/config_settings?id=335084" /><Field t="bart_dt.Credit" DisplayName="Oxygen" Url="http://www.oxygen-icons.org/" Images="studio/blackboard.png" FindIcons="http://findicons.com/icon/238337/applications_education?id=372198" /><Field t="bart_dt.Credit" DisplayName="Yusuke Kamiyamane" Url="http://www.pinvoke.com" Images="studio/block_share.png,studio/toolbox.png" FindIcons="http://findicons.com/icon/116760/block_share?id=119484,http://findicons.com/icon/116953/toolbox" /><Field t="bart_dt.Credit" DisplayName="Burak OZTURK" Url="http://findicons.com/pack/811/developer_kit" Images="studio/duplicate.png" FindIcons="http://findicons.com/icon/73339/copy?id=335600" /></xtml></Component></xtml><xtml ns="styles_dt"><Type id="JavascriptMetadata" /><Type id="Snippet" /><Component id="JavascriptMetadata" type="styles_dt.JavascriptMetadata"><Param name="Snippet" type="styles_dt.Snippet[]" /><xtml t="object.OverrideObject"><Object t="xtml.CopyAllParams" /><AddToProperty name="Snippet" t="styles_dt.BasicApiSnippets" /></xtml></Component><Component id="Snippet" type="styles_dt.Snippet"><Param name="Name" /><Param name="Code" /><Param name="Object" /><Param name="Description" /><xtml t="xtml.CopyAllParams" /></Component><Component id="BasicApiSnippets" type="styles_dt.Snippet"><xtml t="data.List"></xtml></Component><Component id="ItemListJsMetadata" type="styles_dt.JavascriptMetadata"><xtml t="styles_dt.JavascriptMetadata"><Snippet t="styles_dt.Snippet" Name="Duplicate item elements" Object="itemlist"><Code><![CDATA[itemlist.setItems({  itemElement: \'.item\',  initItem: function(item) {           item.setFields(\'.fields\');  }});]]></Code></Snippet><Snippet t="styles_dt.Snippet" Name="Duplicate item elements with blocks" Object="itemlist"><Code><![CDATA[itemlist.setItems({  itemElement: \'.item\',  initItem: function(item) {           item.setFields(\'.fields\');  },  blockElement: \'.block\',    itemsInBlock: 12,  initBlock: function(block) {  }});]]></Code></Snippet><Snippet t="styles_dt.Snippet" Name="Add item fields" Code="item.setFields(\'.fields\');" Object="item" /><Snippet t="styles_dt.Snippet" Name="Add a specific field" Code="item.setFields(\'.fields\',\'myFieldID\');" Object="item" /><Snippet t="styles_dt.Snippet" Name="Name of item" Code="item.name" Object="item" /><Snippet t="styles_dt.Snippet" Name="Set item image" Code="item.setImage(\'.itemimg\',item.image);" Object="item" /><Snippet t="styles_dt.Snippet" Name="Bind to clearItems" Description="clearItems is triggered when the itemlist clears its items (e.g. when running filters)"       Code="itemlist.bind(\'clearItems\',function() {});" Object="itemlist" /></xtml></Component><Component id="DataTypeJsMetadata" type="styles_dt.JavascriptMetadata"><xtml t="styles_dt.JavascriptMetadata"><Snippet t="styles_dt.Snippet" Name="Setting text" Object="datatype"><Code><![CDATA[datatype.set(\'new value\');]]></Code></Snippet><Snippet t="styles_dt.Snippet" Name="Getting value" Object="datatype"><Code><![CDATA[var text = datatype.text;]]></Code></Snippet></xtml></Component></xtml><xtml ns="tree"><Component id="Tree" type="ui.Control" execution="xtml" databind="true"><Param name="RootItems" script="true"><Default t="data.Same"/></Param><Param name="NextLevel" script="true" /><Param name="HasNextLevel" type="data.Boolean" script="true" Description="Determine if a (+) button will show. if empty the tree will use NextLevel for that"/><Param name="ItemText" type="data.Data" script="true" /><Param name="ItemImage" type="data.Data" script="true" /><Param name="OnSelect" type="action.Action" script="true"/><Param name="OnDoubleClick" type="action.Action" script="true" Description="double click and ENTER key"/><Param name="OnDelete" type="action.Action" script="true" Description="DEL key"/><Param name="Height" type="data.Data"/><Param name="ItemControl" type="ui.Control" script="true" /><Param name="OnKeyPressed" type="action.Action" script="true"/><Param name="ContextMenu" type="menu.ContextMenu" script="true"/><Param name="AutoExpandOnSelect" type="data.Boolean"><Default value="true"/></Param><Param name="Borderless" type="data.Boolean"><Default value="false"/></Param><Param name="AutoExpandFirstLevel" type="data.Boolean"><Default value="true"/></Param><Param name="OpenAllNodes" type="data.Boolean"><Default value="false"/></Param><xtml t="xml.WithChanges"><Var name="TreeContext" t="xtml.Params"><Param name="Text" value="%$Text%" /><Param name="Image" value="%$Image%" /><Param name="AutoExpandOnSelect" value="%$AutoExpandOnSelect%" /><Param name="HasNextLevelEmpty" t="yesno.Empty" Data="%$HasNextLevel%"/><Param name="HasItemControl" t="yesno.NotEmpty" Data="%$ItemControl%"/><ScriptParam name="RootItems" t="xtml.UseParam" Param="RootItems"/><ScriptParam name="NextLevel" t="xtml.UseParam" Param="NextLevel"/><ScriptParam name="HasNextLevel" t="xtml.UseParam" Param="HasNextLevel"/><ScriptParam name="ItemText" t="xtml.UseParam" Param="ItemText"/><ScriptParam name="ItemImage" t="xtml.UseParam" Param="ItemImage"/><ScriptParam name="ItemColoring" t="xtml.UseParam" Param="ItemColoring"/><ScriptParam name="ItemControl" t="xtml.UseParam" Param="ItemControl"/><ScriptParam name="ContextMenu" t="xtml.UseParam" Param="ContextMenu"/><ScriptParam name="OnSelect" t="action.RunActions"><Action t="xtml.UseParam" Param="OnSelect" /><Action t="tree.Expand" Condition="%$AutoExpandOnSelect% == \'true\'"><Data t="uiaction.GoUp" TopClass="treeitem" /></Action></ScriptParam><ScriptParam name="OnDoubleClick" t="xtml.UseParam" Param="OnDoubleClick"/><ScriptParam name="OnKeyPressed" t="xtml.UseParam" Param="OnKeyPressed"/><ScriptParam name="OnDelete" t="xtml.UseParam" Param="OnDelete"/><ScriptParam name="LazyExpand" t="tree.AddNodes"/></Var><Xml t="ui.Html" DynamicContent="true"><div class="tree_top"><span id="tree_key_sink" tabindex="1" onkeyup="ajaxart_tree_event(event);return false;" ></span><div class="tree_wrapper" style="font-family: times; font-size:12px; border1:1px solid blue; overflow:auto; white-space: nowrap; min-height:200px; min-width:200px;height:%$Height%" tabindex="1" onkeydown="ajaxart_tree_keydown(event);" onkeyup="ajaxart_tree_event(event);return false;"			    onclick="ajaxart_tree_event(event);" ondblclick="ajaxart_tree_event(event)" ><ul class="treeview"/></div></div></Xml><Change t="uiaction.RunUiActions"><Data t="uiaction.ElementByID" ID="tree_key_sink" StartFrom="%%" /><Condition t="ui.IsChrome" /><Action t="uiaction.Hide" /></Change><Change t="uiaction.AddClass" RunOn="%%" Cls="noborder" Condition="%$Borderless%"/><Change t="ui.DataBind"><Data t="ui.ElementOfClass" Cls="treeview"/></Change><Change t="ui.ExecJQuery" Expression=".treeview({toggle: function() { ajaxart_tree_toggle(this,\'TreeContext\',\'LazyExpand\');}})"><Data t="ui.ElementOfClass" Cls="treeview"/></Change><Change t="tree.AddNodes" IsRootLevel="true" AutoExpand="true"><Data t="ui.ElementOfClass" Cls="treeview"/></Change><Change t="ui.ExecJQuery" Expression=".find(\'.hitarea\').click()" Name="auto expand first level" Condition="%$AutoExpandFirstLevel%"/><Change t="tree.OpenAllNodes" RunOn="%$%" Condition="%$OpenAllNodes%"/><Change t="tree.SelectFirst"/></xtml></Component><Component id="SelectFirst" type="xml.Change" execution="native" hidden="true" /><Component id="NewNodeItem" type="data.Data"><xtml t="xml.WithChanges" ><Xml t="ui.Html"><li class="treeitem treeitem closed"><image class="treeitem_image" src="" align="top" height="16px"/><span class="treeitem_text" style="position:relative;"><span class="treeitem_text_content" style="z-index:2; white-space: normal;"/><input class="treeitem_dummy4focus" readonly="true" style="position:absolute; left:-4px; top:0px; width:1px; padding:0; border:none; z-index:1; background:transparent;"></input></span></li></Xml><Change t="xml.SetAttribute"><Data t="ui.ElementOfClass" Cls="treeitem_image"/><AttributeName value="src"/><Value t="xtml.RunXtml" Xtml="%$TreeContext/ItemImage%"/></Change><Change t="ui.DataBind" ><Data t="ui.ElementOfClass" Cls="treeitem_text"/></Change><Change t="data.IfThenElse"><If value="%$TreeContext/HasItemControl%"/><Else t="xml.PerformChanges"><Data t="ui.ElementOfClass" Cls="treeitem_text_content"/><Change t="xml.UpdateInnerText"><NewValue t="xtml.RunXtml" Xtml="%$TreeContext/ItemText%"/></Change><Change1 t="xml.SetAttribute" AttributeName="title"><Value t="xtml.RunXtml" Xtml="%$TreeContext/ItemText%"/></Change1><Change t="uiaction.AddClass" Cls="text_item" RunOn="%%"/></Else><Then t="xml.PerformChanges"><Change t="xml.AddChildren" CloneChildren="false"><Data t="ui.ElementOfClass" Cls="treeitem_text"/><Children t="xtml.RunXtml" Xtml="%$TreeContext/ItemControl%"/></Change></Then></Change><Change t="xml.AddChildren"  CloneChildren="false" Name="add expand button"><Condition t="data.IfThenElse" If="%$TreeContext/HasNextLevelEmpty%"><Then t="yesno.NotEmpty"><Data t="xtml.RunXtml" Input="%$InputForChanges%" Xtml="%$TreeContext/NextLevel%"/></Then><Else t="xtml.RunXtml" Input="%$InputForChanges%" Xtml="%$TreeContext/HasNextLevel%"/></Condition><Children t="ui.Html"><ul class="treeul"/></Children></Change><Change t="menu.SetContextMenu"><Var name="_CurrentFocus" t="ui.ElementOfClass" Cls="treeitem_dummy4focus" /><Menu t="xtml.RunXtml" Xtml="%$TreeContext/ContextMenu%"/></Change><Change t="ui.DisableTextSelection"/></xtml></Component><Component id="AddNodes" type="xml.Change" execution="xtml" hidden="true"><Param name="IsRootLevel" type="data.Boolean"><Default value="false"/></Param><xtml t="xml.MultiChange"><Change t="tree.AddChildren" TreeViewCls="treeview"><Children t="data.Pipeline"><Item t="data.IfThenElse" If="%$IsRootLevel%"><Then t="xtml.RunXtml" Xtml="%$TreeContext/RootItems%"/><Else t="xtml.RunXtml" Xtml="%$TreeContext/NextLevel%"/></Item><Item t="tree.NewNodeItem"/></Children></Change></xtml></Component><Component id="AddChildren" type="xml.Change" hidden="true" execution="native"><Param name="TreeViewCls" /><Param name="Children" /></Component><Component id="RefreshSelected" type="action.Action" execution="xtml"><Param name="RefreshParentChildren" type="data.Boolean"/><Param name="RefreshChildren" type="data.Boolean"/><Param name="IdentifierForSelected" script="true"/><Param name="IdentifierForCurrent" script="true"/><xtml t="xml.ChangeXml"><Xml t="data.Pipeline"><Item t="uiaction.ControlElementToRunOn"/><Item t="ui.ElementOfClass" Cls="selected"/></Xml><Change t="xml.MultiChange"><Data t="ui.ElementOfClass" Cls="treeitem" Direction="up"/><Condition t="yesno.And"><Item value="%$RefreshChildren%"/><Item1 t="tree.IsExpanded"/></Condition><Change t="tree.CollapseAndUnlazyChildren" RunOn="%%"/><Change t="tree.Expand"/></Change><Change t="data.IfThenElse" If="%$RefreshParentChildren%"><Then t="xml.MultiChange"><Var name="CurrentNodeID" t="data.FirstSucceeding"><Item t="xtml.UseParam" Param="IdentifierForCurrent"><Input t="ui.ControlData"/></Item><Item t="xtml.UseParam" Param="IdentifierForSelected"><Input t="ui.ControlData"/></Item></Var><PerformChangesOn t="data.Pipeline"><Item t="ui.ElementOfClass" Cls="treeitem" Direction="up"/><Item t="ui.ElementOfClass" Cls="treeitem" Direction="up"/></PerformChangesOn><Change t="tree.CollapseAndUnlazyChildren" RunOn="%%"/><Change t="tree.Expand"/><Change t="uiaction.Click"><RunOn t="uiaction.ElementByInnerFilter" TopElement="%%"><Filter t="yesno.EqualsTo" To="%$CurrentNodeID%"><Data t="xtml.UseParam" Param="IdentifierForSelected"/></Filter></RunOn></Change></Then><Else t="ui.UseDataBoundParams" ><Change t="action.RunActions"><Action t="action.IfThenElse" If="%$TreeContext/HasItemControl%"><Else t="action.RunActions"><Action t="xml.UpdateInnerText"><Data t="ui.ElementOfClass" Cls="treeitem_text_content"/><NewValue t="xtml.RunXtml" Xtml="%$TreeContext/ItemText%"/></Action><Action t="xml.SetAttribute" AttributeName="title"><Data t="ui.ElementOfClass" Cls="treeitem_text_content"/><Value t="xtml.RunXtml" Xtml="%$TreeContext/ItemText%"/></Action></Else><Then t="xml.ReplaceChildren"><Children t="xtml.RunXtml" Xtml="%$TreeContext/ItemControl%"/></Then></Action><Action t="xml.SetAttribute" ><Data RunOn="%%" t="uiaction.GoUpAndDown" UpClass="treeitem" DownClass="treeitem_image" /><AttributeName value="src"/><Value t="xtml.RunXtml" Xtml="%$TreeContext/ItemImage%"/></Action></Change></Else></Change></xtml></Component><Component id="CollapseAndUnlazyChildren" type="xml.Change"><xtml t="xml.MultiChange" PerformChangesOn="%%"><Change t="uiaction.Click"><Condition t="ui.HasClass" Cls="collapsable"/><RunOn t="ui.ElementOfClass" Cls="hitarea"/></Change><Change t="xml.Delete"><Data t="ui.ElementOfClass" Cls="treeul"/></Change><Change t="xml.MultiChange"><Condition t="ui.RunInControlContext" RunOn="%%"><Item t="data.IfThenElse" If="%$TreeContext/HasNextLevelEmpty%"><Then t="yesno.NotEmpty"><Data t="xtml.RunXtml" Input="%$InputForChanges%" Xtml="%$TreeContext/NextLevel%"/></Then><Else t="xtml.RunXtml" Input="%$InputForChanges%" Xtml="%$TreeContext/HasNextLevel%"/></Item></Condition><Change t="xml.AddChildren" CloneChildren="false" Name="add expand button"><Children t="ui.Html"><ul class="treeul"/></Children></Change><Change t="tree.InternalAfterAddingItem" Item="%%"/></Change></xtml></Component><Component id="InternalAfterAddingItem" type="action.Action" execution="native"><Param name="Item"/></Component><Component id="Expand" type="xml.Change"><xtml t="uiaction.Click"><Condition t="ui.HasClass" Cls="expandable"/><RunOn t="ui.ElementOfClass" Cls="hitarea" OnlyFirst="true"/></xtml></Component><Component id="ExpandParent" type="xml.Change"><xtml t="uiaction.Click"><RunOn t="data.Pipeline"><Item t="ui.ControlToRunOn" /><Item t="ui.ElementOfClass" Cls="selected"/><Item t="xml.Parent"/></RunOn></xtml></Component><Component id="PickTreeDisplayLabel" type="data.Data"><Param name="OptionLabel" script="true"/><xtml t="data.Switch" Value="%%"><Case If="_all"><Then t="text.MultiLang" Pattern="all"/></Case><Default t="data.Pipeline"><Item t="text.Split" Separator=","/><Item t="xtml.UseParam" Param="OptionLabel"/><Item t="data.IfThenElse" Else="%%"><If t="yesno.EqualsTo" To="_blank"/><Then t="text.MultiLang" Pattern="empty (no value)"/></Item><Aggregator t="text.Concat" Separator=","/></Default></xtml></Component><Component id="IsLeaf" type="data.Boolean"><xtml t="yesno.Empty"><Data t="uiaction.GoUpAndDown" UpClass="treeitem" DownClass="treeitem"/></xtml></Component><Component id="IsExpanded" type="data.Boolean"><xtml t="ui.HasClass" Cls="collapsable"/></Component><Component id="DoubleClickOnSelected" type="action.Action"><xtml t="uiaction.RunEvent" VarName="TreeContext" Action="OnDoubleClick"><RunOn t="data.Pipeline" ><Item t="uiaction.ControlElementToRunOn"/><Item t="ui.ElementOfClass" Cls="selected"/></RunOn></xtml></Component><Component id="RefreshAfterAddingItem" type="action.Action"><Param name="ParentNode" /><Param name="AlsoSelect" type="data.Boolean"><Default value="false" /></Param><Param name="ExpandBefore" type="data.Boolean"><Default value="true" /></Param><xtml t="action.RunActions"><Var name="AboveUL" t="data.Switch"><Case><IfCondition t="yesno.Empty" Data="%$ParentNode%" /><Then t="data.Pipeline"><Item t="ui.ControlToRunOn" /><Item t="ui.ElementOfClass" Cls="selected"/><Item t="xml.Parent"/></Then></Case><Case><IfCondition t="ui.HasClass" Data="%$ParentNode%" Cls="tree_top"/><Then t="ui.ElementOfClass" Cls="tree_wrapper" Data="%$ParentNode%"/></Case><Default value="%$ParentNode%"/></Var><Var name="NewItems" t="data.IfThenElse"><If t="ui.HasClass" Data="%$ParentNode%" Cls="tree_top"/><Then t="ui.RunInControlContext"><RunOn t="data.Pipeline"><Item value="%$AboveUL%"/><Item t="uiaction.JQueryFind" RunOnData="true" Expression=">ul"/></RunOn><Item t="xtml.RunXtml" Xtml="%$TreeContext/RootItems%"/></Then><Else t="ui.RunInControlContext" RunOn="%$AboveUL%"><Item t="xtml.RunXtml" Xtml="%$TreeContext/NextLevel%"/></Else></Var><Action t="tree.InternalRefreshAddingItem" AboveUL="%$AboveUL%" NewItems="%$NewItems%"><NewNodeItem t="tree.NewNodeItem"/><OnNewItem t="uiaction.Click" RunOn="%%" Condition="%$AlsoSelect%"/></Action></xtml></Component><Component id="InternalRefreshAddingItem" type="action.Action" execution="native" hidden="true"><Param name="AboveUL"/><Param name="NewItems"/><Param name="NewNodeItem" script="true"/><Param name="OnNewItem" type="action.Action" script="true"/></Component><Component id="ExpandAndSelectItem" type="action.Action"><Param name="TreePath"/><xtml t="action.RunActions"><Var name="State" t="xtml.Params"><Param name="Current" t="ui.ElementOfClass" Cls="tree_wrapper"><Data t="ui.ControlToRunOn"/></Param></Var><Action t="action.RunActionOnItems"><Items t="text.Split" Separator="/" Data="%$TreePath%"/><Action t="action.RunActions"><Action t="object.SetProperty" Object="%$State%" Property="Current"><Var name="PathElem"/><Value t="data.Pipeline"><Item value="%$State/Current%"/><Item t="uiaction.JQueryFind" RunOnData="true" Expression=">ul>li" All="true"/><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsEqual" Item1="%$PathElem%"><Item2 t="data.Pipeline"><Item t="uiaction.JQueryFind" RunOnData="true" Expression=">span"/><Item t="uiaction.JQueryFind" RunOnData="true" Expression=".treeitem_text_content"/><Item t="xml.InnerTextValue"/></Item2></Filter></Item><Aggregator t="data.First"/></Value></Action><Action t="tree.Expand" Data="%$State/Current%"><Condition t="yesno.NotEmpty" Value="%$State/Current%"/></Action></Action></Action><Action t="tree.SelectItem" Item="%$State/Current%"/></xtml></Component><Component id="TreeNodeByPath" type="ui.Control" execution="native"><Param name="TreePath"/></Component><Component id="ExpandAndSelectItemForItemControl" type="action.Action"><Param name="TreePath"/><Param name="ItemText" script="true"/><xtml t="action.RunActions"><Var name="State" t="xtml.Params"><Param name="Current" t="ui.ElementOfClass" Cls="tree_wrapper"><Data t="ui.ControlToRunOn"/></Param></Var><Action t="action.RunActionOnItems"><Items t="text.Split" Separator="/" Data="%$TreePath%"/><Action t="action.RunActions"><Action t="object.SetProperty" Object="%$State%" Property="Current"><Var name="PathElem"/><Value t="data.Pipeline"><Item value="%$State/Current%"/><Item t="uiaction.JQueryFind" RunOnData="true" Expression=">ul>li" All="true"/><Item t="yesno.PassesFilter"><Filter t="yesno.ItemsEqual" Item1="%$PathElem%"><Item2 t="data.Pipeline"><Item t="uiaction.JQueryFind" RunOnData="true" Expression=">span"/><Item t="ui.ControlData" Type="data" /><Item t="xtml.UseParam" Param="ItemText"/></Item2></Filter></Item><Aggregator t="data.First"/></Value></Action><Action1 t="tree.Expand" Data="%$State/Current%"><Condition t="yesno.NotEmpty" Value="%$State/Current%"/></Action1></Action></Action><Action t="tree.SelectItem" Item="%$State/Current%"/></xtml></Component><Component id="ParentItem" type="data.Data"><xtml t="data.Pipeline"><Item t="uiaction.ElementByClass" Cls="selected" /><Item t="ui.ElementOfClass" Cls="treeitem" Direction="up" /><Item t="ui.ElementOfClass" Cls="treeitem" Direction="up" /></xtml></Component><Component id="DeleteSelected" type="action.Action" execution="native"/><Component id="MoveSelected" type="action.Action"><Param name="To" type="enum"><Default value="next"/><value>next</value><value>previous</value><value>first</value><value>last</value></Param><xtml t="xml.ChangeXml"><Xml t="uiaction.ElementByClass" Cls="selected"/><Change t="xml.MoveElement" To="%$To%" Data="%..%"/></xtml></Component><Component id="SelectItem" type="action.Action" execution="native"><Param name="Item" type="ui.Control"><Default t="ui.ControlToRunOn"/></Param></Component><Component id="PathOfSelectedItem" type="data.Data" execution="native"/><Component id="OpenAllNodes" type="action.Action" execution="native"><Param name="MaxDepth"><Default value="10"/></Param></Component><Component id="PickTreeRoots" type="data.Data" execution="native"/><Component id="SelectTreeNodeByPath" type="action.Action" execution="native"><Param name="PathItems" /></Component></xtml><xtml ns="tree_usage"><Usage t="ui.ControlUsage" Of="tree.Tree" Name="of flat-like data"><Data t="xml.Xml"><people><person name="Homer"/><person name="Bart" parent="Homer"/><person name="Lisa" parent="Homer"/><person name="Ned Flanders"/><person name="Rod" parent="Ned Flanders"/></people></Data><Control t="tree.Tree" ItemImage="%$_Images%/studio/person3.gif"><RootItems value="%person[not(@parent)]%"/><NextLevel value="%../person[@parent=\'{@name}\']%"/><ItemText value="%@name%"/></Control><ExpectedResult t="yesno.Contains"><Text value="Bart"/><Text value="Ned Flanders"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.RefreshSelected"><Data t="xml.Xml"><people><person name="Original Homer"/><person name="Original Marge"/></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%person%" NextLevel="%person%" ItemImage="%$_Images%/studio/person3.gif"><ItemText value="%@name%"/><OnDoubleClick t="uiaction.Alert" Text="you clicked on %@name%"/></Control><Control t="ui.Text" Text="click on change model to change our data:"/><Control t="ui.Button" Name="change model" Text="change model"><OnClick t="xml.ChangeXml"><Change t="xml.SetAttribute" Data="%person[1]%" AttributeName="name" Value="The New Homer"/><Change t="xml.SetAttribute" Data="%person[2]%" AttributeName="name" Value="The New Marge"/></OnClick></Control><Control t="ui.Text" Text="now click on refresh selected to refresh only the selected tree node:"/><Control t="ui.Button" Name="refresh_btn" Text="refresh selected"><OnClick t="tree.RefreshSelected" RunOn="tree"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Original Homer"/></Action><Action t="uiaction.ButtonClick" RunOn="change model"/><Action t="uiaction.ButtonClick" RunOn="refresh_btn"/></RunOnControl><ExpectedResult t="yesno.And"><Item t="yesno.Contains"><Text value="The New Homer"/><Text value="Original Marge"/></Item><Item t="yesno.NotContains" Text="Original Homer"/></ExpectedResult><Description value="refreshes the image and text of the tree\'s selected item. use it usually on a dialog\'s OnOK"/><TryItYourself value="make the change model button change Original Homer to Bart"/></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshSelected - RefreshParentChildren"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%person%" ItemImage="%$_Images%/studio/person3.gif"><ItemText value="%@name%"/></Control><Control t="ui.Button" Name="change model" Text="change model"><OnClick t="xml.ChangeXml"><Change Data="%person[1]%" t="xml.SetAttribute" AttributeName="name" Value="Lisa"/><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></OnClick></Control><Control t="ui.Text" Text="now click on refresh selected to refresh the siblibgs of the selected tree node:"/><Control t="ui.Button" Name="refresh_btn" Text="refresh"><OnClick t="tree.RefreshSelected" RunOn="tree" RefreshParentChildren="true" IdentifierForSelected="%@name%"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Homer"/></Action><Action t="uiaction.ButtonClick" RunOn="change model"/><Action t="uiaction.ButtonClick" RunOn="refresh_btn"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="people"/><Text value="selected"/><Text value="Lisa"/><Text value="Bart"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshSelected - ItemControl"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="ui.Section"><Var name="All"/><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%person%" ItemImage="%$_Images%/studio/person3.gif"><ItemControl t="ui.Button" Text="%@name%"/></Control><Control t="ui.Button" Name="change model" Text="change model"><OnClick t="xml.ChangeXml"><Change Data="%person[1]%" t="xml.SetAttribute" AttributeName="name" Value="Lisa"/></OnClick></Control><Control t="ui.Text" Text="now click on refresh selected to refresh the siblibgs of the selected tree node:"/><Control t="ui.Button" Name="refresh_btn" Text="refresh"><OnClick t="tree.RefreshSelected" RunOn="tree"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Homer"/></Action><Action t="uiaction.ButtonClick" RunOn="change model"/><Action t="uiaction.ButtonClick" RunOn="refresh_btn"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="people"/><Text value="selected"/><Text value="Lisa"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshSelected - RefreshChildren"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%person%" ItemImage="%$_Images%/studio/person3.gif"><ItemText value="%@name%"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="people"/></Action><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></Action><Action t="tree.RefreshSelected" RunOn="tree" RefreshParentChildren="true" RefreshChildren="true" IdentifierForSelected="%@name%"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="selected"/><Text value="people"/><Text value="Homer"/><Text value="Bart"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.RefreshSelected.RefreshChildren"><Data t="xml.Xml"><people name="people"/></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%person%" ItemImage="%$_Images%/studio/person3.gif"><ItemText value="%@name%"/></Control></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="people"/></Action><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Homer"/></Children></Change></Action><Action t="tree.RefreshSelected" RunOn="tree" RefreshChildren="true"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="selected"/><Text value="people"/><Text value="Homer"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshAfterAddingItem - root"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%*%" ItemText="%@name%"/></Control><RunOnControl t="action.RunActions"><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"><ParentNode t="ui.ControlToRunOn"/></Action></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Homer"/><Text value="selected"/><Text value="Bart"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.RefreshAfterAddingItem"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%"/><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="people"/></Action><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Homer"/><Text value="selected"/><Text value="Bart"/></ExpectedResult></Usage><Usage1 t="ui.ControlUsage" Of="tree.RefreshAfterAddingItem.Expand"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%"/><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Homer"/></Action><Action t="xml.ChangeXml" Data="%person[@name=\'Homer\']%"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="kuki"/></Children></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"/><Action t="tree.SelectItem"><Item t="uiaction.GoUp" TopClass="treeul"><RunOn t="data.Pipeline"><Item t="ui.ControlToRunOn" /><Item t="ui.ElementOfClass" Cls="selected" /><Item t="ui.ElementOfClass" Cls="tree_wrapper"/></RunOn></Item></Action><Action1 t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Homer"/></Action1><Action t="tree.Expand" RunOn="tree" /><Action1 t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="kuki"/></Action1></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="kuki"/></ExpectedResult></Usage1><Usage t="ui.ControlUsage" Name="tree.RefreshAfterAddingItem - new items in sublevel"><Data t="xml.Xml"><people name="people"/></Data><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%"/><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="people"/></Action><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="selected"/><Text value="Bart"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshAfterAddingItem - new item in the middle"><Data t="xml.Xml"><people name="people"><person name="Homer"/></people></Data><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%"/><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="people"/></Action><Action t="xml.ChangeXml"><Change t="xml.AddChildInPosition" Position="1"><Child t="xml.Xml"><person name="Bart"/></Child></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="selected"/><Text value="Bart"/><Text value="Homer"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Name="tree.RefreshAfterAddingItem to empty tree"><Data t="xml.Xml"><people name="people"></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%*%" ItemText="%@name%"/></Control><RunOnControl t="action.RunActions"><Action t="xml.ChangeXml"><Change t="xml.AddChildren"><Children t="xml.Xml"><person name="Bart"/></Children></Change></Action><Action t="tree.RefreshAfterAddingItem" RunOn="tree" AlsoSelect="true"><ParentNode t="ui.ControlToRunOn"/></Action></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Bart"/></ExpectedResult></Usage><Usage1 t="ui.ControlUsage" Name="tree.SelectNode" ResultType="Data"><Data t="xml.Xml"><item name="1" trace_selected=""><item name="10"><item name="100"><item name="1000"/></item><item name="150"/></item><item name="15"/></item></Data><Control t="tree.Tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%"><Var name="TreeInput"/><OnSelect t="action.WriteValue" To="%$TreeInput/@trace_selected%" Value="%@name%"/></Control><RunOnControl t="tree.SelectNode"><NodePathFilter t="yesno.IsOneOf" Value="%@name%"><Option t="data.PathItems" Data="%$TreeInput/item/item/item%" Next="%..%"><StopCondition t="yesno.PassesCondition" Expression="%$Tag% != person"><Var name="Tag" t="xml.Tag"/></StopCondition></Option></NodePathFilter></RunOnControl><ExpectedResult t="yesno.EqualsTo" Data="%@trace_selected%" To="1000"/></Usage1><Usage t="ui.ControlUsage" Of="tree.ExpandAndSelectItem"><Data t="xml.Xml"><people name="People"><person name="Homer" father="true"><person name="Bart"/><person name="Lisa"/></person><person name="Ned Flanders" father="true"><person name="Rod"/></person><person name="Mr.Berns" father="true"/></people></Data><Control t="tree.Tree" AutoExpandFirstLevel="false" RootItems="%%" NextLevel="%*%" ItemImage="%$_Images%/studio/person3.gif"      ItemText="%@name%"/><RunOnControl t="tree.ExpandAndSelectItem" TreePath="People/Homer/Lisa"/><ExpectedResult t="yesno.Contains"><Text value="Bart"/><Text value="selected"/><Text value="Lisa"/></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="tree.PathOfSelectedItem"><Data t="xml.Xml"><people name="People"><person name="Homer" father="true"><person name="Bart"/><person name="Lisa"/></person><person name="Ned Flanders" father="true"><person name="Rod"/></person><person name="Mr.Berns" father="true"/></people></Data><Result t="data.Pipeline"><Item t="ui.ControlWithAction"><Control t="tree.Tree" AutoExpandFirstLevel="false" RootItems="%%" NextLevel="%*%" ItemImage="%$_Images%/studio/person3.gif"          ItemText="%@name%"/><RunAfterControl t="tree.ExpandAndSelectItem" TreePath="People/Homer/Lisa"/></Item><Item t="tree.PathOfSelectedItem" RunOn="%%"/></Result><ExpectedResult t="yesno.EqualsTo" To="People/Homer/Lisa"/></Usage><Usage t="usage.DataUsage" Of="tree.TreeNodeByPath"><Data t="xml.Xml"><people name="People"><person name="Homer" father="true"><person name="Bart"/><person name="Lisa"/></person><person name="Ned Flanders" father="true"><person name="Rod"/></person><person name="Mr.Berns" father="true"/></people></Data><Result t="data.Pipeline"><Item t="tree.Tree" AutoExpandFirstLevel="true" RootItems="%%" NextLevel="%*%" ItemImage="%$_Images%/studio/person3.gif"          ItemText="%@name%"/><Item t="tree.TreeNodeByPath" TreePath="People/Homer" RunOn="%%"/></Result><ExpectedResult t="yesno.Contains"><Text value="Homer"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.DeleteSelected"><Data t="xml.Xml"><people name="people"><person name="Homer"/><person name="Marge"/></people></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%person%" ItemText="%@name%" ItemImage="%$_Images%/studio/person3.gif"/></Control><RunOnControl t="action.RunActions"><Action t="uiaction.SelectItem" RunOn="tree"><Filter t="yesno.EqualsTo" Data="%@name%" To="Homer"/></Action><Action t="tree.DeleteSelected" RunOn="tree"/></RunOnControl><ExpectedResult t="yesno.And"><Item t="yesno.Contains" IgnoreCase="true"><Text value="people"/><Text value="span"/><Text value="selected"/><Text value="Marge"/></Item><Item t="yesno.Not"><Of t="yesno.Contains"><Text value="Homer"/></Of></Item></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.Tree.OpenAllNodes"><Data t="xml.Xml"><a name="top"><a name="1"><a name="1.1"/></a><a name="2"/><a name="3"><a name="3.1"/></a></a></Data><Control t="ui.Section"><Control t="tree.Tree" Name="tree" RootItems="%%" NextLevel="%a%" ItemText="%@name%" ItemImage="%$_Images%/studio/person3.gif" OpenAllNodes="true"/></Control><ExpectedResult t="yesno.And"><Item t="yesno.Contains" IgnoreCase="true"><Text value="1"/><Text value="1.1"/><Text value="2"/><Text value="3"/><Text value="3.1"/></Item></ExpectedResult><TryItYourself value="Open Only First Level"/></Usage><Usage t="ui.ControlUsage" Of="tree.SelectTreeNodeByPath"><Data t="xml.Xml"><xml name="People"><family name="Simpsons"><person name="Ned Flanders" father="true"><person name="Rod"/></person><person name="Homer" father="true"><person name="Lisa"/><person name="Bart"/></person><person name="Mr.Berns" father="true"/></family></xml></Data><Control t="tree.Tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%" ItemImage="%$_Images%/studio/yesno1616.gif"/><RunOnControl t="tree.SelectTreeNodeByPath"><PathItems t="data.ListByCommas" List="People,Simpsons,Homer,Bart"/></RunOnControl><ExpectedResult t="yesno.ItemsEqual" Item2="People/Simpsons/Homer/Bart"><Item1 t="tree.PathOfSelectedItem"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="tree.SelectTreeNodeByPath.WithUpdate"><Data t="xml.Xml"><xml name="People"><family name="Simpsons"><person name="Ned Flanders" father="true"><person name="Rod"/></person><person name="Homer" father="true"><person name="Lisa"/><person name="Bart"/></person><person name="Mr.Berns" father="true"/></family></xml></Data><Control t="tree.Tree" RootItems="%%" NextLevel="%*%" ItemText="%@name%" ItemImage="%$_Images%/studio/yesno1616.gif"/><RunOnControl t="action.RunActions"><Action t="tree.SelectTreeNodeByPath"><PathItems t="data.ListByCommas" List="People,Simpsons,Homer,Bart"/></Action><Action t="xml.ChangeXml" Xml="%family/person[@name=\'Homer\']/person[@name=\'Bart\']%"><Change t="xml.SetAttribute" AttributeName="name" Value="Magy"/></Action><Action t="tree.SelectTreeNodeByPath"><PathItems t="data.ListByCommas" List="People,Simpsons,Homer"/></Action><Action t="tree.RefreshSelected" RefreshChildren="true"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Magy"/></ExpectedResult></Usage></xtml><xtml ns="uiaspect_dt"><Component id="EditOperationsTable" type="ui.Control"><xtml t="ui.ItemList"><Var name="_AAEditorPreparedInput" t="data.Pipeline"><Item value="%$ItemsForPreview%"/><Aggregator t="data.First"/></Var><Items t="xml.XmlItems" Tag="Operation"/><Fields t="field.Fields"><Field t="xtml_dt.ComponentImageField"/><Field t="field.Field1" Title="Operation"><FieldData t="text.FirstSucceeding"><Item value="%@Title%"/><Item value="%@ID%"/></FieldData></Field><Field t="field.Field1" Title="" ID="properties"><Control t="ui.Document"><Fields t="xtml_dt.ParamsAsFields"/></Control><FieldAspect t="field_aspect.CellPresentation" Content="expandable text"/><FieldAspect t="field_aspect.TextSummary"><Text t="xtml_dt.XtmlTextSummary" Xtml="%%"/></FieldAspect></Field></Fields><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false"/><Aspect t="uiaspect.ItemSelection" OnDoubleClick=""/><Presentation t="uiaspect.RichTable"/><Operations t="operation.Operations"><Operation t="operation.Operation" ID="add operation" Target="new" Title="add operation" Icon="%$_Images%/add1616.png"><Action t="uiaspect_dt.AddOperationDialog"><DoOnNewOperation t="xtml_dt.AddNewXtmlItem" Items="%$_Cntr/Items%" Xtml="%%"><DoOnXtmlObject t="action.RunActions"><Action t="uiaction.AddItemElement" Item="%%"/><Action t="field_dt.RefreshPreview"/></DoOnXtmlObject></DoOnNewOperation></Action></Operation><Operation t="operation.Operation" ID="new custom operations" Target="new" Title="add custom operations" Icon="%$_Images%/add1616.png"><Action t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="add custom operations"><DialogData t="xml.ByTag" Tag="ops"/><Content t="ui.Document"><Fields t="field.XmlField" Path="@operations" Title="Operation Names"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Description" Description="add operations separated by , e.g. refresh,send mail"/><FieldAspect t="field_aspect.HideTitle"/></Fields></Content><RunOnOK t="action.RunActionOnItems" Data="%$OriginalInput%"><Items t="text.Split" Data="%$DialogWorkingData/@operations%"/><Action t="xtml_dt.AddNewXtmlItem"><Var name="ID" t="text.ToId"/><Items value="%$_Cntr/Items%"/><Xtml t="xml.Xml" DynamicContent="true"><Operation t="operation.Operation" ID="%$ID%" Title="%%"/></Xtml><DoOnXtmlObject t="action.RunActions"><Action t="uiaction.AddItemElement" Item="%%"/><Action t="field_dt.RefreshPreview"/></DoOnXtmlObject></Action></RunOnOK></Dialog></Action></Operation><Operation t="operation.DeleteItem"/></Operations><Aspect t="uiaspect.TableNoItems" HideTable="true"/></xtml></Component><Component id="EditItemList" type="ui.Control"><Param name="Xtml"><Default value="%%"/></Param><Param name="ItemsForPreview"/><xtml t="ui.List" Data="%$Xtml%"><Control t="ui.Section" Title="Features"><Control t="ui.ItemList"><Condition t="xtml.ComponentHasParam" Component="%@t%" Param="Aspect"/><Var name="PreviewCntr" t="xtml.RunXtml" Xtml="%%"/><Items t="xml.XmlItems" Tag="Aspect" ItemTypeName="Feature"/><Fields t="field.Fields"><Field t="field.Field1" Title="Feature"><FieldAspect t="field_aspect.Control"><Control t="field_dt.ComponentInTable" Xtml="%%">&#xa;                      </Control></FieldAspect><FieldAspect t="field_aspect.ColumnWidth" Width="250px"/><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field></Fields><Presentation t="uiaspect.RichTable" Columns1="OpenItemDetails,Feature"/><Aspect t="uiaspect.TableNoItems"/><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false" Toolbar="false"/><Operations1 t="operation.StdOperations" OpenItemDetails1="true"/><Aspect t="xtml_dt.XtmlItemDetails" Type="uiaspect.Aspect"/><Aspect t="uiaspect.DeleteOnHover"><DoAfterDelete t="field_dt.RefreshPreview"/></Aspect><Aspect t="uiaspect.HeaderFooter"><Control t="headerfooter.FastAddItem" IncludeAddButton="false"><Page t="ui.ItemPage"><Field t="field_dt.AddFeatureField" Type="uiaspect.Aspect" /></Page></Control></Aspect><Aspect1 t="xtml_dt.XtmlInplaceItemDetails" Type="uiaspect.Aspect"/></Control></Control><Control t="ui.Section" Title=""><Data t="xtml_dt.ToCompositeParam" Param="Operations" PTForComposite="operation.Operations"/><Control t="uiaspect_dt.EditOperationsTable"><Condition t="xtml.ComponentHasParam" Component="%../@t%" Param="Operations"/></Control></Control></xtml></Component><Component id="AddOperationDialog" type="action.Action"><Param name="IsCustom" type="data.Boolean" /><Param name="DoOnNewOperation" type="action.Action" script="true" /><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="add operation"><DialogData t="xml.Xml" /><Content t="ui.Document"><Fields t="data.IfThenElse" If="%$IsCustom%"><Else t="field.XmlField" Path="@t" Title="Select Operation"><Type t="field_aspect.DynamicPickList" OptionCode="%Component%" OptionImage="%Image%"><OptionLabel t="xtml_dt.ComponentToLowerCase" Data="%Component%" /><Options t="data.Pipeline"><Item t="xtml_dt.LightComponentsOfType" Type="operation.OperationAction" /><Item t="xtml_dt.ComponentObject" Component="%%" /><Item t="yesno.PassesFilter"><Filter t="object.HasMethod" Method="GenerateOperation" /></Item></Options></Type><FieldAspect t="field_aspect.Mandatory" /></Else><Then t="field.XmlField" Path="@operation" Title="Operation Name"><FieldAspect t="field_aspect.Mandatory" /></Then></Fields></Content><RunOnOK t="xtml.UseParam" Param="DoOnNewOperation"><Input t="data.IfThenElse" If="%$IsCustom%"><Else t="object.RunMethod" Method="GenerateOperation"><Var name="ItemTypeName" t="text.FirstSucceeding"><Item value="%$Xtml/@ContentType%" /><Item value="%$Xtml/@TitleForSingle%" /></Var><Object t="xtml_dt.ComponentObject" Component="%$DialogWorkingData/@t%" /></Else><Then t="xml.Xml" DynamicContent="true"><Operation t="operation.Operation" ID="%@operation%" Title="%@operation%" /></Then></Input></RunOnOK></Dialog></xtml></Component><Component id="ColumnsOptions" type="data.Data"><xtml t="data.List"><Item t="data.Pipeline"><Item value="%$PreviewCntr/Fields%" /><Item value="%ID%" /></Item><Item1 t="data.Pipeline"><Item value="%$PreviewCntr/_Operations%" /><Item value="%ID%" /></Item1></xtml></Component></xtml><xtml ns="xmltree"><!--Bugs:1. It should close on Esc.2. I think it should close automatically after selecting a value and adding to the textbox.3. It should close automatically when writing value in the textbox that makes it irrelevant.e,g when someone writes down %aaa - it should be closed.4. When choosing \'Count\' of an attribute it generates an invalid value.e,g xml: <xml><person name="Dany"/><person name="John"/><person name="Abby"/><person name="Asi"/><address city="Tel Aviv"/></xml>​ Try to select the first name and choose Count. --><Component id="OpenXmlSelector" type="action.Action"><Param name="TextBox" /><xtml t="dlg.OpenDialog" ><Var name="XmlRoot" value="%%" /><Var name="XmlSelectorObject" t="object.Object"><Method name="UpdateValue" t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="field_aspect.AddTextToSuggestionBox" Text="%%" RunOn="%$TextBox%" /></Method></Var><Style t="xmltree.PopupStyle" /><Contents t="field.ShowFieldControl"><Field t="xmltree.XmlTreeSelector" /></Contents></xtml></Component><Component id="XmlTreeSelector" type="field.Fields"><xtml t="field.XmlMultipleGroup" Title=""><Presentation t="uiaspect.Tree" CollapseLevel="expand all" TextInHitArea="" ExpandLevel="first level"        ItemImage="%$_Images%/default1616.gif" DragAndDrop="false"><NextLevel t="xml.XmlItems" Tag="*" /><ItemText t="xmltree.ItemTextHtmlForXmlElement"><OnClick t="xmltree.ClickInTree" /></ItemText></Presentation><Items t="field.CustomItems" Items="%%" /></xtml></Component><Component id="ItemTextHtmlForXmlElement" type="data.Data" execution="native"><Param name="TagCss" Default="#this { cursor:pointer; padding-right: 5px; color: #397D7B;} #this:hover { text-decoration:underline; }" /><Param name="AttributeNameCss" Default="#this { cursor:pointer;  color: #7B007B;} #this:hover { text-decoration:underline; }" /><Param name="ValueCss" Default="#this { cursor:pointer; padding-right: 5px; color: #2900FF;} #this:hover { text-decoration:underline; }" /><Param name="OnClick" type="action.Action" script="true" /></Component><Component id="ClickInTree" type="action.Action"><xtml t="action.IfThenElse"><Var name="FirstMultiValue" t="data.Pipeline"><Item t="data.PathItems" Next="%..%"><StopCondition t="yesno.ItemsEqual" Item1="%%" Item2="%$XmlRoot%" /></Item><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty"><Value t="xml.Siblings" OnlyWithSameTag="true" /></Filter></Item><Aggregator t="data.First" /></Var><If t="yesno.IsEmpty" Value="%$FirstMultiValue%" /><Then t="object.RunMethod" Object="%$XmlSelectorObject%" Method="UpdateValue"><Input t="xml.XPathOfNode" TopXml="%$XmlRoot%" /></Then><Else t="dlg.OpenDialog"><Style t="xmltree.AggregatorSelectorPopupStyle" /><Feature t="dlg.ArrowToLaunchingElement" /><Feature t="dlg.NearLauncher" PopupAtLeastWideAsLauncher="false"/><Contents t="field.ShowFieldControl"><Var name="XmlNode" /><Field t="field.Layout"><Layout t="layout.Vertical" Spacing="5px" /><Field t="data.Pipeline"><Var name="Type" value="number"><Condition t="yesno.IsNumber" /></Var><Item t="aaeditor.Aggregators" /><Item value="%aggregator%" /><Item t="yesno.PassesFilter"><Filter t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%@type%" /><Then value="true" /><Else t="yesno.ItemsEqual" Item1="%@type%" Item2="%$Type%" /></Filter></Item><Item t="xmltree.MenuButton" Aggregator="%%" XmlNode="%$XmlNode%" /></Field><Field t="xmltree.FilterMenuButton" XmlNode="%$XmlNode%" /></Field></Contents></Else></xtml></Component><Component id="FilterMenuButton" type="field.Fields" light="false"><Param name="XmlNode" /><xtml t="field.Button"><Condition t="xml.IsAttribute" /><ButtonText value="Filter By \'%$Att%\'"><Var name="Att" t="xml.AttributeName" /></ButtonText><Image t="image.Image" Url="%$_Images%/studio/filter.png" /><Style t="button.Hyperlink" /><Action t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="object.RunMethod" Object="%$XmlSelectorObject%" Method="UpdateValue"><Var name="Selected" value="%%" /><Var name="Att" t="xml.AttributeName" /><Data t="text.Concat" Items=""><Item t="xml.XPathOfNode" Data="%$XmlNode/..%" TopXml="%$XmlRoot%" /><Item value="[@%$Att% = \'%$XmlNode%\']"><Var name="Att" t="xml.AttributeName" Data="%$XmlNode%" /></Item></Data></Action></Action></xtml></Component><Component id="MenuButton" type="field.Fields" light="false"><Param name="XmlNode" /><Param name="Aggregator" /><xtml t="field.Button" Title=""><ButtonText t="xtml.RunXtml" Xtml="%$Aggregator/@text%"><Var name="ValueName" t="text.FirstSucceeding" Data="%$XmlNode%"><Item t="xml.AttributeName" /><Item t="xml.Tag" /></Var></ButtonText><Image t="image.Image"><Url t="xtml.RunXtml" Xtml="%$Aggregator/@img%" /></Image><Style t="button.Hyperlink" /><Action t="action.RunActions"><Action t="dialog.ClosePopup" /><Action t="object.RunMethod" Object="%$XmlSelectorObject%" Method="UpdateValue"><Var name="FirstMultiValue" t="data.Pipeline"><Item value="%$XmlNode%" /><Item t="data.PathItems" Next="%..%"><StopCondition t="yesno.ItemsEqual" Item1="%%" Item2="%$XmlRoot%" /></Item><Item t="yesno.PassesFilter"><Filter t="yesno.NotEmpty"><Value t="xml.Siblings" OnlyWithSameTag="true" /></Filter></Item><Aggregator t="data.First" /></Var><Var name="XPath" t="text.Concat"><Item t="xml.XPathOfNode" Specific="true" Data="%$FirstMultiValue/..%" TopXml="%$XmlRoot%" /><Item value="/"><Condition t="yesno.ItemsNotEqual" Item1="%$FirstMultiValue/..%" Item2="%$XmlRoot%" /></Item><Item t="xml.XPathOfNode" Specific="false" Data="%$XmlNode%" TopXml="%$FirstMultiValue/..%" /></Var><Var name="SpecificXPath" t="xml.XPathOfNode" Specific="true" Data="%$XmlNode%" TopXml="%$XmlRoot%" /><Input t="data.Pipeline"><Item t="xtml.RunXtml" Xtml="%$Aggregator/@out%" Input="%$XPath%"/><Item value="%%\\%" /></Input></Action></Action></xtml></Component><Component id="PopupStyle" type="dialog_style.Style" light="false"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"      Css="#this { background:white; border:1px solid gray; overflow: auto; max-width: 300px; max-height: 200px; }" Javascript=""      Mode="popup"><Feature t="dlg.NearLauncher" /><Feature t="dlg.CloseWhenClickingOutside" /><Feature t="dlg.CloseOnEsc" /></xtml></Component><Component id="AggregatorSelectorPopupStyle" type="dialog_style.Style" light="false"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Css="#this { padding:15px; ​-moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 2px 2px #888;-webkit-box-shadow: 0 0 2px 2px#888;&#xa;box-shadow: 0 0 2px 2px #888;&#xa; background:#EEEEFC; border:none; &#xa; margin-right:20px;​ overflow-y: auto; overflow-x: hidden; }"     Javascript="" Mode="popup"><Feature t="dlg.NearLauncher" /><Feature t="dlg.DontCloseOtherPopupsOnOpen"/></xtml></Component></xtml><xtml ns="xtml_dt"><Component id="ParamsAsFields" type="field.Fields" execution="native"><Param name="Component" Default="%@t%"/><Param name="Params"/><NativeHelper name="Options" t="field_aspect.Aspects"><Var name="TypeDef" t="xtml.TypeDefinition" Type="%$_Field/Type%"/><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="true" RecalculateForEachCell="true" Options="%$_Field/Options%" Multiple="%$_Field/Multiple%"><ControlStyle t="picklist.JBartPicklist"><PopupStyle t="xtml_dt.TgpTypePicklistPresentation" TypeDef="%$TypeDef%"/></ControlStyle><Presentation t="xtml_dt.TgpTypePicklistPresentation" TypeDef="%$TypeDef%"/></FieldAspect><FieldAspect t="field_aspect.PopupWidth" WidthOption="by css class" Condition="%$TypeDef/@style%"/><FieldAspect t="field_aspect.OnUpdate" Phase="1000"><Action t="field_dt.RefreshPreview"/></FieldAspect><FieldAspect t="xtml_dt.ToggleInnerTgpParams" /><FieldAspect t="field_aspect.IndentOptionPage"/></NativeHelper><NativeHelper name="OptionsObjForTgpType" t="field_dt.ComponentsOfTypeOptions" t1="field_dt.ComponentsWithCategories" Type="%$_Field/Type%" CurrentPT="%{$_Field/Param}/@t%"><OptionPage t="object.Object"><Method name="Control" t="ui.Document"><Data value="%$_PageParams/DataItems/Items/{$_Field/Param}%"/><Condition t="yesno.NotEmpty" Value="%@t%"/><Fields t="xtml_dt.ParamsAsFields" Component="%@t%"/><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Operations t="operation.Operations"/></Method></OptionPage></NativeHelper><NativeHelper name="AspectsForTgpType" t="field_aspect.Aspects"><FieldAspect t="field_aspect.AddControl"><Control t="ui.List" Class="gallery_link"><Layout t="ui.SpanList"/><Var name="GalleryNode" t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%%"/><Item value="%@gallery%"/></Var><Control t="ui.Image" Source="%$_Images%/studio/question.jpg" Class="aa_hyperlink" CssStyle="margin-left:5px;" Title="Go to Gallery Item"><Condition t="yesno.NotEmpty" Value="%$GalleryNode%"/><OnClick t="uiaction.GoToPage" Url="bartgallery.html#?node=bart_sample.%$GalleryNode%?page=widget?smallpage=runtime"/></Control></Control></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="uiaction.Refresh" RunOn="updown(.pt_editor,.gallery_link)"/></FieldAspect><FieldAspect t="field_aspect.Css" Class="pt_editor"/></NativeHelper><NativeHelper name="Aspects" t="field_aspect.Aspects"><FieldAspect t="field_aspect.Description"><Description t="text.FirstSucceeding"><Item value="%$_Field/ParamXml/@description%" /><Item t="xml.CDataValue" Element="%$_Field/ParamXml/Description%" /></Description></FieldAspect><FieldAspect t="field_dt.CssEditingFieldAspect" Condition="%$_Field/ParamXml/@css%"/><FieldAspect t="field_dt.CodeMirrorPopupFieldAspect" Condition="%$_Field/ParamXml/@codemirror%"/><FieldAspect t="field_aspect.Aspects" Condition="%$_Field/ParamXml/@titleField%"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /><FieldAspect t="field_aspect.ChangeFieldID" ID="dt_title"/></FieldAspect><FieldAspect t="field_aspect.Aspects" Condition="%$_Field/ParamXml/@idField%"><FieldAspect1 t="field_aspect.FieldData" FieldData="%!@ID%"/><FieldAspect t="field_aspect.ChangeFieldID" ID="dt_id"/></FieldAspect><FieldAspect t="field_aspect.Resizer" RememberLastWidth="false" /></NativeHelper><NativeHelper name="BoolFeatureAspects" t="field_aspect.Aspects"><FieldAspect t="field_aspect.Picklist" Multiple="true"><Options t="picklist.DynamicOptions" Options="%$_Field/Params%"><OptionLabel t="text.Capitalize" Mode="capital to separate words"/></Options></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="field_dt.RefreshPreview"/></FieldAspect></NativeHelper><NativeHelper name="Array" t="field_aspect.Aspects"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Control"><Control t="ui.ItemList"><Items t="xml.XmlItems" Tag="%$_Field/Param%"/><Presentation t="uiaspect.RichTable" HideEmptyTable="true" Sort="false" ColumnsResizer="false" DragAndDropColumns="false"/><Aspect t="uiaspect.DefaultFeatures" Toolbar1="false" ItemSelection="false"/><Aspect t="uiaspect.FastFindInHtml" Condition="%$_Field/ParamXml/@fastfind%"/><Aspect t="uiaspect.ItemSelection" OnDoubleClick=""/><Aspect1 t="uiaspect.Toolbar" Location="footer" ID="default"/><Aspect1 t="uiaspect.TableNoHeader"/><Aspect t="xtml_dt.XtmlItemDetails"><Type t="text.RemoveSuffix" Suffix="[]" Data="%$_Field/Type%"/></Aspect><Operations t="operation.Operations"><Operation t="operation.Operation" ID="NewItem" Target="new" Icon="%$_Images%/add1616.png" Shortcut="Alt+N" WritableOnly="true" Title="New %$_Cntr/Items/ItemTypeName%"><Action t="operation.New" ImmediateAdd="true"/></Operation><Operation t="operation.DeleteItem"/></Operations><Fields t="field.Fields"><Field t="field.Field1" Title="%$_Field/ParamXml/@name%"><FieldAspect t="field_aspect.Control"><Control t="field_dt.ComponentInTable" Xtml="%%" /></FieldAspect><FieldAspect t="field_aspect.ColumnWidth" Width="270px"/><FieldAspect t="field_aspect.CellPresentation" Content="control"/></Field><Field1 t="xtml_dt.ComponentImageField"/><Field1 t="field.XmlField" Path="@%$_Field/ParamXml/@ItemIdentifier%"><Condition t="yesno.NotEmpty" Value="%$_Field/ParamXml/@ItemIdentifier%"/></Field1><Field1 t="field.CustomControl" ID="T" Title="%$_Field/Param%" ShowTitle="true"><Control t="xtml_dt.PTToTextControl"/></Field1><Field1 t="field.CustomControl" Title="Properties" ID="properties"><Control t="ui.Document"><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Fields t="xtml_dt.ParamsAsFields"/></Control><FieldAspect t="field_aspect.CellPresentation" Content="expandable text"/><FieldAspect t="field_aspect.TextSummary"><Text t="xtml_dt.XtmlTextSummary" Xtml="%%"/></FieldAspect></Field1></Fields></Control></FieldAspect></NativeHelper></Component><Component id="ParamsAndReadOnlyTypeAsFields" type="field.Fields"><Param name="Component"><Default value="%@t%" /></Param><xtml t="field.Fields"><Field t="field.CustomControl" ID="t" Title="Type"><Control t="ui.Text"><Text t="xtml_dt.ComponentToLowerCase" Data="%$Component%" /></Control></Field><Field t="xtml_dt.ParamsAsFields" Component="%$Component%" /></xtml></Component><Component id="XtmlTextSummary" type="data.Data" execution="native"><Param name="Xtml"><Default value="%%" /></Param></Component><Component id="PTSelectorField" type="field.Fields"><Param name="Type"/><Param name="FieldTitle" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true"/><Param name="ParamsForOptionPage" type="field.Fields" script="true"><Default t="xtml_dt.ParamsAsFields" Component="%$_PageParams/DataItems/Items/@t%"/></Param><Param name="AllowEmptyValue" type="data.Boolean" Default="true"/><Param name="Path" Default="@t"/><Param name="HideTypeTitle" type="data.Boolean"/><xtml t="field.XmlField" Path="%$Path%" ><Title t="text.FirstSucceeding"><Item value="%$FieldTitle%" /><Item value="%@TypeTitle%"><Data t="xtml.TypeDefinition" Type="%$Type%" /></Item><Item value="Type" /></Title><FieldAspect t="field_aspect.OnUpdate" ><Action t="xtml_dt.CleanXtmlOfParams" Data="%..%" PrevComponent="%$OldValue%"/></FieldAspect><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="%$AllowEmptyValue%"><Options t="field_dt.ComponentsWithCategories" Type="%$Type%"><OptionPage t="object.Object"><Method name="Control" t="ui.Document"><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Item t="data_items.Items" Items="%$_PageParams/DataItems/Items%"/><Fields t="xtml.UseParam" Param="ParamsForOptionPage"/></Method></OptionPage></Options></FieldAspect><FieldAspect t="field_aspect.DefaultValue"><Condition t="yesno.NotEmpty"><Value t="data.Pipeline"><Item t="xtml.TypeDefinition" Type="%$Type%" /><Item value="%@DefaultPT%" /></Value></Condition><Value t="data.Pipeline"><Item t="xtml.TypeDefinition" Type="%$Type%" /><Item value="%@DefaultPT%" /></Value></FieldAspect><FieldAspect t="field_aspect.HideTitle" Condition="%$HideTypeTitle%"/><FieldAspect t="field_aspect.UnindentOptionPage"/><FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/></xtml></Component><Component id="FindXtmlType" type="data.Data"><xtml t="data.Pipeline"><Item t="xtml.ComponentParamType" Component="%../@t%"><Param t="xml.Tag" /></Item><Item t="text.RemoveSuffix" Suffix="[]" /></xtml></Component><Component id="CleanXtmlOfParams" type="action.Action" execution="native"><Param name="PrevComponent" /></Component><Component id="IsAdvancedParam" type="data.Boolean" execution="native"><Param name="Xtml"/><Param name="ParamXml"/></Component><Component id="MoreFieldsHelper" type="ui.Control" hidden="true"><xtml t="ui.Document"><Var name="Xtml" value="%%"/><Item t="data_items.Items" Items="%%"/><Fields t="xtml_dt.ParamsAsFields" Component="%$Component%"><Params t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$Component%"/><Item value="%Param%"/><Item t="yesno.PassesFilter"><Filter t="yesno.And"><Item t="yesno.ItemsNotEqual" Item1="%@light%" Item2="false"/><Item t="xtml_dt.IsAdvancedParam" ParamXml="%%" Xtml="%$Xtml%"/></Filter></Item><Item value="%@name%"/><Aggregator t="text.Concat" Separator=","/></Params></Fields><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation></xtml></Component><Component id="NewPTControl" type="ui.Control"><Param name="Type"/><xtml t="ui.Document"><Fields t="field.Fields"><Var name="ParamsForNew" t="data.Pipeline"><Item t="xtml.TypeDefinition" Type="%$Type%"/><Item t="text.Split" Text="%@FirstParamsForNew%"/><Item t="xtml.ComponentParam"><Component t="text.RemoveSuffix" Separator="."/><Param t="text.ExtractSuffix" Separator="."/></Item></Var><Field t="data.Pipeline"><Item value="%$ParamsForNew%"/><Item t="xtml_dt.ParamsAsFields" Component="%../../@ns%.%../@id%" Params="%@name%"/></Field><Field t="xtml_dt.PTSelectorField" Type="%$Type%"><ParamsForOptionPage t="data.Pipeline"><Item t="xtml_dt.ParamsAsFields" Component="%$_PageParams/DataItems/Items/@t%"/><Item t="yesno.PassesFilter"><Filter t="yesno.NotInList" Item="%Param%" List="%$ParamsForNew/@name%"/></Item></ParamsForOptionPage></Field></Fields><Item t="data_items.Items" Items="%%"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Operations t="operation.Operations"/></xtml></Component><Component id="XtmlItemDetails" type="uiaspect.Aspect"><Param name="Type" /><xtml t="uiaspect.ItemDetails"><ItemPage t="ui.CustomSinglePage"><Control t="ui.Document"><Fields t="xtml_dt.ParamsAsFields" /><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation></Control></ItemPage><NewItemPage t="ui.CustomSinglePage"><Control t="ui.IfThenElse" If="%=Count($PTs)%==1"><Var name="PTs" t="xtml.ComponentsOfType" Type="%$Type%" /><Then t="ui.ControlWithAction"><RunBeforeControl t="action.WriteValue" To="%!@t%" Value="%$PTs%" /><Control t="ui.Document"><Fields t="xtml_dt.ParamsAsFields" /><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation></Control></Then><Else t="xtml_dt.NewPTControl" Type="%$Type%" /></Control></NewItemPage></xtml></Component><Component id="XtmlInplaceItemDetails" type="uiaspect.Aspect"><Param name="Type" /><xtml t="uiaspect.ItemDetails"><OpenIn t="uiaspect.DetailsInplace" /><ItemPage t="ui.CustomSinglePage"><Control t="ui.Document"><Fields t="xtml_dt.PTSelectorField" Type="%$Type%" HideTypeTitle="true"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation></Control></ItemPage><NewItemPage t="ui.CustomSinglePage"><Control t="ui.Document"><Fields t="xtml_dt.PTSelectorField" Type="%$Type%" HideTypeTitle="true"/><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation></Control></NewItemPage></xtml></Component><Component id="RunGenerations" type="action.Action"><Param name="Xtml" /><xtml t="xtml.RunXtmlByComponentId" ComponentID="%$Xtml/@t%_Generate" Input="%$Xtml%" /></Component><Component id="PreviewContext" type="data.Data" execution="native"><Param name="Input" /><Param name="ContextVar" type="data.Data[]" /></Component><Component id="GlobalCustomize" type="action.Action" execution="native"><NativeHelper name="GoToPage" t="bart_dt.GoToEditPage" Page="%%" /><NativeHelper name="OpenAAEditor" t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%$AAEditorState%" /><Then t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><Var name="AAEditorState" t="aaeditor.State" GlobalPreviewXtml="%%" TreeXtml="%%"><SaveAction t="aaeditor.Save" /></Var><RunOnOK t="uiaction.Refresh" RunOn="%$_Cntr%" /></Then><Else t="action.RunActions"><Action t="aaeditor.UpdateEditorState" GlobalPreviewXtml="%%" TreeXtml="%%" /><Action t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><RunOnOK t="uiaction.Refresh" RunOn="%$_Cntr%" /></Action></Else></NativeHelper></Component><Component id="GlobalOpenAAEditor" type="action.Action" execution="native"><NativeHelper name="OpenAAEditor" t="action.IfThenElse"><If t="yesno.IsEmpty" Value="%$AAEditorState%" /><Then t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><Var name="AAEditorState" t="aaeditor.State" GlobalPreviewXtml="%%" TreeXtml="%%"><SaveAction t="aaeditor.Save" /></Var><RunOnOK t="uiaction.Refresh" RunOn="%$_Cntr%" /></Then><Else t="action.RunActions"><Action t="aaeditor.UpdateEditorState" GlobalPreviewXtml="%%" TreeXtml="%%" /><Action t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><RunOnOK t="uiaction.Refresh" RunOn="%$_Cntr%" /></Action></Else></NativeHelper></Component><Component id="CssCustomize" type="action.Action" execution="native"><NativeHelper name="Open" t="bart_dt.OpenCssDialog"><Var name="BartAppXtml" t="data.Pipeline"><Item value="%$_BartDevDtContext/DevUnits/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /><Aggregator t="data.First" /></Var><RunOnOK t="uiaction.Refresh" RunOn="up(.bartdev_all)" /></NativeHelper></Component><Component id="ComponentParams" type="field.Fields" execution="native"><Param name="ComponentID" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" paramVar="Param" /></Component><Component id="RefreshPrimitivePreview" type="action.Action"><xtml t="uiaction.Refresh" RunOn="updown(.xtml_dt_primitive,.text_dynamic_preview)" /></Component><Component id="EditAsRichText" type="menu.MenuItem"><xtml t="menu.MenuItem" Text="edit as rich text" Image="%$_Images%/studio/text.jpg" ><Action t="dlg.OpenDialog" Title="Edit Text" Data="%!@{$Field}%"><Contents t="ui.List"><Control t="ui.TextControl"><Style t="richtext.RichText" /></Control><Control t="ui.Text" Text="You can put dynamic text with the pattern {\\%...\\%}" /></Contents></Action></xtml></Component><Component id="EditScriptOfPrimitive" type="action.Action"><xtml t="action.Switch"><Case><IfCondition t="yesno.And"><Item t="yesno.Not" Of="%$IsAttribute%" /><Item t="yesno.ItemsNotEqual" Item1="%$Xtml/{$Field}/@t%" Item2="ui.DataFromJavaScript" /></IfCondition><Then t="action.RunActions"><Var name="AAEditorState" t="aaeditor.State"><Data t="xtml.Xtml" Xtml="%$Xtml/{$Field}%" Input="%$_Context/Input%" Context="%$_Context/context%" /></Var><Action t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><RunOnOK t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%" /></Action></Then></Case></xtml></Component><Component id="CustomizeItemListOperation" type="operation.Operation"><xtml t="operation.Operation" ID="OpenScript" Title="" Icon="%$_Images%/studio/customize1616.gif" Shortcut="Ctrl+Alt+C"><Action t="action.IfThenElse"><Var name="Page" t="data.ItemByID" List="%$_BartContext/Pages%" ID="%$_Cntr/ID%" /><If t="yesno.NotEmpty" Value="%$Page%" /><Then t="bart_dt.GoToEditPage" Page="%$Page/ID%" /><Else t="xtml_dt_tree.OpenScriptDialog" AutoRefresh="false"><Var name="AAEditorState" t="aaeditor.State"><Var name="ContXtml" value="%$_Cntr/XtmlSource%" /><GlobalPreviewXtml value="%$ContXtml%" /><TreeXtml value="%$ContXtml%" /><SaveAction t="aaeditor.Save" /></Var><RunOnOK t="uiaction.Refresh"><Control t="uiaspect.ContainerControl" /></RunOnOK></Else></Action></xtml></Component><Component id="FindXtmlByT" type="data.Data"><Param name="ParentXtml" /><Param name="T" /><Param name="FindAll" type="data.Boolean" /><xtml t="xml.FindXmlByAttribute" ParentXml="%$ParentXtml%" Attribute="t" Value="%$T%" FindAll="%$FindAll%" /></Component><Component id="AddNewXtmlItem" type="action.Action"><Param name="Items" /><Param name="Xtml" /><Param name="DoOnXtmlObject" type="action.Action" script="true" /><xtml t="action.RunActions"><Var name="NewSubset" t="object.RunMethod" Object="%$Items%" Method="SubsetForNewItem" /><Action t="xml.ReplaceElement" Element="%$NewSubset/Items%" NewElement="%$Xtml%" /><Action t="object.RunMethod" Object="%$NewSubset%" Method="Save" /><Action t="xtml.UseParam" Param="DoOnXtmlObject" Input="%$NewSubset/Items%" /></xtml></Component><Component id="ComponentObject" type="data.Data" execution="native"><Param name="Component" /></Component><Component id="ComponentImage" Type="field.Fields"><Param name="Component" script="true"><Default value="%@t%" /></Param><xtml t="text.FirstSucceeding"><Var name="ComponentID" t="xtml.UseParam" Param="Component" /><Item t="xtml.RunXtml" Xtml="%$Def/@image%"><Var name="Def" t="xtml.ComponentDefinition" ID="%$ComponentID%" /></Item><Item t="data.Pipeline"><Item t="xtml_dt.ComponentObject" Component="%$ComponentID%" /><Item value="%Image%" /></Item><Item value="%$_Images%/default1616.gif" /></xtml></Component><Component id="ComponentImageField" Type="field.Fields"><Param name="Component" script="true"><Default value="%@t%" /></Param><xtml t="field.Field1" Title="" ID="compimage"><Control t="ui.Image"><Source t="text.FirstSucceeding"><Item t="data.Pipeline"><Item t="xtml_dt.ComponentObject"><Component t="xtml.UseParam" Param="Component" /></Item><Item value="%Image%" /></Item><Item t="text.FirstSucceeding"><Var name="CompDefinition" t="xtml.ComponentDefinition"><ID t="xtml.UseParam" Param="Component" /></Var><Var name="TypeDefinition" t="xtml.TypeDefinition" Type="%$CompDefinition/@type%" /><Item value="%$CompDefinition/@image%" /><Item value="%$TypeDefinition/@image%" /></Item></Source></Control><FieldAspect t="field_aspect.CellPresentation" Content="control" /></xtml></Component><Component id="ComponentOperations" Type="operation.Operations"><Param name="Component"><Default value="%Xtml/@t%" /></Param><xtml t="data.Pipeline"><Item t="xtml_dt.ComponentObject" Component="%$Component%" /><Item value="%Operations%" /></xtml></Component><Component id="EditBasicTypeControl" type="ui.Control"><xtml t="ui.Button"><Text t="data.IfThenElse" Then="define" Else="edit"><If t="yesno.And"><Item t="yesno.IsEmpty" Value="%$Xtml/@{$Param}%" /><Item t="yesno.IsEmpty" Value="%$Xtml/{$Param}%" /></If></Text><Style t="ui.ButtonAsHyperlink" /><OnClick t="action.RunActions"><Action t="xml.AddChildren" Data="%$Xtml%"><Condition t="yesno.IsEmpty" Value="%$Xtml/{$Param}%" /><Children t="xml.ByTag" Tag="%$Param%"><Change t="xml.SetAttribute" AttributeName="t"><Value t="data.Switch"><Value t="xtml.ComponentParamType" Component="%$Xtml/@t%" Param="%$Param%" /><Case If="data.Data" Then="data.Pipeline" /><Case If="action.Action" Then="action.RunActions" /><Case If="xml.Change" Then="xml.PerformChanges" /><Case If="ui.Control" Then="ui.List" /><Case If="data_async.Data" Then="data_async.Pipeline" /><Case If="action_async.Action" Then="action_async.RunActions" /></Value></Change></Children></Action><Action t="xtml_dt_tree.OpenScriptDialog" ><Var name="_Context" t="xtml_dt.CalcPreviewForXtml"><SelectedInTree t="aaeditor.TreeItemData" ParentXtml="%$Xtml%" Field="%$Param%" /></Var><Var name="XtmlWithContext" t="xtml.Xtml" Xtml="%$Xtml/{$Param}%" Context="%$_Context/context%"><Input t="data.FirstSucceeding"><Item value="%$_Context/Input%" /><Item value="%$_AAEditorPreparedInput%" /></Input></Var><Var name="AAEditorState" t="aaeditor.State"><Data value="%$XtmlWithContext%" /></Var><RunOnOK t="action.RunActions"><Action t="uiaction.Refresh" /><Action t="field_dt.RefreshPreview" /></RunOnOK></Action></OnClick></xtml></Component><Component id="AdvancedCustomizationOperation" type="operation.Operations"><xtml t="operation.Operations"><Operation t="operation.Operation" Title="Advanced Customization" Icon="%$_Images%/studio/customize1616.gif" ID="aaeditor" Shortcut="Alt+x"><Action t="xtml_dt_tree.OpenScriptDialog" ><Var name="AAEditorState" t="aaeditor.State" TreeXtml="%$Xtml%"><Var name="Xtml" t="xtml.Xtml" Xtml="%%"><Context t="bart_dt.ResourcesContext" /></Var><SaveAction t="aaeditor.Save" /><GlobalPreviewXtml t="xtml.Xtml"><Xtml t="data.IfThenElse" Data="%$Xtml/script%" Then="%%"><If t="xml.IsOfTag" Tag="Page" /><Else t="xml.UpToTag" Tag="Page" /></Xtml></GlobalPreviewXtml></Var></Action></Operation><Operation t="operation.Operation" Title="Advanced Customization (Xml)" Icon="%$_Images%/studio/xml4.gif" ID="aaeditor_xml" Shortcut="Alt+e"><Action t="xmlui.ShowXmlDialog" Title="Xtml Source" AutoWrite="true"><Xml t="data.IfThenElse" If="%$ParentTag% == \'Component\'" Then="%..%" Else="%%"><Var name="ParentTag" t="xml.Tag" Data="%..%" /></Xml><OnUpdate t="uiaction.Refresh" RunOn="up(.bartdt_edit_fields)" /></Action></Operation></xtml></Component><Component id="LightComponentsOfType" type="data.Data" execution="native"><Param name="Type" /></Component><Component id="RefreshPreview" type="action.Action"><xtml t="uiaction.Refresh" RunOn="%$_FieldsDTContext/ControlHolder%" /></Component><Component id="CalcPreviewForXtml" type="data.Data"><Param name="SelectedInTree" Default="%%" /><xtml t="data.FirstSucceeding" ><Var name="SelectedInTree" value="%$SelectedInTree%"/><Var name="_Xtml" value="%$SelectedInTree/ParentXtml%" /><Var name="PreviewContextXtml" t="data.Pipeline"><Item t="xtml.ComponentParam" Component="%$SelectedInTree/ParentXtml/@t%" Param="%$SelectedInTree/Field%" /><Item value="%PreviewContext%" /></Var><Item t="xtml.RunXtml" Xtml="%$PreviewContextXtml%"><Condition t="yesno.NotEmpty" Value="%$PreviewContextXtml%" /></Item><Item1 value="%$_Cntr/Items/PreviewData%" /><Item t="aaeditor.CalcLocalPreviewData" ReturnAll="true" ><State t="aaeditor.State" SelectedInTree="%$SelectedInTree%"><TreeXtml t="xtml.Xtml" ><Xtml t="xml.UpToTag" Tag="Page" Data="%$SelectedInTree/ParentXtml%" /></TreeXtml></State><Var name="TopCircuit" t="aaeditor.CalculateTopCircuit"><Xtml t="data.FirstSucceeding"><Item value="%$SelectedInTree/ParentXtml/@{$SelectedInTree/Field}%" /><Item value="%$SelectedInTree/ParentXtml/{$SelectedInTree/Field}%" /></Xtml></Var><MainCircuitRunner t="object.RunMethod" Method="RunCircuit" Object="%$TopCircuit%" /></Item></xtml></Component><Component id="FieldsOfCurrentXtml" type="data.Data"><Param name="Xtml"><Default value="%%" /></Param><xtml t="data.Pipeline"><Item t="xml.UpToTag" Tag="Page" Data="%$Xtml%" /><Item t="xtml.RunXtml" Xtml="%%" /><Item t="yesno.PassesFilter" Remark="huristic: make sure that input is the page input"><Filter t="yesno.ItemsEqual"><Item1 t="xml.Tag" Data="%$_Context/Input%" /><Item2 value="%ContentType%" /></Filter></Item><Item value="%Fields%" /></xtml></Component><Component id="UpdateValueToEnum" type="action.Action"><Param name="Value" /><xtml t="action.RunActions"><Action t="action.WriteValue" To="%$_ItemsOfOperation%" Value="%$Value%" /><Action t="xtml.RunXtml" Xtml="%$_Field/OnUpdate%" /><Action t="uiaction.Refresh"><RunOn t="uiaspect.ContainerControl" /></Action></xtml></Component><Component id="ToCompositeParam" type="data.Data" execution="native"><Param name="Param" /><Param name="PTForComposite" /></Component><Component id="ComponentToLowerCase" type="data.Data"><xtml t="data.Pipeline"><Item t="text.RemovePrefix" Separator="." /><Item t="text.Capitalize" Mode="capital to separate words" /><Item t="text.ToLowerCase" /></xtml></Component><Component id="ImageOfType" type="data.Data" execution="native"><Param name="Type" /></Component><Component id="ComponentEditor" type="ui.Control"><Param name="ShowReadOnlyT" type="data.Boolean" /><xtml t="ui.IfThenElse"><Var name="ComponentObject" t="xtml_dt.ComponentObject" Component="%@t%" /><If t="object.HasMethod" Object="%$ComponentObject%" Method="Control" /><Then t="object.RunMethod" Object="%$ComponentObject%" Method="Control" /><Else t="ui.Document"><Presentation t="uiaspect.Group"><Style t="group.PropertySheet"/></Presentation><Fields t="field.Fields"><Field t="field.CustomControl" ID="t" Title="Type" Condition="%$ShowReadOnlyT%"><Control t="ui.Text"><Text t="xtml_dt.ComponentToLowerCase" Data="%$Component%" /></Control></Field><Field t="xtml_dt.ParamsAsFields" /></Fields></Else></xtml></Component><Component id="AggregatorFields" type="data.Data" execution="native"><Param name="Items" /></Component><Component id="CalcPreviewHelper" type="data.Data" ><xtml t="aaeditor.CalcLocalPreviewData" ><MainCircuitRunner t="object.RunMethod" Method="TopCircuit" /></xtml></Component><Component id="DummyFieldForPreview" type="field.Field1" hidden="true" ><xtml t="xtml.RunXtml" Xtml="%$_FieldForPreview%" /></Component><Component id="TgpTypePicklistPresentation" type="picklist.PopupStyle" hidden="true"><Param name="TypeDef"/><xtml t="picklist.SystemPopup" FilterTreshold="30"><Operation t="operation.Operation" ID="Customize" Title="Customize" Target="items" Icon="%$_Images%/studio/custom.png"><Condition t="yesno.And"><Item value="%$TypeDef/@customPT% != \'\'" /><Item t="data.Pipeline"><Item t="xtml.RunXtmlByComponentId" ComponentID="%$_FieldData%" /><Item t="yesno.OR"><Item value="%IsTriplet%" /><Item t="yesno.NotEmpty" Value="%Html%" /></Item></Item><Item t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%$_FieldData%" /><Item t="yesno.Not" Of="%@customPT%" /></Item></Condition><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_Input%" Method="RevertToLastValue"/><Action t="action.IfThenElse" If="%$Triplet/IsTriplet%" ><Var name="Triplet" t="xtml.RunXtmlByComponentId" ComponentID="%$_FieldData%" /></Action><Action t="object.RunMethod" Object="%$_Input%" Method="UpdateFromPopupAndClose"><Input t="text.Text" Text="%$TypeDef/@customPT%"/></Action></Action><Operations t="operation.Operations"/></Operation><PopupFeature t="uiaspect.HighlightSelectionOnHover" ><Condition t="yesno.OR"><Item value="%$_PopupField/ParamXml/@name% == \'Style\'" /><Item value="%$_PopupField/ParamXml/@refreshOnHover%" /></Condition><Action t="operation.RunXtmlAction"><Action t="picklist.SetPicklistValue" ForPreviewOnly="true" Value="%code%"/></Action></PopupFeature></xtml></Component><Component id="ProfileProperty" type="data.Data" execution="native"><Param name="Profile"/><Param name="Param"/></Component><Component id="TrimVariables"  type="data.Data" execution="native"/><Component id="JavaScriptInlineEditor" type="ui.Control"><xtml t="field.ShowFieldControl" CellTag="span"><Item value="%%"/><Field t="field.XmlField" Path=""><FieldAspect t="field_aspect.FieldData"><FieldData t="xml.XPath" XPath="@Code" CreateIfDoesNotExist="true"><DefaultValue t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="operation.RunJavascript"/><Item value="%Param[@name=\'Code\']/Default/@value%"/></DefaultValue></FieldData></FieldAspect><FieldAspect t="field_aspect.Control"><Control t="xmlui.CodeMirrorTextarea" Type="js" UpdateOnClick="true" Width="350px" Height="200px"/></FieldAspect></Field></xtml></Component><Component id="DocumentationIcon" type="ui.Control"><Param name="ComponentDefinition" /><Param name="Icon" ><Default value="%$_Images%/studio/question.jpg" /></Param><xtml t="ui.Image" Source="%$Icon%" Class="aa_hyperlink doc_icon"><Title value="%$ComponentDefinition/@description%" /><OnClick t="dlg.OpenDialog" ><Style t="dialog_style.DefaultPopup" /><Contents t="ui.Document"><Fields t="field.Fields"><Field t="field.Field" FieldData="%$ComponentDefinition/@description%" ReadOnlyText="true"><FieldAspect t="field_aspect.HideTitle" /></Field><Field t="field.Button" Title="See sample in the gallery"><Var name="GalleryNode" value="%$ComponentDefinition/@gallery%"/><Condition t="yesno.NotEmpty" Value="%$GalleryNode%"/><Style t="button.Hyperlink" /><Action t="uiaction.GoToPage" Url="bartgallery.html#?node=bart_sample.%$GalleryNode%?page=widget?smallpage=runtime"/></Field></Fields></Contents></OnClick><Condition t="yesno.OR"><Item t="yesno.NotEmpty" Value="%$GalleryNode%"/><Item t="yesno.NotEmpty" Value="%$ComponentDefinition/@description%"/></Condition></xtml></Component><Component id="PTToTextControl" type="ui.Control"><xtml t="ui.List"><Control t="ui.List"><Var name="ComponentDefinition" t="xtml.ComponentDefinition" ID="%@t%"/><Control t="ui.Text" Hint="%$ComponentDefinition/@description%"><Text t="data.Pipeline"><Item value="%@t%"/><Item t="text.RemovePrefix" Separator="."/><Item t="text.Capitalize" Mode="capital to separate words"/></Text></Control><Control t="xtml_dt.DocumentationIcon" ComponentDefinition="%$ComponentDefinition%" /><Layout t="ui.Horizontal" VerticalAlign="middle"/></Control><Control1 t="ui.Text" Class="xtml_dt_description"><Text t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%@t%"/><Item value="%@description%"/></Text></Control1></xtml></Component><Component id="HtmlParam" type="field.Fields"><Param name="ParamName" /><xtml t="field.XmlField" Path="@%$ParamName%"><Type t="field_aspect.MultiLineText" /><FieldAspect t="field_aspect.Css" Inline="width:300px; height:100px;" /><FieldAspect t="action.RunActions"><Action t="action.WriteValue" To="%!@{$ParamName}%"><Value t="data.IfThenElse"><If t="yesno.IsEmpty" Value="%@{$ParamName}%" /><Then t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%@t%" ToXtml="false" /><Item value="%Param[@name=\'{$ParamName}\']/Default/@value%" /></Then><Else t="data.Pipeline"><Item t="xml.TextToXml" Data="%@{$ParamName}%" /><Item t="xml.XmlToText" PrettyPrint="true" /></Else></Value></Action></FieldAspect><FieldAspect t="field_aspect.OnKeyUp"><Action t="field_dt.RefreshPreview"><Condition t="yesno.And"><Item value="%$CtrlKey%" /><Item value="%$KeyCode% == \'13\'" /></Condition></Action></FieldAspect></xtml></Component><Component id="ToggleInnerTgpParams" type="field.FieldAspect" execution="native"><Param name="Css" advanced="true" css="true"><Default><![CDATA[.aa_field_toolbar_image { margin: 4px 0 0 3px; vertical-align: top; display: inline-block; width:16px; height:16px; cursor: pointer;}      ]]></Default></Param></Component><Component id="RefreshPreview" type="field.FieldAspect"><xtml t="field_aspect.OnUpdate"><Action t="field_dt.RefreshPreview" /></xtml></Component></xtml><xtml ns="xtml_dt"><Component id="OpenPrimitiveControlPopup" type="action.Action"><xtml t="menu.OpenContextMenu"><Menu t="menu.ContextMenu"><Item t="data.Pipeline"><Var name="Xtml" value="%%" /><Item t="xtml.ComponentParam" Component="%@t%" Param="%$Field%" /><Item value="%ContextMenu%" /><Item t="xtml.RunXtml" Xtml="%%" Input="%$Xtml%"/></Item><Item t="menu.MenuItem" Text="add data item ..." Image="%$_Images%/add1616.gif"><Condition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$_Context/Input%"/><Item value="%$IsAttribute%"/></Condition><Action RunOn="%$_PrimitiveControl%" t="ui.TriggerSuggestionBoxPopup" TextToSimulate="\\%" TextPatternToAdd="\\%%%\\%"/></Item><Item t="menu.MenuItem" Text="edit script ..." Image="%$_Images%/studio/customize1616.gif"><Condition t="yesno.Not" Of="%$IsAttribute%"/><Action t="xtml_dt.EditScriptOfPrimitive"/></Item><Item t="menu.MenuItem" Text="xtml script ..." Image="%$_Images%/studio/customize1616.gif" Condition="%$IsAttribute%"><Action t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/{$Field}%"/><Action t="xml.AddChildren" Data="%$Xtml%"><Children t="xml.ElementOfDynamicTag" Tag="%$Field%"><Change t="xml.SetAttribute" AttributeName="t"><Value t="data.IfThenElse" Else="data.Pipeline" Then="yesno.And" If="%$ParamType%==\'data.Boolean\'"><Var name="ParamType" t="xtml.ComponentParamType" Component="%$Xtml/@t%" Param="%$Field%"/></Value></Change><Change t="xml.AddChildren"><Children t="xml.Xml" DynamicContent="true"><Item value="%$Xtml/@{$Field}%"/></Children></Change></Children></Action><Action1 t="xml.SetAttribute" Data="%$Xtml/{$Field}%" AttributeName="customxtml" Value="true"/><Action t="xml.Delete" Data="%$Xtml/@{$Field}%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/><Action t="action.RunActions"><Var name="AAEditorState" t="aaeditor.State"><Data t="xtml.Xtml" Xtml="%$Xtml/{$Field}%" Input="%$_Context/Input%" Context="%$_Context/context%"/></Var><Action t="xtml_dt_tree.OpenScriptDialog" Title="%$Field%" Xtml="%$Xtml/{$Field}%" XtmlType="data.Data"><RunOnClose t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/><GlobalPreview t="ui.Text" FixNewLines="true"><Text t="xtml.RunXtml"><Xtml t="xtml.Xtml" Xtml="%$Xtml/{$Field}%" Input="%$_Context/Input%" Context="%$_Context/context%"/></Text></GlobalPreview></Action></Action></Action></Item><Item t="menu.MenuItem" Text="java script ..." Image="%$_Images%/studio/r.gif" Condition="%$IsAttribute%"><Action t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/{$Field}%"/><Action t="xml.AddChildren" Data="%$Xtml%"><Children t="xml.ElementOfDynamicTag" Tag="%$Field%"><Change t="xml.SetAttribute" AttributeName="t" Value="data.JavaScript"/><Change t="xml.SetAttribute" AttributeName="Code"><Condition t="yesno.NotEmpty" Value="%$Xtml/@{$Field}%"/><Value value="function(data,html_elem,context) { &#xa;return &quot;%$Xtml/@{$Field}%&quot;;&#xa; }"/></Change></Children></Action><Action t="xml.Delete" Data="%$Xtml/@{$Field}%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/></Action></Item><Item t="menu.MenuItem" Text="delete script" Image="%$_Images%/delete1616.gif"><Condition t="yesno.Not" Of="%$IsAttribute%"/><Action t="dialog.AskForConfirmation" Title="Delete Formula Script" Question="Are you sure you want to delete the formula script?"><RunOnOK t="action.RunActions"><Action t="xml.SetAttribute" Data="%$Xtml%" AttributeName="%$Field%"><Value t="xtml.RunXtml" Xtml="%$Xtml/{$Field}%" Input="%$_Context/Input%" Context="%$_Context/context%"/></Action><Action t="xml.Delete" Data="%$Xtml/{$Field}%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/></RunOnOK></Action></Item><Item1 t="menu.DynamicMenuItems" Text="%Title%" Image="%$_Images%/add1616.gif"><Items t="xtml_dt.FieldsOfCurrentXtml" Xtml="%$Xtml%"/><Action t="ui.AddTextToSuggestionBox" Text="\\%%Path%\\%" RunOn="%$_PrimitiveControl%" TriggerOnAfterTextAdded="false"/></Item1><Item t="menu.MenuItem" Text="edit as large text ..." Image="%$_Images%/studio/file1616.png"><Condition value="%$IsAttribute%"/><Action t="action.RunActions"><Action t="aaeditor.OpenPrimitiveAsDialog" Context="%$_Context%" Data="%$Xtml/!@{$Field}%"><RunOnOK t="action.RunActions"><Var name="NewValue"/><Action t="xml.SetAttribute" Data="%$Xtml%" AttributeName="%$Field%" Value="%$NewValue%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/></RunOnOK></Action></Action></Item><Item1 t="menu.MenuItem" Text="add variable ..." Image="%$_Images%/studio/balls1616.png"><Condition t="yesno.NotEmpty"><Value t="xtml.PartsOfContext" Context="%$_Context/context%" Part="Variable Names"/></Condition><Action RunOn="%$_PrimitiveControl%" t="ui.TriggerSuggestionBoxPopup" TextToSimulate="\\%$" TextPatternToAdd="\\%$%%"/></Item1><Item t="menu.MenuItem" Image="%$_Images%/studio/undo.jpg" ID="revert"><Var name="DefaultValue" value="%$_XtmlDtContext/DefaultValue%"/><Condition t="yesno.NotEmpty" Value="%$DefaultValue%"/><Text value="restore default (%$DefaultValue%)"/><Action t="action.RunActions"><Action t="xml.Delete" Data="%$Xtml/@{$Field}%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%"/></Action></Item><Item t="menu.MenuItem" Text="edit in popup ..." Image="%$_Images%/studio/file1616.png"><Action t="dialog.OpenDialog"><Dialog t="dialog.Dialog"><Content t="xmlui.CodeMirrorTextarea" Type="js" UpdateOnClick="true" AutoFocus="true" Class="jstextarea"><Height t="ui.ScreenSize" Margin="200" AsHtmlString="true"/><Width t="ui.ScreenSize" Margin="200" AsHtmlString="true" Axis="width"/></Content><RunOnOK t="action.RunActions"><Action t="action.WriteValue" To="%$Xtml/{$Field}/@Code%" Value="%$DialogWorkingData%"/><Action t="xtml.RunXtml" Xtml="%$_XtmlDtContext/Refresh%" /></RunOnOK><DialogData t="data.WritableText" DefaultValue="%{$Field}/@Code%"/><Validations t="xmlui.CallUpdateOfCodeMirror" RunOn="updown(.dialog_box,.jstextarea)"/></Dialog></Action><Condition t="yesno.ItemsEqual" Item1="%{$Field}/@t%" Item2="data.JavaScript"/></Item></Menu></xtml></Component><Component id="PrimitiveEditor" type="ui.Control"><Param name="Xtml"/><Param name="Param"/><Param name="PreviewRunner" type="data.Data" script="true"/><xtml t="ui.List" Class="primitive_list"><Var name="IsAttribute" t="yesno.IsEmpty" Value="%$Xtml/{$Param/@name}%"/><Var name="Field" value="%$Param/@name%"/><Var name="Xtml" value="%$Xtml%"/><Var name="_PrimitiveControl" t="uiaction.ControlElementToRunOn" RunOn="updown(.primitive_list,.primitive_text_box)"/><Var name="_XtmlDtContext" t="data.Object"><Property name="DefaultValue" value="%$Param/Default/@value%"/><Method name="Refresh" t="action.RunActions"><Action t="uiaction.Refresh" RunOn="up(.primitive_list)"/><Action t="field_dt.RefreshPreview"/></Method></Var><Control t="ui.Switch"><Case Remark="primitive"><IfCondition t="yesno.IsEmpty" Value="%$Xtml/{$Param/@name}%"/><Then t="aaeditor.EditPrimitiveTextBox" Text="%$text_data%" OnlyPrimitive="true"><Var name="text_data" t="data.WritableText"><DefaultValue t="text.FirstSucceeding"><Item value="%$Xtml/@{$Param/@name}%"/><Item value="%$Param/Default/@value%"/></DefaultValue></Var><Var name="_XtmlDt" t="data.Object"><Method t="action.WriteValue" name="OnUpdate" Value="%$text_data%"><To value="%$Xtml/!@{$Param/@name}%"/></Method></Var></Then></Case><Case Remark="javascript" IfCondition="false"/><Default t="field.ShowFieldControl" Remark="xtml" Text="(calculated)"><Field t="field.JavaScriptControl" ID="aa" Html="&lt;input value=&quot;calculated&quot; readonly=&quot;true&quot; style=&quot;background:lightGray;border:1px solid gray; cursor:pointer;&quot;&gt;&lt;/input&gt;" JavaScript="function(data,html_elem,context) {&#xa;  jQuery(html_elem).click(function(e) { alert(); debugger; ajaxart.run([], context.vars._EditScript[0], &quot;&quot;, context); });&#xa;}">&#xa;      </Field><Var t="xml.Xml"><xml t="xtml_dt.EditScriptOfPrimitive" name="_EditScript"/></Var></Default></Control><Control t="ui.Button" Image="%$_Images%/openmenu.gif" CssStyle="padding-top:2px;" Class="primitive_menu_btn"><Style t="ui.ButtonAsImage"/><OnClick t="xtml_dt.OpenPrimitiveControlPopup" Data="%$Xtml%">&#xa;</OnClick></Control><Layout t="ui.Horizontal" VerticalAlign="top" Padding="4px"/></xtml></Component></xtml><xtml ns="xtml_dt_tree"><Component id="TreeDataItems" type="data_items.Items" execution="native"><Param name="TopXtml" /><Param name="Type" /></Component><Component id="TreeItemText" type="data.Data" execution="native" /><Component id="TreeObject" type="data.Data" execution="native" ><Param name="TopXtml" /></Component><Component id="Tree" type="ui.Control"><Param name="TopXtml"/><Param name="Type"/><Param name="HideEmpties" type="data.Boolean"><Default value="true"/></Param><Param name="MainCircuit" type="action.Action" script="true"/><xtml t="ui.ItemList" Class="aa_xtml_tree"><Var name="_SaveManager" t="xtml_dt_tree.SaveManager"/><Var name="_UndoData" t="xtml_dt_tree.UndoData"/><Var name="_HideEmpties" value="%$HideEmpties%"/><Var name="_XtmlTreeObj" t="xtml_dt_tree.TreeObject" TopXtml="%$TopXtml%"><Method name="AfterUpdate" t="action.RunActions" ><Action t="object.RunMethod" Method="KeepCurrentPath" Object="%$_XtmlTreeObj%"  /><Action t="uiaction.Refresh" RunOn=".xtml_editor_global_preview"/></Method><Method name="RunMainCircuit" t="xtml.UseParam" Param="MainCircuit"/><Method name="RefreshLocalPreview" t="uiaction.ReplaceControl" RunOn="updown(.aaeditor_top,.xtml_editor_local_preview)"><Var name="SelectedItem" value="%$_Item%" /><NewControl t="xtml_dt_tree.ShowWhenNotSlow" Class="xtml_editor_local_preview"><Control t="data.MeasureCalculationTime" PutTimeInObject="%$_XtmlDtTreeTimeCalculator%" PutTimeInProperty="MainCircuitTime"><Calculation t="aaeditor.PreviewControl" Class="xtml_editor_local_preview"><PreviewContext t="aaeditor.CalcLocalPreviewData"><MainCircuitRunner t="xtml.UseParam" Param="MainCircuit" Data=""/><State t="aaeditor.State"><TreeXtml value="%$TopXtml%"/><SelectedInTree t="object.RunMethod" Method="ObjectForPreview" Object="%$SelectedItem%" Input="%$SelectedItem%"/></State></PreviewContext></Calculation></Control></NewControl></Method><Property name="TopXtml" value="%$TopXtml%"/></Var><Items t="xtml_dt_tree.TreeDataItems" TopXtml="%$TopXtml%" Type="%$Type%"/><Aspect t="uiaspect.ItemImage"><ItemImage t="object.RunMethod" Method="Image"/></Aspect><Aspect t="uiaspect.MaxTreeDepth" Depth="999"/><Aspect t="uiaspect.ItemSelection" AutoSelectFirstItem="select and focus"><OnSelect t="object.RunMethod" Method="RefreshLocalPreview" Object="%$_XtmlTreeObj%" /></Aspect><Aspect t="uiaspect.ExpandCollapse" CollapseLevel="first"/><Aspect t="uiaspect.ItemText" UsingHtmlElement="true"><ItemText t="object.RunMethod" Method="Text"/></Aspect><Aspect t="uiaspect.NextLevelsLight"/><Aspect t="uiaspect.Indent" Lines="false"/><Aspect t="uiaspect.OnDoubleClick"><Action t="object.RunMethod" Method="DoubleClick"/></Aspect><Aspect t="uiaspect.Shortcuts"/><Aspect t="uiaspect.Toolbar"><MenuAspect t="operation.Presentation"><Style t="ui.ButtonAsImage"/></MenuAspect></Aspect><Aspect t="uiaspect.ContextMenu"><MenuAspect t="operation.OperationsByIDs" OperationIDs="AddParam,EditAsXml,Delete,Cut,Copy,Paste,MoveDown,MoveUp,Edit,AAEditor"/></Aspect><Operations t="operation.Operations"><Operation t="operation.Operation" ID="AddParam" Title="Add Param" Shortcut="Ctrl+space" Icon="%$_Images%/add1616.gif"><Condition value="%$HideEmpties%"/><Action t="operation.RunXtmlAction"><Var name="ParamName" t="data.WritableText"/><Var name="ParamsList" t="object.RunMethod" Method="ParamsToAdd"/><Action t="dialog.TogglePopup" WidthOption="by css class" AutoFocusOn=".fld_param" PopupCssClass="xtml_dt_add_param_popup"><Condition t="yesno.NotEmpty" Value="%$ParamsList%"/><OnElement t="data.Pipeline"><Item value="%$_ElemsOfOperation%"/><Item t="ui.DataFromJavaScript" Expression="jQuery(data).find(\'.aa_text\')"/></OnElement><Contents t="ui.List"><Control t="ui.Text" Text="Param:" Class="title"/><Control t="field.ShowFieldControl"><Item value="%$ParamName%"/><Field t="field.XmlField" Path="" ID="param"><FieldAspect t="field_aspect.CustomSuggestionBox"><OnChangeAtEndOfText t="field_aspect.OpenSuggestionBoxList" HalfWrittenPart="%%" Options="%$ParamsList%"><OptionImage t="text.FirstSucceeding"><Item value="%@icon%"/><Item value="%$_Images%/studio/cube.png"/></OptionImage><OptionLabel t="text.FirstSucceeding"><Item value="%@title%"/><Item value="%@name%"/></OptionLabel><OptionDescription value="%@description%%@Description%%$Def%"><Var name="Def" value=" (%@Default%%Default/@value%%Default/@t%)"><Condition t="yesno.NotEmpty" Value="%@Default%%Default/@value%%Default/@t%"/></Var></OptionDescription><OnSelect t="action.RunActions"><Action t="dialog.ClosePopup"/><Action t="object.RunMethod" Method="AddParam" Object="%$_ItemsOfOperation%" Input="%$_ItemsOfOperation%"><Param name="Param" value="%%"/></Action></OnSelect></OnChangeAtEndOfText></FieldAspect></Field></Control><Layout t="ui.Horizontal"/></Contents><OnPopupOpen t="field_aspect.TriggerSuggestionBoxPopup" RunOn=".fld_param"/><OnSuccess t="object.RunMethod" Method="AddParam"><Param name="SimpleParam" value="%$ParamName%"/></OnSuccess><OnCancel t="uiaction.Focus" RunOn="%$_ElemsOfOperation%"/></Action></Action></Operation><Operation t="operation.Operation" Icon="%$_Images%/save.jpg" ID="Save" Title="Save" Shortcut="Ctrl+Shift+s"><Disabled t="object.RunMethod" Object="%$_SaveManager%" Method="NoModified"/><Action t="object.RunMethod" Object="%$_SaveManager%" Method="Save"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/undo.png" ID="Undo" Title="Undo" Shortcut="Ctrl+z"><Action t="object.RunMethod" Method="Undo" Object="%$_XtmlTreeObj%"/><Condition t="yesno.NotEmpty" Value="%$_UndoData/UndoOperations%"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/redo.png" ID="Redo" Title="Redo" Shortcut="Ctrl+y"><Action t="object.RunMethod" Method="Undo"><Param name="Redo" value="true"/></Action><Condition t="yesno.NotEmpty" Value="%$_UndoData/RedoOperations%"/></Operation><Operation t="operation.Operation" ID="GotoLastEdit" Icon="%$_Images%/studio/goto_last_edit.png" Title="Goto Last Edit" Shortcut="Ctrl+q"><Condition t="yesno.NotEmpty" Value="%$_UndoData/UndoOperations%"/><Action t="object.RunMethod" Method="Undo"><Param name="GotoLastEdit" value="true"/></Action></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/delete21616.gif" ID="Delete" Title="Delete" Shortcut="delete"><Disabled t="object.RunMethod" Method="HasNoContent"/><Action t="object.RunMethod" Method="Delete"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/xmldoc.gif" ID="EditAsXml" Title="Xml..." Shortcut="Ctrl+Shift+x"><Disabled t="object.RunMethod" Method="HasNoContent"/><Action t="xmlui.ShowXmlDialog"><Xml t="object.RunMethod" Method="AsXml"/><OnUpdate t="object.RunMethod" Method="Update" Object="%$_ItemsOfOperation%" Input="%$_ItemsOfOperation%"><Param name="Xml" value="%%"/></OnUpdate><Title t="text.RemoveSuffix" Separator=" ="><Data t="object.RunMethod" Method="Text"/></Title><OnCancel t="uiaction.Focus" RunOn="%$_ElemsOfOperation%"/></Action></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/copy.png" ID="Copy" Title="Copy" Shortcut="Ctrl+c"><Disabled t="object.RunMethod" Method="HasNoContent"/><Action t="object.RunMethod" Method="Copy"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/cut.png" ID="Cut" Title="Cut" Shortcut="Ctrl+x"><Disabled t="object.RunMethod" Method="HasNoContent"/><Action t="object.RunMethod" Method="Cut"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/paste.png" ID="Paste" Title="Paste" Shortcut="Ctrl+v"><Disabled t="object.RunMethod" Method="IsActionDisabled"><Param name="Operation" value="Paste"/></Disabled><Action t="object.RunMethod" Method="Paste"/></Operation><Operation t="operation.Operation" Icon="%$_Images%/studio/down1616.gif" ID="MoveDown" Title="Move Down" Shortcut="Ctrl+down"><Disabled t="object.RunMethod" Method="IsActionDisabled"><Param name="Operation" value="MoveDown"/></Disabled><Action t="object.RunMethod" Method="Move"><Param name="Direction" value="down"/></Action></Operation><Operation t="operation.Operation" Icon="%$_Images%/up1616.gif" ID="MoveUp" Title="Move Up" Shortcut="Ctrl+up"><Disabled t="object.RunMethod" Method="IsActionDisabled"><Param name="Operation" value="MoveUp"/></Disabled><Action t="object.RunMethod" Method="Move"><Param name="Direction" value="up"/></Action></Operation><Operation t="operation.Operation" Icon="%$_Images%/edit1616.gif" ID="Edit" Title="Edit..."><Action t="xtml_dt_tree.OpenPrimitivePopup"/></Operation><Operation t="operation.Operation" ID="More" Title="More" Shortcut="Ctrl+m" Icon="%$_Images%/studio/more2.gif"><Disabled t="object.RunMethod" Method="HasNoContent"/><Action t="operation.RunXtmlAction"><Var name="ComponentsList" t="data.Pipeline"><Item t="xtml.TypeDefinition" Type="%$_ItemsOfOperation/_Type%"/><Item value="%MoreComponents/component%"/></Var><Action t="dialog.TogglePopup" WidthOption="by css class" AutoFocusOn=".fld_param" PopupCssClass="xtml_dt_add_param_popup"><Condition t="yesno.NotEmpty" Value="%$ComponentsList%"/><OnElement t="data.Pipeline"><Item value="%$_ElemsOfOperation%"/><Item t="ui.DataFromJavaScript" Expression="jQuery(data).find(\'.aa_text\')"/></OnElement><Contents t="ui.List"><Control t="ui.Text" Text="More:" Class="title"/><Control t="field.ShowFieldControl"><Item t="data.WritableText"/><Field t="field.XmlField" Path="" ID="param"><FieldAspect t="field_aspect.CustomSuggestionBox"><OnChangeAtEndOfText t="field_aspect.OpenSuggestionBoxList" Options="%$ComponentsList%" HalfWrittenPart="%%" OptionImage="%$_Images%/studio/more2.gif"><OptionLabel t="data.Pipeline"><Item t="text.Split" Separator="." Part="Second" Data="%@id%"/><Item t="text.Capitalize" Mode="capital to separate words"/></OptionLabel><OnSelect t="action.RunActions"><Action t="dialog.ClosePopup"/><Action t="object.RunMethod" Method="More" Object="%$_ItemsOfOperation%" Input="%$_ItemsOfOperation%"><Param name="MoreComponent" value="%%"/></Action></OnSelect></OnChangeAtEndOfText></FieldAspect></Field></Control><Layout t="ui.Horizontal"/></Contents><OnPopupOpen t="field_aspect.TriggerSuggestionBoxPopup" RunOn=".fld_param"/><OnCancel t="uiaction.Focus" RunOn="%$_ElemsOfOperation%"/></Action></Action></Operation><Operation t="operation.Operation" Shortcut="Ctrl+Enter" Title="Edit as large text ..." ID="EditAsLargeText" Icon="%$_Images%/studio/fullscreen.gif"><Action t="aaeditor.OpenPrimitiveAsDialog" ><Data t="object.RunMethod" Method="AsPrimitive" Object="%$_ItemsOfOperation%" /><RunOnOK t="object.RunMethod" Method="Update" Object="%$_ItemsOfOperation%" ><Param name="Value" value="%%"/></RunOnOK></Action><Disabled t="yesno.And"><Data t="object.RunMethod" Method="GetXtml" Object="%%" /><Item t="yesno.NotEmpty" Value="%@t%" /></Disabled></Operation></Operations><Aspect t="uiaspect.RunAction"><RunAfterControl t="action.RunActions" ><Action t="object.RunMethod" Method="SetTreeTop" Object="%$_XtmlTreeObj%" /><Action t="object.RunMethod" Method="GoToPreviousPath" Object="%$_XtmlTreeObj%"/></RunAfterControl></Aspect></xtml></Component><Component id="UndoData" type="data.Data" hidden="true"><xtml t="object.Object"><Property name="UndoOperations" t="data.List" /><Property name="RedoOperations" t="data.List" /></xtml></Component><Component id="OpenScriptDialog" type="action.Action" Description="compatible with old aaeditor"><Param name="RunOnOK" type="action.Action" script="true" /><xtml t="xtml_dt_tree.OpenScriptEditor" Xtml="%$AAEditorState/TreeXtml/script%" ><Var name="TopCircuit" t="aaeditor.CalculateTopCircuit" Xtml="%$AAEditorState/TreeXtml/script%" /><XtmlType t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="%@t%" Data="%$AAEditorState/TreeXtml/script%" /><Item value="%@type%" /></XtmlType><GlobalPreview t="object.RunMethod" Object="%$TopCircuit%" Method="GlobalPreview" /><MainCircuit t="object.RunMethod" Object="%$TopCircuit%" Method="RunCircuit" /><Title t="text.FirstSucceeding" Data="%$AAEditorState/TreeXtml/script%" ><Item value="%@Title%" /><Item value="%@ID%" /><Item value="%@Path%" /><Item value="%@Name%" /><Item t="xml.Tag" /></Title><RunOnClose t="xtml.UseParam" Param="RunOnOK" /></xtml></Component><Component id="OpenScriptEditor" type="action.Action"><Param name="Xtml" /><Param name="XtmlType" /><Param name="GlobalPreview" type="ui.Control" script="true" /><Param name="MainCircuit" type="ui.Action" script="true" /><Param name="Title" ><Default value="Script Editor" /></Param><Param name="RunOnClose" type="action.Action" script="true" /><xtml t="dialog.OpenDialog" ><Dialog t="dialog.Dialog" CloseOnEnter="false" CloseOnEsc="false" FullScreen="true" AlwaysLTR="true" Buttons="" Class="aaeditor" Title="%$Title%"><AutoFocus t="xtml_dt_tree.FindTreeTopInDialog" /><RunOnClose t="xtml.UseParam" Param="RunOnClose" /><Content t="ui.SectionsList" Class="aaeditor_top"><Var name="_XtmlDtTreeTimeCalculator" t="object.Object"/><Var name="_XtmlDtDialog" t="object.Object"><Method name="RunOnClose" t="xtml.UseParam" Param="RunOnClose" /></Var><Section t="ui.SectionListPage" Title="Script"><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="%$XtmlType%"><MainCircuit t="xtml.UseParam" Param="MainCircuit" /></Control></Section><Section t="ui.SectionListPage" Title="Local Preview"><Control t="ui.List" Class="xtml_editor_local_preview" ><Control t="ui.Text" /></Control></Section><Section t="ui.SectionListPage" Title="Global Preview"><Control t="ui.List" Class="xtml_editor_global_preview" ><Control t="xtml_dt_tree.ShowWhenNotSlow" ><Control t="data.MeasureCalculationTime" PutTimeInObject="%$_XtmlDtTreeTimeCalculator%" PutTimeInProperty="MainCircuitTime"><Calculation t="xtml.UseParam" Param="GlobalPreview" /></Control></Control></Control></Section><Style t="ui.HorizontalSplitter" IdForCookie="aaeditor"><Height t="ui.ScreenSize" Axis="height" Margin="100" AsHtmlString="true" /><TotalWidth t="ui.ScreenSize" Axis="width" Margin="100" /><DefaultWidths t="data.ListByCommas" List="320px,400px" /></Style></Content></Dialog></xtml></Component><Component id="ShowWhenNotSlow" type="ui.Control"><Param name="Control" type="ui.Control" script="true" /><xtml t="ui.List" Class="dowhennotslow" ><Control t="data.IfThenElse"><If t="yesno.GreaterThan" Item="%$_XtmlDtTreeTimeCalculator/MainCircuitTime%" Than="300" /><If1 t="yesno.NotEmpty" Value="%$_XtmlDtTreeTimeCalculator/MainCircuitTime%" Than="1" /><Then t="ui.Button" Text="Slow mode, click here to show preview" ><Style t="ui.ButtonAsHyperlink" /><OnClick t="action.RunActions" ><Action t="object.SetProperty" Object="%$_XtmlDtTreeTimeCalculator%" Property="MainCircuitTime" Value="" /><Action t="uiaction.Refresh" RunOn="up(.dowhennotslow)" /></OnClick></Then><Else t="xtml.UseParam" Param="Control" /></Control></xtml></Component><Component id="OpenPrimitivePopup" type="action.Action"><Param name="ParamXml"/><Param name="Enum" type="data.Boolean"/><xtml t="dialog.TogglePopup" WidthOption="by css class" AutoFocusOn=".fld_primitive_text_box" ReturnFocusTo1="%$_ElemsOfOperation%" PopupCssClass="xtml_dt_popup"><Var name="_Xtml" t="xtml_dt.ProfileProperty" Profile="%ParentXtml%" Param="%Param%"  /><Var name="Text" t="data.WritableText"><DefaultValue t="object.RunMethod" Method="AsPrimitive"/></Var><Var name="ContextCalculator" t="data.JustInTimeCalculation"><Content t="aaeditor.CalcLocalPreviewData"><MainCircuitRunner t="xtml_dt_tree.ShowWhenNotSlow" ><Control t="object.RunMethod" Method="RunMainCircuit" Object="%$_XtmlTreeObj%"/></MainCircuitRunner><State t="aaeditor.State" TreeXtml="%$AAEditorState/TreeXtml%"><SelectedInTree t="object.RunMethod" Method="ObjectForPreview" Object="%$_ItemsOfOperation%" Input="%$_ItemsOfOperation%"/></State></Content></Var><OnSuccess t="object.RunMethod" Method="Update"><Param name="Value" value="%$Text%"/></OnSuccess><OnElement t="data.Pipeline"><Item value="%$_ElemsOfOperation%"/><Item t="ui.DataFromJavaScript" Expression="jQuery(data).find(\'.aa_text\')"/></OnElement><Contents t="ui.List" ><Control t="aaeditor.EditPrimitiveTextBox" Data="%$Text%" OnlyPrimitive="%$OnlyPrimitive%" Param="%$ParamXml%" Simple="false"><Context t="object.RunMethod" Method="GetContent" Object="%$ContextCalculator%"/><OnSelectComponent t="action.RunActions"><Action t="dialog.ClosePopup"/><Action t="object.RunMethod" Method="Update" Object="%$_ItemsOfOperation%" Input="%$_ItemsOfOperation%"><Param name="Value" t="data.IfThenElse" If="%$_Enum%" Then="%%" Else="=%%"/></Action></OnSelectComponent></Control><Control1 t="ui.Image" Source="%$_Images%/openmenu.gif" CssStyle="cursor:pointer"><OnClick t="menu.OpenContextMenu"><Menu t="menu.ContextMenu"><Item t="menu.MenuItem" Text="Edit as Large Text ..." Image="%$_Images%/studio/r.gif"/></Menu></OnClick></Control1><Layout t="ui.Horizontal" VerticalAlign="middle" Padding="4px"/></Contents><OnPopupOpen t="action.RunActions" Remark="auto select non data" RunOn=".fld_primitive_text_box"><Action t="uiaction.SetText" Text="=" Remark="add = for empty value"><Condition t="yesno.And"><Item t="yesno.IsEmpty" Value="%$Text%"/><Item t="yesno.NotEmpty" Value="%$ParamXml/@type%"/><Item t="yesno.NotInList" Item="%$ParamXml/@type%"><List t="data.ListByCommas" List="data.Data,data.Data[],enum,dynamic_enum,dynamic_enum_multi,data.Boolean,data.Boolean[]"/></Item><Item t="yesno.Not" Of="%$OnlyPrimitive%"/></Condition></Action><Action t="uiaction.SetTextSelection" SelectionStart="1" Remark="select all but the ="><Condition t="text.StartsWith" Text="%$Text%" With="="/></Action><Action t="action.Switch"><Case Remark="component"><IfCondition t="text.StartsWith" Text="%$Text%" With="="/><Then t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate="="/></Case><Case Remark="enum"><IfCondition t="yesno.IsInList" Item="%$ParamXml/@type%"><List t="data.ListByCommas" List="enum,dynamic_enum,dynamic_enum_multi"/></IfCondition><Then t="field_aspect.TriggerSuggestionBoxPopup" TextToSimulate=""/></Case></Action></OnPopupOpen><OnCancel t="uiaction.Focus" RunOn="%$_ElemsOfOperation%"/></xtml></Component><Component id="SaveManager" type="data.Data" execution="native" /><Component id="SaveToServer" type="action.Action"><xtml t="server.CallServer" ><Call t="server.PostUrl" VarNameForResult="Result" Url="php/aaeditorsave.php"><PostData t="server.PostData" Name="contents" ><Value t="data.Pipeline" ><Item t="xml.WithChanges"><Xml t="xml.Xml"><updateServer><component fullid="" file=""/></updateServer></Xml><Change t="xml.Duplicate" Element="%component%" Items="%$_ModifiedComponents%" ><ChangeOnElement t="xml.MultiChange"><Var name="ComponentElement" t="xtml.ComponentDefinition" ID="%$InputForChanges%" /><Change t="xml.SetAttribute" AttributeName="fullid" Value="%%"/><Change t="xml.SetAttribute" AttributeName="file" Value="%$ComponentElement/../@file%"/><Change t="xml.AddChildren" CloneChildren="true" Children="%$ComponentElement%"/></ChangeOnElement></Change></Item><Item t="xml.XmlToText" PrettyPrint="true"/></Value></PostData></Call><OnSuccess t="action.RunActions" ><Action t="object.RunMethod" Method="Clean" ><Object t="xtml_dt_tree.SaveManager" /></Action></OnSuccess></xtml></Component><Component id="FindTreeTopInDialog" type="data.Data" execution="native" /><Component id="ComponentDef"><Param name="xtml" only_element="true" type="parent_type"/><Param name="type" type="dynamic_enum" essential="true"><Options t="xtml.AllTypes"/></Param><Param name="Param" type="inline[]" has_name="true"><Param name="name" essential="true" only_primitive="true"/><Param name="type" type="dynamic_enum" essential="true"><Options t="xtml.AllTypes"/></Param><Param name="description" essential="true" only_primitive="true"/><Param name="essential" type="data.Boolean" essential="true"/><Param name="Default" type="parent_type" only_element="true"/><Param name="script" type="data.Boolean"/><Param name="advanced" type="data.Boolean"/><Param name="Title" only_primitive="true"/><Param name="RunningInput" Description="for better preview in case of action/operation"/><Param name="FieldAspect" type="field.FieldAspect[]"/></Param><Param name="execution" type="enum"><value>native</value><value>xtml</value></Param><Param name="description" type="data.Boolean"/><Param name="hidden" type="data.Boolean"/><Param name="databind" type="data.Boolean"/><Param name="id" only_primitive="true"/><Param name="gallery"/><Param name="light" type="data.Boolean"/></Component><Component id="OpenXmlDialog" type="dialog.Dialog"><xtml t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="update xml" AutoFocus="XmlBox" AlwaysLTR="true"><Var name="XmlAsText" t="data.WritableText"><DefaultValue t="xml.XmlToText" Data="%Xml%" PrettyPrint="true"/></Var><Var name="DynamicContent" t="data.WritableText" DefaultValue="%DynamicContent%"/><Var name="Xtml" value="%ParentXtml%"/><Content t="ui.List"><Control t="ui.List"><Control t="ui.Button" Text="Insert Dynamic Value ..." Image="%$_Images%/add1616.gif"><Style t="ui.ButtonAsHyperlink"/><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Title="Insert Dynamic Value"><Content t="ui.Document"><Fields t="field.Field1" Title="Expression"><Control t="aaeditor.EditPrimitiveTextWithPreview" DisableLargeText="true" Simple="false"><Context t="aaeditor.CalcLocalPreviewData" ><MainCircuitRunner t="object.RunMethod" Method="RunMainCircuit" Object="%$_XtmlTreeObj%"/><State t="aaeditor.State"><TreeXtml value="%$_XtmlTreeObj/TopXtml%"/><SelectedInTree t="aaeditor.TreeItemData" Xtml="%$Xtml%"/></State></Context></Control></Fields></Content><DialogData t="data.WritableText"/><RunOnOK t="action.RunActions"><Action t="xmlui.InsertTextToCodeMirror" Text="%%" RunOn="updown(.dialog_box,.xmltext)"/><Action t="action.WriteValue" To="%$DynamicContent%" Value="true"/><Action t="uiaction.Refresh" RunOn=".fld_dynamic_content"/></RunOnOK></Dialog></OnClick></Control><Control t="field.ShowFieldControl" Class="fld_dynamic_content"><Field t="field.Field" FieldData="%$DynamicContent%" Title="Dynamic Content" ><Type t="field_aspect.Boolean" /></Field></Control><Layout t="ui.Horizontal" VerticalAlign="middle"/></Control><Control t="ui.Document"><Fields t="field.Fields"><Field1 t="field.Field1" FieldData="%$DynamicContent%" Title="Dynamic Content" ID="dynamic_content"><FieldAspect t="field_aspect.Boolean"/><FieldAspect t="field_aspect.Information" Title="Dynamic Content" Text="Can use \\% inside xml"/></Field1><Field t="field.Field1" FieldData="%$XmlAsText%" Title="Content"><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Control"><Control t="xmlui.CodeMirrorTextarea" Type="xml" AutoFocus="true" Data="%$XmlAsText%" Class="xmltext" Height="350px"><Width t="ui.ScreenSize" Axis="width" Margin="300" AsHtmlString="true"/></Control></FieldAspect></Field></Fields></Control><Control t="xml.Xml"/></Content><Validations t="ui.ValidationList"><Validation t="ui.Validation" Message="invalid xml: %$Error%"><Var name="Error" t="xml.XmlParsingError" Data="%$XmlAsText%"/><SuccessCondition t="yesno.IsEmpty" Value="%$Error%"/></Validation><Validation t="xmlui.CallUpdateOfCodeMirror" RunOn="updown(.dialog_box,.xmltext)"/></Validations><RunOnOK t="object.RunMethod" Method="OnOK"><Input t="object.Object" ><Property name="Xml" t="xml.TextToXml" Data="%$XmlAsText%"/><Property name="DynamicContent" value="%$DynamicContent%" /></Input></RunOnOK></Dialog></xtml></Component>  ?</xtml><xtml ns="xtml_dt_tree_usage"><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Tree"><Var name="Xtml" t="xml.Xml" DynamicContent=""><Control t="ui.Section" Title="Person" Collapsion="Not Collapses"><Var name="ID" value="id1" /><Control t="ui.Text" Text="name : %@name%"/><Control t="ui.Button"><OnClick t="uiaction.Alert" Text="text of alert"/><Text t="data.Pipeline"><Item t="xml.Xml"><people><person name="Homer"/><person name="John"/></people></Item></Text></Control>​          <Control t="ui.Text" Text="family name : %@family%"/><Control t="ui.Switch"/><ItemsLayout t="ui.LineBreak" IncludeSpacing="false"/></Control></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="ui.Control"><MainCircuit t="xtml.RunXtml" Xtml="%$Xtml%"><Input t="xml.Xml"><person name="homer"/></Input></MainCircuit></Control><ExpectedResult t="yesno.Contains"><Text value="Title = Person"/></ExpectedResult></Usage><Component id="ItemInTree" type="data.Data"><Param name="TopXtml"/><Param name="TwoLevelDown" type="data.Boolean"/><Param name="ParamNameToFilter"/><xtml t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$TopXtml%" Type="data.Data"/><Item t="object.RunMethod" Method="NextLevel" Object="%%" Input="%Items%"/><Item t="data.IfThenElse" If="%$TwoLevelDown%" Else="%%"><Then t="object.RunMethod" Method="NextLevel" Object="%%" Input="%Items%"/></Item><Item value="%Items%"/><Item t="yesno.PassesFilter"><Filter t="data.IfThenElse" Then="true"><If t="yesno.IsEmpty" Value="%$ParamNameToFilter%"/><Else t="text.StartsWith" With="%$ParamNameToFilter%"><Text t="object.RunMethod" Method="Text"/></Else></Filter></Item></xtml></Component><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Simple" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TwoLevelDown="true" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="new value"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" DynamicContent=""><xtml t="data.Pipeline"><Item t="text.Text" Text="new value"/></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.DefaultValue" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TwoLevelDown="true" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="new value"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="new value"/></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Top" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" /></xtml></Var><Data t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$TopXtml%" Type="data.Data"/><Item value="%Items%" /></Data><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=data.Math"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Math"><Item t="text.Text" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.PrimitiveToComponent" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TwoLevelDown="true" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=data.Pipeline"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Pipeline" /></Item></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Array" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item t="text.Text" Text="def"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[1]"/><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="new value"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item value="new value"/><Item t="text.Text" Text="def"/></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Array.Component" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item t="text.Text" Text="def"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[2]"/><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=data.Pipeline"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item t="data.Pipeline" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.ArrayExtra" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[+]"/><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="new value"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item value="new value" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.ArrayExtra.Component" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[+]"/><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=text.Text"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item t="text.Text" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Xml" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Action t="object.RunMethod" Method="Update" ><Param name="Xml" t="data.Pipeline"><Item t="xml.Xml"><xml t="data.Math" Expression="1+2" /></Item><Item t="xml.XmlToText" /></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Math" Expression="1+2" /></Item></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.PrimitiveStartsWithEqual" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=7+2"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="=7+2" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.PrimitiveStartsWithEqual2" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=aaa"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="=aaa" /></xtml></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="homer" /><Item t="text.Text"><Text t="data.Math" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Result t="object.RunMethod" Method="AsPrimitive"  /><ExpectedResult t="yesno.EqualsTo" To="homer" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.Component" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Math" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Result t="object.RunMethod" Method="AsPrimitive"  /><ExpectedResult t="yesno.EqualsTo" To="=data.Math" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.Value" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text value="marge" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Result t="object.RunMethod" Method="AsPrimitive"  /><ExpectedResult t="yesno.EqualsTo" To="marge" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.AttributeBeforeElement" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="homer" ><Text t="data.Math" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true" /><Result t="object.RunMethod" Method="AsPrimitive"  /><ExpectedResult t="yesno.EqualsTo" To="homer" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.ArrayValueBeforeType" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" value="homer" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Result t="object.RunMethod" Method="AsPrimitive"  /><ExpectedResult t="yesno.EqualsTo" To="homer" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.Top"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text value="marge"/></Item></xtml></Var><Data t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$TopXtml%" Type="data.Data"/><Item value="%Items%"/></Data><Result t="object.RunMethod" Method="AsPrimitive" /><ExpectedResult t="yesno.EqualsTo" To="=data.Pipeline"/></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.AsPrimitive.ArrayExtra"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline" /></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Result t="object.RunMethod" Method="AsPrimitive" /><ExpectedResult t="yesno.EqualsTo" /></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Update.Primitive.Undo" ><Var name="TopXtml" t="xml.Xml"><xtml t="text.Text" Text="abc"/></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="object.RunMethod" Method="Update"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Value" value="=data.Pipeline"/></RunOnControl><ExpectedResult t="yesno.EqualsTo" To="Text=abc"><Var name="Oper" value="%$_UndoData/UndoOperations[1]%" /><Data value="%$Oper/Path%=%$Oper/Component%%$Oper/Primitive%" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Update.Component.Undo" ><Var name="TopXtml" t="xml.Xml"><xtml t="text.Text"><Text t="data.Math" Expression="1+2" /></xtml></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="object.RunMethod" Method="Update"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Value" value="=data.Pipeline"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Text="/><Text value="data.Math" /><Text value="1+2" /><Var name="Oper" value="%$_UndoData/UndoOperations[1]%" /><AllText value="%$Oper/Path%=%$Oper/Component%%$Oper/Primitive%" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Update.ArrayElement.Undo" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="data.Math" Expression="1+2" /></xtml></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="object.RunMethod" Method="Update"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Value" value="=data.Pipeline"/></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="Item[1]="/><Text value="data.Math" /><Text value="1+2" /><Var name="Oper" value="%$_UndoData/UndoOperations[1]%" /><AllText value="%$Oper/Path%=%$Oper/Component%%$Oper/Primitive%" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Top.Undo" IsTest="false"><Var name="TopXtml" t="xml.Xml"><xtml t="text.Text"><Text t="data.Math" Expression="1+2" /></xtml></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="action.RunActions"><Action t="object.RunMethod" Method="Update"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[0];" /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Value" value="abc"/></Action><Action t="object.RunMethod" Method="Undo"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[0];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /></Action></RunOnControl><ExpectedResult t="yesno.NotContains"><Text value="abc"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Undo" ><Var name="TopXtml" t="xml.Xml"><xtml t="text.Text"><Text t="data.Math" Expression="1+2" /></xtml></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="action.RunActions"><Action t="object.RunMethod" Method="Update"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Value" value="=data.Pipeline"/></Action><Action t="object.RunMethod" Method="Undo"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /></Action></RunOnControl><ExpectedResult t="yesno.Contains"><Text value="1+2"/></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.CopyPaste" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/></xtml></Var><Var name="Item1" t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[1]" /><Var name="Item2" t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[+]" /><Action t="action.RunActions"><Action t="object.RunMethod" Method="Copy" Data="%$Item1%" /><Action t="object.RunMethod" Method="Paste" Data="%$Item2%" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" Text="abc"/><Item t="text.Text" Text="abc"/></xtml></To></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Move" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /><Item t="data.Math" Expression="1+2" /></xtml></Var><Var name="_UndoData" t="xtml_dt_tree.UndoData" /><Control t="xtml_dt_tree.Tree" TopXtml="%$TopXtml%" Type="ui.Control"/><RunOnControl t="action.RunActions"><Action t="object.RunMethod" Method="Move"  ><Var name="_ElemsOfOperation" t="ui.DataFromJavaScript" Expression="jQuery(control).find(\'.aa_item\')[1];"   /><Var name="Item" t="ui.DataFromJavaScript" Expression="context.vars._ElemsOfOperation[0].ItemData[0];"  /><Data value="%$Item%" /><Param name="Direction" value="down"/></Action></RunOnControl><ExpectedResult t="yesno.EqualsTo" Data="%$TopXtml%"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="data.Math" Expression="1+2" /><Item t="text.Text" Text="abc" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.OpenScriptEditor" IsTest="false" ><Var name="Xtml" t="xml.Xml" ><Control t="ui.Section" Title="Hi Homer"><Control t="ui.Text" Text="hello"/><Control t="ui.Button"/><Control t="ui.Text" ><Text t="data.Math" Expression="10+20" /></Control></Control></Var><Action t="xtml_dt_tree.OpenScriptEditor" Xtml="%$Xtml%" XtmlType="data.Data" Title="Script Editor"><MainCircuit t="xtml.RunXtml" Xtml="%$Xtml%" ><Input t="xml.Xml"><person name="Homer" Age="32" /></Input></MainCircuit><GlobalPreview t="xtml.RunXtml" Xtml="%$Xtml%" /></Action><CleanAfter1 t="dialog.CloseDialog" /><ExpectedResult t="yesno.Contains"><Data t="dialog.TopDialogContent" /><Text value="Section" /><Text value="30" /></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.OpenComponent" IsTest="false" ><Var name="Component" t="xtml.ComponentDefinition" ID="debugui.OpenComponent" /><Action t="dialog.OpenDialog"><Dialog t="dialog.Dialog" CloseOnEnter="false" CloseOnEsc="false" AlwaysLTR="true" Buttons="" Class="aaeditor" Title="%$Component/@id%" Width="400px"><Content t="xtml_dt_tree.Tree" TopXtml="%$Component/xtml%" Type="%$Component/@type%" CssStyle="height:450px"/></Dialog></Action></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="Param" t="xml.Xml"><Param name="Text" /></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button" Text="" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.DefaultSimple" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="Param" t="xml.Xml"><Param name="Text" ><Default value="abc" /></Param></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button" Text="abc" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.DefaultComponent" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="Param" t="xml.Xml"><Param name="Text" ><Default t="text.Text" Text="abc" /></Param></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button"><Text t="text.Text" Text="abc" /></Item></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.Simple" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="SimpleParam" value="Condition" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button" Condition="" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.Simple.DoesNotDeleteOldValue" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" Data="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="SimpleParam" value="Data" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button" Data="abc" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Delete" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Action t="object.RunMethod" Method="Delete"  /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="text.Text" /></xtml></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Math" Expression="100 * %@salary%" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  ><Param name="AddTextSummary" value="true" /></Result><ExpectedResult t="yesno.EqualsTo" To="Text = Math: 100 * \\%@salary\\%" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text.Component" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Math"><Expression t="text.MatchesRegex" /></Text></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  ><Param name="AddTextSummary" value="true" /></Result><ExpectedResult t="yesno.EqualsTo" To="Text = Math: MatchesRegex" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text.Remark" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Math" Remark="calc first"><Expression t="text.MatchesRegex" /></Text></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  ><Param name="AddTextSummary" value="true" /></Result><ExpectedResult t="yesno.EqualsTo" To="Text = Math: calc first" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text.Array" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text"><Text t="data.Pipeline" ><Item value="100" /><Item t="text.Text" /><Item value="%@value%" /><Item value="%@age%" /></Text></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  ><Param name="AddTextSummary" value="true" /></Result><ExpectedResult t="yesno.EqualsTo" To="Text = Pipeline: 100, Text, \\%@value\\%, ..." /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Image" IsTest="false"><Var name="TopXtml" t="xml.Xml"><xtml t="ui.List"><Control t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Result t="object.RunMethod" Method="Image"  /><ExpectedResult t="yesno.EqualsTo" To="%$_Images%/studio/app.gif" /></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.NextLevel.ShowingNonParamValues"><Var name="Xtml" t="xml.Xml" ><Control t="ui.Section" Title="Hi Homer" Data="hi"><Condition t="yesno.NotEquals" /><Control value="abc" t="ui.Text" /></Control></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="ui.Control"/><ExpectedResult t="yesno.Contains"><Text value="Data = hi"/><Text value="Condition" /><Text value = "Equals" /></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Var"><Var name="Xtml" t="xml.Xml" ><Control t="ui.Section" ><Var name="var1" value="abc" /><Var name="var2" t="text.Text" /><Var /><Condition t="yesno.NotEquals" /><Control value="abc" t="ui.Text" /></Control></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="ui.Control"/><ExpectedResult t="yesno.Contains"><Text value="var1"/><Text value="abc"/><Text value="var2"/><Text value="Text"/><Text value="Var"/></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Var.NextLevelOfEmptyVar" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  /><ExpectedResult t="yesno.Contains"><Text value="name" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Var.NextLevel" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var name="var1" t="data.Same"/></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Result t="object.RunMethod" Method="Text"  /><ExpectedResult t="yesno.Contains"><Text value="name" /></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.var.CannotDeleteName" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var name="abc" t="text.Text" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" TwoLevelDown="true"/><Action t="object.RunMethod" Method="Delete"  /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Var name="abc" t="text.Text" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Var.UpdateKeepsName" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var name="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update"  ><Param name="Value" value="new value"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Var name="abc" value="new value"/></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Var.UpdateWithComponentKeepsName" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var name="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update"  ><Param name="Value" value="=text.Text"/></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Var name="abc" t="text.Text" /></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.Variable" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item t="ui.Button" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="Param" t="xml.Xml"><Param name="Var" /></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="ui.Button" ><Var /></Item></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.AddParam.Variable.ForPrimitiveArrayItem" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item value="abc" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="AddParam"  ><Param name="Param" t="xml.Xml"><Param name="Var" /></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item value="abc" ><Var /></Item></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.UpdateKeepsOldVariablesInArray" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Item value="a"><Var name="var1" value="abc" /></Item></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Action t="object.RunMethod" Method="Update"  ><Param name="Value" value="new value" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item value="new value"><Var name="var1" value="abc" /></Item></xtml></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Image.StaticBoolean" ><Var name="TopXtml" t="xml.Xml"><xtml t="text.FindInText" Pattern="abc" UseRegex="false" /></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="UseRegex"/><Result t="object.RunMethod" Method="Image"  /><ExpectedResult t="yesno.Contains"><Text value="false.bmp"/></ExpectedResult>​   </Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.DoubleClick.StaticBoolean" Result="%$TopXtml%"><Var name="TopXtml" t="xml.Xml"><xtml t="text.FindInText" Pattern="abc" UseRegex="false" /></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="UseRegex"/><Action t="object.RunMethod" Method="DoubleClick"  /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="text.FindInText" Pattern="abc" UseRegex="true" /></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text.StaticBoolean" ><Var name="TopXtml" t="xml.Xml"><xtml t="text.FindInText" Pattern="abc" UseRegex="false" /></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="UseRegex"/><Result t="object.RunMethod" Method="Text"  /><ExpectedResult t="yesno.EqualsTo" To="UseRegex" /></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Tree.Component" ><Var name="Xtml" t="xml.Xml"><Component id="MyComponent" type="ui.Control" hidden="true" execution="xtml"><Param name="Value" type="ui.Text" essential="true"><Default value="%%"/></Param><xtml t="ui.Text" Text="name : %@name%"/></Component></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="ui.Control"/><ExpectedResult t="yesno.Contains"><Text value="xtml"/><Text value="Text"/><Text value="Param"/><Text value="Value"/></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Text.CaseWithRemark" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Switch"><Case Remark="try1" /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Case[1]"/><Result t="object.RunMethod" Method="Text"  ><Param name="AddTextSummary" value="true" /></Result><ExpectedResult t="yesno.EqualsTo" To="Case[1] : try1" /></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Tree.Xml" IsTest="false"><Var name="Xtml" t="xml.Xml" ><Text t="data.Pipeline"><Item t="xml.Xml"><company employee="" /></Item></Text></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="data.Data"><MainCircuit t="xtml.RunXtml" Xtml="%$Xtml%" ><Input t="xml.Xml"><person name="homer"/></Input></MainCircuit></Control><ExpectedResult value="true" /></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.XmlOfTop" Result="%$Script%"><Var name="Script" t="xml.Xml"><xtml t="data.Pipeline"><Item t="text.Text" Text="abc" /></xtml></Var><Data t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$Script/*%" Type="data.Data"/><Item value="%Items%" /></Data><Action t="object.RunMethod" Method="Update" ><Param name="Xml" t="data.Pipeline"><Item t="xml.Xml"><xml t="data.Math" Expression="1+2" /></Item><Item t="xml.XmlToText" /></Param></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml" ><xtml t="data.Pipeline"><Item t="data.Math" Expression="1+2" /></xtml></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.ParamsToAdd.Component" ><Var name="TopXtml" t="xml.Xml" ><Component id="MyComponent" /></Var><Data t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$TopXtml%" /><Item value="%Items%" /></Data><Result t="data.Pipeline"><Item t="object.RunMethod" Method="ParamsToAdd"  /><Aggregator t="text.Concat" ItemText="%@name%" /></Result><ExpectedResult t="yesno.Contains" ><Text value="execution" /><Text value="hidden" /></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.Image.Component" ><Var name="Xtml" t="xml.Xml" ><Component id="MyComponent" /></Var><Data t="data.Pipeline"><Item t="xtml_dt_tree.TreeDataItems" TopXtml="%$Xtml%" /><Item value="%Items%" /></Data><Result t="object.RunMethod" Method="Image"  /><ExpectedResult t="yesno.EqualsTo" To="%$_Images%/studio/plugin1616.png" /></Usage><Usage t="usage.DataUsage" Of="xtml_dt_tree.ParamsToAdd.Component.Param"><Var name="TopXtml" t="xml.Xml"><Component id="MyComponent"><Param name="param"/></Component></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Param" /><Result t="text.Concat" ItemText="%@name%" Separator=","><Items t="object.RunMethod" Method="ParamsToAdd"/></Result><ExpectedResult t="yesno.Contains" IgnoreOrder="true"><Text value="essential"/><Text value="Default"/><Text value="advanced"/></ExpectedResult></Usage><Usage1 t="usage.DataUsage" Of="xtml_dt_tree.NextLevel.Case" IsTest="false"><Var name="TopXtml" t="xml.Xml" ><xtml t="data.Switch" ><Case /></xtml></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" /><Result t="text.Concat" ><Items t="object.RunMethod" Method="NextLevel" /><ItemText t="object.RunMethod" Method="Text" /></Result><ExpectedResult t="yesno.Contains" ><Text value="If" /><Text value="Then" /></ExpectedResult></Usage1><Usage t="action.ActionUsage" Of="xtml_dt_tree.DoubleClick.Component.Param" Result="%$TopXtml%" ><Var name="TopXtml" t="xml.Xml"><Component id="MyComponent"/></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Param[+]"/><Action t="object.RunMethod" Method="DoubleClick" /><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><Component id="MyComponent"><Param/></Component></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.Update.Component.OnlyElement" Result="%$TopXtml%" ><Var name="TopXtml" t="xml.Xml"><Component id="MyComponent"/></Var><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="xtml"/><Action t="object.RunMethod" Method="Update" ><Param name="Value" value="=abc" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><Component id="MyComponent"><xtml value="=abc" /></Component></To></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.ComponentDef" IsTest="false"><Var name="Xtml" t="xtml.ComponentDefinition" ID="xtml_dt_tree.ComponentDef" /><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="ui.Control" /><ExpectedResult value="true" /></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.More.Primitive" Result="%$TopXtml%" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Math" Expression="1+2" /></Var><Var name="MoreComponent" t="xml.Xml"><component id="data.List" itemsParam="Item" /></Var><Action t="object.RunMethod" Method="More" ><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Expression"/><Param name="MoreComponent" value="%$MoreComponent%" /></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><xtml t="data.Math"><Expression t="data.List"><Item value="1+2" /></Expression></xtml></To></ExpectedResult></Usage><Usage t="action.ActionUsage" Of="xtml_dt_tree.More" Result="%$TopXtml%" ><Var name="TopXtml" t="xml.Xml"><xtml t="data.Pipeline"><Var name="var1" t="text.Text" Text="hi" /><Item t="text.Text" Text="hello" /></xtml></Var><Var name="MoreComponent" t="xml.Xml"><component id="data.List" itemsParam="Item" /></Var><Action t="action.RunActions"><Action t="object.RunMethod" Method="More" ><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Var[var1]"/><Param name="MoreComponent" value="%$MoreComponent%" /></Action><Action t="object.RunMethod" Method="More" ><Data t="xtml_dt_tree_usage.ItemInTree" TopXtml="%$TopXtml%" ParamNameToFilter="Item[1]"/><Param name="MoreComponent" value="%$MoreComponent%" /></Action></Action><ExpectedResult t="yesno.EqualsTo"><To t="xml.Xml"><xtml t="data.Pipeline"><Var name="var1" t="data.List"><Item t="text.Text" Text="hi" /></Var><Item t="data.List"><Item t="text.Text" Text="hello" /></Item></xtml></To></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt_tree.Tree.GoToPreviousPath" ><Var name="Xtml" t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="xtml_dt_tree.Tree" ToXtml="true"/><Item value="%Operations/Operation[@ID=\'EditAsXml\']%"/></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%"/><RunBefore t="action.WriteToCookie" Cookie="aaeditor_path" Value="Action/OnUpdate/Param[1]"/><ExpectedResult t="yesno.Contains" RunOn=".aa_selected_itemtext" Data="%$ControlElement%"><Text value="Param[1] ="/></ExpectedResult></Usage><Usage1 t="ui.ControlUsage" Of="xtml_dt_tree.Tree.GoToPreviousPath.ComponentDef" ><Var name="Xtml" t="data.Pipeline"><Item t="xtml.ComponentDefinition" ID="xtml_dt_tree.Tree" ToXtml="true"/><Item value="%Operations/Operation[@ID=\'EditAsXml\']%"/></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%"/><RunBefore t="action.WriteToCookie" Cookie="aaeditor_path" Value="Action/OnUpdate" Value1="Action/ShowXmlDialog/xtml/Dialog"/><ExpectedResult t="yesno.Contains" RunOn=".aa_selected_itemtext" Data="%$ControlElement%"><Text value="Dialog ="/></ExpectedResult></Usage1><Component id="Test1"><Param name="Param1" essential="true"><Default value="def" /></Param></Component><Usage t="ui.ControlUsage" Of="xtml_dt_tree.NextLevel.HideEssentialWithDefValue"><Var name="Xtml" t="xml.Xml" ><Xtml t="xtml_dt_tree_usage.Test1" /></Var><Control t="xtml_dt_tree.Tree" TopXtml="%$Xtml%" Type="data.Data"/><ExpectedResult t="yesno.NotContains"><Text value="Param1"/></ExpectedResult></Usage></xtml><xtml ns="xtml_dt_usage"><Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields"><Var name="Xtml" t="xml.Xml"><Page t="bart.Page" ID="metadata" ContentType="metadata" Resource="MetaData"><Control t="ui.List" ><Var name="Input" t="xml.Xml"><person name="homer"/></Var><Var name="Person" value="Homer" /><Var name="ListVariable" t="data.Pipeline"><Item t="xml.Xml"><mypeople><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></mypeople></Item><Item value="%*%" /></Var><Data value="%$Input%" /><Control t="ui.Section" Title="hello %@name%"><Style t="ui.CollapsableSectionBox"/></Control></Control></Page></Var><Var name="Xtml2" t="xml.Xml"><Control t="xtml_dt_usage.MySampleComponentEnums" ContentType="customer"/></Var><Control t="ui.Section"><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml/Control/Control%"/><Fields t="xtml_dt.ParamsAsFields" Component="ui.Section" Params="Title,Style"/></Control><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml2%"/><Fields t="xtml_dt.ParamsAsFields" Component="xtml_dt_usage.MySampleComponentEnums"/></Control><Control t="ui.Document"><Item t="data_items.Items"><Items t="xml.Xml"><FieldAspect t="field_aspect.Description"/></Items></Item><Fields t="xtml_dt.ParamsAsFields" Component="field_aspect.Description"/></Control></Control><ExpectedResult t="yesno.Contains"><Text value="Title"/><Text value="Description"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields.SectionStyle" IsTest="false"><Var name="Xtml" t="xml.Xml"><Page t="bart.Page" ID="metadata" ContentType="metadata" Resource="MetaData"><Control t="ui.List"><Var name="Input" t="xml.Xml"><person name="homer"/></Var><Var name="Person" value="Homer"/><Var name="ListVariable" t="data.Pipeline"><Item t="xml.Xml"><mypeople><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></mypeople></Item><Item value="%*%"/></Var><Data value="%$Input%"/><Control t="ui.Section" Title="hello %@name%"><Style t="ui.CollapsableSectionBox"/></Control></Control></Page></Var><Var name="Xtml3" t="xml.Xml"><Page t="bart.Page" ID="metadata" ContentType="metadata" Resource="MetaData"><Field t="field.XmlGroup" Title="Details" ID="Details" ID__Manual="" Path=""><FieldAspect t="field_aspect.Section" Underline="true" ExpandCollapse="" ExpandedByDefault="true" HideTitle=""><Style t="style.ThickTitle1"/></FieldAspect></Field></Page></Var><Control t="ui.Section"><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml3/Field/FieldAspect%"/><Fields t="xtml_dt.ParamsAsFields" Component="field_aspect.Section"/></Control><Control t="ui.Document"><Item t="data_items.Items"><Items t="xml.Xml"><FieldAspect t="field_aspect.Description"/></Items></Item><Fields t="xtml_dt.ParamsAsFields" Component="field_aspect.Description"/></Control></Control><ExpectedResult t="yesno.Contains"><Text value="Title"/><Text value="Description"/></ExpectedResult></Usage>​<Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields.Primitive"><Var name="Xtml" t="xml.Xml" DynamicContent=""><Page t="bart.Page" ID="metadata" ContentType="metadata" Resource="MetaData"><Control t="ui.List"><Var name="Input" t="xml.Xml"><person name="homer"/></Var><Var name="Person" value="Homer"/><Var name="ListVariable" t="data.Pipeline"><Item t="xml.Xml"><mypeople><person name="Homer" lastName="Simpson"/><person name="Marge" lastName="Simpson"/></mypeople></Item><Item value="%*%"/></Var><Data value="%$Input%"/><Control t="ui.Section"><Title t="data.JavaScript" Code="function(item,context) { return \'Person\'; }"/><Style t="ui.CollapsableSectionBox"/></Control></Control></Page></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml/Control/Control%"/><Fields t="xtml_dt.ParamsAsFields" Component="ui.Section" Params="Title,CollaptionCookie"/></Control><ExpectedResult t="yesno.Contains"><Text value="Title"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields.Primitive.DefaultValue"><Var name="Xtml" t="xml.Xml" DynamicContent=""><Page t="bart.Page" ID="metadata" ContentType="metadata" Resource="MetaData"><Control t="ui.List"><Data t="text.Split"/></Control></Page></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml/Control/Data%"/><Fields t="xtml_dt.ParamsAsFields" Component="text.Split" Params="Separator"/></Control><ExpectedResult t="yesno.Contains"><Text value=","/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.PTSelectorField"><Var name="Xtml" t="xml.Xml"><Control t="ui.Section" Title="hello" /></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml%" /><Fields t="xtml_dt.PTSelectorField" Type="ui.Control" /></Control><ExpectedResult t="yesno.Contains"><Text value="Section"/><Text value="Title"/><Text value="hello"/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields.AdvancedFields"><Var name="Xtml" t="xml.Xml"><Control t="bart_resource.Query"/></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml%"/><Fields t="xtml_dt.ParamsAsFields" Component="bart_resource.Query" Params=""/></Control><ExpectedResult t="yesno.And"><Item t="yesno.Contains"><Text value="Content Type"/><Text value="more"/></Item><Item t="yesno.NotContains"><Text value="Item Type Name"/></Item></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.ParamsAsFields.AdvancedFields.Show"><Var name="Xtml" t="xml.Xml"><Control t="bart_resource.Query" /></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml%" /><Fields t="xtml_dt.ParamsAsFields" Component="bart_resource.Query" Params=""/></Control><RunOnControl t="uiaction.FireEvent" Event="mousedown" RunOn=".xtmldt_showmore" /><ExpectedResult t="yesno.Contains"><Text value="Item Type Name" /><Text value="less" /></ExpectedResult></Usage><Component id="MySampleComponentEnums"><Param name="Hobbies" type="dynamic_enum_multi"><Options t="data.ListByCommas" List="swimming,tennis,rock climbing" /></Param><Param name="Color" type="enum" Options="blue,yellow,red" /><Param name="ContentType" type="dynamic_enum"><Options t="data.ListByCommas" List="order,customer,contact" /><OptionLabel t="text.Capitalize" Mode="capital each word" /></Param><xtml t="ui.Text" Text="I like %$Hobbies%" /></Component><!-- Deprecated :-) --><Component id="SampleContext"><xtml t="data.Struct"><Item Name="Input"><Value t="xml.Xml"><person name="Homer" lastName="Simpson"><child name="Bart" age="12" gender="male" /><child name="Lisa" age="10" gender="female" /><child name="Maggy" age="3" gender="female" /></person></Value></Item><Item Name="context"><Value t="xtml.ManualContext"><Variables t="data.List"><Item t="data.Struct"><Item Name="Name" Value="Company" /><Item Name="Value"><Value t="xml.Xml"><company name="Microsoft"><contact name="John Gare" phone="137923" role="Manager" /><contact name="Jimm Hanoy" phone="712021" role="Secretary" /></company></Value></Item></Item><Item t="data.Struct"><Item Name="Name" Value="Cities" /><Item Name="Value"><Value t="xml.Xml"><cities><city name="New York" /><city name="London" /><city name="Paris" /></cities></Value></Item></Item></Variables></Value></Item></xtml></Component><Usage t="action.ActionUsage" Of="xtml_dt.CleanXtmlOfParams"><Data t="xml.Xml"><Resource t="bart_resource.Node" ResourceID="MyContact" ContentType="contact" ID="mine"><Feature t="bart_resource.DoOnSave" /></Resource></Data><Action t="action.RunActions"><Action t="action.WriteValue" To="%@t%" Value="bart_resource.Query" /><Action t="xtml_dt.CleanXtmlOfParams" PrevComponent="bart_resource.Node" /></Action><ExpectedResult t="yesno.EqualsTo" ><To t="xml.Xml"><Resource t="bart_resource.Query" ResourceID="MyContact" ContentType="contact"><Feature t="bart_resource.DoOnSave" /></Resource></To></ExpectedResult></Usage><Usage t="usage.DataUsage" Of="xtml_dt.XtmlTextSummary"><Var name="Xtml1" t="xml.Xml"><FieldAspect t="field_aspect.RichText" Height="50px" Width="600px"><Buttons t="richtext.Office"/></FieldAspect></Var><Var name="Xtml2" t="xml.Xml"><FieldAspect t="field_aspect.WritableControl"><Control t="ui.Text" Text="not in summary"/></FieldAspect></Var><Result value="%$Exp1% ; %$Exp2%"><Var name="Exp1" t="xtml_dt.XtmlTextSummary" Xtml="%$Xtml1%"/><Var name="Exp2" t="xtml_dt.XtmlTextSummary" Xtml="%$Xtml2%"/></Result><ExpectedResult t="yesno.EqualsTo"><To value="Height: 50px&lt;br&gt;Buttons: Office ; Control: ..."/></ExpectedResult></Usage><Usage t="ui.ControlUsage" Of="xtml_dt.Picklist.clear"><Var name="Xtml" t="xml.Xml"><Control t="ui.Section" Title="hello %@name%"><Style t="ui.CollapsableSectionBox"/></Control></Var><Control t="ui.Document"><Item t="data_items.Items" Items="%$Xtml%"/><Fields t="xtml_dt.ParamsAsFields" Component="ui.Section" Params="Title,Style"/></Control><RunOnControl t="action.RunActions"><Action t="uiaction.FireEvent" Event="mousedown" RunOn=".fld_Style" /><Action t="uiaction.Click" RunOn=".Clear" /></RunOnControl><ExpectedResult t="yesno.NotContains" Text="Collapsable" /></Usage></xtml></xtml> '));
