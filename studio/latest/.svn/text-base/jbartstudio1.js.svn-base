/*
 * jBart - Packaged at 08-10-2012-11-10
 * Copyright (c) 2011 ArtwareSoft Ltd
 * The software is distributed under the GPL license
 * For commercial use we advice to use our commercial license
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

*/
jBartPreloader=function(c){var a=document.body;if(!a){a=document.head}var b=function(d){var f=document.createElement("script");f.setAttribute("type","text/javascript");f.setAttribute("src",d);a.appendChild(f)};if(!navigator.userAgent.toLowerCase().match(/android [12]/)){c()}else{window.jBartFinished=c;b("http://llamalab.com/js/minified/Array.js","js");jQuery.ajax({url:"http://llamalab.com/js/minified/XPath.js",dataType:"script",success:function(){var d=document.createElement("script");d.innerHTML="jBartFinished();";a.appendChild(d)}})}};window.jBartWidgets=window.jBartWidgets||{vars:{}};var jBart={vars:{},api:{},utils:{},dialogs:{},bart:{},db:{}};var ajaxart={debugmode:false,trace_level:2,xtmls_to_trace:[],traces:[],components:[],componentsXtmlCache:[],usages:[],types:[],plugins:[],gcs:{},log_str:"",loading_objects:0,logs:{},default_values:[],inPreviewMode:false,stack_trace:[],build_version:"ART_NOW",xml:{},cookies:{},ui:{},yesno:{},dialog:{openPopups:[]},xmlsToMonitor:[],lookup_cache:{},occurrence_cache:{},unique_number:1,action:{},runningTimers:{},runDelayed:[],base_lib:"//jbartlib.appspot.com/lib",base_images:"//jbartlib.appspot.com/images",STRING_WITH_EXP:/%[^ ,;\(\)]/,NOT_EXP:/^[ ,;\(\)]/,run:function(N,c,h,P,K,v){try{var F=N;if(ajaxart.debugmode&&!ajaxart.isArray(N)){ajaxart.log("run called with input not an array","error");return[]}if(c==null){return[]}if(c.nodeType&&c.nodeType==2){h=c.nodeName;c=ajaxart.xml.parentNode(c)}if(h!=""&&aa_hasAttribute(c,h)){if(c.getAttribute("Break")==h){}var E=ajaxart.dynamicText(N,c.getAttribute(h),P,null,v);if(c.getAttribute("Trace")==h){ajaxart.trace(c,N,E,P,h)}aa_try_probe_test_attribute(c,h,N,E,P,F);return E}var Q=ajaxart.fieldscript(c,h,false);if(Q==null){return[]}if(Q.nodeType==2){return ajaxart.run(N,Q,"",P,K,v)}var M=[];var x=Q.firstChild;while(x!=null){if(x.nodeType==1){M.push(x)}x=x.nextSibling}ajaxart.stack_trace.push(Q);var s="";var k="";var n=Q.attributes;for(var I=0;I<n.length;I++){var D=n.item(I).nodeName;if(D=="t"){}else{if(D=="Condition"&&!aa_bool(N,n.item(I),"",P)){ajaxart.stack_trace.pop();return[]}else{if(D=="Data"){N=[aa_first(N,n.item(I),"",P)];if(N[0]==null){N=[]}}else{if(D=="RunOn"){P=ajaxart.calcParamsForRunOn(P,ajaxart.run(N,n.item(I),"",P))}else{if(D=="Class"){s=aa_text(N,n.item(I),"",P)}else{if(D=="CssStyle"){k=aa_text(N,n.item(I),"",P)}else{if(D=="NameForTrace"){ajaxart.log(n.item(I),"actions trace")}}}}}}}}var r=true;for(var z in M){var w=M[z];var G=w.tagName;if(G=="Condition"&&!aa_bool(N,w,"",P)){ajaxart.stack_trace.pop();return[]}else{if(G=="Data"){N=[aa_first(N,w,"",P)];if(N[0]==null){N=[]}}else{if(G=="RunOn"){P=ajaxart.calcParamsForRunOn(P,ajaxart.run(N,w,"",P))}else{if(G=="Class"){s=aa_text(N,w,"",P)}else{if(G=="CssStyle"){k=aa_text(N,w,"",P)}else{if(G=="Var"){if(r){P=ajaxart.clone_context(P);r=false}var t=w.getAttribute("name");if(t=="ControlElement"){var y={};ajaxart.setVariable(P,t,y)}var O=null;if(!aa_hasAttribute(w,"t")&&!aa_hasAttribute(w,"value")){O=N}else{O=ajaxart.run(N,w,"",P)}if(t=="ControlElement"){y.controlElement=O}ajaxart.setVariable(P,t,O)}}}}}}}var J=Q.getAttribute("t")||"";if(J==""){if(aa_hasAttribute(Q,"value")){if(Q.getAttribute("Break")=="true"){}var E=ajaxart.dynamicText(N,Q.getAttribute("value"),P,null,v);if(aa_hasAttribute(Q,"Trace")){ajaxart.trace(c,N,E,P,h,Q.getAttribute("Trace"))}for(I in ajaxart.xtmls_to_trace){if(Q==ajaxart.xtmls_to_trace[I].xtml){ajaxart.fill_trace_result(ajaxart.xtmls_to_trace[I].results,N,E,P,F)}}ajaxart.stack_trace.pop();return E}else{for(var g=Q.firstChild;g;g=g.nextSibling){if(g.nodeType==4&&g.nodeValue){return ajaxart.dynamicText(N,g.nodeValue,P,null,v)}}}ajaxart.stack_trace.pop();return[]}var a=aa_componentById(J);if(!a){ajaxart.stack_trace.pop();return[]}if(a.getAttribute("execution")=="native"){var p=(K&&K.length>0)?J+"_"+K:J;var q=aa_componentById(p,"gcs");if(!q){ajaxart.stack_trace.pop();return[]}if(Q.getAttribute("Break")=="true"){}if(ajaxart.profiling_of_globals==null){E=q(Q,N,P)}else{var B=new Date().getTime();E=q(Q,N,P);ajaxart.write_profiling_at_end(B,J)}}else{var u=ajaxart.componentsXtmlCache[J];if(u==null){u=ajaxart.childElem(a,"xtml");ajaxart.componentsXtmlCache[J]=u}if(u==null){ajaxart.log("missing implementation for component "+J,"error")}var b=ajaxart.childElems(a,"Param");var o=ajaxart.newContext();o.vars=P.vars;o.componentContext=P;o.counter=(P.counter!=null)?P.counter+1:1;if(o.counter>100){ajaxart.log("endless loop");return[]}for(var I=0;I<b.length;I++){var f=b[I];var m=f.getAttribute("name");var l;if(aa_hasAttribute(f,"type")&&(""+f.getAttribute("type")).indexOf("[]")>0){var l=[];var d=ajaxart.childElems(Q,m);if(f.getAttribute("script")!="true"){for(var H=0;H<d.length;H++){ajaxart.concat(l,ajaxart.run(N,d[H],"",P))}}else{l={isArrayParamScript:true,script:Q,field:m,context:P}}}else{if(f.getAttribute("script")!="true"){l=ajaxart.run(N,Q,m,P)}else{l={isParamScript:true};l.script=ajaxart.fieldscript(Q,m,true,o);l.compiled=ajaxart.compile(l.script,"",P,f.getAttribute("paramVars"))}}ajaxart.setParameterVariable(o,m,l)}if(a.getAttribute("useCallerScript")=="true"){ajaxart.setVariable(o,"_CallerScript",[Q])}if(ajaxart.profiling_of_globals==null){E=ajaxart.run(N,u,"",o,K)}else{var B=new Date().getTime();E=ajaxart.run(N,u,"",o,K);ajaxart.write_profiling_at_end(B,J)}}if(E==null){E=[]}if(s!=""){if(ajaxart.ishtml(E)){for(var w in E){jQuery(E[w]).addClass(s)}}}if(k!=""){for(var w in E){if(ajaxart.ishtml(E[w])){aa_setCssText(E[w],k)}}}if(a.getAttribute("databind")=="true"){ajaxart.databind(E,N,P,Q,F)}try{if(Q.nodeType==1&&E.length>0&&ajaxart.isObject(E[0])){if(a.getAttribute("dtsupport")!="false"){E[0].XtmlSource=[{isObject:true,script:Q,input:N,context:P}]}}}catch(L){}if(aa_hasAttribute(Q,"Trace")){ajaxart.trace(Q,N,E,P,null,Q.getAttribute("Trace"))}if(aa_hasAttribute(Q,"Name")){var A=(""+Q.getAttribute("Name")).replace(/ /g,"_");for(var w in E){if(ajaxart.ishtml(E[w])){E[w].setAttribute("id",A)}}}for(I in ajaxart.xtmls_to_trace){if(Q==ajaxart.xtmls_to_trace[I].xtml){ajaxart.fill_trace_result(ajaxart.xtmls_to_trace[I].results,N,E,P,F)}}ajaxart.stack_trace.pop();return E}catch(L){var C="";if(c){var Q=ajaxart.fieldscript(c,h,false)||c;if(c.getAttribute("t")){C="t="+c.getAttribute("t")+" - "}}ajaxart.logException(L,C);return[]}},compile_text:function(b,g,c){var d=ajaxart.fieldscript(b,g,true);if(d==null){return function(){return""}}if(d.nodeType==2){var f=d.nodeValue;if(f=="%%"){return function(h){return aa_totext(h)}}if(!f.match(ajaxart.STRING_WITH_EXP)){return function(){return f}}var a=f.match(/^%@([^%]+)%$/);if(a){return function(h){return h[0].getAttribute(a[1])||""}}}return function(k,h){return aa_text(k,b,g,h)}},compile:function(u,a,c,t,k,g){if(ajaxart.xtmls_to_trace.length>0||u==null){return null}if(!u){return}var l=ajaxart.fieldscript(u,a,true);if(l==null){return function(v){return[]}}var p=null;if(l.nodeType==1){var s=0;if(aa_hasAttribute(l,"name")){s=1}if(aa_hasAttribute(l,"paramVars")){s=1}if(l.attributes.length==2+s&&l.getAttribute("t")=="xtml.UseParam"&&l.firstChild==null){var f=l.getAttribute("Param");if(aa_hasAttribute(l,"Param")){var d=c.params[f];if(!d||!d.script||ajaxart.isArray(d)){return null}if(d.compiled=="same"){return"same"}return function(v,x){var w={};w.vars=x.vars;w.params=c.componentContext.params;w.componentContext=c.componentContext.componentContext;if(d.compiled==null){return ajaxart.run(v,d.script,"",w)}else{return d.compiled(v,w)}}}return null}if(l.attributes.length<=3+s&&l.getAttribute("t")=="xtml.RunXtml"&&l.firstChild==null){return aa_compile(l)}if(l.getAttribute("t")=="uiaspect.JavaScriptControl"){var n=aa_text([],l,"FunctionName",c);if(n!=""&&window[n]==null){ajaxart.log("function "+n+" does not exist","error");return[]}return function(w,v){var x=jQuery(aa_text(w,l,"Html",v));if(window[n]==null){return x}else{return[window[n](w,v,x)]}}}if(l.attributes.length>1+s||l.firstChild!=null){return null}if(l.getAttribute("t")=="data.Same"){return"same"}p=aa_hasAttribute(l,"value")?l.getAttribute("value"):null}else{if(l.nodeType==2){p=l.nodeValue}}if(p==null){return null}if(p=="%%"){return"same"}if(!p.match(ajaxart.STRING_WITH_EXP)){return function(w,v){return[p]}}var m=p.split("%");if(m.length==3){if(m[1].charAt(m[1].length-1)=="\\"||m[2].charAt(m[2].length-1)=="\\"){return null}if(p.charAt(0)=="%"&&p.charAt(p.length-1)=="%"){if(p.charAt(1)=="@"){if(p.indexOf("{")!=-1){return}var q=p.substring(2,p.length-1);if(k){var h=function(v){return function(A,y){var w=[];for(var x=0;x<A.length;x++){var z=A[0];if(typeof(z.nodeType)=="undefined"||z.nodeType!=1){continue}if(aa_hasAttribute(z,v)){w.push(p)}}return w}};return h(q)}var h=function(v){return function(B,z){var x=[];for(var y=0;y<B.length;y++){var A=B[0];if(typeof(A.nodeType)=="undefined"||A.nodeType!=1){continue}var C=A.attributes;for(var w=0;w<C.length;w++){if(C.item(w).nodeName==v){x.push(C.item(w))}}}return x}};return h(q)}return null}if(!g){var r=m[0];var b=m[2];var o=m[1];if(o.length==0){var h=function(v,w){return function(y,x){return[v+ajaxart.totext_array(y)+w]}};return h(r,b)}}}return null},fieldscript:function(c,d,b){if(!d){return c}if(b&&aa_hasAttribute(c,d)){return ajaxart.xml.attributeObject(c,d)}var a=ajaxart.childElem(c,d);if(!a){a=aa_get_default_value(c.getAttribute("t"),d)}return a},splitCommasForAggregatorParams:function(k){if(!k){return[]}var c=[];var l=false,a=false,f=0;for(var g=0;g<k.length;g++){if(k[g]=='"'){a=!a}else{if(k[g]=="'"){l=!l}else{if(k[g]==","&&!l&&!a){var b=k.substring(f,g);c.push(b);f=g+1}}}}c.push(k.substring(f));for(var d=0;d<c.length;d++){var h=c[d].match(/^'([^']*)'$/);if(h){c[d]=h[1]}h=c[d].match(/^"([^"]*)"$/);if(h){c[d]=h[1]}}return c},runNativeHelperNoParams:function(f,a,h,c){var b=a.getAttribute("t");var d=aa_componentById(b);if(!d){return[]}var g=ajaxart.xml.xpath(d,'NativeHelper[@name="'+h+'"]');if(g.length>0){return ajaxart.run(f,g[0],"",c)}ajaxart.log("calling runNativeHelper for none existing helper - "+h);return[]},runNativeHelper:function(k,p,s,b){var f=ajaxart.clone_context(b);f.params=[];for(h in b.params){f.params[h]=b.params[h]}var m=p;var o=p.getAttribute("t");var a=aa_componentById(o);if(!a){return[]}var c=ajaxart.childElems(a,"Param");f.componentContext=b;for(var h=0;h<c.length;h++){var r=c[h];var l=aa_hasAttribute(r,"name")?r.getAttribute("name"):null;var n;if(aa_hasAttribute(r,"type")&&(""+r.getAttribute("type")).indexOf("[]")>0){var n=[];var d=ajaxart.childElems(m,l);if(r.getAttribute("script")!="true"){for(var g=0;g<d.length;g++){ajaxart.concat(n,ajaxart.run(k,d[g],"",f))}}else{n={isArrayParamScript:true,script:p,field:l,context:f}}}else{if(r.getAttribute("script")!="true"){n=ajaxart.run(k,m,l,f)}else{n={isParamScript:true};n.script=ajaxart.fieldscript(m,l,true,f);n.compiled=ajaxart.compile(n.script,"",f,r.getAttribute("paramVars"))}}ajaxart.setParameterVariable(f,l,n)}var q=ajaxart.xml.xpath(a,'NativeHelper[@name="'+s+'"]');if(q.length>0){return ajaxart.run(k,q[0],"",f)}ajaxart.log("calling runNativeHelper for none existing helper - "+s);return[]},dynamicTextWithAggregator:function(q,m,a){var h=m.match(/=([a-zA-Z]+)[(]([^)]*)[)]/);if(!h){return""}var n=h[1];var c=h[2];var d=ajaxart.splitCommasForAggregatorParams(c);if(d.length==0){return""}var p="data";if(ajaxart.components[p][n]==null){p="text"}if(ajaxart.components[p][n]==null){return""}var l="";var g=ajaxart.dynamicText([q],"%"+d[0]+"%",a,[q]);for(var f=1;f<d.length;f++){var k=ajaxart.xml.xpath(ajaxart.components[p][n],"Param[@short='true']/@name");if(k.length<=f-1){break}var b=d[f].replace("{","%").replace("}","%");l+=" "+ajaxart.totext_item(k[f-1])+'="'+b+'" '}var o='<Script t="'+p+"."+n+'"'+l+" />";return aa_text(g,ajaxart.parsexml(o,"aggregator"),"",a)},dynamicText:function(u,n,d,o,q,g){function a(y,x){var v=[];for(var w=0;w<y.length;w++){v=v.concat(x(y[w]))}return v}function m(y,B){function z(D){var C=D.match(/'[^']*'/)||D.match(/"[^"]*"/);if(C){return D.slice(1,-1)}return""+y[D]}var v=B.match(/([^!=]*)(=|!=|==)(.*)/);if(!v){return false}var A=v[2];var x=z(v[1]);var w=z(v[3]);return(A=="="&&x==w)||(A=="=="&&x==w)||(A=="!="&&x!=w);return false}function t(w){var D=false,v=false;if(w[0]=="="){return a(u,function(F){return ajaxart.dynamicTextWithAggregator(F,w,d)})}if(w.indexOf("{")!=-1&&w.match(/{[^}]*}/)){w=ajaxart.totext(ajaxart.dynamicText(u,w.replace(/(^|[^\\]){/g,"$1%").replace(/(^|[^\\])}/g,"$1%").replace(/\\({|})/g,"$1"),d))}var z=w.split("/");var E=u;for(var x=0;x<z.length;x++){var C=z[x];var B=null;if(C.indexOf("[")!=-1){B=C.match(/([^\[]*)(\[[^\]]*\])/);if(B){C=B[1]}}if(C[0]=="!"){D=true;C=C.substr(1)}if(C[0]==">"){v=true;C=C.substr(1)}if(C[0]=="$"){E=ajaxart.getVariable(d,C.substr(1))}else{if(E[0]&&E[0].nodeType&&E[0].nodeType==1&&!D&&w.indexOf("/!")==-1){var A=z.slice(x).join("/");return a(E,function(F){return ajaxart.xml.xpath(F,A)})}else{if(C==""){E=E}else{E=a(E,function(H){if(H.nodeType){return ajaxart.xml.xpath(H,C,D)}var F=H[C];if(ajaxart.isObject(H)){if(C==".."&&H.ParentNode){return[H.ParentNode()]}var G=x==z.length-1;if(G&&v&&aa_JsonByRef){return[new aa_JsonByRef(H,C)]}if(F==null&&D){F=H[C]={}}}if(F==null){return[]}return ajaxart.isArray(F)?F:[F]})}}}if(B){var y=parseInt(B[2].slice(1,-1));if(isNaN(y)){E=a(E,function(F){if(F.nodeType){return ajaxart.xml.xpath(F,"self::*"+B[2],D)}return m(F,B[2].slice(1,-1))?[F]:[]})}else{E=E.slice(y-1,y)}}}return E}if(!n.match(ajaxart.STRING_WITH_EXP)){return[n.replace(/\\%/g,"%")]}if(n=="%%"){return u}var p=n.match(/^%\$([a-zA-Z_0-9]+)%$/);if(p){return ajaxart.getVariable(d,p[1])}var b=n.split("%");var f=[],r=0;while(r<b.length){var c=b[r];while(c.substr(-1)==="\\"&&r<b.length-1){c=c.slice(0,-1)+"%"+b[++r]}f.push(c);r++}if(f.length==2){return[n]}if(f.length==3&&f[0]==""&&f[2]==""){try{return t(f[1])}catch(s){}}var h=[],k=false;for(var r=0;r<f.length;r++){var c=f[r];if(!k){h.push(c);k=true}else{if(c.match(ajaxart.NOT_EXP)){h.push("%"+c);k=true}else{try{var l=ajaxart.totext_array(t(c));if(q){if(isNaN(parseFloat(l))){l="'"+l.replace(/'/g,"\\'")+"'"}}if(g){l=ajaxart.xmlescape(l)}h.push(l)}catch(s){}k=false}}}return[h.join("")]},newContext:function(){return{vars:{_Images:[aa_base_images()],_Lib:[aa_base_lib()]},params:[],componentContext:null}},clone_context:function(a){var b=ajaxart.newContext();for(i in a.vars){b.vars[i]=a.vars[i]}b.params=a.params;b.componentContext=a.componentContext;b._This=a._This;return b},setVariable:function(a,d,c){if(d==null){return}try{a.vars[""+d]=c}catch(b){ajaxart.log("cannot set variable"+d,"error")}},setParameterVariable:function(a,d,c){if(d==null){return}try{a.params[""+d]=c}catch(b){ajaxart.log("cannot set param "+d,"error")}},getVariable:function(a,d){if(!d){return[]}d=""+d;var c=a.params&&a.params[d];if(c){if(c.isParamScript){if(c.script){return[c.script]}else{return[]}}return c}if(d=="_This"&&a._This){return[a._This]}c=a.vars&&a.vars[d];if(c){return c}c=ajaxart.serverData&&ajaxart.serverData[d];if(c){return c}var b=a.vars._GlobalVars&&a.vars._GlobalVars[0][d];if("function"==typeof b){c=b(d,a)}if(c){return c}return[]},istrue:function(a){if(!a){return false}return(ajaxart.totext(a)=="true")},tobool_array:function(a){if(a==null){}return ajaxart.totext_array(a)=="true"},totext_array:function(a){if(a==null||a.length==0){return""}return ajaxart.totext_item(a[0])},totext:function(a){if(ajaxart.isArray(a)){return ajaxart.totext_array(a)}return ajaxart.totext_item(a)},totext_item:function(a){if(!a){return""}if(typeof a=="string"){return a}if(a.nodeType&&a.nodeType==2){return a.nodeValue}if(ajaxart.ishtml_item(a)){return ajaxart.xml2text(a)}if(ajaxart.isxml_item(a)){if(a.nodeValue!=null){return a.nodeValue}for(var b=a.firstChild;b;b=b.nextSibling){if(b.nodeType==4&&b.nodeValue){return b.nodeValue}else{if(b.nodeType==1){return""}}}if(a.text!=null){return a.text}return a.textContent}if(a.GetValue){return""+a.GetValue()}return""+a},subprofiles:function(a,b){return ajaxart.childElems(a,b)},runsubprofiles:function(f,b,k,a,c){var l=ajaxart.childElems(b,k);var d=[];for(var g=0;g<l.length;g++){if(ajaxart.debugmode){ajaxart.concat(d,ajaxart.run(f,l[g],"",a))}else{try{ajaxart.concat(d,ajaxart.run(f,l[g],"",a))}catch(h){if(c!=true){throw (h)}ajaxart.logException(h)}}}return d},each:function(a,c){for(var b=0;b<a.length;b++){c(a[b],b)}},load_xtml_content:function(b,a){if(a==null){alert("could not load xtml "+b);console.error("could not load xtml "+b)}if(a.getAttribute("package")=="true"){var c=ajaxart.childElems(a,"*");ajaxart.each(c,function(f){ajaxart.load_xtml_content(b,f)});return}plugin_name=a.getAttribute("ns");if(!plugin_name||plugin_name==""){plugin_name=a.getAttribute("id")}if(!plugin_name||plugin_name==""){ajaxart.log("xtml file does not have ns or id attribute in the main xtml element. Tag: "+aa_tag(a),"error");ajaxart.log();return}a.setAttribute("file",b);var d=ajaxart.childElems(a,"*");ajaxart.each(d,function(f){switch(f.tagName){case"Component":var g=f.getAttribute("id");if(ajaxart.components[plugin_name]==null){ajaxart.components[plugin_name]=[]}ajaxart.components[plugin_name][g]=f;aa_load_inplace_gc(f,plugin_name);break;case"C":var g=f.getAttribute("id");if(ajaxart.components[plugin_name]==null){ajaxart.components[plugin_name]=[]}ajaxart.components[plugin_name][g]=f;break;case"Usage":if(ajaxart.usages[plugin_name]==null){ajaxart.usages[plugin_name]=[]}ajaxart.usages[plugin_name].push(f);break;case"Plugin":if(ajaxart.plugins[plugin_name]==null){ajaxart.plugins[plugin_name]=[]}ajaxart.plugins[plugin_name]=f;break;case"Type":var g=f.getAttribute("id");ajaxart.types[plugin_name+"_"+g]=f;break}})},parsexml:function(c,a,o,h,q){if(ajaxart.isxml(c)){if(c.nodeType==9){return c.firstChild}return c}a=a||"";if(typeof c!="string"){return c}var b=h?"warning":"error";var n;try{c=c.replace(/&#xa;&#xd;/g,"&#xa;").replace(/&#xd;&#xa;/g,"&#xa;").replace(/&#10;&#13;/g,"&#xa;").replace(/&#13;&#10;/g,"&#xa;");if(c.indexOf("<")>0){c=c.substring(c.indexOf("<"))}if(document.implementation&&document.implementation.createDocument){var m=new DOMParser();n=m.parseFromString(c,"text/xml");var g=null;var l=n.getElementsByTagName("parsererror");if(l.length>0){g="Error parsing xml";try{g=l[0].childNodes.item(1).innerHTML}catch(k){g="Error parsing xml"}}if(n.documentElement.nodeName=="parsererror"){g=n.documentElement.childNodes.item(0).nodeValue;if(g.indexOf("Location")>0){g=g.substring(0,g.indexOf("Location"))+g.substring(g.lastIndexOf("\n"))}}if(g!=null){ajaxart.log("Error parsing xml file "+a+" : "+g+",xml:"+ajaxart.xmlescape(c.substring(0)+"..."),b);if(o!=null){o.push(g)}return null}}else{if(window.ActiveXObject){n=new ActiveXObject("MSXML2.DOMDocument");var f=n.loadXML(c);if(!f){var p=n.parseError.reason+n.parseError.srcText;if(o){o.push(p)}ajaxart.log("Error parsing xml file "+a+" : "+p+",xml:"+ajaxart.xmlescape(c.substring(0)+"..."),b);return null}}}}catch(k){ajaxart.log("Error parsing xml file: "+k+ajaxart.xmlescape(c.substring(0,50)+"..."),b);return null}var d=n.firstChild;while(d.nodeType!=1&&d.nextSibling){d=d.nextSibling}d=aa_importNode(d,q);return d},childElem:function(a,c){if(a==null||a.childNodes==null){return null}var b=a.firstChild;while(b){if(b.nodeType==1){if(c=="*"){return b}if(b.tagName==c){return b}}b=b.nextSibling}return null},childElems:function(b,d){var a=[];if(b==null||b.childNodes==null){return a}var c=b.firstChild;while(c){if(c.nodeType==1){if(d=="*"){a.push(c)}if(c.tagName==d){a.push(c)}}c=c.nextSibling}return a},childElemByAttrValue:function(c,f,b,g){if(c==null||c.childNodes==null){return null}for(var a=0;a<c.childNodes.length;a++){var d=c.childNodes.item(a);if(d.nodeType!=1){continue}if(f=="*"||d.tagName==f){if(d.getAttribute(b)==g){return d}}}return null},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},isxml_array:function(a){if(a.length==0){return false}return ajaxart.isxml_item(a[0])},isxml_item:function(a){if(a==null){return false}return(a.nodeType!=null)},isxml:function(a){if(ajaxart.isArray(a)){return ajaxart.isxml_array(a)}return ajaxart.isxml_item(a)},isObject_array:function(a){return a.length>0&&ajaxart.isObject(a[0])},isObject:function(b){if(!b||b.nodeType){return false}var a=Object.prototype.toString.call(b);if(a==="[object Array]"&&b.length>0){return ajaxart.isObject(b[0])}return a==="[object Object]"},ishtml_array:function(a){if(a.length==0){return false}return ajaxart.ishtml_item(a[0])},ishtml_item:function(a){if(!a||!a.ownerDocument||!a.nodeType){return false}return a.body||a.ownerDocument.body},ishtml:function(a){if(!a){return false}if(ajaxart.isArray(a)&&a.length>0){return ajaxart.ishtml_item(a[0])}else{return ajaxart.ishtml_item(a)}},urlparam:function(d){var c=window.location.href;if(c.indexOf("#")>-1){c=c.substr(0,c.indexOf("#"))}if(c.indexOf("?")>-1){var b=c.substr(c.indexOf("?")+1);var f=b.split("&");for(var a=0;a<f.length;a++){var g=f[a].match(/([^=]*)=(.*)/);if(g&&g[1]==d){return g[2]&&unescape(g[2]).replace(/_AMP_/g,"&")}}}return""},xtmls:null,xml:{append:function(b,d,a){try{if(!ajaxart.isxml(b)){ajaxart.log("cannot append to non-xml parent","error");return}if(d!=null&&d.nodeType==1&&b!=null){d=aa_importNode(d,b);if(a&&b.firstChild){b.insertBefore(d,b.firstChild)}else{b.appendChild(d)}return d}}catch(c){ajaxart.logException(c)}},attributeObject:function(c,b){if(c==null||c.childNodes==null){return null}for(var a=0;a<c.attributes.length;a++){if(c.attributes.item(a).nodeName==b){return c.attributes.item(a)}}return null}},trycatch:function(b,a){if(ajaxart.debugmode){return b()}try{return b()}catch(c){if(c=="endless loop"){throw c}return a(c)}}};function aa_componentById(g,f){if(!g){return null}f=f||"components";var b=g.indexOf(".");var d=g.substring(0,b);var c=g.substr(b+1);var a=ajaxart[f][d]&&ajaxart[f][d][c];if(!a){ajaxart.log("Can not find : "+g+" in "+f,"error")}return a}function aa_get_default_value(b,d){if(!b){return null}var a=ajaxart.default_values[b+"__"+d];if(!a){var c=aa_componentById(b);var f=ajaxart.childElemByAttrValue(c,"Param","name",d);if(f&&aa_hasAttribute(f,"Default")){a=ajaxart.xml.attributeObject(f,"Default")}else{a=ajaxart.childElem(f,"Default")}field_script=ajaxart.default_values[b+"__"+d]=a||"none"}if(a==="none"){return null}return a}function aa_compile(c){var a=c.getAttribute("Xtml");if(c.getAttribute("Field")!=null){return null}if(a==null||a.length<4){return null}if(a.charAt(0)=="%"&&a.charAt(1)=="$"){var b=a.indexOf("/");if(b==-1){return null}if(a.split("/").length!=2){return null}var g=a.substring(2,b);var f=a.substring(b+1,a.length-1);var d=function(k,h){return function(n,m){if(c.getAttribute("Input")!=null){n=ajaxart.dynamicText(n,c.getAttribute("Input"),m)}var o=ajaxart.getVariable(m,k);if(o==null||!ajaxart.isObject_array(o)){return ajaxart.run(n,c,"",m)}var l=o[0][h];if(l==null){return[]}if(l.compiled=="same"){return n}var p=ajaxart.newContext();if(l.context!=null){p.params=l.context.params;p.componentContext=l.context.componentContext}p.vars=m.vars;if(l.objectForMethod){p._This=l.objectForMethod[0]}if(l.compiled==null){return ajaxart.run(n,l.script,"",p)}else{return l.compiled(n,p)}}};return d(g,f)}return null}function ajaxart_runcompiled_text(f,c,b,d,a){if(f=="same"){return ajaxart.totext_array(c)}if(f==null){return aa_text(c,b,d,a)}else{return ajaxart.totext_array(f(c,a))}}function ajaxart_runcompiled_bool(compiledFunc,data,profile,field,context,empty_value_is_true){var text_val;if(compiledFunc=="same"){text_val=ajaxart.totext_array(data)}if(compiledFunc==null){return aa_bool(data,profile,field,context,empty_value_is_true)}else{text_val=ajaxart.totext_array(compiledFunc(data,context))}if(text_val==""){return(empty_value_is_true)?true:false}if(text_val=="false"){return false}if(text_val=="true"){return true}if(!isNaN(text_val)){return false}var boolean_result=false;text_to_eval="if ("+text_val+") boolean_result=true;";try{eval(text_to_eval)}catch(e){ajaxart.log("Failed to evaluate boolean expression: "+text_val+","+e.message+"\n script :"+aa_xtml_path(profile,"id",true),"warning")}return boolean_result}function aa_totext(a){if(typeof(a)=="string"){return a}if(a==null||a.length==0){return""}return ajaxart.totext_item(a[0])}function aa_tobool(a){if(a==null||a.length==0){return false}if(ajaxart.totext_array(a)=="true"){return true}return false}function aa_frombool(a){if(a){return["true"]}return[]}function aa_paramExists(c,d,a){var b=ajaxart.fieldscript(c,d,true);if(b==null){return false}if(b.nodeType==1&&b.getAttribute("t")==""){return false}if(b.nodeType==1&&!aa_hasAttribute(b,"t")){return false}if(a&&c.getAttribute(d)==""){return false}return true}function aa_first(c,b,d,f,g){var a=ajaxart.run(c,b,d,f,g);if(a.length==0){return null}return a[0]}function aa_text(c,a,d,f,g,b){if(b){return ajaxart.totext(ajaxart.run(c,a,d,f,g,b))}return ajaxart.totext_array(ajaxart.run(c,a,d,f,g,b))}function aa_int(c,b,d,f,g){var a=ajaxart.run(c,b,d,f,g);return parseInt(ajaxart.totext_array(a))}function aa_float(c,b,d,f,g){var a=ajaxart.run(c,b,d,f,g);return parseFloat(ajaxart.totext_array(a))}function aa_bool(data,script,field,params,method,empty_value_is_true){var result=aa_text(data,script,field,params,method,true);if(result==""){return(empty_value_is_true)?true:false}if(result=="false"){return false}if(result=="true"){return true}if(!isNaN(result)){return false}var boolean_result=false;text_to_eval="if ("+result+") boolean_result=true;";try{eval(text_to_eval)}catch(e){ajaxart.log("Failed to evaluate boolean expression: "+result+","+e.message+"\n script :"+aa_xtml_path(script,"id",true),"warning")}return boolean_result}function aa_tag(a){return a.tagName}function aa_hasAttribute(b,a){return b.getAttribute(a)!=null}function aa_importNode(a,b){if(b==null){return a}if(b.ownerDocument!=a.ownerDocument&&b.ownerDocument.importNode!=undefined){return b.ownerDocument.importNode(a,true)}return a}function aa_gcs(b,a){if(!ajaxart.gcs[b]){ajaxart.gcs[b]=a}else{var b=ajaxart.gcs[b];for(var c in a){b[c]=a[c]}}}function aa_extend(c,a){for(var b in a){c[b]=a[b]}return c}function aa_handleHttpError(c,a,b){try{var d="HTTP error. url: "+a.url+" status: "+c.statusText;ajaxart.log(d,"error")}catch(c){}}aa_extend(ajaxart,{load_usage_plugin:function(b,a){if(a==null){a="plugins/"+b+"/"+b+"_usage.xtml"}},load_plugin:function(b,a){if(a==null){a="plugins/"+b+"/"+b+".xtml"}ajaxart.loading_objects++;jQuery.ajax({type:"GET",url:a,success:function(d){var c=ajaxart.parsexml(d,a);ajaxart.load_xtml_content(a,c);ajaxart.object_finished_loading()},error:function(c){aa_handleHttpError(c,this);ajaxart.log("failed loading plugin "+a+","+c.message,"error");ajaxart.object_finished_loading()}})},load_xtml:function(a){jQuery.ajax({url:a,cache:false,async:false,success:function(c){var b=ajaxart.parsexml(c,a);ajaxart.load_xtml_content(a,b)},error:function(b){aa_handleHttpError(b,this);ajaxart.log("failed loading xtml file "+a+","+b.message,"error")}})},load_server_data_inner:function(b){var a=b.varname;ajaxart.loading_objects++;var g=function(h){if(h&&!ajaxart.isxml(h)){h=ajaxart.ajaxart_clean_ns(h)}var k=ajaxart.parsexml(h,a);if(k!=null){while(k!=null&&k.nodeType!=1){k=k.nextSibling}if(k==null){ajaxart.serverData[a]=[]}else{if(aa_tag(k).toLowerCase()=="envelope"){k=ajaxart.body_contents_of_soap_envelope(k)}ajaxart.serverData[a]=[k]}}ajaxart.object_finished_loading()};var f=function(k,m,l){ajaxart.log("failed loading server data "+a+","+l);var h=ajaxart.childElemByAttrValue(ajaxart.xtmls,"serverData","varName",a);if(h!=null){h.setAttribute("status","loaded")}};options={url:b.url,type:"GET",success:g,error:f,cache:false};if(b.dataType){options.dataType=b.dataType}if(typeof(b.postData)!="undefined"){options.type="POST";options.data=b.postData}if(typeof(b.contentType)!="undefined"){options.contentType=b.contentType}try{var c=jQuery.ajax(options)}catch(d){jQuery("#loading_log").append("cannot load data of "+b.url)}},});var ajaxart_altPressed=false;function aa_register_document_events(){if(jBart.vars.document_events_registered){return}jBart.vars.document_events_registered=true;jQuery(document).keydown(function(b){if(b.keyCode==18){ajaxart_altPressed=true}if(b.keyCode==192&&b.ctrlKey&&!b.shiftKey){ajaxart.inPreviewMode=false;if(ajaxart.gcs.debugui){aa_run_component("debugui.OpenDebugUi",[],ajaxart.newContext())}}if(b.keyCode==192&&b.ctrlKey&&b.shiftKey){aa_run_component("debugui.OpenComponent",[],ajaxart.newContext())}if(b.keyCode==8){var a=(typeof(b.target)=="undefined")?b.srcElement:b.target;if(a.tagName.toLowerCase()!="input"&&a.tagName.toLowerCase()!="textarea"){ajaxart_stop_event_propogation(b);return false}}if(b.keyCode==88&&ajaxart_altPressed&&ajaxart_devmode==true){var a=(typeof(b.target)=="undefined")?b.srcElement:b.target;ajaxart.runComponent("xtml_dt.GlobalOpenAAEditor",[a])}if(b.keyCode==48&&b.ctrlKey&&ajaxart_devmode==true){var a=(typeof(b.target)=="undefined")?b.srcElement:b.target;ajaxart.runComponent("xtml_dt.CssCustomize",[a])}});jQuery(document).keyup(function(a){ajaxart_altPressed=false})}aa_extend(ajaxart,{start:function(b,f,c,d,a,g){jQuery(document).ready(function(){ajaxart.ready(function(){if(ajaxart.urlparam("debugmode")=="true"){ajaxart.debugmode=true}if(ajaxart.isChrome){jQuery("body").addClass("chrome")}var l=ajaxart.parsexml(c);if(f==null){f=[""]}var k=ajaxart.newContext();if(g!=null){ajaxart.setVariable(k,"Language",g)}var h=ajaxart.run(f,l,"",k);var n=jQuery(b).addClass("ajaxart ajaxart_topmost "+ajaxart.deviceCssClass);ajaxart.databind([n[0]],f,k,l,f);if(n.length>0&&h.length>0){n[0].appendChild(h[0])}aa_element_attached(h[0]);aa_register_document_events();var m=jQuery("#ajaxart_loading");if(m.length>0&&!m[0].IsUsed){m.hide()}},d,a)})},ready:function(d,b,a){ajaxart.ready_func=d;if((typeof(b)=="undefined"||b==null||b.length==0)&&(a==null||a.length==0)&&ajaxart.loading_objects==0){d();return}if(b!=null){for(var c=0;c<b.length;c++){ajaxart.load_server_data_inner(b[c])}}if(a!=null){for(var c=0;c<a.length;c++){ajaxart.load_plugin("",a[c])}}},load_server_data:function(a,b){if(a.length==0){b()}else{ajaxart.ready(b,a)}},object_finished_loading:function(){var a=jQuery("#ajaxart_loading");if(a.length>0){a.html(a.html()+".")}ajaxart.loading_objects--;if(ajaxart.loading_objects==0&&ajaxart.ready_func!=null){ajaxart.ready_func()}}});function aa_try_probe_test_attribute(a,g,f,b,c,d){for(i in ajaxart.xtmls_to_trace){if(ajaxart.xtmls_to_trace[i].xtml.nodeType==2&&ajaxart.xtmls_to_trace[i].xtml.nodeName==g){if(ajaxart.xml.parentNode(ajaxart.xtmls_to_trace[i].xtml)==a){ajaxart.fill_trace_result(ajaxart.xtmls_to_trace[i].results,f,b,c,d)}}}}function aa_index_of_element(b){for(var a=0,c=b;c=c.previousSibling;++a){}return a}function aa_xtml_path(a){var b=[];while(a&&a.nodeType!=9&&a.tagName!="Component"){if(a.nodeType==1){var c=a.getAttribute("id")||a.getAttribute("ns")||a.getAttribute("Name")||a.getAttribute("Of")||(""+aa_index_of_element(a));b.push(aa_tag(a)+"["+c+"]")}else{if(a.nodeType==2){b.push("@"+a.name)}}a=a.parentNode}if(a&&a.nodeType==1){b.push(a.getAttribute("id")||a.getAttribute("ns")+":/")}return b.reverse().join("/")}function aa_st(){var a="";var b="";for(var c=0;c<ajaxart.stack_trace.length;c++){var d=aa_xtml_path(ajaxart.stack_trace[c],"id",true).split("@id='");if(d.length>1){comp=d[1].split("'")[0]}else{comp=d[0]}if(b==comp){continue}a+=comp+",";b=comp}return a}aa_extend(ajaxart,{logException:function(b,a){var c=b.message||b;if(b.stack){c+="\n"+b.stack}if(a){c=a+" "+c}ajaxart.log(c,"error")},log:function(b,a){if(a==null){a=""}var d=a+" - "+b;ajaxart.log_str+=d+"\n\r";if(a==""){a="general"}if(ajaxart.logs[a]==null){ajaxart.logs[a]=[]}ajaxart.logs[a].push(b);if(a=="error"&&ajaxart.debugmode){}jQuery("#ajaxart_log").append(jQuery("<div class='aa_log "+a+"'>"+ajaxart.xmlescape(d)+"</div>"));try{jBart.trigger(jBart,"log",{message:b,type:a})}catch(c){}},tryShortXmlWithTag:function(a,b){if(aa_hasAttribute(a,b)){return"<"+aa_tag(a)+" "+b+'="'+a.getAttribute(b)+'" .../>'}},fill_trace_result:function(d,c,b,g,f){var a={isObject:true,Input:c,Output:b,context:g};if(f!=null){a.OrigData=f}d.push(a)},text4trace:function(c,d,a){if(d==null){d=0}if(d>=a){return"..."}if(typeof(c)=="undefined"){return""}if(!ajaxart.isArray(c)){c=[c]}if(typeof(c)==undefined||c==null){return""}var b="";if(c.length>1){b=c.length+" items : \r\n"}ajaxart.each(c,function(h){if(h==null){return}if(typeof(h)=="function"){return}if(ajaxart.isxml(h)){var f="";if(d+1==a&&h.nodeType==1){f=ajaxart.tryShortXmlWithTag(h,"name");if(f==null){f=ajaxart.tryShortXmlWithTag(h,"id")}if(f==null){f=ajaxart.tryShortXmlWithTag(h,"Name")}if(f==null){f="<"+aa_tag(h)+" .../>"}f=ajaxart.xmlescape(f)}else{if(h.nodeType==2){f="@"+h.nodeName+'="'+ajaxart.xmlescape(ajaxart.xml2text(h))+'"'}else{f=ajaxart.xmlescape(ajaxart.xml2text(h))}}if(ajaxart.ishtml(h)){b+="html: "+f}else{b+="xml: "+f}}else{if(ajaxart.isObject(h)){if(d+1==a){b+="object (";for(i in h){if(i!="isObject"){b+=i+", "}}b=b.substring(0,b.length-2)+")"}else{b={isObject:true};for(i in h){if(i!="isObject"&&i!="XtmlSource"){var g=ajaxart.text4trace(h[i],d+1,a);if(g.length>a&&g.substring(0,3)=="xml"){g={isObject:true,xml:g}}b[i]=g}}return b}}else{if(typeof(h.script)!="undefined"){b+="script:"+ajaxart.text4trace(h.script,d+1,a)}else{b+="text:"+ajaxart.totext(h)}}}b+="\r\n"});return b},trace:function(f,g,c,b,h,a){if(ajaxart.xtmls_to_trace.length>0){return}var l=2;if(a!=null&&!isNaN(parseInt(a))){l=parseInt(a)}var k={isObject:true};message="<b>id:</b> "+aa_xtml_path(f,"id",true);if(typeof(h)!="undefined"){message+="/"+h}k.id=aa_xtml_path(f,"id",true);if(h!=null){k.id+="/"+h}k.stack=aa_st();k.input=ajaxart.text4trace(g,-1,l);k.output=ajaxart.text4trace(c,-1,l);k.params=[];k.context=[];if(l>0){message+="<b>params:</b> <ul>";for(varname in b.params){message+="<li>"+varname+": "+ajaxart.text4trace(ajaxart.getVariable(b,varname),0,0)+"</li>";k.params.push({isObject:true,name:varname,value:ajaxart.text4trace(ajaxart.getVariable(b,varname),0,l)})}message+="</ul>";message+="<br> <b>stack:</b> <ul>";for(varname in b.vars){var d=ajaxart.text4trace(ajaxart.getVariable(b,varname),0,l);message+="<li>"+varname+": "+d+"</li>";k.context.push({isObject:true,name:varname,value:[d]})}message+="</ul>";message+="<b>server data: </b>";for(varname in ajaxart.serverData){message+=varname+","}}k.context=k.context.reverse();ajaxart.traces.push(k);if(ajaxart.isBackEnd){ajaxart.log("trace: "+k.id);ajaxart.log(">trace input: "+k.input);ajaxart.log(">trace output: "+k.output);ajaxart.log("end trace")}jQuery("#trace_bugs").html("There are traces which can cause performence problems")},write_profiling_at_end:function(a,c){var b=new Date().getTime()-a;if(ajaxart.profiling_of_globals[c]==null){ajaxart.profiling_of_globals[c]={calls:0,total:0}}ajaxart.profiling_of_globals[c].calls++;ajaxart.profiling_of_globals[c].total+=b}});function aa_get_func(code,notReturningValue){if(!ajaxart.functions_cache){ajaxart.functions_cache={}}if(code==""){return function(){}}if(code.indexOf("function")!=0){if(notReturningValue){code="function() { "+code+"}"}else{code="function() { return "+code+"}"}}if(!ajaxart.functions_cache[code]){try{ajaxart.functions_cache[code]=eval("f ="+code)}catch(e){ajaxart.log("RunJavaScript: "+e.message+"   code = "+code,"error")}}return ajaxart.functions_cache[code]}function aa_run_js_code(d,f,a,c){var b=aa_get_func(d);if(!c){if(a.vars._ElemsOfOperation&&a.vars._ElemsOfOperation.length){c=a.vars._ElemsOfOperation[0]}}var h=f;if(f.length==1){h=f[0]}try{if(b){return b(h,c,a)}}catch(g){ajaxart.logException(g,"aa_run_js_code failed, code: "+d)}return null}aa_extend(ajaxart,{xmlescape:function(a){if(typeof a==="string"){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\n/g,"&#xa;").replace(/\r/g,"&#xd;")}if(ajaxart.isArray(a)&&a.length>0){return ajaxart.xmlescape(a[0])}return""},xmlunescape:function(a){if(ajaxart.isArray(a)){if(a.length>0){return ajaxart.xmlescape(a[0])}return""}if(ajaxart.isObject(a)){return"struct"}return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#xa;/g,"\n")},isattached:function(a){if(a==null){return false}if(ajaxart.isIE){return jQuery(a).parents("body").length>0}return(a.offsetParent||jQuery(a).parents("body").length>0)},getControlElement:function(b,c){var a=ajaxart.getVariable(b,"ControlElement");if(typeof(a.controlElement)!="undefined"){a=a.controlElement}if(c!=null&&c==true){if(a==null||a.length==0){return null}return a[0]}if(a==null){return[]}return a},writevalue:function(d,c,k){var g=false;if(d==null||d.length==0||d[0]==null){return g}var f=d[0];if(f.WriteValue){return f.WriteValue(c)}if(ajaxart.isxml(c)){var l=c;if(ajaxart.isArray(c)){l=c[0]}if(l.nodeType==1&&f.nodeType==1){if(l==f){return}if(aa_tag(l)==aa_tag(f)){ajaxart.xml.copyElementContents(f,l)}else{ajaxart.replaceXmlElement(f,l)}g=true}}if(!g){var a=ajaxart.totext(c);if(ajaxart.isxml(f)){if(f.nodeType==2||f.nodeType==3||f.nodeType==4){if(a==f.nodeValue){return true}f.nodeValue=a}else{var h=f.firstChild;for(var b=f.firstChild;b;b=b.nextSibling){if(b.nodeType==4){h=b}}if(h&&h.nodeType==3){h.nodeValue=a}else{if(h&&h.nodeType==4){h.nodeValue=a.replace(/\]\]>/g,"]\\]>")}else{f.appendChild(f.ownerDocument.createTextNode(a))}}}g=true}else{if(typeof(f)=="string"){d[0]=ajaxart.totext(c);g=true}}}if(!k&&ajaxart.isxml(f)){ajaxart.xml.xml_changed(f)}return g},body_contents_of_soap_envelope:function(f){for(var b=0;b<f.childNodes.length;b++){var c=f.childNodes.item(b);if(c.nodeType==1&&aa_tag(tagName).toLowerCase()=="body"){for(var a=0;a<c.childNodes.length;a++){var d=c.childNodes.item(b);if(d.nodeType==1){return d}}}}return f},ajaxart_clean_ns:function(a){a=a.replace(new RegExp("<[A-Za-z0-9_]*:","g"),"<");a=a.replace(new RegExp("</[A-Za-z0-9_]*:","g"),"</");a=a.replace(new RegExp("xmlns[a-zA-Z0-9_:\"'=/.-]*","g"),"");a=a.replace(new RegExp('[A-Za-z0-9_]*:([A-Za-z0-9_]*)="',"g"),'$1="');return a}});aa_extend(ajaxart,{xtmls:ajaxart.parsexml("<Plugins/>")});aa_extend(ajaxart,{make_array:function(b,d,c){var a=[];ajaxart.each(b,function(g){var h=d([g]);if(ajaxart.isArray(h)){ajaxart.concat(a,h)}else{if(h!=null){a.push(h)}}});if(b.length==0&&(typeof c=="undefined"||c==true)){var f=d([]);if(f!=null){a.push(f)}}return a},jrootElem:function(a){var c=a.parents();if(c.length>0){var b=c[c.length-1];return jQuery(b)}return jQuery([])},calcParamsForRunOn:function(params,runOn,startFrom){var result=jQuery([]);if(ajaxart.ishtml(runOn)){result=jQuery(runOn)}else{runOn=ajaxart.totext(runOn);runOn=runOn.replace(/ /g,"_");if(runOn==""){ajaxart.setVariable(params,"ControlElement",[]);return params}var old_elem=[];if(typeof(startFrom)!="undefined"){old_elem=startFrom}else{old_elem=ajaxart.getControlElement(params)}if(old_elem.length>0){var baseElem=jQuery(old_elem)}else{var baseElem=jQuery("body")}if(runOn.indexOf("(")==-1){var jexp="#"+runOn;if(runOn.charAt(0)=="."){jexp=runOn}var result=baseElem.find(jexp)}else{var result=jQuery([])}if(runOn.substr(0,3)=="up("){jexp=runOn.substring(3,runOn.length-1);if(baseElem.filter(jexp).length!=0){result=baseElem}else{result=baseElem.parents(jexp).slice(0,1)}}if(runOn.substr(0,2)=="$."){var str="result = baseElem"+runOn.substr(1);try{eval(str)}catch(e){}}if(runOn.substr(0,7)=="updown("){items=runOn.substring(7,runOn.length-1).split(",");if(items.length==2){var parent=baseElem.filter(items[0]);if(parent.length==0){parent=baseElem.parents(items[0])}result=parent.find(items[1])}}if(runOn.substr(0,5)=="down("){jexp=runOn.substring(5,runOn.length-1);result=baseElem.find(jexp)}if(result.length==0&&old_elem.length>0){baseElem.each(function(){if(this.getAttribute("id")==runOn){result=$([this])}})}try{if(result.length==0&&jexp){result=ajaxart.jrootElem(baseElem).find(jexp)}if(result.length==0&&jexp){result=jQuery("body").find(jexp)}}catch(e){}if(result.length==0){ajaxart.log("cannot locate "+jexp,"location")}}var out=[];result.each(function(){out.push(this)});params=ajaxart.clone_context(params);ajaxart.setVariable(params,"ControlElement",out);return params},databind:function(a,d,f,b,c){ajaxart.each(a,function(h){if(!ajaxart.ishtml(h)){return}var g={};g.data=d;g.params=f;g.script=b;g.origData=c;if(typeof(h.ajaxart)=="undefined"){h.ajaxart=g}else{if(b!=null){h.ajaxart.script=b}if(c!=null){h.ajaxart.origData=c}}})},});aa_testFinished={};aa_tests_timeout=0;aa_extend(ajaxart,{stoptests:false,testResults:{summaryId:"",failuresId:"",successCounter:0,failureCounter:0},serverData:[],debugData:[],runtests:function(d,g,h){ajaxart.testsStartTime=new Date().getTime();ajaxart.testResults.summaryId=d;ajaxart.testResults.failuresId=g;var f=ajaxart.urlparam("more")=="true";var c=[];if(ajaxart.serverData._GalleryItems){var b=ajaxart.xml.xpath(ajaxart.serverData._GalleryItems[0],"bart_sample");for(var k=0;k<b.length;k++){ajaxart.concat(c,bart_galleryitem_tousages(b[k]))}}for(plugin in ajaxart.usages){if(h!=null&&h!=plugin){continue}for(usage in ajaxart.usages[plugin]){var a=ajaxart.usages[plugin][usage].getAttribute("IsTest")!="false";if(f){a=ajaxart.usages[plugin][usage].getAttribute("IsTest")=="more"}if(a){c.push(ajaxart.usages[plugin][usage])}}}jQuery("#tests_count").text("Running "+c.length+" tests");ajaxart.runTestLoop(c,0)},getTestName:function(b){var a="";if(aa_hasAttribute(b,"Of")){a=b.getAttribute("Of")}if(aa_hasAttribute(b,"Name")){if(a.length>0){a+=" - "}a+=b.getAttribute("Name")}return a},handleUsageResult:function(r,d,h,g){var l="";if(h+1<d.length){var g=d[h+1];if(aa_hasAttribute(g,"Of")){l=g.getAttribute("Of")}if(aa_hasAttribute(g,"Name")){if(l.length>0){l+=" - "}l+=g.getAttribute("Name")}}var o="<div style='color:green;font-weight:bold'>so far "+ajaxart.testResults.successCounter+" tests succeeded. working on "+l+"</div>";document.getElementById("ajaxart_summary").innerHTML=o;var g=d[h];if(r.length==0){ajaxart.testResults.successCounter++;if(g.getAttribute("AssignedTo")){var l="";if(aa_hasAttribute(g,"Of")){l=g.getAttribute("Of")}jQuery("#"+ajaxart.testResults.failuresId).append("<div style='color:darkorange'>Test "+l+" succeeds but assigned to "+g.getAttribute("AssignedTo")+"</div>")}}else{var l="";var a="";var n="http://localhost/ajaxart/showsamples.html#?";if(aa_hasAttribute(g,"Of")){l=g.getAttribute("Of");a=n+"Of="+l+";"}if(aa_hasAttribute(g,"Name")){if(l.length>0){l+=" - "}l+=g.getAttribute("Name");a=n+"Name="+g.getAttribute("Name")+";"}if(aa_hasAttribute(g,"Of")&&g.getAttribute("Of").indexOf("gallery_")==0){var q=g.getAttribute("Of").split("gallery_")[1].split(".")[0];var f=jQuery(g).parents("jbart_project").length>0?"jbart_project":"bart_sample";a="http://localhost/ajaxart/jbartstudio.html?contenttype="+f+"#?mode=tests?project="+q}ajaxart.testResults.failureCounter++;var k="";if(aa_hasAttribute(g,"AssignedTo")&&g.getAttribute("AssignedTo")!=""){k=" ("+g.getAttribute("AssignedTo")+")"}var c=(k!="")?"failing_test_assigned":"failing_test_unassigned";jQuery("#"+ajaxart.testResults.failuresId).append("<a target='_blank' class='failing_test "+c+"' href='"+a+"'>Failed "+l+k+"</a><br/>")}aa_closePopup();if(ajaxart.lastTestTime){var b=new Date().getTime();var m=b-ajaxart.lastTestTime;var p=(m>600)?"timing_red":"timing_ok";jQuery("#tests_timing").append("<div>Running time of test "+(h+1)+" ("+ajaxart.getTestName(g)+') is <span class="'+p+'">'+m+"<span></div>")}setTimeout(function(){ajaxart.runTestLoop(d,h+1)},1)},runTestLoop:function(d,g,b){ajaxart.lastTestTime=new Date().getTime();if(d.length==0){return}if(ajaxart.stoptests||g==d.length){var o="";if(ajaxart.stoptests){o="<div>tests stopped</div>"}else{if(ajaxart.testResults.failureCounter==0){o="<div style='color:green;font-weight:bold'>all tests succeeded ("+ajaxart.testResults.successCounter+" tests)</div>"}else{o="<div style='color:red;font-weight:bold'>"+ajaxart.testResults.failureCounter+" tests failed</div>"}}jQuery("#"+ajaxart.testResults.summaryId).html(o);var m=(new Date().getTime()-ajaxart.testsStartTime)/1000;var a='<div style="font-size:12px; margin-top:10px">Tests finished at '+new Date().getHours()+":"+new Date().getMinutes()+"</div>";jQuery("#ajaxart_tests_time").html("time (seconds): "+Math.round(m)+a);return}var f=d[g];var k=true;if(ajaxart.xml.xpath(f,"ServerData").length>0&&typeof(b)=="undefined"){var h=function(q){ajaxart.runTestLoop(d,g,q)};k=false;ajaxart.server.RunParallelCalls(f,[],ajaxart.newContext(),"ServerData",h)}var n=ajaxart.subprofiles(f,"ServerData");var c=ajaxart.newContext();if(typeof(b)!="undefined"){c=b}var l=f.getAttribute("t")=="bart_usage.JBartUsage";if(k){if(f.getAttribute("t")=="ui_async.ControlUsage"||f.getAttribute("t")=="bart_usage.BartControlUsage"){k=false;if(aa_tests_timeout!=0){clearTimeout(aa_tests_timeout)}aa_tests_timeout=setTimeout(function(){if(aa_testFinished[g]){return}aa_testFinished[g]=true;aa_tests_timeout=0;ajaxart.handleUsageResult([],d,g,d[g])},4000);ajaxart_RunAsync([f],f,c,function(q){if(aa_testFinished[g]){return}aa_testFinished[g]=true;ajaxart.handleUsageResult(q,d,g,d[g])})}if(f.getAttribute("t")=="bart_usage.BartDataUsage"){l=true}}if(!k){return}var p=ajaxart.run(l?[f]:[],f,"",c);ajaxart.handleUsageResult(p,d,g,f)}});ajaxart.isTouchDevice=function(){return ajaxart.isTouch};function aa_determine_device(a){if(!navigator){navigator={userAgent:""}}a=a||navigator.userAgent.toLowerCase();ajaxart.isChrome=/chrome/.test(a);ajaxart.isIE=/msie/.test(a);ajaxart.isIE7=/msie 7/.test(a);ajaxart.isIE78=/msie 7/.test(a)||/msie 8/.test(a);ajaxart.isSafari=/safari/.test(a);ajaxart.isFireFox=/firefox/.test(a);ajaxart.isOpera=/opera/.test(a);ajaxart.isiPhone=/cpu iphone/.test(a);ajaxart.isIDevice=(/iphone|ipad/gi).test(navigator.appVersion);ajaxart.isBackEnd=false;ajaxart.isMobile=(/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));ajaxart.isAndroid=/android/.test(a);ajaxart.deviceCssClass="";if(ajaxart.isChrome){ajaxart.deviceCssClass+=" chrome"}if(ajaxart.isIE){ajaxart.deviceCssClass+=" ie"}if(ajaxart.isIE7){ajaxart.deviceCssClass+=" ie7"}if(ajaxart.isSafari){ajaxart.deviceCssClass+=" safari"}if(ajaxart.isFireFox){ajaxart.deviceCssClass+=" firefox"}if(ajaxart.isiPhone){ajaxart.deviceCssClass+=" iphone"}if(ajaxart.isIDevice){ajaxart.deviceCssClass+=" idevice"}try{document.createEvent("TouchEvent");ajaxart.isTouch=true}catch(b){ajaxart.isTouch=false}}aa_determine_device();function aa_run_component(d,r,f,k){var s=ajaxart.componentsXtmlCache[d];if(s==null){try{var l=d.indexOf(".");var q=d.substring(0,l);var o=d.substr(l+1);if(ajaxart.components[q]==null){ajaxart.log("cannot find component "+d,"error");return[]}var c=ajaxart.components[q][o];if(!c){ajaxart.log("cannot find component "+d,"error");return[]}if(c.getAttribute("execution")=="native"){s=ajaxart.componentsXtmlCache[d]={execution:"native"};s.profile=ajaxart.parsexml('<xtml t=""/>');s.gc=ajaxart.gcs[q][o]}else{s=ajaxart.componentsXtmlCache[d]=ajaxart.childElem(c,"xtml")}}catch(p){return[]}}if(s==null){return[]}if(s.execution=="native"){return s.gc(s.profile,r,f)}var h={};h.vars=f.vars;h.componentContext=f.componentContext;h.params=[];var a=ajaxart.xml.xpath(s.parentNode,"Param/Default");for(var n=0;n<a.length;n++){var g=ajaxart.run(r,a[n],"",f);var b=a[n].parentNode.getAttribute("name");if(b!=null&&b!=""){h.params[b]=g}}for(var m in k){h.params[m]=k[m]}return ajaxart.run(r,s,"",h)}ajaxart.runComponent=function(a,d,b){b=b||ajaxart.newContext();var c=ajaxart.parsexml('<xtml t="'+a+'" />');return ajaxart.run(d,c,"",b)};ajaxart.concat=function(b,c){if(c==null){return}for(var a=0;a<c.length;a++){b.push(c[a])}};function ajaxart_addScriptMethod(b,g,d,h,c,a){var f=(h=="")?d:ajaxart.fieldscript(d,h,true);b[g]={script:f,context:c,objectForMethod:[b],compiled:ajaxart.compile(f,"",c,a)}}function ajaxart_addScriptParam_js(a,d,c,b){a[d]={context:b,compiled:c}}function ajaxart_addMethod_js(a,d,c,b){a[d]={context:b,compiled:c,objectForMethod:[a]}}function aa_ctx(c,d){var a=ajaxart.clone_context(c);for(var b in d){a.vars[b]=d[b]}return a}function aa_merge_ctx(d,c,b){var a={params:d.params,vars:c.vars,componentContext:d.componentContext,_This:c._This};if(b){a=aa_ctx(a,b)}return a}function aa_toint(b){if(b.length==0){return 0}var a=aa_totext(b);if(a==""){return 0}return parseInt(a)}function ajaxart_toint_array(a){if(a.length==0){return 0}if(a[0]==""){return 0}return parseInt(a[0])}function ajaxart_run_commas(c,a,d,b){var f=aa_text(c,a,d,b);if(f==""){return[]}return f.split(",")}function ajaxart_run_tocommas(g,a,h,d){var f=ajaxart.run(g,a,h,d);var b=",";for(var c=0;c<f.length;c++){b+=aa_totext([f[c]])+","}return b}function ajaxart_arr_indexof(a,c){for(var b=0;b<a.length;b++){if(a[b]==c){return b}}return -1}function ajaxart_writabledata(){return ajaxart.xml.xpath(ajaxart.parsexml('<xml val="" />'),"@val")}function ajaxart_clone_array(c){var a=[];for(var b=0;b<c.length;b++){a.push(c[b])}return a}function aa_text2bool(text){if(text==""||text=="false"){return false}if(text=="true"){return true}if(!isNaN(text)){return true}if(text.indexOf("==")>-1){var pos=text.indexOf("==");var first=aa_trimQuote(text.substring(0,pos)),second=aa_trimQuote(text.substring(pos+2));return(first==second)}if(text.indexOf("!=")>-1){var pos=text.indexOf("!=");var first=aa_trimQuote(text.substring(0,pos)),second=aa_trimQuote(text.substring(pos+2));return(first!=second)}if(text.indexOf("=")>-1){var pos=text.indexOf("=");var first=text.substring(0,pos),second=text.substring(pos+1);return(first==second)}var boolean_result=false;var text_to_eval="if ("+text+") boolean_result=true;";try{eval(text_to_eval)}catch(e){ajaxart.log("Failed to evaluate boolean expression: "+text,"warning");return false}return boolean_result?true:false}function aa_string2id(a){if(!ajaxart.hebchars){ajaxart.hebchars=ajaxart.types.text_HebrewText.getAttribute("HebChars")}var d=ajaxart.hebchars;var f="abgdaozhtiklmnsapzkrstnfhz";var b="";for(var c=0;c<a.length;c++){var g=d.indexOf(a.charAt(c));if(g==-1){b+=a.charAt(c)}else{b+=f.charAt(g)}}a=b;a=a.replace(/[^0-9a-zA-Z]/g,"_").replace(/(^[0-9]+)/g,"_$1");return a}function aa_trimQuote(a){a=a.replace(/^\s*/,"").replace(/\s*$/,"");if(a.length>0&&a.charAt(0)=="'"&&a.charAt(a.length-1)=="'"){return a.substring(1,a.length-1)}return a}function aa_run(c,b,d,a){return ajaxart.run(c,b,d,a)}function aa_text_with_percent(b,a,c,f){var d=a.getAttribute(c);if(d){return d}return aa_text(b,a,c,f)}ajaxart.runScriptParam=function(c,a,b){if(a==null){return[]}if(typeof(a)=="function"){return a(c,b)}if(a.compiled=="same"){return c}if(a.context==null){}var d={params:a.context.params,vars:b.vars,componentContext:a.context.componentContext};if(a.objectForMethod){d._This=a.objectForMethod[0]}if(a.compiled!=null){return a.compiled(c,d)}else{return ajaxart.run(c,a.script,"",d)}return[]};function aa_JsonByRef(a,b){this.parent=a;this.prop=b}aa_JsonByRef.prototype.GetValue=function(){return this.parent[this.prop]};aa_JsonByRef.prototype.WriteValue=function(a){return this.parent[this.prop]=a};aa_JsonByRef.prototype.ParentNode=function(){return this.parent};function aa_load_inplace_gc(comp,ns){if(typeof(aa_xpath)=="undefined"){return}if(comp.getAttribute("execution")!="native"){return}var script=aa_cdata_value(aa_xpath(comp,"Code")[0]);if(!script){return}var func=null;try{eval("func = "+script)}catch(e){ajaxart.logException(e,"could not compile js function for gc "+comp.getAttribute("id")+": "+script)}if(func){var gc={};gc[comp.getAttribute("id")]=func;aa_gcs(ns,gc)}}function aa_cdata_value(a){if(!a||a.nodeType!=1){return null}for(var b=a.firstChild;b!=null;b=b.nextSibling){if(b.nodeType==4&&b.nodeValue){return b.nodeValue}}return null}ajaxart.gcs.object={IsObject:function(b,c,a){if(c.length==0){return[]}return ajaxart.isObject(c[0])?["true"]:[]},Object:function(d,h,b){var f={isObject:true};var c=d.firstChild;while(c!=null){if(c.nodeType==1){var m=c.tagName;var a=c.getAttribute("name");if(a==null||a==""){c=c.nextSibling;continue}if(m=="Property"){f[a]=ajaxart.run(h,c,"",b)}else{if(m=="SingleProperty"){f[a]=aa_first(h,c,"",b)}else{if(m=="TextProperty"){f[a]=aa_text(h,c,"",b)}else{if(m=="BooleanProperty"){f[a]=aa_bool(h,c,"",b)}else{if(m=="Method"){ajaxart_addMethod(f,a,c,"",b)}}}}}}c=c.nextSibling}var k=d.attributes;for(var g=0;g<k.length;g++){var l=k.item(g).nodeName;if(l!="t"&&l!="value"&&l!="Data"&&l!="name"&&l!="Trace"){f[l]=ajaxart.totext_array(ajaxart.dynamicText(h,k.item(g).nodeValue,b))}}return[f]},OverrideObject:function(g,h,f){var k=ajaxart.gcs.object.Object(g,h,f)[0];var c=aa_first(h,g,"Object",f);if(c==null){return[]}for(var d in k){c[d]=k[d]}var a=aa_xpath(g,"AddToProperty");for(var d=0;d<a.length;d++){var b=a[d].getAttribute("name");c[b]=c[b]||[];ajaxart.concat(c[b],ajaxart.run(h,a[d],"",f))}return[c]},ObjectFromParams:function(f,h,b){var g={isObject:true};for(var k in b.params){var a=k;var c=b.params[k];if(c.isParamScript==true){g[a]=c;g[a].context=b.componentContext}else{g[a]=c}}var d=f.firstChild;while(d!=null){if(d.nodeType==1){var l=d.tagName;var a=d.getAttribute("name");if(a==null||a==""){d=d.nextSibling;continue}if(l=="Property"){g[a]=ajaxart.run(h,d,"",b)}else{if(l=="Method"){g[a]={script:d,context:b,objectForMethod:[g],compiled:ajaxart.compile(d,"",b,d.getAttribute("paramVars"))}}}}d=d.nextSibling}return[g]},Clone:function(d,f,c){var g=aa_first(f,d,"Object",c);if(g==null){return[]}var a={};for(var b in g){a[b]=g[b]}return[a]},HasMethod:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Method",a);if(d!=null&&d[f]!=null){return["true"]}return[]},FastRunMethod:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Method",a);if(d==null||f==""||typeof(d[f])!="function"){return[]}return d[f](c,a)},RunMethod:function(d,l,b){var k=aa_first(l,d,"Object",b);var a=aa_text(l,d,"Method",b);var m=l;if(d.getAttribute("Input")!=null||ajaxart.xml.xpath(d,"Input").length>0){m=ajaxart.run(l,d,"Input",b)}if(k==null){return[]}var g=k[a];if(g==null){return[]}var c=b;var f=ajaxart.xml.xpath(d,"Param");if(f.length>0){c=ajaxart.clone_context(b)}for(var h=0;h<f.length;h++){c.vars[f[h].getAttribute("name")]=ajaxart.run(l,f[h],"",c)}if(typeof(g)=="function"){return g.call(k,m,c)}return ajaxart.runScriptParam(m,g,c)},SetProperty:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Property",a);if(d==null||f==""){return[]}if(aa_bool(c,b,"IsSingleProperty",a)){d[f]=aa_first(c,b,"Value",a)}else{d[f]=ajaxart.run(c,b,"Value",a)}return["true"]},ClearProperty:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Property",a);if(d&&f){delete d[f]}},SetTextProperty:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Property",a);if(d==null||f==""){return[]}d[f]=aa_text(c,b,"Value",a)},SetNumericProperty:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Property",a);if(d==null||f==""){return[]}d[f]=aa_int(c,b,"Value",a)},SetBooleanProperty:function(b,c,a){var d=aa_first(c,b,"Object",a);var f=aa_text(c,b,"Property",a);if(d==null||f==""){return[]}d[f]=aa_bool(c,b,"Value",a);return["true"]},SetMethod:function(c,d,a){var f=aa_first(d,c,"Object",a);var h=aa_text(d,c,"Method",a);if(f==null||h==""){return[]}var g=ajaxart.compile(c,"Xtml",a,"");if(g=="same"){f[h]=function(k){return k}}else{if(g!=null){var b=function(k,l){return function(m,n){var o=aa_merge_ctx(a,n);o._This=k;return l(m,o)}};f[h]=b(f,g)}else{var b=function(k){return function(l,m){var n=aa_merge_ctx(a,m);n._This=k;return ajaxart.run(l,c,"Xtml",n)}};f[h]=b(f)}}return["true"]},AddToProperty:function(b,d,a){var f=aa_first(d,b,"Object",a);var g=aa_text(d,b,"Property",a);var c=ajaxart.run(d,b,"Value",a);if(f==null||g==""){return[]}if(f[g]==null){f[g]=[]}ajaxart.concat(f[g],c);return["true"]},AddOrReplacePropertyItem:function(d,h,c){var g=aa_first(h,d,"Object",c);var a=aa_text(h,d,"Property",c);var l=aa_first(h,d,"Item",c);if(l==null){return}var b=ajaxart.totext_array(l.ID);var k=g[a];if(k==null){k=g[a]=[]}for(var f=0;f<k.length;f++){if(k[f].ID!=null&&k[f].ID[0]==b){k[f]=l;return[]}}g[a].push(l);return["true"]}};ajaxart_addLightMethod=function(b,h,d,g,c,a){var f=(g=="")?d:ajaxart.fieldscript(d,g,true);b[h]={script:f,context:c,compiled:ajaxart.compile(f,"",c,a)}};function aa_setMethod(a,h,c,f,b){var d=ajaxart.compile(c,f,b);var g=function(k){a[h]=function(l,m){var n=aa_merge_ctx(b,m);n._This=a;if(k=="same"){return l}else{if(k){return k(l,n)}else{return ajaxart.run(l,c,f,n)}}}};g(d)}function ajaxart_addMethod(a,h,c,f,b){var d=ajaxart.compile(c,f,b);if(d=="same"){a[h]=function(k){return k};return}var g=function(k){a[h]=function(l,m){var n=aa_merge_ctx(b,m);n._This=a;if(k){return k(l,n)}else{return ajaxart.run(l,c,f,n)}}};g(d)}function ajaxart_addMethod_js(a,d,c,b){a[d]={context:b,compiled:c,objectForMethod:[a]}}function ajaxart_runMethod(d,b,g,c){if(b==null||g==""){return[]}var a=b[g];if(a==null){return[]}if(typeof(a)=="function"){return a.call(b,d,c)}if(a.compiled=="same"){return d}var f={params:a.context.params,vars:c.vars,componentContext:a.context.componentContext};f._This=b;if(a.compiled!=null){return a.compiled(d,f)}else{return ajaxart.run(d,a.script,"",f)}return[]}function aa_runMethodAsync(b,d,g,c,f){if(b==null||d==null){f(g,c);return}var a={callBack:f,marked:false};var k=aa_ctx(c,{_AsyncCallback:a});try{d.call(b,g,k)}catch(h){ajaxart.logException(h)}if(!a.marked&&f){f(g,c)}}function aa_runMethodAsyncQuery(d,k,f,a,c){if(d==null||k==null){c([],a);return}var h={callBack:c,marked:false};var l=[];var b=aa_ctx(a,{_AsyncCallback:h});try{l=k.call(d,f,b)}catch(g){ajaxart.logException(g)}if(!h.marked&&c){c(l,a)}}function ajaxart_runMethod_async(g,c,k,d,f){if(c==null||k==""){return[]}if(c[k]==null){f(g,d);return}var a=c[k];if(typeof(a)=="function"){ajaxart_RunAsync(g,a,d,f,c);return[]}var h={params:a.context.params,vars:d.vars,componentContext:a.context.componentContext};if(typeof(a.objectForMethod)!="undefined"){h.vars=[];for(var b in d.vars){h.vars[b]=d.vars[b]}h._This=c}if(a.script!=null){ajaxart_RunAsync(g,a.script,h,f,c)}else{ajaxart_RunAsync(g,a,h,f,c)}return[]}function ajaxart_addControlMethod(a,h,d,c,f,b){var g=function(k,m){var l=ajaxart.run(k,c,f,m);if(l.length>0){l[0].XtmlSource=a.XtmlSource}return l};ajaxart_addMethod_js(a,h,g,b)}function ajaxart_addControlMethod_js(a,f,c,b){var d=function(g,k){var h=c(g,k);if(h.length>0){h[0].XtmlSource=a.XtmlSource}return h};ajaxart_addMethod_js(a,f,d,b)}function ajaxart_object_boolean_value(b,a){if(b[a]==null){return null}if(typeof(b[a])=="boolean"){return b[a]}if(b[a].length==0||b[a]!="true"){return false}return true}function ajaxart_object_run_boolean_method(b,f,d,c){if(b[f]==null){return false}var a=ajaxart_runMethod(d,b,f,c);if(a.length==0){return false}if(ajaxart.totext_array(a)=="true"){return true}return false}function ajaxart_object_byid(c,d){if(c==null||typeof(c)=="undefined"){return null}for(var a=0;a<c.length;a++){var b=c[a];if(b.Id!=null){if(b.Id==d){return b}}else{if(b.ID!=null&&b.ID.length>0&&b.ID[0]==d){return b}}}return null}function aa_newDataHolder(c,a){var b={isObject:true,idGen:0,groupIdGen:0,Context:a,UserDataView:{isObject:true,Id:"user",Filters:[],CalcFilters:function(){return aa_calcFilters(this)},CalcResults:function(){return aa_calcResults(this)}},Wrappers:c,newFiltersDataView:function(g,f,h){var d={isObject:true,dataholder:this,Id:h||this.idGen++,Filters:g,Sort:f,CalcFilters:function(){return aa_calcFilters(this)},CalcResults:function(){return aa_calcResults(this)}};return d},newGroupBy:function(d,q,r){var o={isObject:true,dataholder:this,Id:"group_"+this.groupIdGen++,Filters:d,Sort:[],CalcFilters:function(){return aa_calcFilters(this)},CalcResults:function(){return aa_calcResults(this)}};aa_calcFilters(o);var m=[];var f=q.split(",");for(var n in f){var p=aa_fieldById(f[n],this.Fields);if(p){m.push(p)}}var h=aa_calc_groups(o,this.Wrappers,m,this.Context);var l=aa_newDataHolder(h,o.dataholder.Context);var g=r(h);l.Fields=m.concat(g);var k=[];for(var n in g){if(!g[n].IsVirtualGroup){k.push(g[n])}}aa_calcFields(l.Wrappers,k,l,[]);return l}};b.UserDataView.dataholder=b;return b}function aa_createDataHolderFromCntr(m,a){var h=aa_DataviewFields(m.Fields);var k=m.Items[0].Items||[];var d=m.Dataview_PreFilter?m.Dataview_PreFilter.join(" AND "):"";if(m.Dataview_PreTextQuery){d+=m.Dataview_PreTextQuery}var f=d?aa_filters_from_expression(d,h):[];var b=[].concat(f).concat(m.ExposedFilters||[]);var l=aa_create_wrappers(k,h,b,a);var c=aa_CalculatedFields(h);var g=aa_newDataHolder(l,a);g.UserDataView.Sort=m.Dataview_PreSort||[];g.UserDataView.Filters=m.ExposedFilters||[];g.Fields=h;aa_calcFields(g.Wrappers,c,g,b);if(f[0]){g.newFiltersDataView(f,[],"pre").CalcFilters()}return g}function aa_DataviewFields(b){var a=[];for(var c in b){if(!b[c].HeaderFooter&&!b[c].IsGroup){a.push(b[c])}if(b[c].IsGroupOnlyForLayout){ajaxart.concat(a,aa_DataviewFields(b[c].Fields))}}return a}function aa_CalculatedFields(b){var a=[];for(var c in b){if(b[c].WrapperToValue){a.push(b[c])}}return a}function aa_filters_from_expression(c,h){var a=[];c=c.replace(/^\s*/,"").replace(/\s*$/,"");var l=c.split(" AND ");for(var d in l){var f=l[d];f=f.replace(/^\s*/,"").replace(/\s*$/,"");var k=f.match(/^[^ ]*/)[0];if(!k){continue}var f=f.substring(k.length);var b=f.match(/^\s*([^\s]*)\s*/);var g=(b&&b[1])||"=";var f=f.substring(b[0].length);value=f.replace(/^\s*/,"").replace(/\s*$/,"");if(value.charAt(0)=='"'||value.charAt(0)=="'"){value=value.substring(1,value.length-1)}var m=aa_fieldById(k,h);if(m){filter=aa_create_filter(m,value,g);ajaxart.writevalue(filter.rawFilterData,[value]);if(g.charAt(0)=="<"||g.charAt(0)==">"){value=g+value}filter.SetFilterData([value]);a.push(filter)}}return a}function aa_create_wrappers(l,k,d,c){var o=[];if(l.length>0&&l[0].__hiddenForView){return l}for(var h in l){var n=l[h];var a={isObject:true,__item:n,__hidden:false,__FilterResults:{},__hiddenForView:{},__OriginalIndex:h};for(var f in k){var m=k[f];var g=m.ItemToText?m.ItemToText(n):ajaxart.totext_array(ajaxart_field_calc_field_data(m,[n],c));a[m.Id]=m.SortValFunc?m.SortValFunc(g):g;if(m.Options&&m.Options.codeToText){a["__text_"+m.Id]=m.Options.codeToText(a[m.Id])}}for(var f in d){var b=d[f];if(b&&b.PrepareElemCache){b.PrepareElemCache(b.field,a)}}o.push(a)}return o}function aa_calcFilters(a){var k=a.Id;var g=a.dataholder.Wrappers;for(var d in g){var h=g[d];h.__hiddenForView[k]=false;for(var b in a.Filters){var f=a.Filters[b];var c=f.Match(f.field,h);if(c==false){h.__hiddenForView[k]=true}}}}function aa_calcResults(b){var h=b.Id;var a={isObject:true,Items:[],query:b};var c=a.Items;var f=b.dataholder.Wrappers;for(var d in f){var g=f[d];if(!g.__hiddenForView[h]&&!g.__hiddenForView.user&&!g.__hiddenForView.pre){c.push(g)}}if(b.Sort){aa_sort_dataview(c,b.Sort)}return[a]}function aa_sort_dataview(f,c){if(!c||c.length==0){return f}if(c.length==1){var a=c[0].SortBy;for(var b in f){f[b].__Val=f[b]["__text_"+a]||f[b][a]}if(c[0].SortDirection=="ascending"){f.sort(function(h,g){return h.__Val>g.__Val?1:-1})}else{f.sort(function(h,g){return h.__Val<g.__Val?1:-1})}}else{function d(h,g){for(var l in c){var m=c[l];var k=m.SortBy;if(h[k]==g[k]){continue}if(m.SortDirection=="ascending"){return h[k]>g[k]?1:-1}else{return h[k]<g[k]?1:-1}}}f.sort(d)}return f}function aa_calcFields(m,g,n,c){if(g.length==0){return}var o=null;for(var l in m){var b=m[l];for(var h in g){var d=g[h];if(d.Id==""||d.CalcSequence){continue}var p=b.__item;b[d.Id]=aa_CalcValueFromWrapper(b,d,o);if(d.SortValFunc){b[d.Id]=d.SortValFunc(b[d.Id])}if(ajaxart.isxml(p)&&b[d.Id]){p.setAttribute(d.Id,b[d.Id])}else{if(p&&b[d.Id]){p[d.Id]=b[d.Id]}}}o=b}var a=[];for(var h in g){var d=g[h];if(d.Id!=""&&d.CalcSequence){d.CalcSequence(m,n)}for(var f in c){if(c[f].field.Id==d.Id){a.push(c[f])}}}for(var l in a){for(var h in m){if(a[l].PrepareElemCache){a[l].PrepareElemCache(a[l].field,m[h])}}}}function ajaxart_filter_dataitems(c,b,f,d){var h=aa_create_wrappers(c.Items,b,f,d);var g=aa_newDataHolder(h,d);g.UserDataView.Filters=f;g.UserDataView.CalcFilters();var a=g.UserDataView.CalcResults();c.Items=[];var h=a[0].Items;for(i in h){c.Items.push(h[i].__item||h[i])}}function aa_FilterAndSort(d,a){var g=d[0];var m=d[1];var k=m.Items[0];if(k.LargeDataItems&&k.ServerQuery){var l=aa_calcCntrQuery(m,a);ajaxart_async_Mark(a);jQuery(m.Ctrl).addClass("aa_loading");aa_runMethodAsync(k,k.ServerQuery,[m.Query],a,function(o,p){if(!m.Query.GroupByField){m.FilteredItems=o}else{m.Groups=o}jQuery(m.Ctrl).removeClass("aa_loading");ajaxart_async_CallBack([],a)});return}m.DataHolder=m.DataHolder||aa_createDataHolderFromCntr(m,a);var c=aa_FilterExpression(m,m.ExposedFilters,g,a);var h;var f=m.DataHolder.UserDataView.Sort=aa_cntrSortPrefrences(m)||m.DataHolder.UserDataView.Sort;if(c){var b=aa_filters_from_expression(c,m.Fields)}else{var b=[]}m.Filters=b;m.IDForFilteredResults=m.IDForFilteredResults?m.IDForFilteredResults+1:1;var h=m.DataHolder.newFiltersDataView(b,f,"user");h.CalcFilters();var n=h.CalcResults();m.FilteredWrappers=n[0].Items;return n}function aa_FilterExpression(l,c,g,b){var f="";var c=c||(l.DataHolder&&l.DataHolder.UserDataView.Filters);var k=true;for(var h in c){var a=c[h];var d=a.ToSQLText(a.rawFilterData);if(d==""){continue}if(!k){f+=" AND "}f+=a.field.Id+" "+a.op+" '"+d+"'";k=false}if(l.ExtraQueryExpression){f=l.ExtraQueryExpression(g,aa_ctx(b,{Exp:[f]}))[0]}if(f.indexOf(" AND ")==0){f=f.substring(5)}return f}function aa_CalcValueFromWrapper(g,f,b){try{if(f.WrapperToValue){return f.WrapperToValue(g,b)}if(f.ItemToText&&g.__item){return f.ItemToText(g.__item)}if(f.FieldData&&g.__item){var c=g.__item;var a=f.ItemToText?f.ItemToText(c):ajaxart.totext_array(ajaxart_field_calc_field_data(f,[c],context));return f.SortValFunc?f.SortValFunc(a):a}}catch(d){}return[]}function aa_cntrSortPrefrences(c){var b=jQuery(c.Ctrl).find(".aatable>thead").slice(0,1);var a=b.find(">tr>th").filter(".sort_ascending,.sort_descending")[0];if(a!=null){return[{SortBy:a.Field.Id,SortDirection:jQuery(a).hasClass("sort_ascending")?"ascending":"descending"}]}}function aa_create_filter(c,f,d){var d=d||"=";if(!c.newFilter){return}var b=ajaxart_writabledata();if(f){ajaxart.writevalue(b,[f])}var a=c.newFilter(b);a.rawFilterData=b;a.field=c;a.Id=c.Id+"_"+d;a.op=d;return a}ajaxart.gcs.dataview={DataViewQuery:function(c,d,a){var k=a.vars.DataHolderCntr&&a.vars.DataHolderCntr[0];if(!k){return[]}k.DataHolder=k.DataHolder||aa_createDataHolderFromCntr(k,a);var g=k.DataHolder;if(!g){return[]}var h=ajaxart.runsubprofiles(d,c,"Filter",a).join(" AND ");var b=aa_filters_from_expression(h,k.DataHolder.Fields);var f=ajaxart.runsubprofiles(d,c,"Sort",a);var l=g.newFiltersDataView(b,f);return l?[l]:[]},GroupByDataHolder:function(c,f,b){var m=b.vars.DataHolderCntr&&b.vars.DataHolderCntr[0];if(!m){return[]}m.DataHolder=m.DataHolder||aa_createDataHolderFromCntr(m,b);var h=m.DataHolder;if(!h){return[]}var l=ajaxart.runsubprofiles(f,c,"FilterBefore",b).join(" AND ");var a=aa_filters_from_expression(l,m.DataHolder.Fields);var g=aa_text(f,c,"GroupByFields",b);function d(n){return ajaxart.runsubprofiles(f,c,"Field",aa_ctx(b,{_FormulaInput:n}))}var k=h.newGroupBy(a,g,d);return k?[k]:[]},JSFormula:function(profile,data,context){var field=context.vars._Field[0];function aa_expressionToJs(exp,type){var funcObj={f:function(wrapper){return wrapper}};if(!exp||exp==""){return funcObj.f}var fixedExp=exp.replace(/%@?([a-zA-Z0-9_]+)%/g,"wrapper.$1");fixedExp=fixedExp.replace(/%=([^(]+)[(]Items[/]?@?([^)]*)[)]%/g,'aa_$1(wrapper.Items,"$2")');if(type=="truncated_number"){var func_str="a = { f: function(wrapper) { return Math.floor(("+fixedExp+") * 100) / 100} }"}else{if(type=="integer"){var func_str="a = { f: function(wrapper) { return Math.floor("+fixedExp+")} }"}else{var func_str="a = { f: function(wrapper) { return "+fixedExp+"} }"}}try{funcObj=eval(func_str)}catch(e){}return funcObj.f}function aa_expressionToJsForDataItem(exp,type){var funcObj={f:function(wrapper){return wrapper}};if(!exp||exp==""){return funcObj.f}var fixedExp=exp.replace(/%@?([a-zA-Z0-9_]+)%/g,'item[0].getAttribute("$1")');if(type=="truncated_number"){var func_str="a = { f: function(item) { return [Math.floor(("+fixedExp+") * 100) / 100]} }"}else{if(type=="integer"){var func_str="a = { f: function(item) { return [Math.floor("+fixedExp+")];} }"}else{var func_str="a = { f: function(item) { return ["+fixedExp+"]} }"}}try{funcObj=eval(func_str)}catch(e){}return funcObj.f}var formulaInput=context.vars._FormulaInput||data;aa_text(formulaInput,profile,"Expression",context);field.WrapperToValue=aa_expressionToJs(profile.getAttribute("Expression"),aa_text(data,profile,"ResultType",context));field.CalcFormula=aa_expressionToJsForDataItem(profile.getAttribute("Expression"),aa_text(data,profile,"ResultType",context));field.IsCalculated=true;return[]},DatePartFormula:function(d,g,b){var k=b.vars._Field[0];var h=aa_text(g,d,"Format",b);var a=aa_text(g,d,"Part",b);var c=aa_text(g,d,"Type",b);var f=aa_text(g,d,"BasedOnField",b);k.WrapperToValue=function(l,m){return function(p){var n=p[m];if(!n){return null}var o=aa_extractDatePart(new Date(n),l);if(c=="text"){return aa_format_date(h,o)}else{return o.getTime()}}}(a,f);k.CalcFormula=function(l,m){return function(o){var n=o[0].getAttribute[m];var p=aadate_date2int(n);if(!p){return null}var q=aa_extractDatePart(new Date(p),l);if(c=="text"){return aa_format_date(h,q)}else{return[q.getTime()]}}}(a,f);k.IsCalculated=true;return[k]},SequenceFormula:function(profile,data,context){var field=context.vars._Field[0];function aa_expressionToJs(exp){if(!exp){return}var fixedExp=exp.replace(/%@?([a-zA-Z0-9_]+)%/g,"wrapper.$1");fixedExp=fixedExp.replace(/%=([^(]+)[(]Items\/@?([^)]+)[)]%/g,'aa_$1(wrapper.Wrappers,"$2")');fixedExp=fixedExp.replace(/%[$]Prev\/@?([^%]*)%/g,"prev.$1");var func_str="a = { f: function(wrapper,prev) { return "+fixedExp+"} }";var a=eval(func_str);return a.f}field.CalcSequence=function(wrappers,dataHolder){aa_sort_dataview(wrappers,dataHolder.UserDataView.Sort);var fieldId=this.Id;var prev_wrapper=null;for(var i in wrappers){var wrapper=wrappers[i];if(this.RestartCondition&&prev_wrapper&&this.RestartCondition(wrapper,prev_wrapper)){prev_wrapper=null}if(!prev_wrapper){wrapper[fieldId]=this.FirstValue?this.FirstValue(wrapper):this.WrapperToValue(wrapper,0)}else{wrapper[fieldId]=this.WrapperToValue(wrapper,prev_wrapper)}if(wrapper.__item&&ajaxart.isxml(wrapper.__item)){wrapper.__item.setAttribute(fieldId,""+wrapper[fieldId])}prev_wrapper=wrapper}};field.WrapperToValue=aa_expressionToJs(profile.getAttribute("Expression"));field.FirstValue=aa_expressionToJs(profile.getAttribute("FirstValue")),field.RestartCondition=profile.getAttribute("RestartCondition")!=""?aa_expressionToJs(profile.getAttribute("RestartCondition")):null;var item=context.vars.PageSampleItems;if(item){var dtCtx=aa_ctx(context,{Prev:item});aa_text(item,profile,"Expression",dtCtx);aa_text(item,profile,"FirstValue",context);aa_text(item,profile,"RestartCondition",dtCtx)}},RangesFormula:function(f,k,b){function m(n,p){for(var o=0;o<n.length;o++){if(p>n[o].min&&p<=n[o].max){return n[o].text}}if(!n||n.length==0){return p}return n[n.length-1].text}function c(o,n){return function(p){return m(o,p[n])}}function g(o,n){return function(p){return[m(o,p[0].getAttribute(n))]}}var l=b.vars._Field[0];var d=aa_first(k,f,"BasedOnField",b);var a=l.Ranges=ajaxart.run(k,f,"Formula",b);l.WrapperToValue=c(a,d),l.CalcFormula=g(a,d);l.Options={isObject:true,Options:[]};for(var h in a){l.Options.Options.push({isObject:true,code:a[h].text,text:a[h].text})}ajaxart.runNativeHelper(k,f,"Aspects",b);aa_initOptionsObject(l.Options,b);aa_initPicklistField(l,k,f,b);return[]},FixedRanges:function(f,h,c){var d=aa_text(h,f,"Ranges",c).split(",");var p=[];for(var k=0;k<d.length;k++){var l=parseFloat(d[k]);l=parseFloat(l.toFixed(3)+"".replace(/0+$/,""));if(!isNaN(l)){p.push(l)}}var b=[];for(var k=0;k<p.length;k++){var o=p[k];var m=aa_text([o],f,"NumberFormat",c);if(k>0){var n=p[k-1];var a=aa_text([n],f,"NumberFormat",c);var g=aa_text(h,f,"RangeText",aa_ctx(c,{To:[o],From:[n]}));if(Math.abs(n-o)<0.00001){g=aa_text(m,f,"SingleRangeText",c)}b.push({isObject:true,min:n,max:o,text:g})}else{g=aa_text(h,f,"MinimumRangeText",aa_ctx(c,{To:[m]}));if(!aa_bool(h,f,"IncludeMinimumRange",c)){continue}b.push({isObject:true,min:-100000000,max:o,text:g})}}if(aa_bool(h,f,"IncludeMaximumRange",c)&&p.length>1){var a=aa_text([p.pop()],f,"NumberFormat",c);b.push({min:b[b.length-1].max,max:10000000000,text:aa_text(h,f,"MaximumRangeText",aa_ctx(c,{From:[a]}))})}if(aa_text(h,f,"Sort",c)=="reverse"){b=b.reverse()}return b},PivotFields:function(b,d,a){var m=a.vars.DataHolderCntr&&a.vars.DataHolderCntr[0];if(!m){return[]}var g=m.Fields;var k=aa_text(d,b,"BasedOnField",a);var h=aa_fieldById(k,g);if(!h){return[]}var o=h.Ranges||h.Options&&h.Options.Options;var n=[];for(var c in o){var f=o[c];var l={isObject:true,Title:f.text,Id:aa_string2id(f.text),PivotFieldId:k,PivotField:h,PivotValue:f.code||f.text,SubItems:function(s){var p=[];for(var q in s.Items){var r=s.Items[q];if(!h.Multiple){if(r[this.PivotFieldId]==this.PivotValue){p.push(r)}}else{var t=","+r[this.PivotFieldId]+",";if(t.indexOf(","+this.PivotValue+",")>-1){p.push(r)}}}return p},FieldData:function(q){var r=q[0];var p=this.SubItems(r);return[{isObject:true,Name:(r.Name||"")+" - "+this.Title+" "+this.PivotField.Title,Count:p.length,Items:p}]}};ajaxart.runsubprofiles(d,b,"FieldAspect",aa_ctx(a,{_Field:[l]}));n.push(l)}return n}};function aa_cntr_filterXml2Objects(g,d){var b=[];for(var c=0;c<d.attributes.length;c++){var a=d.attributes.item(c);var h=aa_fieldById(a.name,g.Fields);if(!h){continue}var f=aa_create_filter(h,d.getAttribute(a.name),"=");if(!f){h.newFilter=aa_create_text_filter();f=aa_create_filter(h,d.getAttribute(a.name),"=")}if(f){b.push(f)}}return b}function ajaxart_field_createControl(b,c,d,a){return ajaxart.trycatch(function(){var f=null;if(c.Multiple==true&&c.MultipleControl!=null){f=ajaxart_runMethod(d,c,"MultipleControl",a)}else{if(ajaxart_field_is_readOnly(b,c,a)){if(c.ReadOnlyControl){f=ajaxart_runMethod(d,c,"ReadOnlyControl",a)}else{if(c.Control){f=ajaxart_runMethod(d,c,"Control",a)}else{return[]}}}else{if(c.WritableControl){f=ajaxart.runScriptParam(d,c.WritableControl,a)}else{if(c.Control){f=ajaxart_runMethod(d,c,"Control",a)}}}}if(f==null){f=[ajaxart_field_createSimpleInput(d,a,ajaxart_field_is_readOnly(b,c,a))]}if(f.length==0){return[]}jQuery(f[0]).addClass("field_control fld_"+c.Id);f[0].Field=c;f[0].FieldData=d;f[0].jbContext=a;if(c.Css){var g=aa_ctx(a,{_FieldCtrl:f});ajaxart.runScriptParam(d,c.Css,g)}return f},function(f){ajaxart.logException(f);return[]})}function ajaxart_field_createCellControl(p,n,d,o,m,l,b){var c=aa_ctx(b,{Item:p,FieldData:l});jQuery(d).addClass("aa_cell_element");if(o==null){o="control"}if(m.CellPresentation!=null){o=m.CellPresentation}if(m.Width!=null){jQuery(d).css("width",m.Width)}d.CellPresentation=o;d.Field=m;d.FieldData=l;d.ItemData=p;d.jbContext=b;if(m.IsCellHidden&&m.IsCellHidden(p,b)){if(m.RenderHiddenCell){d.style.display="none"}else{return}}if(m.isOperation){var c=aa_ctx(c,{_ItemsOfOperation:p});var g=ajaxart.runComponent("operation.OperationCell",[m],c);if(g.length>0){d.appendChild(g[0])}return}if(m.CalculatedControl){jQuery(d).addClass("aa_text fld_"+m.Id);m.CalculatedControl(d,m,l,c);return}if(m.IsCalculated){var a=m.CalcFormula(p,c);var h=ajaxart.writevalue(l,a);if(!h){l=a}}if(o=="text"){jQuery(d).addClass("aa_text fld_"+m.Id);d.innerHTML=ajaxart_field_text(m,l,p,c)}else{if(o=="expandable text"){ajaxart_field_expandableText(d,n,m,l,p,c)}else{d.ReadOnly=ajaxart_field_is_readOnly(n,m,b);var k=ajaxart_field_createControl(n,m,l,c)[0];if(k!=null){d.appendChild(k);if(m.Validations){jQuery(k).addClass("aa_hasvalidations");k.jbCell=d}}else{jQuery(d).addClass("aa_text fld_"+m.Id);d.innerHTML=ajaxart_field_text(m,l,p,c)}}}jBart.trigger(m,"ModifyControl",{Wrapper:d,FieldData:l,Context:c,Item:p});if(m.ModifyControl){for(var f=0;f<m.ModifyControl.length;f++){m.ModifyControl[f](d,l,o,c,p)}}jBart.trigger(m,"ModifyCell",{Wrapper:d,FieldData:l,Context:c,Item:p});if(m.ModifyCell){for(var f=0;f<m.ModifyCell.length;f++){m.ModifyCell[f](d,l,o,c,p)}}return["true"]}function ajaxart_field_createSimpleInput(g,c,h,b){var l=c.vars._Field[0];var o=ajaxart_field_option_text(l,g,c);if(h){if(l.Text){o=aa_totext(l.Text(g,c))}var f=jQuery("<div/>").text(o).addClass("readonly")[0];return f}if(l.MultiLineTextStyle&&l.MultiLineText){var m=null;var a=l.MultiLineTextStyle;var d=jQuery(a.Html)[0];var n=aa_api_object(d,{Field:l,initTextArea:function(q){var p=this.getInnerElement(q);if(!p){return}m=p;m.jbApiObject=n}});aa_apply_style_js(n,a);jQuery(n).addClass(aa_attach_global_css(a.Css))}else{var m=document.createElement(l.MultiLineText?"textarea":"input")}aa_defineElemProperties(m,"Blur,Refresh,getValue,updateValue");if(!b){b="text"}m.setAttribute("type",b);if(l.XtmlSource&&l.XtmlSource[0].script){ajaxart.databind([m],g,c,l.XtmlSource[0].script)}m.jbData=g;m.onfocus=function(s){aa_validation_removeNoCloseMessages();var r=c.vars._Field[0];if(!r.DoNotSelectAllOnFocus){var q=function(t){setTimeout(function(){if(t.setSelectionRange){try{t.setSelectionRange(0,t.value.length)}catch(v){}}else{if(t.createTextRange){try{var u=t.createTextRange();u.moveStart("character",0);u.moveEnd("character",t.value.length);u.select()}catch(v){}}}})};if(ajaxart.controlOfFocus!=this){q(this)}}ajaxart.controlOfFocus=this;var r=c.vars._Field[0];aa_invoke_field_handlers(r.OnFocus,this,s,r,g);for(var p=m.parentNode;p;p=p.parentNode){if(p.onfocus){p.onfocus(s)}}return true};m.onblur=function(r){for(var p=m.parentNode;p;p=p.parentNode){if(p.onblur){p.onblur(r)}}if(this.IgnoreBlur){this.IgnoreBlur=false;return false}var q=c.vars._Field[0];ajaxart_field_RefreshDependentFields(q,this,c);aa_invoke_field_handlers(q.OnBlur,this,r,q,g);if(q.Validations){aa_handleValidations(q,this,g,c,"on blur")}return true};m.onkeydown=function(r){var q=c.vars._Field[0];r=r||event;if(q.KeyPressValidator&&r.keyCode!=8){var p=String.fromCharCode(r.keyCode);if(!q.KeyPressValidator.test(p)){return aa_stop_prop(r)}}var s=ajaxart.dialog.openPopups.length>0;aa_invoke_field_handlers(q.OnKeydown,this,r,q,g);if(aa_intest&&r.CharByChar){m.value+=String.fromCharCode(r.keyCode)}return true};m.onmousedown=function(q){var p=c.vars._Field[0];q=q||event;aa_invoke_field_handlers(p.OnMouseDown,this,q,p,g);return true};m.onmouseup=function(q){var p=c.vars._Field[0];q=q||event;aa_invoke_field_handlers(p.OnMouseUp,this,q,p,g);return true};m.oninput=function(p){m.updateValue(p)};if(ajaxart.isIE78){jQuery(m).bind("cut paste",null,function(p){setTimeout(function(){m.updateValue(p)},50)})}m.onkeyup=function(v){var q=this;var u=c.vars._Field[0];v=v||event;var t=v.keyCode;if(t==undefined&&!aa_intest&&!aa_inuiaction){return}aa_invoke_field_handlers(u.OnKeyup,this,v,u,g,{isObject:true,KeyCode:[""+t],CtrlKey:aa_frombool(v.ctrlKey)});var p=[9,13,16,17,18,27,63277,63276];for(var r=0;r<p.length;r++){if(t==p[r]){return true}}if(u.KeyPressValidator&&t!=8){var s=String.fromCharCode(t);if(!u.KeyPressValidator.test(s)){return aa_stop_prop(v)}}if(v.keyCode){q.KeyUp=true}q.updateValue(v);q.KeyUp=null;return true};m.Blur=function(){jQuery(this).blur()};m.Refresh=function(){var p=this;if(p.RefreshDescriptionForEmptyText){p.RefreshDescriptionForEmptyText()}if(p.jbApiObject){p.jbApiObject.trigger("refresh")}};m.getValue=function(){return this.value};m.updateValue=function(r){var q=c.vars._Field[0];if(!q.ManualWriteValue){var p=this.getValue();if(aa_totext(g)==p){return}ajaxart.writevalue(g,p);if(q.RefreshOn!="exit field"){aa_invoke_field_handlers(q.OnUpdate,this,r,q,g)}}if(q.Validations){aa_handleValidations(q,this,g,c,"on change")}};m.value=o;m.setAttribute("value",o);var k=aa_attach_global_css(aa_totext(ajaxart.run([],ajaxart.parsexml('<xtml t="jbart.TextboxCss" />'),"",c)),null,"textbox");jQuery(m).addClass("aa_simple_cell aatextbox").addClass(k);m.jbRemoveTextboxClass=function(){jQuery(m).removeClass("aatextbox").removeClass(k)};if(!h&&l.Validations){jQuery(m).addClass("aa_withvalidations")}return m}function ajaxart_field_expandableText(g,c,d,f,b,a){g.expandableText={States:{control:{Control:function(){g.State="control";jQuery(g).removeClass("aa_toggle_button");var k=ajaxart_field_createControl(c,d,f,a)[0];if(!c){return jQuery("<div></div>")[0]}g.appendChild(k);jBart.trigger(d,"ModifyControl",{Wrapper:g,FieldData:f,Context:a,Item:b});if(d.ModifyControl){for(var h=0;h<d.ModifyControl.length;h++){d.ModifyControl[h](g,f,"control",a,b)}}return k},ChangeStateLabel:"close",ChangeToState:"text"},text:{Control:function(){var h=ajaxart_field_text(d,f,b,a);if(h==""&&d.DescriptionForEmptyText){h=d.DescriptionForEmptyText}if(g.firstChild){aa_remove(g.firstChild,true)}g.innerHTML=h;jQuery(g).addClass("aa_text fld_"+d.Id);g.setAttribute("tabindex","1");g.State="text";if(d.ModifyCell){for(var k=0;k<d.ModifyCell.length;k++){d.ModifyCell[k](g,f,"text",a,b)}}g.onkeydown=function(l){if(jQuery(g).find(".field_control").length>0){return}d.ToggleExpandable(d,f,g,l);if(l.keyCode==13){return aa_stop_prop(l)}return true};return g},ChangeStateLabel:"",ChangeToState:"control"}},Build:function(l){aa_empty(g);g.onclick=null;jQuery(g).removeClass("aa_text");var k=l.Control();if(k==null){return g.expandableText.Build(g.expandableText.States.text)}var h=jQuery(k);if(l.ChangeStateLabel!=""){h=jQuery("<div>"+l.ChangeStateLabel+" </div>");g.appendChild(h[0]);aa_element_attached(g)}h.addClass("aa_toggle_button");h[0].onclick=function(o){var n=jQuery((typeof(event)=="undefined")?o.target:event.srcElement);if(n[0].parentNode==null){return true}var m=g.expandableText.States[l.ChangeToState];g.expandableText.Build(m);jQuery(g).find(">input").slice(0,1).focus();if(l.ChangeToState=="control"){aa_fixTopDialogPosition()}}}};g.expandableText.Build(g.expandableText.States.text);d.ToggleExpandable=function(n,p,h,m){if(m.keyCode==27){var o=h;if(!jQuery(o).hasClass("aa_cell_element")){o=jQuery(h).parents(".aa_cell_element")[0]}if(o==null){return}var k=o.expandableText.States[o.State];var l=o.expandableText.States[k.ChangeToState];o.expandableText.Build(l);if(jQuery(o).find(".field_control").length>0){jQuery(o).find(".field_control").focus()}else{jQuery(o).focus()}}}}function aa_handle_onload_validations(d){var a=jQuery(d).find(".aa_hasvalidations");for(var b=0;b<a.length;b++){var c=a[b];if(!c.ajaxart){continue}aa_handleValidations(c.ajaxart.params.vars._Field[0],c,c.ajaxart.data,c.ajaxart.params,"on load")}}function aa_handleValidations(l,m,d,b,o){if(!l.Validations){return}var h=b.vars._BartContext?b.vars._BartContext[0].ValidationStyle:aa_first([],ajaxart.parsexml('<xtml t="validation.Default" />'),"",b);h.inputForErrorClass=h.inputForErrorClass||aa_attach_global_css(h.CssForInput);if(m.ValidationErrorElement){jQuery(m.ValidationErrorElement).remove()}jQuery(m).removeClass("aa_input_with_error "+h.inputForErrorClass);jQuery(m).removeClass("aa_mandatory_error");if(jQuery(m).parents(".aa_hidden_field").length>0){return}for(var f=0;f<l.Validations.length;f++){var k=l.Validations[f];if(o!="on save"){if(o!=k.CheckValidation&&o!="on load"){continue}if(o=="on load"&&k.CheckValidation=="on save"){continue}}var n=!aa_tobool(k.Validation(d,b));if(!n){m.Error=ajaxart_multilang_text(aa_totext(k.ErrorMessage(d,b)),b);jQuery(m).addClass("aa_input_with_error "+h.inputForErrorClass);var g=ajaxart_multilang_text(aa_totext(k.ErrorMessage(d,b)),b);if(k.AddTitleToErrorMessage){g=ajaxart_multilang_text(l.Title+" "+g,b)}var a=aa_renderStyleObject(h,{errorText:g,Error:g,init:function(p){this.showError=p.showError;this.jbShowErrorSummary=p.showErrorSummary},styleObject:h,showError:function(){}},b);jQuery(a).addClass("aa_validation_error");if(k.Mandatory){jQuery(a).addClass("aa_mandatory_error")}if(k.HideErrorMessage){aa_hide(a)}m.ValidationErrorElement=a;var c=function(){a.showError(m,a,k.Mandatory)};if(m.parentNode!=null){c()}else{aa_addOnAttach(m,c)}return}}}function aa_validation_removeNoCloseMessages(){jQuery(document).find(".aa_noclose_message").remove()}function aa_validation_showerror(d,b,g,c){if(!d){return}if(!g||!g.styleObject){var f=aa_first([],ajaxart.parsexml('<xtml t="validation.Default" />'),"",ajaxart.newContext());g=aa_renderStyleObject(f,{errorText:"",init:function(h){this.jbShowErrorSummary=h.showErrorSummary}},c)}else{var f=g.styleObject}jQuery(d).find(".aa_noclose_message").remove();if(!g.jbShowErrorSummary){return}var a=jQuery('<div class="aa_noclose_message" />').addClass(aa_attach_global_css(f.CssForSummary))[0];a.innerHTML=b||"";g.jbShowErrorSummary(d,a);aa_fixTopDialogPosition()}function aa_passing_validations(d){if(d==null){return true}var c=ajaxart.newContext();jQuery(d).find(".aa_noclose_message").remove();var a=jQuery(d).find(".aa_hasvalidations");for(var b=0;b<a.length;b++){var g=a[b];if(g.updateValue){g.updateValue()}aa_handleValidations(g.jbCell.Field,g,g.jbCell.FieldData,g.jbCell.jbContext,"on save");c=g.jbCell.jbContext}var f=jQuery(d).find(".aa_mandatory_error")[0];if(f&&f.jbShowErrorSummary){aa_validation_showerror(d,f.Error,f,c);return false}var h=jQuery(d).find(".aa_validation_error");if(h.length>0){if(h[0].jbShowErrorSummary){aa_validation_showerror(d,ajaxart_multilang_text(h[0].innerHTML,c),h[0],c);h[0].innerHTML=""}return false}return true}function aa_clear_jb_classes(c){var b=c.className.split(" ");for(var a=0;a<b.length;a++){if(b[a].indexOf("jb")==0){jQuery(c).removeClass(b[a])}}}function aa_refresh_cell(o,a,f){var d=jQuery(o).hasClass("aa_cell_element")?o:jQuery(o).parents(".aa_cell_element")[0];if(!d){return}if(d.Refresh){return d.Refresh()}var k=d.Field;if(k==null){return}if(k.Refresh){k.Refresh([],a)}var g=d.FieldData;var b=d.ItemData;var n=jQuery(d).parents(".aa_container")[0];var h=n?n.Cntr:{};newContext=aa_ctx(a,{_Field:[k],FieldTitle:[k.Title],_Item:b,_Cntr:[h]});g=ajaxart_field_calc_field_data(k,b,newContext);if(f&&d.childNodes.length==1){var c=d.firstChild;while(d.firstChild){aa_remove(d.firstChild,true)}ajaxart_field_createCellControl(b,h,d,d.CellPresentation,k,g,newContext);var m=d.firstChild;d.insertBefore(c,d.firstChild);f.replace(c,m,a)}else{aa_empty(d,true);aa_clear_jb_classes(d);if(k.AsSection&&!k.HideTitle){var l=jQuery(d).parents(".aa_section")[0];if(!l||!l.parentNode){return}d=l.parentNode;aa_empty(d,true);aa_clear_jb_classes(d);d.appendChild(aa_buildSectionControl(h,k,g,b,newContext))}else{ajaxart_field_createCellControl(b,h,d,d.CellPresentation,k,g,newContext)}}aa_element_attached(d)}function aa_add_field_type_triplet(d,b,c,a){d.Control=function(m,p){p=aa_ctx(p,{_Field:[d]});var n=p.vars._Cntr&&p.vars._Cntr[0];var f=d.Text?""+d.Text(m,p):aa_totext(m,p);var o=f.replace(/\n/g,"</BR>");var l={text:o,rawtext:f,val:aa_totext(m,p),totext:function(){return aa_totext(m,p)},readonly:ajaxart_field_is_readOnly(n,d,p),set:function(q){if(aa_totext(q)==aa_totext(m)){return}if(!d.ManualWriteValue){ajaxart.writevalue(m,q);aa_invoke_field_handlers(d.OnUpdate,this.jbInput,null,d,m)}if(d.Validations){aa_handleValidations(d,this,c,a,"on change")}},data:m[0],initInput:function(t){var r=jQuery(this.getInnerElement(t))[0];this.jbInput=r;var q=this;var s=q.totext();r.onfocus=function(v){ajaxart.controlOfFocus=this;aa_invoke_field_handlers(d.OnFocus,this,v,d,c);for(var u=r.parentNode;u;u=u.parentNode){if(u.onfocus){u.onfocus(v)}}return true};r.onblur=function(v){for(var u=r.parentNode;u;u=u.parentNode){if(u.onblur){u.onblur(v)}}ajaxart_field_RefreshDependentFields(d,this,a);aa_invoke_field_handlers(d.OnBlur,this,v,d,c);if(d.Validations){aa_handleValidations(d,this,c,a,"on blur")}return true};r.onkeydown=function(v){v=v||event;if(d.KeyPressValidator&&v.keyCode!=8){var u=String.fromCharCode(v.keyCode);if(!d.KeyPressValidator.test(u)){return aa_stop_prop(v)}}aa_invoke_field_handlers(d.OnKeydown,this,v,d,c);if(aa_intest&&v.CharByChar){r.value+=String.fromCharCode(v.keyCode)}return true};r.onmousedown=function(u){u=u||event;aa_invoke_field_handlers(d.OnMouseDown,this,u,d,c);return true};r.onmouseup=function(u){u=u||event;aa_invoke_field_handlers(d.OnMouseUp,this,u,d,c);return true};r.oninput=function(u){r.updateValue(u)};if(ajaxart.isIE78){jQuery(r).bind("cut paste",null,function(u){setTimeout(function(){r.updateValue(u)},50)})}r.onkeyup=function(z){var v=this;z=z||event;var y=z.keyCode;if(y==undefined&&!aa_intest&&!aa_inuiaction){return}aa_invoke_field_handlers(d.OnKeyup,this,z,d,c,{isObject:true,KeyCode:[""+y],CtrlKey:aa_frombool(z.ctrlKey)});var u=[9,13,16,17,18,27,63277,63276];for(var w=0;w<u.length;w++){if(y==u[w]){return true}}if(d.KeyPressValidator&&y!=8){var x=String.fromCharCode(y);if(!d.KeyPressValidator.test(x)){return aa_stop_prop(z)}}if(z.keyCode){v.KeyUp=true}v.updateValue(z);v.KeyUp=null;return true};r.Blur=function(){jQuery(this).blur()};r.Refresh=function(){var u=this;if(u.RefreshDescriptionForEmptyText){u.RefreshDescriptionForEmptyText()}if(u.jbApiObject){u.jbApiObject.trigger("refresh")}};r.getValue=function(){return this.value};r.updateValue=function(u){if(!d.ManualWriteValue){q.set(this.value)}};r.value=s;r.setAttribute("value",s)}};var h=jQuery(b.Html);var g=aa_api_object(h,l);var k=aa_apply_style_js(g,b,p);if(k){h=jQuery(k)}aa_api_object(h,l);h.addClass(aa_attach_global_css(b.Css));return[h[0]]}}var aa_navigation_codes=[38,40,33,34,63277,63276];aa_gcs("field_aspect",{Picklist:function(b,d,a){var f=ajaxart_fieldaspect_getField(a);f.Multiple=aa_bool(d,b,"Multiple",a);f.RecalculateForEachCell=aa_bool(d,b,"RecalculateForEachCell",a);if(aa_paramExists(b,"AllowValueNotInOptions")){f.AllowValueNotInOptions=aa_bool(d,b,"AllowValueNotInOptions",a)}f.AllowEmptyValue=aa_bool(d,b,"AllowEmptyValue",a);if(!f.RecalcOptions){f.RecalcOptions=function(g,h){var k=aa_first(g,b,"Options",aa_merge_ctx(a,h))||{Options:[]};k.TreeSeparator=aa_text(d,b,"PickTreePathSeparator",a);if(k.TreeSeparator==""){k.TreeSeparator=null}aa_initOptionsObject(k,h);return k}}f.ManualWriteValue=true;f.OptionsObject=f.Options;f.Options=f.RecalcOptions(d,a);aa_initPicklistField(f,d,b,a);var c=aa_first(d,b,"ControlStyle",a);if(c&&c.Triplet){f.Control=function(k,g){var h={};f.initInput(h,k,g);return[aa_renderStyleObject(c,h,a)]}}return[]}});function aa_initOptionsObject(b,a){if(b==null||b.Initialized){return}b.codeToOption=function(d){return this.CodeToOptionHash[d]};b.codeToText=function(d){return this.CodeToTextHash[d]||d};b.textToCode=function(d){return this.TextToCodeHash[d]||d};b.codeToImage=function(d){if(!this.CodeToOptionHash[d]){return""}return this.CodeToOptionHash[d].image||""};b.SourceToOption=function(f){for(var d in this.Options){if(this.Options[d].source==f[0]){return[this.Options[d]]}}return[]};b.CodeToText=function(f,d){return[this.codeToText(f[0])]};b.TextToCode=function(f,d){return[this.textToCode(f[0])]};b.OptionText=function(f,d){return[f[0].text]};b.OptionImage=function(f,d){return[f[0].image||""]};b.TextToCodeHash={};b.CodeToTextHash={};b.CodeToOptionHash={};b.HasImages=false;function c(d,h){if(h==null){h=""}if(d==null){return}for(var f=0;f<d.length;f++){var g=d[f];if(g==null){continue}if(g.Categories){c(g.Categories,g.IsCategory&&b.TreeSeparator?g.text+b.TreeSeparator:h)}if(g.Options){c(g.Options,g.IsCategory&&b.TreeSeparator?g.text+b.TreeSeparator:h)}g.text=h+(g.text||g.code);g.code=g.code||g.text;if(g.text.constructor.toString().indexOf("Array")!=-1){g.text=g.text[0]}g.text=ajaxart_multilang_text(g.text,a);if(g.image&&g.image!=""){b.HasImages=true}b.TextToCodeHash[g.text]=g.code;b.CodeToTextHash[g.code]=g.text;b.CodeToOptionHash[g.code]=g}}c(b.Options);if(b.IsTree){c(b.Categories)}b.IsValidOptionText=function(f,d){return this.TextToCodeHash[d]!=null};b.IsValidOptionCode=function(f,d){return this.CodeToTextHash[d]!=null||(f.AllowEmptyValue&&d=="")};b.FixedCodes=function(n,m,h){var l=this;var f=m;if(n.Multiple){f=f.replace(/[,]+$/,"").replace(/^[,]+/,"")}if(n.AllowValueNotInOptions){return f}if(n.Multiple){var d="";var g=f.split(",");for(var k=0;k<g.length;k++){if(l.IsValidOptionCode(n,g[k])){d+=g[k]}if(k!=g.length-1){d+=","}}f=d}else{if(!l.IsValidOptionCode(n,f)){f=h}}return f};b.CodesToText=function(l,g){var k=this;if(g==""){return""}if(l.Multiple){var d="";var f=g.split(",");for(var h=0;h<f.length;h++){d+=k.codeToText(f[h]);if(h!=f.length-1){d+=","}}return d}return k.codeToText(g)};b.TextToCodes=function(l,g){var k=this;if(g==""){return""}if(l.Multiple){var d="";var f=g.split(",");for(var h=0;h<f.length;h++){d+=k.textToCode(f[h]);if(h!=f.length-1){d+=","}}return d}return k.textToCode(g)};b.Text=function(k,d){var f=this;var h=ajaxart.totext_array(d);var g=f.FixedCodes(k,h,"");return f.CodesToText(k,g)};b.Initialized=true}function aa_initPicklistField(d,c,b,a){if(!d.AllowEmptyValue){d.DefaultValue=function(f,g){var h=d.Options;if(h.IsTree&&h.Categories[0]&&h.Categories[0].Options[0]){return[h.Categories[0].Options[0].code]}if(h.Options[0]){return[h.Options[0].code]}return[]}}d.Text=function(g,h){var f=ajaxart.totext_array(g);if(d.Multiple){var l=f.split(",");f="";for(var m=0;m<l.length;m++){f+=d.Options.codeToText(l[m]);if(m!=l.length-1){f+=", "}}}else{var n=f;var f=d.Options.codeToText(n);if(d.Options.HasImages){var k=d.Options.codeToImage(n);if(k!=null&&k!=""){f="<img class='aa_imagebeforetext' src='"+k+"'/>"+f}}}return[f]};d.OptionPage=function(k,n,m,p,l){var h=document.createElement("span");if(k!=null&&k.OptionPage!=null){p=k.ItemForOptionPage||p;var g=aa_totext(m).replace(new RegExp(" ","g"),"_").replace(new RegExp("/","g"),"_");var o={isObject:true,PageID:g,DataItems:{isObject:true,Items:p}};if(l){o.ReadOnly=true}var f=aa_ctx(a,{_PageParams:[o]});h=ajaxart_runMethod(p,k.OptionPage,"Control",f)[0]}jQuery(h).addClass("aa_option_page");return h};d.RefreshOptionPage=function(n,o,p,k){var l=n.FieldData;var m=jQuery(n).find(".field_control")[0];if(!m){return}var f=m.relevantOptionsObject()||m.Options;if(f==null){return}var h=f.codeToOption(ajaxart.totext_array(l));var g=this.OptionPage(h,d,l,o);if(!n.jbOptionsPageElement){if(n.jbFieldElement&&n.jbFieldElement.jbOptionsPage){n.jbOptionsPageElement=n.jbFieldElement.jbOptionsPage()}if(!n.jbOptionsPageElement){n.jbOptionsPageElement=jQuery("<div/>")[0];n.appendChild(n.jbOptionsPageElement)}}n.jbOptionsPageElement=aa_replaceElement(n.jbOptionsPageElement,g,true)};d.initInput=function(g,h,f){aa_defineElemProperties(g,"FixValue,Refresh,Clear,Save,ContainsValue,UpdateFromPopupAndClose,PopupCntr,relevantField,relevantOptionsObject,setValue,ClosePopup,OpenPopup,TogglePopup");g.FixValue=function(p){var s=this;if(!s.getValue){return}var m=s.relevantOptionsObject();var r=s.relevantField();var k=ajaxart.totext_array(h);var l=m.FixedCodes(r,k,"");var q=m.TextToCodes(r,s.getValue());var n=m.FixedCodes(r,q,l);var o=m.CodeToOptionHash[q];if(o){o=[o.source]}else{o=[]}if(k!=n&&p){ajaxart.writevalue(h,n);if(r.EnrichData){r.EnrichData(r,h)}aa_invoke_field_handlers(r.OnUpdate,s,null,r,h,{isObject:true,OldValue:[k],Option:o})}s.setValue(m.CodesToText(r,n))};g.SetPicklistValue=function(n,k){var o=g.relevantField();var l=ajaxart.totext_array(h);var m=aa_tobool(k.vars.ForPreviewOnly);if(!m){g.LastValue=ajaxart.totext_array(n)}ajaxart.writevalue(h,n,m);if(o.EnrichData){o.EnrichData(o,h)}aa_invoke_field_handlers(o.OnUpdate,g,null,o,h,{isObject:true,OldValue:[l]});g.Refresh()};g.RecalcOptions=function(l,k){var m=g.relevantField();g.OptionObjects[m.Id||""]=m.RecalcOptions([],k)};g.Refresh=function(){var k=this;var l=k.relevantOptionsObject();var m=k.relevantField();k.setValue(l.Text(m,h));if(k.RefreshDescriptionForEmptyText){k.RefreshDescriptionForEmptyText()}};g.Clear=function(){this.value="";this.FixValue(true)};g.Save=function(){this.FixValue(true)};g.ContainsValue=function(l){var m=ajaxart.totext_array(h);var k=l[0].code;return((","+m+",").indexOf(","+k+",")!=-1)};g.UpdateFromPopupAndClose=function(m,l,k){return g.UpdateFromPopup(m,l,k,true)};g.UpdateFromPopup=function(n,q,o,t){var v=this;var l=v.PopupCntr();if(l&&l.PicklistField){var m=v.OptionObjects[l.PicklistField.Id||""];if(!n||n.length==0){n=ajaxart_itemlist_getSelectedItems(l)}if(d.SearchBox){v.ClosePopup();v.value="";if(v.RefreshDescriptionForEmptyText){v.RefreshDescriptionForEmptyText()}aa_invoke_field_handlers(d.OnUpdate,v,null,d,n,{isObject:true,Option:n});return}if(n.length>0&&!n[0].code){var p=m.SourceToOption(n)[0];if(!p){p=m.codeToOption(n)}if(p){n=[p]}}if(t){jQuery(l.Ctrl).find(".aa_selected_item").removeClass("aa_selected_item")}if(n.length>0&&!n[0].UnSelectable){var s=m.OptionText(n)[0];if(d.Multiple){var u=v.getValue().split(",").pop();var r=m.IsValidOptionText(l.PicklistField,u);if(!r){if(v.getValue().indexOf(",")==-1){v.setValue("")}else{v.setValue(v.getValue().replace(/[,][^,]*$/,""))}}if((","+v.getValue()+",").indexOf(","+s+",")!=-1){var w=","+v.getValue()+",";w=w.replace(","+s+",",",");w=w.replace(/[,]+$/,"").replace(/^[,]+/,"");v.setValue(w)}else{if(v.getValue()==""){v.setValue(s)}else{v.setValue(v.getValue()+","+s)}}}else{v.setValue(s)}v.Save()}if(d.Multiple){var k=jQuery(l.Ctrl).find(".aa_item").get();ajaxart_uiaspects_refreshElements(k);if(o&&!d.AllowValueNotInOptions){v.setValue(v.getValue()+",")}}else{if(t){v.ClosePopup()}}if(n.length==0){if(t){v.ClosePopup()}v.Save()}}if(d.AllowValueNotInOptions&&o){v.Save()}return[]};g.PopupCntr=function(){var m=ajaxart.dialog.openPopups;for(var n in m){if(m[n].onElem==g){var k=m[n].contents;var l=jQuery(k).hasClass("aa_container")?k:jQuery(k).find(".aa_container")[0];if(!l){return}l.Cntr.Dlg=m[n].Dlg;return l.Cntr}}};g.relevantField=function(){return d};g.relevantOptionsObject=function(){return this.OptionObjects[this.relevantField().Id||""]};g.setValue=function(k){if(g.value!=k){g.value=k}g.setAttribute("value",k)};g.ClosePopup=function(){var k=this.relevantField();if(g.PopupCntr()){aa_closePopup()}};g.RevertToLastValue=function(){if(g.LastValue!=null&&g.value!=g.LastValue){g.setValue(g.LastValue);g.Save()}if(d.RevertToOriginalValue){d.RevertToOriginalValue(g,h,f)}},g.OpenPopup=function(k){var m=this;if(m.calcOpenPopupField){m.calcOpenPopupField()}var n=this.relevantField();if(n.DynamicSuggestions){m.OptionObjects[n.Id||""]=n.RecalcOptions([],f)}if(n.RecalcOccurrences){n.RecalcOccurrences(m.OptionObjects[n.Id||""],f)}var l=m.PopupCntr();if(l&&(l.PicklistField!=n||m.relevantOptionsObject().Options.length==0)){m.ClosePopup();l=m.PopupCntr()}if(!l&&n.OpenPopup){m.LastValue=m.value;if(n.StoreOriginalValue){n.StoreOriginalValue(m,f)}n.OpenPopup(c,aa_ctx(f,{_PicklistInput:[m],_Field:[n],OptionsObj:[m.OptionObjects[n.Id||""]]}))}var o=0;function q(){if(o++<10){l=m.PopupCntr();if(l){p();return}else{setTimeout(q,100)}}}q();function p(){if(l.Dlg&&!n.Multiple){jBart.bind(l.Dlg,"cancel",function(){m.RevertToLastValue()})}if(l){l.PicklistPopup=true;l.InputCtrl=m;l.PicklistField=n;var r=m.getValue();if(n.Multiple){r=m.getValue().split(",").pop()}if(k&&l.DoFind&&!jQuery(m).attr("readonly")){l.DoFind(r.toLowerCase());if(l.Ctrl.parentNode&&l.Ctrl.parentNode.RePosition){l.Ctrl.parentNode.RePosition()}}if(!k&&l.SelectByPattern){l.SelectByPattern(r.toLowerCase())}}}};g.TogglePopup=function(){if(!g.PopupCntr()){g.OpenPopup()}else{g.ClosePopup()}};g.addOptions=function(k,l){var q=this;q.optionElems=[];var s=this.getInnerElement(k);if(!s||!l){return}var r=s.parentNode;for(var o=0;o<d.Options.Options.length;o++){var p=d.Options.Options[o];var m=s.cloneNode(true);r.insertBefore(m,s);var n=aa_api_object(m,{Option:p,Field:d,Text:p.text,isSelected:function(){var u=aa_totext(h);var t=this.Option.code;if(u.indexOf(t)==-1){return false}if(d.Multiple){return(","+u+",").indexOf(","+t+",")>-1}else{return u==t}},select:function(){if(d.Multiple&&aa_totext(h)){var v=this.Option.code;var u=aa_totext(h).split(",");for(var t=0;t<u.length;t++){if(u[t]==v){return}}u.push(v);q.set(u.join(","))}else{q.set(this.Option.code)}},toggleSelection:function(){if(this.isSelected()){this.unSelect()}else{this.select()}},unSelect:function(){if(!this.isSelected()){return}if(d.Multiple){var v=this.Option.code;var u=aa_totext(h).split(",");for(var t=0;t<u.length;t++){if(u[t]==v){u.splice(t,1);break}}q.set(u.length>0?u.join(","):"")}else{q.set("")}},setSelectedOnClick:function(t){var u=this;if(u.isSelected()){jQuery(u).addClass(t)}jQuery(u).click(function(){var v=u.isSelected();u.toggleSelection();if(q.Multiple){jQuery(u).toggleClass(t)}else{jQuery(q.optionElems).removeClass(t);if(!v){jQuery(u).addClass(t)}}})}});this.optionElems.push(n);l(n,q)}s.parentNode.removeChild(s)};g.set=function(k){ajaxart.writevalue(h,k);d.RefreshOptionPage(this.parentNode,f.vars._Item,false);aa_invoke_field_handlers(d.OnUpdate,this,null,d,h);this.trigger("update")};g.get=function(){return aa_totext(h)};g.clear=function(){this.set("")};g.createClearButton=function(l,n){var k=this;var m=jQuery("<div />").text(n);if(k.get()==""){m.addClass(l)}m.click(function(){k.clear();jQuery(k.optionElems).removeClass(l);m.addClass(l)});k.bind("update",function(){if(k.get()){m.removeClass(l)}else{m.addClass("selected")}});return m[0]}};aa_field_handler(d,"ModifyControl",function(f,o,l,g,m){if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){if(l=="control"){var k=d.Options.CodeToOptionHash[aa_totext(o)];if(k&&k.OptionPage){f.appendChild(d.OptionPage(k,f.Field,o,m,true))}}return}var h=jQuery(f).find(".field_control")[0];if(d.DelayedOptionCalculation){d.DynamicSuggestions=true}if(h!=null){aa_defineElemProperties(h,"OptionObjects");h.OptionObjects={};if(d.RecalculateForEachCell){h.OptionObjects[d.Id||""]=d.RecalcOptions(m,g)}else{h.OptionObjects[d.Id||""]=d.Options}var n=aa_ctx(g,{_Field:[d],_FieldData:o,_Input:[h],_Item:m});d.initInput(h,o,aa_merge_ctx(a,n));h.FixValue();if(!d.AllowValueNotInOptions&&d.Options&&d.Options.Options.length<3&&!d.Options.Categories){jQuery(h).attr("readonly","readonly")}}if(l=="control"&&d.RefreshOptionPage){d.RefreshOptionPage(f,m,false)}});aa_field_handler(d,"OnUpdate",function(m,n,h,l,g){var f=jQuery(h).parents(".aa_cell_element")[0];if(jQuery(f).parents(".aa_item")[0]){var k=jQuery(f).parents(".aa_item")[0].ItemData;m.RefreshOptionPage(f,k,true,(g&&g.OldValue)?g.OldValue[0]:null)}});aa_field_handler(d,"OnKeydown",function(n,o,h,m){var f=false;var l=m.keyCode;for(var k=0;k<aa_navigation_codes.length;k++){if(l==aa_navigation_codes[k]){f=true}}if(n.Options.IsTree){f=f||l==37||l==39}if(f){if(ajaxart.dialog.openPopups.length>0){ajaxart_stop_event_propogation(m)}var g=h.PopupCntr();if(g){g.SelectionKeydown(m);if(g.ToggleByKeyboard){g.ToggleByKeyboard(m)}}return false}if(l==13){if(ajaxart.dialog.openPopups.length>0){ajaxart_stop_event_propogation(m)}h.UpdateFromPopupAndClose(null,null,true)}if(l==9){h.FixValue();return}if(l==27){var g=h.PopupCntr();if(g){jBart.trigger(g.Dlg,"cancel");h.ClosePopup();ajaxart_stop_event_propogation(m)}return false}});aa_field_handler(d,"OnKeyup",function(m,n,g,l){var f=false;var k=l.keyCode;if(k==40&&g.PopupCntr()==null){g.OpenPopup();return false}for(var h=0;h<aa_navigation_codes.length;h++){if(k==aa_navigation_codes[h]){f=true}}if(m.Options.IsTree){f=f||k==37||k==39}if(f){return true}if(k==9){g.UpdateFromPopupAndClose(null,null,true);return}if(k==13||k==27||k==9){return true}if(m.Multiple&&k==188){g.OpenPopup(true);return}if(m.AllowValueNotInOptions||(m.AllowEmptyValue&&g.getValue()=="")){g.Save()}g.OpenPopup(true)});aa_field_handler(d,"OnBlur",function(h,k,f,g){f.FixValue();f.Save();f.ClosePopup();if(ajaxart.controlOfFocus==f){ajaxart.controlOfFocus=null}if(f.RefreshDescriptionForEmptyText){f.RefreshDescriptionForEmptyText()}return true});aa_field_handler(d,"OnMouseDown",function(h,k,f,g){f.OpenPopup()})}ajaxart.gcs.picklist={SoftPickOnHover:function(f,g,d){var c={isObject:true};var b=aa_int(g,f,"TimeBeteenPicks",d)||500;c.InitializeContainer=function(h,k){var m=k.vars._Cntr[0];var l=k.vars._Input&&k.vars._Input[0];if(!l){return}l.SoftPickOnHover=true;jBart.bind(m,"selection",function(n){if(n.method=="hover"||n.method=="keyboard"){l.UpdateFromPopup(n.selected.ItemData,n.context,false,false)}})};var a=ajaxart.runNativeHelper(g,f,"RequiresAspects",d);a.push(c);return a},CheckBox:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var k=g.vars._Cntr[0];function h(l,o){var m=l.vars._Input[0];var q=l.vars._FieldData;var p=l.vars._Field[0];var n=ajaxart.totext_array(q);ajaxart.writevalue(q,o);if(p.EnrichData){p.EnrichData(p,q)}aa_invoke_field_handlers(p.OnUpdate,m,null,p,q,{isObject:true,OldValue:[n]});m.Refresh()}k.SelectAll=function(m,l){var n=l.vars._Input[0];var o="";jQuery(this.Ctrl).find(".aacheckbox_value").parent().filter(".aa_item").each(function(){o+=this.ItemData[0].code+","});o=o.substring(0,o.length-1);h(l,o);n.ClosePopup();n.OpenPopup()};k.ClearAll=function(m,l){var n=l.vars._Input[0];h(l,"");n.ClosePopup()}};a.InitializeElements=function(f,g){var k=g.vars._Elems;var h=g.vars._Input[0];for(var l=0;l<k.length;l++){var m=k[l];if(m.ItemData[0].UnSelectable){continue}var n=document.createElement("input");n.className="aacheckbox_value";n.setAttribute("type","checkbox");n.onclick=function(o){h.focus();return false};if(h.ContainsValue(m.ItemData)){aa_checked(n,true)}jQuery(m).find(">.aacheckbox_value").remove();ajaxart_uiaspects_append(m,n)}};return[a]},ItemTextForPicklist:function(d,f,c){var b=aa_attach_global_css(aa_text(f,d,"ItemCss",c),null,"picklistitem");var a=aa_attach_global_css(aa_text(f,d,"OccurrencesCss",c),null,"occurrences");return[{InitializeContainer:function(g,h){var k=h.vars._Cntr[0];k.ItemText=function(n,l){var m=n[0];return[m.IsOperation?m.Title():m.text]}},InitializeElements:function(m,s){var g=s.vars._Elems;var p=s.vars._Field[0];for(var n in g){var k=g[n];var l=document.createElement("span");l.className="aa_text "+b;l.setAttribute("tabindex",1);var r=k.ItemData[0];if(r.IsOperation){var q=r.Title()}else{var q=r.text}if(p.Options.IsTree&&p.Options.TreeSeparator){q=r.text.split(p.Options.TreeSeparator).pop()}l.innerHTML=q;jQuery(k).find(">.aa_text_and_occ").remove();if(p&&p.OccurrencesCtrl){var o=document.createElement("span");o.className="aa_text_and_occ";o.appendChild(l);jQuery(l).css("padding","0 3px 0 0");var h=p.OccurrencesCtrl(k.ItemData,s);jQuery(h).addClass("aa_not_selectable aa_occurences").addClass(a);o.appendChild(h);if(k.ItemData[0].Occ&&k.ItemData[0].Occ.length==0){jQuery(k).addClass("aa_zero_occ")}ajaxart_uiaspects_append(k,o)}else{ajaxart_uiaspects_append(k,l)}}}}]},PopupItems:function(g,h,f){var b=[];var d=f.vars._Input[0].relevantOptionsObject();var a=d.Options;if(d.IsTree){ajaxart.concat(b,d.Categories)}for(var c=0;c<a.length;c++){if(!a[c].Hidden){b.push(a[c])}}return b},SimpleOptions:function(g,h,f){var c={isObject:true,Options:[]};var b=ajaxart_run_commas(h,g,"Options",f);for(var d=0;d<b.length;d++){b[d]=b[d].replace(/^\s+|\s+$/g,"")}var a=aa_text(h,g,"DefaultImage",f);a=a!=""?a:null;for(var d=0;d<b.length;d++){c.Options.push({isObject:true,code:b[d],image:a})}return[c]},RichOptions:function(d,f,c){var b={isObject:true,Options:[]};var a=ajaxart.runsubprofiles(f,d,"Option",c);b.Options=a;return[b]},OptionsWithOperations:function(c,d,b){var a=aa_first(d,c,"Options",b);a.Operations=function(f,g){return ajaxart.runsubprofiles(f,c,"Operation",aa_merge_ctx(b,g))};return[a]},DynamicOptions:function(d,v,c){var s={isObject:true,Options:[]};var f=ajaxart.run(v,d,"Options",c);var o=ajaxart.fieldscript(d,"OptionCode",true);var g=ajaxart.fieldscript(d,"OptionPage",true);var h=ajaxart.fieldscript(d,"OptionLabel",true);var p=ajaxart.fieldscript(d,"OptionImage",true);var t=aa_optimized_compile_text_single(d,"OptionCode",c);var l=aa_optimized_compile_text_single(d,"OptionLabel",c);var k=aa_optimized_compile_text_single(d,"OptionImage",c);var u=aa_bool(v,d,"OptionCodeByIndex",c);for(var r=0;r<f.length;r++){var b=f[r];var a=null;var m=null;var n=null;if(o){a=t(b,c)}else{if(u){a=""+r}else{a=ajaxart.totext_item(b)}}if(h){m=l(b,c)}if(p){n=k(b,c)}var q={isObject:true,code:a,text:m,image:n,source:b,Node:b};if(g){q.OptionPage=aa_first([b],d,"OptionPage",c)}s.Options.push(q)}return[s]},CalcOccurrencesWithFilters:function(b,c,a){var d=a.vars._Field[0];if(d==null){return}d.CountOccurences=function(m,l,g){for(var h in g.Options){var k=g.Options[h];k.filter=l.newFilter([k.code])}for(h in m){var n=m[h];for(var f in g.Options){var k=g.Options[f];if(k.filter.Match(l,n)){if(!k.Total){k.Total=[]}if(!k.Occ){k.Occ=[]}k.Total.push(n);if(!n.hidden){k.Occ.push(n)}}}}}},ShowOccurrences:function(c,g,b){var k=b.vars._Field[0];if(k==null){return}k.DelayedOptionCalculation=true;k.DynamicSuggestions=true;function f(l){for(var m in l){l[m].Total=[];l[m].Occ=[]}}function d(m){f(m.Options);for(var l in m.Categories){d(m.Categories[l])}}if(!k.CountOccurences){k.CountOccurences=function(q,t,u){var s=t.Id;if(t.Options&&t.Options.FilteredField){s=t.Options.FilteredField.Id}for(var o in q){var l=q[o];var m=l[s];if(t.Multiple){var r=m.split(",")}else{var r=[m]}for(var n in r){var m=r[n];var p=u.CodeToOptionHash[m];if(!p){continue}if(!p.Total){p.Total=[]}if(!p.Occ){p.Occ=[]}p.Total.push(l);if(!l.hidden){p.Occ.push(l)}}}}}k.RecalcOccurrences=function(w){var s=b.vars.DataHolderCntr[0];var v=null;if(k.FilterBaseFieldID){v=aa_fieldById(k.FilterBaseFieldID,s.Fields)}v=v||(b.vars._OriginalField||b.vars._Field)[0];var u=v.Id;if(k.Options&&k.Options.FilteredField){u=k.Options.FilteredField.Id}s.DataHolder=s.DataHolder||aa_createDataHolderFromCntr(s,b);var r=s.DataHolder.Wrappers;var n=s.DataHolder.UserDataView.Filters;if(!w){return}f(w.Options);for(var p in w.Categories){d(w.Categories[p])}for(var p in r){var l=r[p];var o=l[u];var q=false;for(j in n){var m=n[j];if(m.field.Id==u){continue}m.SetFilterData(m.rawFilterData);if(m.Match(m.field,l)==false){q=true}}l.hidden=q}this.CountOccurences(r,v,w);var t=aa_text(g,c,"SortBy",b);if(t=="filtered occurrences"){w.Options.sort(function(y,x){return x.Occ.length-y.Occ.length})}else{if(t=="original occurrences"){w.Options.sort(function(y,x){return x.Total.length-y.Total.length})}else{if(t=="ascending"){w.Options.sort(function(y,x){return(y.code<x.code)?-1:1})}else{if(t=="descending"){w.Options.sort(function(y,x){return(x.code<y.code)?-1:1})}}}}};k.CalcOccOfCategory=function(p){var o=[];var n=[];for(var m in p.Options){o=o.concat(this.Options.CodeToOptionHash[p.Options[m].code].Occ||[]);n=n.concat(this.Options.CodeToOptionHash[p.Options[m].code].Total||[])}for(var m in p.Categories){var l=this.CalcOccOfCategory(p.Categories[m]);o=o.concat(l.Occ);n=n.concat(l.Total)}p.Occ=o;p.Total=n;return{Occ:o,Total:n}};function h(n,p){var o=b.vars.DataHolderCntr[0];var l=aa_is_rtl(o.Ctrl,b)?"&rlm;":"";if(p){var m=jQuery("<span>"+n.length+"</span>")[0]}else{var m=jQuery("<span>"+l+" ("+n.length+")</span>")[0]}m.Occ=n;if(o.OccurrencesFollowup){jQuery(m).addClass("aa_hyperlink");m.onclick=function(q){o.OccurrencesFollowup(this.Occ,aa_ctx(o.Context,{ControlElement:[m],_ItemsOfOperation:this.Occ}))}}return m}k.OccurrencesCtrl=null;var a=aa_text(g,c,"Show",b);if(a=="filtered occurrences"){k.OccurrencesCtrl=function(l,m){if(!this.Options){return[""]}if(!l[0].Occ){this.CalcOccOfCategory(l[0])}var n=h(l[0].Occ);jQuery(n).addClass("aa_filter_occurrences");return n}}else{if(a=="original occurrences"){k.OccurrencesCtrl=function(l,m){if(!this.Options){return[""]}if(!l[0].Occ){this.CalcOccOfCategory(l[0])}var n=h(l[0].Total);jQuery(n).addClass("aa_filter_occurrences");return n}}else{if(a=="filtered and original"){k.OccurrencesCtrl=function(m,n){if(!this.Options){return[""]}if(!m[0].Occ){this.CalcOccOfCategory(m[0])}var l="";var s=ajaxart_multilang_text("Of",b);var o=m[0];var q=o.Occ;var p=o.Total;var r;if(q.length==p.length){r=h(m[0].Occ)}else{r=document.createElement("span");r.appendChild(jQuery("<span> (</span>")[0]);r.appendChild(h(q,true));r.appendChild(jQuery('<span style="padding:3px;">of</span>')[0]);r.appendChild(h(p,true));r.appendChild(jQuery("<span>)</span>")[0])}return r}}}}return[]},SuggestionsFromData:function(g,v,f){var p=f.vars.DataHolderCntr[0];var c=f.vars._Field[0];p.DataHolder=p.DataHolder||aa_createDataHolderFromCntr(p,f);var t=p.DataHolder;c.DelayedOptionCalculation=true;if(!aa_bool(v,g,"Static",f)){c.DynamicSuggestions=true}var b=aa_bool(v,g,"SupportMultiple",f);var s={isObject:true,Options:[]};if(!p||!c||!p||!t.UserDataView||!t.Wrappers){return[s]}var m=t.Wrappers;var d={};var u=f.vars._OriginalField[0];var h=u?u.Id:c.Id;var a=ajaxart.compile_text(g,"TextPattern",f);for(var r in m){var k=m[r];var q=false;var l=k[h];var o=[l];if(b){o=l.split(",");for(j in o){o[j]=aa_text_trim(o[j])}}for(j in t.UserDataView.Filters){var n=t.UserDataView.Filters[j];if(n.field.Id==h){continue}if(n.Match(n.field,k)==false){q=true}}for(j in o){var w=o[j];d[w]=d[w]||{isObject:true,code:w,Total:0,Occ:[],text:a([w],f)};d[w].Total++;if(!q){d[w].Occ.push(k)}}}if(!aa_bool(v,g,"IncludeSpace",f)&&d[""]){delete d[""]}for(var w in d){s.Options.push(d[w])}s.Options.sort(function(y,x){return y.Occ.length<x.Occ.length?1:-1});u.Options=s;if(b){u.Multiple=true}u.Options.CodeToOptionHash=d;return[s]},OptionsTree:function(c,d,b){var a={isObject:true,Options:[],IsTree:true};a.Categories=ajaxart.runsubprofiles(d,c,"Category",b);return[a]},DynamicTree:function(d,f,c){var b={isObject:true,IsTree:true,Options:[],Categories:[]};var a=aa_bool(f,d,"Recursive",c);var h=function(o,m,q){for(var l=0;l<m.length;l++){var n=m[l];var p=ajaxart.run([n],d,"NextLevel",c);var k={isObject:true};k.code=aa_text([n],d,"OptionCode",c);k.text=aa_text([n],d,"OptionLabel",c);k.image=aa_text([n],d,"OptionImage",c);k.source=n;if(p.length>0){k.IsCategory=true;k.Options=[];k.Categories=[];k.UnSelectable=!aa_bool([n],d,"MiddleNodeSelectable",c);o.Categories.push(k);if(a&&q<20){h(k,p,q+1)}}else{o.Options.push(k)}}};var g=ajaxart.run(f,d,"FirstLevel",c);h(b,g,0);return[b]},DynamicTreeByCategories:function(c,f,a){var d={isObject:true,IsTree:true,Options:[],Categories:[]};var k=ajaxart.run(f,c,"Categories",a);category_set={};for(var g=0;g<k.length;g++){var l={isObject:true,Options:[],IsCategory:true,UnSelectable:!aa_bool([k[g]],c,"CategorySelectable",a)};l.text=aa_text([k[g]],c,"CategoryName",a);l.code=aa_text([k[g]],c,"CategoryCode",a);l.image=aa_text([k[g]],c,"CategoryImage",a);var b=aa_first([k[g]],c,"SubTree",a);l.Options=b?b.Options:[];l.Categories=b?b.Categories:[];if(!l.code||!category_set[l.code]){d.Categories.push(l)}category_set[l.code]=true}var m=ajaxart.run(f,c,"Options",a);for(var g=0;g<m.length;g++){var h={isObject:true};h.code=aa_text([m[g]],c,"OptionCode",a);h.text=aa_text([m[g]],c,"OptionName",a);h.image=aa_text([m[g]],c,"OptionImage",a);d.Options.push(h)}return[d]},OptionCategory:function(c,d,b){var a=ajaxart.gcs.picklist.RichOptions(c,d,b)[0];a.text=aa_text(d,c,"Name",b);a.code=aa_text(d,c,"Code",b);a.image=aa_text(d,c,"Image",b);a.Categories=ajaxart.runsubprofiles(d,c,"Category",b);a.IsCategory=true;a.UnSelectable=!aa_bool(d,c,"Selectable",b);return[a]},Option:function(c,d,a){var b={isObject:true,code:aa_text(d,c,"Option",a),image:aa_text(d,c,"Image",a),text:ajaxart_multilang_text(aa_text(d,c,"DisplayName",a),a),OptionPage:aa_first(d,c,"OptionPage",a)};if(b.text==""){b.text=null}return[b]},InlineItems:function(b,h,a){var c=aa_text(h,b,"Image",a);var m=aa_text_comma_seperate(aa_text(h,b,"Items",a));var g=[];for(var l=0;l<m.length;l++){g.push({isObject:true,Label:m[l],Code:m[l],Image:c})}var k=ajaxart.subprofiles(b,"AdvancedItem");for(var l=0;l<k.length;l++){var d=aa_first(h,k[l],"",a);var n=false;for(var f=0;f<g.length;f++){if(g[f].Label==d.Label){g[f]=d;n=true}}if(!n){g.push(d)}}return g},OptionsOfFilteredField:function(c,f,b){var a=b.vars._Field[0].FilterBaseFieldID;if(!b.vars.DataHolderCntr||!a){return}var d=b.vars.DataHolderCntr[0];var g=aa_fieldById(a,d.Fields);if(g&&g.Options){return[{isObject:true,Options:g.Options.Options,FilteredField:g,Categories:g.Options.Categories}]}},DataOfFilteredField:function(c,h,a){var k=a.vars._Field[0].FilterBaseFieldID;if(!a.vars.DataHolderCntr||!k){return}var n=a.vars.DataHolderCntr[0];var m=aa_fieldById(k,n.Fields);if(!m){return}var f={isObject:true,Options:[],FilteredField:m},o={};n.DataHolder=n.DataHolder||aa_createDataHolderFromCntr(n,a);var l=n.DataHolder.Wrappers;for(var g in l){var d=l[g][k];var b=typeof(d)=="number"?""+d:aa_totext(d);o[b]=o[b]||{isObject:true,code:b,Total:0,Occ:[],text:b};o[b].Total++}for(var b in o){f.Options.push(o[b])}return[f]}};function ajaxart_field_option_text(c,d,a){var b=ajaxart.totext_array(d);if(c.Options&&c.Options.codeToText){return c.Options.codeToText(b)}return b}function aa_optimized_compile_text_single(d,h,c){var f=ajaxart.fieldscript(d,h,true);if(!f){return null}if(f.nodeType==2){var b=f.nodeValue;var a=b.match(/^%@([a-zA-Z_0-9]+$)%/);if(a&&a[1]){return function(k){return k.getAttribute(a[1])}}}var g=ajaxart.compile(d,h,c);return function(l,k){return ajaxart_runcompiled_text(g,[l],d,h,k)}}aa_noOfOpenDialogs=0;aa_dialogCounter=0;openDialogs=[];aa_openDialogs=[];aa_gcs("dlg",{OpenDialog:function(b,c,a){var f={isObject:true};f.Title=aa_multilang_text(c,b,"Title",a);f.Data=ajaxart.run(c,b,"DialogData",a);f.Contents=aa_first(f.Data,b,"Contents",a);f.noOfOpenDialogs=window.aa_noOfOpenDialogs;f.Style=aa_first(c,b,"Style",a);f.Mode=f.Style.Mode;f.Context=a;f.onElem=aa_first(c,b,"LauncherElement",a);f.JBStudio=(f.onElem&&jQuery(f.onElem).parents(".jbstudio_dlg").length>0);function d(g){g.createFrame=function(){if(!g.ShowFocusUnderline){g.Style.Css+=" #this *:focus { outline:none; }"}this.StyleClass=aa_attach_global_css(this.Style.Css);var k=jQuery(this.Style.Html);k.addClass(this.StyleClass);k.addClass(ajaxart.deviceCssClass||"");if(g.JBStudio){k.addClass("jbstudio_dlg")}var l=aa_api_object(k);aa_apply_style_js(l,this.Style);return k[0]};g.ContentsPlaceholder=function(){var k=this.Frame;if(jQuery(k).hasClass("aa_dialogcontents")){return k}return jQuery(k).find(".aa_dialogcontents")[0]};g.RunOnOK=function(){ajaxart.run(this.Data,b,"RunOnOK",a)};g.OK=function(k,l){if(!g.Frame){return}var m=g.ContentsPlaceholder();if(!aa_passing_validations(m)){return}aa_runMethodAsync(this,this.RunBeforeOK,this.Data,g.Context,function(){if(jQuery(m).find(".aa_noclose_message").length>0){return}g.Close(k,l);var n=aa_ctx(a,{DialogOriginalData:g.Data});if(g.onElem){n.ControlElement=[g.onElem]}ajaxart.run(g.Data,b,"RunOnOK",n)})};g.Apply=function(l,m){var k=aa_ctx(a,{DialogOriginalData:g.Data});ajaxart.run(this.Data,b,"RunOnOK",k)};g.Cancel=function(k,l){this.Close(k,l);if(this.RunOnCancel){this.RunOnCancel(c,a)}jBart.trigger(g,"cancel")};g.Open=function(k,m){var q=this;if(!ajaxart.inPreviewMode){if(!this.DontCloseOtherPopupsOnOpen){if(!q.JBStudio){while(ajaxart.dialog.openPopups.length>0){aa_closePopup(ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1])}}else{var n=[];for(var o=0;o<ajaxart.dialog.openPopups.length;o++){var l=ajaxart.dialog.openPopups[o];if(!l.Dlg||!l.Dlg.JBStudio){n.push(l)}else{aa_uncapture_for_popup(l);if(!l.Dlg){aa_remove(l.contents.parentNode,true)}if(l.Dlg){l.Dlg.Close([],ajaxart.newContext(),true)}}}ajaxart.dialog.openPopups=n}}}if(this.Mode=="dialog"){aa_noOfOpenDialogs++}q.Frame=q.createFrame();aa_invoke_dialog_handlers(q.BeforeOpen,q,a);aa_openDialogs.push(q);if(this.Mode=="popup"){q.Popup={Dlg:q,contents:q.Frame,onElem:q.onElem};ajaxart.dialog.openPopups.push(q.Popup);setTimeout(function(){aa_capture_for_popup(q.Popup);q.Popup.initialized=true},1)}q.Frame.Dialog=q;var r=jQuery(q.Frame);aa_defineElemProperties(q.Frame,"counter");q.Frame.counter=++aa_dialogCounter;if(q.ZIndex){r.css("zIndex",q.ZIndex)}else{r.css("zIndex",2001+aa_dialogCounter)}r.addClass("aa_dlg").addClass(q.DialogClass||"");q.Rtl=aa_is_rtl(q.onElem)&&!q.AlwaysLTR;if(jQuery(q.onElem).parents(".jbstudio").length>0){r.addClass("jbstudio")}if(q.Rtl){r.addClass("right2left")}if(!ajaxart.inPreviewMode){r.addClass("aa_dlg").css("position","absolute")}if(q.Title&&r.find(".aa_dialog_title").length>0){var p=jQuery('<div class="aa_dialog_title_text"/>')[0];p.innerHTML=q.Title;r.find(".aa_dialog_title")[0].appendChild(p)}if(q.Contents){q.ContentsPlaceholder().appendChild(q.Contents);q.Contents.tabIndex=0}if(q.Buttons&&q.Buttons.length>0&&q.ButtonsControl){jQuery(q.Frame).find(".aa_dialogbuttons")[0].appendChild(q.ButtonsControl(k,m))}q._FixDialogPosition=function(){var s=q.isReady;if(!q.isReady&&r.find(".aa_dialog_not_ready").length>0){q.isReady=false;return}q.isReady=true;if(q.FixDialogPosition){q.FixDialogPosition(s?false:true)}r.show()};if(!ajaxart.inPreviewMode){document.body.appendChild(q.Frame);r.hide();q._FixDialogPosition(true);aa_element_attached(q.Frame)}jQuery(q.Frame).keydown(function(s){aa_invoke_dialog_handlers(q.KeyDown,s||event,a)});aa_invoke_dialog_handlers(q.AfterOpen,q,a)};g.Close=function(k,l,m){var l=this.Context||l;aa_invoke_dialog_handlers(this.BeforeClose,this);if(this.RunBeforeClose){this.RunBeforeClose(k,aa_ctx(l,{ControlElement:[this.Frame]}))}var n=this.Frame;if(!this.Frame){return}aa_remove(this.Frame,true);this.Frame=null;if(this.Mode=="dialog"){aa_noOfOpenDialogs--}else{if(!m){aa_closePopup(this.Popup)}}aa_invoke_dialog_handlers(this.AfterClose,this);if(this.RunOnClose){this.RunOnClose(k,l)}jBart.utils.removeFromArray(aa_openDialogs,this)};var h=aa_ctx(a,{_Dialog:[g]});g.Style.Features(c,h);ajaxart.runNativeHelper(c,b,"MoreFeatures",h);ajaxart.runsubprofiles(c,b,"Feature",h);g.Open(c,h)}d(f)},AboveLauncher:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(f){var n=this.onElem;if(!f||!n||!this.Frame){return}var m=jQuery(this.Frame);var o=aa_text(c,b,"Location",a);var p;if(window.innerHeight){p={pageYOffset:window.pageYOffset,pageXOffset:window.pageXOffset,innerHeight:window.innerHeight,innerWidth:window.innerWidth}}else{if(document.documentElement&&document.documentElement.clientHeight){p={pageYOffset:document.documentElement.scrollTop,pageXOffset:document.documentElement.scrollLeft,innerHeight:document.documentElement.clientHeight,innerWidth:document.documentElement.clientWidth}}else{if(document.body){p={pageYOffset:document.body.scrollTop,pageXOffset:document.body.scrollLeft,innerHeight:document.body.clientHeight,innerWidth:document.body.clientWidth}}}}p.innerWidth-=18;var g=false;jQuery(n).parents().each(function(){if(jQuery(this).css("position")=="fixed"){g=true}});if(g){p.pageYOffset=p.pageXOffset=0;m[0].style.position="fixed"}m.show();var h=this.Frame.offsetHeight;var t=this.Frame.offsetWidth;var s=n.offsetHeight;var r=n.offsetWidth;var l=ajaxart.ui.absoluteLeft(n)+r/2-t/2;var k=ajaxart.ui.absoluteTop(n)+s/2-h/2;var q=4;if(l<p.pageXOffset+q){l=p.pageXOffset+q}if(k<p.pageYOffset+q){k=p.pageYOffset+q}if(l+t+q>p.pageXOffset+p.innerWidth){l=p.pageXOffset+p.innerWidth-t-q}if(k+h+q>p.pageYOffset+p.innerHeight){k=p.pageYOffset+p.innerHeight-h-q}m.css("top",k).show();m.css("left",l)}},CenteringLauncher:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(f,o){var n=this.onElem;if(!n||!this.Frame){return}var m=jQuery(this.Frame);var l=ajaxart.ui.absoluteLeft(n)+(jQuery(n).width()/2);var k=ajaxart.ui.absoluteTop(n)+(jQuery(n).height()/2);var g=m.outerWidth();var p=m.outerHeight();var q=l-(g/2);var h=k-(p/2);if(q<0){q=0}if(h<0){h=0}m.css("left",q).css("top",h).show();aa_invoke_dialog_handlers(d.PositionChanged,d,a)}},NearLauncher:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(o,m){var q=this.onElem;if(!q||!this.Frame){return}if(!o&&this.Frame.offsetHeight==this.lastHeight){return}var l=jQuery(this.Frame);var t=aa_text(c,b,"Location",a);var w;if(window.innerHeight){w={pageYOffset:window.pageYOffset,pageXOffset:window.pageXOffset,innerHeight:window.innerHeight,innerWidth:window.innerWidth}}else{if(document.documentElement&&document.documentElement.clientHeight){w={pageYOffset:document.documentElement.scrollTop,pageXOffset:document.documentElement.scrollLeft,innerHeight:document.documentElement.clientHeight,innerWidth:document.documentElement.clientWidth}}else{if(document.body){w={pageYOffset:document.body.scrollTop,pageXOffset:document.body.scrollLeft,innerHeight:document.body.clientHeight,innerWidth:document.body.clientWidth}}}}var r=false;jQuery(q).parents().each(function(){if(jQuery(this).css("position")=="fixed"){r=true}});if(r){w.pageYOffset=w.pageXOffset=0;l[0].style.position="fixed"}l.show();var p=this.Frame.offsetHeight;var f=this.Frame.offsetWidth;var n=q.offsetHeight;var x=q.offsetWidth;var s=aa_bool(c,b,"PopupLeftOfLauncher",a);this.lastHeight=p;if(f>w.innerWidth){l.css("max-width",w.innerWidth+"px");f=this.Frame.offsetWidth}if(p>w.innerHeight){l.css("max-height",w.innerHeight+"px");p=this.Frame.offsetHeight}var h=ajaxart.ui.absoluteLeft(q),g=ajaxart.ui.absoluteTop(q);if(!aa_bool(c,b,"HidingLauncher",a)){g+=n+2}var u=2;if(this.popupLocation=="up"||(t!="below launcher"&&w.innerHeight+w.pageYOffset<g+p&&w.pageYOffset<=g-p-n-u)){this.popupLocation="up";g-=p+n+u+2}else{if(t=="below,above or aside of launcher"&&w.innerHeight+w.pageYOffset<g+p&&w.pageYOffset>g-p-n-u*2){g=w.innerHeight/2-p/2+w.pageYOffset;if(!s&&h+x+f+u<=w.pageXOffset+w.innerWidth){h=h+x+u}else{if(h-f>=w.pageXOffset||s){h=h-f-u;s=false}else{h=w.innerWidth/2-f/2+w.pageXOffset}}}}if(w.innerHeight+w.pageYOffset<g+p){var y=p-l.height();l.css("max-height",w.innerHeight+w.pageYOffset-g-y-u+"px");if(w.innerHeight+w.pageYOffset-g-y-u<=0){d.Close()}}if(w.pageXOffset+w.innerWidth<h+f){if(h-f+x>=w.pageXOffset){h=h+x-f;s=false}else{}}if(aa_bool(c,b,"UseFixedPosition",a)&&!r){l[0].style.position="fixed";h-=w.pageXOffset;g-=w.pageYOffset}if(o||m){var k=s?h-l.width():h,v=g;k+=aa_int(c,b,"DeltaX",a);v+=aa_int(c,b,"DeltaY",a);if(k+l.width()>w.innerWidth){k=w.innerWidth-l.width()}if(k<0){k=0}if(window.fb_params){k+=9}l.css("left",k).css("top",v).show();aa_invoke_dialog_handlers(d.PositionChanged,d,a)}if(aa_bool(c,b,"PopupAtLeastWideAsLauncher",a)){l.css("min-width",x+"px")}}},TopZIndexWhenTouching:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(g,f){jQuery(g.Frame).find(".aa_dialog_title").mousedown(function(){g.setAsTop()});g.setAsTop()});d.setAsTop=function(){var k=jQuery(".aa_dlg");var h=0;for(var g=0;g<k.length;g++){if(k[g].Dialog==d){continue}var f=parseInt(jQuery(k[g]).css("z-index")||"0")||0;if(f>h){h=f}}var l=parseInt(jQuery(d.Frame).css("z-index")||"0")||0;if(l<=h){jQuery(d.Frame).css("z-index",h+1)}}},InScreenCenter:function(b,c,a){var d=a.vars._Dialog[0];d.FixDialogPosition=function(f){if(!d.alreadyShown&&!f){return}if(f){d.firstTimeShow=new Date().getTime()}var g=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var h=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);var n=document.body.scrollLeft||document.documentElement.scrollLeft;var m=document.body.scrollTop||document.documentElement.scrollTop;if(!this.Frame){return}var k=jQuery(this.Frame);var p=jQuery(this.ContentsPlaceholder());if(p.height()>p[0].scrollHeight){p.height(p[0].scrollHeight)}if(p.width()>p[0].scrollWidth){p.width(p[0].scrollWidth)}var o=k.height()-p.height();var q=k.width()-p.width();if(k.height()>h){p.height(h-o-50)}if(k.width()>g){p.width(g-q-50)}var l=false;if(ajaxart.ui.absoluteLeft(k[0])<0||g-k.width()-ajaxart.ui.absoluteLeft(k[0])<0){l=true}if(ajaxart.ui.absoluteTop(k[0])<0||h-k.height()-ajaxart.ui.absoluteTop(k[0])<0){l=true}if(f||aa_bool(c,b,"AlwaysInScreenCenter",a)||l){k.css("left",Math.max(5,(g-k.width())/2)+"px");k.css("top",Math.max(5,(h-k.height())/2)+"px");k[0].style.position="fixed"}d.alreadyShown=true}},UseLauncherWidth:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(g,f){if(g.onElem){g.Frame.style.width=g.onElem.offsetWidth+"px"}})},ArrowToLaunchingElement:function(d,g,c){var k=c.vars._Dialog[0];var h=aa_first(g,d,"ArrowImage",c);if(h&&h.Url){h.StaticUrl=aa_totext(h.Url(g,c))}var f=jQuery('<div class="aa_dialog_arrow" style="position:absolute"/>')[0];aa_set_image(f,h,false);var b=aa_int(g,d,"DeltaX",c);var a=aa_int(g,d,"DeltaY",c);if(window.fb_params){a-=9}f.jbDlg=k;jQuery("body").append(f);aa_register_handler(k,"PositionChanged",function(o,l){var p=o.onElem;if(!p){return}var n=ajaxart.ui.absoluteLeft(p);var m=ajaxart.ui.absoluteTop(p)+jQuery(p).height();jQuery(f).css("left",n+(jQuery(p).width()/2)+b);jQuery(f).css("top",m+a);jQuery(f).css("z-index",parseInt(o.Frame.style.zIndex)+1);if(o.DialogClass){jQuery(f).addClass("aa_dialog_arrow_"+o.DialogClass)}});aa_register_handler(k,"AfterClose",function(o,l){var m=jQuery("body>.aa_dialog_arrow");for(var n=0;n<m.length;n++){if(m[n].jbDlg=o){aa_remove(m[n],true)}}})},UniquePopup:function(d,f,c){var g=c.vars._Dialog[0];var h=aa_text(f,d,"Identifier",c);if(aa_bool(f,d,"AutoClose",c)){var a=jQuery("body").find(".aa_dlg");for(var b=0;b<a.length;b++){if(a[b].Dialog.Identifier==h){a[b].Dialog.Close([],c)}}}g.Identifier=h;if(aa_bool(f,d,"KeepPopupLocation",c)){jBart.vars.dialogLocations=jBart.vars.dialogLocations||{};aa_register_handler(g,"BeforeClose",function(l,k){jBart.vars.dialogLocations[h]={left:l.Frame.style.left,top:l.Frame.style.top,position:l.Frame.style.position,right:l.Frame.style.right}});aa_register_handler(g,"BeforeOpen",function(l,k){if(!jBart.vars.dialogLocations[h]){return}l.OrigFixDialogPosition=l.FixDialogPosition;l.FixDialogPosition=function(m){if(!m){if(!l.OrigFixDialogPosition){return}return l.OrigFixDialogPosition(m)}l.Frame.style.left=jBart.vars.dialogLocations[h].left;l.Frame.style.top=jBart.vars.dialogLocations[h].top;l.Frame.style.position=jBart.vars.dialogLocations[h].position;l.Frame.style.right=jBart.vars.dialogLocations[h].right;l.OrigFixDialogPosition(false)}})}},DragDialog:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(h,f){var g=jQuery(h.Frame).find(".aa_dialog_title")[0]||(jQuery(h.Frame).hasClass("aa_dialog_title")&&h.Frame);aa_enable_move_by_dragging(h.Frame,g,function(){})})},DialogFrame:function(b,c,a){var d=a.vars._Dialog[0];d.createFrame=function(){var g=this;var f='<table cellpadding="0" cellspacing="0"><tbody class="aa_dlg_tbody"><tr><td class="aa_dialog_title"/></tr><tr><td style="vertical-align:top"><div class="aa_dialogcontents"/></td></tr><tr><td class="aa_dialogbuttons"/></tr></tbody></table>';var h=jQuery(f);aa_enable_move_by_dragging(h[0],h.find(".aa_dialog_title")[0],function(){ajaxart_dialog_close_all_popups()});return h[0]}},PopupFrame:function(b,c,a){var d=a.vars._Dialog[0];d.PopupStyle=aa_text(c,b,"Style",a);d.createFrame=function(){var f='<div class="aa_popup aa_dialogcontents" style="'+this.PopupStyle+'"/>';return jQuery(f)[0]}},Css:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(h,g){var f=aa_attach_global_css(aa_text(c,b,"Css",a));jQuery(h.Frame).addClass(f)})},MobileFullScreen:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(k,f){var h=k.ContentsPlaceholder();jQuery(h).addClass("aa_mobile_full_screen");var g=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var l=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);aa_set_element_size(h,(g-150)+"px,"+(l-150)+"px")});if(!window.aa_MobileFullScreen_orientation){window.aa_MobileFullScreen_orientation=function(g){var f=jQuery(".aa_mobile_full_screen")[0];if(!f){return}var h=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var k=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);aa_set_element_size(f,(h-150)+"px,"+(k-150)+"px")};aa_add_onorientationchange(aa_MobileFullScreen_orientation)}},HoverPopup:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"BeforeOpen",function(l,g){var k=[];for(var h in ajaxart.dialog.openPopups){var f=ajaxart.dialog.openPopups[h];if(f.Dlg&&f.Dlg.HoverPopup&&f.Dlg!=l){f.Dlg.Close()}else{k.push(f)}}ajaxart.dialog.openPopups=k});aa_register_handler(d,"AfterOpen",function(g,f){g.HoverPopup=true;g.OrigMouseOut=g.onElem.onmouseout;g.OrigMouseOver=g.onElem.onmouseover;g.StartClosingPopup=function(){setTimeout(function(){if(g.Frame&&!g.Frame.isInside){g.OK(c,a)}},200)};g.onElem.onmouseout=function(){if(g.Frame){g.Frame.isInside=false}if(!g.Frame.hasFocus){g.StartClosingPopup()}if(g.OrigMouseOut){g.OrigMouseOut()}};g.onElem.onmouseover=function(){if(g.Frame){g.Frame.isInside=true}};g.Frame.onmouseover=function(){g.Frame.isInside=true};g.Frame.onmouseout=function(){g.Frame.isInside=false;if(!g.Frame.hasFocus){g.StartClosingPopup()}};g.Frame.onfocus=function(){g.Frame.hasFocus=true};g.Frame.onblur=function(){g.Frame.hasFocus=false}});aa_register_handler(d,"AfterClose",function(g,f){g.onElem.onmouseout=g.OrigMouseOut;g.onElem.onmouseover=g.OrigMouseOver})},CloseWhenClickingOutside:function(b,c,a){var d=a.vars._Dialog[0];d.Orig_mousedown=(window.captureEvents)?window.onmousedown:document.onmousedown;function f(h){var k=a.vars._Dialog[0];var g=jQuery((typeof(event)=="undefined")?h.target:(event.tDebug||event.srcElement));if(g.parents("html").length==0){return}if(k.Frame==g.parents(".aa_dlg")[0]){return}k.OK(c,a)}setTimeout(function(){if(window.captureEvents){window.onmousedown=f}else{document.onmousedown=f}},1);aa_register_handler(d,"AfterClose",function(h,g){if(window.captureEvents){window.onmousedown=h.Orig_mousedown}else{document.onmouseclick=h.Orig_mousedown}})},OKOnEnter:function(b,c,a){var d=a.vars._Dialog[0];d.OKOnEnter=aa_bool(c,b,"Enabled",a);aa_register_handler(d,"KeyDown",function(h,f){if(h.keyCode!=13||!d.OKOnEnter){return}var g=(typeof(event)=="undefined")?h.target:event.srcElement;if(!g||g.tagName.toLowerCase()!="textarea"){d.OK(c,a)}})},CloseOnEsc:function(b,c,a){var d=a.vars._Dialog[0];d.CloseOnEsc=aa_bool(c,b,"Enabled",a);aa_register_handler(d,"KeyDown",function(g,f){if(g.keyCode==27){d.Cancel()}})},ButtonsHorizontal:function(b,c,a){var d=a.vars._Dialog[0];d.ButtonsControl=function(h,p){var k=jQuery('<table cellpadding="4"><tr/></table>')[0];var o=aa_text(c,b,"Align",a);var m=o;if(o=="auto"){m=d.Rtl?"left":"right"}jQuery(k).css("float",m);var n=jQuery(k).find("tr")[0];for(var l=0;l<this.Buttons.length;l++){var f=this.Buttons[l].Control(h,p)[0];var g=jQuery("<td/>")[0];g.appendChild(f);n.appendChild(g)}return k}},DialogShadow:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(l,f){var k=jQuery('<tr class="dialog_right_shadow_tr"><th class="dialog_shadow_extra_th"/><th rowspan="6" class="dialog_right_shadow_th"><div class="dialog_right_shadow" /></th></tr>');var h=jQuery('<tr class="dialog_bottom_shadow" ><td><span class="dialog_bottom_outer" ><span class="dialog_bottom_inner" ></span></span></td></tr>');if(ajaxart.isIE){k.find(".dialog_right_shadow_th").css("display","none");h.css("display","none")}var g=jQuery(l.Frame).find("tbody")[0];g.insertBefore(k[0],g.firstChild);g.appendChild(h[0]);jQuery(l.Frame).css("border","none")})},Size:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"BeforeOpen",function(h,f){var g=h.ContentsPlaceholder();aa_set_element_size(g,aa_text_with_percent(c,b,"Size",a));aa_set_element_size(g,aa_text_with_percent(c,b,"MaxSize",a),"max-")})},Resizer:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"BeforeOpen",function(h,f){var g=h.ContentsPlaceholder();jBart.addResizer(g,{onResize:function(m,k){jQuery(g).width(m).height(k).css("max-width",m+"px").css("max-height",k+"px");var l=jQuery(h.Frame).css("right");if(l&&l!="auto"){var n=ajaxart.ui.absoluteLeft(h.Frame);jQuery(h.Frame).css("left",n+"px").css("right","")}},insertResizer1:function(k,l){k.appendChild(l)}})})},CloseDialogFrame:function(b,c,a){var d=aa_top_dialog();if(!d){return}if(d.OldDialog){aa_close_dialog_old("Cancel",true)}else{d.Dialog.Close([],a)}},CloseContainingDialog:function(c,f,b){var d=b.vars.ControlElement[0];while(d){var a=d.Dialog;if(a){return a.Cancel(a.Data,a.Context)}d=d.parentNode}},InplaceDialog:function(d,g,c){var f=ajaxart.inPreviewMode;ajaxart.inPreviewMode=true;ajaxart.runNativeHelper(g,d,"OpenDialog",c);ajaxart.inPreviewMode=f;var b=aa_openDialogs[aa_openDialogs.length-1];if(!b||b.Title!=aa_text(g,d,"Title",c)){return}jQuery(b.Frame).addClass("aa_inplace_dialog");var a=b.Frame;b.Cancel(b.Data,b.Context);var h=c.vars._Field[0];h.Control=function(){return[a]}},CloseDialog:function(b,c,a){var f=aa_top_dialog();if(!f){return}if(f.OldDialog){var d=jQuery(f.dialogContent).find(".OKButton")[0];if(d){aa_fire_event(d,"mousedown",a,{});aa_fire_event(d,"mouseup",a,{})}}else{if(aa_text(c,b,"CloseType",a)=="OK"){f.Dialog.OK(f.Dialog.Data,f.Dialog.Context)}else{f.Dialog.Cancel(f.Dialog.Data,f.Dialog.Context)}}},CloseIcon:function(b,c,a){var d=a.vars._Dialog[0];aa_register_handler(d,"AfterOpen",function(k,f){var l=jQuery(k.Frame).find(".aa_dialog_title");if(l.length==0){l=jQuery(k.Frame)}if(aa_bool(c,b,"UseXCharacter",a)){var g=jQuery('<div class="aa_dialog_caption_close xchar"><div></div>');g.find(">div").text(aa_text(c,b,"XCharacter",a));g=g[0]}else{var h=aa_text(c,b,"Image",a);var g=jQuery('<img class="aa_dialog_caption_close" src="'+h+'"/>')[0]}jQuery(g).addClass(aa_attach_global_css(aa_text(c,b,"Css",a),null,"close_dialog"));g.onclick=function(){k.Cancel(k.Data,f)};l[0].insertBefore(g,l[0].firstChild)})},AutomaticFocus:function(c,d,b){if(ajaxart.inPreviewMode){return}var f=b.vars._Dialog[0];var a=aa_text(d,c,"FocusOn",b);aa_register_handler(f,"AfterOpen",function(h,g){if(a=="first input"){setTimeout(function(){if(h.Disabled){return}if(ajaxart.controlOfFocus){ajaxart.controlOfFocus.IgnoreBlur=true}var k=jQuery(h.Contents).find("input");if(k.length>0){k[0].focus()}},1)}},"AutomaticFocus")},NoCancel:function(c,d,b){var g=b.vars._Dialog[0];g.NoCancel=true;if(!g.Buttons){return}for(var a=0;a<g.Buttons.length;a++){if(g.Buttons[a].ID=="OK"){var f=ajaxart.runNativeHelper(d,c,"OKButton",b)[0];if(f){g.Buttons[a]=f}}if(g.Buttons[a].ID=="Cancel"){g.Buttons.splice(a,1)}}},DisableBodyScroll:function(b,c,a){var d=a.vars._Dialog[0];d.DisableBodyScroll=aa_bool(c,b,"Enabled",a);aa_register_handler(d,"BeforeOpen",function(g,f){if(!g.DisableBodyScroll){return}if(!jBart.dialogs.DisableBodyScroll_counter){jBart.dialogs.DisableBodyScroll_counter=0}jBart.dialogs.DisableBodyScroll_counter++;jQuery("body").css("overflow","hidden")});aa_register_handler(d,"AfterClose",function(g,f){if(!g.DisableBodyScroll){return}if(--jBart.dialogs.DisableBodyScroll_counter==0){jQuery("body").css("overflow","auto")}})},ScreenCover:function(b,c,a){var f=a.vars._Dialog[0];var d=f.CoverColor!=null;f.CoverColor=aa_text(c,b,"Color",a);f.CoverOpacity=aa_text(c,b,"Opacity",a);if(d){return}aa_register_handler(f,"BeforeOpen",function(l,g){var h=jQuery('<div class="dialog_cover" style="position:fixed;top:0px;left:0px;" />')[0];h.style.backgroundColor=l.CoverColor;h.onmousedown=function(m){m=m||event;if(m==null){return}if(typeof(Event)!="undefined"&&Event.resolve){Event.cancelBubble(Event.resolve(m))}};h.Dialog=l;var k=ajaxart_screen_size();h.style.width="100%";h.style.height="100%";h.style.zIndex=aa_int(c,b,"MinZIndex",a)+aa_noOfOpenDialogs;h.style.opacity=l.CoverOpacity;h.style.filter="alpha(opacity="+l.CoverOpacity*100+")";h.tabIndex=0;jQuery(h).keydown(function(m){if(m.keyCode==27){h.Dialog.Cancel()}});if(!ajaxart.inPreviewMode){document.body.appendChild(h)}});aa_register_handler(f,"AfterClose",function(l,h){var g=jQuery("body").find(".dialog_cover");for(var k=0;k<g.length;k++){if(g[k].Dialog==l){aa_remove(g[k],true);return}}})},TopDialog:function(b,c,a){var d=aa_top_dialog();if(!d){return[]}if(aa_bool(c,b,"ReturnContent",a)){return[d.Dialog.Contents]}else{return[d.Dialog]}},CloseAllDialogs:function(c,d,b){for(var a=0;a<aa_openDialogs.length;a++){aa_openDialogs[a].Close()}aa_openDialogs=[];return[]},CloseDialogByID:function(d,f,c){var g=aa_text(f,d,"Identifier",c);var a=jQuery("body").find(".aa_dlg");for(var b=0;b<a.length;b++){if(g!=""&&a[b].Dialog.Identifier==g){a[b].Dialog.Close();return}}},ToggleOpenCloseDialog:function(d,f,c){var g=aa_text(f,d,"Identifier",c);var a=jQuery("body").find(".aa_dlg");for(var b=0;b<a.length;b++){if(g!=""&&a[b].Dialog.Identifier==g){a[b].Dialog.Close();return}}ajaxart.run(f,d,"Open",c)}});function aa_invoke_dialog_handlers(c,d,b){if(c){for(var a=0;a<c.length;a++){c[a](d,b)}}}function aa_top_dialog(){var b=jQuery("body").find(".aa_dlg");var d=0,f=null;for(var a=0;a<b.length;a++){if(b[a].counter>d){f=b[a];d=f.counter}}if(openDialogs.length==0){return f}var c=openDialogs[openDialogs.length-1];if(!f||f.noOfOpenDialogs<c.noOfOpenDialogs){return c}return f}function aa_enable_move_by_dragging(b,c,a){if(!c){return}jQuery(c).mousedown(function(f){f=f||event;if(!b.Moving){var g=(b.style.right.split("px").length>1)?b.style.right.split("px")[0]:null;b.Moving={mouse_x:(f.clientX||f.pageX),mouse_y:(f.clientY||f.pageY),frame_x:b.offsetLeft,frame_y:b.offsetTop,frame_right:g};a();ajaxart_disableSelection(document.body);ajaxart_disableSelection(jQuery(c).parents(".aa_dlg")[0])}var d=function(l){l=l||event;var k=Math.max((l.clientY||l.pageY)-b.Moving.mouse_y+b.Moving.frame_y,0);b.style.top=k+"px";b.style.bottom="inherit";if(b.Moving.frame_right){b.style.right=b.Moving.frame_right-((l.clientX||l.pageX)-b.Moving.mouse_x)+"px"}else{b.style.left=(l.clientX||l.pageX)-b.Moving.mouse_x+b.Moving.frame_x+"px";b.style.right="inherit"}};var h=function(k){k=k||event;b.Moving=null;window.onmousemove=null;window.onmouseup=null;document.onmouseup=null;document.onmousemove=null;ajaxart_restoreSelection(document.body);ajaxart_restoreSelection(jQuery(c).parents(".aa_dlg")[0])};if(window.captureEvents){window.onmousemove=d;window.onmouseup=h}else{document.onmouseup=h;document.onmousemove=d}})}aa_gcs("dialog",{TogglePopup:function(g,F,f){var r=aa_first(F,g,"OnElement",f);var o=aa_text(F,g,"WidthOption",f);if(o==""){o="launcher width"}var u=aa_text(F,g,"Width",f);var s=aa_text(F,g,"Height",f);var b=ajaxart.run(F,g,"PopupData",f);var n=aa_bool(F,g,"CloseOnEnter",f);var d=aa_bool(F,g,"CloseOnDoubleClick",f);var p=aa_text(F,g,"PopupCssClass",f);var C=aa_first(F,g,"ReturnFocusTo",f);var z=aa_text(F,g,"Style",f);for(i=0;i<ajaxart.dialog.openPopups.length;i++){if(ajaxart.dialog.openPopups[i].onElem==r){var D=ajaxart.dialog.openPopups[i].contents;var c=jQuery(D).parents(".aapopup");if(c.length>0&&c[0].parentNode!=null){aa_remove(c[0],true)}var A=[];for(var x in ajaxart.dialog.openPopups){if(i!=x){A.push(ajaxart.dialog.openPopups[x])}}aa_uncapture_for_popup(ajaxart.dialog.openPopups[i]);ajaxart.dialog.openPopups=A;return["true"]}}ajaxart.setVariable(f,"_LaunchingElement",[r]);var y=aa_first(b,g,"Contents",f);if(!y){return}var v={contents:y,onElem:r,profile:g,returnFocusTo:C};y.PopupObj=v;if(y!=null){ajaxart.dialog.openPopups.push(v)}if(r==null||y==null){ajaxart.log("toggle popup - empty contents or no launching element","warning");return[]}y.LaunchingElement=r;if(r.offsetParent==null){ajaxart.log("toggle popup - launching element has no offsetParent","warning")}var k=jQuery(r);var c=jQuery(document.createElement("div")).addClass("aapopup "+p);c[0].profile=g;c[0].context=f;c[0].data=F;if(z!=""){if(z.indexOf(":")>0){aa_setCssText(c[0],z)}else{c[0].className=c[0].className+z}}if(!aa_intest){c[0].style.display="none";c[0].display="none"}jQuery(y).appendTo(c);if(aa_bool(F,g,"ShowCloseButton",f)){var B=jQuery('<div style="padding: 0 0 16px 16px; position:absolute; top: 7px; right:4px; cursor:pointer;" />')[0];B.style.background="url("+aa_text(F,g,"CloseImage",f)+") no-repeat";B.popup=v;B.onmousedown=function(){aa_closePopup(this.popup)};c[0].insertBefore(B,c[0].firstChild)}var w=function(G,I,J,H){G[0].onkeyup=function(L){L=L||event;if(typeof(L)=="undefined"){L=event}if(H&&L.keyCode==13&&this.parentNode!=null){var K=jQuery((typeof(event)=="undefined")?L.target:event.srcElement);if(K[0]&&K[0].tagName.toLowerCase()=="textarea"){return}aa_closePopup(J);ajaxart.run(I,g,"OnSuccess",f);ajaxart_stop_event_propogation(L)}if(L.keyCode==27){if(ajaxart.menu.currentContextMenu==null||jQuery(ajaxart.menu.currentContextMenu).css("display")!="block"){ajaxart.run(F,g,"OnCancel",f);ajaxart_stop_event_propogation(L);aa_closePopup(J)}}};if(d){G[0].ondblclick=function(){this.parentNode.removeChild(this);aa_element_detached(this);ajaxart.run(I,g,"OnSuccess",f)}}};w(c,b,v,n);window.aa_noOfOpenDialogs=window.aa_noOfOpenDialogs||0;var a=aa_text(F,g,"XYCorrections",f).split(",");if(k.parents(".jbstudio").length>0){c.addClass("jbstudio")}if(k.parents(".right2left").length>0){c.addClass("right2left")}else{c.css("left",ajaxart.ui.absoluteLeft(r)+parseInt(a[0]));if(u==""&&o=="launcher width"){jQuery(c).css("min-width",k.width()+100)}else{c[0].style.minWidth=u}}++aa_dialogCounter;c.css("z-index",2000+aa_dialogCounter+1);if(s!=""){c.height(s)}c.appendTo("body");aa_element_attached(c);var t=ajaxart.clone_context(f);ajaxart.setVariable(t,"ControlElement",[y]);if(ajaxart.fieldscript(g,"AutoFocusOn",true)!=null&&!ajaxart.inPreviewMode){var h=ajaxart.calcParamsForRunOn(t,ajaxart.run(F,g,"AutoFocusOn",t));var q=ajaxart.getControlElement(h);if(q.length>0&&"focus" in q[0]){var m=1;if(ajaxart.isSafari||ajaxart.isFireFox){m=100}var E=function(G){setTimeout(function(){G=G||event;if(ajaxart.controlOfFocus!=null){ajaxart.controlOfFocus.IgnoreBlur=true}if(jQuery(G).parents("body").length>0){G.focus()}},m)};E(q[0])}}var l=function(G,I,J,H){return function(){ajaxart.dialog.positionPopup(G[0],r,null,false);if(I==""&&J=="launcher width"&&k[0].offsetWidth>2){G.css("min-width",k[0].offsetWidth-2)}if(G.hasClass("right2left")){var L=ajaxart.ui.absoluteLeft(r)+k[0].offsetWidth;var K=L-G[0].offsetWidth;G.css("left",K+"px");G.css("right","")}aa_capture_for_popup(H);H.initialized=true;if(aa_bool(F,g,"AutoCloseOnMouseOut",f)){G[0].onmouseover=function(){G[0].isInside=true};G[0].onmouseout=function(){G[0].isInside=false;setTimeout(function(){if(!G[0].isInside){aa_closePopup(G[0])}},500)}}if(ajaxart.isIE){G.height((G.height()+2)+"px")}G[0].style.display="";G[0].display="";ajaxart.run(F,g,"OnPopupOpen",aa_ctx(f,{ControlElement:[G[0]]}))}};setTimeout(l(c,u,o,v),1);return["true"]},ClosePopup:function(c,d,b){var a=10;if(aa_bool(d,c,"AllPopups",b)){while(ajaxart.dialog.openPopups.length>0&&a>0){aa_closePopup(ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1]);a--}}if(ajaxart.dialog.openPopups.length>0){return aa_closePopup(ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1])}}});jBart.disableSelections=function(){ajaxart_disableSelection(document.body);var a=document.frames};jBart.restoreSelections=function(){ajaxart_restoreSelection(document.body);var a=document.frames};jBart.addResizer=function(d,c){var b={image:aa_base_images()+"/resizer.gif",width:"16px",height:"16px",minWidth:20,minHeight:20,onResize:function(g,f){},onResizeEnd:function(g,f){},insertResizer:function(f,g){f.parentNode.appendChild(g)}};c=jQuery.extend(b,c);if(!d.parentNode){return}jQuery(d.parentNode).css("position","relative");var a=jQuery('<div style="position:absolute;bottom:0;right:0;background-repeat:no-repeat;" />');a.css("background","url("+c.image+")").css("width",c.width).css("height",c.height).css("cursor","se-resize");c.insertResizer(d,a[0]);a.mousedown(function(k){if(!a[0].jbResizingProps){var g=jQuery(d).width();var f=jQuery(d).height();a[0].jbResizingProps={mouse_x:(k.clientX||k.pageX),mouse_y:(k.clientY||k.pageY),width:g,height:f};jBart.disableSelections();var l=jQuery('<div id="aa_resize_cover" style="height:100%; width: 100%; background:pink;z-index:10000; opacity:0; filter: alpha(opacity=0);position:fixed;top:0;left:0;top:0;bottom:0"/>');jQuery("body").append(l)}var h=function(s){s=s||event;var q=a[0].jbResizingProps;var p=(s.clientX||s.pageX),n=(s.clientY||s.pageY);var r=q.width+(p-q.mouse_x);var o=q.height+(n-q.mouse_y);if(r>c.minWidth){jQuery(d).width(r)}if(o>c.minHeight){jQuery(d).height(o)}c.onResize(r,o)};var m=function(n){n=n||event;a[0].jbResizingProps=null;window.onmousemove=null;window.onmouseup=null;document.onmouseup=null;document.onmousemove=null;jBart.restoreSelections();c.onResizeEnd(jQuery(d).width(),jQuery(d).height());jQuery("#aa_resize_cover").remove()};if(window.captureEvents){window.onmousemove=h;window.onmouseup=m}else{document.onmouseup=m;document.onmousemove=h}})};aa_gcs("field",{DynamicFields:function(d,h,a){var c=ajaxart.run(h,d,"Fields",a);var g=[];for(var k=0;k<c.length;k++){var f=c[k];var l=function(n){return function(p,q){var o=aa_ctx(q,{_FieldDefinition:[n]});return ajaxart.run(p,d,"FieldData",aa_merge_ctx(a,o))}};var b=aa_ctx(a,{_FieldDefinition:[f]});var m={isObject:true,Item:f,Source:f};m.Title=aa_multilang_text([f],d,"FieldTitle",a);if(m.Title==""){m.Title=aa_multilang_text([f],d,"Title",a)}m.Id=aa_text([f],d,"ID",a);ajaxart_addScriptParam_js(m,"FieldData",l(f),b);ajaxart_addMethod(m,"Control",d,"Control",b,"FieldDefinition");ajaxart.setVariable(b,"_Field",[m]);ajaxart.runsubprofiles([f],d,"FieldAspect",b);g.push(m)}return g},Text:function(c,d,b){var f={isObject:true};var a=aa_ctx(b,{_Field:[f]});f.Id=aa_text(d,c,"ID",a);f.ID=[f.Id];f.Title=aa_multilang_text(d,c,"Title",a);f.HideTitle=aa_bool(d,c,"HideTitle",a);f.CellPresentation="control";f.Style=aa_first(d,c,"Style",b);f.TitleAsText=!aa_paramExists(c,"Text",true);f.Control=function(k,g){var h=aa_multilang_text(k,c,"Text",aa_merge_ctx(a,g));if(!h&&f.TitleAsText){h=f.Title}h=h.replace(/\n/g,"<br/>");return[aa_renderStyleObject(f.Style,{text:h,data:k[0]},g)]};f.Text=function(k,g){var h=aa_multilang_text(k,c,"Text",aa_merge_ctx(a,g));if(!h&&f.TitleAsText){h=f.Title}h=h.replace(/\n/g,"<br/>");return[h]};ajaxart.runsubprofiles(d,c,"FieldAspect",a);return[f]},XtmlControl:function(b,c,a){var d={isObject:true};d.Title=aa_multilang_text(c,b,"Title",a);d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];d.FieldData=function(f){return f};d.CellPresentation=["control"];aa_setMethod(d,"Control",b,"Control",a);ajaxart.runsubprofiles(c,b,"FieldAspect",aa_ctx(a,{_Field:[d]}));return[d]},JavaScriptControl:function(f,g,b){var h={isObject:true};h.Title=aa_multilang_text(g,f,"Title",b);h.Id=aa_text(g,f,"ID",b);h.ID=[h.Id];h.FieldData=function(l){return l};h.CellPresentation=["control"];var k=ajaxart.compile(f,"Html",b);var a=aa_get_func(aa_text(g,f,"JavaScript",b));var d=function(n,t){var q=ajaxart_runcompiled_text(k,n,f,"Html",b);var p=jQuery(q);if(p.length>1){var r=jQuery("<div/>").append(p);p=r}if(q==""){p=[]}var l=(p.length>0)?p[0]:null;var s;if(a){var m=(n.length>0)?n[0]:null;s=a(m,l,t)}var o=(s)?s:l;if(!o){return[]}jQuery(o).addClass(aa_attach_global_css(aa_text(g,f,"Css",b)));return[o]};var c=function(l){ajaxart_addScriptParam_js(h,"Control",l,b)};c(d);ajaxart.runsubprofiles(g,f,"FieldAspect",aa_ctx(b,{_Field:[h]}));return[h]},IsGroup:function(b,c,a){if(c.length==0){return[]}if(c[0].Fields!=null){return["true"]}return[]},SimpleXmlFields:function(b,c,a){var l=aa_text(c,b,"Paths",a);var f=l.split(",");var h=[];for(var d=0;d<f.length;d++){var m=f[d];var k={isObject:true,Id:m.split("@").pop(),Path:m};k.ID=[k.Id];ajaxart_field_fix_title(k,m,a);var g=function(n){return function(p,o){if(p.length==0){return[]}return ajaxart.xml.xpath(p[0],n,true)}};ajaxart_addScriptParam_js(k,"FieldData",g(m),a);h.push(k)}return h},Fields:function(b,c,a){return ajaxart.runsubprofiles(c,b,"Field",a)},TitleField:function(b,c,a){var d=aa_first(c,b,"Field",a);if(d==null){return[]}d.Id="#_TitleField";var f=aa_ctx(a,{_Field:[d]});ajaxart.runsubprofiles(c,b,"FieldAspect",f);return[d]},InnerReferenceFields:function(c,f,b){var d=b.vars._ReferenceFields;if(d==null||d.length==0){return[]}var g=aa_text(f,c,"Path",b);var a=d[0].FieldById[g.split("@").pop()];if(a!=null&&a.Fields!=null){return a.Fields}return[]},SubFields:function(d,f,b){var c=aa_first(f,d,"Parent",b);var a=[];var g=function(l){var h=l.Fields;for(var k=0;k<h.length;k++){if(!h[k].IsGroup){a.push(h[k])}else{if(h[k].IsVirtualGroup){g(h[k])}}}};if(c!=null){g(c)}return a},SetDefaults:function(c,d,b){var a=ajaxart.run(d,c,"Fields",b);ajaxart_fields_set_defaults(d,a,b);return["true"]},SetRecalcOnSave:function(c,d,b){var a=ajaxart.run(d,c,"Fields",b);ajaxart_fields_recalc_on_save(d,a,b);return["true"]},RefreshField:function(f,g,b){var a=aa_text(g,f,"FieldID",b);if(!a){return}var d=a.split(",");var c=aa_text(g,f,"Scope",b);aa_refresh_field(d,c,aa_bool(g,f,"FireOnUpdate",b),aa_first(g,f,"Transition",b),b)},RefreshDependentFields:function(d,g,c){var b=aa_first(g,d,"Input",c);if(b==null){return[]}var a=jQuery(b).parents(".aa_cell_element")[0];if(a==null||a.Field==null){return[]}var h=a.Field;var f=jQuery(b).parents(".aa_container")[0];if(h==null||h.DependentFields==null){return[]}ajaxart_field_RefreshDependentFields(h,b,f.Cntr.Context);return[]},ShowFieldControl:function(c,f,a){var l=ajaxart.run(f,c,"Item",a);var k={isObject:true,ID:["show_field"],Items:[{isObject:true,ReadOnly:false,Items:[]}]};if(a.vars._Cntr){k.ParentCntr=a.vars._Cntr[0]}var b=aa_ctx(a,{_Cntr:[k]});var h=aa_first(f,c,"Field",b);if(h==null){return[]}var g=ajaxart_field_calc_field_data(h,l,b);var d=document.createElement(aa_text(f,c,"CellTag",a));b=aa_ctx(b,{_Field:[h],FieldTitle:[h.Title],_Item:l,Items:aa_items(k)});if(h.Hidden&&aa_tobool(h.Hidden(l,b))){return[]}if(h.AsSection){aa_buildSection(k,d,h,l,null,a)}else{ajaxart_field_createCellControl(l,k,d,"control",h,g,b)}return[d]},FieldTitle:function(b,c,a){var d=ajaxart.run(c,b,"Field",a);if(d.length==0||d[0].Title==null){return[]}return[d[0].Title]},XmlInFilterAttribute:function(d,f,b){var c=aa_text(f,d,"FilterData",b);var a;if(c.length>0){xml_txt=c}else{xml_txt="<filter/>"}try{a=ajaxart.parsexml(xml_txt)}catch(g){a=ajaxart.parsexml("<filter/>")}ajaxart.runNativeHelper(f,d,"RegisterXml",aa_ctx(b,{Xml:[a]}));return[a]},DateFilter:function(b,d,a){function c(h,g){return function(k){return k>=h&&k<=g}}var f=ajaxart_fieldaspect_getField(a);if(f==null){return[]}f.SelectedList="";f.FilterControl=function(k){var h=aa_ctx(k,{_Field:[this]});var g=ajaxart.runNativeHelper(k.vars.FilterData,b,"Control",h);jQuery(g).find(".aa_filter_input").addClass("aa_filter_"+this.Id);return g};f.newFilter=function(h){var g=function(m){var s=[];var q="";var r=aa_totext(m);if(r.length>0&&r.indexOf("<filter")==0){var p=ajaxart.parsexml(r);q=p.getAttribute("Expression")||""}else{q=r}q=q.replace(new RegExp("[ ]*-[ ]*","g"),"-");var l=q.split(",");for(var o=0;o<l.length;o++){if(l[o]!=""){var n={};if(!f.Options||!f.Options.CodeToTextHash||!f.Options.CodeToTextHash[l[o]]){var k=l[o].split("-");n.from=k[0];n.to=k[1];if(n.to==null){n.to=k[0]}n.match=c(aadate_date2int(n.from),aadate_date2int(n.to,true))}s.push(n)}}return s};return{isObject:true,filterData:g(h),SetFilterData:function(k){this.filterData=g(k)},ToSQLText:function(m){var l=aa_totext(m);if(l.length>0&&l.indexOf("<filter")==0){var k=ajaxart.parsexml(l);return k.getAttribute("Expression")||""}return""},Match:function(m,n){if(this.filterData.length==0){return true}var k=n[m.Id];for(var l in this.filterData){if(this.filterData[l].match(k)){return true}}return false}}};return[]},BooleanFilter:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.BooleanFilterValue="";d.FilterControl=function(h){var g=aa_ctx(h,{_Field:[this]});var f=ajaxart.runNativeHelper(h.vars.FilterData,b,"Control",g);jQuery(f).find(".aa_filter_input").addClass("aa_filter_"+this.Id);return f};d.newFilter=function(g){var f=function(k){var h=ajaxart.totext_array(k);if(h=="true"){return true}if(h==""){return""}return false};return{isObject:true,filterData:f(g),SetFilterData:function(h){this.filterData=f(h)},ToSQLText:function(h){return ajaxart.totext_array(h)},Match:function(h,k){if(typeof(this.filterData)=="string"&&this.filterData==""){return true}return this.filterData==(k[h.Id]=="true")}}};return[]},SortBox:function(c,d,b){var a=function(l,g){var m=b.vars._Cntr[0];var h=g.vars.Option[0];var k=(b.vars.HeaderFooterCntr||b.vars._Cntr)[0];k.DataHolder=k.DataHolder||aa_createDataHolderFromCntr(k,b);k.DataHolder.UserDataView.Sort=[{SortBy:h.SortBy,SortDirection:h.SortDirection}];aa_recalc_filters_and_refresh(k,l)};var f=ajaxart.runNativeHelper(d,c,"Field",b);f[0].SortOfSortBox=a;return f},Layout:function(c,d,b){var a={};a.Id=aa_text(d,c,"ID",b);a.ID=[a.Id];a.Title=aa_multilang_text(d,c,"Title",b);a.FieldData=function(f){return f};a.HideTitle=aa_bool(d,c,"HideTitle",b);a.CellPresentation=["control"];a.Style=aa_first(d,c,"Layout",aa_ctx(b,{_Field:[a]}));if(a.Style){a.Control=function(o,h){var l=aa_ctx(h,{});jBart.trigger(a,"ModifyInstanceContext",{Context:l,FieldData:o});var f=ajaxart.runsubprofiles(d,c,"Field",aa_merge_ctx(b,l));var g=[];for(var k=0;k<f.length;k++){if(!f[k].IsHidden){g.push(f[k])}}f=g;var m=aa_api_object(jQuery(a.Style.Html),{Fields:f});var n=function(u){var q=this.getInnerElement(u);q.jbFieldElement=this;if(!q){return}var p=aa_ctx(l,{_Field:[this.Field]});var v=ajaxart_field_calc_field_data(this.Field,o,p);var s=h.vars._Cntr[0];var t=this.Field;if(t.AsSection&&!t.HideTitle){var r=aa_buildSectionControl(s,t,o,v,p);q.appendChild(r)}else{ajaxart_field_createCellControl(o,s,q,"control",t,v,p)}if(q.firstChild){aa_element_attached(q.firstChild)}if(t.HiddenForEdit||t.HiddenForProperties){jQuery(q).hide().css("display","none")}};m.addFields=function(p,u){var x=this.getInnerElement(p);if(!x||!u){return}var w=x.parentNode;var t=this.Fields;for(var s=0;s<t.length;s++){var v=t[s];var r=x.cloneNode(true);w.insertBefore(r,x);aa_element_attached(r);var q=aa_api_object(r,{Field:v,data:this.data,Title:v.Title,cntr:h.vars._Cntr[0],HideTitle:v.HideTitle,setControl:n});u.call(q,q)}x.parentNode.removeChild(x)};jQuery(m).addClass(aa_attach_global_css(a.Style.Css));aa_apply_style_js(m,a.Style);return[m]}}ajaxart.runsubprofiles(d,c,"FieldAspect",aa_ctx(b,{_Field:[a]}));return[a]},TabControl:function(b,c,a){var d={isObject:true};d.Id=aa_text(c,b,"ID",a);d.Title=aa_text(c,b,"Title",a);d.ID=[d.Id];d.FieldData=function(f){return f};d.CellPresentation=["control"];d.HideTitle=true;d.KeepSelectedTabIn=aa_first(c,b,"KeepSelectedTab",a);d.RefreshTabsOnSelect=aa_bool(c,b,"RefreshTabsOnSelect",a);d.Control=function(o,g){d.Style=aa_first(c,b,"Style",a);var n=aa_api_object(jQuery(d.Style.Html),{data:o,Tabs:[]});var f=aa_ctx(g,{ControlElement:[n]});aa_defineElemProperties(n,"Fields,addTabs,cntr,Tabs,data,tabContents,tabsParent");n.Fields=ajaxart.runsubprofiles(c,b,"Field",a);n.addTabs=function(t,s,x){var q=this;var y=this.getInnerElement(t);q.tabContents=this.getInnerElement(s);if(!y||!x||!q.tabContents){return}q.tabsParent=y.parentNode;q.initTabFunc=x;for(var r=0;r<q.Fields.length;r++){var v=q.Fields[r];switch(v.RefreshTabOnSelect){case"refresh":v.RefreshTabOnSelect=true;break;case"no refresh":v.RefreshTabOnSelect=false;break;default:v.RefreshTabOnSelect=d.RefreshTabsOnSelect}var p=y.cloneNode(true);p.Field=v;p.tabcontrol=q;if(v.Id){jQuery(p).addClass("tab_"+v.Id)}q.Tabs.push(p);y.parentNode.insertBefore(p,y);var w=aa_api_object(jQuery(p),{Field:v,data:q.data,Title:v.Title});aa_defineElemProperties(p,"tab_obj,Select,tabcontrol,Field,Contents");w.Image=aa_init_image_object(v.TabImage,o,g);p.tab_obj=w;if(v.TabNumericIndication){w.NumberIndication=v.TabNumericIndication(o,f)}var u=function(z){z.Select=function(){this.tab_obj.Select()};w.Select=function(H,D){jBart.trigger(z,"OnBeforeSelect",{});if(z.Field.TabOnBeforeSelect){z.Field.TabOnBeforeSelect(o,f);z.tabcontrol.RefreshTabsHead()}var I=jQuery(z),L=g.vars._Cntr[0],J=z.Field,E=z.tabcontrol;var K=jQuery(E.tabContents).find(">.aa_container")[0];var C=z.Field.Id,A=[];var B=jQuery(E.tabsParent).find(">.aa_selected_tab")[0];var N=[];if(B){A=[B.Field];N=[B.Field.Id];if(L.BeforeChangeTab){L.BeforeChangeTab(A,f)}jQuery(B).removeClass("aa_selected_tab")}ajaxart.run(c,b,"OnTabChange",aa_ctx(f,{PrevTab:N,NewTab:[z.Field.Id]}));I.addClass("aa_selected_tab");if(J.ID!=""&&J.KeepSelectedTabIn&&J.KeepSelectedTabIn.Set){J.KeepSelectedTabIn.Set([{Key:L.ID+"_tab",Value:C}],a)}var G=true;if(B&&B.Field.RefreshTabOnSelect=="no refresh"){G=false}if(!z.Contents||J.RefreshTabOnSelect){var O=ajaxart_field_calc_field_data(J,o,g);var F=ajaxart_runMethod(O,J,"Control",g);if(F.length>0){z.Contents=F[0]}}if(!D){aa_element_detached(E.tabContents.firstChild);aa_empty(E.tabContents,G);E.tabContents.appendChild(z.Contents);aa_element_attached(z.Contents)}else{E.tabContents.style.cssText="position:relative";z.Contents.style.cssText="position:absolute; z-index:100; top:0px; left:0px;";var M=E.tabContents.firstChild;E.tabContents.appendChild(z.Contents);aa_element_attached(z.Contents);D.animate(z.Contents,function(){aa_element_detached(M);aa_remove(M,G);E.tabContents.appendChild(z.Contents);z.Contents.style.cssText="position:none; z-index:none; top:none; left:none;"})}if(J.DoWhenUserClicksTab){J.DoWhenUserClicksTab([],a)}if(L.AfterTabLoaded){L.AfterTabLoaded([z.Field],aa_ctx(a,{PreviousTab:A}))}aa_fixTopDialogPosition();jBart.trigger(z,"OnAfterSelect",{});if(z.Field.TabOnAfterSelect){z.Field.TabOnAfterSelect(o,f)}};w.ApplyDynamicProperties=function(){var A=this.Field;if(A.TabNumericIndication){this.NumericIndication=ajaxart.totext(A.TabNumericIndication(o,f))}if(A.ShowTabOnCondition&&!ajaxart.tobool_array(A.ShowTabOnCondition(o,f))){this.style.display="none"}else{jQuery(this).show()}}};u(p);w.ApplyDynamicProperties();x(w)}q.RefreshTabsHead=function(){for(var z=0;z<q.Tabs.length;z++){q.Tabs[z].ApplyDynamicProperties();q.initTabFunc(q.Tabs[z],true)}jBart.trigger(q,"TabsChanged",{})};y.parentNode.removeChild(y)};aa_apply_style_js(n,d.Style);n.jElem.addClass(aa_attach_global_css(d.Style.Css));var l=jQuery(n.Tabs).filter(function(){return this.style.display!="none"});if(l.length>0){var h=l[0];if(d.KeepSelectedTabIn&&d.KeepSelectedTabIn.Get){var m=aa_totext(d.KeepSelectedTabIn.Get([d.ID+"_tab"],a));for(var k=0;k<n.Tabs.length;k++){if(m==n.Tabs[k].Field.Id){h=tabs[k]}}}h.Select()}n.jElem.addClass("aa_tabcontrol");n.jElem[0].TabControl=n;n.jElem[0].Field=d;return[n.jElem[0]]};ajaxart.runsubprofiles(c,b,"FieldAspect",aa_ctx(a,{_Field:[d]}));return[d]},IsTabSelected:function(f,g,d){var b=aa_text(g,f,"TabControl",d);var a=aa_text(g,f,"Tab",d);var c=[];jQuery(aa_find_field(b,"aa_tabcontrol")).each(function(h,k){if(jQuery(k).find(".tab_"+a).hasClass("aa_selected_tab")){c=["true"]}});return c},RefreshTabsHead:function(c,d,b){var a=b.vars.ControlElement[0];if(a.RefreshTabsHead){a.RefreshTabsHead()}}});aa_gcs("field_aspect",{ReadOnlyControl:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}ajaxart_addMethod(d,"ReadOnlyControl",b,"Control",a);return[]},Mandatory:function(b,c,a){var f=a.vars._Field[0];f.Mandatory=true;if(!f.Validations){f.Validations=[]}var d={isObject:true,CheckValidation:"on save",Mandatory:true};var g=function(k,h){h.Validation=function(m,n){if(k.CheckMandatoryValidation){return aa_frombool(k.CheckMandatoryValidation(m,n))}var l=aa_totext(m);return aa_frombool(l=="")};h.ErrorMessage=function(l,m){if(k.MandatoryMessage){return k.MandatoryMessage(l,m)}return ajaxart.runComponent("ui.MandatoryMessage",[],aa_ctx(m,{FieldTitle:[k.Title]}))};if(ajaxart.fieldscript(b,"ErrorMessage",true)){k.MandatoryMessage=function(l,m){m=aa_merge_ctx(a,m);return ajaxart.run(l,b,"ErrorMessage",m)}}};g(f,d);f.Validations.push(d);return[]},Description:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.Description=aa_multilang_text(c,b,"Description",a);return[]},LinkInRichTextAsAction:function(c,d,b){var f=b.vars._Field[0];var a=aa_text(d,c,"LinkClass",b);aa_field_handler(f,"ModifyControl",function(g,o,l,k,n){var h=aa_text(d,c,"LinkClass",b);var m=jQuery(g).find("."+h)[0];if(!m){return}m.href="#";m.onclick=function(){if(window.aa_incapture){return}var p=jQuery(g).find("."+h)[0];ajaxart.run(o,c,"Action",aa_ctx(b,{ControlElement:[p]}));return false}},"LinkInRichTextAsAction_"+a,1000)},OnAttach:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,l,h,g,k){aa_addOnAttach(f,function(){ajaxart.run(l,b,"Action",aa_merge_ctx(a,g,{_ElemsOfOperation:[f]}))})},"OnAttach",1000)},ItemListSelectionWithKeyboard:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,n,k,g,l){var h=jQuery(f).find("input");var m=g.vars.DataHolderCntr[0];h.keydown(function(p){if(p.keyCode==40||p.keyCode==38){if(m&&m.SelectionKeydown){m.SelectionKeydown(p)}return false}else{if(p.keyCode==13&&m){var o=jQuery(m.Ctrl).find(".aa_selected_item")[0];if(o){ajaxart.run(o.ItemData,b,"DoOnEnter",a)}}}return true})},"ItemListSelectionWithKeyboard")},Information:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}aa_field_handler(d,"ModifyControl",function(n,k,o,q,p){var l=aa_text(c,b,"Presentation",a);if(l=="before"||l=="after"){var m=ajaxart.runNativeHelper(c,b,"Ctrl",aa_merge_ctx(a,q))[0];if(m==null){return}jQuery(m).addClass("aa_info_control");var h=jQuery(n).parent();if(h.hasClass("field_row")){var f=document.createElement("tr");f.className="info_tr";var g=document.createElement("td");g.className="info_td";g.setAttribute("colSpan","2");g.appendChild(m);f.appendChild(g);if(l=="before"){jQuery(f).insertBefore(h)}else{jQuery(f).insertAfter(h)}aa_add_virtual_inner_element(n,f)}else{jQuery(m).addClass("aa_group_info "+l);if(l=="before"){jQuery(m).insertBefore(n)}else{jQuery(m).insertAfter(n)}aa_add_virtual_inner_element(n,m)}}else{if(l=="popup"){d.AddInfoIcon([n],a)}}},"Information");d.OpenInfoPopup=function(f,g){return ajaxart.runNativeHelper(f,b,"OpenInfoPopup",aa_merge_ctx(a,g))};d.AddInfoIcon=function(g,h){var f=g[0];var l=f;if(this.AsSection&&!this.HideTitle){l=jQuery(f.previousSibling).find(">.aa_section_title_text")[0]}var k=jQuery('<span class="fieldtitle_info">&nbsp;</span>')[0];jQuery(l).append(k);k.onmousedown=function(n){if(aa_contentsOfOpenPopup().length>0){if(aa_contentsOfOpenPopup()[0].LaunchingElement==this){return}else{aa_closePopup()}}var m=jQuery((typeof(event)=="undefined")?n.target:(event.tDebug||event.srcElement));ajaxart.runNativeHelper([],b,"OpenInfoPopup",aa_merge_ctx(a,h,{_InfoElement:m.get()}))}};return[]},Multiple:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.Multiple=true;d.MultipleTitle=ajaxart_multilang_run(c,b,"MultipleTitle",a);if(d.MultipleTitle!=""){d.Title=d.MultipleTitle}if(ajaxart.fieldscript(b,"Items")!=null){ajaxart_addMethod(d,"MultipleItems",b,"Items",a)}var f=function(g){return function(h,k){var l=aa_ctx(aa_merge_ctx(a,k),{_Field:[g]});return ajaxart.runNativeHelper(h,b,"Control",l)}};ajaxart_addControlMethod_js(d,"MultipleControl",f(d),a);return[]},JavaScript:function(b,f,a){var h=a.vars._Field[0];var d=aa_text(f,b,"RunWhen",a);var g=b.getAttribute("Code");if(!g){g=aa_text(f,b,"Code",a)}var c=aa_get_func(g);if(d=="init"){c(f[0],null,h,a)}if(d=="control"||d=="control attached"){aa_field_handler(h,"ModifyControl",function(k,o,m,l,n){if(d=="control"){c(o[0],k,h,l)}if(d=="control attached"){aa_addOnAttach(k,function(){c(o[0],k,h,l)})}})}},PopupOnHover:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,l,h,g,k){f.onmouseover=function(){if(f.isInside){return}if(f.jbTimer){clearTimeout(f.jbTimer)}f.jbTimer=setTimeout(function(){if(f.isInside){ajaxart.runNativeHelper(l,b,"Open",aa_merge_ctx(a,g,{ControlElement:[f]}))}f.jbTimer=null},500);f.isInside=true};f.onmouseout=function(){f.isInside=false};f.onclick=function(){if(f.jbTimer){clearTimeout(f.jbTimer);f.jbTimer=null}ajaxart.runNativeHelper(l,b,"Open",aa_merge_ctx(a,g,{ControlElement:[f]}))}},"PopupOnHover")},TextSummary:function(b,c,a){var f=a.vars._Field[0];if(aa_bool(c,b,"IgnoreEmptyValues",a)){var d=ajaxart.compile_text(b,"Text",a);f.Text=function(g,h){if(aa_totext(g)==""){return[]}return[d(g,h)]}}else{ajaxart_addMethod(f,"Text",b,"Text",a)}return[]},NumberFormat:function(b,c,a){var f=a.vars._Field&&a.vars._Field[0];if(f==null){return[]}var d=ajaxart.compile(b,"Format",a);if(d!="same"){ajaxart_addMethod(f,"Text",b,"Format",a)}return[]},Tooltip:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyCell",function(f,g){f.title=aa_multilang_text(g,b,"Tooltip",a)})},GrowingImage:function(d,f,c){var h=c.vars._Field[0];var b=aa_text(f,d,"NewSize",c).split(",");h.newWidth=parseInt(b[0]||"0");h.newHeight=parseInt(b[1]||"0");var g=aa_int(f,d,"Duration",c);var a=aa_int(f,d,"NumberOfSteps",c);aa_field_handler(h,"ModifyControl",function(q,p,r,v,u){var o=jQuery(q).find("img")[0];if(!o){return}var m=o.width,s=o.height;var w=(h.newWidth-m)/a,t=(h.newHeight-s)/a;var n=a;var l=g/a;var k=function(){n--;if(n==0){m=h.newWidth;s=h.newHeight}else{m+=w;s+=t}jQuery(o).width(m).height(s);jQuery(q).width(m).height(s);aa_fixTopDialogPosition();if(n>0){setTimeout(k,l)}};setTimeout(k,l)})},TextAreaProperties:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(g,o,m,h,n){var f=jQuery(g).find("textarea");var k=aa_text(o,b,"ReadOnly",a);if(k=="readonly"){f.attr("readonly","readonly")}if(k=="writable"){f.removeAttr("readonly")}var l=aa_text(o,b,"Disabled",a);if(k=="disabled"){f.attr("disabled","disabled")}if(k=="enabled"){f.removeAttr("disabled")}})},GenericEventHandler:function(c,d,b){var f=b.vars._Field[0];var a=aa_text(d,c,"Event",b);jBart.bind(f,a,function(g){ajaxart.run(g.data||d,c,"Action",aa_merge_ctx(b,g.context||b))})},HandleEvent:function(c,d,b){var f=b.vars._Field[0];var a=aa_text(d,c,"Event",b);if(a=="update"){aa_field_handler(f,"OnUpdate",function(n,m,o,l,h){var k=o.ajaxart?aa_merge_ctx(b,o.ajaxart.params):b;var q=jQuery(o).parents(".aa_item")[0];var p=q&&q.ItemData;var g=aa_ctx(k,{_Field:[n],_FieldData:m,_Input:[o],ControlElement:[o],_Item:p||[]});if(h){g=aa_ctx(g,h)}if(jQuery(o).parents(".aa_container").length>0){g.vars._Cntr=[jQuery(o).parents(".aa_container")[0].Cntr]}ajaxart.run(m,c,"Action",g)})}if(a=="blur"){aa_field_handler(f,"OnBlur",function(l,n,h,k,g){var m=aa_ctx(b,{_Field:[l],_FieldData:n,_Input:[h],ControlElement:[h]});if(jQuery(h).parents(".aa_container").length>0){m.vars._Cntr=[jQuery(h).parents(".aa_container")[0].Cntr]}ajaxart.run(n,c,"Action",m)})}if(a=="keydown"){aa_field_handler(f,"OnKeydown",function(l,n,h,k,g){var m=aa_ctx(b,{_Field:[l],_FieldData:n,_Input:[h],ControlElement:[h]});if(jQuery(h).parents(".aa_container").length>0){m.vars._Cntr=[jQuery(h).parents(".aa_container")[0].Cntr]}ajaxart.run(n,c,"Action",m)})}if(a=="keyup"||a=="enter pressed"||a=="ctrl enter pressed"){aa_field_handler(f,"OnKeyup",function(l,n,h,k,g){if(a=="enter pressed"&&aa_totext(g.KeyCode)!=13){return}if(a=="ctrl enter pressed"&&aa_totext(g.KeyCode)!=13){return}if(a=="enter pressed"&&aa_tobool(g.CtrlKey)){return}if(a=="ctrl enter pressed"&&!aa_tobool(g.CtrlKey)){return}var m=aa_ctx(b,{_Field:[l],_FieldData:n,_Input:[h],ControlElement:[h]});if(jQuery(h).parents(".aa_container").length>0){m.vars._Cntr=[jQuery(h).parents(".aa_container")[0].Cntr]}if(g&&g.KeyCode){m.vars.KeyCode=g.KeyCode}if(g&&g.CtrlKey){m.vars.CtrlKey=g.CtrlKey}ajaxart.run(n,c,"Action",m)})}if(a=="control attached"){aa_field_handler(f,"ModifyControl",function(g,m,k,h,l){aa_addOnAttach(g,function(){ajaxart.run(m,c,"Action",aa_merge_ctx(b,h,{_ElemsOfOperation:[g]}))})},1000)}if(a=="focus"){aa_field_handler(f,"OnFocus",function(l,n,h,k,g){var m=aa_ctx(b,{_Field:[l],_FieldData:n,_Input:[h],ControlElement:[h]});ajaxart.run(n,c,"Action",m)})}if(a=="mouse over"){aa_field_handler(f,"ModifyControl",function(g,m,k,h,l){g.onmouseover=function(){if(!g.isInside){ajaxart.run(m,c,"Action",aa_merge_ctx(b,h,{ControlElement:[g]}))}g.isInside=true};g.onmouseout=function(){g.isInside=false}},"PopupOnHover")}if(a=="mouse click"){aa_field_handler(f,"ModifyControl",function(g,m,k,h,l){g.onclick=function(n){ajaxart.run(m,c,"Action",aa_merge_ctx(b,h,{ControlElement:[g],_DomEvent:[n]}))}},"MouseClick")}},FilterField1:function(b,c,a){var d=a.vars._Field[0];function f(h){var g={isObject:true};aa_set_initialize_container(g,function(m,l,p){var k=l.vars.HeaderFooterCntr&&l.vars.HeaderFooterCntr[0];if(!k){return}var o=aa_fieldById(aa_text(c,b,"BasedOn",a),k.Fields);if(o==null){return[]}if(!k.ExposedFilters){k.ExposedFilters=[]}var q=h.FieldData([p.Items[0].Items[0]],l);var n=aa_create_filter(o,"");n.rawFilterData=q;k.ExposedFilters.push(n);if(!o.FilterControl){return}h.Control=function(r,u,s,t){return function(w,x){var y=aa_ctx(x,{FilterData:t,_Field:[s],HeaderFooterCntr:[r]});var v=s.FilterControl(y);jQuery(v[0]).find("input").slice(0,1).attr("name",u.Id);return v}}(k,h,o,q)});g.GetContent=function(){return[this]};h.CntrAspects=[g]}f(d);return[]},Calculated:function(c,d,b){var g=aa_attach_global_css(aa_text(d,c,"ToggleButtonCss",b),null,"toggle_button");var f=ajaxart_fieldaspect_getField(b);if(f==null){return[]}f.CalcFormula=function(l,k){var h=aa_text(l,c,"Formula",aa_merge_ctx(b,k));if(aa_bool(d,c,"MathFormula",b)){return[eval_math_formula(h)||""]}else{return[h]}};f.WrapperToValue=function(k){if(!k.__item||(b.vars.DataHolderCntr&&b.vars.DataHolderCntr[0].WrappersAsItems)){var h=k}else{var h=k.__item}return this.CalcFormula([h],b)[0]};if(!aa_bool(d,c,"PrimitiveField",b)){f.IsCalculated=true;return[]}f.IsManual=function(l,h){if(ajaxart.isxml(l)&&l[0].nodeType==2){var k=l[0].nodeName+"__Manual";return ajaxart.xml.xpath(l[0],"../@"+k,true,"")}return[]};f.DependsOnFields=ajaxart_run_commas(d,c,"DependsOnFields",b);f.ManualOverride=aa_bool(d,c,"ManualOverride",b);var a=function(n,l,m,h){var k={States:{manual:{Control:function(){var o=ajaxart_field_createSimpleInput(m,h);jQuery(o).addClass("field_control fld_"+l.Id);o.Field=l;return o},ChangeStateLabel:"recalc",ChangeToState:"calculated"},calculated:{Control:function(){var o=aa_text(h.vars._Item,c,"Formula",b);if(aa_bool(d,c,"MathFormula",b)){o=eval_math_formula(o,2)}ajaxart.writevalue(m,[o]);var p=jQuery("<span>"+o+"</span>");jQuery(p).addClass("field_control fld_"+l.Id);return p[0]},ChangeStateLabel:"override",ChangeToState:"manual"}},Detect:function(){var o=ajaxart_runMethod(m,l,"IsManual",b);if(ajaxart.tobool_array(o)){return"manual"}return"calculated"},Build:function(p){aa_empty(n,true);n.appendChild(p.Control());var o=jQuery('<span class="aa_toggle_button">'+ajaxart_multilang_text(p.ChangeStateLabel,b)+" </span>");o.addClass(g);n.appendChild(o[0]);o[0].onmousedown=function(){var r=n.toggleControl.States[p.ChangeToState];if(p.ChangeToState=="manual"){ajaxart.writevalue(ajaxart_runMethod(m,l,"IsManual",h),"true")}else{var q=ajaxart_runMethod(m,l,"IsManual",h)[0];var s=ajaxart.xml.parentNode(q);if(s!=null){s.removeAttribute(q.nodeName)}}n.toggleControl.Build(r)}}};n.toggleControl=k;k.Build(k.States[k.Detect()])};if(f.ManualOverride){f.CalculatedControl=a}else{f.IsCalculated=true;f.CellPresentation="text"}return[]},RefreshDependentFields:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);d.DependentFields=aa_text(c,b,"FieldsIds",a);d.RefreshOn=aa_text(c,b,"RefreshOn",a);d.RefreshScope=aa_text(c,b,"RefreshScope",a);aa_field_handler(d,"OnUpdate",function(k,l,g){var f=a;var h=jQuery(g).parents(".aa_container")[0];if(h){f=h.Cntr.Context}ajaxart_field_RefreshDependentFields(k,g,f)});return[]},PicklistTextSummary:function(d,f,c){var g=ajaxart_fieldaspect_getField(c);g.CssForImage=aa_text(f,d,"CssForImage",c);var a=aa_text(f,d,"Show",c);if(g.Options==null){return[]}var b=function(k,h){return function(l,m){var o=ajaxart.totext_array(l);var p=k.Options.codeToText(o);if(aa_paramExists(d,"ManipulateText")){p=aa_text([p],d,"ManipulateText",c)}if(h!="text only"&&k.Options.HasImages){var n=k.Options.codeToImage(o);if(n&&n!=""){n='<img title="'+p+'" alt="'+p+'" class="aa_imagebeforetext" src="'+n+'" style="'+k.CssForImage+'" />';if(h=="image only"){p=n}else{p=n+p}}}return[p]}};ajaxart_addScriptParam_js(g,"Text",b(g,a),c)},SortMethod:function(b,c,a){var d=a.vars._Field[0];if(!d){return[]}var f=aa_text(c,b,"Method",a);if(f=="numeric"){d.SortValFunc=function(g){return parseFloat(g)}}if(f=="date"){d.SortValFunc=function(g){return aadate_date2int(g)}}},Validation:function(b,c,a){var f=a.vars._Field[0];if(!f.Validations){f.Validations=[]}var d={isObject:true};d.CheckValidation=aa_text(c,b,"CheckValidation",a);aa_setMethod(d,"Validation",b,"Validation",a);aa_setMethod(d,"ErrorMessage",b,"ErrorMessage",a);d.AddTitleToErrorMessage=aa_bool(c,b,"AddTitleToErrorMessage",a);d.HideErrorMessage=!aa_bool(c,b,"ShowErrorMessageNextToField",a);f.Validations.push(d)},Title:function(b,c,a){var d=a.vars._Field[0];if(d){d.Title=aa_multilang_text(c,b,"Title",a)}},ChangeFieldID:function(b,c,a){var d=a.vars._Field[0];var f=aa_text(c,b,"ID",a);d.Id=f;d.ID=[f]},TextSearchAlgorithm:function(b,c,a){var d=a.vars._Field[0];d.TextSearchAlgorithmForBase=aa_first(c,b,"Algorithm",a).newFilter;aa_field_handler(d,"ModifyCell",function(f,n,k,g,l){var m=g.vars.DataHolderCntr&&g.vars.DataHolderCntr[0];var h=m&&aa_fieldById(d.FilterBaseFieldID,m.Fields);if(!h){return}h.newFilter=d.TextSearchAlgorithmForBase},"TextSearchAlgorithm")},ColumnWidth:function(b,c,a){var d=a.vars._Field[0];d.Width=ajaxart.run(c,b,"Width",a)},HighlightSubTextOnFilter:function(b,c,a){var f=a.vars._Field[0];var d=0;var g=aa_attach_global_css(aa_text(c,b,"HighlightCss",a),null,"highlight");aa_field_handler(f,"ModifyCell",function(o,m,p,r,q){var n=r.vars.DataHolderCntr&&r.vars.DataHolderCntr[0];var k=null;if(n&&n.IDForFilteredResults&&n.IDForFilteredResults>1){if(n.IDForFilteredResults!=d){d=n.IDForFilteredResults;if(n.Filters){for(var h=0;h<n.Filters.length;h++){if(n.Filters[h].field==f){k=n.Filters[h]}}}n.FieldsCache=n.FieldsCache||{};n.FieldsCache[f.Id]=k}else{k=n.FieldsCache[f.Id]}if(!k||!k.HighlightSelectedText){return}var l=jQuery(o).find(">.aa_text,>span>.aa_text")[0];if(!l&&o.firstChild&&o.firstChild.nodeType==1){l=o.firstChild}l=l||o;k.HighlightSelectedText(l,g+" aa_highlight")}},"HighlightSubTextOnFilter")},Boolean:function(b,c,a){var d=a.vars._Field[0];d.WritableControl=function(k,f){var h=a.vars._Field[0];var g=ajaxart_field_createSimpleInput(k,a,false,"checkbox");jQuery(g).addClass("aa_checkbox");if(g.jbRemoveTextboxClass){g.jbRemoveTextboxClass()}g.getValue=function(){return(this.checked)?"true":"false"};g.onclick=function(l){this.updateValue()};g.onblur=function(l){};aa_checked(g,aa_tobool(k));return[g]};ajaxart.runNativeHelper(c,b,"FieldAspect",a);return[]},BooleanTextSummary:function(c,f,a){var b=ajaxart_multilang_run(f,c,"TextForTrue",a);var d=ajaxart_multilang_run(f,c,"TextForTrue",a);function g(k,h){a.vars._Field[0].Text=function(l,m){return aa_tobool(l)?k:h}}g(b,d)},CheckBox:function(b,c,a){var d=a.vars._Field[0];d.HideTitle=true;aa_field_handler(d,"ModifyControl",function(f,m,h,g,k){if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){return}var l=document.createElement("span");l.className="checkbox_title";l.innerHTML=d.Title;f.appendChild(l)},"boolean_checkbox");return[]},Radio:function(b,c,a){var d=a.vars._Field[0];if(aa_bool(c,b,"HideTitle",a)){d.HideTitle=true}aa_field_handler(d,"ModifyControl",function(f,o,l,g,m){if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){var n=aa_tobool(o)?aa_multilang_text(c,b,"TextForYes",a):aa_multilang_text(c,b,"TextForNo",a);jQuery(f).find(".field_control").html(n);return}var h=jQuery('<input type="radio" class="aa_radio" name="'+d.Id+'"/><span class="aa_radio_label">'+aa_multilang_text(c,b,"TextForYes",a)+"</span>");var k=jQuery('<input type="radio" class="aa_radio" name="'+d.Id+'"/><span class="aa_radio_label">'+aa_multilang_text(c,b,"TextForNo",a)+"</span>");if(aa_tobool(o)){h[0].checked=true}else{k[0].checked=true}h[0].aa_value="true";k[0].aa_value="false";aa_empty(f,true);jQuery(f).append(h);jQuery(f).append(k);f.onclick=function(q){if(window.aa_incapture){return}if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){return}var p=jQuery((typeof(event)=="undefined")?q.target:(event.tDebug||event.srcElement));if(p.hasClass("aa_radio_label")){p=p.prev();aa_checked(p[0],true)}ajaxart.writevalue(o,[p[0].aa_value]);aa_invoke_field_handlers(d.OnUpdate,null,null,d,o)}},"boolean_radio");return[]},Password:function(b,c,a){var d=a.vars._Field[0];d.ManualWriteValue=true;d.HashPassword=aa_bool(c,b,"HashPassword",a);d.Control=function(h,f){var g=a.vars._Field[0];return[ajaxart_field_createSimpleInput(h,a,false,"PASSWORD")]};d.ReadOnlyControl=function(g,f){return jQuery("<div>*****</div>").get()};aa_field_handler(d,"OnKeyup",function(k,l,f,h){var k=a.vars._Field[0];var g=(k.HashPassword)?ajaxart_hashPassword(f.value):f.value;ajaxart.writevalue(l,g)},"password");return["true"]},DisableCharacters:function(b,c,a){var d=a.vars._Field[0];d.KeyPressValidator=new RegExp(aa_text(c,b,"CharacterPattern",a));return[]},DisableByCondition:function(b,c,a){var d=a.vars._Field[0];d.Disabled=function(f,g){var h=g.vars._Item?g.vars._Item:f;return aa_bool(h,b,"EnableCondition",a)?[]:["true"]};aa_field_handler(d,"ModifyControl",function(f,l,h,g,k){jQuery(f).find(".field_control").each(function(){input=this;var m=aa_bool(k,b,"EnableCondition",a);if(m){input.removeAttribute("disabled");jQuery(input).removeClass("aa_disabled")}else{input.setAttribute("disabled","disabled");jQuery(input).addClass("aa_disabled")}})},"DisableByCondition")},HideByCondition:function(b,c,a){var d=a.vars._Field[0];if(!aa_bool(c,b,"CheckConditionForEveryItem",a)){d.Hidden=function(f,g){var h=g.vars._Item?g.vars._Item:f;return aa_bool(h,b,"ShowCondition",a)?[]:["true"]}}aa_field_handler(d,"ModifyControl",function(f,o,m,h,n){var l=jQuery(f).parent();var k=jQuery(f).parent()[0];var g=k;if(!(l.hasClass("field_row")||l.hasClass("aa_section"))){g=f}if(aa_bool(o,b,"ShowCondition",aa_merge_ctx(a,h))){jQuery(f).removeClass("aa_hidden_field");g.style.display="";g.display=""}else{jQuery(f).addClass("aa_hidden_field");g.style.display="none";g.display="none"}},"HideByCondition")},CheckConditionForEveryItem:function(b,c,a){return[{apply:function(f,d){f.IsCellHidden=function(h,g){return !aa_bool(h,b,"ShowCondition",aa_merge_ctx(d,g))};f.RenderHiddenCell=aa_text(c,b,"WhenHidden",d)!="Do not render"}}]},CheckConditionOnce:function(b,c,a){return[{apply:function(f,d){f.IsFieldHidden=function(h,g){return !aa_bool(h,b,"ShowCondition",aa_merge_ctx(d,g))}}}]},Hidden:function(b,c,a){var d=a.vars._Field[0];var f=aa_first(c,b,"OnCondition",a);if(!f){d.IsHidden=true;d.IsFieldHidden=function(){return true};aa_field_handler(d,"ModifyCell",function(g,h){jQuery(g).hide().css("display","none")})}else{f.apply(d,a)}},ReadOnlyByCondition:function(b,c,a){var d=a.vars._Field[0];d.ReadOnly=function(f,g){var h=g.vars._Item?g.vars._Item:f;return aa_bool(h,b,"WritableCondition",a)?[]:["true"]}},AddControl:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,l,h,g){var k=aa_first(l,b,"Control",aa_ctx(aa_merge_ctx(a,g),{Cell:[f]}));if(k!=null){k.style.display="inline-block";f.appendChild(k)}})},CustomSuggestionBox:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);ajaxart.customsuggestbox.init(d,c,b,a);return[]},AddTextToSuggestionBox:function(b,c,a){ajaxart.customsuggestbox.addTextToSuggestionBox(b,c,a);return[]},CloseSuggestionBox:function(b,c,a){ajaxart.suggestbox.closePopup();return[]},OpenSuggestionBoxPopup:function(b,c,a){ajaxart.customsuggestbox.openSuggestionBoxPopup(b,c,a);return[]},OpenSuggestionBoxList:function(b,c,a){ajaxart.customsuggestbox.openSuggestionBoxList(b,c,a);return[]},TriggerSuggestionBoxPopup:function(b,c,a){ajaxart.customsuggestbox.triggerSuggestionBoxPopup(b,c,a);return[]},Hyperlink:function(c,d,b){var f=b.vars._Field[0];var a=aa_attach_global_css(aa_text(d,c,"Css",b),null,"hyperlink");aa_field_handler(f,"ModifyCell",function(m,l,h,g,k){jQuery(m).addClass("aa_hyperlink").addClass(a);jQuery(m).click(function(){if(window.aa_incapture){return}ajaxart.run(k,c,"Action",aa_ctx(aa_merge_ctx(b,g),{_ItemsOfOperation:k,Item:k,_ElemsOfOperation:[this.parentNode],ControlElement:[m]}))})})},ImageInTextbox:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyCell",function(n,m,k,f,l){var h=jQuery(n).find(".aatextbox")[0];var g=jQuery('<img src="'+aa_text(c,b,"Image",a)+'" />');g[0].style.cssText=aa_text(c,b,"CssForImage",a);g.insertAfter(h)})},RunningInputFieldData:function(b,c,a){if(a.vars._Field&&a.vars._Cntr&&a.vars._Cntr[0].Items[0]){return a.vars._Field[0].FieldData(a.vars._Cntr[0].Items[0].Items)}return[]}});aa_gcs("search_algorithm",{SimpleSearch:function(c,d,b){var a=aa_bool(d,c,"MatchOnlyTextBeginning",b);return[{newFilter:aa_create_text_filter(a)}]},SearchWords:function(b,c,a){return[{newFilter:aa_create_search_words_text_filter()}]}});ajaxart.gcs.datefilter={ExpressionToFromTo:function(b,d,a){if(!ajaxart.isxml(d)){return[]}var f=d[0].getAttribute("Expression")||"";var c=f.split("-");if(c.length!=2){return[]}d[0].setAttribute("From",c[0]);d[0].setAttribute("To",c[1])}};ajaxart.gcs.validation={ContainsText:function(b,d,a){var f=aa_totext(d);if(f==""){return[]}var c=aa_text(d,b,"Text",a);return aa_frombool(f.indexOf(c)==-1)},MatchesRegularExpression:function(b,d,a){var f=aa_totext(d);if(f==""){return[]}var c=aa_text(d,b,"Expression",a);return aa_frombool(!aa_text_matchesRegex(f,c))},Unique:function(d,f,c){var g=aa_totext(f);if(g==""){return[]}var a=ajaxart.run(f,d,"OtherValues",c);for(var b=0;b<a.length;b++){if(g==aa_totext([a[b]])&&a[b]!=f[0]){return["true"]}}},PassingValidations:function(b,d,a){var c=aa_first(d,b,"TopControl",a);return aa_frombool(aa_passing_validations(c))},ShowValidationError:function(c,f,b){var d=aa_first(f,c,"TopControl",b);var a=aa_multilang_text(f,c,"Error",b);aa_validation_showerror(d,a,null,b);return[]}};aa_gcs("notification_box",{NotificationBox:function(b,c,a){var d=a.vars._Field[0];d.Control=function(f,g){var h=aa_renderStyleObject(aa_first(c,b,"Style",a),{notification_id:aa_text(c,b,"ID",a),setStatusClass:function(k){var m=this.className.split(" ");var n=false;for(var l=0;l<m.length;l++){if(m[l].indexOf("aanotif_status_")==0){m[l]="aanotif_status_"+k;n=true}}if(!n){m.push("aanotif_status_"+k)}this.className=m.join(" ")}},a);jQuery(h).addClass("aa_notification_box_"+h.notification_id);return[h]}},ShowNotification:function(f,g,d){var h=aa_intest?aa_intest_topControl:document;var k=aa_text(g,f,"NotificationBox",d);var a=jQuery(h).find(".aa_notification_box_"+k);for(var c=0;c<a.length;c++){var b={text:aa_text(g,f,"Text",d),status:aa_text(g,f,"Status",d)};a[c].trigger("notification",b)}}});aa_gcs("style_guide",{StyleFromStyleGuide:function(c,f,a){var b=aa_text(f,c,"Style",a);if(a.vars._FromStudio&&aa_tobool(a.vars._FromStudio)){return null}else{var d=a.vars._BartContext&&a.vars._BartContext[0].StyleGuide;if(d&&d[b]){return d[b]}}}});ajaxart.gcs.transition={RightSlide:function(b,c,a){var d={isObject:true};d.replace=function(g,f){aa_left_right_slide(g,f,"RightSlide",aa_int(c,b,"Duration",a),aa_text(c,b,"Background",a),aa_bool(c,b,"CoverLeftMargin",a))};return[d]},LeftSlide:function(b,c,a){var d={isObject:true};d.replace=function(g,f){aa_left_right_slide(g,f,"LeftSlide",aa_int(c,b,"Duration",a),aa_text(c,b,"Background",a))};return[d]}};function aa_left_right_slide(k,p,n,l,d,o){var s=p.parentNode.style.position;if(!s){p.parentNode.style.position="relative"}var g=Math.max(k.clientWidth,p.clientWidth);var b=Math.max(k.clientHeight,p.clientHeight);var a=(n=="LeftSlide")?g:-g;var h=(n=="LeftSlide")?0:g;var c=(k.style.zIndex)?p.style.zIndex+1:1;var f=";background:"+d;if(d==""){f=""}var r;if(n=="RightSlide"&&o){r=document.createElement("div");r.style.cssText="position:absolute; height: "+b+"px; top:0px; left: -"+g+"px; width:"+g+"px;"+f+";z-index:"+c+1;p.parentNode.appendChild(r)}var m="#this.newpos { left: 0px; width: "+g+"px; } #this.newpos { -webkit-transition: width "+l+"ms ease-out, left "+l+"ms ease-out }#this { position:absolute; top:0px; overflow-x:hidden; width:"+h+"px; z-index:"+c+"; left: "+a+"px"+f+";height:"+b+"px} ";var q=aa_attach_global_css(m);jQuery(p).addClass(q);setTimeout(function(){jQuery(p).addClass("newpos")});setTimeout(function(){if(!p||!p.parentNode){return}p.parentNode.style.position=s;jQuery(p).removeClass(q).removeClass("newpos");if(r){p.parentNode.removeChild(r)}aa_remove(k,true)},l)}function aa_showblock(f,d,b){var c=f.Control(d,b);if(c.length==0){return null}if(f.ModifyControl){for(var a=0;a<f.ModifyControl.length;a++){f.ModifyControl[a](c[0],[],"control",b,[])}}return c[0]}function ajaxart_fieldaspect_getField(a){var b=a.vars._Field;if(b==null||b.length==0){return null}return b[0]}function ajaxart_field_getFields(m,f,a){if(typeof(a)=="undefined"){a=[]}var g=m.Fields;var c=[];var h=m.IsNewItem;var k=(m.Items[0].ReadOnly!=null&&ajaxart.tobool_array(m.Items[0].ReadOnly));var b=!(h||k);for(var d=0;d<g.length;d++){var l=g[d];if(h&&l.HiddenForNew){continue}if(k&&l.HiddenForReadOnly){continue}if(b&&l.HiddenForEdit){continue}if(f=="table"&&l.HiddenForTable){continue}if(f=="property sheet"&&l.HiddenForProperties){continue}if(f!="property sheet"&&l.Hidden&&aa_tobool(l.Hidden(a,m.Context))){continue}c.push(g[d])}return c}function ajaxart_field_fix_title(c,b,a){if(c.Title==null||c.Title.length==0){var d=b.split("/").pop().split("@").pop();d=d.substr(0,1).toUpperCase()+d.substr(1,d.length);d=aa_text_capitalizeToSeperateWords(d);c.Title=ajaxart_multilang_text(d,a)}}function ajaxart_field_text(d,f,c,b){if(d.Text){var a=ajaxart.totext_array(ajaxart_runMethod(f,d,"Text",b))}else{if(c[0].__item){var a=c[0][d.Id]}else{var a=ajaxart.totext_array(f)}}if(d.Highlight){a=ajaxart_field_highlight_text(a,d.Highlight)}return a}function ajaxart_field_is_readOnly(b,c,a){if(c.Writable){return false}if(c.ReadOnly==true){return true}if(ajaxart_object_run_boolean_method(c,"ReadOnly",[],a)){return true}if(b==null){return false}if(b.Items==null){return true}if(b.Items.length==0){}if(b.Items[0].ReadOnly==true){return true}if(b.ReadOnly){return true}return(b.Items[0].ReadOnly!=null&&ajaxart.tobool_array(b.Items[0].ReadOnly))}function aa_fieldById(d,b){if(b){for(var c=0;c<b.length;c++){if(b[c].Id==d){return b[c]}if(b[c].IsGroupOnlyForLayout){var a=aa_fieldById(d,b[c].Fields);if(a){return a}}}}}function ajaxart_field_calc_field_data(d,a,c){if(d.Multiple&&d.MultipleItems){return a}if(d.FieldData){var b=ajaxart_runMethod(a,d,"FieldData",c);if(b.length<2){return b}else{return[b[0]]}}else{return a}}function ajaxart_field_RefreshDependentFields(k,h,a){if(k==null||k.DependentFields==null){return}var l=jQuery(document);if(k.RefreshScope=="container"||k.RefreshScope=="screen"){l=jQuery(h).parents(".aa_container").slice(-1)}else{if(k.RefreshScope=="group"){l=jQuery(h).parents(".aa_container").slice(0,1)}else{if(k.RefreshScope=="item"){l=jQuery(h).parents(".aa_item").slice(0,1)}else{if(k.RefreshScope=="table line"){var b=jQuery(h).parents().index(jQuery(h).parents(".aa_list"));var n=jQuery(h).parents().slice(0,b);l=n.filter(".aa_item").slice(-1)}}}}var m=k.DependentFields.split(",");for(var g=0;g<m.length;g++){var o=m[g];var c=l.find(".fld_"+o);for(var d=0;d<c.length;d++){aa_refresh_cell(c[d],a)}}}function ajaxart_fields_set_defaults(g,b,f){for(var d=0;d<b.length;d++){var k=b[d];if(k.DefaultValue!=null&&k.FieldData!=null){var a=ajaxart_runMethod(g,k,"FieldData",f);var h=ajaxart_runMethod(g,k,"DefaultValue",f);if(ajaxart.yesno.is_empty(a,true)){ajaxart.writevalue(a,h)}}if(k.Fields!=null){var c=ajaxart_runMethod(g,k,"FieldData",f);ajaxart_fields_set_defaults(c,k.Fields,f)}}}function ajaxart_fields_recalc_on_save(g,b,f){if(b==null){return}for(var d=0;d<b.length;d++){var k=b[d];if(k.RecalcOnSave!=null&&k.FieldData!=null){var a=ajaxart_runMethod(g,k,"FieldData",f);var h=ajaxart_runMethod(g,k,"RecalcOnSave",f);ajaxart.writevalue(a,h)}if(k.Fields!=null){var c=ajaxart_runMethod(g,k,"FieldData",f);ajaxart_fields_recalc_on_save(c,k.Fields,f)}}}function aa_build_th(f,g,a){var c=jQuery('<th class="fieldtitle th_'+g.Id+'"><span class="aa_field_menu">&nbsp;</span><span class="fieldtitle_title"/><span class="fieldtitle_sort">&nbsp;</span></th>');c[0].Field=g;c.find(">.fieldtitle_title").text(g.Title);var b=ajaxart_getUiPref(f.ID[0],g.Id+"_ColumnWidth",a)||ajaxart.totext_array(g.Width);if(b!=null){jQuery(c).width(b)}if(g.AddInfoIcon){g.AddInfoIcon(c.get(),a)}var d=jQuery(c).find(">.aa_field_menu")[0];if(d&&f.EnableFieldMenu){d.onmousedown=function(h){var k=aa_ctx(a,{MousePos:[{isObject:true,pageX:h.pageX||h.clientX,pageY:h.pageY||h.clientY}]});if(c.OpenFieldMenu){c.OpenFieldMenu(k)}return aa_stop_prop(h)}}return c[0]}function ajaxart_field_fix_th(d,c,f,a){var b=ajaxart_getUiPref(d.ID[0],f.Id+"_ColumnWidth",a)||ajaxart.totext_array(f.Width);if(b!=null){jQuery(c).width(b)}}function ajaxart_subfield_bypath(g,f){if(f==""){return g}if(g.Fields==null){return null}var h=f,d="";if(f.indexOf("/")>-1){h=f.substring(0,f.indexOf("/")-1);d=f.substring(f.indexOf("/")+1)}for(var c=0;c<g.Fields.length;c++){var b=g.Fields[c];if(b.Path!=null){if(b.Path==h){return ajaxart_subfield_bypath(b,d)}}else{var a=ajaxart_subfield_bypath(b,f);if(a!=null){return a}}}return null}function aa_field_handler(d,c,b,f,a){aa_register_handler(d,c,b,f,a)}function aa_invoke_field_handlers(d,b,g,f,h,a){if(aa_incapture){return}if(d){for(var c=0;c<d.length;c++){d[c](f,h,b,g,a)}}}function ajaxart_fields_aftersave(l,d,k,g,a){if(g==null){return}for(var f=0;f<g.length;f++){var h=g[f];var c=d;odata1=k;var m=h.Path;if(m==null){m=""}if(m!=""&&c.length>0){c=ajaxart.xml.xpath(c[0],m)}if(m!=""&&odata1.length>0){odata1=ajaxart.xml.xpath(odata1[0],m)}if(h.Fields!=null){ajaxart_fields_aftersave(l,d,k,h.Fields,a)}if(h.AfterSave){var b=aa_ctx(a,{OriginalValue:odata1,Item:l});ajaxart_runMethod(c,h,"AfterSave",b)}}}function aa_set_fielddata_method(b,a){b.FieldData=function(g,d){if(g.length==0){return[]}if(!g[0].nodeType){var f=[g[0][a.split("@").pop()]]}else{var f=ajaxart.xml.xpath(g[0],a,false)}if(f.length>0){return f}if(!d||aa_tobool(d.vars._NoDefaultValue)){return f}var f=ajaxart.xml.xpath(g[0],a,true);var c=ajaxart_runMethod(g,b,"DefaultValue",d);ajaxart.writevalue(f,c,true);return f}}aa_gcs("field_aspect",{CellPresentation:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.CellPresentation=aa_text(c,b,"Content",a);return[]},ClearValueButton:function(c,d,a){var f=a.vars._Field[0];f.Style=aa_first(d,c,"Style",a);function b(l,k){var h={ClearValue:function(){var m=jQuery(l).find("input")[0];if(m){m.value="";f.ManualWriteValue=false;if(m.updateValue){m.updateValue()}if(m.Refresh){m.Refresh()}b(l,k)}},FieldControlWrapper:l,IsValueEmpty:aa_totext(k)=="",Title:aa_multilang_text(d,c,"Title",a)};var g=aa_renderStyleObject(f.Style,h,a);jQuery(g).addClass("aa_clear_button")}aa_field_handler(f,"ModifyControl",function(g,l,k,h){b(g,l)});aa_field_handler(f,"OnUpdate",function(k,l,h){var g=h.parentNode;b(g,l)})},Control:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}ajaxart_addControlMethod(d,"WritableControl",c,b,"Control",a)},GlobalCss:function(d,f,c){var g=c.vars._Field[0];var b=aa_text(f,d,"GlobalCss",c);var a=aa_attach_global_css(b,null,g.Id);aa_field_handler(g,"ModifyCell",function(h,n,l,k,m){if(aa_paramExists(d,"OnCondition")&&!aa_bool(n,d,"OnCondition",c)){return}jQuery(h).addClass(a)})},CssOnCondition:function(d,f,c){var g=c.vars._Field[0];var b=aa_text(f,d,"Css",c);var a=aa_attach_global_css(b,null,g.Id,true);aa_field_handler(g,"ModifyCell",function(h,o,l,k,n){if(aa_paramExists(d,"OnCondition")&&!aa_bool(o,d,"OnCondition",c)){return}jQuery(h).addClass(a+"_wrapper");var m=h.firstChild||h;jQuery(m).addClass(a)},null,200)},DynamicCss:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyCell",function(f,o,l,h,n){if(aa_paramExists(b,"OnCondition")&&!aa_bool(o,b,"OnCondition",a)){return}var k=aa_text(o,b,"Css",a);var g=aa_attach_global_css(k,null,d.Id,true);jQuery(f).addClass(g+"_wrapper");var m=f.firstChild||f;jQuery(m).addClass(g)},null,200)},Css:function(d,f,c){var h=aa_text(f,d,"OnElement",c);var l=ajaxart.compile(d,"Class",c);var a=ajaxart.compile(d,"Inline",c);var g=ajaxart.compile(d,"OnCondition",c,null,false,true);var b=function(n,q){for(var o=0;o<n.length;o++){if(!ajaxart_runcompiled_bool(g,q,d,"OnCondition",c,true)){return}var m=ajaxart_runcompiled_text(l,q,d,"Class",c);var p=ajaxart_runcompiled_text(a,q,d,"Inline",c);if(p!=""){aa_setCssText(n[o],n[o].style.cssText+";"+p)}if(m!=""){n[o].className=n[o].className+" "+m}}};var k=function(p,n){var m=function(q,u,t,r){if(n=="cell"){var s=q}else{if(n=="content"){var s=jQuery(q).find(".field_control")[0]}else{if(n=="title"){var s=jQuery(q.parentNode).find(">.propertysheet_title_td")[0]}else{var s=q}}}if(!s){s=q}p([s],u)};var o=ajaxart_fieldaspect_getField(c);aa_field_handler(o,"ModifyCell",m)};k(b,h);return[]},DescriptionForEmptyText:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);d.DescriptionForEmptyText=ajaxart.totext_array(ajaxart_multilang_run(c,b,"Description",a));d.EmptyTextCssClass=aa_attach_global_css(aa_text(c,b,"Css",a),null,"empty_text_description");aa_field_handler(d,"ModifyControl",function(f,l,h,g,k){if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){return}jBart.addDescriptionForEmptyText(f,d.DescriptionForEmptyText,d.EmptyTextCssClass)},"DescriptionForEmptyText",10);aa_field_handler(d,"OnFocus",function(g,h,f){if(jQuery(f).hasClass("empty_text_description")){if(f.value==g.DescriptionForEmptyText){f.value=""}jQuery(f).removeClass("empty_text_description").removeClass(g.EmptyTextCssClass)}},"DescriptionForEmptyText",10);aa_field_handler(d,"OnBlur",function(g,h,f){if(f.value==""&&document.activeElement!=f){jQuery(f).addClass("empty_text_description").addClass(g.EmptyTextCssClass);f.value=g.DescriptionForEmptyText}},"DescriptieonForEmptyText",10);return[]},FieldData:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}ajaxart_addMethod(d,"FieldData",b,"FieldData",a);return[]},MobileScroll:function(profile,data,context){if(!window.iScroll&&!window.aa_loading_iscroll){window.aa_loading_iscroll=true;jQuery.getScript("lib/iscroll.js",function(){aa_loading_iscroll=false})}var field=context.vars._Field[0];aa_field_handler(field,"ModifyControl",function(cell,field_data,cell_presentation,ctx){cell.style.overflow="auto";aa_addOnAttach(cell,function(){var paramsToEval="var params = "+aa_text(data,profile,"ScrollParams",context)+";";eval(paramsToEval);var element=cell;if(aa_text(data,profile,"OnElement",context)=="content"){element=cell.firstChild;if(!element){return}}ajaxart.run(data,profile,"Height",aa_ctx(context,{ControlElement:[element]}));ajaxart.run(data,profile,"Width",aa_ctx(context,{ControlElement:[element]}));if(window.iScroll&&aa_bool(data,profile,"EnableScroll",context)){cell.IScroll=new iScroll(element,params);setTimeout(function(){cell.IScroll.refresh()},200)}})})},HoverCssClass:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,k,h,g){f.onmouseover=function(){jQuery(f).addClass("aa_hover")};f.onmouseout=function(){jQuery(f).removeClass("aa_hover")}});return[]},ImageReadOnlyImp:function(c,f,b){var g=ajaxart_fieldaspect_getField(b);if(g==null){return[]}g.ImageHeight=aa_text(f,c,"Height",b);g.ImageWidth=aa_text(f,c,"Width",b);g.KeepImageProportions=aa_bool(f,c,"KeepImageProportions",b)&&g.ImageHeight!=""&&g.ImageWidth!="";g.HideEmptyImage=aa_bool(f,c,"HideEmptyImage",b);g.ImageWidth=g.ImageWidth.split("px")[0];g.ImageHeight=g.ImageHeight.split("px")[0];if(!g.KeepImageProportions){if(g.ImageWidth!=""){g.ImageWidth+="px"}if(g.ImageHeight!=""){g.ImageHeight+="px"}}var d=aa_text(f,c,"UrlForMissingImage",b);var a=aa_text(f,c,"TextForMissingImage",b);var h=ajaxart.compile(c,"Src",b);g.Text=function(k,l){var o=this;var p=ajaxart_runcompiled_text(h,k,c,"Src",l);if(o.HideEmptyImage&&ajaxart.totext_array(k)==""){p=""}if(p==""){if(a!=""){return[jQuery("<span class='aa_missing_image'></span>").text(a)[0]]}else{if(d!=""){p=d}else{return["<span/>"]}}}var m="<img src='"+p+"'";var n=" style='";if(o.ImageHeight!=""){n=n+"height:"+o.ImageHeight+"; ";m+=' height="'+o.ImageHeight+'"'}if(o.ImageWidth!=""){n=n+"width:"+o.ImageWidth+"; ";m+=' width="'+o.ImageWidth+'"'}m=m+n+"' ";m+="/>";return[m]};g.ReadOnlyControl=function(k,l){var n=this;var m=jQuery(this.Text(k,l)[0])[0];if(aa_paramExists(c,"OnClick")){m.onclick=function(){if(window.aa_incapture){return}ajaxart.run(k,c,"OnClick",aa_merge_ctx(b,l))};jQuery(m).css("cursor","pointer")}if(n.KeepImageProportions){aa_keepimageprops(m,n.ImageWidth,n.ImageHeight);var o=jQuery('<div style="overflow:hidden; width:'+n.ImageWidth+"px; height:"+n.ImageHeight+'px"/>')[0];o.appendChild(m);return[o]}return[m]};if(g.KeepImageProportions){g.CellPresentation="control"}return[]},ModifyControl:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}aa_field_handler(d,"ModifyControl",function(f,m,k,g,l){var h=jQuery(f).find(".field_control");ajaxart.run(l,b,"Action",aa_merge_ctx(a,g,{Cell:[f],FieldData:m,Input:h.get()}))});return[]},OnUpdate:function(c,d,b){var f=ajaxart_fieldaspect_getField(b);var a=function(n,m,o,l,h){var k=o.ajaxart?aa_merge_ctx(b,o.ajaxart.params):b;var q=jQuery(o).parents(".aa_item")[0];var p=q&&q.ItemData;var g=aa_ctx(k,{_Field:[n],_FieldData:m,_Input:[o],ControlElement:[o],_Item:p||[]});if(h){g=aa_ctx(g,h)}if(jQuery(o).parents(".aa_container").length>0){g.vars._Cntr=[jQuery(o).parents(".aa_container")[0].Cntr];g.vars.HeaderFooterCntr=g.vars._Cntr[0].Context.vars.HeaderFooterCntr}ajaxart.run(m,c,"Action",g)};aa_field_handler(f,"OnUpdate",a,aa_text(d,c,"ID",b),aa_int(d,c,"Phase",b));return[]},PopupImage:function(b,c,a){var d=a.vars._Field[0];var f=aa_text(c,b,"ID",a);if(f==""){f=null}d.PupupImageCss=aa_attach_global_css(aa_text(c,b,"Css",a),null,"popupimage");aa_field_handler(d,"ModifyControl",function(g,n,m,h){if(ajaxart_field_is_readOnly(h.vars._Cntr[0],g.Field,h)){return}var l=jQuery(g).find(".field_control")[0];if(l==null){return}var k=document.createElement("span");k.className="aa_field_image image_fld_"+d.Id+" "+d.PupupImageCss;k.innerHTML="&nbsp;";jQuery(k).insertAfter(l);k.onmousedown=function(q){var p=h.vars._Field[0];var o=jQuery(g).find(".field_control")[0];if(o&&o.TogglePopup&&!jQuery(o).hasClass("aa_disabled")){o.TogglePopup()}};k.onmousemove=function(p){var o=jQuery(g).find(".field_control")[0];if(o&&o.DetectResize){o.DetectResize(p)}}},f);return[]},Resizer:function(b,c,a){var d=a.vars._Field[0];d.RememberResizerWidth=aa_bool(c,b,"RememberLastWidth",a);if(aa_bool(c,b,"Disable",a)){aa_field_handler(d,"ModifyControl",function(){},"resizer");return[]}var f=function(g,p,m,h){function o(r,u){aa_defineElemProperties(r,"DetectResize");function q(v){document.onmouseup=t;r.onmousemove=null;document.onmousemove=s;return aa_stop_prop(v)}function s(x){var v=ajaxart.ui.mousePos(x);var w=v.x-ajaxart.ui.absoluteLeft(r);if(jQuery(r).parents(".right2left").length>0){w=ajaxart.ui.absoluteLeft(r)+r.offsetWidth-v.x}jQuery(r).width(w);if(u.RememberResizerWidth&&h.vars._Cntr){ajaxart_setUiPref(aa_totext(h.vars._Cntr[0].ID),u.Id+"_Width",""+w+"px",h)}return aa_stop_prop(x)}function t(v){jQuery(r).removeClass("col_resize");document.onmouseup=null;document.onmousemove=null;r.onmousemove=r.DetectResize;r.onmousedown=r.onmousedownOrig;return aa_stop_prop(v)}r.onmousemove=r.DetectResize=function(x){var v=ajaxart.ui.mousePos(x);var w=ajaxart.ui.absoluteLeft(r)+r.offsetWidth-v.x<3;if(jQuery(r).parents(".right2left").length>0){w=v.x-ajaxart.ui.absoluteLeft(r)<3}if(w){jQuery(r).addClass("col_resize");r.onmousedown=q}else{jQuery(r).removeClass("col_resize");r.onmousedown=r.onmousedownOrig}}}if(g.ReadOnly){return}var k=jQuery(g).find(">.field_control")[0];if(k!=null){k.onmousedownOrig=k.onmousedown;o(k,d);if(d.RememberResizerWidth&&h.vars._Cntr){var n=h.vars._Cntr[0];var l=ajaxart_getUiPref(aa_totext(n.ID),d.Id+"_Width",h);if(l!=null){jQuery(k).css("width",l)}}}};aa_field_handler(d,"ModifyControl",f,"resizer");return[]},SimpleInput:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.Control=function(m,f){var k=this;f=aa_ctx(f,{_Field:[k]});var h=f.vars._Cntr&&f.vars._Cntr[0];if(ajaxart_field_is_readOnly(h,k,f)){var l=(k.Text)?aa_totext(k.Text(m,a)):aa_totext(m);l=l.replace(/\n/g,"<br/>");var g=jQuery("<div class='aa_text'/>").html(l)[0];return[g]}return[ajaxart_field_createSimpleInput(m,f,ajaxart_field_is_readOnly(h,k,f))]};return[]},Toolbar:function(c,d,b){var f=b.vars._Field[0];var a=aa_attach_global_css(aa_text(d,c,"Css",b),null,"field_toolbar");ajaxart_addMethod(f,"Operations",c,"Operations",b);f.RefreshToolbar=function(p,s,o,u){jQuery(s).addClass(a);if(u.vars._Cntr&&ajaxart_field_is_readOnly(u.vars._Cntr[0],p,u)){return}var q=jQuery('<span class="aa_field_toolbar" />')[0];var g=aa_text(d,c,"MinWidth",b);if(g!=""){jQuery(q).css("min-width",g).css("display","inline-block")}var h=ajaxart_runMethod(o,p,"Operations",u);for(var m=0;m<h.length;m++){var n=h[m];var l=document.createElement("span");aa_defineElemProperties(l,"Action,Operation");l.Operation=n;var t=ajaxart.totext_array(ajaxart_runMethod(o,n,"CssClass",u));l.className="aa_field_toolbar_image "+t;l.title=ajaxart.totext_array(ajaxart_runMethod(o,n,"Title",u));var k=aa_totext(ajaxart_runMethod(o,n,"Icon",u));if(k!=""){l.style.background="url("+k+") no-repeat"}q.appendChild(l);l.Action=l.onmousedown=function(x){var w=(typeof(event)=="undefined")?x.target:event.srcElement;var y=w.Operation;var v=jQuery(s).find(".field_control")[0];if(y!=null){ajaxart_runMethod(o,y,"Action",aa_ctx(u,{_Field:[p],_FieldData:o,ControlElement:[v],_Input:[v],_OperationElement:[w]}))}}}var r=jQuery(s).find(">.aa_field_toolbar")[0];aa_remove(r,true);if(jQuery(s).find(">.aa_option_page").length>0){jQuery(q).insertBefore(jQuery(s).find(">.aa_option_page"))}else{s.appendChild(q)}};aa_field_handler(f,"ModifyControl",function(g,l,k,h){f.RefreshToolbar(f,g,l,h)});if(aa_bool(d,c,"RefreshOnUpdate",b)){aa_field_handler(f,"OnUpdate",function(k,l,h){var g=h.parentNode;k.RefreshToolbar(k,g,l,b)})}},WritableControl:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}aa_setMethod(d,"WritableControl",b,"Control",a);return[]},LimitTextLength:function(f,g,d){var h=ajaxart_fieldaspect_getField(d);if(h==null){return[]}var a=aa_int(g,f,"MaxLength",d);if(a<=0){return}var c=aa_text(g,f,"CuttingMark",d);var k=aa_bool(g,f,"FullTextAsTooltip",d);var b=function(n,l){var m=ajaxart.totext_array(this.OriginalText(n,l));if(m.length>a){return[m.substring(0,a-c.length)+c]}else{return[m]}};if(h.Text==null){h.Text=function(m,l){return m}}h.OriginalText=h.Text;h.Text=b;if(k){aa_field_handler(h,"ModifyCell",function(l,p,n,m){var o=ajaxart.totext_array(h.OriginalText(p,m));if(o.length>a){l.setAttribute("title",o)}})}return[]},OnKeyUp:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);aa_field_handler(d,"OnKeyup",function(k,m,g,h,f){var l=aa_ctx(a,{_Field:[k],_FieldData:m,_Input:[g],ControlElement:[g]});if(jQuery(g).parents(".aa_container").length>0){l.vars._Cntr=[jQuery(g).parents(".aa_container")[0].Cntr]}if(f&&f.KeyCode){l.vars.KeyCode=f.KeyCode}if(f&&f.CtrlKey){l.vars.CtrlKey=f.CtrlKey}ajaxart.run(m,b,"Action",l)});return[]},OnClick:function(b,d,a){var f=ajaxart_fieldaspect_getField(a);var c=function(g,n,l,h){var k=jQuery(g).find(".field_control")[0];var m=function(o){if(window.aa_incapture){return}ajaxart.run(n,b,"Action",aa_ctx(h,{_Field:[f],_FieldData:n,ControlElement:[this]}))};if(k){k.onclick=m}else{g.onclick=m}};aa_field_handler(f,"ModifyCell",c);return[]},OnHover:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);aa_field_handler(d,"ModifyControl",function(f,l,h,g,k){f.onmouseover=function(){if(!f.isInside){ajaxart.run(l,b,"Action",g)}f.isInside=true};f.onmouseout=function(){f.isInside=false}},"OnHover");return[]},CleanGlobalCss:function(b,c,a){return[aa_clean_global_css(aa_text(c,b,"Css",a))]},AdaptCssForBrowser:function(b,c,a){return[aa_adapt_css_for_browser(aa_text(c,b,"Css",a))]},Animation:function(c,d,a){var f=ajaxart_fieldaspect_getField(a);var b=aa_first(d,c,"Type",a);if(!b){return[]}aa_field_handler(f,"ModifyControl",function(g,n,k,h,m){var l=g.firstChild;if(!l){return}b.animate(l,function(){ajaxart.run(d,c,"OnDone",a)})});return[]},DynamicSize:function(d,f,b){var g=ajaxart_fieldaspect_getField(b);var c=aa_first(f,d,"Width",b);var a=aa_first(f,d,"Height",b);aa_field_handler(g,"ModifyControl",function(h,o,l,k,n){var m=h.firstChild;if(!m){return}if(c){c.apply(m)}if(a){a.apply(m)}})}});aa_gcs("action",{WriteValue:function(c,f,b){var a=ajaxart.run(f,c,"To",b);var d=ajaxart.run(f,c,"Value",b);if(ajaxart.isObject_array(a)&&a[0]["WriteValue"]!=null){ajaxart.runScriptParam(d,a[0]["WriteValue"],b)}else{ajaxart.writevalue(a,d)}return["true"]},WriteValueWithoutAutoSave:function(b,d,a){var f=ajaxart.run(d,b,"To",a);var c=ajaxart.run(d,b,"Value",a);ajaxart.writevalue(f,c,true)},RunActionOnItems:function(g,k,f){var c=ajaxart.run(k,g,"Items",f);var a=aa_bool(k,g,"IndicateLastItem",f);var h=aa_bool(k,g,"IndicateItemIndex",f);for(var d=0;d<c.length;d++){var b=f;if(h){b=aa_ctx(b,{_ItemIndex:[""+d]})}if(d==c.length-1&&a){b=aa_ctx(b,{_IsLastItem:["true"]})}ajaxart.run([c[d]],g,"Action",b)}},RunActions:function(c,d,b){var f=ajaxart.subprofiles(c,"Action");var a=[];for(i in f){a=ajaxart.run(d,f[i],"",b)}return["true"]}});aa_gcs("bart_url",{NewUrlFragment:function(c,g,b){var k=aa_text(g,c,"Current",b);var l=aa_text(g,c,"Proposed",b);var p=k.split("?");var a=l.split("?");var n="";for(var f=1;f<a.length;f++){if(a[f].length>0&&a[f].charAt(a[f].length-1)==";"){a[f]=a[f].substring(0,a[f].length-1)}var o=a[f].substring(0,a[f].indexOf("="));if(o==""){continue}if(f==1){n+=","}n=n+o+","}var d="";for(var f=1;f<a.length;f++){var m=a[f].indexOf("=");if(m==-1||m==a[f].length-1){continue}d+="?"+a[f]}for(var f=1;f<p.length;f++){var h=p[f].substring(0,p[f].indexOf("="));if(h.length==0){continue}if(n.indexOf(","+h+",")>-1){continue}d+="?"+p[f]}return[d]}});aa_gcs("jbart_jsloader",{LoadJavascriptFile:function(b,c,a){return[{Load:function(d,g){if(!ajaxart.jbart_studio&&aa_bool(c,b,"LoadInDesignTimeOnly",g)){return}var f=aa_text(c,b,"Url",g);jBart.vars.loaded_scripts=jBart.vars.loaded_scripts||{};if(jBart.vars.loaded_scripts[f]){return}ajaxart_async_Mark(g);jBart.vars.loaded_scripts[f]=true;ajaxart_RunAsync(c,ajaxart.fieldscript(b,"EnsureLoaded"),aa_ctx(g,{JsFileUrl:[f]}),function(){ajaxart_async_CallBack(c,g)})}}]},LoadCssFiles:function(b,c,a){return[{Load:function(d,f){if(!ajaxart.jbart_studio&&aa_bool(c,b,"LoadInDesignTimeOnly",f)){return}ajaxart.runNativeHelper(c,b,"Load",a)}}]},LoadFilesForPalletes:function(b,c,a){return[{Load:function(d,f){if(!ajaxart.jbart_studio&&aa_bool(c,b,"LoadInDesignTimeOnly",f)){return}ajaxart.runNativeHelper(c,b,"Load",aa_merge_ctx(a,f))}}]},AutoUsingJQuery:function(b,c,a){ajaxart_async_Mark(a);jQuery.ajax({url:aa_totext(a.vars.JsFileUrl),dataType:"script",success:function(){ajaxart_async_CallBack(c,a)},error:function(){ajaxart_async_CallBack(c,a)}})},PollingOfJsExpression:function(c,f,a){var g=aa_get_func(aa_text(f,c,"Expression",a));var b=aa_int(f,c,"PollingTime",a);if(g()){return}ajaxart_async_Mark(a);var h=document.createElement("script");h.setAttribute("src",aa_totext(a.vars.JsFileUrl));document.body.appendChild(h);ajaxart_async_Mark(a);function d(){if(g()){ajaxart_async_CallBack(f,a)}else{setTimeout(d,b)}}d()},CallbackFunction:function(b,c,a){alert("EnsureLoaded of CallbackFunction is not implemented yet")}});aa_gcs("bart",{PageByID:function(d,g,c){if(!c.vars._BartContext){return[]}var a=c.vars._BartContext[0].Pages;if(!a){return[]}var b=aa_text(g,d,"PageID",c);var f=ajaxart_object_byid(a,b);if(f){return[f]}return ajaxart.runNativeHelper(g,d,"NewPage",c);return[]},HtmlPageTitle:function(b,c,a){return[{Load:function(d,f){document.title=aa_text(c,b,"Title",aa_merge_ctx(a,f))}}]},Javascript:function(a,b,c){return[{Load:function(d,f){if(aa_tobool(f.vars.JBart_OnlyShowPage)){return}var k=a.getAttribute("ScriptOnLoad");if(!k||k==""){return}try{var g=aa_get_func(k,true);g(f)}catch(h){ajaxart.log("JavaScript: "+h.message,"error")}}}]},Page:function(b,c,a){var d={isObject:true};d.ID=ajaxart.run(c,b,"ID",a);d.ResourceIDs=ajaxart.run(c,b,"ResourceIDs",a);d.ResourceID=ajaxart.run(c,b,"ResourceID",a);d.Type=ajaxart.run(c,b,"Type",a);var f=function(g){g.Control=function(k,l){var h=aa_merge_ctx(a,l);ajaxart.runNativeHelper(c,b,"OverrideUiPrefs",h);var m=[];ajaxart.trycatch(function(){m=ajaxart.run(k,b,"Control",aa_ctx(h,{PageID:g.ID}))},function(n){m=jQuery("<div>error showing page</div>").get()});return m}};f(d);return[d]}});aa_gcs("jbart_resource",{Data:function(c,f,a){var h={isObject:true,Type:"query"};h.Id=aa_text(f,c,"ResourceID",a);h.ID=[h.Id];h.CacheIn=aa_first(f,c,"CacheIn",a);h.FullID=jBart.utils.getWidgetIDFromContext(a)+"_"+h.Id;h.AutoSaveSampleData=aa_bool(f,c,"AutoSaveSampleData",a);var b=h.Type=aa_text(f,c,"ValueType",a);h.Items=[];h.LoadFromValue=function(k){if(b=="calculated"){return}if(b=="xml"){if(h.Xml){var m=jbart_data(k,"single");if(m){ajaxart.xml.copyElementContents(h.Xml,m);ajaxart.xml.xml_changed(h.Xml)}}else{h.Items=jbart_data(k,"single");h.Xml=h.Items[0]}}if(b=="xml multiple"){h.Items=jbart_data(k,"multiple")}if(typeof(k)!="string"){k=aa_totext([k])}if(b=="json to xml"){h.Items=jbart_data(k,"single")}if(b=="json"){var m={};try{m=JSON.parse(k)}catch(l){m.error="JSON: "+(l.getMessage?l.getMessage():"")+", parsing value "}h.Items=(ajaxart.isArray(m))?m:[m]}if(h.Type=="javascript"){var m=aa_run_js_code(k,f,a);if(m){h.Items=(ajaxart.isArray(m))?m:[m]}}};if(b=="calculated"){h.Items=aa_run(f,c,"Value",a)}else{if(h.CacheIn){var d=aa_totext(h.CacheIn.GetValue(f,aa_ctx(a,{DataResource:[h]})))}else{var d=aa_first(f,c,"Value",a)}h.LoadFromValue(d)}if(b=="xml"&&h.CacheIn){h.XmlChanged=function(){if(h.Saving){return}h.Saving=true;setTimeout(h.SaveXml,200)};h.SaveXml=function(){h.CacheIn.Save(f,aa_ctx(a,{DataResource:[h]}));h.Saving=false};ajaxart_xml_onchange(h.Xml,h.XmlChanged,a)}h.DataSource=aa_first(f,c,"DataSource",a);if(h.DataSource&&h.Xml){var g=aa_getXmlInfo(h.Xml,a,false);g.Save=function(l,k){h.DataSource.Save(h.Items,aa_ctx(a,k))};h.Load=function(k,l){if(this.DataLoaded){return}ajaxart_async_Mark(l);aa_runMethodAsyncQuery(h,h.DataSource.Retrieve,f,aa_ctx(a,l),function(n,m){h.DataLoaded=true;h.LoadFromValue(n[0]);ajaxart_async_CallBack(k,l)})}}return[h]},CacheInCookies:function(b,c,a){return[{GetValue:function(d,f){var h=f.vars.DataResource[0];var g=ajaxart.cookies.valueFromCookie(h.FullID);return g?[g]:[]},Save:function(d,f){var g=f.vars.DataResource[0];if(g.Items[0]){ajaxart.cookies.writeCookie(g.FullID,ajaxart.xml2text(g.Items[0]))}}}]},CacheInLocalStorage:function(b,c,a){return[{GetValue:function(d,f){var h=f.vars.DataResource[0];var g=window.localStorage[h.FullID];return g?[g]:[]},Save:function(d,f){var g=f.vars.DataResource[0];if(g.Items[0]){window.localStorage[g.FullID]=ajaxart.xml2text(g.Items[0])}}}]}});aa_gcs("bart_resource",{ResourcesToGlobalVars:function(c,f,b){if(!b.vars._GlobalVars){return}var d=b.vars._GlobalVars[0];var h=b.vars._BartContext[0];var g=h.Resources;for(var a=0;a<g.length;a++){var k=function(l,m){var n=aa_totext(m.ID);l[n]=function(){return m.Items}};k(d,g[a])}},Value:function(b,c,a){var d={isObject:true,Type:"value"};d.Id=aa_text(c,b,"ResourceID",a);d.ID=[d.Id];d.FullID=jBart.utils.getWidgetIDFromContext(a)+"_"+d.Id;d.Items=ajaxart.run(c,b,"Value",a);return[d]},Xml:function(c,d,a){var g={isObject:true,Type:"query"};g.Id=aa_text(d,c,"ResourceID",a);g.ID=[g.Id];g.Mode=aa_text(d,c,"Mode",a);g.Storage=aa_text(d,c,"Storage",a);g.FullID=jBart.utils.getWidgetIDFromContext(a)+"_"+g.Id;g.AutoSaveSampleData=aa_bool(d,c,"AutoSaveSampleData",a);var k="jBartWidget_"+ajaxart.totext(a.vars.WidgetId)+"_"+g.Id;if(window[k]){g.Xml=window[k][0]||ajaxart.parsexml("<xml/>")}else{if(g.Storage==""||g.Storage=="in memory"){g.Xml=aa_first(d,c,"Xml",a)}else{var b="";if(g.Storage=="cookie"){b=ajaxart.cookies.valueFromCookie(g.FullID)}if(g.Storage=="local storage"&&window.localStorage){b=window.localStorage[g.FullID]}if(b==null||b==""){g.Xml=aa_first(d,c,"Xml",a)}else{g.Xml=ajaxart.parsexml(b)}if(!g.Xml){g.Xml=ajaxart.parsexml("<xml/>")}function h(l){l.XmlChanged=function(){if(l.Saving){return}l.Saving=true;setTimeout(l.SaveXml,200)};l.SaveXml=function(){if(l.Storage=="cookie"){ajaxart.cookies.writeCookie(l.FullID,ajaxart.xml2text(l.Xml))}if(l.Storage=="local storage"&&window.localStorage){window.localStorage[l.FullID]=ajaxart.xml2text(l.Xml)}l.Saving=false};ajaxart_xml_onchange(l.Xml,l.XmlChanged,a)}h(g)}}if(!g.Xml){return[g]}g.Items=(g.Mode=="single"?[g.Xml]:aa_xpath(g.Xml,"*"));g.DataSource=aa_first(d,c,"DataSource",a);if(g.DataSource){var f=aa_getXmlInfo(g.Xml,a,false);f.Save=function(m,l){g.DataSource.Save([g.Xml],aa_ctx(a,l))};g.Load=function(l,m){if(this.DataLoaded){return}ajaxart_async_Mark(m);aa_runMethodAsyncQuery(g,g.DataSource.Retrieve,d,aa_ctx(a,m),function(o,n){g.DataLoaded=true;if(o.length>0){ajaxart.xml.copyElementContents(g.Xml,o[0])}ajaxart_async_CallBack(l,m)})}}return[g]},Javascript:function(c,f,b){try{var d=aa_get_func(c.getAttribute("Code"));var a=d(b);return[a]}catch(g){ajaxart.log("JavaScript: "+g.message,"error")}}});aa_gcs("data",{Switch:function(b,c,a){return aa_switch(b,c,a)},Subset:function(b,d,a){var f=aa_int(d,b,"From",a)-1;var c=aa_int(d,b,"Count",a);if(isNaN(c)){c=d.length}return d.slice(f,f+c)},JustInTimeCalculation:function(c,d,b){var a={isObject:true,Content:null};a.GetContent=function(f,g){if(a.Content==null){a.Content=ajaxart.run(f||d,c,"Content",aa_merge_ctx(b,g))}return a.Content};return[a]},JavaScript:function(c,d,b){var a=aa_run_js_code(aa_text(d,c,"Code",b),d,b);if(!a){return[]}if(typeof(a)=="string"){return[a]}if(typeof(a)=="number"){return[""+a]}if(typeof(a)=="boolean"){if(a){return["true"]}else{return[]}}if(ajaxart.isArray(a)){return a}return[a]},AddSeparator:function(c,f,b){var d=aa_first(f,c,"AddBefore",b);var g=aa_first(f,c,"AddAfter",b);var a=[];if(d!=null){a.push(d)}ajaxart.each(f,function(k,h){var l=aa_first(f,c,"Separator",b);a.push(k);if(h+1<f.length&&l!=null){a.push(l)}});if(g!=null){a.push(g)}return a},Count:function(c,d,b){var a=ajaxart.run(d,c,"Items",b);return[a.length]},AssignTemplate:function(c,f,a){var l=aa_text(f,c,"Template",a);var k=ajaxart.run(f,c,"Input",a);var d="",b=l;while(b.indexOf("{%")>-1){var h=b.indexOf("{%");var g=b.indexOf("%}",h);d+=b.substring(0,h);var m=b.substring(h+1,g+1);d+=aa_totext(ajaxart.dynamicText(k,m,a,null,false));b=b.substring(g+2)}d+=b;b=d;d="";while(b.indexOf("t(")>-1){var h=b.indexOf("t(");var g=b.indexOf(")",h);d+=b.substring(0,h);var m=b.substring(h+2,g);d+=ajaxart_multilang_text(m,a);b=b.substring(g+1)}d+=b;return[d]},FirstSucceeding:function(f,g,d){var b=ajaxart.subprofiles(f,"Item");for(var c=0;c<b.length;c++){var a=ajaxart.run(g,b[c],"",d);if(a.length>0){return a}}return[]},IfThenElse:function(b,c,a){return aa_ifThenElse(b,c,a)},ItemByID:function(c,f,b){var d=ajaxart.run(f,c,"List",b);var g=aa_text(f,c,"ID",b);for(var a=0;a<d.length;a++){if(d[a].ID==g){return[d[a]]}}return[]},ItemsByIDs:function(f,h,c){var g=ajaxart.run(h,f,"List",c);var d=","+aa_text(h,f,"IDs",c)+",";if(d==",*,"){return g}var a=[];for(var b=0;b<g.length;b++){if(g[b].Id!=""&&d.indexOf(g[b].Id)!=-1){a.push(g[b])}}return a},List:function(g,h,d){var a=ajaxart.subprofiles(g,"Item");var b=[];for(var c=0;c<a.length;c++){var f=ajaxart.run(h,a[c],"",d);ajaxart.concat(b,f)}return b},Lookup:function(d,h,c){var n=aa_text(h,d,"LookupName",c);var k=ajaxart.run(h,d,"Version",c);var m=false;if(typeof(ajaxart.lookup_cache[n])=="undefined"){m=true}else{var p=ajaxart.lookup_cache[n].Version;if(k>p){m=true}}if(m){var a={};var l=ajaxart.run(h,d,"AllItems",c);for(var g=0;g<l.length;g++){var q=l[g];var b=aa_text([q],d,"ItemCode",c);var o=ajaxart.run([q],d,"ItemValue",c);if(b==""){continue}if(a[b]==null){a[b]=[]}for(var f=0;f<o.length;f++){a[b].push(o[f])}}ajaxart.lookup_cache[n]=a;ajaxart.lookup_cache[n].Version=k}var a=ajaxart.lookup_cache[n];var b=aa_text(h,d,"LookFor",c);var r=a[b];if(typeof(r)=="undefined"){return[]}return r},Pipeline:function(d,g,a){if(g.length>1){g=[g[0]]}var n=ajaxart.subprofiles(d,"Item");var l=g;for(var h=0;h<n.length;h++){var c=n[h];var k=[];if(l.length==0&&h!=0){return[]}if(g.length<=1&&h==0){k=ajaxart.run(l,c,"",a)}else{var m=ajaxart.compile(c,"",a);if(m=="same"){continue}if(m==null){for(var f=0;f<l.length;f++){ajaxart.concat(k,ajaxart.run([l[f]],c,"",a))}}else{for(var f=0;f<l.length;f++){ajaxart.concat(k,m([l[f]],a))}}}l=k}var b=ajaxart.subprofiles(d,"Aggregator");for(var h=0;h<b.length;h++){l=ajaxart.run(l,b[h],"",a)}return l},RunActionAndKeepInput:function(b,c,a){ajaxart.run(c,b,"Action",a);return c},Same:function(b,c,a){return c},CleanNS:function(b,c,a){if(c[0]&&typeof(c[0])=="object"&&!c[0].nodeType){return jbart_data(c[0],"single")}return jbart_data(ajaxart.totext_array(c),"single")}});aa_gcs("data_items",{Items:function(d,f,b){var a={isObject:true};a.ItemTypeName=ajaxart.run(f,d,"ItemTypeName",b);a.Items=ajaxart.run(f,d,"Items",b);var c=function(h){this.run=function(){h.Items=ajaxart.run(f,d,"Items",b);return["true"]}};ajaxart_addScriptParam_js(a,"Refresh",new c(a).run,b);var g=aa_ctx(b,{_Items:[a]});ajaxart.runsubprofiles(f,d,"Aspect",g);if(!a.Subset){a.Subset=function(h,k){var l={isObject:true,Items:k.vars._InnerItem};return[l]}}return[a]},AddXmlItem:function(c,d,a){var f=a.vars._Items[0];var b=aa_first(d,c,"Parent",a);f.SubsetForNewItem=function(g,h){var l=ajaxart.parsexml(aa_text(d,c,"NewItem",a),"","",false,b);if(!l){return}var k={isObject:true,Items:[l]};if(b&&l&&b.appendChild){b.appendChild(l)}k.Cancel=function(){b.removeChild(l)};return[k]}}});aa_gcs("operation",{ContainerOperations:function(b,c,a){return[{isObject:true,addOperations:function(){var m=a.vars._Menu[0];var k=a.vars._Cntr[0];var d=ajaxart.runScriptParam(c,k.Operations,k.Context);var l=aa_text(c,b,"Target",a);if(l==""){l="all"}for(var g=0;g<d.length;g++){var n=d[g];var h=a.vars._ElemsOfOperation&&a.vars._ElemsOfOperation[0];var f=h?jQuery(h).parents(".aa_container")[0].Cntr:null;if(!n.Target||n.Target[0]=="item"&&h&&(f==k||m.IncludeOperationsFromParent)){m.Items.push(n)}else{if(n.Target&&n.Target[0]=="new"&&(l=="new"||l=="all")){m.Items.push(n)}else{if(n.Target&&n.Target[0]=="items"&&l=="all"){m.Items.push(n)}}}}return[]}}]},Menu:function(c,f,b){var h={isObject:true,Items:[],IncludeOperationsFromParent:true};var d=b.vars._Cntr[0];h.Presentation=function(l,m){return aa_run_component("ui.ButtonAsHyperlink",l,m)};ajaxart_addMethod(h,"Style",c,"Style",b);var k=aa_ctx(b,{_Menu:[h],_ElemsOfOperation:d.ElemsOfOperation(),_ItemsOfOperation:d.ItemsOfOperation()});h.Items=ajaxart.run(f,c,"Operations",b);var g=ajaxart.runsubprofiles(f,c,"MenuAspect",k);for(var a=0;a<g.length;a++){if(g[a].addOperations){g[a].addOperations()}}h.Ctrl=ajaxart.runNativeHelper(f,c,"Control",k);return[h]},Operation:function(c,d,b){var f=function(k){return function(l,m){if(m.vars._Cntr){var n=m.vars._Cntr[0];if(k.Shortcut!=""&&n.ShortcutsEnabled!=null&&n.ShortcutsEnabled[0]=="true"){return[ajaxart_multilang_text(aa_text(l,c,"Title",m),m)+" ("+aa_text(l,c,"Shortcut",m)+")"]}return ajaxart_multilang_run(l,c,"Title",m)}else{return ajaxart_multilang_run(l,c,"Title",m)}}};var a=function(k){return function(p,v){if(aa_incapture){return}var u=v.vars._Cntr[0];var m=u.Items[0],q=[];if(v.vars._ElemsOfOperation&&v.vars._ElemsOfOperation.length>0){var t=jQuery(v.vars._ElemsOfOperation[0]).parents(".aa_treenode,.aa_list")[0];if(jQuery(t).hasClass("aa_treenode")){m=t._Items}var o=jQuery(v.vars._ElemsOfOperation[0]).find(">.aa_treenode");for(var r=0;r<o.length;r++){q.push(o[r]._Items)}}var n=aa_ctx(v,{_Items:[m],ChildDataItems:q});var s=p;if(k.Target&&k.Target[0]=="items"){var l=ajaxart_container_elems(u);s=[];for(var r=0;r<l.length;r++){ajaxart.concat(s,l[r].ItemData)}n=aa_ctx(v,{_ElemsOfOperation:l,_ItemsOfOperation:s})}return ajaxart.run(s,c,"Action",n)}};var h={isObject:true,isOperation:true};h.Id=aa_text(d,c,"ID",b);h.ID=[h.Id];h.Shortcut=aa_text(d,c,"Shortcut",b);h.Target=ajaxart.run(d,c,"Target",b);aa_setMethod(h,"Icon",c,"Icon",b);aa_setMethod(h,"CssClass",c,"CssClass",b);aa_setMethod(h,"CleanTitle",c,"Title",b);h.Disabled=function(k,l){return aa_bool(k,c,"Disabled",aa_merge_ctx(b,l))};ajaxart_addScriptParam_js(h,"Title",f(h),b);ajaxart_addScriptParam_js(h,"Action",a(h),b);var g=aa_ctx(b,{_Operation:[h]});ajaxart.runsubprofiles(d,c,"Aspect",g);h.Context=g;if(aa_bool(d,c,"WritableOnly",b)&&b.vars._Cntr&&b.vars._Cntr[0].ReadOnly){return[]}return[h]},OperationFromCntr:function(d,g,b){var f=b.vars._Cntr[0];var h=aa_text(g,d,"ID",b);var c=ajaxart.runScriptParam(g,f.Operations,f.Context);for(var a=0;a<c.length;a++){if(c[a].Id==h){return[c[a]]}}return[]},Operations:function(b,c,a){return ajaxart.runsubprofiles(c,b,"Operation",a)},SaveVisualOrder:function(c,g,b){var f=b.vars._Cntr[0];var k=f.Items[0];var d=f.FilteredWrappers;if(!d||!k.SetNewOrder){return}var h=[];for(var a=0;a<d.length;a++){h.push(d[a].__item)}k.SetNewOrder(h,b)},RemoveDisabled:function(b,c,a){return[{isObject:true,addOperations:function(){var k=a.vars._Menu[0];var h=a.vars._Cntr[0];var d=[];for(var f=0;f<k.Items.length;f++){op=k.Items[f];var g=op.Disabled(a.vars._ItemsOfOperation,a);if(!g){d.push(op)}}k.Items=d;return[]}}]}});aa_gcs("text",{});aa_gcs("xml",{AttributeName:function(b,c,a){if(ajaxart.isxml(c)&&c[0].nodeType==2){return[c[0].nodeName]}return[]},AddChildren:function(c,f,a){var d=ajaxart.getVariable(a,"InputForChanges");var b=ajaxart.run(d,c,"Children",a);var h=aa_bool(d,c,"CloneChildren",a);if(f.length==0){return[]}var k=[];for(var g=0;g<b.length;g++){var l=aa_importNode(b[g],f[0]);k.push(l);if(!h){ajaxart.xml.append(f[0],l)}else{ajaxart.xml.append(f[0],ajaxart.xml.clone([l]))}}if(b.length>0){ajaxart.xml.xml_changed(f[0])}ajaxart.run(k,c,"RunOnChildren",a);return f},Attributes:function(f,g,d){var a=aa_bool(g,f,"AlsoEmpty",d);if(ajaxart.isxml(g)&&g[0].nodeType==1){var b=[];var h=g[0].attributes;if(h!=null){for(var c=0;c<h.length;c++){if(a){b.push(h.item(c))}else{if(h.item(c).nodeValue!=""){b.push(h.item(c))}}}}return b}return[]},Duplicate:function(c,g,a){var h=ajaxart.run(g,c,"Element",a);var k=ajaxart.getVariable(a,"InputForChanges");var m=ajaxart.run(k,c,"Items",a);var l=ajaxart.run(g,c,"Separator",a);var s=aa_bool(g,c,"SeparatorAround",a);var d=ajaxart.run(g,c,"BindToSeparator",a);if(h.length==0||h[0].nodeType!=1){return[]}var p=h[0].parentNode;if(l[0]!=null&&s){var r=ajaxart.xml.clone(l);if(l[0].ajaxart!=null){r.ajaxart=l[0].ajaxart}p.appendChild(r)}var n=ajaxart.clone_context(a);for(var f=0;f<m.length;f++){var q=m[f];var b=ajaxart.xml.clone(h);ajaxart.setVariable(n,"InputForChanges",[q]);ajaxart.setVariable(n,"DuplicateIndex",[""+(f+1)]);var o=ajaxart.subprofiles(c,"ChangeOnElement");ajaxart.each(o,function(t){ajaxart.run([b],t,"",n)});if(f==0){var o=ajaxart.subprofiles(c,"ChangeOnFirstElement");ajaxart.each(o,function(t){ajaxart.run([b],t,"",n)})}p.appendChild(b);if(l[0]!=null){if(f+1<m.length||s){var r=ajaxart.xml.clone(l);if(l[0].ajaxart!=null){r.ajaxart=l[0].ajaxart}p.appendChild(r)}}}p.removeChild(h[0]);return["true"]},Parent:function(b,c,a){if(!ajaxart.isxml(c)){return[]}if(c[0].nodeType==1&&c[0].parentNode!=null){return[c[0].parentNode]}return[]},SetAttribute:function(c,k,b){var d=ajaxart.getVariable(b,"InputForChanges");var a=aa_text(d,c,"Value",aa_ctx(b,{_XmlNode:k}));var m=aa_text(d,c,"AttributeName",b);if(m==""){return}var f=aa_bool(k,c,"RemoveEmptyAttribute",b);var h=false;for(var g=0;g<k.length;g++){var l=k[g];if(!ajaxart.isxml(l)||l.nodeType!=1){return}if(a!=""&&l.getAttribute(m)==a){continue}if(a!=""){l.setAttribute(m,a)}else{if(aa_bool(k,c,"RemoveEmptyAttribute",b)){l.removeAttribute(m)}else{l.setAttribute(m,"")}}h=true}if(h){ajaxart.xml.xml_changed(k[0])}return[a]},Tag:function(f,g,d){var c=aa_bool(g,f,"RemoveNamespace",d);if(!ajaxart.isxml(g)){return[]}var b=g[0];if(b.nodeType==2){if(b.parentNode==null){return[]}b=ajaxart.xml.xpath(b,"..")[0]}var a=aa_tag(b);if(c){return[a.replace(/.*:/,"")]}else{return[a]}return[]},WithChanges:function(d,f,c){var a=ajaxart.run(f,d,"Xml",c);var g=ajaxart.clone_context(c);ajaxart.setVariable(g,"InputForChanges",f);var b=[];ajaxart.each(a,function(l){var h=l;if(!ajaxart.ishtml(l)&&aa_bool(f,d,"CloneXml",c)){h=ajaxart.xml.clone([l])}var k=ajaxart.subprofiles(d,"Change");ajaxart.each(k,function(m){ajaxart.run([h],m,"",g)});b.push(h)});return b},Wrap:function(f,g,d){if((!ajaxart.isxml(g))||g[0].nodeType==9){return[]}var c=aa_text(g,f,"HeadTag",d);var b=aa_first(g,f,"Head",d);if(b==null){if(c==""){return[]}b=aa_createElement(g[0],c)}if(!ajaxart.ishtml(g)){for(var a=0;a<g.length;a++){ajaxart.xml.append(b,g[a].cloneNode(true))}}else{for(var a in g){ajaxart.xml.append(b,g[a])}}return[b]},Xml:function(c,g,a){var d=c.getAttribute("DynamicContent")=="true";var k=c.getAttribute("EncodeDynamicContent")!="false";var b=ajaxart.childElem(c,"*");if(b==null){return[aa_createElement(g[0],"xml")]}if(!d){return[ajaxart.xml.clone([b])]}else{var l=ajaxart.xml2text(b);var h=ajaxart.dynamicText(g,l,a,g,false,k)[0];var f=ajaxart.parsexml(h);if(f!=null){return[f]}return[]}},XmlItems:function(d,f,c){var g={isObject:true};g.ParentXml=aa_first(f,d,"Parent",c);var a=aa_text(f,d,"Tag",c);g.Tag=a;if(a.indexOf(",")>-1){var b=a.split(",");g.Tag=b[0];g.AllTags=b}g.ItemTypeName=aa_text(f,d,"ItemTypeName",c);if(g.ItemTypeName==""){g.ItemTypeName=aa_text_capitalizeToSeperateWords(ajaxart_multilang_text(a,c))}var h=function(k){k.InitXmlItem=function(l){var m=aa_getXmlInfo(l,c);m.DataItems=k;m.PrepareForEdit=function(){this.OriginalCopy=this.Xml.cloneNode(true)};m.Cancel=function(o,n){if(aa_tobool(n.vars.IsNewItem)){this.Delete(o,n)}else{if(this.OriginalCopy){ajaxart.xml.copyElementContents(this.Xml,this.OriginalCopy)}}};m.Delete=function(){l.parentNode.removeChild(l);aa_removeXmlInfo(l);ajaxart.xml.xml_changed(this.DataItems.ParentXml);for(var n=0;n<k.Items.length;n++){if(k.Items[n]==l){k.Items.splice(n,1);break}}ajaxart.xml.xml_changed(k.ParentXml)}};k.Refresh=function(l,m){if(!k.AllTags){k.Items=(k.Tag!="")?aa_xpath(k.ParentXml,k.Tag):[]}else{k.Items=[];for(var o in k.AllTags){ajaxart.concat(k.Items,aa_xpath(k.ParentXml,k.AllTags[o]))}}if(aa_paramExists(d,"ElementCondition")){var n=[];for(var o=0;o<k.Items.length;o++){if(aa_bool([k.Items[o]],d,"ElementCondition",c)){n.push(k.Items[o])}}k.Items=n}for(var o=0;o<k.Items.length;o++){k.InitXmlItem(k.Items[o])}};k.DeleteItem=function(l,m){var n=aa_getXmlInfo(l[0],c);if(n.Delete){return n.Delete(l,m)}};k.SubsetForNewItem=function(m,n){var l=k.Tag;if(k.AllTags&&aa_totext(n.vars._NewItemTag)!=""){l=aa_totext(n.vars._NewItemTag);if(k.AllTags.join(",").indexOf(l)==-1){l=k.Tag}}var o=aa_createElement(k.ParentXml,l);ajaxart.run([o],d,"DoOnNewItem",c);var q=aa_getXmlInfo(o,c);q.DataItems=k;q.Save=function(t,r){var s=this.DataItems;if(!s.ParentXml){return[]}s.ParentXml.appendChild(this.Xml);ajaxart.xml.xml_changed(s.ParentXml);s.Items.push(o);s.InitXmlItem(o)};var p={isObject:true,Items:[o]};p.Save=function(t,r){var s=aa_getXmlInfo(this.Items[0],c);s.Save([s.Xml],n)};if(aa_tobool(n.vars._DataItemsImmediateAdd)){p.Save([],n);p.Save=function(s,r){if(p.Items.length==0){return[]}var t=aa_getXmlInfo(p.Items[0],r);t.Save(s,r)}}return[p]};k.Subset=function(l,m){var n=m.vars._InnerItem[0];var p={isObject:true,ItemTypeName:k.ItemTypeName,Items:[n]};var o=aa_getXmlInfo(n,c);p.DeleteItem=o.Delete;p.Cancel=o.Cancel;p.Save=function(){};if(o.PrepareForEdit){o.PrepareForEdit()}return[p]};k.CanPasteFromDataItems=function(l,m){if(aa_paramExists(d,"CanPasteItem")){return aa_frombool(aa_bool([l],d,"CanPasteItem",aa_ctx(c,{_Items:[this]})))}if(l[0].Tag&&k.Tag&&l[0].Tag==k.Tag){return["true"]}return[]};k.MoveBefore=function(l,m){if(l.length==0){return[]}var n=l[0].Item[0];var o=l[0].BeforeItem[0];if(ajaxart.isxml(o)&&ajaxart.isxml(n)){if(o.ownerDocument==n.ownerDocument&&n.ownerDocument!=null){o.parentNode.insertBefore(n,o)}}ajaxart.xml.xml_changed(k.ParentXml);k.Items=aa_xpath(k.ParentXml,k.Tag);return["true"]};k.MoveToEnd=function(l,m){if(l.length==0){return[]}var n=l[0];if(k.ParentXml==null){return[]}k.ParentXml.appendChild(n);k.Items=aa_xpath(k.ParentXml,k.Tag);ajaxart.xml.xml_changed(k.ParentXml);return["true"]};k.SetNewOrder=function(m,l){if(m.length==0){return[]}if(!k.ParentXml){return[]}if(jQuery(k.ParentXml).find(">*").length!=m.length){return[]}jQuery(k.ParentXml).empty().append(m);k.Items=aa_xpath(k.ParentXml,k.Tag);ajaxart.xml.xml_changed(k.ParentXml);return["true"]}};h(g);g.Refresh(f,c);ajaxart.runsubprofiles(f,d,"Aspect",aa_ctx(c,{_Items:[g]}));return[g]}});aa_gcs("xtml",{UseAndTranslateParam:function(c,d,b){var g=aa_text(d,c,"Param",b);var a=ajaxart.run(d,c,"Input",b);var f=b.params[g];if(ajaxart.isArray(f)){return f}if(f==null||f.script==null){return[]}if(f.compiled=="same"){return a}var h={};h.vars=b.vars;h.params=b.componentContext.params;h.componentContext=b.componentContext.componentContext;if(f.script.nodeType==2){return ajaxart_multilang_run(a,f.script,"",h)}if(f.compiled==null){return ajaxart.run(a,f.script,"",h)}else{return f.compiled(a,h)}},ComponentDefinition:function(b,c,a){return ajaxart.make_array(c,function(k){var n=aa_text(k,b,"ID",a);if(n==""){return null}var m=aa_bool(k,b,"ToXtml",a);try{var d=n.indexOf(".");var g=n.substring(0,d);var f=n.substr(d+1);if(ajaxart.components[g]==null){return[]}var h=ajaxart.components[g][f]}catch(l){ajaxart.log("ComponentDefinition: cannot find component "+n);return[]}if(m){return ajaxart.childElem(h,"xtml")}else{return h}},true)},ComponentsOfType:function(c,h,b){if(!window.ajaxart_comp_of_type_cache){ajaxart_comp_of_type_cache={};ajaxart_comp_of_type_advanced_cache={};for(var l in ajaxart.components){var p=false;if(l.lastIndexOf("_dt")==l.length-3&&l.length>3||l=="aaeditor"){p=true}for(var g in ajaxart.components[l]){var m=ajaxart.components[l][g];if(m.getAttribute("hidden")=="true"){continue}var n=(m.getAttribute("type")||"").split(",");for(var d=0;d<n.length;d++){if(n[d].split(".").length>2){n.push(n[d].substring(0,n[d].lastIndexOf(".")))}}var a=m.getAttribute("category");if(a){n.push(n[0]+"."+a)}for(var q in n){var o=n[q];if(!p){if(ajaxart_comp_of_type_cache[o]==null){ajaxart_comp_of_type_cache[o]=[]}ajaxart_comp_of_type_cache[o].push(""+l+"."+g)}else{if(ajaxart_comp_of_type_advanced_cache[o]==null){ajaxart_comp_of_type_advanced_cache[o]=[]}ajaxart_comp_of_type_advanced_cache[o].push(""+l+"."+g)}}}}}var o=aa_text(h,c,"Type",b);var f=ajaxart_comp_of_type_cache[o];if(aa_bool(h,c,"ForAllTypes",b)){ajaxart.concat(f,ajaxart_comp_of_type_advanced_cache[o]);ajaxart.concat(f,ajaxart_comp_of_type_cache["*"])}if(f==null){f=[]}return f},Params:function(d,h,b){var g={isObject:true};var c=d.firstChild;while(c!=null){if(c.nodeType==1){var m=c.tagName;var a=c.getAttribute("name");if(a==null||a==""){c=c.nextSibling;continue}if(m=="Param"){g[a]=ajaxart.run(h,c,"",b)}else{if(m=="ScriptParam"){g[a]={script:c,context:b,compiled:ajaxart.compile(c,"",b,c.getAttribute("paramVars"))}}else{if(m=="Method"){g[a]={script:c,context:b,objectForMethod:[g],compiled:ajaxart.compile(c,"",b,c.getAttribute("paramVars"))}}else{if(m=="ScriptParamArray"){var k=ajaxart.run(h,c,"",b);var l=[];for(var f=0;f<k.length;f++){l.push({script:k[f],context:b.componentContext})}g[a]=l}}}}}c=c.nextSibling}return[g]},RunXtml:function(d,g,b){var f=ajaxart.run(g,d,"Xtml",b);if(f.length==0){return[]}var a="";if(aa_hasAttribute(d,"Method")||ajaxart.childElem(d,"Method")!=null){a=aa_text(g,d,"Method",b)}var h="";if(aa_hasAttribute(d,"Field")){h=aa_text(g,d,"Field",b)}var k=g;if(aa_hasAttribute(d,"Input")||ajaxart.childElem(d,"Input")!=null){k=ajaxart.run(g,d,"Input",b)}if(typeof(f[0].script)!="undefined"||f[0].compiled!=null){if(typeof(f[0].input)!="undefined"){if(!aa_bool(g,d,"ForceInputParam",b)){k=f[0].input}}if(f[0].compiled=="same"){return k}var c=ajaxart.newContext();if(f[0].context!=null){c.params=f[0].context.params;c.componentContext=f[0].context.componentContext}c.vars=b.vars;if(typeof(f[0].objectForMethod)!="undefined"){c._This=f[0].objectForMethod[0]}if(f[0].compiled==null){if(f[0].script==null){return null}return ajaxart.run(k,f[0].script,h,c,a)}else{return f[0].compiled(k,c)}}if(!ajaxart.isxml(f[0])){var l=ajaxart.dynamicText(k,aa_totext(f),b,null,false);return[l]}var c={};c.vars=b.vars;c.componentContext=b.componentContext;c.params=[];return ajaxart.run(k,f[0],h,c,a)},UseParam:function(c,d,b){var g=aa_text(d,c,"Param",b);var a=ajaxart.run(d,c,"Input",b);var f=b.params[g];if(ajaxart.isArray(f)){return f}if(typeof(f)=="function"){return f(a,b)}if(f==null||f.script==null){return[]}if(f.compiled=="same"){return a}var h={params:[]};h.vars=b.vars;if(b.componentContext){h.params=b.componentContext.params;h.componentContext=b.componentContext.componentContext}if(f.compiled==null){return ajaxart.run(a,f.script,"",h)}else{return f.compiled(a,h)}},UseParamArray:function(b,c,a){var f=aa_text(c,b,"Param",a);var d=a.params[f];if(!d){ajaxart.log("UseParamArray: Can not find param "+f);return[]}if(ajaxart.isArray(d)){return d}var g={};g.vars=a.vars;g.params=a.componentContext.params;g.componentContext=a.componentContext.componentContext;return ajaxart.runsubprofiles(c,d.script,d.field,g)},UseParamArrayAsync:function(f,h,a){var d=aa_text(h,f,"Param",a);var l=a.params[d];if(ajaxart.isArray(l)){return l}var k=ajaxart.subprofiles(l.script,l.field);if(k.length==0){return}var b={};b.vars=a.vars;b.params=a.componentContext.params;b.componentContext=a.componentContext.componentContext;var g=ajaxart_async_GetCallbackObj(b);g.marked=true;g.index=0;g.actionProfs=k;var c=function(m,p){var o=ajaxart_async_GetCallbackObj(b);if(o.index>=o.actionProfs.length){ajaxart_async_CallBack(h,b);return}var n=o.actionProfs[o.index];o.index++;ajaxart_RunAsync(h,n,b,o.seqCallBack)};g.seqCallBack=c;c(h,b)}});aa_gcs("yesno",{IsEmpty:function(c,d,b){var f=ajaxart.run(d,c,"Value",b);var a=aa_bool(d,c,"CheckInnerText",b);return ajaxart.yesno.is_empty(f,a)},PassesFilter:function(b,c,a){return ajaxart.make_array(c,function(d){if(!aa_bool(d,b,"Filter",a)){return null}return d})},ItemsEqual:function(d,g,c){var b=ajaxart.run(g,d,"Item1",c);var a=ajaxart.run(g,d,"Item2",c);if(b.length==0&&a.length==0){return["true"]}if(b.length==0||a.length==0){var f=(b.length>0)?b:a;if(ajaxart.yesno.itemsEqual(f[0],"")){return["true"]}else{return[]}}if(ajaxart.yesno.itemsEqual(b[0],a[0])){return["true"]}return[]},Not:function(c,d,b){var a=aa_bool(d,c,"Of",b);if(a==false){return["true"]}else{return[]}},OR:function(c,f,b){var d=ajaxart.subprofiles(c,"Item");for(var a=0;a<d.length;a++){if(aa_bool(f,d[a],"",b)){return["true"]}}return[]},And:function(c,f,b){var d=ajaxart.subprofiles(c,"Item");for(var a=0;a<d.length;a++){if(!aa_bool(f,d[a],"",b)){return[]}}return["true"]},Empty:function(b,c,a){return ajaxart.yesno.is_empty(c,aa_bool(c,b,"CheckInnerText",a))},NotEmpty:function(d,g,c){var f=ajaxart.run(g,d,"Value",c);var b=aa_bool(g,d,"CheckInnerText",c);var a=ajaxart.yesno.is_empty(f,b);if(a==true||a[0]=="true"){return[]}return["true"]}});aa_gcs("data_items",{InnerDataItems:function(b,c,a){var d=a.vars._Items[0];d.Parent=aa_first(c,b,"ParentDataItems",a);if(d.Parent==d){d.Parent=null;return[]}var f=function(g){g.SaveParent=function(h,k){if(g.Parent.SaveParent){return g.Parent.SaveParent(h,k)}else{if(g.Parent.Save){return g.Parent.Save(h,k)}}}};f(d)}});aa_gcs("field",{ClearAllFilters:function(b,d,a){var c=a.vars._Cntr[0];var g=jQuery(c.Ctrl).find(".aa_filters").slice(0,1).find(".cleanable_filter").find(".clean_filter");g.each(function(){if(this.Action){this.Action()}});var f=c.Ctrl.PopupObj&&c.Ctrl.PopupObj.onElem;if(f){f.setAttribute("value","");f.value="";if(c.DoFind){c.DoFind("")}}return["true"]},XmlMultipleGroup:function(d,f,a){var l={isObject:true,Title:aa_multilang_text(f,d,"Title",a),IsGroup:true,IsMultipleGroup:true};var m=aa_text(f,d,"Path",a);var g=m.indexOf("/")!=-1;l.Id=aa_text(f,d,"ID",a);if(l.Id==""){l.Id=m.split("/").reverse().pop()}l.ID=[l.Id];l.Fields=ajaxart.runsubprofiles(f,d,"Field",a);l.FieldData=function(n){return n};var h=aa_first(f,d,"Items",a);if(h&&h.ContainerData){l.FieldData=h.ContainerData}else{if(m.indexOf("/")!=-1){var k=m.lastIndexOf("/");var c=(k==-1)?m:m.substring(0,k);aa_set_fielddata_method(l,c)}}l.InnerItems=function(n,o){var o=aa_merge_ctx(a,o);var p=ajaxart.runNativeHelper(n,d,"Items",o);p[0].MultipleItemsField=this;return p};l.Operations=function(n,o){return ajaxart.run(f,d,"Operations",a)};l.Control=function(o,p){var n=aa_ctx(aa_merge_ctx(a,p),{_Field:[this]});return ajaxart.runNativeHelper(o,d,"Control",n)};l.Aspects=function(n,o){return ajaxart.runsubprofiles([],d,"Aspect",a)};var b=aa_ctx(a,{_Field:[l]});ajaxart.runsubprofiles(f,d,"FieldAspect",b);return[l]}});aa_gcs("operation",{RunOperationAction:function(b,d,a){if(!a.vars.ControlElement||!aa_bool(d,b,"GuessDataFromControl",a)){return ajaxart.run(d,b,"Action",a)}var c=a.vars.ControlElement[0];var f=jQuery(c).parents(".aa_item").get();if(f.length>0){f=[f[0]];return ajaxart.run(f[0].ItemData||[],b,"Action",aa_ctx(a,{_ElemsOfOperation:f,_ItemsOfOperation:f[0].ItemData}))}return ajaxart.run(d,b,"Action",a)}});aa_gcs("ui_async",{Control:function(c,d,b){var a=document.createElement("div");var h=aa_first(d,c,"ControlForLoading",b);if(h!=null){a.appendChild(h);jQuery(a).addClass("aa_loading")}var f=function(k){return function(l,n){var m=function(q,o){var p=aa_first(l,c,"Control",b);aa_empty(k);jQuery(k).removeClass("aa_loading");if(p!=null){k.appendChild(p);aa_element_attached(p);aa_fixTopDialogPosition()}aa_fire_async_finished()};ajaxart_RunAsync(l,ajaxart.fieldscript(c,"AsyncAction"),b,m)}};var g=ajaxart.fieldscript(c,"AsyncData");if(g){aa_RunAsyncQuery(d,g,b,f(a))}else{f(a)(d,b)}return[a]}});aa_gcs("action_async",{RunActions:function(b,c,a){return ajaxart.gcs.action_async.SequentialRun(b,c,a)},SequentialRun:function(b,f,a){var d=ajaxart_async_GetCallbackObj(a);d.marked=true;d.index=0;d.actionProfs=ajaxart.subprofiles(b,"Action");var c=function(g,l){var k=ajaxart_async_GetCallbackObj(a);if(k.index>=k.actionProfs.length){ajaxart_async_CallBack(f,a);return}var h=k.actionProfs[k.index];k.index++;ajaxart_RunAsync(f,h,a,k.seqCallBack)};d.seqCallBack=c;c(f,a);return["true"]}});aa_gcs("ui",{IfThenElse:function(a,b,c){return aa_ifThenElse(a,b,c)},NotInCaptureMode:function(b,c,a){if(window.aa_incapture){return[]}return["true"]},ButtonAsHyperlink:function(b,l,a){var f=a.vars.ButtonContext[0];var h=null;var d=aa_totext(f.Image);var o=aa_totext(f.Text);var p=aa_totext(f.Tooltip);var g=aa_text(l,b,"TextInlineCss",a);var m=aa_text(l,b,"ImageInlineCss",a);if(d==""){h=jQuery('<a class="button_hyperlink" style="'+g+'" title="'+p+'" href="#"/>')[0];h.innerHTML=o}else{h=jQuery('<span class="button_hyperlink_image"/>')[0];var k=jQuery('<img src="'+d+'" style="'+m+'" />')[0];var c=jQuery('<a href="#" style="'+g+'" onclick="return false;" class="button_hyperlink" title="'+p+'"/>')[0];c.innerHTML=o;h.appendChild(k);h.appendChild(c)}var n=function(q){q.onclick=function(r){if(window.aa_incapture){return}r=r||event;if(aa_incapture){return false}ajaxart_runMethod(l,a.vars.ButtonContext[0],"OnClick",aa_ctx(a,{ControlElement:[q]}));ajaxart_stop_event_propogation(r);return false};jQuery(q).hover(function(){ajaxart_runMethod(l,a.vars.ButtonContext[0],"OnHover",a)},function(){})};n(h);return[h]}});aa_gcs("uiaction",{DoFind:function(c,f,b){var a=ajaxart.run(f,c,"FilterElements",b);var d=b.vars._Cntr[0];if(d==null){return[]}d.DoFind(ajaxart.totext_array(f),a);return["true"]}});aa_gcs("image",{Image:function(c,d,b){var f={};f.SecondUrl=aa_text(d,c,"SecondUrl",b);f.Size=aa_text(d,c,"Size",b);f.KeepImageProportions=aa_bool(d,c,"KeepImageProportions",b);aa_setMethod(f,"Url",c,"Url",b);f.asDivBackground=aa_bool(d,c,"AsDivBackground",b);if(f.asDivBackground){f.x=f.y=0;var a=f.Size.split(",");f.width=a[0]+"px";f.height=a[1]+"px"}return[f]},ImageInCss:function(b,c,a){return[{InCssClass:true,CssClass:aa_text(c,b,"CssClass",a)}]},ImageInSprite:function(d,g,c){var h={inSprite:true};var b=aa_text(g,d,"Size",c).split(",");h.width=b[0]+"px";h.height=b[1]+"px";var k=aa_text(g,d,"PositionInSprite",c).split(",");h.x="-"+k[0]+"px";h.y="-"+k[1]+"px";var a=aa_text(g,d,"PositionForHover",c).split(",");if(a.length>1){h.hoverx=0-parseInt(a[0])+"px";h.hovery=0-parseInt(a[1])+"px"}var f=aa_text(g,d,"PositionForClick",c).split(",");if(f.length>1){h.activex="-"+f[0]+"px";h.activey="-"+f[1]+"px"}aa_setMethod(h,"Url",d,"Url",c);return[h]},ShowImage:function(c,d,b){var f=aa_first(d,c,"Image",b);if(f&&f.Url){f.StaticUrl=aa_totext(f.Url(d,b))}var a=jQuery("<span/>")[0];aa_set_image(a,f,true);return[a]}});aa_gcs("date",{DateEntry:function(b,c,a){var d=a.vars._Field[0];d.ManualWriteValue=true;aa_field_handler(d,"ModifyControl",function(f,l,k,g){if(ajaxart_field_is_readOnly(g.vars._Cntr[0],f.Field,g)){return}var h=jQuery(f).find(".field_control");if(h.length>0){h[0].Refresh=function(n,m){h[0].value=ajaxart.totext_array(l).split(" ")[0];h[0].setAttribute("value",h[0].value)};h[0].SetDate=function(n,m){var p=ajaxart.totext_array(l).split(" ");var o=p[1]?" "+p[1]:"";ajaxart.writevalue(l,ajaxart.totext_array(n)+o);this.Refresh(n,m);aa_invoke_field_handlers(d.OnUpdate,h,null,d,l)};h[0].Refresh([],g);h.dateEntry({dateFormat:"dmy/",spinnerImage:""})}});aa_field_handler(d,"OnKeyup",function(l,m,f,k){var h=ajaxart.totext_array(m).split(" ");var g=h[1]?" "+h[1]:"";ajaxart.writevalue(m,""+f.value+g);aa_invoke_field_handlers(l.OnUpdate,f,k,l,m)},"DateEntry");return[]}});aa_gcs("jbartdb",{CreateNewNodeInJBartDB:function(c,d,b){var a=ajaxart.parsexml(aa_first(d,c,"NodeXml",b));if(aa_bool(d,c,"AddTimestampToID",b)){var f=a.getAttribute("id")||"";f+="_"+aadate_dateObj2StdDate(new Date()).replace(/[:/ ]/g,"_");a.setAttribute("id",f)}if(ajaxart.inPreviewMode){return}jBart.db.save({data:a,success:function(){ajaxart.run([a],c,"OnSuccess",b)},error:function(){ajaxart.run(d,c,"OnError",b)}})},SaveNodeAsync:function(c,d,b){ajaxart_async_Mark(b);var a=ajaxart.parsexml(aa_first(d,c,"Node",b));if(ajaxart.inPreviewMode){return}jBart.db.save({data:a,success:function(){ajaxart_async_CallBack([],b)},error:function(){b.vars._AsyncCallback.success=false;ajaxart_async_CallBack([],b)}})},JBartDBNode:function(b,c,a){ajaxart_async_Mark(a,true);ajaxart.run(c,b,"OnLoading",a);jBart.db.get({id:aa_text(c,b,"ID",a),contentType:aa_text(c,b,"ContentType",a),success:function(d){ajaxart.run([d],b,"OnLoad",a);ajaxart_async_CallBack([d],a)},error:function(d){a.vars._AsyncCallback.success=false;ajaxart.run(c,b,"OnError",a);ajaxart_async_CallBack([],a)}})},JBartDBQuery:function(b,c,a){ajaxart_async_Mark(a,true);ajaxart.run(c,b,"OnLoading",a);jBart.db.query({contentType:aa_text(c,b,"ContentType",a),headersOnly:aa_bool(c,b,"HeadersOnly",a),success:function(d){ajaxart.run([d],b,"OnSuccess",a);ajaxart_async_CallBack([d],a)},error:function(d){a.vars._AsyncCallback.success=false;ajaxart.run(c,b,"OnError",a);ajaxart_async_CallBack([],a)}})},});aa_gcs("jbart_api",{DataResourceInWidgetActivation:function(b,c,a){var d=aa_text(c,b,"ResourceID",a);var f="jBartWidget_"+aa_text(c,b,"WidgetId",a)+"_"+d;if(window[f]){return[{Id:d,ID:[d],Items:window[f]}]}},ShowWidgetPage:function(c,g,a){var k=aa_text(g,c,"PageID",a);var f=a.vars._BartContext[0];var m=f.AppXtml[0];var n=null;if(k){n=l(k);n=n||d(k)}n=n||aa_xpath(m,"MainPage1")[0];if(!n&&m.getAttribute("MainPage")){n=d(m.getAttribute("MainPage"))}n=n||l("main")||d("main");var b=aa_first([],n,"",a);if(b&&b.Id){out=jQuery("<div/>")[0];aa_fieldControl({Field:b,Wrapper:out,Item:[],Context:a});return[out]}else{var h=b;return h.Control([],aa_ctx(a,{_PageParams:[]}))}function l(o){return aa_xpath(m,"../../Component[@id='"+o+"']/xtml")[0]}function d(o){return aa_xpath(m,"Pages/Page[@ID='"+o+"']")[0]}}});jBart.showPage=function(c,a){var b=ajaxart.parsexml('<xtml t="bart_api.ShowPage" Page="'+c+'" />');return ajaxart.run([],b,"",a)[0]};jBart.exec=function(d,c,a){var b=ajaxart.parsexml('<xtml t="sample.'+d+'" />');ajaxart.run([],b,[c],a)};jBart.get=function(f,d,a,b){d=d||"";if(!b){b="text"}a=a||ajaxart.newContext();var c=ajaxart.dynamicText([d],f,a,null,false);if(b=="text"){return aa_totext(c)}if(b=="array"){return c}if(b=="xml"||b=="native"){return c[0]}return c[0]};jBart.set=function(a,d,c,b){b=b||ajaxart.newContext();var f=ajaxart.dynamicText([c],a,b,null,false);ajaxart.writevalue(f,[d])};jBart.refresh=function(c,a,b){if(!b){b="screen"}aa_refresh_field([c],b,false,null,a)};jBart.api.asyncMark=function(a){ajaxart_async_Mark(a)};jBart.api.asyncCallback=function(b,a){ajaxart_async_CallBack(b,a)};jBart.api.setResourceValue=function(f,a,d){if(!d.vars._GlobalVars){return}var k=d.vars._BartContext[0];var g=d.vars._GlobalVars[0];g[f]=function(){return[a]};var b=[];for(var c=0;c<k.Resources.length;c++){var h=k.Resources[c];if(aa_totext(h.ID)==f){b.push({isObject:true,Items:[a]})}else{b.push(h)}}k.Resources=b};aa_gcs("uiaspect",{ItemClass:function(d,f,b){var a={isObject:true};var c=function(g,k){var l=k.vars._Elems;for(var m=0;m<l.length;m++){var n=l[m];var h=aa_text(n.ItemData,d,"Class",b).replace(/\s/,"_");if(h!=""){n.className+=" "+h}}};ajaxart_addScriptParam_js(a,"InitializeElements",c,b);return[a]},PopupOnHover:function(c,d,b){var a={isObject:true};a.InitializeElements=function(f,g){var m=g.vars._Cntr[0];var h=g.vars._Elems;for(var k=0;k<h.length;k++){var l=h[k];l.onmouseover=function(){var p=g.vars._Cntr[0];var o=this;var n=aa_merge_ctx(b,g,{ControlElement:[o]});if(!aa_bool(o.ItemData,c,"NoPopupIf",n)){ajaxart.runNativeHelper(o.ItemData,c,"OpenPopup",n)}else{ajaxart_dialog_close_all_popups()}}}};return[a]},FastFindInHtmlTree:function(c,f,b){var a={isObject:true};var k=function(m){m.FFSearchVal="";jQuery.each(jQuery(m).find(">.aa_text,>span>.aa_text"),function(n,o){m.FFSearchVal+=o.innerHTML.toLowerCase()})};var g=function(m,n){var q=n.vars._Cntr[0];var r=q.Tree?".aa_item":">.aa_item";var o=jQuery(ajaxart_find_aa_list(q)).find(r);for(var p=0;p<o.length;p++){k(o[p])}};var d=function(m,n){var o=n.vars._Cntr[0];o.RegisterForPostAction(n._This);var p=ajaxart_writabledata();o.FilterControl=ajaxart.runNativeHelper(p,c,"Control",n);o.SelectByPattern=function(t){var s=this;var u=s.Tree?".aa_item":">.aa_item";var r=jQuery(ajaxart_find_aa_list(s)).find(u);var q=r.find(">.aa_text").filter(function(){return this.innerHTML.toLowerCase()==t}).slice(0,1);if(t!=""&&q.length>0){ajaxart_uiaspects_select(q.parents(".aa_item").slice(0,1),jQuery(),"keyboard",n)}};o.DoFind=function(x){x=x.toLowerCase();var B=this;if(B.SaveAndCloseInplace){B.SaveAndCloseInplace([],n)}if(B.PartialView&&B.PartialView.RemoveSummary){B.PartialView.RemoveSummary(B)}var D=B.Tree?".aa_item":">.aa_item";if(!B.elems){B.elems=jQuery(ajaxart_find_aa_list(B)).find(D)}var q=B.elems;var C=0;var t=100;var A=true;for(var u=0;u<q.length;u++){var r=q[u];if(r.FFSearchVal==null){k(r)}r.hidden=false;var z=r.ItemData[0];var y=!z.UnSelectable;var v=y&&(r.FFSearchVal.indexOf(x)!=-1||x=="");if(!v){r.hidden=true}if(v){if(t>0){t--;jQuery.each(jQuery(r).find(">.aa_text,>span>.aa_text"),function(E,F){if(F.OrigText==null){F.OrigText=F.innerHTML}if(F.OrigText.toLowerCase().indexOf(x)!=-1){F.innerHTML=ajaxart_field_highlight_text(F.OrigText,x)}else{F.innerHTML=F.OrigText}})}if(A){ajaxart_uiaspects_select(jQuery(r),jQuery(),"keyboard",n);A=false}if(B.Tree){jQuery(r).parents(".aa_item").each(function(){this.hidden=false})}C++}}if(q.length<aa_int(f,c,"FilterTreshold",b)&&aa_bool(f,c,"DoNotFilterSmallLists",b)){var w=q.length}else{var w=0}var s=w-C;for(var u=0;u<q.length;u++){var r=q[u];if(s>0&&r.hidden){r.hidden=false;s--}if(r.hidden){r.style.display="none";r.display="none"}else{r.style.display="";r.display=""}}aa_invoke_cntr_handlers(B,B.ContainerChange,[],n)}};ajaxart_addScriptParam_js(a,"InitializeContainer",d,b);ajaxart_addScriptParam_js(a,"PostAction",g,b);var h=b.vars._Cntr[0];var l=[a];if(!aa_bool(f,c,"HideExposedFilters",b)){l=l.concat(ajaxart.gcs.uiaspect.ExposedFiltersSection(c,f,b))}else{h.HideFastFind=true}return l},FastFind:function(f,h,d){var c={isObject:true};var b=function(k,l){var m=l.vars._Cntr[0];var n=ajaxart_writabledata();m.FilterControl=ajaxart.runNativeHelper(n,f,"Control",l);m.MaxItemsInSearch=aa_int(h,f,"MaxItemsToShow",d);m.DoFind=function(H,x){H=H.toLowerCase();var F=H.split(" ");var q=(F.length>0&&" "+F[0].toLowerCase());var p=(F.length>1&&F[1]&&" "+F[1].toLowerCase());var o=(F.length>2&&F[2]&&" "+F[2].toLowerCase());var B=F.length==1&&F[0].toLowerCase();if(x&&x.length==0){x=null}m=this;if(aa_bool(h,f,"DoNotLookInAllFields",d)){var v=function(K,s){return[aa_text(K,f,"LookIn",d)]}}else{var v=aa_concat_atts}m.DataHolder=m.DataHolder||aa_createDataHolderFromCntr(m,d);if(!m.FFInitialized){for(var G in m.DataHolder.Wrappers){var u=m.DataHolder.Wrappers[G];u.__Search=" "+ajaxart.totext_array(v([u.__item||u],l)).toLowerCase().replace(/^\s*|\s*$/g," ")}m.FFInitialized=true}var r=0,I=0;var D=[];var A=ajaxart_find_aa_list(m);aa_clear_cntr_items(A,m);m.FilteredWrappers=[];var J=true;function y(K){I++;r++;var s=m.createNewElement([K.__item||K],D,l);if(s){A.appendChild(s);if(J){ajaxart_uiaspects_select(jQuery(s),jQuery(),"keyboard",l);J=false}}m.FilteredWrappers.push(K)}var t=[];var E=100;for(var G in m.DataHolder.Wrappers){var u=m.DataHolder.Wrappers[G];var z=u.__Search;var w=(q&&z.indexOf(q)!=-1)||(p&&z.indexOf(p)!=-1)||(o&&z.indexOf(o)!=-1)||H==""||(B&&z.indexOf(B)!=-1);if(!w){continue}u.__rank=0;if(z.indexOf(q)>1){u.__rank++}if(z.indexOf(q)==-1){u.__rank+=2}if(p&&z.indexOf(p)<z.indexOf(q)){u.__rank++}if(p&&z.indexOf(H)==-1){u.__rank++}if(p&&z.indexOf(q)==-1){u.__rank+=4}if(p&&z.indexOf(p)==-1){u.__rank+=4}if(o&&z.indexOf(o)==-1){u.__rank+=4}if(x||t.length<20){t.push(u);if(u.__rank<E){E=u.__rank}}else{if(u.__rank<t[19].__rank){t[19]=u}t.sort(function(K,s){return K.__rank>s.__rank});E=t[19].__rank}}t.sort(function(K,s){if(K.__rank!=s.__rank){return K.__rank-s.__rank}else{return K.__OriginalIndex-s.__OriginalIndex}});for(var G in t){if(x||r<m.MaxItemsInSearch||m.MaxItemsInSearch==0){y(t[G])}}var C=aa_ctx(m.Context,{_Elems:D});for(var G=0;G<m.Aspects.length;G++){ajaxart.trycatch(function(){ajaxart_runMethod(h,m.Aspects[G],"InitializeElements",C)},function(s){ajaxart.logException(s)})}for(var G=0;G<m.PostActors.length;G++){ajaxart.trycatch(function(){ajaxart.runScriptParam(h,m.PostActors[G].aspect.PostAction,C)},function(s){ajaxart.logException(s)})}if(q){q=q.substring(1)}if(p){p=p.substring(1)}if(o){o=o.substring(1)}jQuery.each(jQuery(A).find(".aa_text"),function(){if(q&&this.innerHTML.toLowerCase().indexOf(q)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,q)}if(p&&this.innerHTML.toLowerCase().indexOf(p)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,p)}if(o&&this.innerHTML.toLowerCase().indexOf(o)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,o)}});if(m.PartialView&&m.PartialView.RemoveSummary){m.PartialView.RemoveSummary(m)}if(!aa_bool(h,f,"DoNotShowPartialStatus",d)){aa_add_partial_suffix(m,r,I,l)}if(m.PartialView){m.PartialView.ShowAll=function(){m.DoFind(H,true)}}aa_invoke_cntr_handlers(m,m.ContainerChange,[],l)}};ajaxart_addScriptParam_js(c,"InitializeContainer",b,d);var g=d.vars._Cntr[0];var a=[c];if(!aa_bool(h,f,"HideExposedFilters",d)){a=a.concat(ajaxart.gcs.uiaspect.ExposedFiltersSection(f,h,d))}else{g.HideFastFind=true}return a},OccurrencesFollowup:function(b,c,a){ajaxart_addMethod(a.vars._Cntr[0],"OccurrencesFollowup",b,"OccurrencesFollowup",a)},ExposedFiltersSection:function(d,f,c){var b={isObject:true};var a=function(g,h){var o=h.vars._Cntr[0];var n=[];var l=aa_text(f,d,"FieldIds",h).split(",");for(var m in l){var p=aa_fieldById(l[m],o.Fields);if(p&&p.newFilter){n.push(aa_create_filter(p,ajaxart_getUiPref(o.ID[0],"Filter_Field_"+p.Id,h)))}}o.ExposedFilters=n;var k=h._This;o.RegisterForPreAction(k,aa_int(f,d,"Phase",c))};b.PreAction=function(m,r){var q=r.vars._Cntr[0];if(!q.HasExposedFiltersSection){q.HasExposedFiltersSection=true;var o=document.createElement("ul");o.className="aa_filters";if(q.FilterControl!=null&&!q.HideFastFind){var h=document.createElement("li");h.className="aa_filter";h.appendChild(q.FilterControl[0]);o.appendChild(h)}for(var n in q.ExposedFilters){var k=q.ExposedFilters[n];var p=k.field;if(p.FilterControl==null){continue}var l=aa_ctx(r,{FilterData:k.rawFilterData,HeaderFooterCntr:[q],DataHolderCntr:[q]});var g=p.FilterControl(l);k.Ctrl=g[0];var h=document.createElement("li");h.className="aa_filter";h.appendChild(g[0]);o.appendChild(h)}q.FiltersSection=o}if(jQuery(aa_find_header(q)).find(">.aa_filters").length==0){aa_find_header(q).appendChild(q.FiltersSection)}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},ExpandCollapseSections:function(f,g,c){var b={isObject:true};var a=function(h,k){var m=k.vars._Cntr[0];m.toggleSectionElem=function(o){var p=o.find(".aa_section_ctrl");if(p.length==0){return}p=p[0];var n=o.find(">.aa_title").slice(0,1);o[0].collapsed=!o[0].collapsed;if(o[0].collapsed){p.style.display="none";p.display="none";n.addClass("expandable");n.removeClass("collapsable")}else{p.style.display="block";p.display="block";n.addClass("collapsable");n.removeClass("expandable")}};var l=function(p){var o=jQuery((typeof(event)=="undefined")?p.target:(event.tDebug||event.srcElement));if(!o.hasClass("aa_title")){return true}var n=o.parents(".aa_section").slice(0,1);if(n.length==0){return true}m.toggleSectionElem(n);return aa_stop_prop(p)};ajaxart.ui.bindEvent(m.Ctrl,"click",l)};var d=function(h,k){var o=k.vars._Cntr[0];var l=k.vars._Elems;for(var m=0;m<l.length;m++){var n=jQuery(l[m]);var p=n.find(">.aa_section>.section_in_list_title");p.addClass("collapsable");p.disableTextSelect()}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);ajaxart_addScriptParam_js(b,"InitializeElements",d,c);return[b]},InteractiveGroupBy:function(c,d,b){var f=aa_attach_global_css(aa_text(d,c,"HitAreaCss",b),null,"hitarea");var a={isObject:true,Id:"GroupBy"};a.InitializeContainer=function(h,k){var o=k.vars._Cntr[0];o.THRightClick=function(u,t,r){if(u.button!=2){return true}var s=k.vars._Cntr[0];var q=jQuery((typeof(event)=="undefined")?u.target:(event.tDebug||event.srcElement));var v=aa_ctx(s.Context,{_CurrentFocus:[r]});ajaxart.runNativeHelper([r.Field],c,"ContextMenuImp",v);return false};o.GroupBy=function(r,s){var x=r[0];var w=k.vars._Cntr[0];var v=jQuery(w.Ctrl).find(".aatable>thead").find(">tr>th");var u=jQuery(w.Ctrl).find(".aatable>thead");var q=v.filter(function(){return this.Field.Id==x.Id});if(q.hasClass("aa_group_by")){w.GroupByFields=[];ajaxart_setUiPref(w.ID[0],"GroupBy_Field","",k)}else{if(!x.Id){}w.GroupByFields=[x];ajaxart_setUiPref(w.ID[0],"GroupBy_Field",x.Id,k);var t=","+(ajaxart_getUiPref(w.ID[0],"Table_Fields_Order",k)||"")+",";t=","+x.Id+","+t.replace(","+x.Id+",",",");t=t.replace(/,+/g,",");t=t.substring(1,t.length-1);ajaxart_setUiPref(w.ID[0],"Table_Fields_Order",t,k)}v.each(function(){jQuery(this).removeClass("aa_group_by")});if(w.GroupByFields.length>0){q.addClass("aa_group_by")}ajaxart.runNativeHelper(r,c,"RebuildContainer",aa_ctx(s,{ControlElement:[w.Ctrl]}));return[]};function m(r){if(!r.hasClass("hitarea")){return true}if(r.parents(".aa_container")[0].Cntr!=o){return true}var s=r.parents(".aa_group_header").slice(0,1);if(s.length==0){return true}if(r.hasClass("collapsable")){r.addClass("expandable");r.removeClass("collapsable")}else{r.addClass("collapsable");r.removeClass("expandable")}var q=s[0].nextSibling;while(q!=null&&q.Group!=s[0].Group){if(r.hasClass("expandable")){q.style.display="none";q.display="none"}else{q.style.display="";q.display=""}q=q.nextSibling}return false}o.DoGroupBy=function(){function B(R,K,F,V,G){var H=ajaxart_getUiPref(R.ID[0],"GroupBy_OpenedGroups",k);var U=aa_bool(d,c,"AutoExpandGroups",b)||H&&H.indexOf(","+K.Id+",")!=-1;var S=aa_bool(d,c,"UseImage",b);if(F.GroupBy_UseImage!=null){S=F.GroupBy_UseImage}S=S&&F.Options!=null&&F.Options.OptionToImage!=null;var M=aa_bool(d,c,"ShowEmptyGroups",b);if(F.GroupBy_ShowEmptyGroups!=null){M=F.GroupBy_ShowEmptyGroups}if(!M&&K.Count==0){return}var D=document.createElement("TR");D.Group=K;D.className="aa_group_header group_header_"+K.Id;for(var T=0;T<G.length;T++){var E=G[T].Field;var J=document.createElement("TD");J.onclick=function Q(aa){if(window.aa_incapture){return}var Z=jQuery((typeof(event)=="undefined")?aa.target:(event.tDebug||event.srcElement));m(Z);var Y=ajaxart_getUiPref(R.ID[0],"GroupBy_OpenedGroups",k)||",";ajaxart_setUiPref(R.ID[0],"GroupBy_OpenedGroups",aa_csv_toggle(Y,E.Id),k);if(Z.hasClass("collapsable")){r(R,K)}else{w(R,K)}if(ajaxart.isFireFox){Z.parents(".aatable").slice(0,1).css("border-collapse","separate")}};J.Field=E;J.className="aa_groupline_fld_"+E.Id+" content";var P="";if(E.Id==F.Id){var O=U?"collapsable":"expandable";var C=jQuery("<span class='aa_group_hitarea hitarea "+O+"'>&nbsp;</span>");C.addClass(f);if(K.Count>0){jQuery(J).append(C)}jQuery(J).addClass("groupby_fleld");if(S){var X=F.OptionImage?F.OptionImage([K.Id],k)[0]:"";if(X!=null&&X!=""){jQuery(J).append(jQuery("<img class='aa_imagebeforetext' src='"+X+"'/>"))}}if(F.GroupBy_GroupText){P=ajaxart_runMethod([K],F,"GroupBy_GroupText",k)[0]||""}else{P=aa_text([K],c,"GroupText",k)}}else{if(E.GroupAggregator){var L=[];var I=K.FetchItems();for(var N in I){L=L.concat(ajaxart_field_calc_field_data(E,[I[N]],R.Context))}P=ajaxart.totext_array(E.GroupAggregator(L,R.Context))}}jQuery(J).append(jQuery("<span class='aa_text'>"+P+"</span>"));D.appendChild(J)}V.appendChild(D);if(K.SubGroups){for(var T=0;T<K.SubGroups.length;T++){B(R,K.SubGroups[T],F,V,G)}}if(U){r(R,K)}if(R.InjectSummaryLines){R.InjectSummaryLines(R,V,K)}var W=document.createElement("TR");W.className="aa_group_footer group_footer_"+K.Id;W.Group=K;V.appendChild(W)}function r(C,D){aa_runMethodAsyncQuery(D,D.FetchItems,[],b,function(H,E){var G=[];for(var I=0;I<H.length;I++){var K=H[I].__item||H[I];var J=C.createNewElement([K],G,null,true);jQuery(J).addClass("aa_item_group")}var F=aa_ctx(k,{_Elems:G});for(var I=0;I<C.Aspects.length;I++){ajaxart_runMethod([],C.Aspects[I],"InitializeElements",F)}jQuery(jQuery(G).get().reverse()).insertAfter(jQuery(x).find(">.group_header_"+D.Id))})}function w(E,F){var C=jQuery(x).find(">.group_header_"+F.Id)[0].nextSibling;while(C!=null&&C.Group!=F){var D=C;C=C.nextSibling;jQuery(D).remove()}}var z=this;var x=ajaxart_find_aa_list(z);var q=jQuery(z.Ctrl).find(".aatable>thead>tr>th");var s=q.filter(".aa_group_by")[0];if(s==null){return}var y=s.Field;aa_clear_cntr_items(x,z);x.style.display="none";x.display="none";var v=z.DataHolder;var t=aa_calc_groups(v.UserDataView,v.Wrappers,[y],k);for(var u in t){B(z,t[u],y,x,q)}x.style.display="";x.display="";for(var u=0;u<z.PostActors.length;u++){ajaxart.trycatch(function(){ajaxart.runScriptParam([],z.PostActors[u].aspect.PostAction,z.Context)},function(C){ajaxart.logException(C)})}var A=aa_bool(d,c,"AutoExpandGroups",b);if(y.GroupBy_AutoExpandGroups!=null){A=y.GroupBy_AutoExpandGroups}if(A){jQuery(x).find(".aa_group_header>.hitarea").each(function(){m(jQuery(this))})}return[]};var n=jQuery(o.Ctrl).find(".aatable>thead")[0];if(n!=null){jQuery(n).bind("contextmenu",function(){return false});aa_registerHeaderEvent(n,"mousedown",o.THRightClick,"GroupBy","right mouse")}var p=ajaxart_getUiPref(o.ID[0],"GroupBy_Field",k)||"";var g=jQuery(n).find(">tr>th").filter(function(){return this.Field.Id==p});var l=aa_fieldById(p,o.Fields);if(l){o.GroupByFields=[l]}g.addClass("aa_group_by")};return[a]},Sort:function(d,f,c){var b={isObject:true};var a=function(h,k){var m=k.vars._Cntr[0];var o=function(s,r){var q=jQuery(s).find("th");q.removeClass("sort_ascending");q.removeClass("sort_descending")};var p=function(u,t,r){var q=jQuery(r);if(t.LastMouseDown==null||t.LastMouseDown.th!=r){return}var s=k.vars._Cntr[0];if(q.hasClass("sort_ascending")){o(t,r);q.addClass("sort_descending");ajaxart_setUiPref(s.ID[0],"Sort_Field",r.Field.Id,k);ajaxart_setUiPref(s.ID[0],"Sort_Direction","sort_descending",k)}else{if(q.hasClass("sort_descending")){o(t,r);ajaxart_setUiPref(s.ID[0],"Sort_Field","",k);ajaxart_setUiPref(s.ID[0],"Sort_Direction","",k)}else{o(t,r);q.addClass("sort_ascending");ajaxart_setUiPref(s.ID[0],"Sort_Field",r.Field.Id,k);ajaxart_setUiPref(s.ID[0],"Sort_Direction","sort_ascending",k)}}aa_recalc_filters_and_refresh(s,f)};var l=jQuery(m.Ctrl).find(".aatable>thead")[0];if(l){aa_registerHeaderEvent(l,"mouseup",p,"Sort","no dominant")}var n=ajaxart_getUiPref(m.ID[0],"Sort_Field",k);var g=jQuery(l).find(">tr>th").filter(function(){return this.Field.Id==n});g.addClass(ajaxart_getUiPref(m.ID[0],"Sort_Direction",k))};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},TableColumnsDragAndDrop:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];var l=function(p,n,t){var u=h.vars._Cntr[0];var q=function(S,R,C){var P=1;var B=0;if(jQuery(R).parents(".right2left").length>0){P=0;B=1}var E=ajaxart.ui.mousePos(S);var I=R.draggedElem;if(I==null){return true}I.style.left=(E.x-I.mouseX)+"px";var D=ajaxart.ui.absoluteLeft(R.spaceElem);var V=P?-1:5000;if(jQuery(R.spaceElem).next().length>0){var K=jQuery(R.spaceElem).next()[0];V=ajaxart.ui.absoluteLeft(K)+P*K.offsetWidth}var A=P?-1:5000;if(jQuery(R.spaceElem).prev().length>0){var J=jQuery(R.spaceElem).prev()[0];A=ajaxart.ui.absoluteLeft(J)+B*J.offsetWidth}var T=ajaxart.ui.absoluteLeft(R.draggedElem)+B*R.draggedElem.offsetWidth;var z=ajaxart.ui.absoluteLeft(R.draggedElem)+P*R.draggedElem.offsetWidth;var L=V<z+5;if(B){L=!L}var H=A>T-5;if(B){H=!H}var x=jQuery(R).parents(".aatable").slice(0,1);if(x[0].ElementsTable){var G=jQuery(x[0].ElementsTable).slice(0,1).find(".aa_item")}else{var G=jQuery(R).parents(".aatable").slice(0,1).find(".aa_item")}if(L){if(R.spaceElem.nextSibling.nextSibling!=null){var U=R.spaceElem.Field.Id;var F=R.spaceElem.nextSibling.Field.Id;for(var M=0;M<G.length;M++){var y=G[M];var O=jQuery(y).find(">td");var N=O.filter(function(){return this.Field.Id==U});var Q=O.filter(function(){return this.Field.Id==F});if(N.length>0&&Q.length>0){N.insertAfter(Q)}}jQuery(R.spaceElem).insertAfter(jQuery(R.spaceElem.nextSibling));if(x[0].ResizeColumn){x[0].ResizeColumn(R.spaceElem)}}}if(H){if(R.spaceElem.previousSibling!=null){var U=R.spaceElem.Field.Id;var F=R.spaceElem.previousSibling.Field.Id;for(var M=0;M<G.length;M++){var y=G[M];var O=jQuery(y).find(">td");var N=O.filter(function(){return this.Field.Id==U});var Q=O.filter(function(){return this.Field.Id==F});if(N.length>0&&Q.length>0){N.insertBefore(Q)}}jQuery(R.spaceElem).insertBefore(jQuery(R.spaceElem.previousSibling));if(x[0].ResizeColumn){x[0].ResizeColumn(R.spaceElem)}}}return aa_stop_prop(S)};var o=function(A){var z=h.vars._Cntr[0];var y=jQuery(z.Ctrl).find(".aatable>thead")[0];var x="";jQuery(y).find("th").each(function(){if(this.Field&&this.Field.Id){x=x+","+this.Field.Id}});ajaxart_setUiPref(z.ID[0],"Table_Fields_Order",x,h);jQuery(y.spaceElem).removeClass("aa_dragged_space_elem");y.draggedParent.removeChild(y.draggedElem);document.onmouseup=y.origDocMouseup;y.draggedElem=null;y.Suspect=null;ajaxart.run([],d,"OnDrop",c);aa_invoke_cntr_handlers(z,z.ContainerChange,[],h);y.Owner=null;return aa_stop_prop(A)};var r=function(z,y,x){y.Suspect={owner:"TableColumnsDragAndDrop",mousePos:ajaxart.ui.mousePos(z)};return aa_stop_prop(z)};var m=function(A,z,y){var x=ajaxart.ui.mousePos(A);if(z.Suspect!=null){var B=Math.abs(x.x-z.Suspect.mousePos.x);if(B<5){return true}z.Suspect=null;v(A,z,y)}};var w=function(z,y,x){if(y.Owner=="TableColumnsDragAndDrop"){return true}y.Suspect=null;return true};var v=function(B,A,z){ajaxart_disableSelection(A);A.Owner="TableColumnsDragAndDrop";var x=ajaxart.ui.absoluteLeft(z,false);var D=ajaxart.ui.absoluteTop(z,false);var C=A.draggedElem=z.cloneNode(true);A.draggedParent=z.parentNode;A.draggedParent.appendChild(C);A.spaceElem=z;jQuery(C).addClass("aa_dragged_elem");jQuery(A.spaceElem).addClass("aa_dragged_space_elem");var y=ajaxart.ui.mousePos(B);C.mouseX=y.x-x;C.style.position="absolute";C.style.top=D+"px";C.style.left=x+"px";A.origDocMouseup=document.onmouseup;document.onmouseup=o;if(B.preventDefault){B.preventDefault()}return aa_stop_prop(B)};var s=jQuery(u.Ctrl).find(".aatable>thead")[0];if(s){aa_registerHeaderEvent(s,"mousedown",r,"TableColumnsDragAndDrop","no dominant");aa_registerHeaderEvent(s,"mousemove",m,"TableColumnsDragAndDrop","suspect");aa_registerHeaderEvent(s,"mouseup",w,"TableColumnsDragAndDrop","suspect");aa_registerHeaderEvent(s,"mouseout",w,"TableColumnsDragAndDrop","suspect");aa_registerHeaderEvent(s,"mousemove",q,"TableColumnsDragAndDrop","dominant")}};l("fieldtitle",true)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},TableColumnsResizer:function(d,f,c){var b={isObject:true};var a=function(g,h){var n=h.vars._Cntr[0];var p=function(u,s,r){var q=ajaxart.ui.mousePos(u);var t=ajaxart.ui.absoluteLeft(r,false)+r.offsetWidth-q.x<6;if(jQuery(s).parents(".right2left").length>0){t=q.x-ajaxart.ui.absoluteLeft(r,false)<6}if(t){jQuery(r).addClass("col_resize");s.ResizedCol=r;s.Owner="TableColumnsResizer"}else{jQuery(r).removeClass("col_resize");s.ResizedCol=null;s.Owner=null}return aa_stop_prop(u)};var k=function(s,r,q){r.ResizedColStart=true;ajaxart_disableSelection(r);document.onmouseup=o;return aa_stop_prop(s)};var m=function(x,v,t){if(v.ResizedColStart){var q=ajaxart.ui.mousePos(x);var w=q.x-ajaxart.ui.absoluteLeft(v.ResizedCol,false);if(jQuery(v).parents(".right2left").length>0){w=ajaxart.ui.absoluteLeft(v.ResizedCol,false)+v.ResizedCol.offsetWidth-q.x}jQuery(v.ResizedCol).width(w);var u=h.vars._Cntr[0];ajaxart_setUiPref(u.ID[0],v.ResizedCol.Field.Id+"_ColumnWidth",""+w+"px",h);var s=jQuery(v.ResizedCol).parents(".aatable").slice(0,1);if(s[0].ResizeColumn){s[0].ResizeColumn(v.ResizedCol)}if(jQuery(v.ResizedCol).parents("table").slice(0,1).hasClass("aa_inner_header")){var r=s.find("td").filter(function(){return this.Field!=null&&this.Field.Id==v.ResizedCol.Field.Id});r.width(w+1)}return aa_stop_prop(x)}else{p(x,v,t)}};var o=function(r){var q=h.vars._Cntr[0];jQuery(q.Ctrl).find("th").removeClass("col_resize");document.onmouseup=null;jQuery(q.Ctrl).find("thead").each(function(){var s=this;s.ResizedColStart=false;s.ResizedCol=null;s.Owner=null});return aa_stop_prop(r)};var l=jQuery(n.Ctrl).find(".aatable>thead")[0];if(l){aa_registerHeaderEvent(l,"mousemove",p,"TableColumnsResizer","no dominant");aa_registerHeaderEvent(l,"mousedown",k,"TableColumnsResizer","dominant");aa_registerHeaderEvent(l,"mousemove",m,"TableColumnsResizer","dominant");aa_registerHeaderEvent(l,"mouseup",o,"TableColumnsResizer","dominant")}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},ScrollItems:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(g,h){var m=h.vars._Cntr[0];m.ScrollStyle=aa_first(d,c,"Style",b);m.ScrollWidth=aa_first(d,c,"Width",b);m.ScrollHeight=aa_first(d,c,"Height",b);var l=ajaxart_find_aa_list(m);var k=l;while(k&&",table,tbody,tr,td,".indexOf(k.tagName.toLowerCase())>-1){k=k.parentNode}var n=aa_attach_global_css(m.ScrollStyle.Css,b);m.ScrollObject=aa_renderStyleObject(m.ScrollStyle,{ScrollHeight:m.ScrollHeight,ScrollWidth:m.ScrollWidth,fixSize:function(o){if(m.ScrollHeight){m.ScrollHeight.apply(o)}if(m.ScrollWidth){m.ScrollWidth.apply(o)}},init:function(o){this.refresh=o.refresh;this.requiresDivWrapper=o.requiresDivWrapper},cntrBody:l,topDiv:k},h);var f=m.ScrollObject;if(m.ScrollHeight){jBart.bind(m.ScrollHeight,"update",function(){m.ScrollObject.refresh()})}if(m.ScrollWidth){jBart.bind(m.ScrollWidth,"update",function(){m.ScrollObject.refresh()})}if(m.ScrollObject.requiresDivWrapper){aa_addOnAttach(l,function(){var o=f.topDiv.parentNode;f.divWrapper=jQuery('<div class="aa_scroll_wrapper"/>').addClass(n).append(f.topDiv)[0];o.appendChild(f.divWrapper);m.ScrollObject.refresh()})}else{jQuery(k).addClass(n);m.ScrollObject.refresh()}};return[a]},TableScroll:function(f,g,d){var c={isObject:true};function a(p){var l=jQuery(p.Ctrl).find(".aatable").slice(0,1);var o=l.width();var h=aa_int(g,f,"Height",d);if(h>l.height()){return}var k=jQuery('<table class="aa_headers_table aatable"></table>');k.append(l.find("thead"));k.insertBefore(l);var n=jQuery('<div class="aa_scroll_wrapper" style="overflow: auto"></div>');n.insertBefore(l);n.append(l);n.height(h);k[0].ElementsTable=l[0];m(k);function m(y){var q=18;var z=10;var A=y.parent().find(">.aa_scroll_wrapper");var B=A.find(">.aatable");var w=y.width();var v=1;if(ajaxart.isChrome||ajaxart.isIE){v=2}A.width(w+v);var x=B.find(">tbody>tr");var r=[];y.find(">thead>tr>th").each(function(){r.push(jQuery(this).width()-z)});r[r.length-1]=r[r.length-1]-q+1;if(ajaxart.isIE){B[0].setAttribute("width",""+(w-q))}for(var u=0;u<x.length;u++){var t=jQuery(x[u]).find(">td");for(var s=0;s<t.length;s++){jQuery(t[s]).width(r[s]);jQuery(t[s]).css("min-width",r[s]);jQuery(t[s]).css("max-width",r[s])}}}k[0].ResizeColumn=function(){m(jQuery(this))}}var b=function(h,k){var l=k.vars._Cntr[0];l.RegisterForPostAction(k._This)};c.PostAction=function(h,k){setTimeout(function(){var l=k.vars._Cntr[0];a(l)},1)};ajaxart_addScriptParam_js(c,"InitializeContainer",b,d);return[c]},CustomListPresentation:function(c,d,b){var a={isObject:true};var f=function(g){function h(k,l){var o=b.vars._Cntr[0];var p=aa_merge_ctx(b,l,{Items:aa_items(o)});var n=aa_first(d,c,"List",p);if(n){jQuery(n).addClass("aa_list");jQuery(ajaxart_find_aa_list(o)).replaceWith(n)}for(var m=0;m<o.PostActors.length;m++){ajaxart.trycatch(function(){ajaxart.runScriptParam([],o.PostActors[m].aspect.PostAction,o.Context)},function(q){ajaxart.logException(q)})}}g.InitializeContainer=function(k,l){var m=l.vars._Cntr[0];m.createNewElement=null;aa_register_handler(m,"ContainerChange",h)}};f(a);return[a]},Tiles:function(c,d,b){var a={isObject:true};a.CreateContainer=function(f,g){var h=g.vars._Cntr[0];var k=jQuery('<div class="teasers_list_tiles aa_list aa_listtop aa_cntr_body"/>');jQuery(h.Ctrl).find(">.aa_listtop").replaceWith(k);jQuery(h.Ctrl).find(">.aa_container_footer").css("clear","both");return[]};a.InitializeContainer=function(f,g){var m=g.vars._Cntr[0];var l=aa_text(d,c,"ImageSize",b).split(",");var k=aa_text(d,c,"TileExtraSize",b).split(",");m.TilesImageWidth=parseInt(l[0].split("px")[0]);m.TilesImageHeight=parseInt(l[1].split("px")[0]);m.TilesWidth=m.TilesImageWidth+parseInt(k[0].split("px")[0]);m.TilesHeight=m.TilesImageHeight+parseInt(k[1].split("px")[0]);m.TilesMaxTextLength=aa_int(d,c,"MaxTextLength",b);m.DefaultTileImage=aa_text(d,c,"DefaultImage",b);m.MoreFields=aa_text(d,c,"MoreFields",b);m.Tiles=aa_bool(d,c,"Tiles",b);var h=ajaxart.fieldscript(c,"ImageOrVideo",true);m.Clickable=aa_text(d,c,"Clickable",b);m.TilesHasImage=(h!=null&&h.nodeValue!="");m.TilesKeepImageProportion=aa_bool(d,c,"KeepImageProportion",b);m.createNewElement=function(t,x,D){var C=g.vars._Cntr[0];var A=jQuery('<div class="aa_teaser tiles aa_item"><div class="aa_teaserimage"><img class="aa_teaser_image"/></div><div class="aa_teaser_title aa_text"/><div class="aa_teaser_text aa_text"/></div>');if(C.CustomItemControl){A=jQuery('<div class="aa_teaser tiles aa_item"></div>');var w=C.CustomItemControl(t,D||g);if(w.length>0){A[0].appendChild(w[0])}}else{var y=aa_text(t,c,"Text",b);if(y.length>=C.TilesMaxTextLength&&C.TilesMaxTextLength>0){y=y.substring(0,C.TilesMaxTextLength)+"..."}var u=aa_text(t,c,"ImageOrVideo",b)||C.DefaultTileImage;if(C.TilesHasImage){var I=u.indexOf("<object")!=-1;if(I){u=u.replace(new RegExp("width=.[0-9]*","g"),'width="'+C.TilesImageWidth);u=u.replace(new RegExp("height=.[0-9]*","g"),'height="'+C.TilesImageHeight);var H=jQuery(u);A.find(".aa_teaserimage_td").empty().append(H)}else{if(u!=""){A.find(".aa_teaser_image")[0].src=u}if(C.TilesImageWidth){A.find(".aa_teaser_image")[0].width=C.TilesImageWidth}if(C.TilesImageHeight){A.find(".aa_teaser_image")[0].height=C.TilesImageHeight}if(C.TilesWidth){A.find(".aa_teaser_image")[0].style.maxWidth=C.TilesWidth+"px"}if(C.TilesHeight){A.find(".aa_teaser_image")[0].style.maxHeight=C.TilesHeight+"px"}}A.find(".aa_teaserimage_td").width(C.TilesImageWidth);A.find(".aa_teaserimage").height(C.TilesImageHeight+"px")}function z(N){var Q=g.vars._Cntr[0];var M=new Image();M.src=N.getAttribute("src");var O=M.width,R=M.height;if(O<Q.TilesImageWidth){N.width=O}if(R<Q.TilesImageHeight){N.height=R}var L=Math.min(O,Q.TilesImageWidth),S=Math.min(R,Q.TilesImageHeight);if(Q.TilesKeepImageProportion){var P=O/R;var K=L/S;if(P!=K){if(O>=R*K){N.width=Q.TilesImageWidth;N.height=Math.floor(L/P)}else{N.height=Q.TilesImageHeight;N.width=Math.floor(S*P)}}}}if(u){var J=A.find(".aa_teaser_image")[0];var s=new Image();s.src=u;if(s.complete){z(J)}else{J.onload=function(){z(this)}}}A.find(".aa_teaser_title")[0].innerHTML=aa_text(t,c,"Title",b);A.find(".aa_teaser_text")[0].innerHTML=y;if(C.TilesWidth!=""){A.find(".aa_teaser_text")[0].style.maxWidth=C.TilesWidth+"px";A.find(".aa_teaser_text")[0].style.overflow="hidden";A.find(".aa_teaser_title")[0].style.maxWidth=C.TilesWidth+"px";A.find(".aa_teaser_title")[0].style.overflow="hidden"}}var B=null;if(C.Clickable=="tile"){B=A}else{if(C.Clickable=="title"){B=A.find(".aa_teaser_title")}}if(B!=null){B.addClass("teasers_clickable");B.click(function(M){if(window.aa_incapture){return}var L=g.vars._Cntr[0];var K=this;if(!jQuery(this).hasClass("aa_item")){K=jQuery(this).parents(".aa_item")[0]}var N=aa_ctx(D||g,{_InnerItem:K.ItemData,_ItemsOfOperation:K.ItemData,ControlElement:[this]});ajaxart.run(K.ItemData,c,"Action",N);return false})}if(C.TilesWidth!=""){A[0].style.width=C.TilesWidth+"px"}if(C.TilesHeight!=""){A[0].style.height=C.TilesHeight+"px"}var p=C.MoreFields.split(",");for(var G=0;G<p.length;G++){var r=p[G];if(r==""){continue}var o=null;for(var E=0;E<C.Fields.length;E++){if(C.Fields[E].Id==r){o=C.Fields[E]}}if(o==null){ajaxart.log("Tiles: field "+r+" not found");continue}var q=aa_ctx(D||g,{_Field:[o],FieldTitle:[o.Title],_InnerItem:t,_Elem:[A],_Item:t});var n=document.createElement("div");n.className="teasers_field";var v=ajaxart_field_calc_field_data(o,t,q);ajaxart_field_createCellControl(t,C,n,C.CellPresentation,o,v,q);A[0].appendChild(n)}var F=A[0];F.ItemData=t;if(x){x.push(F)}return F}};return[a]},ElementItemData:function(b,d,a){var c=aa_first(d,b,"Element",a);if(c&&c.ItemData){return c.ItemData}return[]},Css:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(g,h){var m=aa_text(d,c,"OnElement",b);if(m==""){m="container"}var k=ajaxart.compile(c,"Class",b);var o=ajaxart.compile(c,"Inline",b);var f=ajaxart.compile(c,"OnCondition",b,null,false,true);var n=function(q,t){for(var r=0;r<q.length;r++){if(!ajaxart_runcompiled_bool(f,t,c,"OnCondition",b,true)){return}var p=ajaxart_runcompiled_text(k,t,c,"Class",b);var s=ajaxart_runcompiled_text(o,t,c,"Inline",b);if(s!=""){aa_setCssText(q[r],q[r].style.cssText+";"+s)}jQuery(q[r]).addClass(p)}};var l=function(s,r){var q=h.vars._Cntr[0];a.PostAction=function(t,u){var v=u.vars._Cntr[0];if(r=="container"){s([v.Ctrl],t)}if(r=="container body"){s(jQuery(v.Ctrl).find(">.aa_cntr_body"),t)}if(r=="table"){s(jQuery(v.Ctrl).find(">.aa_cntr_body>table,>table"),t)}if(r=="title row"){s(jQuery(v.Ctrl).find(".aatable_header"),t)}if(r=="title cell (th)"){s(jQuery(v.Ctrl).find(".fieldtitle"),t)}if(r=="title text"){s(jQuery(v.Ctrl).find(".fieldtitle_title"),t)}};var p=function(t,u){var v=u.vars._Elems;if(r=="items"){for(var w=0;w<v.length;w++){s([v[w]],v[w].ItemData)}}if(r=="tree item text"){for(var w=0;w<v.length;w++){var x=jQuery(v[w]).find(">.item_text")[0];if(x){s([x],v[w].ItemData)}}}if(r=="cells"){for(var w=0;w<v.length;w++){s(jQuery(v[w]).find(">td"),v[w].ItemData)}}};ajaxart_addScriptParam_js(a,"InitializeElements",p,b);q.RegisterForPostAction(a)};l(n,m)};return[a]},CssClass:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,h){var k=h.vars._Cntr[0];var g=aa_text(d,c,"CssClass",b);jQuery(k.Ctrl).addClass(g)};return[a]},PathOfElement:function(c,f,b){var d=aa_first(f,c,"Element",b);var g="";while(d!=null&&!aa_hasClass(d,"aa_container")){if(aa_hasClass(d,"aa_item")){var a=jQuery(d).find(">.aa_text").text();if(a!=""){if(g==""){g=a}else{g=a+"/"+g}}}d=d.parentNode}return[g]},TextWithCommas:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.MaxItemsToShow=aa_int(d,c,"MaxItemsToShow",b);if(h.MaxItemsToShow==0){h.MaxItemsToShow=null}h.AsHyperlink=aa_bool(d,c,"AsHyperlink",b);jQuery(ajaxart_find_aa_list(h)).addClass("commas").css("margin",0);h.createNewElement=function(m,o,k){var n=g.vars._Cntr[0];var l=document.createElement("span");l.ItemData=m;l.className="aa_item aa_textwithcommas";if(n.AsHyperlink){l.className+=" hyperlink";l.onmouseup=function(){if(ajaxart.fieldscript(c,"OnClick",true)){ajaxart.run(this.ItemData,c,"OnClick",aa_merge_ctx(b,k))}else{var p=g.vars._Cntr[0];var q=aa_ctx(k||g,{_InnerItem:this.ItemData});ajaxart.runScriptParam(this.ItemData,p.OpenItemDetails,q)}}}l.innerHTML=aa_text(m,c,"ItemText",aa_merge_ctx(b,k));if(o){o.push(l)}return l}};a.InitializeElements=function(f,g){var l=g.vars._Cntr[0];var h=g.vars._Elems;for(var k=0;k<h.length-1;k++){jQuery(h[k]).removeClass("last")}if(h.length>0){jQuery(h[h.length-1]).addClass("last")}};return[a]},HiddenFields:function(c,d,b){var a={isObject:true};a.CreateContainer=function(f,g){var h=g.vars._Cntr[0];h.HiddenFields=aa_text(d,c,"FieldIds",b);return[]};return[a]},Table:function(d,g,c){var b={isObject:true};var f=function(h,k){var m=k.vars._Cntr[0];var l=jQuery('<table class="aatable aa_listtop aa_cntr_body"><thead><tr class="aatable_header"></tr></thead><tbody class="aatable_tbody aa_list" tabindex="1"></tbody></table>');l.addClass(aa_attach_global_css(aa_text(g,d,"Css",c),null,"table"));jQuery(m.Ctrl).find(">.aa_listtop").replaceWith(l);return[]};var a=function(C,s){var q=s.vars._Cntr[0];var z=aa_text(g,d,"Columns",s);var r=ajaxart_getUiPref(q.ID[0],"Table_Fields_Order",s);var l=","+ajaxart_getUiPref(q.ID[0],"Table_Hidden_Fields",s)+","+(q.HiddenFields||"")+",";var t=ajaxart_field_getFields(q,"table");var p=[];for(var w=0;w<t.length;w++){if(t[w].Id==""||l.indexOf(t[w].Id)==-1){p.push(t[w])}}var k=z.split(",");if(r){var x=","+r+",";if(z!=""){var n=z.split(",");for(var w=0;w<n.length;w++){if(n[w]!=""&&x.indexOf(n[w])==-1){x+=n[w]+","}}}else{for(var w=0;w<p.length;w++){if(x.indexOf(p[w].Id)==-1){x+=p[w].Id+","}}}k=x.split(",")}if(k.length==1&&k[0]==""){k=[]}q.columns=[];if(q.CellPresentation==null){q.CellPresentation="text"}var y=ajaxart_runMethod([],q,"Operations",s);if(k.length==0){for(var w=0;w<p.length;w++){q.columns.push(p[w])}}else{for(var w=0;w<k.length;w++){if(k[w]==""){continue}var o=false;for(var u=0;u<p.length;u++){if(k[w]==p[u].Id){q.columns.push(p[u]);o=true}}for(var u=0;u<y.length;u++){if(k[w]==y[u].Id){q.columns.push(y[u]);o=true}}if(!o){ajaxart.log("table column (field or operation) '"+k[w]+"' was not found")}}}var B=jQuery(q.Ctrl).find(".aatable");var v=jQuery(q.Ctrl).find("thead");if(v.length==0){return}var A=v.find(">tr")[0];var p=ajaxart_field_getFields(q,"table");for(var u=0;u<q.columns.length;u++){var h=q.columns[u];var m=jQuery('<th class="fieldtitle th_'+h.Id+'"><span class="fieldtitle_title"/><span class="fieldtitle_sort">&nbsp;</span></th>');if(h.AddInfoIcon){h.AddInfoIcon(m.get(),q.Context)}aa_defineElemProperties(m[0],"fieldId");m[0].fieldId=h.Id;m[0].Field=h;m[0].Cntr=q;var D=h.isOperation?ajaxart_runMethod(g,h,"Title",q.Context)[0]:h.Title;if(h.HideTitle){D=" "}m.find(">.fieldtitle_title").html(D);if(h.Width){m.css("width",h.Width)}ajaxart_field_fix_th(q,m[0],h,s);A.appendChild(m[0]);if(q.EnableFieldMenu){m.find(">span").slice(0,1).insertBefore('<span class="aa_field_menu">&nbsp;</span>');m.find(">.aa_field_menu")[0].onmousedown=function(E){var F=aa_ctx(s,{MousePos:[{isObject:true,pageX:E.pageX||E.clientX,pageY:E.pageY||E.clientY}]});ajaxart.runNativeHelper([h],d,"FieldMenu",F);return aa_stop_prop(E)}}}q.createNewElement=function(L,Q,U,Y){var T=this;var F=document.createElement("TR");F.className="aa_item tablerow";F.ItemData=L;ajaxart.databind([F],L,c,d,g);var S=T.columns;if(T.CustomItemControl){var M=document.createElement("TD");M.colSpan=S.length;var O=T.CustomItemControl(L,s);if(O.length>0){M.appendChild(O[0])}F.appendChild(M)}else{if(!T.GroupByFields||T.GroupByFields.length==0||Y){for(var W=0;W<S.length;W++){var H=S[W];var K=aa_ctx(U||s,{_Field:[H],FieldTitle:[H.Title],_InnerItem:L,_Elem:[F],_Item:L});var M=document.createElement("TD");M.Field=H;if(H.Id=="#_TitleField"){M.className="aa_title_td content";F.titleTd=M}else{if(T.WrappersAsItems||(H.IsCalculated&&H.WrapperToValue&&L[0]&&L[0].__hiddenForView)){M.className="content aa_text fld_"+H.Id;M.innerHTML=""+L[0][H.Id];F.appendChild(M);continue}if(H.CellPresentation=="text"&&!H.isOperation&&!H.CalculatedControl&&!H.IsCalculated&&!H.ModifyCell){M.className="content aa_text fld_"+H.Id;if(H.Text){var Z=ajaxart_field_calc_field_data(H,L,K);M.innerHTML=ajaxart_field_text(H,Z,L,K);M.Data=Z}else{if(H.ItemToText){M.innerHTML=H.ItemToText(L[0]);M.Data=L}else{if(L[0]&&L[0].__hiddenForView){M.innerHTML=L[0][H.Id]}else{var N=ajaxart_field_calc_field_data(H,L,K);M.Data=N;M.innerHTML=ajaxart_field_text(H,N,L,K)}}}if(H.ModifyCell){var Z=ajaxart_field_calc_field_data(H,L,K);for(var X=0;X<H.ModifyCell.length;X++){H.ModifyCell[X](M,Z,"text",K,item)}}F.appendChild(M);continue}M.className="content";var N=ajaxart_field_calc_field_data(H,L,K);ajaxart_field_createCellControl(L,T,M,T.CellPresentation,H,N,K);var E=jQuery(M).find(".aa_container");if(E.length>0){var G=ajaxart_find_list_under_element(E[0]);if(jQuery(G).parent().hasClass("aatable")){jQuery(M).addClass("td_of_embedded_table");var J=jQuery(ajaxart_find_aa_list(T)).parent().find(">thead");if(!J[0].HeaderFusionDone){J.find(">tr>th").filter(function(){return this.fieldId!=H.Id}).attr("rowSpan","2");var I=jQuery('<tr><th class="fieldtitle td_of_embedded_table"><table class="aa_inner_header"></table></th></tr>');I.find(".fieldtitle")[0].Field=H;var P=jQuery(G).parent().find(">thead");var R=jQuery("<thead><tr></tr></thead>");var V=R.find("tr")[0];P.find("th").each(function(){var aa=this.cloneNode(true);aa.Field=this.Field;V.appendChild(aa)});R.find("th").slice(0,1).addClass("first");I.find(".aa_inner_header")[0].appendChild(R[0]);J[0].appendChild(I[0]);J[0].HeaderFusionDone=true}}}}F.appendChild(M)}}}if(Q){Q.push(F)}return F};q.wrapElement=function(F,E){var G=document.createElement("TR");G.className="aa_item tablerow";G.ItemData=item_data;G.setAttribute("ColSpan",q.columns.length)}};ajaxart_addScriptParam_js(b,"CreateContainer",f,c);ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},CustomItemControl:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.CustomItemControl=function(l,k){return ajaxart.run(l,c,"Control",aa_merge_ctx(b,k))}};return[a]},ShowTextWhenNoItems:function(c,d,b){var a={isObject:true,InitializeContainer:function(f,g){var h=g.vars._Cntr[0];h.DescriptionWhenNoItems=function(){return ajaxart_multilang_run(d,c,"TextWhenNoItems",b)};h.NoItemsStyle=aa_first(d,c,"Style",b);h.RegisterForPostAction(a);aa_register_handler(h,"ContainerChange",a.Refresh)},Refresh:function(f,g){var h=g.vars._Cntr[0];if(jQuery(h.Ctrl).find(">.aatable>.aatable_tbody").length>0){return}var k=ajaxart_find_aa_list(h);aa_remove(h.ElementForNoItems,true);jQuery(k).removeClass("aa_noitems");if(jQuery(k).find(">.aa_item").length==0){h.ElementForNoItems=aa_renderStyleObject(h.NoItemsStyle,{text:aa_totext(h.DescriptionWhenNoItems(d,b))},b);k.appendChild(h.ElementForNoItems);jQuery(k).addClass("aa_noitems")}},PostAction:function(f,g){a.Refresh(f,g)}};return[a]},TableNoItems:function(f,g,c){var b={isObject:true};function d(k,m){var o=m.vars._Cntr[0];if(o.GroupByUsingUIPref){return[]}var h=jQuery(o.Ctrl).find(">.aatable>.aatable_tbody");if(h.length==0){return[]}jQuery(o.Ctrl).find(">.aatable").show();h.find(">tr.noitems").remove();if(h.find(">tr").length==0){if(aa_bool(g,f,"HideTable",c)){jQuery(o.Ctrl).find(">.aatable").hide()}else{var l=aa_totext(o.DescriptionWhenNoItems(g,c));var n=jQuery('<tr class="noitems"><td colspan="'+o.columns.length+'" class="td_nocontent"><span>'+l+"</span></td></tr>");if(h.length>0){h[0].appendChild(n[0])}}}else{}}b.PostAction=function(h,k){d(h,k)};var a=function(h,k){var l=k.vars._Cntr[0];l.DescriptionWhenNoItems=function(){return ajaxart_multilang_run(g,f,"DescriptionWhenNoItems",c)};l.RegisterForPostAction(k._This);aa_register_handler(l,"ContainerChange",d)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},TableNoHeader:function(d,f,c){var b={isObject:true};b.PostAction=function(g,h){var l=h.vars._Cntr[0];if(l.GroupByUsingUIPref){return[]}var k=ajaxart_find_aa_list(l);jQuery(k).parent().find(">thead").slice(0,1).addClass("hidden_header")};var a=function(g,h){var k=h.vars._Cntr[0];k.RegisterForPostAction(h._This)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},Horizontal:function(d,f,c){var a=aa_attach_global_css(aa_text(f,d,"Css",c),null,"horiz");var b={isObject:true};b.InitializeContainer=function(g,h){var k=h.vars._Cntr[0];k.createNewElement=function(o,u,A){h=aa_merge_ctx(c,h);var z=h.vars._Cntr[0];aa_prepare_calculated_fields_for_item(z.Fields,o,aa_merge_ctx(c,A));var E=aa_bool(f,d,"HideInnerTitles",c);var y=ajaxart_field_getFields(z,"property sheet",o);var G=jQuery('<table class="aahoriz" cellspacing="0" cellpadding="0"><tbody><tr class="aahoriz_tr"/></tbody></table>')[0];if(aa_bool(f,d,"FullWidth",c)){jQuery(G).width("100%")}var l=jQuery(G).find(".aahoriz_tr")[0];l.ItemData=o;var J=aa_text(f,d,"Spacing",c).replace(/ /g,"");var s=J!=""&&J!="0";var n=J.split(",");var H=aa_bool(f,d,"EnforceSpacing",c);var x=ajaxart_run_commas(f,d,"MinWidths",c);var v=ajaxart_run_commas(f,d,"MaxWidths",c);var t=ajaxart_run_commas(f,d,"Widths",c);if(aa_bool(f,d,"AlighLastToRight",c)){var C=jQuery('<div style="aa_item" />').addClass(a)[0];C.ItemData=o;for(var B=0;B<y.length;B++){var m=y[B];var I=ajaxart_properties_and_sections(z,u,o,d,A||h,[y[B]],true);var r=jQuery('<div class="aa_float_left"/>')[0];if(B==y.length-1){r=jQuery('<div class="aa_float_right"/>')[0]}r.appendChild(I);C.appendChild(r)}if(u){u.push(C)}return C}for(var B=y.length-1;B>=0;B--){if(typeof(y[B].Hidden)=="function"&&aa_tobool(y[B].Hidden(o,h))){y.splice(B,1)}}for(var B=0;B<y.length;B++){if(B>0&&s){var F=J;if(n.length>1&&B<=n.length){F=n[B-1]}if(F!=""){var w=document.createElement("td");w.className="aahoriz_space";if(H){w.style.minWidth=F}else{w.style.width=F}if(z.SeparatorControl){var D=z.SeparatorControl(o,h)[0];if(D){w.appendChild(D)}}l.appendChild(w)}}var p=document.createElement("td");p.className="aahoriz_td";if(E){var q=ajaxart_field_calc_field_data(y[B],o,A||h);ajaxart_field_createCellControl(o,z,p,"control",y[B],q,A||h)}else{var I=ajaxart_properties_and_sections(z,u,o,d,A||h,[y[B]],true);p.appendChild(I)}l.appendChild(p);if(B<x.length){I.style.minWidth=x[B]}if(B<v.length){I.style.minWidth=v[B]}if(B<t.length){p.style.width=I.style.width=t[B]}}jQuery(G).addClass(a);if(u){u.push(G)}return G}};return[b]},MultipleColumns:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.createNewElement=function(o,r,w){aa_prepare_calculated_fields_for_item(k.Fields,o,aa_merge_ctx(c,w));var q=aa_int(f,d,"Columns",c)+0;var u=ajaxart_field_getFields(k,"property sheet");var B=aa_text(f,d,"Space",c),x=aa_text(f,d,"HeaderSpace",c),s=aa_text(f,d,"FooterSpace",c);var v=aa_text(f,d,"PropertiesWidth",c);var m=[];var n=-1;var y=Math.ceil(u.length/q);for(var z=0;z<u.length;z++){if(z%y==0){m.push([]);n++}m[n].push(u[z])}var A=jQuery('<table class="aacolumns aa_item" cellspacing="0" cellpadding="0"><tbody><tr class="aacolumns_tr"/></tbody></table>')[0];var l=jQuery(A).find(".aacolumns_tr")[0];l.ItemData=o;for(var z=0;z<m.length;z++){if(z>0){var t=document.createElement("td");t.className="aacolumns_gap";t.style.width=aa_text(f,d,"Gap",c);l.appendChild(t)}var p=document.createElement("td");p.className="aacolumns_td";var C=ajaxart_properties_and_sections(k,r,o,d,w||h,m[z],B,false,v,x,s);p.appendChild(C);l.appendChild(p)}if(r){r.push(A)}return A}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},StretchToBottomRight:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.RegisterForPostAction(this)};a.PostAction=function(f,g){var l=g.vars._Cntr[0];var k=l.Ctrl;var h=aa_find_just_in_container(l,".aa_tab_page");if(h){k=h;if(!aa_bool(d,c,"StretchToRight",b)){k.style.paddingRight="17px"}}if(aa_bool(d,c,"StretchToBottom",b)){aa_stretchToBottom(k,aa_int(d,c,"MarginFromBrowserBottom",b))}if(aa_bool(d,c,"StretchToRight",b)){aa_stretchToRight(k,aa_int(d,c,"MarginFromBrowserRight",b))}};return[a]},AspectByXtml:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){ajaxart.run(d,c,"InitializeContainer",aa_merge_ctx(b,g))};return[a]},Group:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.createNewElement=function(k,t,o){var u=g.vars._Cntr[0];u.Style=aa_first(d,c,"Style",b);if(u.Style.Html==""){return null}var n=u.Style.Html;if(u.Style.DynamicDataInHtml=="true"){var q=0;while(1){q=n.indexOf("jBartRawData(",q);if(q==-1){break}var l=n.indexOf(")",q);var r=n.substring(q+"jBartRawData(".length,l);var s=aa_totext(ajaxart.dynamicText(k,"%"+r+"%",o));n=n.substring(0,q)+s+n.substring(l+1)}var p=ajaxart_field_getFields(u,"property sheet");while(1){q=n.indexOf("jBartData(",q);if(q==-1){break}var l=n.indexOf(")",q);var w=n.substring(q+"jBartData(".length,l);var s="";for(var m=0;m<p.length;m++){if(p[m].Id==w){s=aa_totext(p[m].FieldData(k,o));break}}n=n.substring(0,q)+s+n.substring(l+1)}}var v=aa_api_object(jQuery(n),{data:k,cntr:u});aa_prepare_calculated_fields_for_item(u.Fields,k,aa_merge_ctx(b,g));aa_defineElemProperties(v,"Fields,addFields,addManualFields");v.Fields=ajaxart_field_getFields(u,"property sheet");var x=function(B,A){var z=this.getInnerElement(B);z.jbFieldElement=this;if(!z){return}var y=aa_ctx(this.cntr.Context,{_Field:[this.Field],_Item:this.data});var C=ajaxart_field_calc_field_data(this.Field,this.data||[],y);if(!A&&this.Field.AsSection){z.appendChild(aa_buildSectionControl(this.cntr,this.Field,C,this.data,y))}else{ajaxart_field_createCellControl(this.data,this.cntr,z,this.cntr.CellPresentation,this.Field,C,y)}if(z.firstChild){aa_element_attached(z.firstChild)}};v.addFields=function(F,A){var z=this.getInnerElement(F);if(!z||!A){return}var y=z.parentNode;for(var B=0;B<this.Fields.length;B++){var E=this.Fields[B];var C=z.cloneNode(true);if(E.IsCellHidden&&E.IsCellHidden(k,g)){if(E.RenderHiddenCell){C.style.display="none"}else{continue}}y.insertBefore(C,z);aa_element_attached(C);var D=aa_api_object(C,{Field:E,data:this.data,Title:E.Title,cntr:this.cntr,HideTitle:E.HideTitle,IsSection:E.AsSection,setControl:x});aa_defineElemProperties(D,"setPlaceholderForMoreFields");D.setPlaceholderForMoreFields=function(G){this.jbOptionsPage=function(){if(!this.jbOptionsPageElement){var H=z.cloneNode(true);optionsFieldObj=aa_api_object(H,{field_obj:this,setOptionsPage:function(I){this.field_obj.jbOptionsPageElement=this.getInnerElement(I)}});G.call(optionsFieldObj,optionsFieldObj);if(this.Field.IndentOptionPage){jQuery(H).addClass("aa_indent")}jQuery(H).insertAfter(this)}return this.jbOptionsPageElement}};A.call(D,D);if(E.Mandatory){jQuery(C).addClass("aa_mandatory")}}z.parentNode.removeChild(z)};v.addManualFields=function(z,A){for(var B=0;B<this.Fields.length;B++){var E=this.Fields[B];var y=jQuery(this).find(z+E.ID);for(var D=0;D<y.length;D++){var C=aa_api_object(jQuery(y[D]),{Field:E,data:this.data,Title:E.Title,cntr:this.cntr,HideTitle:E.HideTitle,IsSection:E.AsSection,setControl:x});A(C)}}};v.jElem.addClass(aa_attach_global_css(u.Style.Css)).addClass("aa_item");aa_apply_style_js(v,u.Style);v.jElem[0].ItemData=k;if(t){t.push(v.jElem[0])}return v.jElem[0]}};return[a]},PropertySheet:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.createNewElement=function(n,r,p){var s=h.vars._Cntr[0];aa_prepare_calculated_fields_for_item(s.Fields,n,aa_merge_ctx(c,p));var q=ajaxart_field_getFields(s,"property sheet");var l=aa_text(f,d,"Space",c),o=aa_text(f,d,"HeaderSpace",c),t=aa_text(f,d,"FooterSpace",c);var u=aa_bool(f,d,"FullWidth",c);var m=aa_text(f,d,"PropertiesWidth",c);var v=ajaxart_properties_and_sections(s,r,n,d,p||h,q,l,u,m,o,t);jQuery(v).addClass("aa_item");if(r){r.push(v)}return v}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},BoxLayout:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];if(!h.IsSingleItem){return}h.createNewElement=function(k,r,o){var u=g.vars._Cntr[0];var q=ajaxart_field_getFields(u,"property sheet");var l=aa_text(d,c,"Orient",b).replace(" ","_");var m=jQuery('<div class="aa_item aa_box_'+l+'" />')[0];for(var n=0;n<q.length;n++){var t=q[n];var p=ajaxart_field_calc_field_data(t,k,o);var s=document.createElement("div");m.appendChild(s);ajaxart_field_createCellControl(k,u,s,"control",t,p,o)}m.ItemData=k;if(r){r.push(m)}return m}};return[a]},Vertical:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.createNewElement=function(m,t,p){var x=h.vars._Cntr[0];var r=ajaxart_field_getFields(x,"property sheet");var l=aa_text(f,d,"Space",c),u=aa_text(f,d,"HeaderSpace",c),y=aa_text(f,d,"FooterSpace",c);var s=aa_text(f,d,"Align",c);var z=true;var o=jQuery('<div class="aa_item"/>')[0];if(u!=""){jQuery(o).append(jQuery('<div style="height: '+u+'"/>'))}for(var n=0;n<r.length;n++){if(n>0){jQuery(o).append(jQuery('<div style="height: '+l+'"/>'))}var w=r[n];var q=ajaxart_field_calc_field_data(w,m,p);var v=document.createElement("div");if(s!=""){v.style.textAlign=s}o.appendChild(v);ajaxart_field_createCellControl(m,x,v,"control",w,q,p)}if(y!=""){jQuery(o).append(jQuery('<div style="height: '+y+'"/>'))}o.ItemData=m;if(t){t.push(o)}return o}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},TitlesAboveFields:function(f,g,d){var c={isObject:true};var b=aa_attach_global_css(aa_text(g,f,"Css",d),null,"titles_above_fields");var a=function(h,k){k.vars._Cntr[0].createNewElement=function(m,r,p){var t=k.vars._Cntr[0];var q=ajaxart_field_getFields(t,"property sheet");var n=aa_text(g,f,"SpaceWidth",d);var v=jQuery('<table class="aa_item aa_titles_above_fields propertysheet" cellpadding="0" cellspacing="0"><tbody><tr class="aa_title_row"/><tr class="aa_fields_row"/></tbody></table>')[0];jQuery(v).addClass(b);var l=jQuery(v).find("tr")[0];var u=jQuery(v).find("tr")[1];var w=aa_bool(g,f,"AddColonForTitles",d);for(var o=0;o<q.length;o++){var s=q[o];aa_buildProperty(t,u,s,m,null,p||k,l,!w);if(o!=q.length-1&&n){jQuery(l).append(jQuery('<td width="'+n+'" />'));jQuery(u).append(jQuery('<td width="'+n+'" />'))}}v.ItemData=m;aa_handle_onload_validations(v);return v}};ajaxart_addScriptParam_js(c,"InitializeContainer",a,d);return[c]},TabControl:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.KeepSelectedTabIn=aa_first(d,c,"KeepSelectedTab",b);h.createNewElement=function(l,p,o){var r=g.vars._Cntr[0];r.Style=aa_first(d,c,"Style",b);var m=aa_api_object(jQuery(r.Style.Html),{cntr:r,data:l,Tabs:[]});aa_defineElemProperties(m,"Fields,addTabs,cntr,Tabs,data,tabContents,tabsParent");m.Fields=ajaxart_field_getFields(r,"tabs",l);m.addTabs=function(x,w,B){var u=this;var C=this.getInnerElement(x);u.tabContents=this.getInnerElement(w);if(!C||!B||!u.tabContents){return}u.tabsParent=C.parentNode;for(var v=0;v<u.Fields.length;v++){var z=u.Fields[v];if(!z.RefreshTabOnSelect){z.RefreshTabOnSelect="refresh"}var t=C.cloneNode(true);t.Field=z;t.tabcontrol=u;if(z.Id){jQuery(t).addClass("tab_"+z.Id)}u.Tabs.push(t);C.parentNode.insertBefore(t,C);var A=aa_api_object(jQuery(t),{Field:z,data:u.data,Title:z.Title,cntr:u.cntr});aa_defineElemProperties(t,"tab_obj,Select,tabcontrol,Field,Contents");t.tab_obj=A;A.Image=aa_init_image_object(z.SectionImage,l,b);var y=function(D){D.Select=function(){this.tab_obj.Select()};A.Select=function(){jBart.trigger(D,"OnBeforeSelect",{});var K=jQuery(D),O=g.vars._Cntr[0],M=D.Field,H=D.tabcontrol;var N=jQuery(H.tabContents).find(">.aa_container")[0];if(N&&!aa_passing_validations(N)){return aa_stop_prop(e)}var F=D.Field.Id,E=[];var G=jQuery(H.tabsParent).find(">.aa_selected_tab")[0];if(G){E=[G.Field];if(O.BeforeChangeTab){O.BeforeChangeTab(E,b)}jQuery(G).removeClass("aa_selected_tab")}K.addClass("aa_selected_tab");if(O.ID!=""&&O.KeepSelectedTabIn&&O.KeepSelectedTabIn.Set){O.KeepSelectedTabIn.Set([{Key:O.ID+"_tab",Value:F}],b)}var J=true;if(G&&G.Field.RefreshTabOnSelect=="no refresh"){J=false}aa_empty(H.tabContents,J);if(M.RefreshTabOnSelect=="no refresh"&&D.Contents){H.tabContents.appendChild(D.Contents)}if(M.DoWhenUserClicksTab){M.DoWhenUserClicksTab([],b)}if(M.RefreshTabOnSelect=="refresh"||!D.Contents){var L=ajaxart_field_calc_field_data(M,l,o||g);var I=ajaxart_runMethod(L,M,"Control",o||g);if(I.length>0){H.tabContents.appendChild(I[0]);D.Contents=I[0];aa_element_attached(I[0])}}if(O.AfterTabLoaded){O.AfterTabLoaded([D.Field],aa_ctx(b,{PreviousTab:E}))}aa_fixTopDialogPosition();jBart.trigger(D,"OnAfterSelect",{})}};y(t);B(A)}u.RefreshTabsVisibility=function(G,F){for(var D=0;D<u.Tabs.length;D++){var E=u.Tabs[D];if(E.Field.ShowTabOnCondition&&!ajaxart.tobool_array(E.Field.ShowTabOnCondition(G,F))){E.style.display="none"}else{jQuery(E).show()}}jBart.trigger(u,"TabsChanged",{})};u.RefreshTabsVisibility(l,o);C.parentNode.removeChild(C)};aa_apply_style_js(m,r.Style);m.jElem.addClass(aa_attach_global_css(r.Style.Css));var q=m.Tabs;if(q.length>0){var s=q[0];if(r.KeepSelectedTabIn&&r.KeepSelectedTabIn.Get){var k=aa_totext(r.KeepSelectedTabIn.Get([r.ID+"_tab"],b));for(var n=0;n<q.length;n++){if(k==q[n].Field.Id){s=q[n]}}}s.Select()}m.jElem.addClass("aa_tabcontrol");m.jElem[0].Cntr=r;m.jElem[0].TabControl=m;if(p){p.push(m.jElem[0])}return m.jElem[0]}};return[a]},AlignRight:function(c,d,b){var a={isObject:true};var f=function(g){g.InitializeContainer=function(h,k){var l=k.vars._Cntr[0];jQuery(l.Ctrl).addClass("aa_rightalign")}};f(a);return[a]},ItemText:function(c,d,b){var a={isObject:true};var f=aa_bool(d,c,"UsingHtmlElement",b);a.InitializeContainer=function(g,h){var l=b.vars._Cntr[0];if(!aa_bool(d,c,"Secondary",b)){ajaxart_addMethod(l,"ItemText",c,"ItemText",b)}var k=function(n,m){var o=n[0];var p=ajaxart.totext_array(ajaxart_runMethod(o.ItemData,l,aa_ctx(m,{_ItemElement:[o]})));jQuery(o).find(">.aa_text").text(p)};if(f){k=function(n,m){var o=n[0];var p=ajaxart_runMethod(o.ItemData,l,"ItemText",aa_ctx(m,{_ItemElement:[o]}));if(f&&p[0]&&p[0].nodeType&&p[0].nodeType==1){p=p[0]}else{p=aa_totext(p)}jQuery(o).find(">.aa_text").html(p)}}aa_register_handler(l,"RefreshItemTextAndImage",k)};a.InitializeElements=function(o,q){var m=b.vars._Cntr[0];var h=aa_text(d,c,"ID",b);var r=aa_text(d,c,"Class",b);if(r){r=" "+r}var g=q.vars._Elems;if(g.length==0){return[]}ajaxart_addMethod(this,"ItemText",c,"ItemText",b);for(var l=0;l<g.length;l++){var k=g[l];var p=this.ItemText(k.ItemData,aa_ctx(q,{_ItemElement:[k]}));if(f&&p[0]&&p[0].nodeType&&p[0].nodeType==1){p=p[0]}else{p=aa_totext(p)}var n=document.createElement("span");n.className="aa_text "+h+r;n.setAttribute("tabindex",1);if(f){jQuery(n).html(p)}else{jQuery(n).text(p)}ajaxart_uiaspects_append(k,n)}};return[a]},Indent:function(f,g,c){var b={isObject:true};var h=aa_attach_global_css(aa_text(g,f,"Css",c),null,"indented");var a=function(k,l){var m=l.vars._Cntr[0];jQuery(m.Ctrl).find(".aa_list").addClass("aa_indented").addClass(h);if(aa_bool(g,f,"Lines",l)){jQuery(m.Ctrl).addClass("aa_lined")}};var d=function(k,l){var q=l.vars._Cntr[0];var n=l.vars._Elems;if(aa_bool(g,f,"Lines",l)){for(var o=0;o<n.length;o++){var p=jQuery(n[o]);var m=p.find(">.hitarea");if(p.nextAll(".aa_item").length==0){p.addClass("last");m.addClass("last")}else{p.removeClass("last");m.removeClass("last")}}}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);ajaxart_addScriptParam_js(b,"InitializeElements",d,c);return[b]},ExpandAllText:function(d,g,b){var h=false;if(b.vars.IsNewItem&&ajaxart.totext_array(b.vars.IsNewItem)=="true"){h=true}ajaxart_saveDetailsAndRefresh(b.vars._InnerItem,b.vars.ItemPage[0].Fields,b,function(){});var f=ajaxart.runNativeHelper(g,d,"Elem",b);var c=jQuery(f).find(">.aa_cell_element");for(var a=0;a<c.length;a++){if(c[a].expandableText){c[a].expandableText.Build(c[a].expandableText.States.control)}}return[]},DisableSelection:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];if(aa_bool(f,prfile,"Disable",c)){jQuery(k.Ctrl).addClass("aa_non_selectable")}else{jQuery(k.Ctrl).removeClass("aa_non_selectable")}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},InheritSelection:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];if(aa_bool(f,d,"Inherit",c)){jQuery(k.Ctrl).addClass("aa_inherit_selection")}else{jQuery(k.Ctrl).removeClass("aa_inherit_selection")}return[]};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},TreeNode:function(c,f,b){var a={isObject:true};var d=function(g,h){var k=h.vars._Cntr[0];k.Ctrl=jQuery('<ul style="list-style: none; padding:0; white-space: normal;" class="aa_container aa_list aa_inherit_selection"/>')[0];k.TreeNode=true;if(h.vars._ParentCntr&&!h.vars._ParentCntr.TreeNode){h.vars._ParentCntr[0].Tree=true}};ajaxart_addScriptParam_js(a,"CreateContainer",d,b);return[a]},NextLevelsByFields:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.Tree=true;k.createNewElement=function(m,r,p){var t=h.vars._Cntr[0];var u=document.createElement("li");u.className="aa_item";u.ItemData=m;ajaxart_add_foucs_place(u);var n=ajaxart.run(m,d,"FieldIds",c);for(var o=0;o<n.length;o++){var l=n[o];var s=aa_fieldById(l,t.Fields);if(s==null){ajaxart.log("Can not find field '"+l+"'");continue}var q=ajaxart_field_calc_field_data(s,m,p||h);ajaxart_field_createCellControl(m,t,u,"control",s,q,p||h)}if(r){r.push(u)}return u};k.next=ajaxart_tree_next;k.prev=ajaxart_tree_prev};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},NextLevels:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.Tree=true;k.createNewElement=function(o,q,m){var l=document.createElement("li");l.className="aa_item";l.ItemData=o;ajaxart_add_foucs_place(l);var p=aa_merge_ctx(c,m||h);var n=ajaxart.runNativeHelper(o,d,"InnerContainer",p);if(n.length>0){l.appendChild(n[0])}if(q){q.push(l)}return l};k.next=ajaxart_tree_next;k.prev=ajaxart_tree_prev};ajaxart_addMethod_js(b,"InitializeContainer",a,c);return[b]},NextLevelsLight:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.Tree=true;jQuery(k.Ctrl).find(".aa_listtop");k.createFlatElement=function(n){var m=document.createElement("li");m.className="aa_item";m.ItemData=n;ajaxart_add_foucs_place(m);return m};k.createNewElement=function(p,s,o,r,n){if(n==null){n=k.Items[0]}if(r==undefined){r=k.DefaultDepth}var m=this.createFlatElement(p);var q=aa_first(p,d,"NextLevel",aa_ctx(c,{_DataItems:[n]}));if(q){this.buildNodesUnderElement(m,q,r,s,o)}if(s){s.push(m)}return m};k.insertNewElement=function(o,n){var m=jQuery(ajaxart_find_list_under_element(n));if(m.length==0){m=document.createElement("ul");m.className="aa_list";n.appendChild(m);m.appendChild(o)}else{m[0].appendChild(o)}};k.buildNodesUnderElement=function(n,r,o,t,q){if(o==0){return}if(r!=null){var s=document.createElement("ul");s.className="aa_list aa_treenode aa_items_listener";s._Items=r;aa_defineElemProperties(s,"RefreshAfterItemsChanged");s.RefreshAfterItemsChanged=function(){aa_remove(this,true);var x=h.vars._Cntr[0];x.buildNodesUnderElement(n,r,o,t,q);var v=aa_ctx(q||h,{_Elems:jQuery(n).find(">.aa_list .aa_item").get()});for(var w=0;w<x.Aspects.length;w++){ajaxart_runMethod([],x.Aspects[w],"InitializeElements",v)}};n.appendChild(s);for(var p=0;p<r.Items.length;p++){var m=r.Items[p];var u=this.createNewElement([m],t,q,o-1,r);s.appendChild(u)}}};k.next=ajaxart_tree_next;k.prev=ajaxart_tree_prev;var l=aa_text(f,d,"ExpandLevel",h);if(!k.DefaultDepth){k.DefaultDepth=1;if(l=="root level"){k.DefaultDepth=1}else{if(l=="first level"){k.DefaultDepth=2}else{if(l=="all"){k.DefaultDepth=7}}}}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},MaxTreeDepth:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];var l=aa_int(f,d,"Depth",c);if(l>0){k.DefaultDepth=l}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},Shortcuts:function(d,f,c){var b={isObject:true};var a=function(g,k){var l=k.vars._Cntr[0];l.ShortcutsEnabled=["true"];var h=ajaxart_shortcut_matchs_event();var m=function(n){return function(w){var s=[32,33,34,35,36,37,38,39,40,63277,63276];for(var u=0;u<s.length;u++){if(w.keyCode==s[u]){ajaxart_stop_event_propogation(w);break}}var r=jQuery((typeof(event)=="undefined")?w.target:(event.tDebug||event.srcElement));if(r.filter(":input,:radio,:checkbox").length>0){return true}if(r.hasClass("aa_item")){var y=r}else{var y=r.parents(".aa_item").slice(0,1)}var t=r.parents(".aa_container").filter(function(){return !this.Cntr.TreeNode});if(t.length==0||t[0].Cntr!=k.vars._Cntr[0]){return true}var x=k.vars._Cntr[0];var p=ajaxart_runMethod([],x,"Operations",x.Context);for(var u=0;u<p.length;u++){var v=p[u];if(v.Shortcut!=null){if(h(v.Shortcut,w)){var o=y[0].ItemData;var q=aa_ctx(k,{_Cntr:[x],ControlElement:[r[0]],_ItemsOfOperation:o,_ElemsOfOperation:[y[0]]});ajaxart_runMethod(o,v,"Action",q)}}}return true}};var l=k.vars._Cntr[0];ajaxart.ui.bindEvent(aa_find_list(l),"keydown",m(l))};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},OnDoubleClick:function(d,f,c){var b={isObject:true};var a=function(g,h){var m=h.vars._Cntr[0];var l=function(p){if(p.length==0){return}var o=p[0].ItemData;var q=aa_ctx(h,{_ItemsOfOperation:o,_ElemsOfOperation:p.get()});ajaxart.run(o,d,"Action",q)};var n=function(q){if(q.keyCode==13&&!q.ctrlKey&&!q.altKey&&!q.shiftKey){var p=h.vars._Cntr[0];var o=jQuery(p.Ctrl).find(".aa_selected_item").slice(0,1);if(o.length>0){l(o)}}};var k=function(q){var p=jQuery((typeof(event)=="undefined")?q.target:(event.tDebug||event.srcElement));var o=jQuery([]);if(p.hasClass("aa_item")){o=p}else{if(p.parent().hasClass("aa_item")){o=p.parent()}}if(o.length>0){l(o)}};ajaxart.ui.bindEvent(m.Ctrl,"keyup",n);ajaxart.ui.bindEvent(m.Ctrl,"dblclick",k)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},ExpandCollapse:function(g,h,d){var k=aa_attach_global_css(aa_text(h,g,"HitAreaCss",d),null,"hitarea");var c={isObject:true};var b=aa_attach_global_css(aa_first(h,g,"Css",d).Css);var a=function(m,o){var q=o.vars._Cntr[0];q.IgnoreItemSelectionCssClass=true;q.hitAreaCssClass=k;q.CollapseElem=function(v,w){if(!v){return}var u=v.find(">.aa_list,>.aa_container");if(u.length==0){return}if(v.find(">.hitarea").length==0&&v.find(">.aa_list>.aa_item").length>0){var r=document.createElement("div");r.className="hitarea expandable "+k;v[0].insertBefore(r,v[0].firstChild)}if(w==null){v[0].collapsed=!v[0].collapsed;w=v[0].collapsed}else{v[0].collapsed=w}for(var t=0;t<u.length;t++){var s=u[t];var r=v.find(">.hitarea").slice(0,1);if(v[0].collapsed&&jQuery(s).find(".aa_item").length>0){s.style.display="none";s.display="none";r.addClass("expandable");r.removeClass("collapsable")}else{s.style.display="block";s.display="block";r.addClass("collapsable");r.removeClass("expandable")}}aa_invoke_cntr_handlers(q,q.RefreshItemTextAndImage,v,o)};q.CollapseSiblings=function(r,s){var u=jQuery(r);var t=u.parent().find(".aa_item").filter(function(){return u[0]!=this});t.each(function(){q.CollapseElem(jQuery(this),true)})};q.ToggleByKeyboard=function(u){if(u.keyCode==39||u.keyCode==37){var t=o.vars._Cntr[0];var r=jQuery(t.Ctrl).find(".aa_selected_item").slice(0,1);if(r.length==0){return true}var s=(u.keyCode==39);if(r.parents(".right2left").length>0){s=!s}if(s&&r[0].collapsed||(!s&&!r[0].collapsed)){t.CollapseElem(r)}return false}return true};var p=function(u){var t=o.vars._Cntr[0];var s=jQuery((typeof(event)=="undefined")?u.target:(event.tDebug||event.srcElement));if(!(s.hasClass("hitarea")||s.hasClass("aa_item_image")||aa_bool(h,g,"TextInHitArea",d))){return true}if(s.parents(".aa_container")[0].Cntr!=t){return true}var r=s.parents(".aa_item").slice(0,1);t.CollapseElem(r);return false};var l=aa_text(h,g,"CollapseLevel",d);var n=function(s,r){var u=o.vars._Cntr[0];var t=jQuery(ajaxart_container_elems(u));t.each(function(){u.CollapseElem(jQuery(this),true)});if(l=="first"){var v=function(){var w=jQuery(this).parents(".aa_item").slice(0,1).parents(".aa_container");return w.length==0||w[0].Cntr!=u};t.filter(v).each(function(){u.CollapseElem(jQuery(this),false)})}};if(l!="expand all"){o.vars._Cntr[0].RegisterForPostAction(o._This);ajaxart_addScriptParam_js(o._This,"PostAction",n,o)}ajaxart.ui.bindEvent(aa_find_list(q),"keyup",q.ToggleByKeyboard);ajaxart.ui.bindEvent(q.Ctrl,"click",p)};var f=function(l,m){var r=m.vars._Cntr[0];var o=m.vars._Elems;for(var p=0;p<o.length;p++){var q=o[p];jQuery(q).addClass(b);if(!ajaxart_isLeaf(q)){jQuery(q).addClass("non_leaf");q.collapsed=false;var n=document.createElement("div");n.className="hitarea collapsable "+k;q.insertBefore(n,q.firstChild)}}};ajaxart_addScriptParam_js(c,"InitializeContainer",a,d);ajaxart_addScriptParam_js(c,"InitializeElements",f,d);return[c]},ItemImage:function(d,g,b){var a={isObject:true};var f=aa_attach_global_css(aa_text(g,d,"Css",b),b,"item_image");a.InitializeContainer=function(h,k){var l=k.vars._Cntr[0];ajaxart_addMethod(l,"ItemImage",d,"ItemImage",b)};var c=function(t,u){if(aa_bool(g,d,"CapabilitiesOnly")){return}var q=u.vars._Cntr[0];var h=u.vars._Elems;var p=ajaxart.compile(d,"ItemImage",u);var r=aa_text(g,d,"ImageForLeafs",u);for(var n=0;n<h.length;n++){var l=h[n];var o=aa_ctx(u,{_ItemElement:[l]});var m="";var k=ajaxart_isLeaf(l);if(r=="none"&&k){continue}if(r!=""&&k){m=r}else{if(p=="same"){m=ajaxart.totext_array(l.ItemData)}else{if(p==null){m=aa_text(l.ItemData,d,"ItemImage",o)}else{m=ajaxart.totext_array(p(l.ItemData,o))}}}if(m==""){continue}var s=document.createElement("img");s.className="aa_item_image "+f;s.setAttribute("src",m);s.setAttribute("height","16px");s.style.maxWidth="26px";ajaxart_uiaspects_append(l,s)}};ajaxart_addScriptParam_js(a,"InitializeElements",c,b);return[a]},CheckBox:function(f,g,c){var b={isObject:true};var a=function(k,l){var n=l.vars._Cntr[0];n.ToogleCheckbox=function(q,r){var t=q.vars._Cntr[0];var s=r[0].ItemData;var p=t.Selector;var u=aa_ctx(q,{ControlElement:[t.Ctrl],_Item:s,_Elem:r});if(p!=null){ajaxart.run(s,p.Toggle.script,"",p.Toggle.context)}ajaxart.run(s,f,"OnSelect",u)};var o=function(s){var r=l.vars._Cntr[0];var q=jQuery((typeof(event)=="undefined")?s.target:(event.tDebug||event.srcElement));if(!q.hasClass("aacheckbox_value")){return}var p=q.parents(".aa_item").slice(0,1);if(aa_bool(g,f,"SelectOnCheck",c)){ajaxart_uiaspects_select(p,jQuery(),"mouse",l)}r.ToogleCheckbox(l,p);if(ajaxart.controlOfFocus!=null){jQuery(ajaxart.controlOfFocus).focus()}return true};var m=function(u){var t=l.vars._Cntr[0];var q=aa_bool(g,f,"SelectWithEnter",l);if(u.keyCode==32||(q&&u.keyCode==13)){var r=jQuery((typeof(event)=="undefined")?u.target:(event.tDebug||event.srcElement));if(r.hasClass("aa_item")){var p=r}else{var p=r.parents(".aa_item").slice(0,1)}var s=p.find(">.aacheckbox_value");if(s.length>0){aa_checked(s[0],!s[0].checked);t.ToogleCheckbox(l,p)}return false}return true};ajaxart.ui.bindEvent(n.Ctrl,"keyup",m);ajaxart.ui.bindEvent(n.Ctrl,"click",o);var h=aa_first(g,f,"Selector",l);n.Selector=h};var d=function(q,s){var p=s.vars._Cntr[0];var h=s.vars._Elems;var l=aa_first(g,f,"Selector",s);var r=aa_bool(g,f,"IncludeIntermediateNodes",s);for(var m=0;m<h.length;m++){var k=h[m];var n=ajaxart_isLeaf(k)||r;if(n&&l!=null){var o=document.createElement("input");o.className="aacheckbox_value";o.setAttribute("type","checkbox");if(l.IsSelected!=undefined&&aa_bool(k.ItemData,l.IsSelected.script,"",l.IsSelected.context)){aa_checked(o,true)}ajaxart_uiaspects_append(k,o)}}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);ajaxart_addScriptParam_js(b,"InitializeElements",d,c);return[b]},ContextMenu:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];var m=function(q){q=q||event;if(q.button!=2){return true}var p=h.vars._Cntr[0];var o=jQuery((typeof(event)=="undefined")?q.target:(event.tDebug||event.srcElement));if(!o.hasClass("aa_item")){o=o.parents(".aa_item").slice(0,1)}if(o.length==0){return true}if(o.parents(".aa_container")[0].Cntr!=p){return true}var n=o[0].ItemData;var r=aa_ctx(p.Context,{_CurrentFocus:[o.find(">.aa_text")[0]],_ItemsOfOperation:n,_ElemsOfOperation:[o[0]],MousePos:[{isObject:true,pageX:q.pageX||q.clientX,pageY:q.pageY||q.clientY}],_RefreshAfterOperation:aa_text(f,d,"RefreshAfterOperation",h)});ajaxart.runNativeHelper(n,d,"ContextMenuImp",r);return false};var l=ajaxart_find_aa_list(k);jQuery(l).bind("contextmenu",function(){return false});ajaxart.ui.bindEvent(l,"mouseup",m)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},HeaderFooter:function(c,d,b){var a={isObject:true};var f=function(g){g.HeaderFooterID=aa_text(d,c,"Identifier",b);g.ID="headerfooter_"+aa_text(d,c,"Identifier",b);g.refresh=function(n,u){var r=u.vars._Cntr[0];var q=r.Items[0].Items||[];var m=aa_merge_ctx(b,u,{HeaderFooterCntr:r,TotalItemsCount:[q.length],FilteredItemsCount:[r.FilteredWrappers?r.FilteredWrappers.length:q.length]});m.vars.HeaderFooterCntr=u.vars._Cntr;m.vars.DataHolderCntr=u.vars.DataHolderCntr||u.vars._Cntr;m.vars.Items=aa_items(r);var l=g.HeaderFooterID;var s=aa_text(d,c,"Location",m);var h=ajaxart.run(d,c,"Control",m);var t="HeaderFooter_"+l;var o=jQuery(aa_find_header(r));if(o.length==0){return}if(aa_text(d,c,"RefreshStrategy",b)=="none"&&o.find(">."+t).length>0){return}if(h.length>0){jQuery(h[0]).addClass(t);if(s.indexOf("header")!=-1){var k=o.find(">."+t);if(k.length>0){k.replaceWith(h[0])}else{var p=o;if(p.length>0){p[0].appendChild(h[0])}}}if(s.indexOf("footer")!=-1){var h=ajaxart.run(d,c,"Control",m);jQuery(h[0]).addClass("HeaderFooter_"+l);var k=jQuery(aa_find_footer(r)).find(">."+t);if(k.length>0){k.replaceWith(h[0])}else{var p=jQuery(r.Ctrl).find(">.aa_container_footer");if(p.length>0){p[0].appendChild(h[0])}}}}return[]};g.PreAction=g.PostAction=function(h,k){return g.refresh(h,k)};g.InitializeContainer=function(h,l){var n=l.vars._Cntr[0];var k=aa_int(d,c,"Phase",b);if(aa_bool(d,c,"RunAfterPresentation",b)){n.RegisterForPostAction(g,k)}else{n.RegisterForPreAction(g,k)}if(aa_text(d,c,"RefreshStrategy",b)=="item selection"){function m(p,o){var q=aa_ctx(o,{_ItemsOfOperation:p.ItemData,_ElemsOfOperation:[p]});g.refresh(d,q)}aa_register_handler(n,"Selection",m)}if(aa_text(d,c,"RefreshStrategy",b)!="none"){aa_register_handler(n,"ContainerChange",g.refresh)}return[]}};f(a);return[a]},SeparatorControl:function(c,d,b){var a={isObject:true};aa_set_initialize_container(a,function(g,f,h){h.SeparatorControl=function(k,l){return ajaxart.run(k,c,"Control",aa_merge_ctx(b,l))}});return[a]},ItemSelection:function(g,h,f){var c={isObject:true};var a=function(m,q,k,s,t){if(m.length>0&&(q.length==0||m[0]!=q[0])){var o=m.parents(".aa_container")[0].Cntr;var n=ajaxart_topCntr(m);var r=ajaxart_find_aa_list(n);jQuery(r).find(".aa_selected_item").removeClass("aa_selected_item "+n.ItemSelectionCssClass);jQuery(r).find(".aa_selected_itemtext").removeClass("aa_selected_itemtext");m.addClass("aa_selected_item ");if(!n.IgnoreItemSelectionCssClass){m.addClass(n.ItemSelectionCssClass)}m.find(">.aa_text").addClass("aa_selected_itemtext");if(o.SoftSelector){var l=o.ItemId(m[0].ItemData,m[0]);ajaxart.runScriptParam([l],o.SoftSelector.WriteValue,s)}var p=function(){var u=s.vars._Cntr[0];if(m.parents(".aa_container")[0]){var v=m.parents(".aa_container")[0].Cntr}else{var v=u}var x=aa_ctx(s,{_Cntr:[v],_SelectionMethod:[k],_Item:m[0].ItemData,_SelectedItem:m[0].ItemData,_Elem:[m[0]],ControlElement:[m[0]]});ajaxart.run(m[0].ItemData,g,"OnSelect",x);aa_invoke_cntr_handlers(v,v.Selection,m[0],x);jBart.trigger(v,"selection",{selected:m[0],context:x,method:k});if(u!=v){var x=aa_ctx(s,{_InnerCntr:[v],_SelectionMethod:[k],_Item:m[0].ItemData,_SelectedItem:m[0].ItemData,_Elem:[m[0]],ControlElement:[m[0]]});aa_invoke_cntr_handlers(u,u.Selection,m[0],x)}var w=m;if(k=="keyboard"||(k=="mouse"&&u.PicklistPopup)){if(ajaxart.controlOfFocus){ajaxart.controlOfFocus.IgnoreBlur=true}w.focus();if(ajaxart.controlOfFocus){jQuery(ajaxart.controlOfFocus).focus()}}else{if(k=="mouse"||t){w.focus()}}return true};if(k=="keyboard"){aa_delayedRun(p,s,300,0)}else{p()}}};var b=function(s,t){var r=t.vars._Cntr[0];r.Select=a;r.DAndDOwner="";r.ItemSelectionCssClass=aa_attach_global_css(aa_text(h,g,"Css",f),r);if(aa_paramExists(g,"FilterOnFirstSelected")){r.FilterOnFirstSelected=function(u,v){return aa_frombool(aa_bool(u,g,"FilterOnFirstSelected",aa_merge_ctx(f,v)))}}var l=aa_text(h,g,"AutoSelectFirstItem",t);var q=function(v,u){var z=t.vars._Cntr[0];var w=jQuery(ajaxart_container_elems(z));if(ajaxart_itemlist_getSelectedItems(z).length>0){return}if(z.SoftSelector){return[]}if(z.FilterOnFirstSelected){for(var x=0;x<w.length;x++){if(aa_tobool(z.FilterOnFirstSelected(w[x].ItemData,u))){ajaxart_uiaspects_select(jQuery(w[x]),jQuery([]),"auto",u);return}}}if(aa_bool(h,g,"KeyboardSupport",t)){var y=jQuery(aa_find_header(z)).find(">.aa_filters");if(y.length>0){ajaxart.ui.bindEvent(y[0],"keydown",p)}}if(w.length>0){if(l=="true"||l=="select and focus"){ajaxart_uiaspects_select(w.slice(0,1),jQuery([]),"auto",u)}if(l=="select and focus"){setTimeout(function(){w.slice(0,1).focus()},100)}}return[]};t.vars._Cntr[0].RegisterForPostAction(t._This);ajaxart_addScriptParam_js(t._This,"PostAction",q,t);var p=function(A){A=A||event;var w=(typeof(event)=="undefined")?A.target:(event.tDebug||event.srcElement);var C=w.tagName.toLowerCase()=="input";var B=t.vars._Cntr[0];if(aa_bool(h,g,"IncludeSubContainers",f)){var y=jQuery(B.Ctrl).find(".aa_list").slice(0,1).find(".aa_item").filter(aa_visible)}else{var y=jQuery(ajaxart_container_elems(B)).filter(aa_visible)}var z=y.filter(".aa_selected_item").slice(0,1);var x=[];if(A.ctrlKey){return true}if(A.keyCode==40){if(z.length==0){x=jQuery(ajaxart_container_elems(B)[0])}else{x=B.next(z,B)}while(x.length>0&&x[0].hidden){x=B.next(x,B)}}else{if(A.keyCode==38){x=B.prev(z,B);while(x.length>0&&x[0].hidden){x=B.prev(x,B)}}else{if(A.keyCode==36&&!C){x=y.filter(".aa_item").filter(aa_visible).slice(0,1);while(x.length>0&&x[0].hidden){x=B.next(x,B)}}else{if(A.keyCode==35&&!C){x=y.filter(".aa_item").filter(aa_visible).slice(-1);while(x.length>0&&x[0].hidden){x=B.prev(x,B)}}else{if(A.keyCode==34||A.keyCode==63277){var u=z;x=z;var v=0;while(B.next(x,B).length>0&&(x[0].hidden||v<3)){if(!x[0].hidden){v++;u=x}x=B.next(x,B)}if(x.length==0){x=u}}else{if(A.keyCode==33||A.keyCode==63276){var u=z;x=z;var v=0;while(B.prev(x,B).length>0&&(x[0].hidden||v<3)){if(!x[0].hidden){v++;u=x}x=B.prev(x,B)}if(x.length==0){x=u}}else{return true}}}}}}if(x.length>0&&(z.length==0||x[0]!=z[0])){ajaxart_uiaspects_select(x,z,"keyboard",t);return aa_stop_prop(A)}};var m=function(B){var z=jQuery((typeof(event)=="undefined")?B.target:(event.tDebug||event.srcElement));if(!aa_intest&&(z.parents("body").length==0||z.filter(aa_visible).length==0||z.hasClass("aa_not_selectable")||z.parents(".aa_not_selectable").length>0)){return}if(z.hasClass("hitarea")){return true}var A=t.vars._Cntr[0];if(A.DAndDOwner!=""){return true}if(!A.PicklistPopup){ajaxart.controlOfFocus=null}if(B.button==2){return true}var v=jQuery();if(z.hasClass("aa_item")){v=z}else{var x=z.parents(".aa_item").get();for(var w=0;w<x.length;w++){var y=x[w];var u=jQuery(y).parents(".aa_container")[0].Cntr;if(u==A){v=jQuery(y);break}}}if(v.length>0){ajaxart_uiaspects_select(v,jQuery(),"mouse",t)}return true};var n=ajaxart_find_aa_list(r);if(!r.SelectionEnabled){var o=aa_text(h,g,"MouseSupport",f);if(o=="mouse click"){ajaxart.ui.bindEvent(n,"click",m)}else{if(o!="none"){ajaxart.ui.bindEvent(n,"mousedown",m);ajaxart.ui.bindEvent(n,"touchstart",m)}}r.SelectionKeydown=p;if(aa_bool(h,g,"KeyboardSupport",t)){ajaxart.ui.bindEvent(n,"keydown",p)}}r.SelectionEnabled=true;var k=aa_first(h,g,"Selector",t);if(k!=null){r.SoftSelector=k}};var d=function(k){};ajaxart_addScriptParam_js(c,"InitializeContainer",b,f);return[c]},BindSelectedItem:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.DefaultIdentifier=aa_text(d,c,"SelectedIdentifier",b);if(!h.DefaultIdentifier){return}h.FilterOnFirstSelected=function(k,l){var m=aa_text(k,c,"ItemIdentifier",b);if(m==h.DefaultIdentifier){return["true"]}}};return[a]},TreeSelectedInUrl:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var k=g.vars._Cntr[0];var h=function(o,m){var p=m.vars._Cntr[0];if(aa_totext(p.ID)==""){return}var n="?"+aa_totext(p.ID)+"_path=";var q="";var l=jQuery(o);while(!l.hasClass("aa_container")){if(l.hasClass("aa_item")){var r=l.find(".aa_text")[0].innerHTML;r=r.replace(new RegExp(" \\([0-9]*\\)","g"),"");if(q!=""){q="/"+q}q=r+q}l=l.parent()}n+=q;aa_urlChange(b,n)};aa_register_handler(k,"Selection",h);k.RegisterForPostAction(this)};a.PostAction=function(p,r){var o=r.vars._Cntr[0];if(aa_totext(o.ID)==""){return}var s=aa_urlAttribute(b,aa_totext(o.ID)+"_path");if(s==""){return}var h=s.split("/");var n=jQuery(aa_find_list(o));var q=null;for(var k=0;k<h.length;k++){var f=h[k];var m=n.find(">.aa_item>.aa_text");q=null;for(var g=0;g<m.length;g++){var l=m[g].innerHTML;l=l.replace(new RegExp(" \\([0-9]*\\)","g"),"");if(l==f){q=m[g].parentNode;o.CollapseElem(jQuery(q),false);break}}if(!q){return}n=jQuery(q).find(">.aa_list")}if(!q){return}o.Select(jQuery(q),jQuery([]),"auto",r,true)};return[a]},SynchSelection:function(d,f,c){var b={isObject:true};var a=function(h,k){var l=k.vars._Cntr[0];var g=aa_first(f,d,"Selector",k);if(g!=null){l.SoftSelector=g}if(ajaxart.fieldscript(d,"ItemID",true)!=null){l.ItemId=function(n,m){var o=aa_ctx(c,{ItemElement:[m]});return aa_text(n,d,"ItemID",o)}}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},SynchSelectionWithItemDetails:function(d,f,c){var b={isObject:true};var a=function(g,h){var l=h.vars._Cntr[0];var k=function(n,m){var o=m.vars._Cntr[0];var p=aa_ctx(m,{_InnerItem:n.ItemData,_ElemsOfOperation:[n]});ajaxart.runScriptParam(n.ItemData,o.OpenItemDetails,p)};aa_register_handler(l,"Selection",k)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},DoOnSelection:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var k=g.vars._Cntr[0];k.SelectionChangeOnTimer=aa_bool(d,c,"DoOnNextTimer",b);var h=function(m,l){var n=g.vars._Cntr[0];if(n.SelectionChangeOnTimer){setTimeout(function(){ajaxart.run(m.ItemData,c,"Action",aa_merge_ctx(b,l))},200);return}ajaxart.run(m.ItemData,c,"Action",aa_merge_ctx(b,l))};aa_register_handler(k,"Selection",h)};return[a]},SynchSelectionWithAnotherPresentation:function(d,f,c){var b={isObject:true};var a=function(g,h){var l=h.vars._Cntr[0];var k=function(o,m){var p=m.vars._Cntr[0];var q=aa_ctx(m,{_InnerItem:o.ItemData,_ElemsOfOperation:[o]});var n=jquery(".aa_container.fld_"+aa_text(f,d,"FieldID",c))[0];if(n){var p=n.Cntr;if(p&&p.Select){p.Select(jQuery(item),jQuery([]),"auto",m,true)}}ajaxart.runScriptParam(o.ItemData,p.OpenItemDetails,q)};aa_register_handler(l,"Selection",k)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},HighlightSelectionOnHover:function(d,f,c){var b={isObject:true};var a=function(g,h){var m=function(s){var r=h.vars._Cntr[0];var q=(typeof(event)=="undefined")?s.target:(event.tDebug||event.srcElement);var o=jQuery([]),n=null;for(;q;q=q.parentNode){if(jQuery(q).hasClass("aa_item")){o=jQuery(q)}if(q.Cntr==r){n=q.Cntr;break}}if(o.length>0&&n&&!o.hasClass("aa_selected_item")){var p=ajaxart_find_aa_list(n);jQuery(p).find(".aa_selected_item").removeClass("aa_selected_item");jQuery(p).find(".aa_selected_itemtext").removeClass("aa_selected_itemtext");o.addClass("aa_selected_item");if(!n.IgnoreItemSelectionCssClass){o.addClass(n.ItemSelectionCssClass)}o.find(">.aa_text").addClass("aa_selected_itemtext");jBart.trigger(n,"selection",{selected:o[0],context:h,method:"hover"});ajaxart.run(o[0].ItemData,d,"Action",aa_ctx(h,{_ItemsOfOperation:o[0].ItemData,_ElemsOfOperation:o,method:["hover"]}))}return true};var l=h.vars._Cntr[0];var k=ajaxart_find_aa_list(l);if(!l.HighlightSelectionOnHover){ajaxart.ui.bindEvent(k,"mouseover",m);l.HighlightSelectionOnHover=true}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},CellPresentation:function(d,f,c){var b={isObject:true};var a=function(g,h){var k=h.vars._Cntr[0];k.CellPresentation=aa_text(f,d,"Content",h)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},SaveDetailsAndRefersh:function(b,d,a){var c=ajaxart.run(d,b,"Item",a);ajaxart_saveDetailsAndRefresh(c,a.vars.ItemPage[0].Fields,a);return[]},ItemDetails:function(c,d,b){var a={isObject:true,ItemDetails:true};var f=function(g){g.InitializeContainer=function(h,k){var m=k.vars._Cntr[0];var l=aa_merge_ctx(b,k);if(aa_paramExists(c,"ItemPage")){m.ItemPage=aa_first(d,c,"ItemPage",l)}else{if(!m.ItemPage){m.ItemPage=ajaxart.runNativeHelper(d,c,"DefaultItemPage",l)[0]}}if(aa_paramExists(c,"OpenIn")){m.OpenIn=function(o,n){return ajaxart.run(o,c,"OpenIn",aa_merge_ctx(b,n))}}else{if(!m.OpenIn){m.OpenIn=function(o,n){return ajaxart.runNativeHelper(o,c,"DefaultOpenIn",aa_merge_ctx(b,n))}}}if(aa_paramExists(c,"NewItemPage")){m.NewItemPage=aa_first(d,c,"NewItemPage",l)}else{if(!m.NewItemPage){m.NewItemPage=m.ItemPage}}if(aa_paramExists(c,"OpenNewIn")){m.OpenNewIn=function(o,n){return ajaxart.run(o,c,"OpenNewIn",aa_merge_ctx(b,n))}}else{if(!m.OpenNewIn){m.OpenNewIn=function(o,n){return ajaxart.runNativeHelper(o,c,"DefaultOpenIn",aa_merge_ctx(b,n))}}}if(aa_paramExists(c,"Transactional",true)){m.EditTransactional=aa_bool(d,c,"Transactional",l)}else{if(m.EditTransactional==null){m.EditTransactional=["true"]}}m.ItemDetailsControl=function(s,n){var q=n.vars._Cntr[0];var o={isObject:true,DataItems:n.vars._InnerItems,ReadOnly:q.ReadOnly};var t=aa_ctx(n,{_PageParams:[o]});var p=aa_tobool(n.vars.IsNewItem)?q.NewItemPage:q.ItemPage;var r=ajaxart_runMethod([],p,"Control",t);if(r.length==0){r=[document.createElement("div")]}jQuery(r[0]).addClass("DetailsControl");r[0].Context=n;r[0].ItemData=n.vars._InnerItem;return r};m.OpenItemDetails=function(u,w){var v=u;var n=w.vars._Cntr[0].Items[0];var p=aa_ctx(w,{_Transactional:aa_frombool(m.EditTransactional)});if(aa_tobool(w.vars.IsNewItem)){var s=p.vars._InnerItems=ajaxart_runMethod(u,n,"SubsetForNewItem",p);var q=aa_getXmlInfo(s[0].Items[0],b);if(w.vars._SaveActions&&w.vars._SaveActions[0].BeforeEdit){w.vars._SaveActions[0].BeforeEdit([s[0].Items[0]],w)}}else{var s=p.vars._InnerItems=ajaxart_runMethod(u,n,"Subset",p);if(s.length==0){s=p.vars._InnerItems=[{isObject:true,Items:p.vars._InnerItem}];s[0].Save=function(z,x){var y=aa_getXmlInfo(this.Items[0],b);if(y.Save){return y.Save(z,x)}}}var q=aa_getXmlInfo(s[0].Items[0],b);if(q&&q.PrepareForEdit&&!jQuery(w.vars._ElemsOfOperation).hasClass("aa_details_open")){q.PrepareForEdit([],w)}}if(s.length==0){return[]}var r=function(y,x){return function(){var B=w.vars._Cntr[0];if(B.BeforeOpenDetails){B.BeforeOpenDetails(y.Items,w)}var E=aa_ctx(w,{_InnerItems:[y],_Transactional:aa_frombool(B.EditTransactional),OriginalItems:x});var z={isObject:true};var A=aa_tobool(w.vars.IsNewItem)?B.NewItemPage:B.ItemPage;var D=aa_getXmlInfo(y.Items[0],b);aa_init_itemdetails_object(z,x,D,y,A,w);E.vars._ItemDetailsObject=[z];E.vars.DetailsControl=B.ItemDetailsControl([],E);var C=aa_html_findclass(E.vars.DetailsControl,"aa_container");if(C.length>0){C[0].Cntr.IsNewItem=aa_tobool(w.vars.IsNewItem)}var A=aa_tobool(w.vars.IsNewItem)?B.NewItemPage:B.ItemPage;E.vars.ItemPage=[A];ajaxart.run(y.Items,c,"ChangeItemBeforeOpen",b);if(aa_tobool(w.vars.IsNewItem)){return B.OpenNewIn(y.Items,E)}else{return B.OpenIn(y.Items,E)}}};if(aa_bool(u,c,"KeepOpenItemInUrl",b)&&m.ID!=""){var o=aa_text(u,c,"ItemIdentifier",b);aa_urlChange(b,"?"+m.ID+"_open="+o+";")}var t=function(y,x){aa_runMethodAsync(y[0],y[0].Prepare,u,w,function(){if(aa_bool(u,c,"FullLoadItem",b)&&x&&x.LoadFullItem){aa_runMethodAsync(x,x.LoadFullItem,u,w,r(y[0],u))}else{r(y[0],u)()}})};t(s,q);return["true"]};m.Transactional=aa_bool(d,c,"Transactional",b);ajaxart_addMethod(m,"ItemIdentifier",c,"ItemIdentifier",b);if(aa_bool(d,c,"KeepOpenItemInUrl",b)&&m.ID!=""&&!m.OpenDetailsFromUrlRegistered){m.OpenDetailsFromUrlRegistered=true;m.RegisterForPostAction(g);g.PostAction=function(t,n){var r=k.vars._Cntr[0];var s=aa_urlAttribute(n,r.ID+"_open");if(s==""){return}var o=r.Items[0].Items;for(var p=0;p<o.length;p++){var q=[o[p]];if(aa_totext(r.ItemIdentifier(q,b))==s){r.OpenItemDetails(q,aa_ctx(n,{IsNewItem:[],_OperationID:["OpenItemDetails"],_InnerItem:q}))}}}}}};f(a);return[a]},OpenPageFromDetails:function(c,g,a){if(!a.vars._ItemsOfOperation||a.vars._ItemsOfOperation.length==0){return}var d=a.vars._ItemsOfOperation[0];var f=aa_first(g,c,"Page",a);var b=ajaxart.run([d],c,"PageParams",a);var k=f.Control([d],aa_ctx(a,{_PageParams:[b]}));var h={isObject:true};ajaxart.run([d],c,"OpenIn",aa_ctx(a,{_ItemDetailsObject:[h],DetailsControl:k}))},AutoOpenItemDetails:function(d,f,c){var b={isObject:true};var a=function(g,h){var l=h.vars._Cntr[0];l.BeforeOpenDetails=function(o,n){return ajaxart.run(o,d,"BeforeOpenDetails",c)};var k=function(o,n){ajaxart.run(f,d,"OnBackToList",c);var p=n.vars._Cntr[0];aa_invoke_cntr_handlers(p,p.ContainerChange,[],n);return[]};var m=function(o,n){var p=h.vars._Cntr[0];ajaxart_addScriptParam_js(p,"OnBackToList",k,h);if(aa_bool(f,d,"IsDetailsShown",c)){var o=ajaxart.run(f,d,"DetailToShow",h);if(o.length==0){return[]}var q=aa_ctx(h,{_InnerItem:o});ajaxart_runMethod(f,p,"OpenItemDetails",q)}};h.vars._Cntr[0].RegisterForPostAction(h._This);ajaxart_addScriptParam_js(h._This,"PostAction",m,h)};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},BottomLocation:function(c,f,b){var a={isObject:true};var d=function(g,h){var k=jQuery('<div class="aa_bottom"/>');k.addClass(aa_text(f,c,"Css",b));var l=h.vars._Cntr[0];var m=jQuery(l.Ctrl).find(">.aa_container_footer");if(m.length>0&&m[0].parentNode!=null){m[0].parentNode.insertBefore(k[0],m[0])}return[]};ajaxart_addScriptParam_js(a,"CreateContainer",d,b);return[a]},RightLocation:function(d,g,c){var b={isObject:true};var a=aa_attach_global_css(aa_text(g,d,"Css",c),null,"right_location");var f=function(h,k){var p=k.vars._Cntr[0];var n=jQuery('<table cellpadding="0" cellspacing="0"><tbody><tr><td class="aa_left"/><td class="aa_horiz_resizer"/><td class="aa_right"/></td></tr></tbody></table>');n.addClass(a);if(aa_bool(g,d,"LeftExpandCollpase",c)){var m=document.createElement("td");var l=document.createElement("div");l.className="aa_left_expcol collapse";l.ShowSubject=n.find(".aa_left")[0];l.onmouseup=function(){var s=this.ShowSubject;var r=k.vars._Cntr[0];if(jQuery(this).hasClass("collapse")){jQuery(this).removeClass("collapse").addClass("expand");s.display=s.style.display="none";ajaxart_setUiPref(r.ID[0],"ExpandCollapseState","collpased",c)}else{jQuery(this).addClass("collapse").removeClass("expand");s.display=s.style.display="";ajaxart_setUiPref(r.ID[0],"ExpandCollapseState","expanded",c)}};n.find(".aa_left").append(jQuery(l));m.appendChild(l);jQuery(l).insertAfter(n.find(".aa_left"));if(ajaxart_getUiPref(p.ID[0],"ExpandCollapseState",c)=="collpased"){jQuery(l).removeClass("collapse").addClass("expand");l.ShowSubject.display=l.ShowSubject.style.display="none"}}aa_init_horiz_resizer(n.find(".aa_left")[0],n.find(".aa_horiz_resizer")[0]);var q=n.find(".aa_left");var o=jQuery(p.Ctrl).find(">*");q.append(o);jQuery(p.Ctrl).append(n);return[]};ajaxart_addScriptParam_js(b,"CreateContainer",f,c);return[b]},SelectedElement:function(c,f,a){var d=a.vars._Cntr[0];var b=jQuery(d.Ctrl).find(".aa_selected_item").filter(aa_visible);if(b.length>0){return[b[0]]}return[]},SelectedItem:function(b,d,a){var c=ajaxart_uiaspects_container(a);return ajaxart_itemlist_getSelectedItems(c)},DetailsReplacingAll:function(d,g,a){var f=a.vars._Cntr[0];var h=a.vars.DetailsControl;if(h==null||h.length==0){return[]}f.ReplacingControl=document.createElement("div");f.ReplacingControl.className="aa_replacingall";var c=a.vars._ItemDetailsObject[0];c.HideDetails=function(n,k){var l=a.vars._Cntr[0];var m=l.Ctrl.DetailsControl;aa_replaceElement(l.Ctrl,l.OriginalCtrl,true,aa_first(g,d,"TransitionBack",a));l.Ctrl=l.OriginalCtrl};var b=ajaxart.runNativeHelper(g,d,"TopControl",a);jQuery(b).addClass("aa_replacingall_top");if(b.length>0){f.ReplacingControl.appendChild(b[0])}f.ReplacingControl.appendChild(h[0]);f.ReplacingControl.DetailsControl=h[0];f.OriginalCtrl=f.Ctrl;aa_replaceElement(f.Ctrl,f.ReplacingControl,true,aa_first(g,d,"Transition",a));f.Ctrl=f.ReplacingControl;if(f.AfterDetailsReplacingAll){f.AfterDetailsReplacingAll()}return[]},DetailsInFixedLocation:function(c,h,b){var f=function(o,p){return function(q,s){var r=o[0].firstChild;o.empty();o[0].appendChild(p.DetailsControl);if(r){aa_element_detached(r)}aa_element_attached(p.DetailsControl);return[]}};var k=function(p,o){return jQuery(o).find(".aa_"+p).filter(function(){return jQuery(this).parents(".aa_container")[0]==o})};var n=aa_text(h,c,"Location",b);var m=ajaxart_uiaspects_container(b);m.DetailsControl=b.vars.DetailsControl[0];cntrs=[m.Ctrl].concat(jQuery(m.Ctrl).parents(".aa_container").get());var l=[];for(var g=0;g<cntrs.length;g++){l=k(n,cntrs[g]);if(l.length>0){break}}if(l.length>0){var a=l.find(".DetailsControl");var d=f(l,m);d()}return[]},DetailsInExternalLocation:function(d,g,c){var f=ajaxart_uiaspects_container(c);f.DetailsControl=c.vars.DetailsControl[0];var b=aa_find_field(aa_text(g,d,"FieldID",c))[0];if(b){a(b)}else{setTimeout(function(){var h=aa_find_field(aa_text(g,d,"FieldID",c))[0];if(h){a(h)}},500)}function a(h){var l=null;var k=jQuery(h).find(".DetailsControl");if(k.length>0){l=k[0].SaveDetailsAndRefresh}ajaxart_RunAsync(g,l,c,function(){aa_empty(h,true);h.appendChild(f.DetailsControl);aa_element_attached(f.DetailsControl);return[]})}},DetailsInplace:function(k,w,h){if(aa_tobool(h.vars.IsNewItem)){ajaxart_saveDetailsAndRefresh(h.vars._InnerItems[0].Items,h.vars.ItemPage[0].Fields,h,function(x,y){ajaxart.gcs.uiaspect.DetailsInplace(k,w,aa_ctx(y,{IsNewItem:[]}))});return}var r=ajaxart_uiaspects_container(h);var c=h.vars.DetailsControl;var d=h.vars._ElemsOfOperation[0];if(aa_bool(w,k,"CloseInplaceSiblings",h)){var n=jQuery(d).siblings(".detailsInplace_tr");for(var s=0;s<n.length;s++){n[s].jbHideDetails()}}if(jQuery(r.Ctrl).find(">.teasers_list_tiles")[0]){d=h.vars.ControlElement[0]}if(d==null){return}var v=h.vars._OperationID&&h.vars._OperationID[0];var f=h.vars._ItemDetailsObject[0];f.TR=d;f.ElemsOfOperation=[d];f.HideDetails=function(y,x){aa_remove(this.TR.nextSibling,true);ajaxart_uiaspects_refreshElements(this.ElemsOfOperation)};if(v!=null){var b=jQuery(d).find("."+v).parent();if(b.length>0){b.empty();var t=ajaxart.run(w,k,"Buttons",h);b[0].appendChild(t[0])}}if(d.nextSibling!=null&&jQuery(d.nextSibling).hasClass("detailsInplace_tr")){var o=jQuery(d.nextSibling).find(".detailsInplace")[0];if(o&&!aa_passing_validations(o)){return}aa_remove(d.nextSibling,true);ajaxart_saveDetailsAndRefresh(d.ItemData,h.vars.ItemPage[0].Fields,h);return[]}if(d.tagName=="TR"){var q=document.createElement("TR");q.className="detailsInplace_tr aa_item_extended";var u=document.createElement("TD");u.className="detailsInplace_td";aa_setCssText(u,aa_text(w,k,"CssForDetails",h));u.setAttribute("colspan",jQuery(d).find(">TD").length);q.jbHideDetails=function(){aa_remove(this,true);ajaxart_uiaspects_refreshElements([d])};if(c.length>0){c[0].className="detailsInplace";u.appendChild(c[0])}var p=aa_first(w,k,"InplaceToolbar",h);var a=aa_text(w,k,"ToolbarLocation",h);if(p){jQuery(p).addClass("aa_toolbar_inplace_"+a);if(a=="bottom"){u.appendChild(p)}if(a=="top"){jQuery(p).insertBefore(c[0])}}q.appendChild(u);d.parentNode.insertBefore(q,d.nextSibling)}if(d.tagName=="LI"){var q=document.createElement("LI");q.className="detailsInplace_tr aa_item_extended";var u=document.createElement("DIV");u.className="detailsInplace_td";q.jbHideDetails=function(){aa_remove(this,true);ajaxart_uiaspects_refreshElements([d])};if(c.length>0){c[0].className="detailsInplace";u.appendChild(c[0])}q.appendChild(u);d.parentNode.insertBefore(q,d.nextSibling)}jQuery(d).addClass("aa_details_open");aa_element_attached(q);ajaxart_uiaspects_select(jQuery(d),jQuery(),"auto",r.Context,false);var g=jQuery(d).find(".aa_open_button");if(g.length>0){var l=aa_first([],g[0].ajaxart.script,"",aa_ctx(g[0].ajaxart.params,{InplaceIsOpen:["true"]}));if(l){aa_replaceElement(g[0],l,true)}}var m=jQuery(c).find("input,textarea")[0];if(m&&ajaxart.isattached(m)){m.focus()}return[]},ShowItemInItemList:function(d,f,c){var b=aa_first(f,d,"ItemList",c);if(b==null){return[]}if(!aa_bool(f,d,"ShowOnlyItem",c)){return[b]}var a=ajaxart.run(f,d,"InnerItems",c);var g=aa_ctx(c,{_InnerDataItems:a});return ajaxart.runScriptParam(f,b.EditItemControl,g)},ContainerControl:function(b,d,a){var c=aa_first(d,b,"Container",a);if(c==null||c.Ctrl==null){return[]}return[c.Ctrl]},ContainerFromControl:function(b,c,a){var d=aa_first(c,b,"Control",a);if(d==null||d.Cntr==null){return[]}return[d.Cntr]},ContainerItems:function(f,h,d){var g=aa_first(h,f,"Container",d);var a=ajaxart_container_elems(g);var b=[];for(var c=0;c<a.length;c++){b.push(a[c].ItemData[0])}return b},ContainerElementByItemFilter:function(d,h,c){var g=aa_first(h,d,"Container",c);var a=ajaxart_container_elems(g);for(var b in a){var f=a[b].ItemData;if(aa_bool(f,d,"ItemFilter",c)){return[a[b]]}}return[]},ContainerElements:function(b,d,a){var c=aa_first(d,b,"Container",a);return ajaxart_container_elems(c)},FirstSubContainer:function(c,f,b){var d=aa_first(f,c,"Element",b);if(d==null){return[]}var a=jQuery(d).find(".aa_container");if(a.length>0){return[a[0].Cntr]}return[]},ItemHighlight:function(d,f,b){var a={isObject:true};var c=function(r,t){var p=t.vars._Cntr[0];var g=t.vars._Elems;var v=ajaxart.compile(d,"CssClass",t);var l=ajaxart.compile(d,"BackgroundColor",t);var q=ajaxart.compile(d,"FontColor",t);var h=ajaxart.compile(d,"FontWeight",t);for(var n=0;n<g.length;n++){var k=g[n];var s=ajaxart_runcompiled_text(v,k.ItemData,d,"CssClass",t);var u=ajaxart_runcompiled_text(l,k.ItemData,d,"BackgroundColor",t);var m=ajaxart_runcompiled_text(q,k.ItemData,d,"FontColor",t);var o=ajaxart_runcompiled_text(h,k.ItemData,d,"FontWeight",t);if(k.Highlighted!=true){k.Highlighted=true;k.OrigFontWeight=k.style.fontWeight;k.OrigColor=k.style.color;k.OrigBg=k.style.backgroundColor;k.classAdded=s}else{k.style.fontWeight=k.OrigFontWeight;k.style.color=k.OrigColor;k.style.backgroundColor=k.OrigBg;if(k.classAdded!=""){jQuery(k).removeClass(k.classAdded)}}if(o!=""){k.style.fontWeight=o}if(m!=""){k.style.color=m}if(u!=""){k.style.backgroundColor=u}if(s!=""){jQuery(k).addClass(s)}}};ajaxart_addScriptParam_js(a,"InitializeElements",c,b);return[a]},Teasers:function(f,g,c){var b={isObject:true};var d=aa_bool(g,f,"OpenOnClick",c);var a=function(h,k){var l=k.vars._Cntr[0];l.createNewElement=function(p,s,m){var r=function(){var t=aa_ctx(k,{_InnerItem:p});ajaxart.runScriptParam(p,l.OpenItemDetails,t)};var o={isObject:true};ajaxart_addScriptParam_js(o,"OpenItem",r,m||k);var n=aa_ctx(m||k,{_TeasersContext:[o]});var q=ajaxart.runNativeHelper(p,f,"Control",n)[0];q.ItemData=p;jQuery(q).addClass("aa_item");if(d){jQuery(q).click(r);q.style.cursor="pointer"}if(s){s.push(q)}return q}};ajaxart_addScriptParam_js(b,"InitializeContainer",a,c);return[b]},ControlForNoData:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.ControlForNoData=function(k,l){return ajaxart.run(k,c,"Control",aa_merge_ctx(b,l))}};return[a]},Permissions:function(c,d,b){var a={isObject:true};var f=function(g){g.InitializeContainer=function(h,k){k=aa_merge_ctx(b,k);var l=k.vars._Cntr[0];l.RegisterForPostAction(g);if(!aa_bool(l.Items[0].Items,c,"WritableIf",k)){l.ReadOnly=true}};g.PostAction=function(h,k){k=aa_merge_ctx(b,k);var l=k.vars._Cntr[0];if(!aa_bool(d,c,"VisibleIf",k)){l.Ctrl=aa_first(d,c,"ControlIfNotVisible",k)||document.createElement("div")}}};f(a);return[a]},RunAction:function(c,d,b){var a={isObject:true};if(aa_paramExists(c,"RunAsyncBeforeControl")){a.CreateContainer=function(f,g){var h=g.vars._Cntr[0];aa_setMethod(h,"RunAsyncAction",c,"RunAsyncBeforeControl",b);h.ControlForWaiting=function(m,k){var l=jQuery("<div />");l.html(aa_multilang_text(f,c,"ShowWhileWaiting",b));l.addClass("aa_loading");return l.get()}}}a.InitializeContainer=function(f,g){g=aa_merge_ctx(b,g);var h=g.vars._Cntr[0];h.RegisterForPostAction(this);ajaxart.run(aa_items(h),c,"RunBeforeControl",b);var k=ajaxart.fieldscript(c,"OnAttach");if(k){aa_addOnAttach(h.Ctrl,function(){g=aa_merge_ctx(b,g);var l=g.vars._Cntr[0];ajaxart.run(d,c,"OnAttach",aa_ctx(g,{ControlElement:[l.Ctrl]}))})}};a.PostAction=function(f,g){g=aa_merge_ctx(b,g);var h=g.vars._Cntr[0];ajaxart.run(d,c,"RunAfterControl",aa_ctx(g,{ControlElement:[h.Ctrl]}))};return[a]},MultiSelect:function(c,d,b){var a={isObject:true,InitializeContainer:function(f,g){var h=g.vars._Cntr[0];h.MultiSelect=true;h.SelectAll=function(l,k){var n=g.vars._Cntr[0];var m=ajaxart_container_elems(n);jQuery(m).find(">td>.aa_multiselect_checkbox").each(function(){aa_checked(this,true)})};h.ClearAll=function(l,k){var n=g.vars._Cntr[0];var m=ajaxart_container_elems(n);jQuery(m).find(">td>.aa_multiselect_checkbox").each(function(){aa_checked(this,false)})};h.GetMultiSelectedItems=function(l,k){var o=g.vars._Cntr[0];var m=ajaxart_container_elems(o);var n=jQuery(m).filter(function(){var p=jQuery(this).find(">td>.aa_multiselect_checkbox")[0];return p&&p.checked}).get();return n}},InitializeElements:function(p,q){var o=q.vars._Cntr[0];var n=jQuery(o.Ctrl).find(".aatable>thead>tr");if(n.length==0){return}if(n.find(">.aa_multiselect_th").length==0){var g=document.createElement("th");g.className="fieldtitle aa_multiselect_th";n[0].insertBefore(g,n[0].firstChild);jQuery(g).text(aa_text(d,c,"SelectionFieldTitle",b))}var f=q.vars._Elems;for(var l=0;l<f.length;l++){var h=f[l];if(h.ItemData[0].UnSelectable){continue}var m=document.createElement("input");m.className="aacheckbox_value aa_multiselect_checkbox";m.setAttribute("type","checkbox");var k=document.createElement("td");m.onclick=function(s){var r=q.vars.HeaderFooterCntr&&q.vars.HeaderFooterCntr[0];if(r){aa_invoke_cntr_handlers(r,r.Selection,r.ElemsOfOperation(),q)}return true};k.className="content";k.appendChild(m);h.insertBefore(k,h.firstChild)}}};return[a]},ClickableRows:function(f,g,c){var b={isObject:true};var a=aa_attach_global_css(aa_text(g,f,"Css",c),c,"clickable");var d=function(h,k){var l=k.vars._Elems;for(var m=0;m<l.length;m++){var n=l[m];n.onclick=function(o){if(window.aa_incapture){return}ajaxart.run(this.ItemData,f,"Action",aa_ctx(c,{_ItemsOfOperation:this.ItemData,Item:this.ItemData,_ElemsOfOperation:[this],ControlElement:[this]}))};jQuery(n).addClass("aa_clickable").addClass(a)}if(aa_bool(g,f,"DisableSelection",c)){}};ajaxart_addScriptParam_js(b,"InitializeElements",d,c);return[b]},HoverCss:function(f,g,c){var a={isObject:true};var b=aa_text(g,f,"Css",c);var h=(b.indexOf(":")>=0);var d=function(k,l){var m=l.vars._Elems;for(var n=0;n<m.length;n++){var o=m[n];if(h){o.onmouseover=function(){this["original_css"]=this.style.cssText;aa_setCssText(this,this.style.cssText+";"+b)};o.onmouseout=function(){this.style.cssText=this["original_css"]}}else{o.onmouseover=function(){jQuery(this).addClass(b)};o.onmouseout=function(){jQuery(this).removeClass(b)}}}};ajaxart_addScriptParam_js(a,"InitializeElements",d,c);return[a]},ItemClickable:function(c,d,b){var a={isObject:true};a.InitializeContainer=function(f,g){var h=g.vars._Cntr[0];h.ItemClickable=true;h.CursorPointerForItem=aa_bool(d,c,"PointerCursor",b)};a.InitializeElements=function(g,h){var n=h.vars._Cntr[0];var k=h.vars._Elems;if(!n.ItemClickable){return}for(var l=0;l<k.length;l++){var m=k[l];jQuery(m).addClass("aa_list_clickable");if(n.CursorPointerForItem){jQuery(m).css("cursor","pointer")}var f=function(o){return function(){if(window.aa_incapture){return}var p=aa_ctx(h,{_InnerItem:o.ItemData,_ItemsOfOperation:o.ItemData,ControlElement:[o]});p=aa_merge_ctx(b,p);ajaxart.run(o.ItemData,c,"ClickAction",p);return false}};m.onclick=f(m)}};return[a]},ItemList:function(c,d,b){var a={isObject:true};a.CreateContainer=function(f,g){var k=g.vars._Cntr[0];k.Style=aa_first(d,c,"Style",b);var h=k.ApiObject=aa_api_object(jQuery(k.Style.Html),{cntr:k,setItemsOld:null,setItems:null});h.newItem=function(){return jQuery("<div/>")[0]};h.setItemsOld=function(m,l){h.setItems({itemElement:m,initItem:l})};h.bind=function(l,m){jBart.bind(this.cntr,l,m)};h.trigger=function(m,l){jBart.trigger(this.cntr,m,l)};h.setItems=function(m){var l=this.itemTemplate=this.getInnerElement(m.itemElement);if(!l||!l.parentNode||!m.initItem){return}if(m.blockElement){m.initBlock=m.initBlock||function(){};m.itemsInBlock=m.itemsInBlock||12;m.blockTemplate=this.getInnerElement(m.blockElement);if(m.blockTemplate&&m.blockTemplate.parentNode){m.blockParent=m.blockTemplate.parentNode;if(l.parentNode==m.blockTemplate){m.itemXPathInBlock=""}else{m.itemXPathInBlock=ajaxart.xml.xpath_of_node(l.parentNode,false,true,m.blockTemplate)}m.itemParentInBlock=function(n){if(m.itemXPathInBlock){aa_xpath(n,m.itemXPathInBlock)[0]}else{return n}}}}jQuery(l.parentNode).addClass("aa_list aa_listtop aa_cntr_body aa_cntrlist");l.parentNode.removeChild(l);this.newItem=function(q,o){var p=this.itemTemplate.cloneNode(true);var r=this.cntr;var n=aa_api_object(jQuery(p),{itemlist:this,data:q});n.name=aa_totext(r.ItemName(q,r.Context));if(r.ItemImage){r.ItemImage.StaticUrl=aa_totext(r.ItemImage.Url(q,r.Context));n.image=r.ItemImage}n.setFields=function(x){var t=this.getInnerElement(x);if(!t){return}var v=o.vars._Cntr[0];var s=ajaxart_field_getFields(v,"table");for(var u=0;u<s.length;u++){var w=s[u];var z=ajaxart_field_calc_field_data(w,this.data,v.Context);var y=document.createElement("div");t.appendChild(y);ajaxart_field_createCellControl(this.data,v,y,v.CellPresentation,w,z,v.Context)}};n.setField=function(w,t){var s=this.getInnerElement(w);var u=o.vars._Cntr[0];var v=aa_fieldById(t,u.Fields);if(!v||!s){return}var y=ajaxart_field_calc_field_data(v,this.data,u.Context);var x=document.createElement("div");s.appendChild(x);ajaxart_field_createCellControl(this.data,u,x,u.CellPresentation,v,y,u.Context)};m.initItem(n);return p};if(m.blockElement){h.PostActions=h.PostActions||[];h.PostActions.push({PostAction:function(n,o){var s=ajaxart_find_aa_list(k);var q=m.blockParent;jQuery(q).addClass("aa_list aa_listtop aa_cntr_body aa_cntrlist");jQuery(s).removeClass("aa_list aa_listtop aa_cntr_body aa_cntrlist");if(m.blockTemplate&&m.blockTemplate.parentNode){m.blockTemplate.parentNode.removeChild(m.blockTemplate)}var p=jQuery(s).find(">.aa_item");var t=null;for(var r=0;r<p.length;r++){if(!t||t.jbItemsInBlock==m.itemsInBlock){t=jQuery(m.blockTemplate)[0].cloneNode(true);jQuery(m.itemParentInBlock(t)).children().remove();t.jbItemsInBlock=0;q.appendChild(t);m.initBlock(t)}jQuery(m.itemParentInBlock(t)).append(p[r]);t.jbItemsInBlock++}jQuery(m.blockTemplate)}})}};aa_apply_style_js(h,k.Style);jQuery(h.jElem[0]).addClass(aa_attach_global_css(k.Style.Css,k.Ctrl));jQuery(k.Ctrl).addClass("aa_has_style");jQuery(k.Ctrl).find(">.aa_listtop").replaceWith(h.jElem);return[]};a.InitializeContainer=function(f,g){var k=g.vars._Cntr[0];aa_setMethod(k,"ItemName",c,"ItemName",b);k.ItemImage=aa_first(d,c,"ItemImage",b);k.createNewElement=function(n,p,l){var o=g.vars._Cntr[0];var m=o.ApiObject.newItem(n,l);jQuery(m).addClass("aa_item");m.Cntr=o;m.ItemData=n;if(p){p.push(m)}return m};if(k.ApiObject.PostActions){for(var h=0;h<k.ApiObject.PostActions.length;h++){k.RegisterForPostAction(k.ApiObject.PostActions[h])}}};return[a]},List:function(c,d,b){var a={isObject:true};a.CreateContainer=function(f,g){var k=g.vars._Cntr[0];var h=jQuery('<div class="aa_list aa_listtop aa_cntr_body aa_cntrlist"/>');jQuery(k.Ctrl).find(">.aa_listtop").replaceWith(h);return[]};a.InitializeContainer=function(f,h){var m=h.vars._Cntr[0];var l=aa_bool(d,c,"EachItemInLine",b);m.ListItemCss=aa_comma_size_to_css(aa_text(d,c,"ItemSize",b));m.ListItemCss+=aa_text(d,c,"ItemCss",b);var k=aa_bool(d,c,"ItemClickable",b);var g=aa_text(d,c,"SpacingBetweenFields",b);m.createNewElement=function(n,t,q){var w=h.vars._Cntr[0];var o=jQuery('<div class="aa_item" tabindex="1">')[0];if(!l){jQuery(o).css("float",aa_is_rtl(w.Ctrl,h)?"right":"left")}aa_apply_css(o,w.ListItemCss);var s=ajaxart_field_getFields(w,"table");for(var p=0;p<s.length;p++){if(p>0){jQuery(o).append(jQuery('<div style="height: '+g+'"/>'))}var v=s[p];var r=ajaxart_field_calc_field_data(v,n,q);var u=document.createElement("div");o.appendChild(u);ajaxart_field_createCellControl(n,w,u,"control",v,r,q)}o.ItemData=n;if(k){jQuery(o).addClass("aa_list_clickable");o.onclick=function(y){var x=this;var z=aa_ctx(q||h,{_InnerItem:x.ItemData,_ItemsOfOperation:x.ItemData,ControlElement:[this]});ajaxart.run(x.ItemData,c,"ClickAction",z);return false}}if(t){t.push(o)}return o}};return[a]},SearchLayout:function(b,d,a){if(!a.vars._PopupField){return[]}var f=a.vars._PopupField[0];var h=ajaxart.runNativeHelper(d,b,"Page",a)[0];var l=h.Fields[0];var c=l.Fields[0];var m=l.Fields[1];var k=m.Fields[0];var n=m.Fields[1];c.FieldData=f.ItemImage;k.FieldData=f.ItemTitle;n.FieldData=f.ItemExtraText;if(f.Options&&f.Options.Options.length>0){var g=f.Options.Options[0].source;f.ItemImage([g],a);f.ItemTitle([g],a);f.ItemExtraText([g],a);f.ItemLink([g],a)}return[h]},MultiplePressed:function(c,d,b){var a={isObject:true};a.PressedCssClass=aa_attach_global_css(aa_text(d,c,"PressedCss",b));a.InitializeElements=function(f,g){var h=g.vars._Elems;for(var l=0;l<h.length;l++){var m=h[l];if(aa_bool(m.ItemData,c,"IsItemPressed",b)){jQuery(m).addClass("aa_pressed").addClass(a.PressedCssClass)}var k=function(o){var n=function(t){jQuery(o).toggleClass("aa_pressed").toggleClass(a.PressedCssClass);var s=g.vars._Cntr[0];var r=jQuery(ajaxart_container_elems(s)).filter(".aa_pressed");var p=[];for(var q=0;q<r.length;q++){p.push(r[q].ItemData[0])}ajaxart.run(p,c,"OnPressedChange",aa_ctx(b,{_Elem:[o]}));return aa_stop_prop(t)};ajaxart.ui.bindEvent(o,"click",n)};k(m)}};return[a]}});aa_gcs("uiaspect_config",{InUrlFragment:function(b,c,a){return[{isObject:true,Set:function(d,f){if(d[0]){aa_urlChange(f,"?"+d[0].Key+"="+d[0].Value+"")}},Get:function(f,d){return[aa_urlAttribute(d,aa_totext(f))]}}]}});aa_gcs("field",{CustomControl:function(b,c,a){var d={isObject:true};d.Title=aa_multilang_text(c,b,"Title",a);d.Image=aa_text(c,b,"Image",a);d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];d.FieldData=function(g){return g};d.CellPresentation=["control"];d.HideTitle=(!aa_bool(c,b,"ShowTitle",a));aa_setMethod(d,"Control",b,"Control",a);var f=aa_ctx(a,{_Field:[d]});ajaxart.runsubprofiles(c,b,"FieldAspect",f);return[d]},Control:function(b,c,a){var d={isObject:true};d.Title=aa_multilang_text(c,b,"Title",a);d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];d.FieldData=function(g){return g};d.CellPresentation=["control"];d.ReadOnly=true;d.HideTitle=aa_bool(c,b,"HideTitle",a);var f=aa_ctx(a,{_Field:[d]});ajaxart.run(c,b,"Control",f);ajaxart.runsubprofiles(c,b,"FieldAspect",f);return[d]},Button:function(b,c,a){var d={isObject:true};d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];d.FieldData=function(f){return f};d.CellPresentation=["control"];d.HideTitle=(aa_bool(c,b,"HideTitle",a));d.Refresh=function(f,g){d.Title=aa_multilang_text(c,b,"Title",a);d.Image=aa_first(c,b,"Image",a);if(d.Image&&d.Image.Url){d.Image.StaticUrl=aa_totext(d.Image.Url(c,a))}d.Style=aa_first(c,b,"Style",aa_ctx(a,{_Field:[d]}));if(d.Style){d.StyleClass=aa_attach_global_css(d.Style.Css)}};d.Refresh(c,a);if(!d.Style){return}d.Control=function(n,g){var m=this;var k=m.Style;if(k.Html==""){return[]}var f=jQuery(k.Html);var h=aa_api_object(f,{image:m.Image,Field:m});h.text=h.tooltip=aa_multilang_text(n,b,"ButtonText",a);if(aa_paramExists(b,"Tooltip")){h.tooltip=aa_multilang_text(n,b,"Tooltip",a)}if(h.text==""){h.text=m.Title}var l=function(o){aa_defineElemProperties(o,"Action");o.Action=function(q){var s=q&&q.event;var u=q&&q.end;if(window.aa_incapture){return}var t=[jQuery(o).parents(".aa_item")[0]];if(t[0]==null){t=[]}var r=(t[0])?t[0].ItemData:[];var p=aa_ctx(aa_merge_ctx(a,g),{ControlElement:o.jElem.get(),_ElemsOfOperation:t,_ItemsOfOperation:r});if(s){p.vars._DomEvent=[s]}if(typeof u=="function"){ajaxart_RunAsync(n,ajaxart.fieldscript(b,"Action"),p,u)}else{ajaxart.run(n,b,"Action",p)}}};l(h);aa_apply_style_js(h,m.Style);f.addClass(m.StyleClass);return f.get()};ajaxart.runsubprofiles(c,b,"FieldAspect",aa_ctx(a,{_Field:[d]}));return[d]},Field1:function(b,c,a){var d={isObject:true};d.Title=aa_multilang_text(c,b,"Title",a);d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];ajaxart_addMethod(d,"FieldData",b,"FieldData",a);ajaxart_addMethod(d,"Control",b,"Control",a);var f=aa_ctx(a,{_Field:[d]});ajaxart.runsubprofiles(c,b,"FieldAspect",f);ajaxart.run(c,b,"Multiple",f);return[d]},FireOnUpdate:function(b,d,a){var c=ajaxart.getControlElement(a)[0];var f=jQuery(c).parents(".aa_cell_element")[0];if(f==null){return[]}aa_invoke_field_handlers(f.Field.OnUpdate,c,null,f.Field,f.FieldData);return[]},OptionsFilter:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.SelectedList="";d.FilterControl=function(h){var g=aa_ctx(h,{_Field:[this]});var f=ajaxart.runNativeHelper(h.vars.FilterData,b,"Control",g);jQuery(f).find(".aa_filter_input").addClass("aa_filter_"+this.Id);return f};d.newFilter=function(g){var f=this;return{isObject:true,filterData:ajaxart.totext_array(g),SetFilterData:function(h){this.filterData=ajaxart.totext_array(h)},ToSQLText:function(h){return ajaxart.totext_array(h)},PrepareElemCache:function(m,n){var l=n[m.Id];n["__FilterCache_"+m.Id]=","+l+",";if(m.OptionCategories){if(m.Multiple){var h=l.split(",");for(var k=0;k<h.length;k++){n["__FilterCache_"+m.Id]+=m.OptionCategories[h[k]]}}else{n["__FilterCache_"+m.Id]+=m.OptionCategories[l]}}},Match:function(m,n){if(this.filterData==""){return true}var h=n["__FilterCache_"+m.Id];if(!h&&this.PrepareElemCache){this.PrepareElemCache(m,n);h=n["__FilterCache_"+m.Id]}if(!h){ajaxart.log("no cache preparation for filter of "+m.Id,"error");return false}result=false;var k=this.filterData.split(",");for(var l=0;l<k.length;l++){if(h.indexOf(","+k[l]+",")!=-1){result=true}}return result}}};return[]},RefreshFilteredItems:function(c,g,b){var f=(b.vars.HeaderFooterCntr||b.vars._Cntr)[0];if(f==null){return}if(!f.DelayedFiltering){aa_recalc_filters_and_refresh(f,b.vars._Item,aa_ctx(b,{_Cntr:[f]}))}var h=b.vars._Field[0];var d=f.DataHolder&&f.DataHolder.UserDataView&&f.DataHolder.UserDataView.Filters;for(var a in d){if(d[a].field.Id==h.Id){ajaxart_setUiPref(f.ID[0],"Filter_Field_"+h.Id,ajaxart.totext_array(d[a].rawFilterData),b)}}return[]},TextFilter:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.FilterControl=function(h){var g=aa_ctx(h,{_Field:[this]});var f=ajaxart.runNativeHelper(h.vars.FilterData,b,"Control",g);jQuery(f).find(".aa_filter_input").addClass("aa_filter_"+this.Id);return f};d.newFilter=aa_create_text_filter(aa_bool(c,b,"MatchOnlyTextBeginning"))},NumberFilter:function(b,c,a){var d=ajaxart_fieldaspect_getField(a);if(d==null){return[]}d.FilterControl=function(h){var g=aa_ctx(h,{_Field:[this]});var f=ajaxart.runNativeHelper(h.vars.FilterData,b,"Control",g);jQuery(f).find(".aa_filter_input").addClass("aa_filter_"+this.Id);return f};d.newFilter=function(g){var f=function(l){var h=[];var o=aa_totext(l).replace(/[ ]*-[ ]*/,"-");var p=o.split(",");for(var n in p){if(p[n]!=""){var k;if(p[n][0]=="<"&&p[n][1]=="="){k={from:-2147483648,to:parseFloat(p[n].split("<=").pop()),match:function(q){return this.to>=q}}}else{if(p[n][0]=="<"){k={from:-2147483648,to:parseFloat(p[n].split("<").pop()),match:function(q){return this.to>q}}}else{if(p[n][0]==">"&&p[n][1]=="="){k={to:2147483647,from:parseFloat(p[n].split(">=").pop()),match:function(q){return this.from<=q}}}else{if(p[n][0]==">"){k={to:2147483647,from:parseFloat(p[n].split(">").pop()),match:function(q){return this.from<q}}}else{var m=p[n].split("-");var k={from:parseFloat(m[0]),match:function(q){return this.from<=q&&this.to>=q}};if(m[1]==null){k.to=k.from}else{k.to=parseFloat(m[1])}}}}}if(isNaN(k.from)){k.from=-2147483648}if(isNaN(k.to)){k.to=2147483647}h.push(k)}}return h};return{filterData:f(g),SetFilterData:function(h){this.filterData=f(h)},ToSQLText:function(h){return ajaxart.totext_array(h)},Match:function(l,m){if(this.filterData.length==0){return true}for(var k in this.filterData){var h=this.filterData[k].match(m[l.Id]);if(h){return true}}return false}}};return[]},Field:function(c,d,b){var g={isObject:true};g.Id=aa_text(d,c,"ID",b);g.ID=[g.Id];g.Title=aa_multilang_text(d,c,"Title",b);g.ReadOnlyText=aa_bool(d,c,"ReadOnlyText",b);var f=c.getAttribute("FieldData");if(!g.ReadOnlyText&&f&&f.indexOf("%")==-1){g.ReadOnlyText=true}if(g.ReadOnlyText){g.ReadOnly=true;g.FieldData=function(l,k){return ajaxart_multilang_run(l,c,"FieldData",aa_merge_ctx(b,k))}}else{if(f&&f!=""){var h=/^%.*%$/.test(f);if(!h){g.ReadOnly=true}if(h&&f.charAt(1)!="!"){c.setAttribute("FieldData","%!"+f.substring(1))}}aa_setMethod(g,"FieldData",c,"FieldData",b)}var a=aa_ctx(b,{_Field:[g]});g.TypeStyle=aa_first(d,c,"Type",a);if(g.TypeStyle&&g.TypeStyle.IsTriplet){aa_add_field_type_triplet(g,g.TypeStyle,d,b)}ajaxart.runsubprofiles(d,c,"FieldAspect",a);if(g.DefaultValue||g.ForceCData){g.FieldData=function(k,m){var n=ajaxart.run(k,c,"FieldData",aa_merge_ctx(b,m));if(aa_totext(n)==""){ajaxart.writevalue(n,this.DefaultValue(k,m),true)}if(g.ForceCData&&n[0].nodeType==1){var o=aa_totext(n);for(var l=n[0].firstChild;l;l=l.nextSibling){if(l.nodeType==4){return n}}while(n[0].firstChild){n[0].removeChild(n[0].firstChild)}n[0].appendChild(n[0].ownerDocument.createCDATASection(o))}return n}}return[g]},FilterField:function(d,f,c){var g={isObject:true};g.Id=aa_text(f,d,"ID",c);g.ID=[g.Id];g.Title=aa_multilang_text(f,d,"Title",c);var b=g.FilterBaseFieldID=aa_text(f,d,"BasedOn",c);g.FieldData=function(h,k){return aa_xpath(h[0],"@"+b,true)};var a=aa_ctx(c,{_Field:[g]});g.TypeStyle=aa_first(f,d,"Type",a);if(g.TypeStyle&&g.TypeStyle.IsTriplet){aa_add_field_type_triplet(g,g.TypeStyle,f,c)}ajaxart.runsubprofiles(f,d,"FieldAspect",a);if(g.DefaultValue){g.FieldData=function(h,k){var l=ajaxart.run(h,d,"FieldData",aa_merge_ctx(c,k));if(aa_totext(l)==""){ajaxart.writevalue(l,this.DefaultValue(h,k),true)}return l}}return[g]},XmlField:function(b,c,a){var g={isObject:true};var f=aa_text(c,b,"Path",a);g.Id=aa_text(c,b,"ID",a);if(g.Id==""){g.Id=f.split("@").pop()}g.ID=[g.Id];g.Title=aa_multilang_text(c,b,"Title",a);if(aa_paramExists(b,"Title")){g.RecalcTitle=function(l,k){this.Title=aa_multilang_text(l,b,"Title",a)}}g.Path=f;ajaxart_field_fix_title(g,f,a);var d=/^@[\w]*$/.test(f);if(f==""){g.FieldData=function(k){return k}}else{aa_set_fielddata_method(g,f)}var h=aa_ctx(a,{_Field:[g]});ajaxart.run(c,b,"Type",h);ajaxart.runsubprofiles(c,b,"FieldAspect",h);ajaxart.run(c,b,"Multiple",h);if(d){g.ItemToText=function(k){return function(l){if(!l.nodeType){return l[k]||""}return l.getAttribute(k)||""}}(f.substring(1))}return[g]},XmlGroup:function(c,d,b){var a=ajaxart.gcs.field.XmlField(c,d,b);var f=a[0];f.IsGroup=true;f.HideTitle=aa_bool(d,c,"HideTitle",b);f.Path=aa_text(d,c,"Path",b);if(aa_text(d,c,"Path",b)==""){f.IsVirtualGroup=true;f.FieldData=function(h){return h}}f.Fields=ajaxart.runsubprofiles(d,c,"Field",b);f.Control=function(n,s){var q=this;var r=s.vars._Cntr[0]||{};var p=r.Items||[];var m=aa_merge_ctx(b,s);var l=aa_totext(r.ID)+"_"+q.Path;var k=[{isObject:true,Items:n}];if(q.HeaderFooter&&s.vars.DataHolderCntr){k=s.vars.DataHolderCntr[0].Items}var t=function(u){return function(w,v){u.Operations=ajaxart.run(n,c,"Operations",aa_merge_ctx(b,v));return u.Operations}};var h=function(u){return function(z,v){if(u.Aspects){return u.Aspects}var y=aa_merge_ctx(b,v);u.Aspects=ajaxart.run(d,c,"Presentation",y);var w={isObject:true};aa_set_initialize_container(w,function(B,A,C){if(s.vars._Cntr&&s.vars._Cntr[0].ReadOnly){C.ReadOnly=true}if(aa_text(d,c,"Path",b)==""){C.IsVirtualGroup=true}});u.Aspects.push(w);ajaxart.concat(u.Aspects,ajaxart.runsubprofiles(d,c,"Aspect",y));for(var x=0;x<u.Fields.length;x++){if(u.Fields[x].CntrAspects){u.Aspects=u.Aspects.concat(u.Fields[x].CntrAspects)}}return u.Aspects}};var o=aa_uidocument(n,l,k,q.Fields,h(q),t(q),m);o.Field=q;if(q.IsGroup){jQuery(o).addClass("aa_layoutgroup")}return[o]};f.ItemDetailsControl=f.Control;var g=aa_ctx(b,{_Field:[f]});ajaxart.runsubprofiles(d,c,"FieldAspect",g);multipleItems_func=function(h,k){return ajaxart.runNativeHelper(h,c,"MultipleItems",aa_merge_ctx(b,k))};ajaxart_addMethod_js(f,"MultipleItems",multipleItems_func,b);return a},Group:function(c,d,b){var a=ajaxart.gcs.field.XmlField(c,d,b);var f=a[0];f.IsGroup=true;f.HideTitle=aa_bool(d,c,"HideTitle",b);f.CalcFieldsInAdvance=aa_bool(d,c,"CalcFieldsInAdvance",b);f.Fields=(f.CalcFieldsInAdvance)?ajaxart.runsubprofiles(d,c,"Field",b):[];f.GroupData=aa_first(d,c,"GroupData",b);if(f.GroupData){f.FieldData=function(h,k){return this.GroupData.FieldData(h,k)}}else{f.IsGroupOnlyForLayout=true}f.Control=function(n,s){var q=this;if(!q.CalcFieldsInAdvance&&q.Fields.length==0){q.Fields=ajaxart.runsubprofiles(d,c,"Field",aa_ctx(b,s))}var r=s.vars._Cntr[0]||{};var p=r.Items||[];var m=aa_merge_ctx(b,s);var l=aa_totext(r.ID)+"_"+q.Id;var k=null;if(q.GroupData){k=q.GroupData.DataItems(n,m)[0]}if(!k){k={isObject:true,Items:n}}var t=function(){return[]};var h=function(u){return function(z,v){if(u.Aspects){return u.Aspects}var y=aa_merge_ctx(b,v);u.Aspects=ajaxart.run(d,c,"Layout",y);var w={isObject:true};aa_set_initialize_container(w,function(B,A,C){if(s.vars._Cntr&&s.vars._Cntr[0].ReadOnly){C.ReadOnly=true}});u.Aspects.push(w);ajaxart.concat(u.Aspects,ajaxart.runsubprofiles(d,c,"Aspect",y));for(var x=0;x<u.Fields.length;x++){if(u.Fields[x].CntrAspects){u.Aspects=u.Aspects.concat(u.Fields[x].CntrAspects)}}return u.Aspects}};var o=aa_uidocument(n,l,[k],q.Fields,h(q),t,m);o.Field=q;if(q.IsGroup){jQuery(o).addClass("aa_layoutgroup")}return[o]};f.ItemDetailsControl=f.Control;var g=aa_ctx(b,{_Field:[f]});ajaxart.runsubprofiles(d,c,"FieldAspect",g);return a}});aa_gcs("animation",{CssBasedAnimation:function(b,c,a){return[{animate:function(h,g){var f=ajaxart_screen_size(true);var d=aa_ctx(a,{ScreenWidth:[f.width+"px"],ScreenHeight:[f.height+"px"]});jQuery(h).addClass(aa_attach_global_css(aa_text(c,b,"Css",d)));jQuery(h).addClass("beforeAnimation");setTimeout(function(){aa_addOnAttach(h,function(){jQuery(h).removeClass("beforeAnimation");var k=function(){jQuery(h).removeClass("afterAnimation");if(g){g(h)}h.removeEventListener("webkitTransitionEnd",k);h.removeEventListener("transitionend",k)};h.addEventListener("webkitTransitionEnd",k);h.addEventListener("transitionend",k);jQuery(h).addClass("afterAnimation")})},1)}}]},JQueryShow:function(b,c,a){var d=aa_int(c,b,"Duration",a);return[{animate:function(g,f){jQuery(g).hide();if(d==0){jQuery(g).show();f()}else{jQuery(g).show(d,"swing",f)}}}]},Hide:function(c,f,a){var b=aa_text(f,c,"FieldId",a);var d=aa_first(f,c,"AnimationType",a);if(!d||!b){return[]}jQuery(aa_find_field(b)).each(function(g,h){if(h&&d){d.hide(h,function(){ajaxart.run(f,c,"OnDone",a)})}});return[]},CssBasedHideAnimation:function(b,c,a){return[{hide:function(h,g){var f=ajaxart_screen_size(true);var d=aa_ctx(a,{ScreenWidth:[f.width+"px"],ScreenHeight:[f.height+"px"]});aa_addOnAttach(h,function(){var k=function(){if(g){g(h)}h.removeEventListener("webkitTransitionEnd",k);h.removeEventListener("transitionend",k)};h.addEventListener("webkitTransitionEnd",k);h.addEventListener("transitionend",k);jQuery(h).addClass(aa_attach_global_css(aa_text(c,b,"Css",d)))})}}]},JQueryHide:function(b,c,a){var d=aa_int(c,b,"Duration",a);return[{hide:function(g,f){if(d==0){jQuery(g).hide();f()}else{jQuery(g).hide(d,"swing",f)}}}]}});aa_gcs("scroll",{Scroll:function(b,c,a){var d=a.vars._Field[0];d.Scroll=aa_first(c,b,"Scroll",a);if(d.Scroll&&d.Scroll.Load){d.Scroll.Load([],a)}aa_field_handler(d,"ModifyControl",function(f,k,h,g){if(d.Scroll&&d.Scroll.OnModifyControl){d.Scroll.OnModifyControl([],aa_ctx(a,{ControlElement:[f]}))}aa_addOnAttach(f,function(){var m=f.firstChild;if(!m){return}var l=aa_ctx(a,{ControlElement:[m]});m.jbScroll=d.Scroll;if(d.Scroll&&d.Scroll.Prepare){d.Scroll.Prepare([],l)}if(m.ScrollElement){l=aa_ctx(a,{ControlElement:[m.ScrollElement]})}ajaxart.run(c,b,"Height",l);ajaxart.run(c,b,"Width",l);l.vars.ControlElement[0].jbSizeChanged=function(){if(d.Scroll.SizeChanged){d.Scroll.SizeChanged([],l)}};if(d.Scroll&&d.Scroll.Activate){d.Scroll.Activate([],l)}})})},BrowserScrollbar:function(b,c,a){return[{isObject:true,Activate:function(d,f){this.Control=f.vars.ControlElement[0];if(this.Control.parentNode.tagName.toLowerCase()!="td"){this.Control=this.Control.parentNode}jQuery(f.vars.ControlElement).css("overflow","auto")},ScrollToBottom:function(){this.Control.scrollTop=this.Control.scrollHeight}}]},NoScroll:function(c,d,b){var a=aa_attach_global_css(aa_text(d,c,"Css",b));return[{isObject:true,OnModifyControl:function(f,g){jQuery(g.vars.ControlElement).addClass(a)}}]},Scroll2:function(b,c,a){var f=a.vars._Field[0];f.ScrollStyle=aa_first(c,b,"Style",a);f.ScrollWidth=aa_first(c,b,"Width",a);f.ScrollHeight=aa_first(c,b,"Height",a);var d=aa_attach_global_css(f.ScrollStyle.Css,a);aa_field_handler(f,"ModifyCell",function(h,p,m,k,o){var n=h.firstChild||h;var l=n;while(l&&",table,tbody,tr,td,".indexOf(l.tagName.toLowerCase())>-1){l=l.parentNode}var g=f.ScrollObject=aa_renderStyleObject(f.ScrollStyle,{ScrollHeight:f.ScrollHeight,ScrollWidth:f.ScrollWidth,fixSize:function(q){if(f.ScrollHeight){f.ScrollHeight.apply(q)}if(f.ScrollWidth){f.ScrollWidth.apply(q)}},init:function(q){this.refresh=q.refresh;this.requiresDivWrapper=q.requiresDivWrapper},body:n,topDiv:l},k);if(f.ScrollHeight){jBart.bind(f.ScrollHeight,"update",function(){f.ScrollObject.refresh()})}if(f.ScrollWidth){jBart.bind(f.ScrollWidth,"update",function(){f.ScrollObject.refresh()})}if(f.ScrollObject.requiresDivWrapper){aa_addOnAttach(n,function(){var q=l.parentNode;g.divWrapper=jQuery('<div class="aa_scroll_wrapper"/>').addClass(d).append(l)[0];q.appendChild(g.divWrapper);f.ScrollObject.refresh()})}else{jQuery(l).addClass(d);f.ScrollObject.refresh()}})},IScroll:function(profile,data,context){var out={isObject:true};out.Load=function(){if(window.IScroll||window.loading_iscroll4){return}window.loading_iscroll4=true;var path=aa_text(data,profile,"JsLocation",context);aa_load_js_css(path,"js")};out.OnModifyControl=function(data1,ctx){jQuery(ctx.vars.ControlElement).css("overflow","auto")};out.Prepare=function(data1,ctx){var wrapper=document.createElement("DIV");var elem=ctx.vars.ControlElement[0];elem.ScrollElement=wrapper;elem.parentNode.appendChild(wrapper);wrapper.appendChild(elem);wrapper.jbScrolledElem=elem};out.Activate=function(data1,ctx){var paramsToEval="var params = "+aa_text(data,profile,"ScrollParams",context)+";";eval(paramsToEval);if(window.iScroll){var elem=ctx.vars.ControlElement[0];elem.IScroll=new iScroll(elem,params);if(elem.jbScrolledElem){elem.jbScrolledElem.IScroll=elem.IScroll}setTimeout(function(){elem.IScroll.refresh()},200);elem.contentChanged=function(){this.IScroll.refresh()};out.elem=elem}else{jQuery(ctx.vars.ControlElement).css("overflow","hidden");setTimeout(function(){out.Activate(data1,ctx)},500)}};out.Refresh=function(data1,ctx){this.elem.IScroll.refresh()};out.ScrollToBottom=function(time,onlyIfNeeded){if(!time){time=200}if(!onlyIfNeeded||this.elem.scrollHeight>this.elem.clientHeight){this.elem.IScroll.scrollTo(0,this.elem.clientHeight-this.elem.scrollHeight,time,false)}};return[out]},TinyScroll:function(c,d,b){var a={isObject:true};a.Load=function(){if(window.IScroll||window.loading_tinyscroll){return}window.loading_tinyscroll=true;var f=aa_text(d,c,"JsLocation",b);jQuery("body").append('<script type="text/javascript" src="'+f+'"><\/script>')};a.OnModifyControl=function(f,g){jQuery(g.vars.ControlElement).css("overflow","auto")};a.Prepare=function(f,h){var o=jQuery('<div class="tscrollbar">	                <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>	                <div class="viewport"><div class="overview"></div></div></div>');var k=aa_text(d,c,"Width",b);if(k!=""){o.width(k)}var g=aa_attach_global_css(aa_text(d,c,"Css",b));o.addClass(g);var l=h.vars.ControlElement[0];var m=l.ScrollElement=o.find(".viewport")[0];var n=l.parentNode;n.appendChild(o[0]);o.find(".overview").append(l);m.Scroll=o;m.contentChanged=function(){setTimeout(function(){m.Scroll.tinyscrollbar_update()},10)}};a.Activate=function(f,g){setTimeout(function(){var h=g.vars.ControlElement[0];a.scrollElem=h;if(h.Scroll.tinyscrollbar){h.Scroll.tinyscrollbar();h.Scroll.tinyscrollbar_update()}},1)};a.ScrollToBottom=function(){this.scrollElem.Scroll.tinyscrollbar_update("bottom")};return[a]},DeviceBottom:function(c,f,b){if(ajaxart.inPreviewMode){return}var d=b.vars.ControlElement[0];d.HeightDelta=aa_int(f,c,"Delta",b);var a=aa_text(f,c,"HtmlClassForDelta",b);if(a&&jQuery("."+a).length>0){d.HeightDelta=jQuery("."+a)[0].offsetHeight+(d.HeightDelta?d.HeightDelta:0)}d.StretchHeight=function(){ajaxart.ui.HeightToWindowBottom(this,this.HeightDelta)};d.StretchHeight();window.addEventListener("resize",function(){d.StretchHeight()});jQuery(d).addClass("aa_resize_bind");jBart.bind(d,"WindowResize",d.StretchHeight)},DeviceRight:function(b,d,a){if(ajaxart.inPreviewMode){return}var c=a.vars.ControlElement[0];c.WidthDelta=aa_int(d,b,"Delta",a);jQuery(c).addClass("aa_mobile_stretch");c.StretchWidth=function(){ajaxart.ui.WidthToWindowRight(this,this.WidthDelta)};c.StretchWidth();window.addEventListener("resize",function(){c.StretchWidth()});jQuery(c).addClass("aa_resize_bind");jBart.bind(c,"WindowResize",c.StretchWidth)},FixedHeight:function(d,g,c){if(ajaxart.inPreviewMode){return}var b=aa_text(g,d,"Height",c);if(!ajaxart.isIDevice){var f=aa_text(g,d,"HeightForNonMobile",c);if(f!=""){b=f}}var a=c.vars.ControlElement[0];if(b!=""){a.style.height=b}},FixedWidth:function(d,f,a){if(ajaxart.inPreviewMode){return}var c=aa_text(f,d,"Width",a);if(!ajaxart.isIDevice){var b=aa_text(f,d,"WidthForNonMobile",a);if(b!=""){c=b}}if(c!=""){a.vars.ControlElement[0].style.width=c}}});aa_gcs("scroll_size",{FixedHeight:function(c,d,b){var a=aa_int(d,c,"Height",b);var f=aa_text(d,c,"ApplyOn",b);return[{apply:function(g,h){if(!h){h=0}jQuery(g).css(f,a-h+"px")}}]},FixedWidth:function(c,d,a){var b=aa_int(d,c,"Width",a);var f=aa_text(d,c,"ApplyOn",a);return[{apply:function(g,h){if(!h){h=0}jQuery(g).css(f,b-h+"px")}}]},DeviceWidth:function(d,g,c){var k=aa_text(g,d,"ReduceWidthOfOtherField",c);var b=aa_bool(g,d,"StretchFromCurrentLocation",c);var f=aa_int(g,d,"ReducePixels",c);var h=aa_text(g,d,"ApplyOn",c);var a=parseInt(aa_text(g,d,"Percentages",c).replace("%",""));aa_init_onresize();return[{apply:function(l,m){function n(){var p=m?m:0;var o=ajaxart_screen_size(true).width;if(a&&!isNaN(a)){o*=a/100}if(k&&aa_find_field(k)[0]){p+=aa_find_field(k,"",true)[0].offsetWidth}if(f){p+=f}if(b){ajaxart.ui.WidthToWindowRight(l,p,h)}else{jQuery(l).css(h,o-p+"px")}}if(k){aa_addOnAttachMultiple(l,function(){setTimeout(n,1)})}else{if(b){aa_addOnAttachMultiple(l,n)}else{n()}}aa_attach_window_resize(n,l)}}]},DeviceHeight:function(d,g,c){var k=aa_text(g,d,"ReduceHeightOfOtherField",c);var b=aa_bool(g,d,"StretchFromCurrentLocation",c);var f=aa_int(g,d,"ReducePixels",c);var h=aa_text(g,d,"ApplyOn",c);var a=parseInt(aa_text(g,d,"Percentages",c).replace("%",""));aa_init_onresize();return[{apply:function(l,n){var m=function(){var p=0;var o=ajaxart_screen_size(true).height;if(a&&!isNaN(a)){o*=a/100}if(k&&aa_find_field(k)[0]){p+=aa_find_field(k,"",true)[0].offsetHeight}if(f){p+=f}if(b){ajaxart.ui.HeightToWindowBottom(l,p,h)}else{jQuery(l).css(h,o-p+"px")}};if(k){aa_addOnAttachMultiple(l,function(){setTimeout(m,1)})}else{if(b){aa_addOnAttachMultiple(l,m)}else{m()}}aa_attach_window_resize(m,l)}}]}});aa_gcs("field_control",{Image:function(b,c,a){var d=a.vars._Field[0];d.Control=function(k,f){var h=aa_first(k,b,"Image",a);if(h&&h.Url){h.StaticUrl=aa_totext(h.Url(k,a))}var g=aa_first(c,b,"Style",a);return[aa_renderStyleObject(g,{Field:d,image:h,data:k[0]},a)]}},CustomXtmlControl:function(b,c,a){var d=a.vars._Field[0];d.Control=function(g,f){return ajaxart.run(g,b,"Control",aa_merge_ctx(a,f))}},CustomControl:function(b,c,a){var d=a.vars._Field[0];d.Control=function(h,f){var g=ajaxart.runNativeHelper(h,b,"StyleObject",a)[0];return[aa_renderStyleObject(g,{Field:d,Data:h},a)]}}});aa_gcs("field_feature",{Css:function(d,f,c){var g=c.vars._Field[0];var b=aa_text(f,d,"Css",c);var a=aa_attach_global_css(b,null,g.Id,true);aa_field_handler(g,"ModifyCell",function(h,o,l,k,n){jQuery(h).addClass(a+"_wrapper");var m=h.firstChild||h;jQuery(m).addClass(a)},null,200)}});function aa_init_onorientchange_MobileDeviceStretchBottomRight(){if(window.aa_onorientchange_MobileDeviceStretchBottomRight){return}window.aa_MobileDeviceBottomRight_orientation=function(b){var a=jQuery(".aa_mobile_stretch");for(var c=0;c<a.length;c++){if(a[c].StretchHeight){a[c].StretchHeight()}if(a[c].StretchWidth){a[c].StretchWidth()}if(a[c].IScroll){a[c].IScroll.refresh()}}};window.addEventListener("resize",aa_MobileDeviceBottomRight_orientation,false)}function aa_create_text_filter(a){return function(c){var b=function(f){var d=aa_totext(f);if(d==""){return[]}return d.toLowerCase().split(",")};return{TextFilter:true,filterData:b(c),SetFilterData:function(d){this.filterData=b(d)},ToSQLText:function(d){return ajaxart.totext_array(d)},Match:function(h,k){if(this.filterData.length==0){return true}for(var g in this.filterData){var f=(""+k[h.Id]).toLowerCase().indexOf(this.filterData[g]);var d=a?f==0:f>-1;if(d){return true}}return false},HighlightSelectedText:function(g,d){var f=this.filterData[0];if(g.innerHTML.toLowerCase().indexOf(f)!=-1){g.innerHTML=ajaxart_field_highlight_text(g.innerHTML,f,d)}}}}}function aa_create_search_words_text_filter(a){return function(c){var b=function(f){var h=aa_totext(f).toLowerCase();var g={searchWordsPattern:true};g.text=h;var d=g.text.split(" ");g.p1=(d.length>0&&" "+d[0]);g.p2=(d.length>1&&" "+d[1]);g.p3=(d.length>2&&" "+d[2]);g.p4=(d.length>3&&" "+d[3]);g.words=d.length;return g};return{TextFilter:true,filterData:b(c),SetFilterData:function(d){this.filterData=b(d)},ToSQLText:function(d){return ajaxart.totext_array(d)},Match:function(k,n){var h=this.filterData;if(!h){return true}if(h.text=="sony"){}var m=n[k.Id];var g=" "+m.toLowerCase().replace(/^\s*|\s*$/g," ");var f=0,d=false;var l=h.p1;if(h.words>1){if(l&&g.indexOf(l)!=-1){f++}if(h.p2&&g.indexOf(h.p2)!=-1){f++}if(h.p3&&g.indexOf(h.p3)!=-1){f++}if(h.p4&&g.indexOf(h.p4)!=-1){f++}if(f==h.words){d=true}}else{if(g.indexOf(l)==1){d=true}else{if(g.indexOf(l)>0){f++}}}if(d||f==h.words){return true}return false},HighlightSelectedText:function(l,d){var h=this.filterData;var m,k,g,f;if(h.p1){m=h.p1.substring(1)}if(h.p2){k=h.p2.substring(1)}if(h.p3){g=h.p3.substring(1)}if(h.p4){f=h.p4.substring(1)}if(m&&l.innerHTML.toLowerCase().indexOf(m)!=-1){l.innerHTML=ajaxart_field_highlight_text(l.innerHTML,m,d)}if(k&&l.innerHTML.toLowerCase().indexOf(k)!=-1){l.innerHTML=ajaxart_field_highlight_text(l.innerHTML,k,d)}if(g&&l.innerHTML.toLowerCase().indexOf(g)!=-1){l.innerHTML=ajaxart_field_highlight_text(l.innerHTML,g,d)}if(f&&l.innerHTML.toLowerCase().indexOf(f)!=-1){l.innerHTML=ajaxart_field_highlight_text(l.innerHTML,f,d)}}}}}aa_gcs("ui",{Image:function(f,g,c){var k=aa_text(g,f,"Source",c);var h=ajaxart_multilang_text(aa_text(g,f,"Title",c),c);var d=aa_text(g,f,"Width",c);var a=aa_text(g,f,"Height",c);var b=jQuery("<img />")[0];b.setAttribute("src",k);b.setAttribute("title",h);if(a!=""){b.setAttribute("height",a)}if(d!=""){b.setAttribute("width",d)}if(ajaxart.subprofiles(f,"OnClick")!=null){b.className="clickable"}jQuery(b).click(function(){if(window.aa_incapture){return}ajaxart.run(g,f,"OnClick",aa_ctx(c,{ControlElement:[this]}))});return[b]},HtmlControl:function(d,f,c){var b=aa_text(f,d,"Html",c);var a=aa_text(f,d,"Css",c);var g=document.createElement("DIV");if(aa_bool(f,d,"WordWrap",c)){g.style.whiteSpace="normal"}g.innerHTML=b;if(a!=""){g.className=aa_attach_global_css(a)}return[g]},Text:function(f,g,a){var k=aa_text(g,f,"Text",a);var d=aa_text(g,f,"Style",a);var c=aa_bool(g,f,"MultiLang",a);if(c){k=aa_text([k],ajaxart.parsexml('<s t="text.MultiLang" Pattern="%%" Dynamic="true"/>'),"",a)}if(!aa_bool(g,f,"HtmlContents",a)){k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")}var b=document.createElement("span");if(d!=""){aa_setCssText(b,d)}b.className="ajaxart_text";b.innerHTML=k;var h=aa_text(g,f,"Hint",a);if(h!=""){b.setAttribute("title",h)}return[b]},ControlWithAction:function(d,g,c){ajaxart.run(g,d,"RunBeforeControl",c);var b=ajaxart.run(g,d,"Control",c);var a=aa_ctx(c,{ControlElement:b,_ElemsOfOperation:b});if(aa_bool(g,d,"RunAfterControlWithTimer",c)){var f=1;if(ajaxart.isSafari){f=100}setTimeout(function(){ajaxart.run(g,d,"RunAfterControl",a)},f)}else{ajaxart.run(g,d,"RunAfterControl",a)}return b},DataBind:function(d,f,g){var c=ajaxart.getVariable(g,"InputForChanges");var a=aa_first(f,d,"Script",g);var b=f;ajaxart.databind(b,c,g,a);return f},ElementOfClass:function(b,h,c){var n=aa_text(h,b,"Cls",c);var d=aa_bool(h,b,"OnlyFirst",c);var m=(aa_text(h,b,"Direction",c)=="down");var a;if(!ajaxart.ishtml(h)){ajaxart.log("ElementOfClass - input is not html","error");return[]}var k=0;var l=[];if(m){l.push(h[0])}else{if(h[0].parentNode!=null){l.push(h[0].parentNode)}}var f=[];while(k<l.length){var g=l[k];k++;if(jQuery.inArray(n,g.className.split(/\s+/))>-1){if(d){return[g]}else{f.push(g)}}if(m){a=g.firstChild;while(a!=null){if(a.nodeType==1){l.push(a)}a=a.nextSibling}}else{if(g.parentNode!=null&&g.parentNode.nodeType==1){l.push(g.parentNode)}}}return f},HasClass:function(c,d,b){var a=aa_text(d,c,"Cls",b);if(jQuery(d).hasClass(a)){return["true"]}return[]},Html:function(d,f,h){var c=aa_text(f,d,"Html",h);var a=aa_text(f,d,"Tag",h);var g=aa_bool(f,d,"DynamicContent",h);if(c==""){c=aa_xml2htmltext(ajaxart.childElem(d,"*"));if(g){c=ajaxart.dynamicText(f,c,h,f,false,true)[0]}}if(a!=""){var b=document.createElement(a);b.innerHTML=c;return[b]}else{if(c==null){return[]}return[jQuery(c)[0]]}},ControlWithCss:function(c,d,b){var f=ajaxart.run(d,c,"Control",b);var a=aa_text(d,c,"Css",b);jQuery(f).addClass(aa_attach_global_css(a));return f},ItemList:function(c,w,b,k,d){var l=aa_string2id(aa_text(w,c,"ID",b));var o={ID:[l],isObject:true};var p=aa_ctx(b,{_ParentCntr:b.vars._Cntr,_Cntr:[o]});if(aa_bool(w,c,"DataHolderCntr",b)){p=aa_ctx(p,{DataHolderCntr:[o]})}var g;if(aa_paramExists(c,"DataHolder")&&!k){o.DataHolder=dataholder=aa_first(w,c,"DataHolder",p);o.Fields=dataholder.Fields;o.Items=g=[{isObject:true,Items:dataholder.Wrappers}];p=aa_ctx(p,{DataHolderCntr:[o],_Items:g})}else{g=k||ajaxart.run(w,c,"Items",p);if(!g[0]){g=[{Items:[]}]}o.Items=g;ajaxart.setVariable(p,"_Items",g);var q=aa_ctx(p,{_FormulaInput:g[0].Items});var m=ajaxart.runsubprofiles(w,c,"Field",q);ajaxart.concat(m,ajaxart.run(w,c,"Fields",q));o.Fields=m}if(d){var u=d}else{var u=ajaxart.run(w,c,"Presentation",p);u=u.concat(ajaxart.runsubprofiles(w,c,"Aspect",p))}for(var t=0;t<o.Fields.length;t++){if(o.Fields[t].CntrAspects){var r=o.Fields[t].CntrAspects;for(var s=0;s<r.length;s++){u.push(r[s].GetContent(w,p)[0])}}}var f=function(x){return function(z,y){return ajaxart.gcs.ui.ItemList(c,w,x,z,y)}};for(var t=0;t<u.length;t++){if(u[t].takeOver!=null){return u[t].takeOver(u,g,f(p),p)}}o.Ctrl=jQuery('<div class="aa_container aa_inherit_selection"><div class="aa_container_header"/><ul style="list-style: none; padding:0; white-space: normal;" class="aa_list aa_listtop aa_cntr_body"/><div class="aa_container_footer"/></div>')[0];if(l!=""){jQuery(o.Ctrl).addClass("Page_"+l)}for(var t=0;t<u.length;t++){ajaxart.runScriptParam(w,u[t].CreateContainer,p)}o.Ctrl.Cntr=o;ajaxart.databind([o.Ctrl],w,b,c);o.Items=g;o.PostActors=[];o.PreActors=[];o.RegisterForPostAction=function(y,x){o.PostActors.push({phase:x||0,aspect:y})};o.RegisterForPreAction=function(y,x){o.PreActors.push({phase:x||0,aspect:y})};o.Aspects=u;o.XtmlSource=[{isObject:true,script:c,input:w,context:b}];o.createNewElement=function(y,z){var x=document.createElement("li");x.className="aa_item";x.ItemData=y;ajaxart_add_foucs_place(x);if(z){z.push(x)}return x};o.insertNewElement=function(y,x){var z=ajaxart_find_list_under_element(x);if(z!=null){z.appendChild(y)}};o.next=ajaxart_tree_next;o.prev=ajaxart_tree_prev;o.ElemsOfOperation=function(){if(this.GetMultiSelectedItems){return this.GetMultiSelectedItems()}return jQuery(this.Ctrl).find(".aa_selected_item").slice(0,1).get()};o.ItemsOfOperation=function(){var x=this.ElemsOfOperation();var z=[];for(var y in x){z=z.concat(x[y].ItemData)}return z};o.Context=p;aa_setMethod(o,"Operations",c,"Operations",b);for(var t=0;t<o.Aspects.length;t++){try{ajaxart_runMethod(w,o.Aspects[t],"InitializeContainer",p)}catch(v){ajaxart.log("error in aspect "+o.Aspects[t].XtmlSource[0].script.getAttribute("t")+": "+v.message+(v.stack||""),"error")}}o.PreActors.sort(function(y,x){return y.phase>x.phase?1:-1});o.PostActors.sort(function(y,x){return y.phase>x.phase?1:-1});for(var t=0;t<o.PreActors.length;t++){ajaxart.trycatch(function(){ajaxart_runMethod(w,o.PreActors[t].aspect,"PreAction",p)},function(x){ajaxart.logException(x)})}if(o.DataHolder){o.DataHolder.UserDataView.Sort=o.Dataview_PreSort||[]}aa_recalc_filters_and_refresh(o,w,p,false);if(o.SoftSelector){var h=ajaxart_find_aa_list(o);var n=jQuery(h).find(".aa_item").get();var a=ajaxart.totext_array(ajaxart.runScriptParam(w,o.SoftSelector.GetValue,o.Context));for(var t=0;t<n.length;t++){if(o.ItemId&&a!=""&&o.ItemId(n[t].ItemData,n[t])==a){ajaxart_uiaspects_select(jQuery(n[t]),jQuery([]),"auto",o.Context)}}}return[o.Ctrl]},Document:function(f,h,d){var c=aa_string2id(aa_text(h,f,"ID",d));var k=ajaxart.runsubprofiles(h,f,"Field",d);ajaxart.concat(k,ajaxart.run(h,f,"Fields",d));var a=ajaxart.run(h,f,"Item",d);var l=function(m,n){return ajaxart.run(m,f,"Operations",aa_merge_ctx(d,n))};var b=function(n,o){var s=aa_merge_ctx(d,o);var q=o.vars._Cntr[0];var m=q.Fields;var r=ajaxart.run(h,f,"Presentation",s);ajaxart.concat(r,ajaxart.runsubprofiles(h,f,"Aspect",s));for(var p=0;p<m.length;p++){if(m[p].CntrAspects){r=r.concat(m[p].CntrAspects)}}return r};var g=aa_uidocument(h,c,a,k,b,l,d);ajaxart.databind([g],h,d,f);g.Cntr.XtmlSource=[{isObject:true,script:f,input:h,context:d}];return[g]},UseGroupAsPage:function(b,c,a){return[{ID:"inner_page",Fields:[],Control:function(d,g){var k=aa_text(c,b,"Group",a);var m=g.vars._Cntr&&g.vars._Cntr[0];if(!m){ajaxart.log("UseGroupAsPage: Can not find cntr","error");return[]}var f=aa_fieldById(k,m.Fields);if(!f){ajaxart.log("Can not find group "+k+" in container "+m.ID[0],"error")}this.Fields=f?[f]:[];var l=g.vars._PageParams[0];var h=l?l.DataItems[0].Items:d;if(f){return f.Control(h,g)}return[]}}]},ToggleClassByCondition:function(c,f,b){var d=aa_first(f,c,"Element",b);if(!ajaxart.ishtml_item(d)){return[]}var g=aa_bool(f,c,"ClassCondition",b);var a=aa_text(f,c,"Class",b);if(g){jQuery(d).addClass(a)}else{jQuery(d).removeClass(a)}return[]}});aa_gcs("uiaction",{GoToPage:function(f,g,c){var b=aa_text(g,f,"Url",c);if(b==""){return}var d=aa_text(g,f,"Type",c);var h=(d=="navigate current page")?"_top":"_new";if(ajaxart.inPreviewMode==true){return[]}if(h=="_new"){var a=ajaxart.getControlElement(c);if(a.length>0&&!ajaxart.isattached(a[0])){return g}h="_blank"}window.open(b,h);return g},AddClass:function(d,f,c){var b=aa_text(f,d,"Cls",c);var a=ajaxart.getControlElement(c,true);jQuery(a).addClass(b);return f},RunUiActions:function(d,g,c){var h=ajaxart.subprofiles(d,"Action");var k=ajaxart.clone_context(c);ajaxart.setVariable(k,"ControlElement",g);var f=ajaxart.getVariable(c,"InputForChanges");for(var b=0;b<h.length;b++){var a=ajaxart.run(f,h[b],"",k)}return g},SetText:function(c,d,b){var k=aa_text(d,c,"Text",b);var h=aa_text(d,c,"Mode",b);var a=ajaxart.getControlElement(b);if(a.length==0){return[]}var f=a[0];if(jQuery(f).hasClass("aa_text")){f.innerHTML=k;return}if(h=="CharByChar"){f.value="";f.setAttribute("value","");for(var g=0;g<k.length;g++){xFireEvent(f,"keydown",{keyCode:k.charCodeAt(g),CharByChar:true},b.vars.InTest!=null);xFireEvent(f,"keyup",{keyCode:k.charCodeAt(g),CharByChar:true},b.vars.InTest!=null)}return}var l=f.tagName.toLowerCase();if(f.setTinyMCEText){f.setTinyMCEText(k)}if(l=="textarea"){f.value=k}else{if(l=="input"){if(h=="ReplaceAll"){f.setAttribute("value",k);f.value=k}else{if(h=="InsertAtCaret"){if("selectionStart" in f){f.value=f.value.substr(0,f.selectionStart)+k+f.value.substr(f.selectionEnd,f.value.length)}else{if(document.selection){f.focus();document.selection.createRange().text=k}}}else{if(h=="InsertAtEnd"){f.value=f.value+k;f.setAttribute("value",f.value)}}}}else{if(jQuery(f).hasClass("button_hyperlink_image")){ajaxart.each(jQuery(f).find(">a"),function(m){jQuery(m).text(k)})}else{if(l=="div"||l=="span"||l=="button"||l=="a"){f.innerHTML=k}}}}aa_inuiaction=true;if(!aa_bool(d,c,"DoNotFireEvents",b)){xFireEvent(f,"keydown");xFireEvent(f,"keyup")}if(!aa_bool(d,c,"StayInControl",b)){xFireEvent(f,"blur",null)}aa_inuiaction=false;return[]}});aa_gcs("uipref",{InCookies:function(b,c,a){var d={isObject:true};d.GetProperty=function(f,g){var l=aa_totext(g.vars.Prefix);var k=aa_totext(g.vars.Property);var h=ajaxart.cookies.valueFromCookie(l+k);if(h==null){return[]}return[h]};d.SetProperty=function(f,g){var l=aa_totext(g.vars.Prefix);var k=aa_totext(g.vars.Property);var h=aa_totext(g.vars.Value);ajaxart.cookies.writeCookie(l+k,h)};return[d]},PrefValue:function(c,g,b){var f=aa_text(g,c,"Prefix",b);var d=aa_text(g,c,"Property",b);var a=ajaxart_getUiPref(f,d,b);if(a==null){return[]}else{return[a]}},SetPrefValue:function(b,g,a){var f=aa_text(g,b,"Prefix",a);var d=aa_text(g,b,"Property",a);var c=aa_text(g,b,"Value",a);ajaxart_setUiPref(f,d,c,a);return[]}});function aa_switch(c,h,b){var g=aa_text(h,c,"Value",b);var f=ajaxart.subprofiles(c,"Case");for(var a=0;a<f.length;a++){var d=(g!="")&&(g==aa_text(h,f[a],"If",b));if(!d){d=aa_bool(h,f[a],"IfCondition",b)}if(d){return ajaxart.run(h,f[a],"Then",b)}}return ajaxart.run(h,c,"Default",b)}ajaxart.xtml=ajaxart.xtml||{};ajaxart.yesno=ajaxart.yesno||{};ajaxart.yesno.is_empty=function(b,c){if(b.length==0){return["true"]}if(typeof(b[0])=="string"&&b[0]==""){return["true"]}if(ajaxart.isxml(b[0])){if(b[0].nodeType==3||b[0].nodeType==4){return b[0].nodeValue==""}if(b[0].nodeType==2){return b[0].nodeValue==""}if(b[0].nodeType==1&&c){if(b[0].attributes.length>0){return[]}var a=b[0].childNodes;if(a.length==0){return["true"]}if(a.length==1&&(a[0].nodeType==3||a[0].nodeType==4)&&a[0].nodeValue==""){return["true"]}}}return[]};ajaxart.yesno.itemsEqual=function(c,b){var d=c;var g=b;if(ajaxart.isxml(c)){if(c.nodeType==2){d=""+c.nodeValue}else{d=ajaxart.xml2text(c).replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/>[ ]*</g,"><")}if(ajaxart.ishtml(c)){d=d.replace(/class=(\w+)/g,'class="$1"')}}if(ajaxart.isxml(b)){if(b.nodeType==2){g=""+b.nodeValue}else{g=ajaxart.xml2text(b).replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/>[ ]*</g,"><")}if(ajaxart.ishtml(b)){g=g.replace(/class=(\w+)/g,'class="$1"')}}if(ajaxart.isxml(c)&&!ajaxart.isxmlelement(b)&&c.nodeType==1){d=ajaxart.xml.innerTextStr(c)}if(ajaxart.isxml(b)&&!ajaxart.isxmlelement(c)&&b.nodeType==1){g=ajaxart.xml.innerTextStr(b)}if(ajaxart.isObject(c)||ajaxart.isObject(b)){if(ajaxart.isObject(c)&&ajaxart.isObject(b)){for(i in c){if(i!="isObject"){var a=c[i];var f=b[i];if(typeof(f)!=typeof(a)){return false}if(typeof(a)=="undefined"&&typeof(f)=="undefined"){continue}if(ajaxart.isArray(a)&&a.length>0){a=a[0]}if(ajaxart.isArray(f)&&f.length>0){f=f[0]}if(ajaxart.isArray(a)&&a.length==0&&ajaxart.isArray(f)&&f.length==0){continue}if(!ajaxart.yesno.itemsEqual(a,f)){return false}}}return true}return false}if(d==g){return true}return false};function aa_convertToXml(d,b,f){if(d.nodeType==9){return d.documentElement}if(ajaxart.isxml_item(d)){return d}if(d.getNumberOfColumns){return aa_GoogleDataTableToXml(d)}if(typeof(d)=="object"){return aa_JSON2Xml(d,"Top")}if(typeof(d)=="string"){var c=d.match(/^\s*[{[]+/);var a=d.match(/^\s*[<]+/);if(c){return aa_JSON2Xml(d,"Top")}else{if(a){return ajaxart.parsexml(d,"",f)}else{if(d.indexOf(",")!=-1){return aa_CSV2Xml(d)}}}}}function jbart_load_widget(d,c){window.jbart_widgets_xml=window.jbart_widgets_xml||{};if(window.jbart_widgets_xml[d]){return window.jbart_widgets_xml[d].xml}if(!c){c=window["jBartWidget_"+d]}var f=[];var a=aa_convertToXml(c,"widget xml",f);window.jbart_widgets_xml[d]={xml:a};ajaxart.load_xtml_content("widget",aa_xpath(a,"bart_dev/db/bart_unit/bart_unit")[0]);var b={script:"",compiled:function(g,h){window.jbart_widgets_xml[d].context=h}};aa_run_component("jbart_api.LoadWidget",[],ajaxart.newContext(),{WidgetXml:[a],Action:b})[0];return a}function jbart_run_widget_action(a,b){var h=[];if(typeof(b)!="undefined"){h=[b]}var d=ajaxart.parsexml('<xtml t="sample.'+a+'" />');var g=jQuery(".jBartWidget")[0];var c=ajaxart.newContext();if(g){c=g.firstChild.ajaxart.params}else{var f=jQuery(".aa_with_bartcontext")[0];if(f){c=f.ajaxart.params}}ajaxart.run(h,d,"",c)}jBart.db=jBart.db||{};jBart.db.get=function(a){a.error=a.error||function(){};a.server=a.server||"http://jbartdb.appspot.com";a.cache=a.cache||true;var b={url:a.server+"/jbart_db.js?op=loadnode&contenttype="+a.contentType+"&id="+a.id,cache:false,success:function(c){c=ajaxart.parsexml(c);if(c&&c.getAttribute("_type")==a.contentType){a.success(c)}else{if(a.defaultValue){a.defaultValue.setAttribute("_type",a.contentType);a.defaultValue.setAttribute("id",a.id);a.success(ajaxart.parsexml(a.defaultValue))}else{a.error({message:"node "+a.server+"::"+a.contentType+":"+a.id+" not found, and no default value",code:"node does not exist"})}}},error:function(){a.error({message:""})}};aa_crossdomain_call(b,true)};jBart.db.save=function(b){b.error=b.error||function(){};b.server=b.server||"//jbartdb.appspot.com";if(!b.data||b.data.nodeType!=1||!b.data.getAttribute("id")||!b.data.getAttribute("_type")){return b.error('settings.data should be an xml of the format: <item id="xx" _type="myType" myatt="..."><myElem>..</myElem></item>')}b.data.setAttribute("vid","force");var c=b.data.getAttribute("id");var a=b.data.getAttribute("_type");aa_crossdomain_call({type:"POST",url:b.server+"/bart.php?op=savenode",data:ajaxart.xml2text(b.data,false),cache:false,success:function(d){d=ajaxart.parsexml(d);if(d&&d.getAttribute("type")=="success"){b.success()}else{b.error()}},error:function(){b.error()}},false)};jBart.db.query=function(b){b.error=b.error||function(){};b.server=b.server||"http://jbartdb.appspot.com";if(typeof(b.headersonly)=="undefined"){b.headersonly=true}var a=b.headersonly?"true":"false";var c={url:b.server+"/jbart_db.js?op=query&contenttype="+b.contentType+"&headersonly="+a,cache:b.cache?true:false,success:function(d){d=ajaxart.parsexml(d);b.success(d)},error:function(){b.error({message:""})}};aa_crossdomain_call(c,true)};jBart.appendWidget=function(b,g){function h(k){ajaxart.log(k);g.error({message:k})}g.success=g.success||function(){};g.error=g.error||function(k){jQuery(b).append(jQuery("<span/>").text(k.message))};ajaxart.base_images=g.base_images_dir||ajaxart.base_images;if(!b){return h("can not add to a null element")}jQuery(b).addClass("jBartWidget");if(!g){return h("missing params")}function f(m){var t=[];if(!g.widget_src){return h("widget source for "+(m||"unknown")+" is not available")}var q=aa_convertToXml(g.widget_src,"widget xml",t);if(q.tagName=="Error"){return h(q.getAttribute("message"))}if(t.length>0){return h(t[0])}m=m||q.getAttribute("id");var p=g.language?g.language:"";var r=g.page?[g.page]:[];g.data=g.data||{};g.rawData=g.rawData||{};for(var s in g.data){var k="jBartWidget_"+m+"_"+s;window[k]=jbart_data(g.data[s],"single")}for(var s in g.rawData){var n=ajaxart.isArray(g.rawData[s])?g.rawData[s]:[g.rawData[s]];window["jBartWidget_"+m+"_"+s]=n}ajaxart.load_xtml_content("widget",aa_xpath(q,"bart_dev/db/bart_unit/bart_unit")[0]);var l={WidgetXml:[q],Page:r,_Language:[p],OnError:function(u){h(aa_totext(u))}};var o=aa_run_component("jbart_api.ShowWidget",[],aa_ctx(ajaxart.newContext(),{Language:[p]}),l);aa_register_document_events();if(o.length==0){return null}jQuery(o[0]).addClass("ajaxart"+ajaxart.deviceCssClass);if(p=="hebrew"){jQuery(o[0]).addClass("right2left")}return o[0]}if(g.widget_id){var a=g.widget_id;g.spinner=g.spinner||"//www.google.com/ig/images/spinner.gif";if(!g.nospinner){b.appendChild(jQuery('<img class="spinner" src="'+g.spinner+'" ></img>')[0])}window["jBartWidget_"+a+"_loaded"]=function(){g.widget_src=window["jBartWidget_"+a];jQuery(b).find(">.spinner").remove();var k=f(a);if(k){b.appendChild(k);aa_element_attached(b);g.success()}else{return h("widget returned an empty control")}};var d=(g.widget_repository||"//jbartdb.appspot.com")+"/widget.js?id="+a;aa_load_js_css(d,"js")}else{if(g.widget_src){var c=f();if(c){b.appendChild(c);aa_element_attached(b);g.success()}else{return h("widget returned an empty control")}}else{return h("missing param widget_id or widget_src")}}};jBart.dialogs={};jBart.bart={};jBart.isReady=false;jBart.ready=function(a){if(jBart.isReady){ajaxart.ready(a,[],[])}else{jBart.bind(jBart,"ready",a)}};function jbart_init(){(function(b){b.fn.jBart=function(c){return this.each(function(){var d=this;jBart.ready(function(){if(!c.widget){console.error("jBart: param 'widget' is missing");return}if(!jBartWidgets[c.widget]){console.error("jBart: '"+c.widget+" is not a valid widget");return}jBartWidgets[c.widget].show(d,c)})})}})(jQuery);var a=function(){jQuery().ready(function(){if(!ajaxart.ready){return}ajaxart.ready(function(){jBart.isReady=true;jBart.trigger(jBart,"ready");jQuery().find(".jBartWidget").each(function(){var d={};if(this.className=="jBartWidget"){return}var b=(this.className+" ").split("jBartWidget ")[1].split("jBartWidget_")[1].split(" ")[0];var c="jBartWidget_"+b;d.widget=window[c];if(this.className.indexOf("jBartWidgetPage_")>-1){d.page=(this.className+" ").split("jBartWidgetPage_")[1].split(" ")[0]}if(d.widget){jQuery(this).jBart(d)}else{ajaxart.log("can not find widget "+b)}jQuery("#ajaxart_loading").hide()})},[])})};if(window.jBartPreloader){window.jBartPreloader(a)}else{a()}window.jbart_data=jbart_data}jbart_init();function jbart_data(f,k){var a=[];var g=aa_convertToXml(f,"widget data",a);if(!g){return null}var b=g.tagName.split(":").pop();if(b=="feed"||b=="rss"){var c=(b=="feed")?"atom:entry":"channel/item";var h=aa_xpath(g,c);if(h.length>0){var l="<top>";for(var d in h){l+=ajaxart.xml.prettyPrint(h[d],"",true)}l+="</top>";g=aa_convertToXml(l,"cleaned data",a)}}if(!k||k=="multiple"){return aa_xpath(g,"*")}return[g]}if(!aa_text){aa_text={}}function aa_text_matchesRegex(b,a){return b.match("^"+a+"$")}aa_text_cacheFastFind={};function aa_text_capitalizeToSeperateWords(c){var b="";var d=0;var a=1;while(a<c.length){if(c.charAt(a)>="A"&&c.charAt(a)<="Z"){if(a+1<c.length&&(c.charAt(a-1)<"A"||c.charAt(a-1)>"Z")){b=b+c.substring(d,a)+" "+c.charAt(a);d=a+1}}a++}b=b+c.substring(d);return b}function ajaxart_language(a){if(a.vars.Language==null||a.vars.Language.length==0){return""}return ajaxart.totext(a.vars.Language[0])}function aa_multilang_text(c,a,d,b){return ajaxart_multilang_run(c,a,d,b)[0]||""}function ajaxart_multilang_run(f,b,g,c){var d=ajaxart.fieldscript(b,g,true);if(d==null){return[""]}var a=null;if(d.nodeType==2){if(d.nodeValue.indexOf("%")!=-1){a=ajaxart.dynamicText(f,ajaxart_multilang_text(d.nodeValue,c),c);if(ajaxart.xtmls_to_trace.length>0){if(g==""){g=b.nodeName;b=aa_xpath(b,"..")[0]}if(b.getAttribute("Trace")==g){ajaxart.trace(b,f,a,c,g)}aa_try_probe_test_attribute(b,g,f,a,c,f)}}}if(a==null){a=ajaxart.run(f,b,g,c)}if(a.length>0){a=[ajaxart_multilang_text(ajaxart.totext_array(a),c)]}return a}function ajaxart_multilang_text(d,a){if(a.vars.Language&&a.vars.Language.length>0&&d!=""){if(!window.aa_mlTable){ajaxart_fill_mlTable()}var c=aa_totext(a.vars.Language);if(aa_mlTable[c]&&aa_mlTable[c][d]){return aa_mlTable[c][d]}if(typeof(aa_mlDefaultLanguage)!="undefined"&&aa_mlTable[aa_mlDefaultLanguage]&&aa_mlTable[aa_mlDefaultLanguage][d]){return aa_mlTable[aa_mlDefaultLanguage][d]}var b=d.toLowerCase();if(aa_mlTable[c]&&aa_mlTable[c][b]){return aa_mlTable[c][b]}}return d}jBart.multiLang=function(b,a){return ajaxart_multilang_text(b,a)};function ajaxart_fill_mlTable(){window.aa_mlTable=window.aa_mlTable||{};for(ns in ajaxart.components){var c=ajaxart.components[ns];for(var b in c){var a=c[b];if(a.getAttribute("type")=="text.MultiLangSuite"){ajaxart.run([],aa_xpath(a,"xtml")[0],"",ajaxart.newContext())}}}}ajaxart.lookup_cache={};ajaxart.occurrence_cache={};ajaxart.unique_number=1;function aa_ifThenElse(b,c,a){if(aa_bool(c,b,"If",a)){return ajaxart.run(c,b,"Then",a)}else{return ajaxart.run(c,b,"Else",a)}}ajaxart.cookies={valueFromCookie:function(d){if(d==""){return null}if(ajaxart.isBackEnd){var a=""+aa_backend_Utils.GetCookie(d);return decodeURIComponent(a)}var g=d+"=";var b=document.cookie.split(";");for(var f=0;f<b.length;f++){var h=b[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return decodeURIComponent(h.substring(g.length,h.length))}}return null},writeCookie:function(b,c){var d=encodeURIComponent(c);b=encodeURIComponent(b);if(b==""){return}if(ajaxart.isBackEnd){aa_backend_Utils.AddCookie(b,d);return}var a=new Date();a.setMonth(a.getMonth()+1);if(b!=""){document.cookie=b+"="+d+"; expires="+a.toUTCString()}},cleanCookies:function(d){var a=decodeURIComponent(document.cookie).split(";");for(var b=0;b<a.length;b++){var f=a[b];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(d)==0){ajaxart.cookies.writeCookie(f.split("=")[0],"")}}}};function aa_RunAsyncQuery(g,d,c,f){if(d==null){f([],c,false);return}var b={callBack:f,marked:false,success:true};var h=aa_ctx(c,{_AsyncCallback:b});var a=[];ajaxart.trycatch(function(){if(typeof(d)=="function"){a=d(g,h)}else{if(d.compiled!=null){a=d.compiled(g,h)}else{a=ajaxart.run(g,d,"",h)}}},function(k){ajaxart.logException(k);return[]});if(!b.marked&&f){f(a,c,true)}}function ajaxart_RunAsync(g,d,c,f,a){if(d==null){f(g,c,false);return}var b={callBack:f,marked:false,success:true};var k=aa_ctx(c,{_AsyncCallback:b});if(ajaxart.debugmode){if(typeof(d)=="function"){if(a){d.call(a,g,k)}else{d(g,k)}}else{if(d.compiled!=null){d.compiled(g,k)}else{ajaxart.run(g,d,"",k)}}}else{try{if(typeof(d)=="function"){if(a){d.call(a,g,k)}else{d(g,k)}}else{if(d.compiled!=null){d.compiled(g,k)}else{ajaxart.run(g,d,"",k)}}}catch(h){ajaxart.logException(h)}}if(!b.marked&&f){f(g,c,true)}}function ajaxart_resourceByID(f,c){if(!c.vars._BartContext){return null}var d=c.vars._BartContext[0];if(!d.Resources){return null}var b=d.Resources;for(var a=0;a<b.length;a++){if(aa_totext(b[a].ID)==f){return b[a]}}return null}ajaxart.dialog={openPopups:[]};ajaxart.dialog.currentPopup=function(a){if(ajaxart.dialog.openPopups.length>0){return ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1]}};ajaxart.dialog.closeDialog=function(){var a=openDialogs.pop();aa_remove(a.dialogContent,false);aa_remove(a,false);aa_noOfOpenDialogs--;return a};ajaxart.dialog.positionPopup=function(c,p,l,k,d,b){var h=jQuery(c);var n=ajaxart_scroll_offset();var o=ajaxart_screen_size();var g={left:0,top:0},f={width:0,height:0};if(p!=null){g={left:ajaxart.ui.absoluteLeft(p),top:ajaxart.ui.absoluteTop(p)+p.offsetHeight};f={width:jQuery(p).width(),height:jQuery(p).height()}}else{if(d&&d.vars.MousePos){g={left:d.vars.MousePos[0].pageX,top:d.vars.MousePos[0].pageY}}}var m=(k)?0:2;if(b||(o.height+n.y<g.top+h.height()&&n.y<=g.top-h.height()-f.height)){g.top-=h.height()+f.height+m;c.RePosition=function(){ajaxart.dialog.positionPopup(c,p,null,k,d,true)}}else{g.top+=m}if((o.width+n.x<g.left+h.width()&&n.x<=g.left-h.width()-f.width)){g.left=o.width+n.x-h.width()-f.width;c.RePosition=function(){ajaxart.dialog.positionPopup(c,p,null,k,d,true)}}var a=false;jQuery(p).parents().each(function(){if(jQuery(this).css("position")=="fixed"){a=true}});if(a){h[0].style.position="fixed"}if(jQuery(p).parents(".right2left").length>0){h.css("right",document.body.clientWidth-f.width-g.left);h.addClass("right2left")}else{h.css("left",g.left)}h.css("top",g.top).fadeIn(150)};function ajaxart_popup_capture_click(h){var g=jQuery((typeof(event)=="undefined")?h.target:(event.tDebug||event.srcElement));if(g.parents(".customsuggestionpopup").length>0){return}if(g.parents(".contextmenu").length>0){return}if(g.parents(".capturebox").length>0){return}if(g.parents("html").length==0&&g[0].tagName.toLowerCase()!="html"){return}var d=ajaxart.dialog.openPopups;for(var f=0;f<d.length;f++){var b=d[d.length-f-1];if(g.parents(".aa_click_dosent_close_popup").length>0){var a=(b.Dlg)?b.Dlg.onElem:b.onElem;if(jQuery(a).parents(".aa_click_dosent_close_popup").length==0){return}}var c=(b.Dlg)?b.Dlg.Frame:b.contents.parentNode;if(g[0]!=c&&g.parents().filter(function(){return this==c}).length==0){if(!b.initialized){continue}jQuery("#log").append("click outside popup");if(b.Dlg&&!b.Dlg.JBStudio&&g.parents(".jbstudio_dlg").length>0){}else{aa_closePopup(b);if(b.Dlg){jBart.trigger(b.Dlg,"cancel")}}ajaxart_popup_capture_click(h);return}else{if(ajaxart.controlOfFocus){ajaxart.controlOfFocus.IgnoreBlur=true}return}}}function ajaxart_scroll_offset(){var b=0;var a=0;if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;b=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}}return{x:b,y:a}}function ajaxart_screen_size(a){var b=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var d=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);if(a&&jQuery(".studio_simulator").length>0){var c=jQuery(".studio_simulator")[0];d=c.clientHeight;b=c.clientWidth}return{width:b,height:d}}function ajaxart_dialog_close_all_popups(){aa_closePopup(ajaxart.dialog.openPopups[0])}function aa_capture_for_popup(a){if(window.captureEvents){a.Orig_mousedown=window.onmousedown;window.onmousedown=ajaxart_popup_capture_click}else{a.Orig_mousedown=document.onmousedown;document.onmousedown=ajaxart_popup_capture_click}}function aa_uncapture_for_popup(a){var b=a?a.Orig_mousedown:null;if(window.captureEvents){window.onmousedown=b}else{document.onmouseclick=b}}function aa_closePopup(a){if(window.aa_dont_close_popups){return}var b=ajaxart.dialog.openPopups;if(b.length==0){return}if(!a){a=b[b.length-1]}if(!aa_intest&&!a.initialized){return}var d=b[b.length-1];while(d&&d!=a){if(!d.initialized){if(b.length<=1){return}var f=b[b.length-2];if(f==a){var c=b.pop();f=b.pop();b.push(c);b.push(f);d=f}else{return}}aa_closePopup(d);b=ajaxart.dialog.openPopups;d=ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1]}if(d!=a){}ajaxart.dialog.openPopups.pop();aa_uncapture_for_popup(a);if(!a.Dlg){aa_remove(a.contents.parentNode,true)}if(a.returnFocusTo!=null){a.returnFocusTo.focus()}if(ajaxart.suggestbox&&ajaxart.ui.suggestBoxPopup){ajaxart.suggestbox.closePopup()}if(a.Dlg){a.Dlg.Close([],ajaxart.newContext(),true)}return[]}function aa_contentsOfOpenPopup(){var a=ajaxart.dialog.openPopups[ajaxart.dialog.openPopups.length-1];if(a!=null){return[a.contents]}return[]}function aa_fixTopDialogPosition(){var g=aa_top_dialog();if(g&&g.Dialog&&g.Dialog._FixDialogPosition){g.Dialog._FixDialogPosition();return}if(openDialogs.length==0){return[]}var c=openDialogs[openDialogs.length-1].dialogContent;var d=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth);var f=window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight);var b=0;var a=0;if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop;b=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}}if(jQuery(c).width()+ajaxart.ui.absoluteLeft(c)>d||jQuery(c).height()+ajaxart.ui.absoluteTop(c)>f){c.style.left=(d-jQuery(c).width())/2+b+"px";c.style.top=(f-jQuery(c).height())/2+a+"px"}return[]}aa_delayedRun=function(h,k,d,c){var b={id:k,handle:null};var g=function(l){return function(){l.handle=0;var m=false;if(l.startTime==null){l.startTime=new Date().getTime()}else{if(l.startTime+c>new Date().getTime()){m=true}}var n=h(m);if(n||m){jBart.utils.removeFromArray(ajaxart.runDelayed,b)}else{b.handle=setTimeout(g(b),d)}}};for(var f=0;f<ajaxart.runDelayed.length;f++){var a=ajaxart.runDelayed[f];if(typeof(a.id)==typeof(k)&&a.id==k){if(a.handle!=0){clearTimeout(a.handle)}ajaxart.runDelayed[f]=b;b.handle=setTimeout(g(b),d);return["true"]}}ajaxart.runDelayed.push(b);b.handle=setTimeout(g(b),d)};function ajaxart_xml_onchange(a,d,c){var f={disable:false,modified:false,compiled:d,context:c,autosavedelay:0,mode:"manual save"};for(var b=0;b<ajaxart.xmlsToMonitor.length;b++){if(ajaxart.xmlsToMonitor[b].xml==a){ajaxart.xmlsToMonitor[b].ajaxartOnChange=f;ajaxart.xmlsToMonitor[b].modifyInfo=f;return["true"]}}ajaxart.xmlsToMonitor.push({xml:a,modifyInfo:f})}ajaxart.xml.xpath=function(f,g,s,m){if(!g){return[f]}if(g.charAt(0)=="!"){return ajaxart.xml.xpath(f,g.substring(1,g.length),true)}if(f==null||!ajaxart.isxml(f)){return[]}var t=[];try{if(jQuery.browser.msie&&typeof(f.selectNodes)!="undefined"){f.ownerDocument.setProperty("SelectionLanguage","XPath");var a=f.selectNodes(""+g);for(var c=0;c<a.length;c++){t.push(a[c])}}else{if(ajaxart.isBackEnd){var k=com.artwaresoft.XmlUtils.XPath(f,g);for(var c=0;c<k.getLength();c++){t.push(k.item(c))}}else{var o=f.ownerDocument.evaluate(g,f,null,XPathResult.ANY_TYPE,null);if(o){var b=o.iterateNext();while(b){t.push(b);b=o.iterateNext()}}}}}catch(h){ajaxart.log("error calculating xpath: "+g+", xml:"+ajaxart.xmlescape(ajaxart.xml2text(f).substring(0,50))+"  "+(h.stack||""),"warning")}if(t.length>0&&t[0].nodeType==9){return[]}if(t.length==0&&s){try{var p=g;var q=f;while(p.indexOf("/")>-1){var n=p.indexOf("/");var r=p.substring(0,n);var q=ajaxart.xml.xpath(q,r,true)[0];p=p.substring(n+1)}if(p.charAt(0)=="@"){var l=p.substring(1);if(typeof(m)=="undefined"){m=""}if(l.indexOf("/")==-1){q.setAttribute(l,m)}}else{var d=aa_createElement(q,p);if(typeof(m)!="undefined"&&m!=""){d.appendChild(d.ownerDocument.createTextNode(m))}q.appendChild(d)}t=ajaxart.xml.xpath(f,g,false)}catch(h){ajaxart.log("failed create xpath item :"+g+","+h.message);return[]}}return t};ajaxart.xml2text=function(a){if(a==null){return""}if(!ajaxart.ishtml(a)){return ajaxart.xml.prettyPrint(a,"",true)}if(ajaxart.isArray(a)){if(a.length>0){return ajaxart.xml2text(a[0])}return""}return aa_xml2htmltext(a)};ajaxart.xml.clone=function(a){if(a.length==0){return null}return a[0].cloneNode(true)};ajaxart.xml.prettyPrint=function(l,f,n){if(n){f=""}var d=n?"":"\r";if(l==null){return""}if(ajaxart.isArray(l)){if(l.length>0){return ajaxart.xml.prettyPrint(l[0],f,n)}return""}if(ajaxart.isBackEnd){return""+com.artwaresoft.XmlUtils.XmlToString(l)}if(typeof(f)=="undefined"){f=""}if(!ajaxart.isxml(l)){return l}if(l.nodeType==2||l.nodeType==3){return ajaxart.xmlescape(l.nodeValue)}if(l.nodeType==4){return"<![CDATA["+l.nodeValue+String.fromCharCode(93)+"]>"}if(l.nodeType==8){return""}var g=f+"<"+aa_tag(l);var m=l.attributes;if(m!=null){for(var h=0;h<m.length;h++){var c=ajaxart.xmlescape(m.item(h).value).replace(/&apos;/g,"'");var a=m.item(h).localName||m.item(h).name;if(a=="xmlns"){continue}g+=" "+a+'="'+c+'"'}}if(l.childNodes.length==0){g+="/>"}else{g+=">"}var o=l.childNodes.length;if(o==1&&(l.childNodes.item(0).nodeType==3)){g+=ajaxart.xmlescape(l.childNodes.item(0).nodeValue)}else{var k=false;for(var h=0;h<o;h++){var b=l.childNodes[h];if(b.nodeType==4){g+=ajaxart.xml.prettyPrint(b);if(o==1){k=true}}else{if(b.nodeType!=3){g+=d+ajaxart.xml.prettyPrint(b,f+"  ",n)}}}if(o>0&&!n&&!k){g+=d+f}}if(l.childNodes.length>0){g+="</"+aa_tag(l)+">"}return g};ajaxart.isxmlelement=function(a){return(ajaxart.isxml(a)&&a.nodeType==1)};jBart.xpath=function(b,a,c){return aa_xpath(b,a,c)};function aa_xpath(b,a,c){return ajaxart.xml.xpath(b,a,c)}aa_xmlinfos=[];function aa_getXmlInfo(b,d,f){if(b&&!b.nodeType){return b}if(!b||b.nodeType!=1){return null}for(var c=aa_xmlinfos.length-1;c>=0;c--){if(aa_xmlinfos[c].Xml==b){return aa_xmlinfos[c]}}if(f){return null}var a={isObject:true,Xml:b};aa_xmlinfos.push(a);return a}function aa_removeXmlInfo(a,c){for(var b=aa_xmlinfos.length-1;b>=0;b--){if(aa_xmlinfos[b].Xml==a){aa_xmlinfos.splice(b,1);return}}}function aa_xml2htmltext(b){if(b==null){return""}if(b.nodeType==null){return b}if(b.nodeType==2||b.nodeType==3||b.nodeType==4){return ajaxart.xmlescape(ajaxart.isBackEnd?""+b.nodeValue:b.nodeValue)}var a=b.xml;if(b.nodeType!=null){if(!a){a=b.outerHTML}if(!a){var c=new XMLSerializer();a=c.serializeToString(b)}}return a}ajaxart.xml.xml_changed=function(a){if(ajaxart.ishtml(a)){return}while(a!=null&&a.nodeType!=4){var b=ajaxart.xml.getModifyInfo(a);if(b!=null){if(b.disable){return}b.modified=true;if(b.mode=="auto save draft"){ajaxart.xml.autosave(a,b,"SaveDraftAction")}else{if(b.mode=="auto save"){ajaxart.xml.autosave(a,b,"SaveAction")}else{if(b.mode=="manual save"){if(b.compiled!=null){b.compiled([a],b.context)}}}}}a=ajaxart.xml.parentNode(a)}};ajaxart.xml.getModifyInfo=function(a){for(var b=0;b<ajaxart.xmlsToMonitor.length;b++){if(ajaxart.xmlsToMonitor[b].xml==a){return ajaxart.xmlsToMonitor[b].modifyInfo}}return null};ajaxart.xml.parentNode=function(a){if(a.nodeType==9){return null}if(a.parentNode&&a.parentNode.nodeType==1){return a.parentNode}if(a.parentNode&&a.parentNode.nodeType==9){return null}if(a.ownerElement!=null){return a.ownerElement}var b=ajaxart.xml.xpath(a,"..");if(b.length==1){return b[0]}return null};ajaxart.replaceXmlElement=function(a,d,b,c){if(a==null||d==null){return}if(a.nodeType!=1){return}if(a.parentNode==null){return}if(b==true||ajaxart.isChrome){if(d.ownerDocument!=a.ownerDocument){d=a.ownerDocument.importNode(d,true)}}if(b&&a.ParentObject!=null){a.ParentObject[0].ControlHolder=[d];aa_defineElemProperties(a,"ParentObject");aa_defineElemProperties(d,"ParentObject");d.ParentObject=a.ParentObject}a.parentNode.replaceChild(d,a);if(b){aa_element_attached(d);if(c){aa_remove(a,c)}else{aa_element_detached(a)}}};function aa_element_detached(c){if(!c||ajaxart.isattached(c)){return}var a=jQuery(c).find(".aa_ondetach").get();if(jQuery(c).hasClass("aa_ondetach")){a.push(c)}for(var b=0;b<a.length;b++){try{if(a[b].OnDetach){a[b].OnDetach()}jQuery(a[b]).removeClass("aa_onattach_called")}catch(d){ajaxart.logException(d)}}}function aa_element_attached(c){if(!ajaxart.isattached(c)){return}var a=jQuery(c).find(".aa_onattach").get();if(jQuery(c).hasClass("aa_onattach")){a.push(c)}for(var b=0;b<a.length;b++){if(jQuery(a[b]).hasClass("aa_onattach_called")){continue}if(a[b].OnAttach){a[b].OnAttach.call(a[b])}jQuery(a[b]).addClass("aa_onattach_called")}}function aa_addOnDetach(b,a){jQuery(b).addClass("aa_ondetach");b.OnDetach=a}function aa_urlAttribute(g,a){var b=null;if(g.vars._BartContext){b=g.vars._BartContext[0].Url}if(b){return aa_totext(ajaxart_runMethod([],b,"GetValue",aa_ctx(g,{Attribute:[a]})))}var f=window.location.href.split("#");if(f.length==1){return""}var d=f[1];if(d.indexOf("?"+a+"=")==-1){return""}var c=d.split("?"+a+"=")[1].split("?")[0];return c.split(";")[0]}function aa_urlChange(g,c){var b=null;if(g.vars._BartContext){b=g.vars._BartContext[0].Url}if(b){return aa_totext(ajaxart_runMethod([],b,"Update",aa_ctx(g,{ValuePairs:[c]})))}var f=window.location.href.split("#");var k=f.length==1?"":f[1];var d=ajaxart.parsexml('<xtml t="bart_url.NewUrlFragment" Current="'+k+'" Proposed="'+c+'"/>');var a=aa_text([],d,"",g);var h=f[0]+"#"+a;if(window.location.href!=h){if(window._gaq){_gaq.push(["_trackPageview","/"+h.split("/").pop()])}window.location=h}}var __DOMEvents={focusin:{eventGroup:"UIEvents",init:function(b,a){b.initUIEvent("focusin",true,false,window,1)}},focusout:{eventGroup:"UIEvents",init:function(b,a){b.initUIEvent("focusout",true,false,window,1)}},activate:{eventGroup:"UIEvents",init:function(b,a){b.initUIEvent("activate",true,true,window,1)}},focus:{eventGroup:"UIEvents",init:function(b,a){b.initUIEvent("focus",false,false,window,1)}},blur:{eventGroup:"UIEvents",init:function(b,a){b.initUIEvent("blur",false,false,window,1)}},click:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("click",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},dblclick:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("click",true,true,window,2,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mousedown:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousedown",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseup:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mouseup",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseover:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mouseover",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mousemove:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousemove",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseout:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousemove",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},load:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("load",false,false)}},unload:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("unload",false,false)}},select:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("select",true,false)}},change:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("change",true,false)}},submit:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("submit",true,true)}},reset:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("reset",true,false)}},resize:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("resize",true,false)}},keyup:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("keyup",true,false)}},keydown:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("keydown",true,false)}},scroll:{eventGroup:"HTMLEvents",init:function(b,a){b.initEvent("scroll",true,false)}}};function xFireEvent(d,a,c,b){try{c=c||{};if(document.createEvent){if(d==window&&!d.dispatchEvent){d=document}var h=__DOMEvents[a];if(h){var f=document.createEvent(h.eventGroup);if(b){for(var g in c){try{f[g]=c[g]}catch(k){}}}h.init(f,c);f.srcElement=null;if(ajaxart.isChrome&&b){try{f.tDebug=ajaxart_source_elem_in_test}catch(k){}}d.dispatchEvent(f);return true}}else{if(document.createEventObject){if(d==document){d=document.documentElement}var f=document.createEventObject();d.fireEvent("on"+a,f);return true}}}catch(k){}return false}aa_async_finished_listeners=[];function ajaxart_async_CallBack(b,a){if(a.vars._AsyncCallback!=null&&a.vars._AsyncCallback.callBack!=null){var c=a.vars._AsyncCallback.success;if(c==null){c=true}a.vars._AsyncCallback.callBack(b,a,c)}}function ajaxart_async_Mark(a,b){if(a.vars._AsyncCallback!=null){a.vars._AsyncCallback.marked=true}if(b){a.vars._AsyncIsQuery=true}}ajaxart_async_GetCallbackObj=function(b){var a=b.vars._AsyncCallback;if(a==null){a=[{callBack:function(){},marked:false,success:true}]}b.vars._AsyncCallback=a;return a};function aa_fire_async_finished(){setTimeout(function(){for(var a=aa_async_finished_listeners.length-1;a>=0;a--){aa_async_finished_listeners[a].OnAsyncActionFinished()}},1)}function aa_is_rtl(b,a){if(jQuery(b).parents(".right2left").length>0){return true}if(!b&&jQuery("body").find(".right2left").length>0){return true}if(a&&aa_totext(a.vars.Language)=="hebrew"){return true}return false}function aa_createElement(b,a){if(b==null||!ajaxart.isxml(b)){return ajaxart.parsexml("<"+a+"/>")}if(ajaxart.isBackEnd){return b.getOwnerDocument().createElement(a)}return b.ownerDocument.createElement(a)}function aa_refresh_field(h,l,k,f,a){if(l=="parent"){}if(l=="screen"){var g=aa_intest?aa_intest_topControl:document}else{if(l=="group"){var g=a.vars._Cntr[0].Ctrl}else{if(l=="document"||l=="parent"){var g=a.vars._Cntr[0].Ctrl}else{if(l=="table row"){var g=null;ajaxart.log("refresh field in table row not implemented","error")}}}}for(var c in h){var m="fld_"+h[c];var b=(l=="parent")?jQuery(g).parents("."+m).get():jQuery(g).find("."+m).get();if(jQuery(g).hasClass(m)){b.push(g)}for(var d=0;d<b.length;d++){aa_refresh_cell(b[d],a,f)}}aa_fixTopDialogPosition()}function aa_fixImageSize(f,k,c){var d=new Image();d.src=f.getAttribute("src");var g=d.width;var l=d.height;if(g*l==0){f.width=k;f.height=c;return}if(g<f.width){f.width=g}if(l<f.height){f.height=l}var b=Math.min(g,k),m=Math.min(l,c);var h=g/l;var a=b/m;if(h!=a){if(g>=l*a){f.width=k;f.height=Math.floor(b/h)}else{f.height=c;f.width=Math.floor(m*h)}}else{f.width=k;f.height=c}}function aa_keepimageprops(b,c,a){var d=new Image();d.src=b.getAttribute("src");if(d.complete){aa_fixImageSize(b,c,a)}else{b.onload=function(){aa_fixImageSize(b,c,a)}}}function aa_uidocument(h,c,a,m,b,q,d,k){var n={ID:[c],IsSingleItem:true,isObject:true,Fields:m,Items:a,ReadOnly:k==true};var l=aa_ctx(d,{_ParentCntr:d.vars._Cntr,_Cntr:[n]});n.Context=l;n.Ctrl=jQuery('<div class="aa_container aa_non_selectable"><div class="aa_container_header"/><div class="aa_list aasection aa_item aa_cntr_body"/><div class="aa_container_footer"/></div>')[0];n.Ctrl.Cntr=n;if(c!=""){jQuery(n.Ctrl).addClass("Page_"+c)}if(aa_tobool(d.vars.IsNewItem)){n.IsNewItem=true}var o=n.Aspects=b(h,l);for(var g=0;g<o.length;g++){ajaxart.runScriptParam(h,o[g].CreateContainer,l)}var f=function(u,w){u.PostActors=[];u.PreActors=[];u.RegisterForPostAction=function(y,x){u.PostActors.push({phase:x||0,aspect:y})};u.RegisterForPreAction=function(y,x){u.PreActors.push({phase:x||0,aspect:y})};if(u.Items.length==0){u.Items=[{isObject:true,Items:[]}]}if(u.Items[0].Items.length==0){u.NoData=true;u.Items[0].Items.push(ajaxart.parsexml("<xml/>"))}var s=(u.Items==null||u.Items.length==0||u.Items[0].Items.length==0)?[]:[u.Items[0].Items[0]];u.ElemsOfOperation=function(){return jQuery(this.Ctrl).find(".aa_item").slice(0,1).get()};u.ItemsOfOperation=function(){return[this.Items[0].Items[0]]};u.CellPresentation="control";u.Operations=q;for(var r=0;r<u.Aspects.length;r++){ajaxart.trycatch(function(){ajaxart_runMethod(h,u.Aspects[r],"InitializeContainer",l)},function(x){ajaxart.log("error in aspect "+u.Aspects[r].XtmlSource[0].script.getAttribute("t")+": "+x.message+x.stack||"","error")})}u.PreActors.sort(function(y,x){return y.phase>x.phase?1:-1});u.PostActors.sort(function(y,x){return y.phase>x.phase?1:-1});for(var r=0;r<u.PreActors.length;r++){ajaxart.trycatch(function(){ajaxart.runScriptParam([],u.PreActors[r].aspect.PreAction,u.Context)},function(x){ajaxart.logException(x)})}aa_refresh_itemlist(u,l,true);if(u.NoData&&u.ControlForNoData){var v=ajaxart_find_aa_list(u);var t=u.ControlForNoData([],d)[0];jQuery(t).addClass("aa_list");aa_replaceElement(v,t)}};if(n.RunAsyncAction&&n.ControlForWaiting){var p=function(r,s){return function(){var t=r.Ctrl;r.Ctrl=r.OriginalCtrl;f(r,s);aa_replaceElement(t,r.Ctrl);aa_fixTopDialogPosition()}};n.OriginalCtrl=n.Ctrl;n.Ctrl=n.ControlForWaiting(h,d)[0];n.Ctrl.Cntr=n;aa_runMethodAsync(n,n.RunAsyncAction,h,aa_ctx(d,{}),p(n,o));return n.Ctrl}f(n,o);return n.Ctrl}function aa_set_initialize_container(a,b){a.InitializeContainer=function(c,d){var f=d.vars._Cntr[0];b(a,d,f)}}function aa_add_to_comma_separated(b,a){if(b==""){return a}if((b+",").indexOf(","+a+",")>-1){return b}return b+","+a}function aa_comma_size_to_css(c){c=c.replace(/px/g,"");var f=c.split(",");var b="";var d=f[0];if(d!=""){if(d.indexOf("%")==-1){d+="px"}b+="width:"+d+";"}if(f.length==1){return b}var a=f[1];if(a!=""){if(a.indexOf("%")==-1){a+="px"}b+="height:"+a+";"}return b}function aa_CSV2Xml(l){var k=ajaxart.parsexml("<items/>");try{var o="";var f=0;var g=false;var t="";var n=[];while(1){var h=l.indexOf('"',f);if(h==-1){o+=l.substring(f);break}if(g){if(l.length>h+1&&l.charAt(h+1)=='"'){t+=l.substring(f,h)+'"';f=h+2}else{t+=l.substring(f,h);n.push(t);f=h+1;g=false;o+="___QUOTED___"}}else{o+=l.substring(f,h);f=h+1;t="";g=true}}l=o;var a=l.replace("\r\n","\n").split("\n");var m=a[0].split(",");var c=[];var d={};for(var q=0;q<m.length;q++){var v=m[q].replace(/ ([a-z])/g,function(w){return" "+w.toUpperCase()}).replace(/[^a-zA-Z0-9_]/g,"");if(!v.match(/^[a-zA-Z].*/)){v="x"+v}while(d[v]){v+="_"}c.push(v);d[v]=true}for(var q=1;q<a.length;q++){var s=k.ownerDocument.createElement("item");var b=a[q].split(",");for(var p=0;p<b.length;p++){var u=b[p];if(u=="___QUOTED___"){u=n.shift()}s.setAttribute(c[p],u)}k.appendChild(s)}}catch(r){alert(r)}return k}function aa_JSON2Xml(d,b,a){a=a||ajaxart.parsexml("<"+b+"/>");return c(d,a,0);function c(l,s,k){if(k==20){return"<TooMuchRecursion/>"}if(typeof(l)=="string"){try{return c(JSON.parse(l),s,k+1)}catch(o){ajaxart.log("jsonToxml - Can not parse json "+l,"error");return null}}try{var n;var m=l[0]&&(!(typeof(l)=="string"));if(m){n=b.substring(0,b.length-1);if(b.match(/ies$/)){n=b.substring(0,b.length-3)+"y"}var f=true;for(var p in l){if(!(typeof(l[p])=="string"||typeof(l[p])=="number"||typeof(l[p])=="boolean")){f=false}}if(f){var q=s.ownerDocument.createElement(n);q.nodeValue=l.join(",");s.appendChild(q);return s}}for(var p in l){var r=l[p];var h=typeof(r);if(h=="string"||h=="number"||h=="boolean"){s.setAttribute(p,r)}else{var g=s.ownerDocument.createElement(n||p);g=c(r,g,k+1);s.appendChild(g)}}}catch(o){alert(o)}return s}}function aa_GoogleDataTableToXml(f){var m=[];var h={};for(var b=0;b<f.getNumberOfColumns();b++){var a=f.getColumnLabel(b).replace(/ ([a-z])/g,function(n){return" "+n.toUpperCase()}).replace(/[^a-zA-Z0-9_]/g,"");if(!a.match(/^[a-zA-Z].*/)){a="x"+a}while(h[a]){a+="_"}m.push(a);h[a]=true}var g=ajaxart.parsexml("<items/>");for(var l=0;l<f.getNumberOfRows();l++){var k=ajaxart.parsexml("<item/>");g.appendChild(k);for(var b=0;b<f.getNumberOfColumns();b++){var d=f.getFormattedValue(l,b);var c=m[b];k.setAttribute(c,d)}}return g}function aa_attach_style_css(a){if(!a.CssClass){a.CssClass=aa_attach_global_css(a.Css)}return a.CssClass}function aa_build_color_lookup(c){colors=[];var b,a=c;var d=/((rgb|rgba|hsl|hsla)\([^\)]*\))/g;while(b=d.exec(c)){a=a.replace(b[1],"##"+colors.length);colors.push(b[1])}return{css:a,colors:colors}}function aa_color_lookup(a,b){if(b&&b.indexOf("##")==0){return a[b.match(/([0-9]+)/)[1]]}return b}function aa_adapt_css_for_browser(b){if(ajaxart.isAndroid){var a=aa_build_color_lookup(b);return a.css.replace(/background-image: -webkit-linear-gradient\(([^)]*)\)/,function(f){var k=f.match(/([\-0-9]*)deg/)[1];var d="background-image: -webkit-gradient(linear, ";switch(Math.round((parseInt(k)/90)+360)%4){case 0:d+="right top, left top, ";break;case 1:d+="left bottom, left top, ";break;case 2:d+="left top, right top, ";break;case 3:d+="left top, left bottom, ";break}var h=f.split(",");for(var g=1;g<h.length;g++){var c=h[g].match(/[ ]*([#0-9a-zA-Z]+)[ ]*([0-9]+%)/);if(c&&c.length>=3){d+="color-stop("+c[2]+","+aa_color_lookup(a.colors,c[1])+")";if(g+1<h.length){d+=", "}}}d+=")";return d}).replace(/##[0-9]+/,function(c){return aa_color_lookup(a.colors,c)})}if(ajaxart.isOpera){return b.replace(/-webkit-linear-gradient/g,"-o-linear-gradient")}return b}function aa_attach_global_css(d,f,c,b){if(!window.aa_container_styles){window.aa_container_styles={}}if(!d){return""}jBartWidgets.vars.uniqueNumber=jBartWidgets.vars.uniqueNumber||0;if(!aa_container_styles[d]){var a="";if(c){a="jb_"+c;jBartWidgets.vars.usedJBClasses=jBartWidgets.vars.usedJBClasses||{};if(jBartWidgets.vars.usedJBClasses[a]){a+=(++jBartWidgets.vars.uniqueNumber)}jBartWidgets.vars.usedJBClasses[a]=true}else{a="jb"+(++jBartWidgets.vars.uniqueNumber)}var g={elem_class:a,globalcss:d};if(d.indexOf("#cntr")>=0){g.cntr_class="jb"+(++jBartWidgets.vars.uniqueNumber)}aa_container_styles[d]=g;if(ajaxart.isFireFox){g.globalcss=g.globalcss.replace(/-webkit-/g,"-moz-")}g.globalcss=aa_clean_global_css(g.globalcss);g.globalcss=aa_adapt_css_for_browser(g.globalcss);g.globalcss=g.globalcss.replace(/#this/g,"."+g.elem_class);if(b){g.globalcss=g.globalcss.replace(/#wrapper/g,"."+g.elem_class+"_wrapper")}if(g.cntr_class){g.globalcss=g.globalcss.replace(/#cntr/g,"."+g.cntr_class)}g.styleElem=jQuery("<style>"+g.globalcss+"</style>")[0];document.getElementsByTagName("head")[0].appendChild(g.styleElem);g.styleElem.StyleObject=g}if(f&&aa_container_styles[d].cntr_class){jQuery(f).addClass(aa_container_styles[d].cntr_class)}return aa_container_styles[d].elem_class}function aa_clean_global_css(b){var a=0;while(1){var d=b.indexOf("{",a);if(d==-1){break}var c=b.substring(a,d);if(c.indexOf("#")==-1){if(c.lastIndexOf("*/")>-1){c=c.substring(c.lastIndexOf("*/")+2)}if(c.indexOf("@")!=-1){a=d+1;continue}var f="#this "+c.split(",").join(",#this ");b=b.substring(0,d-c.length)+f+b.substring(d)}a=b.indexOf("}",d)+1;if(a==0){break}}if(b.indexOf("{")==-1&&b.indexOf("}")==-1){b="#this {"+b+"}"}return b}function aa_setCssText(b,a){if(ajaxart.isFireFox){a=a.replace(/-webkit-/g,"-moz-")}b.style.cssText=a}function aa_in_textlist(b,a){if(b.indexOf(","+a+",")==-1){return false}return true}function aa_add_onorientationchange(a){if(!window.aav_onorientationchange){window.aav_onorientationchange=[]}aav_onorientationchange.push(a)}function aa_init_ipad(a){if(!a){a={orientationClasses:true}}var b=function(){var c=(window.orientation==0||window.orientation==180)?"portrait":"landscape";document.body.parentNode.setAttribute("class",c);if(ajaxart.jbart_studio){c=aa_url_attribute(window.location.href,"ipad_orient");if(c!="portrait"){c="landscape"}jQuery("body").removeClass("portrait").removeClass("landscape").addClass(c)}if(window.aav_onorientationchange){for(var d in window.aav_onorientationchange){window.aav_onorientationchange[d](c)}}};if(a.orientationClasses){window.onorientationchange=b;b()}}function aa_addOnAttachMultiple(b,a){jBart.bind(b,"_OnAttach",a);aa_addOnAttach(b,function(){jBart.trigger(b,"_OnAttach")})}function aa_addOnAttach(b,a){jQuery(b).addClass("aa_onattach");b.OnAttach=a;if(ajaxart.isattached(b)){b.OnAttach()}}function aa_defineElemProperties(b,a){if(!b.jBartDomProps){b.jBartDomProps=a.split(",")}else{ajaxart.concat(b.jBartDomProps,a.split(","))}}function aa_remove(c,f){if(!c){return}if(c.parentNode){c.parentNode.removeChild(c)}aa_element_detached(c);if(f){jQuery(c).remove()}if(f&&ajaxart.isIE){function b(h){if(h.nodeType!=1){return}if(h.jbEvents&&h.detachEvent){for(var g=0;g<h.jbEvents.length;g++){h.detachEvent(h.jbEvents[g].event,h.jbEvents[g].callback)}}for(var g in h){if(g.indexOf("on")==0||g.indexOf("jb")==0){h[g]=null}}if(h.jBartDomProps){for(var g=0;g<h.jBartDomProps.length;g++){h[h.jBartDomProps[g]]=null}h.jBartDomProps=null}h.ajaxart=h.Cntr=h.Data=h.ItemData=h.Dialog=h.jElem=h.Field=h.OnAttach=h.OnDetach=h.Contents=null;h.FieldData=h.contentChanged=h.CellPresentation=h.Context=h.jBart=null;var l=false;if(l){for(var g in h){try{if(h[g]){h[g]=null;ajaxart.log("memomry leak - "+g,"error")}}catch(k){}}}try{}catch(k){}var m=h.firstChild;while(m){b(m);m=m.nextSibling}}b(c);var a=aa_tag(c).toLowerCase();try{if(a!="table"&&a!="tfoot"&&a!="thead"&&a!="tr"){c.innerHTML=""}}catch(d){}}}jBart.remove=function(a){aa_remove(a,true)};function aa_remove_from_list(c,b){for(var a in c){if(c[a]==b){c.splice(a,1);return}}}function aa_renderStyleObject(d,f,c){var a=jQuery(d.Html);if(!a[0]){a=jQuery("<div/>")}var b=aa_api_object(a,f);var g=c.vars._Cntr?c.vars._Cntr[0]:null;a.addClass(aa_attach_global_css(d.Css,g));aa_apply_style_js(b,d,c);return a[0]}function aa_apply_style_js(obj,style,context){aa_style_context={jElem:obj.jElem};if(!style.jsFunc&&style.Javascript){try{eval("style.jsFunc = "+style.Javascript)}catch(e){ajaxart.logException(e,"could not compile a js function "+style.Javascript)}}if(style.jsFunc){return style.jsFunc(obj,context)}}function aa_find_class(b,a){if(b.hasClass(a)){return b}return b.find("."+a)}function aa_init_image_object(c,b,a){if(typeof(c)=="string"){return{StaticUrl:c,Size:""}}if(!c||!c.Url){return}c.StaticUrl=aa_totext(c.Url(b,a));return c}function aa_set_image(b,c,k,o){if(!c){if(k){aa_remove(b,true)}return}if(c&&c.InCssClass){jQuery(b).css("display","block").addClass(c.CssClass);return}if(c&&(c.inSprite||c.asDivBackground)){var h="#this { background:url("+c.StaticUrl+") "+c.x+" "+c.y+" no-repeat; ";h+="width: "+c.width+"; height: "+c.height+"; display:block; } ";if(c.hoverx){h+="#this:hover { background-position: "+c.hoverx+" "+c.hovery+" } "}if(c.activex){h+="#this:active { background-position: "+c.activex+" "+c.activey+" } "}jQuery(b).addClass(aa_attach_global_css(h));return}if(b&&b.firstChild&&b.firstChild.tagName&&b.firstChild.tagName.toLowerCase()=="img"){return aa_set_image(b.firstChild,c,true,o)}if(b&&b.tagName.toLowerCase()!="img"){var n=document.createElement("img");b.appendChild(n);var m=o||c.Size;if(m){var l=m.split(",");if(l.length==1){l.push("0")}for(var f in l){if(l[f]==""){l[f]="0"}}if(l[0]!="0"){b.style.width=l[0]+"px"}if(l[1]!="0"){b.style.height=l[1]+"px"}}return aa_set_image(n,c,true,o)}if(typeof(c)=="string"){c={StaticUrl:c,Size:""}}var a=c.StaticUrl||"";if(a==""){a=c.SecondUrl}if(a==""){if(k){aa_remove(b,true)}return}b.setAttribute("src",a);var m=o||c.Size;if(m==""){return}var l=m.split(",");if(l.length==1){l.push("0")}for(var f in l){if(l[f]==""){l[f]="0"}}aa_defineElemProperties(b,"ImageWidth,ImageHeight");b.ImageWidth=parseInt(l[0].split("px")[0]);b.ImageHeight=parseInt(l[1].split("px")[0]);if(b.ImageWidth>0){b.width=b.ImageWidth}if(b.ImageHeight>0){b.height=b.ImageHeight}if(b.ImageWidth*b.ImageHeight==0){return}function g(s){var r=s.width,v=s.height;if(r<b.ImageWidth){b.width=r}if(v<b.ImageHeight){b.height=v}var u=Math.min(r,b.ImageWidth),q=Math.min(v,b.ImageHeight);if(c.KeepImageProportions){var t=r/v;var p=u/q;if(t!=p){if(r>=v*p){b.width=b.ImageWidth;b.height=Math.floor(u/t)}else{b.height=b.ImageHeight;b.width=Math.floor(q*t)}}}}var d=new Image();d.src=a;if(d.complete){g(d)}else{b.onload=function(){g(d)}}}function aa_api_object(a,f){a=jQuery(a);var c=a[0];for(d in f){c[d]=f[d]}c.jElem=a;var b="jElem,getInnerElement,setInnerHTML,setImageSource,setImage,setOnClick,bind,trigger,control";for(var d in f){b+=(","+d)}aa_defineElemProperties(c,b);c.control=c;c.bind=function(g,h){this.jbListeners=this.jbListeners||[];this.jbListeners.push({eventType:g,callback:h})};c.trigger=function(k,g){if(!this.jbListeners){return}for(var h=0;h<this.jbListeners.length;h++){if(this.jbListeners[h].eventType==k){this.jbListeners[h].callback(g)}}};c.getInnerElement=function(g){if(typeof(g)=="string"){if(g==""){return this.jElem[0]}if(g.indexOf(".")==0){return aa_find_class(this.jElem,g.substring(1))[0]}return null}return g||this};c.setInnerHTML=function(k,h){var g=this.getInnerElement(k);if(g){g.innerHTML=h}};c.setImage=c.setImageSource=function(k,h){var g=this.getInnerElement(k);if(g&&h){aa_set_image(g,h,false)}};c.setOnClick=function(m,l,k){var h=this.getInnerElement(m);if(!h||!l){return}h.jbart_click_behavior=k;if(!k){h.onclick=function(n){if(window.aa_incapture){return false}if(h.jbLastTimeClicked){if(new Date().getTime()-h.jbLastTimeClicked<300){return false}}h.jbLastTimeClicked=new Date().getTime();l.call(c,{event:n});return false}}else{var g=function(n){jQuery(n).mousedown(function(){var o=jQuery(n);if(o.attr("pressed_src")!=""){o.attr("src",o.attr("pressed_src"));o.addClass("pressed").addClass("pressing")}}).mouseout(function(){var o=jQuery(n);o.removeClass("pressed");o.attr("src",o.attr("original_src"))}).mouseover(function(){var o=jQuery(n);if(o.hasClass("pressing")){o.addClass("pressed").removeClass("pressing");o.attr("src",o.attr("pressed_src"))}}).keydown(function(o){o=o||event;if(o.keyCode==13){ajaxart_stop_event_propogation(o);click(n);return false}}).mouseup(function(p){var o=jQuery(n);if(o.hasClass("pressed")&&!window.aa_incapture){l()}})};g(h)}};return c}function aa_htmlContentChanged(a){while(a!=null){if(a.contentChanged){a.contentChanged()}a=a.parentNode}}function aa_jbart_image(c,a){var b=(a.vars._Images&&a.vars._Images[0])||"";return b+c}if(!window.aa_base_images){aa_base_images=function(){if(window.location.href.indexOf("http://localhost/")==0||window.location.href.indexOf("https://localhost/")==0){return"images"}return ajaxart.base_images||""}}if(!window.aa_base_lib){aa_base_lib=function(){if(window.location.href.indexOf("http://localhost/")==0||window.location.href.indexOf("https://localhost/")==0){return"lib"}return ajaxart.base_lib||""}}function aa_crossdomain_call(f,a){if(!a){f.type=f.type||"GET";var d=jQuery.browser.msie?new window.XDomainRequest():new XMLHttpRequest();function c(g){var h=this;if(h.readyState==4&&f.success){f.success(h.responseText,h.status)}}if(jQuery.browser.msie){d.open(f.type,f.url);d.onload=c}else{d.open(f.type,f.url,true);d.onreadystatechange=c}d.setRequestHeader("Content-Type",f.dataType||"text/plain");if(f.type=="POST"){d.send(f.data)}else{d.send()}}else{if(!ajaxart.jSonRequests){ajaxart.jSonRequests={}}if(!ajaxart.jsonReqCounter){ajaxart.jsonReqCounter=0}if(!window.aa_jsonp_callback){aa_jsonp_callback=function(k,h,g){if(ajaxart&&ajaxart.jSonRequests[h]){ajaxart.jSonRequests[h].success(k);ajaxart.jSonRequests[h]=null}}}ajaxart.jsonReqCounter=(ajaxart.jsonReqCounter+1)%1000;ajaxart.jSonRequests[ajaxart.jsonReqCounter]=f;var b=f.url+"&aa_req_id="+ajaxart.jsonReqCounter;if(f.type=="POST"&&f.data){b=b+"&aa_postdata"+encodeURIComponent(f.data)}jQuery.ajax({cache:false,dataType:"script",httpHeaders:[],url:b})}}jBart.aa_crossdomain_call=aa_crossdomain_call;jBart.utils.getWidgetIDFromContext=function(a){if(a.vars.WidgetId){return aa_totext(a.vars.WidgetId)}var b=a.vars._BartContext[0].AppXtml;while(b&&b.tagName!="bart_sample"&&b.tagName!="jbart_project"){b=b.parentNode}if(b){return b.getAttribute("id")||""}return""};jBart.utils.removeFromArray=function(c,a){for(var b=0;b<c.length;b++){if(c[b]==a){c.splice(b,1);return}}};jBart.utils.refresh=function(c){while(c.ReplacedBy){c=c.ReplacedBy}var a=c.ajaxart;if(typeof(a)=="undefined"||a==null){return}var d=a.data;if(a.origData!=null){d=a.origData}var b=aa_first(d,a.script,"",a.params);if(b==""){b=document.createElement("div")}aa_defineElemProperties(c,"ReplacedBy");c.ReplacedBy=b;aa_replaceElement(c,b,true);return b};jBart.trigger=function(b,d,a){if(!b||!b.jbListeners||!b.jbListeners[d]){return}a=a||{};a.eventType=d;var f=b.jbListeners[d];for(var c=0;c<f.length;c++){try{f[c].handler.apply(b,[a])}catch(g){ajaxart.logException(g,"error trigerring event "+d)}}};jBart.bind=function(b,d,g,a){if(!b){return}b.jbListeners=b.jbListeners||{};b.jbListeners[d]=b.jbListeners[d]||[];var f=b.jbListeners[d];for(var c=0;c<f.length;c++){if(a&&f[c].eventType==d&&f[c].identifier==a){f[c].handler=g;return}}f.push({eventType:d,handler:g,identifier:a})};jBart.activator=function(a){return{show:function(c,b){jBartPreloader(function(){if(!b){b={}}if(!b.widget_src){b.widget_src=a}jBart.appendWidget(c,b)})},show_field_widget:aa_show_field_widget,jBart:jBart}};jBart.parsexml=function(b,a){return ajaxart.parsexml(b,"","",false,a)};function aa_show_field_widget(g,c,s,k){ajaxart.base_images=k.base_images_dir||ajaxart.base_images;var n=window["jBartWidget_"+c];var b=ajaxart.newContext();var l=b.vars._GlobalVars=[{}];b.vars._BartContext=[{}];for(var o in k.rawData){var f=ajaxart.isArray(k.rawData[o])?k.rawData[o]:[k.rawData[o]];window["jBartWidget_"+c+"_"+o]=f}var m=aa_xpath(n,"bart_dev/db/bart_unit/bart_unit/Component/xtml/Resources/Resource[@t='jbart_resource.Data']");for(i in m){var h=ajaxart.run([],m[i],"",b)[0];var a=aa_totext(h.ID);l[a]=function(){return h.Items}}ajaxart.load_xtml_content("widget",aa_xpath(n,"bart_dev/db/bart_unit/bart_unit")[0]);var r={isObject:true,ID:["main"],Items:[{isObject:true,ReadOnly:false,Items:[]}]};b.vars._Cntr=[r];var q=aa_run_component("sample."+s,[],b)[0];if(q==null){return[]}var p=ajaxart_field_calc_field_data(q,[],b);var d=aa_ctx(b,{_Field:[q],FieldTitle:[q.Title],_Item:[],Items:aa_items(r)});ajaxart_field_createCellControl([],r,g,"control",q,p,d)}jBart.loadJsFile=function(a){a.success=a.success||function(){};if(!a.isLoaded){a.isLoaded=function(){if(!a.variableToFind){return true}if(window[a.variableToFind]){return true}return false}}function b(){try{if(a.isLoaded()){return true}}catch(g){}return false}var f=20;var d=true;c();function c(){if(b()){return a.success()}if(d){if(a.loadFunction){a.loadFunction(a.url)}else{aa_load_js_css(a.url,"js")}}d=false;if(--f<=0){a.error=a.error||function(){};return a.error()}setTimeout(c,500)}};aa_gcs("mobile",{MobileSearchBoxFilter:function(c,d,b){var f={isObject:true};f.FieldData=function(h){return h};f.CellPresentation=["control"];f.Style=aa_first(d,c,"Style",b);var a=0;f.Control=function(q,k){var o=this;var n=o.Style;if(n.Html==""){return[]}var h=jQuery(n.Html);var l=aa_api_object(h);var p={isObject:true};var m=(k.vars.HeaderFooterCntr||k.vars._Cntr)[0];p.ResultsPage=ajaxart.run(d,c,"ResultsPage",b);p.OnSelect=function(s,r){ajaxart_runMethod([s],m,"OpenItemDetails",aa_ctx(r,{_InnerItem:s,_Cntr:[m]}))};aa_setMethod(p,"NoResultsField",c,"NoResults",b);l.applyCancel=function(s){var r=this.getInnerElement(s);r.onclick=function(t){l.input.Cancel();return aa_stop_prop(t)};l.CancelButton=r};l.applySearchBox=function(t){var s=this.getInnerElement(t);this.input=s;s.OriginalBody=s.PlaceForResults=jQuery(m.Ctrl).find(">.aa_cntr_body")[0];s.Container=ajaxart.runNativeHelper(d,c,"ResultsContainer",aa_ctx(b,{_Field:[o],_SearchBoxContext:[p]}))[0].Cntr;s.MaxItemsToShow=aa_int(d,c,"MaxItemsToShow",b);var r=ajaxart.run(d,c,"Items",b);aa_prepare_more_items_to_show(s);s.onfocus=function(u){document.ontouchstart=function(v){s.blur()};setTimeout(function(){if(l.OnFocus){l.OnFocus(s)}},1);jQuery(s.Container.Ctrl).find(".aa_item").remove();aa_search(o,s,c,b)};s.onblur=function(u){document.ontouchstart=null};s.onkeyup=function(v){for(var u=0;u<aa_navigation_codes.length;u++){if(v.keyCode==aa_navigation_codes[u]){return true}}jQuery(s.Container.Ctrl).find(".aa_item").remove();aa_search(o,s,c,b)};s.Cancel=function(){s.value="";s.blur();aa_replaceElement(s.PlaceForResults,s.OriginalBody);s.PlaceForResults=s.OriginalBody;jQuery(m.Ctrl).find(">.aa_container_footer").show();setTimeout(function(){if(l.OnCancel){l.OnCancel(s)}},1)};s.ShowResults=function(){if(s.ResultsShown){return}s.ResultsShown=true;aa_replaceElement(s.PlaceForResults,s.Container.Ctrl);s.PlaceForResults=s.Container.Ctrl;jQuery(m.Ctrl).find(">.aa_container_footer").hide()};s.ShowNothingFound=function(){var u=ajaxart.runNativeHelper([s.value],c,"NoResultsControl",aa_ctx(b,{_SearchBoxContext:[p]}))[0];aa_replaceElement(s.PlaceForResults,u);s.PlaceForResults=u;jQuery(m.Ctrl).find(">.aa_container_footer").hide()};s.PreprocessStep=0;s.PreprocessChunkSize=500;s.MathcedChunkSize=2;s.AllItems=[];s.MatchedTextCssClass=aa_attach_global_css(aa_text(d,c,"MatchedTextCss",b));search_in_compiled=ajaxart.compile_text(c,"SearchIn",b);aa_searchbox_preprocess(r,s,o,search_in_compiled,b,0);m.AfterDetailsReplacingAll=function(){s.Cancel()}};aa_apply_style_js(l,o.Style);h.addClass(aa_attach_global_css(o.Style.Css));return h.get()};var g=aa_ctx(b,{_Field:[f]});ajaxart.runsubprofiles(d,c,"FieldAspect",g);return[f]},MobileDefaultFeatures:function(c,d,a){if(aa_bool(d,c,"DisableScaling",a)){var f=document.createElement("meta");f.setAttribute("name","viewport");f.setAttribute("content","initial-scale=1,maximum-scale=1,user-scalable=no");document.getElementsByTagName("head")[0].appendChild(f)}if(aa_bool(d,c,"AutoHideAddressBar",a)){function b(){document.body.style.height="1000px";function g(){document.body.style.height=window.innerHeight+"px";window.removeEventListener("scroll",g)}window.addEventListener("scroll",g);window.scrollTo(0,1)}b();window.addEventListener("orientationchange",function(){if(window.scrollY<=1){b()}})}if(aa_bool(d,c,"DisableTextAdjustionOnOrientation",a)){jQuery("body").css("-webkit-text-size-adjust","none")}if(aa_bool(d,c,"EliminateMarginsFromHtmlBody",a)){jQuery("body").css("margin","0").css("padding","0")}return[]},MobileBottomPosition:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,l,h,g){var k=f.firstChild;aa_addOnAttach(k,function(){if(ajaxart.isiPhone&&!navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i)){var o=k.offsetHeight;var m=function(p){k.style.top=window.innerHeight+window.scrollY-o+"px"};k.jbFixTop=m;m(o);jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"PositionAbsoluteCss",a)));jQuery(k).show();jQuery(document).bind("scroll",function(){m(k.offsetHeight)});window.addEventListener("resize",function(){m(k.offsetHeight)},false)}else{if(jQuery(".studio_simulator").length>0&&jQuery(".studio_simulator")[0].className.indexOf(" ")>-1){var n=jQuery(".studio_simulator")[0];var o=k.offsetHeight;jQuery(k).hide();var m=function(p){k.style.top=n.clientHeight+n.scrollTop-o+"px"};m(o);jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"PositionAbsoluteCss",a)));jQuery(k).show();jQuery(".studio_simulator").bind("scroll",function(){m(k.offsetHeight)})}else{jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"PositionFixedCss",a)))}}jQuery(f).append(jQuery("<div class='aa_mobile_bottom_padding'/>").css("height",k.offsetHeight+"px"))})})},MobileTopPosition:function(b,c,a){var d=a.vars._Field[0];aa_field_handler(d,"ModifyControl",function(f,l,h,g){var k=f.firstChild;aa_addOnAttach(k,function(){if(ajaxart.isiPhone&&navigator.userAgent.match(/OS 4(_\d)+/i)||navigator.userAgent.match(/OS 3(_\d)+/i)){if(!aa_bool(c,b,"UseAbsoluteWhenNoPositionFixed")){return}var m=function(){k.style.top=window.scrollY+"px"};k.jbFixTop=m;m();jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"PositionAbsoluteCss",a)));jQuery(k).show();jQuery(document).bind("scroll",m);window.addEventListener("resize",m,false)}else{if(jQuery(".studio_simulator").length>0&&jQuery(".studio_simulator")[0].className.indexOf(" ")>-1){var n=jQuery(".studio_simulator")[0];jQuery(k).hide();var m=function(){k.style.top=n.scrollTop+"px"};m();jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"SimulatorCss",a)));jQuery(k).show();jQuery(".studio_simulator").bind("scroll",m)}else{jQuery(k).addClass(aa_attach_global_css(aa_text(c,b,"PositionFixedCss",a)));if(ajaxart.isIDevice){setTimeout(function(){jQuery("input").focus(function(){k.style.position="absolute"}).blur(function(){k.style.position="fixed"})},1000)}}}jQuery(k).addClass("aa_mobile_top_position");jQuery(f).find(".aa_mobile_top_padding").remove();jQuery(f).append(jQuery("<div class='aa_mobile_top_padding'/>").css("height",k.offsetHeight+"px"))})})},SimpleMobileVerticalScroll:function(b,c,a){return[{isObject:true,Prepare:function(d,f){var h=jQuery("<DIV/>").addClass("aa_mobile_scroll_wrapper")[0];var g=f.vars.ControlElement[0];g.ScrollElement=h;g.parentNode.appendChild(h);h.appendChild(g);h.jbScrolledElem=g;jQuery(h).css("overflow","hidden")},Activate:function(f,h){var n=h.vars.ControlElement[0];var l=n.jbScrolledElem;l.scrollPos=0;l.maxOffset=0;l.MaxHeight=n.offsetHeight;var g=function(o){return Math.min(Math.max(o,l.MaxHeight-l.offsetHeight),l.maxOffset)};var d=function(o){l.start={pageX:o.touches?o.touches[0].pageX:o.pageX,pageY:o.touches?o.touches[0].pageY:o.pageY,time:Number(new Date())};l.isVScrolling=undefined;l.deltaX=l.deltaY=l.startScrollPos=l.scrollPos;l.style.MozTransitionDuration=l.style.webkitTransitionDuration=0;if(!ajaxart.isTouch){ajaxart_disableSelection(l)}};var k=function(r){var p=r.touches?r.touches[0].pageX:r.pageX;var o=r.touches?r.touches[0].pageY:r.pageY;if(!l.start){return}l.deltaX=p-l.start.pageX;l.deltaY=o-l.start.pageY;if(typeof l.isVScrolling=="undefined"){l.isVScrolling=!!(l.isVScrolling||Math.abs(l.deltaX)<Math.abs(o-l.start.pageY))}r.preventDefault();if(l.isVScrolling){l.scrollPos=g(l.startScrollPos+l.deltaY);if(l.scrollPos!=l.startScrollPos+l.deltaY){var q=l.startScrollPos+l.deltaY-l.scrollPos;l.scrollPos+=q/((Math.abs(q)/l.MaxHeight)+1)}l.style.MozTransform=l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}};var m=function(t){if(!l.start){return}var s=Number(new Date())-l.start.time;if(s<300||l.scrollPos!=g(l.scrollPos)){var o=0.0006;var q=Math.abs(l.deltaY)/s;var u=(q*q)/(2*o);var r=u*((l.deltaY>0)?1:-1);l.scrollPos=g(l.scrollPos+r);var p=l.style;p.webkitTransitionDuration=p.MozTransitionDuration=p.msTransitionDuration=p.OTransitionDuration=p.transitionDuration=500+"ms";p.MozTransform=p.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}l.start=null;if(!ajaxart.isTouch){ajaxart_restoreSelection(l)}};if(ajaxart.isTouchDevice()){n.ontouchmove=k;n.ontouchend=m;n.ontouchstart=d}else{jQuery(n).mousemove(k).mouseup(m).mousedown(d)}l.FixKeyboard=function(){if(ajaxart.ui.absoluteTop(n)<window.scrollY){var o=window.scrollY-ajaxart.ui.absoluteTop(n,true);if(l.maxOffset!=o){l.maxOffset=o;l.scrollPos=g(l.scrollPos);l.style.webkitTransitionDuration="150ms";l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}}else{if(l.maxOffset){var o=l.maxOffset;l.maxOffset=0;l.scrollPos=g(l.scrollPos-o);l.style.webkitTransitionDuration="150ms";l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}}};if(ajaxart.isIDevice){jQuery("input").focus(function(){setTimeout(function(){l.FixKeyboard()},1)}).blur(l.FixKeyboard)}else{window.addEventListener("resize",function(){l.FixKeyboard()})}this.SizeChanged=function(){l.MaxHeight=n.offsetHeight;if(l.scrollPos!=g(l.scrollPos)){l.scrollPos=g(l.scrollPos);l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}};this.ScrollToTop=function(o){if(l.scrollPos!=g(l.maxOffset)){l.scrollPos=g(l.maxOffset);l.style.webkitTransitionDuration=o?o:"150ms";l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}};this.ScrollToBottom=function(o){if(l.scrollPos!=g(-l.offsetHeight)){l.scrollPos=g(-l.offsetHeight);l.style.webkitTransitionDuration=o?o:"150ms";l.style.webkitTransform="translate3d(0,"+l.scrollPos+"px,0)"}}}}]},HorizontalCurtain:function(b,c,a){var d={isObject:true};d.Id=aa_text(c,b,"ID",a);d.ID=[d.Id];d.FieldData=function(f){return f};d.CellPresentation=["control"];d.HideTitle=true;d.Control=function(o,g){var k=jQuery("<DIV class='aa_curtain'/>")[0];k.style.cssText="position:"+(aa_has_simulator()?"absolute":"fixed")+"; background:transparent; z-index:1; top:0px; left:0px";var m=ajaxart.runNativeHelper(o,b,"Page",a)[0];jQuery(k).append(m).append(aa_renderStyleObject(aa_first(c,b,"HandlersStyle",a),{},g));k.open=aa_bool(c,b,"StartAsOpen",a);var l=function(){k.width=ajaxart_screen_size(true).width;k.style.webkitTransform="translate3d("+-(k.open?0:k.width)+"px,0,0)"};l();window.addEventListener("resize",l);var f=function(p){k.start={pageX:p.touches?p.touches[0].pageX:p.pageX,pageY:p.touches?p.touches[0].pageY:p.pageY,time:Number(new Date())};k.isVScrolling=undefined;k.deltaX=k.deltaY=0;k.style.MozTransitionDuration=k.style.webkitTransitionDuration=0};var h=function(r){if(!k.start){return}var q=r.touches?r.touches[0].pageX:r.pageX;var p=r.touches?r.touches[0].pageY:r.pageY;k.deltaX=q-k.start.pageX;if(typeof k.isVScrolling=="undefined"){k.isVScrolling=!!(k.isVScrolling||Math.abs(k.deltaX)<Math.abs(p-k.start.pageY))}if(k.isVScrolling){k.start=null;return}r.preventDefault();if(k.open&&k.deltaX>0){k.deltaX=0}k.style.MozTransform=k.style.webkitTransform="translate3d("+(k.deltaX-(k.open?0:k.width))+"px,0,0)"};var n=function(q){if(q.ctrlKey){k.Move(true);return}if(!k.start){return}var p=((Number(new Date())-k.start.time<250&&Math.abs(k.deltaX)>20||Math.abs(k.deltaX)>k.width/2)&&((k.deltaX>0&&!k.open)||(k.deltaX<0&&k.open)));k.Move(p)};k.start=null;if(ajaxart.isTouch){document.body.ontouchmove=h;document.body.ontouchend=n;document.body.ontouchstart=f}else{jQuery(aa_body()).unbind("mousemove").unbind("mouseup").unbind("mousedown").mousemove(h).mouseup(n).mousedown(f)}k.Move=function(p){if(p){k.open=!k.open;var r=function(){ajaxart.run(c,b,k.open?"OnOpen":"OnClose",a);k.removeEventListener("webkitTransitionEnd",r);k.removeEventListener("transitionend",r)};k.addEventListener("webkitTransitionEnd",r);k.addEventListener("transitionend",r)}var q=k.style;q.webkitTransitionDuration=q.MozTransitionDuration=q.msTransitionDuration=q.OTransitionDuration=q.transitionDuration=300+"ms";q.MozTransform=q.webkitTransform=q.transform="translate3d("+-(k.open?0:k.width)+"px,0,0)";k.start=null};return[k]};return[d]},IsMobileCurtainOpen:function(c,d,b){var a=[];jQuery(aa_find_field(aa_text(d,c,"CurtainId",b),"aa_curtain")).each(function(g,f){if(f.open){a=["true"]}});return a},SlideMobileCurtain:function(b,c,a){var d=aa_text(c,b,"SlideTo",a);jQuery(aa_find_field(aa_text(c,b,"CurtainId",a),"aa_curtain")).each(function(g,f){if(f.Move){if(d=="toggle"||f.open&&d=="close"||!f.open&&d=="open"){f.Move(true)}}});return[]},MobileDetailsReplacingAll:function(c,h,b){var l=b.vars._Cntr[0];var g=b.vars.DetailsControl;if(g==null||g.length==0){return[]}var d=aa_text(h,c,"DetailsBackground",b);var m=jQuery(g).appendTo("<DIV/>").parent().appendTo("<DIV/>").parent().appendTo("<DIV class='aa_mobile_replacing_all'/>").parent()[0];m.style.cssText="position:absolute; z-index:1; top:0px; left:0px;";m.firstChild.style.cssText="background:"+d+";display: inline-block;";m.firstChild.style.minWidth=ajaxart_screen_size(true).width+"px";m.firstChild.style.minHeight=Math.max(ajaxart_screen_size(true).height+70,aa_document_height())+"px";var a=aa_window_scroll().Y;var f=aa_first(h,c,"DetailsAnimation",b);var k=l.Ctrl;l.Ctrl.parentNode.appendChild(m);f.animate(m,function(){setTimeout(function(){if(a>1){jQuery(aa_body()).animate({scrollTop:navigator.userAgent.toLowerCase().match(/android/)?1:0},200)}},1);l.Ctrl=m});b.vars._ItemDetailsObject[0].HideDetails=function(p,n){var o=aa_first(h,c,"ListAnimation",b);o.hide(m,function(){aa_remove(m);l.Ctrl=k})};b.vars._ItemDetailsObject[0].HideDetails1=function(r,n){var q=aa_first(h,c,"ListAnimation",b);var o=aa_text(h,c,"ListBackground",b);l.Ctrl.parentNode.removeChild(k);var p=jQuery(k).appendTo("<DIV/>").parent().appendTo("<DIV/>").parent().appendTo("<DIV class='aa_mobile_original_control'/>").parent()[0];l.Ctrl.parentNode.appendChild(p);p.style.cssText="position:"+(aa_has_simulator()?"absolute":"fixed")+";z-index:1; top:0px; left:0px; ";p.firstChild.style.cssText="background:"+o+";display: inline-block;";p.firstChild.style.width=ajaxart_screen_size(true).width+"px";p.firstChild.style.minHeight=ajaxart_screen_size(true).height+"px";if(aa_has_simulator()){p.style.top=aa_window_scroll().Y+"px"}jQuery(p.firstChild.firstChild).css("-webkit-transform","translateY(-"+a+"px)").css("transform","translateY(-"+a+"px)");jQuery(k).show();q.animate(p.firstChild,function(){aa_window_scroll_to(0,a);jQuery(p.firstChild.firstChild).css("-webkit-transform","none").css("transform","none");k.style.cssText="z-index:1";l.Ctrl.parentNode.appendChild(k);l.Ctrl.parentNode.removeChild(p);k.style.cssText="z-index:none";aa_remove(m);l.Ctrl=k})};return[]}});function aa_has_simulator(a){if(!a){return(ajaxart.jbart_studio&&jQuery(".studio_simulator").length>0&&jQuery(".studio_simulator")[0].className.indexOf(" ")>-1)}else{return(ajaxart.jbart_studio&&jQuery(a).parents(".studio_simulator").length>0&&jQuery(a).parents(".studio_simulator")[0].className.indexOf(" ")>-1)}}function aa_body(){if(aa_has_simulator()){return jQuery(".studio_simulator")[0]}else{return document.body}}function aa_window_scroll(){if(aa_has_simulator()){return{Y:jQuery(".studio_simulator")[0].scrollTop,X:jQuery(".studio_simulator")[0].scrollLeft}}else{return{Y:window.scrollY,X:window.scrollX}}}function aa_window_scroll_to(a,b){if(aa_has_simulator()){jQuery(".studio_simulator").scrollTop(b).scrollLeft(a)}else{window.scrollTo(a,b)}}function aa_document_height(){if(aa_has_simulator()){return jQuery(".studio_simulator").children().height()}else{return Math.max(jQuery(document).height(),jQuery(window).height(),document.documentElement.clientHeight)}}aa_gcs("field",{SearchBox:function(d,f,c){var g=ajaxart.runNativeHelper(f,d,"Field",c)[0];g.Style=aa_first(f,d,"Style",c);g.StyleCssClass=aa_attach_global_css(g.Style.Css);ajaxart_addMethod(g,"ItemTitle",d,"ItemTitle",c);ajaxart_addMethod(g,"ItemImage",d,"ItemImage",c);g.DefaultImage=aa_text(f,d,"DefaultImage",c);if(g.DefaultImage!=""){function h(l,k){l.ItemImage=function(m,n){var o=aa_text(m,d,"ItemImage",aa_merge_ctx(c,n));if(o==""){o=k}return[o]}}h(g,g.DefaultImage)}ajaxart_addMethod(g,"ItemExtraText",d,"ItemExtraText",c);ajaxart_addMethod(g,"ItemLink",d,"ItemLink",c);aa_field_handler(g,"ModifyControl",function(p,m,q,s,r){var n=p.Field;var o=jQuery(p).find(".field_control")[0];jQuery(o).addClass("aa_withpopup").addClass(n.StyleCssClass);n.ResultsPage=n.PopupPage(f,aa_ctx(c,{_Field:[n],_PopupField:[n],_SearchBox:[o]}))[0];n.PopupContents=function(){var u=jQuery(p).find(".field_control")[0];var t=[];for(var v=0;v<u.AllItems.length;v++){if(v<30){t.push(u.AllItems[v].item)}}return ajaxart.runNativeHelper(f,d,"PreviewContainer",aa_ctx(c,{_Field:[this],_PopupField:[this],_Items:t}))};var l=function(u,v){var t=jQuery(p).find(".field_control")[0];aa_preprocess_items_for_search(u,t,v,d,c)};if(d.getAttribute("Items")){var k=d.getAttribute("Items").match(/%[$]([a-zA-Z0-9_]*)%/);if(k){aa_jbart_register_data_arrive(k[1],function(u){var t=jQuery(p).find(".field_control")[0];aa_preprocess_items_for_search(u,t,n,d,c)},c)}}if(!o.AllItems||o.AllItems.length==0){aa_preprocess_items_for_search(ajaxart.run(f,d,"Items",c),o,n,d,c)}o.MaxItemsToShow=aa_int(f,d,"MaxItemsToShow",c);o.ShowResults=function(){if(o.ResultsShown){return}o.ResultsShown=true;if(jQuery(o).hasClass("empty_text_description")){o.value=""}var t=b(o);if(t){aa_replaceElement(t,o.Container.Ctrl)}else{if(o.value!=""||o.ShowPopupOnEmptySearch){ajaxart.runNativeHelper([],d,"OpenPopup",aa_ctx(c,{_Input:[o],_ResultsContainer:[o.Container.Ctrl],_Field:[n],_PopupField:[n],ControlElement:[o]}))}}};o.HideResults=function(){var t=a(o);aa_closePopup(t)};o.ShowNothingFound=function(){var v=aa_first([this.value],d,"NoResults",c);jQuery(v).addClass("search_results");v.jbInput=o;var u=a(o);if(u){aa_replaceElement(u,v);var t=a(o);if(t&&t.Dlg&&t.Dlg.FixDialogPosition){t.Dlg.FixDialogPosition(false,true)}}else{ajaxart.runNativeHelper([],d,"OpenPopup",aa_ctx(c,{_Input:[o],_ResultsContainer:[v],_Field:[n],_PopupField:[n],ControlElement:[o]}))}};o.OnSelect=function(v,t){var u=aa_text(v,d,"ItemLink",c);if(aa_bool(v,d,"HideResultsOnClick",c)){this.HideResults()}ajaxart.run([u],d,"DoOnSelect",aa_ctx(c,{ControlElement:[o],SelectedItem:v}));o.value="";if(o.RefreshDescriptionForEmptyText){o.RefreshDescriptionForEmptyText()}};o.AfterItemsAdded=function(){setTimeout(function(){var t=a(o);if(t&&t.Dlg&&t.Dlg.FixDialogPosition){t.Dlg.FixDialogPosition(false,true)}})};o.ShowPopupOnEmptySearch=aa_bool(f,d,"ShowPopupOnEmptySearch",c);o.MathcedChunkSize=50;o.MatchedTextCssClass=aa_attach_global_css(aa_text(f,d,"MatchedTextCss",c));aa_prepare_more_items_to_show(o,c)});aa_field_handler(g,"OnKeyup",function(o,p,l,n,k){for(var m=0;m<aa_navigation_codes.length;m++){if(n.keyCode==aa_navigation_codes[m]){return true}}l.Container=ajaxart.runNativeHelper(f,d,"ResultsContainer",aa_ctx(c,{_Field:[o],_PopupField:[o],_Input:[l],_SearchBox:[l]}))[0];l.Container.jbInput=l;if(!jQuery(l.Container).hasClass("aa_container")){l.Container=jQuery(l.Container).find(".aa_container")[0]}if(l.Container&&l.Container.Cntr){l.Container=l.Container.Cntr}if(n.keyCode!=27&&n.keyCode!=13){jQuery(l).removeClass("empty_text_description").removeClass(l.Field.EmptyTextCssClass);aa_search(o,l,d,aa_ctx(c,{_Cntr:[l.Container.Cntr]}),l.TimeBeforeStartingSearch)}else{l.HideResults()}});aa_field_handler(g,"OnKeydown",function(m,n,k,l){aa_search_keydown(m,k,l,c)});aa_field_handler(g,"OnMouseUp",function(m,n,k,l){if(jQuery(".search_results").length>0){return}k.Container=ajaxart.runNativeHelper(f,d,"ResultsContainer",aa_ctx(c,{_Field:[m],_PopupField:[m],_Input:[k],_SearchBox:[k]}))[0];if(!jQuery(k.Container).hasClass("aa_container")){k.Container=jQuery(k.Container).find(".aa_container")[0]}if(k.Container&&k.Container.Cntr){k.Container=k.Container.Cntr}aa_search(m,k,d,aa_ctx(c,{_Cntr:[k.Container.Cntr]}),0)});ajaxart.runNativeHelper(f,d,"FieldAspects",aa_ctx(c,{_Field:[g],_PopupField:[g]}));g.ResultListAspects=function(){return ajaxart.runNativeHelper(f,d,"ResultListAspects",c)};return[g];function b(l){var k=jQuery(".search_results");for(var m=0;m<k.length;m++){if(k[m].jbInput==l){return k[m]}}return null}function a(l){var k=jQuery(".search_results");for(var n=0;n<k.length;n++){if(k[n].jbInput==l){var o=jQuery(k[n]).parents("aa_popup")[0];for(var m=0;m<ajaxart.dialog.openPopups.length;m++){if(ajaxart.dialog.openPopups[n].Contents==o){return ajaxart.dialog.openPopups[n]}}}}return null}}});function aa_fill_items(c,f,a,b,d){if(c.SearchId!=a){return}aa_show_items(c,f,b.slice(d,d+c.NoFilterChunkSize),"",a);if(d+c.NoFilterChunkSize<b.length){setTimeout(function(){aa_fill_items(c,f,a,b,d+c.NoFilterChunkSize)},1)}}function aa_handle_empty_pattern(c,k,h,f,b){var g=ajaxart.run([],h,"PromotedItems",f);var a=[];if(g.length>0){aa_show_items(c,k,g,"",b);if(c.AllItems.length>g.length){c.SetHasMoreItemsToShow(function(){jQuery(c.Container.Ctrl).find(".aa_item").remove();aa_fill_items(c,k,b,c.AllItems,0)})}}else{for(var d=0;d<c.MaxItemsToShow;d++){if(d<c.AllItems.length){a.push(d)}}if(c.MaxItemsToShow<c.AllItems.length){c.SetHasMoreItemsToShow(function(){aa_fill_items(c,k,b,c.AllItems,c.MaxItemsToShow)})}}aa_show_items(c,k,a,"",b);c.ShowResults()}function aa_search_chunk(q,p,d,a,b,m,c,g){if(q.SearchId!=b){return}var o=[];var u=0;var f=Math.min(q.AllItems.length,c+q.SearchChunkSize);if(m.text==""){return aa_handle_empty_pattern(q,p,d,a,b)}var r=m.p1;for(var k=c;k<f;k++){var t=q.AllItems[k].text;if((r&&t.indexOf(r)!=-1)||(m.p2&&t.indexOf(m.p2)!=-1)||(m.p3&&t.indexOf(m.p3)!=-1)||(m.p4&&t.indexOf(m.p4)!=-1)){var l=false;if(m.words>1){var h=0;if(r&&t.indexOf(r)!=-1){h++}if(m.p2&&t.indexOf(m.p2)!=-1){h++}if(m.p3&&t.indexOf(m.p3)!=-1){h++}if(m.p4&&t.indexOf(m.p4)!=-1){h++}if(h==m.words){l=true}}else{if(t.indexOf(r)==1){l=true}}if(l){o.push(k);if(q.TotalShown==0&&q.FirstChunkToShow==o.length){break}}else{q.ShowAtEnd.push(k)}}}if(o.length>0){var n=q.MaxItemsToShow-q.TotalShown;aa_show_items(q,p,o.slice(0,n),m,b);q.ShowResults();if(n<o.length){q.MoreItems=q.MoreItems.concat(o.slice(n))}}if(f<q.AllItems.length){setTimeout(function(){aa_search_chunk(q,p,d,a,b,m,f,g)},1)}else{q.Searching=false;if(q){jQuery(q).removeClass("aa_loading")}if(q.ShowAtEnd.length>0){var n=q.MaxItemsToShow-q.TotalShown;if(n>0){aa_search_run_async(function(){aa_show_items(q,p,q.ShowAtEnd.slice(0,n),m,b)},q,b,true,true)}if(q.ShowAtEnd.length>n){q.MoreItems=q.MoreItems.concat(q.ShowAtEnd.slice(n))}q.ShowResults()}else{if(q.TotalShown==0){q.ShowNothingFound()}aa_fire_async_finished()}if(q.MoreItems.length>0){q.SetHasMoreItemsToShow(function(){aa_fill_items(q,p,b,q.MoreItems,0)})}}}function aa_search_run_async(d,b,a,h,c){if(!b.Jobs){b.Jobs={};b.Jobs.first_jobs=[];b.Jobs.first_jobs_index=0;b.Jobs.last_jobs=[];b.Jobs.last_jobs_index=0}if(h){b.Jobs.last_jobs.push(d)}else{b.Jobs.first_jobs.push(d)}var g=function(){if(b.SearchId!=a){return}if(b.Jobs.first_jobs_index<b.Jobs.first_jobs.length){b.Jobs.first_jobs_index++;b.Jobs.first_jobs[b.Jobs.first_jobs_index-1]()}else{if(b.Jobs.last_jobs_index<b.Jobs.last_jobs.length){b.Jobs.last_jobs_index++;b.Jobs.last_jobs[b.Jobs.last_jobs_index-1]()}}if(b.Jobs.first_jobs_index==b.Jobs.first_jobs.length&&b.Jobs.last_jobs_index==b.Jobs.last_jobs.length){aa_fire_async_finished()}};if(c){g()}else{setTimeout(g,1)}}function aa_search(h,c,f,d,k){c.ShowAtEnd=[];c.SearchChunkSize=500;c.NoFilterChunkSize=20;c.FirstChunkToShow=5;c.ResultsShown=false;c.TotalShown=0;c.MoreItems=[];c.TimeBeforeStartingSearch=150;c.Jobs=null;c.CancelMoreItemsToShow();if(!c.CurrentSearchId){c.CurrentSearchId=0}c.CurrentSearchId++;var b=c.CurrentSearchId;c.SearchId=b;c.Searching=true;var g={};if(jQuery(c).hasClass("empty_text_description")){c.value=""}g.text=c.value;var a=g.text.split(" ");g.p1=(a.length>0&&" "+a[0].toLowerCase());g.p2=(a.length>1&&" "+a[1].toLowerCase());g.p3=(a.length>2&&" "+a[2].toLowerCase());g.p4=(a.length>3&&" "+a[3].toLowerCase());g.words=a.length;c.Pattern=g;jQuery(c).addClass("aa_loading");if(k>0){setTimeout(function(){aa_search_chunk(c,h,f,d,b,g,0)},k)}else{aa_search_chunk(c,h,f,d,b,g,0)}}function aa_show_items(n,l,q,g,b){n.TotalShown+=q.length;var m=n.Container;var h=ajaxart_find_list_under_element(n.Container.Ctrl);var a=[];for(var d=0;d<Math.min(q.length,n.MathcedChunkSize);d++){if(typeof(q[d])=="number"){var s=n.AllItems[q[d]].item}else{if(q[d].item){var s=q[d].item}else{var s=q[d]}}var c=m.createNewElement([s],a,m.Context);m.insertNewElement(c,h)}var f=aa_ctx(m.Context,{_Elems:a,_Cntr:[m]});for(var d=0;d<m.Aspects.length;d++){ajaxart_runMethod([],m.Aspects[d],"InitializeElements",f)}for(var d=0;d<m.PostActors.length;d++){ajaxart.runScriptParam([],m.PostActors[d].aspect.PostAction,f)}aa_invoke_cntr_handlers(m,m.ContainerChange,[],m.Context);var r,p,o,k;if(g.p1){r=g.p1.substring(1)}if(g.p2){p=g.p2.substring(1)}if(g.p3){o=g.p3.substring(1)}if(g.p4){k=g.p4.substring(1)}for(var d in a){jQuery.each(jQuery(a[d]).find(".aa_text"),function(){if(r&&this.innerHTML.toLowerCase().indexOf(r)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,r,n.MatchedTextCssClass)}if(p&&this.innerHTML.toLowerCase().indexOf(p)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,p,n.MatchedTextCssClass)}if(o&&this.innerHTML.toLowerCase().indexOf(o)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,o,n.MatchedTextCssClass)}if(k&&this.innerHTML.toLowerCase().indexOf(k)!=-1){this.innerHTML=ajaxart_field_highlight_text(this.innerHTML,k,n.MatchedTextCssClass)}})}if(n.AfterItemsAdded){n.AfterItemsAdded()}if(q.length>n.MathcedChunkSize){aa_search_run_async(function(){aa_show_items(n,l,q.slice(n.MathcedChunkSize),g,b)},n,b)}}function aa_preprocess_items_for_search(h,m,l,c,a){m.PreprocessStep=0;m.PreprocessChunkSize=500;m.AllItems=[];var g=aa_text([],c,"SearchIn",a),k=null;if(g=="title"){k=ajaxart.compile_text(c,"ItemTitle",a)}else{if(g=="title and extra text"){var f=ajaxart.compile_text(c,"ItemTitle",a);var d=ajaxart.compile_text(c,"ItemExtraText",a);var b=function(n,o){return function(p,q){return n(p,q)+" "+o(p,q)}};k=b(f,d)}}aa_searchbox_preprocess(h,m,l,k,a,0)}function aa_searchbox_preprocess(f,k,h,g,b,c){var l=k.AllItems.length;var a=k.PreprocessChunkSize+c;if(a>f.length){a=f.length}for(var d=c;d<a;d++){k.AllItems.push({item:f[d],text:" "+g([f[d]],b).toLowerCase().replace(/^\s*|\s*$/g," ")})}if(!k.Searching&&k.SearchId&&k.TotalShown<k.MaxItemsToShow){var k=null;aa_search_chunk(k,h,profile,b,k.SearchId,k.Pattern,l-1)}if(d<f.length){setTimeout(function(){aa_searchbox_preprocess(f,k,h,g,b,d)},1)}}function aa_search_keydown(h,a,g,b){var f=g.keyCode;if(f==38||f==40){if(ajaxart.dialog.openPopups.length>0){ajaxart_stop_event_propogation(g)}var d=a.Container;if(d){d.SelectionKeydown(g)}return false}if(f==13){var d=a.Container;var c=jQuery(d.Ctrl).find(".aa_selected_item")[0];if(!c){return}a.OnSelect(c.ItemData,b);if(ajaxart.dialog.openPopups.length>0){ajaxart_stop_event_propogation(g)}}}function aa_jbart_register_data_arrive(c,f,b,a){if(!a){a=ajaxart.totext_array(b.vars.WidgetId)}var d=aa_jbart_get_data_holder(a,c);if(!d){return}d.on_data_arrive.push(f);if(d.items.length>0){f(d.items)}}function jbart_data_arrived(a,g,c){var k=ajaxart.parsexml(c);if(!k){return}var h=aa_jbart_get_data_holder(a,g);var l=[];for(var b=k.firstChild;b!=null;b=b.nextSibling){if(b.nodeType==1){l.push(b);h.items.push(b)}}for(i in h.on_data_arrive){var d=h.on_data_arrive[i];d(l,h.items)}}function aa_jbart_get_data_holder(a,c){var b="jBartWidget_"+a;if(!window[b]){window[b]={resource:{items:[],on_data_arrive:[]}}}return window[b].resource}function aa_prepare_more_items_to_show(a,b){a.DoHaveMoreItemsToShow=function(){if(this.HasMoreItemsToShow){return["true"]}return[]};a.CancelMoreItemsToShow=function(){a.HasMoreItemsToShow=false;for(var c=0;c<a.Container.Fields.length;c++){if(a.Container.Fields[c].HeaderFooter){aa_refresh_field([a.Container.Fields[c].Id],"document",false,null,aa_ctx(b,{_Cntr:[a.Container]}))}}};a.SetHasMoreItemsToShow=function(f,d){a.TotalItemsCount=d;a.HasMoreItemsToShow=true;a.ShowAllItems=function(){f();this.CancelMoreItemsToShow()};for(var c=0;c<a.Container.Fields.length;c++){if(a.Container.Fields[c].HeaderFooter){aa_refresh_field([a.Container.Fields[c].Id],"document",false,null,aa_ctx(b,{_Cntr:[a.Container],_SearchBox:[a]}))}}}}function ajaxart_uiaspects_container(a){if(a.vars._Cntr){return a.vars._Cntr[0]}return null}function ajaxart_uiaspects_select(d,f,g,c,b){var a=ajaxart_topCntr(d);if(a!=null){a.Select(d,f,g,c,b)}}function ajaxart_uiaspects_append(b,d){if(b.titleTd!=undefined){var c=b.titleTd}else{var c=b}var a=jQuery(c).children().filter(".aa_list,.aa_container");if(a.length>0){c.insertBefore(d,a[0])}else{c.appendChild(d)}}function ajaxart_uiaspects_refreshElements(d,c){if(d.length==0){return}var g=jQuery(d[0]).parents(".aa_container")[0].Cntr;var b=null;var k=[];for(var f=0;f<d.length;f++){var h=g.createNewElement(d[f].ItemData,k,g.Context);jQuery(d[f]).replaceWith(h);aa_remove(d[f],true);if(jQuery(d[f]).hasClass("aa_selected_item")){b=h}}var a=aa_ctx(g.Context,{_Elems:k});for(var f=0;f<g.Aspects.length;f++){ajaxart.trycatch(function(){ajaxart_runMethod([],g.Aspects[f],"InitializeElements",a)},function(l){ajaxart.logException(l)})}if(b){ajaxart_uiaspects_select(jQuery(b),jQuery(),"auto",g.Context,c)}return k}function aa_items(f){if(f.IsSingleItem){return(f.Items==null||f.Items.length==0||f.Items[0].Items.length==0)?[]:[f.Items[0].Items[0]]}var d=f;if(f.InheritsItems){d=d.Context.vars._ParentCntr[0];while(d&&d.IsVirtualGroup){d=d.Context.vars._ParentCntr[0]}}if(!d){return[]}var a;if(d.FilteredWrappers&&f.WrappersAsItems){a=d.FilteredWrappers}else{if(d.FilteredWrappers){a=[];var c=d.FilteredWrappers;for(var b=0;b<c.length;b++){a.push(c[b].__item||c[b])}}else{if(d.FilteredItems){return d.FilteredItems}else{a=d.Items[0].Items}}}return a}function aa_wrappers(a){return a.FilteredWrappers}function ajaxart_uiaspects_addElement(b,h,m,l){var a=h.Context;var c=h.createNewElement(b,null,a);if(c){if(m==null){var k=h.Ctrl}else{var k=m}var g=ajaxart_find_list_under_element(k);if(!l){if(!ajaxart.isxml(b)&&b[0]){b[0].__NewItem=true}h.DataHolder=null;aa_RunAsyncQuery([b,h],aa_FilterAndSort,a,function(n){var p;for(var o=0;o<h.FilteredWrappers.length-1;o++){if(b[0]==h.FilteredWrappers[o].__item){p=h.FilteredWrappers[o+1].__item;break}}var q=jQuery(g).find(">.aa_item").filter(function(){return this.ItemData[0]==p})[0];if(h.FilteredWrappers.length==0||p==h.FilteredWrappers[h.FilteredWrappers.length-1].__item||!q){h.insertNewElement(c,g)}else{jQuery(c).insertBefore(q)}});if(!ajaxart.isxml(b)){delete b.__NewItem}}jQuery(g).find(">.noitems").remove()}var f=aa_ctx(a,{_Elems:[c],_Cntr:[h]});for(var d=0;d<h.Aspects.length;d++){ajaxart_runMethod([],h.Aspects[d],"InitializeElements",f)}if(jQuery(k).find(">.aa_list").length>0&&jQuery(k).find(">.collapsable").length==0&&h.CollapseElem&&k.ItemData){h.CollapseElem(jQuery(k),false)}aa_invoke_cntr_handlers(h,h.ContainerChange,[],h.Context);return c}function ajaxart_topCntr(f){var b=[];if(f.hasClass("aa_container")){b=f.get()}var b=b.concat(f.parents().filter(function(){return jQuery(this).hasClass("aa_container")||jQuery(this).hasClass("DetailsControl")}).get());if(b.length==0){return null}if(jQuery(b[0]).hasClass("DetailsControl")){return b[0].Cntr}var a=null;for(var c=0;c<b.length;c++){var d=b[c];if(jQuery(d).hasClass("DetailsControl")){break}if(d.Cntr.Select){a=d}if(!jQuery(d).hasClass("aa_inherit_selection")){break}}if(a){return a.Cntr}return null}function ajaxart_getsection(b){var a=b.vars._Section;if(a==null||a.length==0){return null}return a[0]}function ajaxart_itemlist_getSelectedItems(d){var c=jQuery(d.Ctrl).find(".aa_selected_item").filter(aa_visible);var a=[];for(var b=0;b<c.length;b++){ajaxart.concat(a,c[b].ItemData)}return a}function aa_find_header(a){return aa_find_just_in_container(a,".aa_container_header",true)}function aa_find_footer(a){return aa_find_just_in_container(a,".aa_container_footer",true)}function aa_find_list(a){return aa_find_just_in_container(a,".aa_list",true)}function aa_find_just_in_container(g,b,a){var f=g.Ctrl;var c=jQuery(f).find(b);if(a&&c.length==1){return c[0]}for(var d=0;d<c.length;d++){if(jQuery(c[d]).parents(".aa_container")[0]==f){return c[d]}}return null}function ajaxart_find_aa_list(a){return ajaxart_find_list_under_element(a.Ctrl)}function ajaxart_find_list_under_element(d){if(jQuery(d).hasClass("aa_list")){return d}var b=jQuery(d).find(".aa_list");if(b.length==1){return b[0]}var a=jQuery(d).hasClass("aa_container")?d:jQuery(d).parents(".aa_container")[0];for(var c=0;c<b.length;c++){if(jQuery(b[c]).parents(".aa_container")[0]==a){return b[c]}}return null}function ajaxart_tree_next(c,d){if(!d.Tree){return c.next()}if(!c[0].collapsed){var b=c.find(".aa_item").filter(aa_visible_selectable).slice(0,1);if(b.length>0){return b}}b=c.next();if(b.length>0){return b}var a=c.parent();while(a.length>0){if(a.next().hasClass("aa_item")){return a.next()}if(a.next().hasClass("aa_list")){var b=ajaxart_tree_next(a.next());if(b.length>0){return b}}a=a.parent()}return[]}function ajaxart_tree_prev(d,f){var c=d.prev();if(!f.Tree){return c}if(c.length>0){if(!c[0].collapsed){var a=c.find(".aa_item").filter(aa_visible_selectable).slice(-1);if(a.length>0){return a}}return c}var b=d.parent();while(b.length>0){if(b.hasClass("aa_item")){return b}if(b.hasClass("aa_list")){var a=b.prev().find(".aa_item").filter(aa_visible_selectable).slice(-1);if(a.length>0){return a}}b=b.parent()}return b}function ajaxart_isLeaf(a){return jQuery(a).find(">.aa_list,>.aa_container").find(".aa_item").length==0}function ajaxart_add_foucs_place(a){jQuery(a).addClass("aa_focus_place");a.setAttribute("tabindex","1")}function aa_visible(){return this.hidden!=true}function aa_visible_selectable(){return this.hidden!=true}function ajaxart_container_elems(d){var a=[];var b=function(g){var f=jQuery(g);if(g.hidden==true){return}if(f.hasClass("aa_item")){a.push(g)}if(f.hasClass("aa_container")){return}jQuery(g).children().each(function(){b(this)})};var c=ajaxart_find_aa_list(d);if(c!=null){b(c)}return a}function ajaxart_properties_and_sections(o,h,f,d,p,n,u,q,g,s,m){if(typeof(g)=="undefined"){g="80"}g=parseInt(g.split("px")[0]);var t=jQuery('<table class="propertysheet" cellpadding="0" cellspacing="0"><tbody class="propertysheet_tbody"></tbody></table>')[0];if(q){jQuery(t).width("100%")}var a=t.firstChild;for(var r=0;r<n.length;r++){if(n[r].PropertiesWidth){g=Math.max(g,parseInt(n[r].PropertiesWidth))}}if(s&&s!=""){a.appendChild(jQuery('<tr class="aa_propertysheet_tr_space" style="height:'+s+'"/>')[0])}for(var r=0;r<n.length;r++){var c=n[r];if(ajaxart_object_boolean_value(c,"IsOperation")){continue}var b=document.createElement("TR");a.appendChild(b);b.className="field_row value field_"+c.Id+"_row";b.Field=c;var k=c.HideTitle;if(!k&&c.RecalcTitle){c.RecalcTitle(f,p)}if(c.AsSection&&!c.HideTitle){aa_buildSection(o,b,c,f,g,p)}else{aa_buildProperty(o,b,c,f,g,p)}if(u==true||u=="true"){u="5px"}if(u==false||u=="false"){u=""}if(r!=n.length-1&&u!=""){var l=document.createElement("tr");l.className="aa_propertysheet_tr_space";l.style.height=u;a.appendChild(l)}}if(m&&m!=""){a.appendChild(jQuery('<tr class="aa_propertysheet_tr_space" style="height:'+m+'"/>')[0])}t.ItemData=f;if(!o.ReadOnly){aa_handle_onload_validations(t)}return t}function aa_prepare_calculated_fields_for_item(a,b,d){for(var c=0;c<a.length;c++){var f=a[c];if(f.DefaultValue){f.FieldData(b,d)}if(f.IsGroup&&f.Fields){var g=f.FieldData(b,d);aa_prepare_calculated_fields_for_item(f.Fields,g,d)}}}function aa_buildSectionControl(k,h,g,b,m){var c=aa_ctx(m,{_Field:[h],FieldTitle:[h.Title],_Item:b});var a=h.SectionStyle;if(!a||!a.Html||h.HideTitle){var f=jQuery('<div class="aa_section"/>')[0];ajaxart_field_createCellControl(b,k,f,"control",h,g,c);return f}var d=jQuery(a.Html);h.SectionImage=aa_init_image_object(h.SectionImage,b,m);var l=aa_api_object(d,{Title:h.Title,Image:h.SectionImage});aa_defineElemProperties(l,"addSectionBody,updateCollapsed");if(h.SectionCollapsedByDefault){l.collapsed=true}l.addSectionBody=function(o){var n=this.getInnerElement(o);if(n){ajaxart_field_createCellControl(b,k,n,"control",h,g,c)}if(this.collapsed){jQuery(n).css("display","none")}};l.updateCollapsed=function(n){l.collapsed=n};d.addClass(aa_attach_style_css(a)).addClass("aa_section");aa_apply_style_js(l,a);return d[0]}function aa_buildSection(k,g,h,b,c,m){var d=aa_ctx(m,{_Field:[h],FieldTitle:[h.Title],_Item:b});var f=ajaxart_field_calc_field_data(h,b,d);var a=document.createElement("TD");a.colSpan=2;g.appendChild(a);var l=aa_buildSectionControl(k,h,f,b,m);a.appendChild(l)}function aa_buildProperty(q,o,p,f,g,r,m,k){var h=aa_ctx(r,{_Field:[p],FieldTitle:[p.Title],_Item:f});var n=ajaxart_field_calc_field_data(p,f,h);var b=document.createElement("TD");if(p.HideTitle){b.colSpan=2}o.appendChild(b);if(!p.HideTitle){var a=document.createElement("TD");a.className="field propertysheet_title_td fld_"+p.Id+"_title";if(g){jQuery(a).width(g+"px")}var l=p.Title;if(l!=""&&!k){l+=":"}a.innerHTML=l;if(!m){m=o}m.appendChild(a);o.appendChild(b)}b.className="propertysheet_value_td";ajaxart_field_createCellControl(f,q,b,q.CellPresentation,p,n,h);if(p.Description){var d=jQuery('<div class="field_desc"/>').html(p.Description)[0];b.appendChild(d)}if(p.Mandatory){var c=jQuery(b).find(".field_control");if(c.length>0){jQuery(a).addClass("aa_mandatory");c.addClass("aa_mandatory")}}}function aa_registerHeaderEvent(d,b,c,a,f){if(d.EventHandler==null){aa_defineElemProperties(d,"handlers,EventHandler");d.handlers=[];d.EventHandler=function(n){var m=jQuery((typeof(event)=="undefined")?n.target:(event.tDebug||event.srcElement));n=n||event;if(m.hasClass("fieldtitle_info")){return false}if(m.hasClass("fieldtitle")){var l=m}else{var l=m.parents("th")}if(l.length==0){return true}if(n.type=="mousedown"){d.LastMouseDown={th:l[0]}}if(n.type=="mouseout"){d.LastMouseDown=null}for(var g=0;g<d.handlers.length;g++){var k=d.handlers[g];if(k.eventType!=n.type){continue}if(n.button==2){if(k.activation_mode=="right mouse"){k.func(n,d,l[0])}}else{var h=(k.activation_mode=="no dominant"&&d.Owner==null)||(k.activation_mode=="suspect"&&d.Suspect!=null&&d.Owner==null)||(k.activation_mode=="dominant"&&d.Owner==k.ownerId);if(h){k.func(n,d,l[0])}}}};d.onmousedown=d.onmouseout=d.onmouseup=d.onmousemove=d.EventHandler}d.handlers.push({eventType:b,func:c,ownerId:a,activation_mode:f})}function ajaxart_dataitems_save(b,a,c,g){if(b==null){return[]}ajaxart_async_Mark(c);var f=function(h){return function(k,l){var m=b.Items;if(h==null){h=[]}else{h=[h]}ajaxart_fields_aftersave(m,m,h,a,c);g(k,l);if(ajaxart_async_IsFailure(l)){ajaxart_async_Failure(c)}ajaxart_async_CallBack([],c)}};var d=aa_getXmlInfo(b.Items[0],c);aa_runMethodAsync(b,b.Save,b.Items,c,f(d?d.OriginalCopy:null))}function ajaxart_saveDetailsAndRefresh(d,a,b,c){var f=b.vars._InnerItems[0];var g=function(n,r){var p=r.vars._Cntr[0];var m=b.vars._InnerItems[0];if(aa_tobool(b.vars.IsNewItem)){var q=null;d=m.Items;var k=p.Items[0];if(k.NewValueFromDetached){d=ajaxart_runMethod(d,k,"NewValueFromDetached",b)}var s=ajaxart_uiaspects_addElement(d,p,q)}else{var l=jQuery(ajaxart_find_aa_list(p)).find(">.aa_item");var h=[];for(var o=0;o<l.length;o++){if(l[o].ItemData&&l[o].ItemData[0]==d[0]){h.push(l[o])}}var s=ajaxart_uiaspects_refreshElements(h)}if(r.vars._SaveActions){ajaxart_runMethod(d,r.vars._SaveActions[0],"AfterSave",b)}aa_refreshAfterDataItemsChanged(b);aa_invoke_cntr_handlers(p,p.ContainerChange,[],r);if(p.Ctrl.PopupObj){p.Ctrl.PopupObj.contents=p.Ctrl}if(c){c(n,aa_ctx(r,{_ElemsOfOperation:[s]}))}return[]};if(b.vars._SaveActions){ajaxart_runMethod(f.Items,b.vars._SaveActions[0],"BeforeSave",b)}ajaxart_dataitems_save(f,a,b,g)}function aa_aspectId(a){if(a.ID){return a.ID}return a.XtmlSource[0].script.getAttribute("t")}function aa_dataitems_of_elem(a){if(jQuery(a).hasClass("aa_container")){return a.Cntr.Items[0]}if(jQuery(a).hasClass("aa_treenode")){return a._Items}var b=jQuery(a).parents(".aa_treenode,.aa_container")[0];return b._Items||b.Cntr.Items[0]}function aa_hasClass(b,a){if(b.className.indexOf(a)==-1){return false}return jQuery(b).hasClass(a)}function aa_init_itemdetails_object(a,c,h,g,d,b){if(g.Save){g.HasSave=true}a.ParentCntr=b.vars._Cntr[0];a.Save=function(l,k){ajaxart_saveDetailsAndRefresh(c,d.Fields,k);a.ClearUrl()};a.SaveAndClose=function(l,k){if(!aa_passing_validations(a.ParentCntr.Ctrl)){return}a.HideDetails(l,k);ajaxart_saveDetailsAndRefresh(c,d.Fields,aa_ctx(k,{_Cntr:b.vars._Cntr}));a.ClearUrl()};a.Close=function(l,k){a.HideDetails(l,k);a.ClearUrl()};a.Cancel=function(l,k){var m=false;if(h&&h.Cancel){h.Cancel(l,k)}a.HideDetails(l,k);a.ClearUrl();if(m){ajaxart_saveDetailsAndRefresh(c,d.Fields,k)}};a.HideDetails=function(){};a.ElemsOfOperation=b.vars._ElemsOfOperation;a.RefreshMasterElement=function(k,l){var m=a.ElemsOfOperation;if(!m||m.length==0){return}var n=a.ParentCntr;if(n.Tree){aa_invoke_cntr_handlers(n,n.RefreshItemTextAndImage,m,l)}else{var p=[];var o=n.createNewElement(m[0].ItemData,p);jQuery(m).replaceWith(o);if(jQuery(m).hasClass("aa_selected_item")){jQuery(o).addClass("aa_selected_item")}a.ElemsOfOperation=[o]}};a.ClearUrl=function(){aa_urlChange(b,"?"+a.ParentCntr.ID+"_open=;")};a.DataItems=a.ParentCntr.Items[0];var f=jQuery(b.vars._ElemsOfOperation).parents(".aa_treenode,.aa_container");if(f.length>0&&f[0]._Items){a.DataItems=f[0]._Items}}function aa_register_handler(g,d,c,h,a){if(g[d]==null){g[d]=[]}c.phase=a||0;var f=false;if(h){c.Id=h;for(var b=0;b<g[d].length;b++){if(g[d][b].Id==h){g[d][b]=c;f=true}}}if(!f){g[d].push(c)}g[d].sort(function(l,k){return l.phase>k.phase?1:-1})}function aa_invoke_cntr_handlers(g,d,f,b,a){if(!d||d.RunningFlag){return}d.RunningFlag=true;var k=aa_ctx(b,{_Cntr:[g]});try{for(var c=0;c<d.length;c++){d[c](f,k,a)}}catch(h){}d.RunningFlag=false}function aa_concat_atts(c,k){var h=c[0];if(!h){return""}if(typeof(h)=="string"){return[h]}var l="";if(ajaxart.isxml(h)&&h.nodeType==1){var b=[];var g=h.attributes;if(g!=null){for(var d=0;d<g.length;d++){l+=g.item(d).value+", "}}var f=h.firstChild;while(f){var a=f.firstChild;if(f.nodeType==1&&a&&a.nodeValue!=""){if(a.nodeType==3||a.nodeType==4){l+=a.nodeValue+", "}}f=f.nextSibling}}else{if(ajaxart.isObject(h)){for(var d in h){if(d!="isObject"&&d.indexOf("__")!=0&&typeof(h[d])=="string"){l+=h[d]+", "}}if(h.Node){l+=", "+aa_concat_atts([h.Node],k)}if(h.__item){l+=", "+aa_concat_atts([h.__item],k)}}}return[l]}function aa_add_partial_suffix(f,h,g,d){if(f.PartialView&&f.PartialView.RemoveSummary){f.PartialView.RemoveSummary(f)}if(h==g){return}f.PartialView={isObject:true,From:0,ShownItems:h,TotalItems:g};var c=jQuery(f.Ctrl).find(">.aa_container_footer");var b=c.find(".PartialViewSummary");if(b.length==0){b=jQuery("<div></div>");b.addClass("PartialViewSummary");c.append(b)}f.PartialView.ShowAll=function(){f.PartialView.RemoveSummary(f);aa_recalc_filters_and_refresh(f,[],d,true)};var a=jQuery('<span class="aa_show_all_items">'+ajaxart_multilang_text("show all items",f.Context)+"</span>");a.click(function(){if(!window.aa_incapture){f.PartialView.ShowAll()}});b.text(f.PartialView.ShownItems+" "+ajaxart_multilang_text("of",f.Context)+" "+f.PartialView.TotalItems);b.append(a);f.PartialView.RemoveSummary=function(m){var l=jQuery(m.Ctrl).find(">.aa_container_footer");var k=l.find(".PartialViewSummary");k.remove()}}function aa_loading(d,c){d.PartialView={isObject:true,Loading:true,RemoveSummary:function(k){var h=jQuery(k.Ctrl).find(">.aa_container_footer");var g=h.find(".PartialViewSummary");g.remove();aa_fire_async_finished()}};var b=jQuery(d.Ctrl).find(">.aa_container_footer");var a=b.find(".PartialViewSummary");if(a.find(".aa_show_all_items").length>0){a.remove();a=b.find(".PartialViewSummary")}if(a.length==0){a=jQuery('<div class="PartialViewSummary"></div>');b.append(a)}var f=a.find(">.aa_loading");if(f.length==0){f=jQuery('<span class="aa_loading" />');a.append(f)}f.text(f.text()+".")}function aa_recalc_filters_and_refresh(d,c,b,a){b=b||d.Context;var f=ajaxart_find_aa_list(d);if(!f){return}aa_RunAsyncQuery([c,d],aa_FilterAndSort,b,function(g){aa_refresh_itemlist(d,aa_ctx(b,{DataView:g}),a)})}function aa_refresh_itemlist(n,b,h){b=b||n.Context;h=h||n.DoNotUseIncrementalBuilder;if(h){n.ShowAll=true}var m=ajaxart_find_aa_list(n);var o=aa_items(n);if(o==null){return}if(o.length==0&&n.ControlForNoData){var a=n.ControlForNoData([],b)[0];jQuery(a).addClass("aa_list");aa_replaceElement(m,a)}if(n.createNewElement){if(n.IsSingleItem&&o.length>0){aa_clear_cntr_items(m,n);var d=n.createNewElement([o[0]],[],b);m.appendChild(d);var k=aa_ctx(n.Context,{_Elems:[d]});for(var g=0;g<n.Aspects.length;g++){ajaxart_runMethod([],n.Aspects[g],"InitializeElements",k)}for(var g=0;g<n.PostActors.length;g++){ajaxart.runScriptParam([],n.PostActors[g].aspect.PostAction,b)}}else{var c=[];var p=n.ChunkLimitMSec||200;var l=n.PageLimitMSec||2000;var f=n.ShowIncrementalBuild==null?true:n.ShowIncrementalBuild;if(h&&!window.inJBartRefresh){l=60000;n.ShowAll=true}else{n.ShowAll=null}ajaxart_uiaspects_incrementalBuild(n,b,o,c,p,l,f,n.ShowItemsInSyncMode)}}aa_invoke_cntr_handlers(n,n.ContainerChange,[],b)}function ajaxart_uiaspects_incrementalBuild(o,b,p,d,q,m,h,l){var f={start:function(){if(o.ItemText){m=Math.floor(m/15);q=Math.floor(q/3)}var s=ajaxart_find_aa_list(o);if(!s){return}this.startTime=new Date().getTime();if(h){aa_clear_cntr_items(s,o)}if(o.Tree){aa_clear_cntr_items(s,o);for(var r=0;r<p.length;r++){s.appendChild(o.createNewElement([p[r]],d,b))}this.build(p.length);return}if(o.GroupByFields&&o.GroupByFields.length>0){o.DoGroupBy();return}this.build(0)},build:function(x){aa_loading(o,b);var y=ajaxart_find_aa_list(o);if(!y){return}var t=new Date().getTime();var z=x;var s=[];if(!o.ShowAll&&o.MaxItemsToShow){var A=Math.min(p.length,o.MaxItemsToShow)}else{var A=p.length}while(new Date().getTime()-t<q&&x<A&&x-z<300){var u=o.createNewElement([p[x]],d,b);if(u&&h){s.push(u)}x++}var w=aa_ctx(o.Context,{_Elems:d});for(var v=0;v<o.Aspects.length;v++){ajaxart.trycatch(function(){ajaxart_runMethod([],o.Aspects[v],"InitializeElements",w)},function(B){ajaxart.logException(B)})}for(var v in s){y.appendChild(s[v])}if(x>=A||(new Date().getTime()-this.startTime)>m){if(!o.Tree&&!h){aa_clear_cntr_items(y,o);for(var v=0;v<d.length;v++){y.appendChild(d[v])}}for(var v=0;v<o.PostActors.length;v++){ajaxart.trycatch(function(){ajaxart.runScriptParam([],o.PostActors[v].aspect.PostAction,o.Context)},function(B){ajaxart.logException(B)})}aa_add_partial_suffix(o,x,A,b);return}else{var r=function(B){setTimeout(function(){if(!ajaxart.isattached(o.Ctrl)){return}if(o.IncrementalBuilder===B){o.IncrementalBuilder.build(x)}},1)}}if(!window.inJBartRefresh){r(this)}}};if(!l){o.IncrementalBuilder=f;o.IncrementalBuilder.start()}else{var n=ajaxart_find_aa_list(o);if(!n){return}var a=[];for(var g=0;g<p.length;g++){var c=o.createNewElement([p[g]],d,b);a.push(c)}var k=aa_ctx(o.Context,{_Elems:d});for(var g=0;g<o.Aspects.length;g++){ajaxart.trycatch(function(){ajaxart_runMethod([],o.Aspects[g],"InitializeElements",k)},function(r){ajaxart.logException(r)})}for(var g in a){n.appendChild(a[g])}}}function aa_dummysubet(a){var b={isObject:true,Items:[a]};b.Save=function(c,d){var f=aa_getXmlInfo(a,d);if(f.Save){return f.Save([a],d)}};return b}function aa_apply_css(b,a){if(!a){return}if(typeof(a)!="string"){a=ajaxart.totext_array(a)}if(a==""){return}if(a.indexOf(":")>0){b.style.cssText=b.style.cssText+";"+a}else{b.className=b.className+" "+a}}function ajaxart_getUiPref(d,c,b){if(b.vars._UIPref==null){return null}var f=aa_ctx(b,{Prefix:[d],Property:[c]});var a=ajaxart.totext_array(ajaxart_runMethod([],b.vars._UIPref[0],"GetProperty",f));if(a==""){return null}return a}function ajaxart_setUiPref(d,c,b,a){if(a.vars._UIPref==null){return}var f=aa_ctx(a,{Prefix:[d],Property:[c],Value:[b]});ajaxart_runMethod([],a.vars._UIPref[0],"SetProperty",f)}function aa_clear_cntr_items(b,d){var c=null,a=b.firstChild;while(c!=null||a!=null){if(c&&c.className&&c.className.indexOf("aa_item")>-1){c.parentNode.removeChild(c)}c=a;if(a){a=a.nextSibling}}jBart.trigger(d,"clearItems")}function aa_empty(c,b){var a=[];while(c.firstChild){aa_remove(c.firstChild,b)}aa_clear_virtual_inner_element(c)}function aa_clear_virtual_inner_element(b){if(!b.virtual_inner_elements){return}for(var a=0;a<b.virtual_inner_elements.length;a++){aa_empty(b.virtual_inner_elements[a])}}function aa_checked(a,b){a.checked=b;a.defaultChecked=b}var aa_intest;if(!ajaxart.ui){ajaxart.ui={}}ajaxart.ui.bindEvent=function(c,b,a){if(!c){return}if(b=="mouserightclick"){jQuery(c).bind("contextmenu",function(){return false});jQuery(c).mousedown(function(f){var d=f;if(d.button==2){xFireEvent(this,"click",null);ajaxart.ui.lastEvent=(f)?f:window.event;a(f);ajaxart.ui.lastEvent=null;return false}return true});return}if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c.attachEvent("on"+b,a);c.jbEvents=c.jbEvents||[];c.jbEvents.push({event:"on"+b,callback:a})}}};ajaxart.ui.absoluteLeft=function(a,d){if(a==null){return 0}var f=a,c=0,b=a;if(!d){while(b&&b.tagName&&b.tagName.toLowerCase()!="body"){c-=b.scrollLeft;b=b.parentNode}}while(a){c+=a.offsetLeft;a=a.offsetParent}return c};ajaxart.ui.absoluteTop=function(a,d){var c=0,f=a,b=a;if(typeof(d)=="undefined"){d=false}if(!d){while(b&&b.tagName&&b.tagName.toLowerCase()!="body"){c-=b.scrollTop;b=b.parentNode}}while(a){c+=a.offsetTop;a=a.offsetParent}return c};ajaxart.ui.mousePos=function(b){if(typeof(event)!="undefined"){var b=window.event}if(b.pageX||b.pageY){return{x:b.pageX,y:b.pageY}}else{if(b.clientX||b.clientY){var a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;var c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:c}}}return{}};ajaxart.ui.applyKeyboardEvent=function(a,c){if(a!=null&&a.keyCode!=null){var b="";switch(a.keyCode){case 40:b="down arrow";break;case 38:b="up arrow";break;case 13:b="enter";break;case 32:b=" ";break}if(a.keyCode>=48&&a.keyCode<=126){b=String.fromCharCode(a.keyCode).toUpperCase()}if(a.ctrlKey==true&&b!=null){b="Ctrl+"+b}if(a.altKey==true&&b!=null){b="Alt+"+b}ajaxart.setVariable(c,"KeyPressed",[b])}};aa_incapture=false;function ajaxart_runevent(f,g,h,l,b){if(typeof(ajaxart_captured_element)!="undefined"&&ajaxart_captured_element.length>0){return[]}var n=f.ajaxart;if(typeof(n)=="undefined"){return[]}var c=n.params;if(g.length>0){var k=c.vars[g];if(k==null||k.length==0){return[]}var m=k[0][h];if(m==null||typeof(m)=="undefined"){return[]}}else{var m={script:ajaxart.getVariable(c,h),context:c}}var a=ajaxart.clone_context(m.context);for(var d in n.params.vars){a.vars[d]=n.params.vars[d]}if(typeof(l)!="undefined"){ajaxart.setVariable(a,"ControlData",[l])}ajaxart.setVariable(a,"ControlElement",[f]);ajaxart.ui.applyKeyboardEvent(b,a);if(ajaxart.isArray(m.script)){return[]}return ajaxart.run(n.data,m.script,"",a)}function aa_stop_prop(a){if(!a){return}if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;return false}function aa_html_findclass(b,a){if(jQuery(b).hasClass(a)){return jQuery(b)}return jQuery(b).find("."+a)}function aa_image_size_obj(c){var b={};var a=c.split(",");if(a.length>=1){b.width=parseInt(a[0].split("px")[0])}if(a.length>=2){b.height=parseInt(a[1].split("px")[0])}return b}function aa_fix_image_size(b,d){if(!d.height&&!d.width){return}if(!d.height){b.style.width=d.width+"px";return}if(!d.width){b.style.height=d.height+"px";return}var a=function(){var k=new Image();k.src=b.getAttribute("src");var h=k.naturalWidth,n=k.naturalHeight;if(k.naturalWidth==null){h=k.width,n=k.height}var m=Math.min(h,d.width);var g=Math.min(n,d.height);var l=h/n;var f=m/g;if(l!=f){if(h>=n*f){m=d.width;g=Math.floor(m/l)}else{g=d.height;m=Math.floor(g*l)}}b.width=m;b.height=g};var c=new Image();c.src=b.getAttribute("src");if(c.complete){a()}else{b.onload=a}}function ajaxart_field_highlight_text(h,b,k){if(h==null||h==""){return""}var a=h;var d=h.toLowerCase();var g=d.indexOf(b);var c=d.indexOf(">");if(g!=-1&&g>c){var f=h.substring(g,g+b.length);a=h.replace(f,"####"+f+"~~~~")}a=a.replace(/####/g,'<span class="aa_highlight '+k+'">');a=a.replace(/~~~~/g,"</span>");return a}function aa_replaceElement(b,a,d,c){if(b.ParentObject!=null){aa_defineElemProperties(a,"ParentObject");a.ParentObject=b.ParentObject;a.ParentObject[0].ControlHolder=[a]}if(a){if(c){b.parentNode.appendChild(a);c.replace(b,a)}else{ajaxart.replaceXmlElement(b,a,true,d)}aa_clear_virtual_inner_element(b);aa_element_attached(a);aa_element_detached(b)}return a}function aa_set_element_size(c,g,f){if(!f){f=""}var b=g.split(",");var d=b[0];var a=b.length>0?b[1]:"";d=aa_size_to_pixels(d,"width");a=aa_size_to_pixels(a,"height");if(d!=""){jQuery(c).css(f+"width",d)}if(a!=""){jQuery(c).css(f+"height",a)}}function aa_size_to_pixels(c,b){if(!c){return null}if(c.match(/^[0-9 ]+$/)){return c+"px"}if(c.indexOf("%")==-1){return c}var a=parseInt(c);if(isNaN(a)){return null}return Math.floor(ajaxart_screen_size()[b]*a/100)+"px"}function aa_ensure_visible(b,f){var g=b.offsetHeight;var d=b;var c=0;if(!f){f=10}while(true){var a=d.parentNode;if(!a){return}c+=d.offsetTop;if(a.offsetParent==d.offsetParent){c-=a.offsetTop}if(c+g+f>a.offsetHeight+a.scrollTop){a.scrollTop=g+c+f-a.offsetHeight}if(c-f<a.scrollTop){a.scrollTop=Math.max(c-f,0)}c-=a.scrollTop;d=a}}function aa_find_field(f,g,d){var c=aa_intest?aa_intest_topControl:document;var b=f?"fld_"+f:g;if(!b){return[]}var a=jQuery(c).find("."+b);return d?a.parent().get():a.get()}jBart.addDescriptionForEmptyText=function(b,a,d){var f=b.Field;var c=jQuery(b).find("input")[0];if(c){aa_defineElemProperties(c,"getValue","RefreshDescriptionForEmptyText");c.getValue=function(){var g=this;if(jQuery(g).hasClass("empty_text_description")&&g.value==a){return""}return g.value};c.RefreshDescriptionForEmptyText=function(){var g=this;if(g.value==""){jQuery(g).addClass("empty_text_description").addClass(d);g.value=a;g.setAttribute("value",a)}else{jQuery(g).removeClass("empty_text_description").removeClass(d)}};c.RefreshDescriptionForEmptyText()}};var aa_delayed_actions={};function aa_run_delayed_action(a,c,b){aa_delayed_actions[a]=c;setTimeout(function(){if(aa_delayed_actions[a]){aa_delayed_actions[a]()}},b||1)}function aa_cancel_delayed_action(a){aa_delayed_actions[a]=null}function aa_attach_window_resize(b,a){if(!a||!b){return}if(ajaxart.aa_windowresize==null){ajaxart.aa_windowresize=0;ajaxart.window_size={height:window.innerHeight,width:window.innerWidth};function c(){if(ajaxart.aa_windowresize!=0){clearTimeout(ajaxart.aa_windowresize)}if(ajaxart.window_size.width==window.innerWidth&&Math.abs(ajaxart.window_size.height-window.innerHeight)>100){return}ajaxart.window_size={height:window.innerHeight,width:window.innerWidth};aa_windowresize=setTimeout(function(){jQuery("body").find(".aa_window_resize_listener").each(function(d,f){jBart.trigger(f,"WindowResize")});aa_windowresize=0},100)}window.addEventListener("resize",c);window.addEventListener("orientationchange",c)}jQuery(a).addClass("aa_window_resize_listener");jBart.bind(a,"WindowResize",b)};
ajaxart.load_xtml_content('',ajaxart.parsexml('<xtml package="true"><xtml ns="object" jbart="true"><Type id="Object" /><Component id="Object" type="object.Object" execution="native"><Param name="Property" type="data.Data[]" has_name="true" /><Param name="TextProperty" type="data.Data[]" has_name="true" /><Param name="Method" type="action.Action[]" has_name="true" /></Component><Component id="ObjectFromParams" type="object.Object" execution="native"><Param name="Property" type="data.Data[]" /><Param name="Method" type="data.Data[]" /></Component><Component id="RunMethod" type="*" execution="native" dtsupport="false"><Param name="Object" Default="%%"/><Param name="Method" essential="true" /><Param name="Input" Default="%%"/><Param name="Param" type="data.Data[]"><ParamAspect t="xtml_dt_aspect.RequiresName" /></Param></Component><Component id="FastRunMethod" type="*" execution="native" description="Object cannot be changed in batch calls" dtsupport="false"><Param name="Object" Default="%%"/><Param name="Method" essential="true" /></Component><Component id="SetProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /><Param name="Value" essential="true" /><Param name="IsSingleProperty" type="data.Boolean" /></Component><Component id="SetTextProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /><Param name="Value" essential="true" /></Component><Component id="SetNumericProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /><Param name="Value" essential="true" /></Component><Component id="ClearProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /></Component><Component id="SetBooleanProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /><Param name="Value" essential="true" /></Component><Component id="SetMethod" type="action.Action" execution="native"><Param name="Object"><Default value="%%"/></Param><Param name="Method" essential="true"/><Param name="Xtml" essential="true"/></Component><Component id="AddToProperty" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property" essential="true"  /><Param name="Value" essential="true" /></Component><Component id="AddOrReplacePropertyItem" type="action.Action" execution="native"><Param name="Object" Default="%%"/><Param name="Property"  /><Param name="Item"/></Component><Component id="HasMethod" type="data.Boolean" execution="native" dtsupport="false"><Param name="Object" Default="%%"/><Param name="Method" essential="true" /></Component><Component id="OverrideObject" type="object.Object" execution="native"><Param name="Object" /><Param name="Property" type="data.Data[]" /><Param name="TextProperty" type="data.Data[]" /><Param name="Method" type="data.Data[]" /><Param name="AddToProperty" /><NativeHelper t="object.Object"/></Component><Component id="Clone" type="data.Data" execution="native"><Param name="Object" /></Component><Component id="IsObject" type="data.Boolean" execution="native" /></xtml><xtml ns="field"><Component id="BooleanFilter" type="field.FieldAspect" execution="native" category="filter" light="false"><Param name="TitleForTrue"/><Param name="TitleForFalse"/><NativeHelper name="Control" t="field.ShowFieldControl" Item="%%" Class="aa_filter_input"><Var name="_OriginalField" value="%$_Field%"/><Field t="field.Field1" ID="%$_OriginalField/ID%_filter"><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsFilter" Value="true"/><FieldAspect t="object.RunMethod" Object="%$_OriginalField/FilterAspects%" Method="GetContent" /><FieldAspect t="field_aspect.Picklist" AllowEmptyValue="true"><Options t="picklist.RichOptions"><Option t="picklist.Option" Option="true"><DisplayName t="text.FirstSucceeding"><Item value="%$TitleForTrue%" /><Item t="text.MultiLang" Pattern="%$_OriginalField/Title%"/></DisplayName></Option><Option t="picklist.Option" Option="false"><DisplayName t="text.FirstSucceeding"><Item value="%$TitleForFalse%" /><Item t="text.MultiLang" Pattern="not %$_OriginalField/Title%"/></DisplayName></Option></Options></FieldAspect><FieldAspect t="field_aspect.DescriptionForEmptyText"><Description t="text.MultiLang" Pattern="Filter By %$_OriginalField/Title%"/></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="field.RefreshFilteredItems" ><Var name="_Field" value="%$_OriginalField%"/></Action></FieldAspect><FieldAspect t="field.CleanFilterButton" Field="%$_OriginalField%"/></Field></NativeHelper></Component><Component id="DateFilter" type="field.FieldAspect" execution="native" category="filter" light="false"><NativeHelper name="Control" t="datefilter.DateFilterControl"><Var name="_OriginalField" value="%$_Field%"/></NativeHelper></Component><Component id="XmlInFilterAttribute" type="data.Data" execution="native"><Param name="FilterData" Default="%%"/><NativeHelper name="RegisterXml" t="xml.RegisterModifyOnXml" Xml="%$Xml%" Mode="auto save" DelayAutoSaveInMilli="0"><SaveAction t="action.WriteValue" To="%$FilterData%"><Value t="xml.XmlToText" /></SaveAction></NativeHelper></Component></xtml><xtml ns="picklist" jbart="true"><Type id="PopupStyle" /><Type id="ControlStyle" style="true" customPT="picklist.CustomStyle" /><Type id="OptionsDefinition" /><Type id="Option" /><Type id="OptionCategory" /><Type id="OptionsProvider" /><Type id="Pattern" /><Type id="Picklist" /><Component id="Picklist" type="field_aspect.FieldType,picklist.Picklist"><Param name="Options" type="picklist.OptionsProvider" script="true" essential="true"><Default t="picklist.OptionsInplace" /></Param><Param name="AllowEmptyValue" type="data.Boolean" boolfeature="true" Default="true"/><Param name="AllowValueNotInOptions" type="data.Boolean" boolfeature="true" /><Param name="Multiple" type="data.Boolean" boolfeature="true" /><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><Param name="RecalculateForEachCell" type="data.Boolean" boolfeature="true"/><Param name="ControlStyle" type="picklist.ControlStyle" advanced="true" script="true"><Default t="picklist.JBartPicklist" /></Param><Param name="PickTreePathSeparator" advanced="true" description="Used to distinguish between tree options that have the same name"/><Param name="PopupFeature" type="uiaspect.Aspect[]" script="true" light="false" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="field_aspect.Picklist" Multiple="%$Multiple%" AllowEmptyValue="%$AllowEmptyValue%" AllowValueNotInOptions="%$AllowValueNotInOptions%"        RecalculateForEachCell="%$RecalculateForEachCell%" PickTreePathSeparator="%$PickTreePathSeparator%"><Options t="xtml.UseParam" Param="Options" /><ControlStyle t="xtml.UseParam" Param="ControlStyle"/></FieldAspect></xtml></Component><Component id="OptionsInplace" type="picklist.OptionsProvider"><Param name="Options" type="picklist.OptionsDefinition" script="true" essential="true"><Field t="field.CustomControl"><Control t="picklist.EditPicklistOptions" Data="%!Options%" /></Field></Param><xtml t="xtml.UseParam" Param="Options" /></Component><Component id="PopupItems" type="data.Data" hidden="true" execution="native" /><Component id="PicklistPage" type="picklist.PopupStyle"><Param name="Page" type="ui.Page"/><Param name="PopupStyle" type="dialog_style.Style" advanced="true"><Default t="dialog_style.DefaultPicklist" /></Param><Param name="DoNotLookInAllFields" type="data.Boolean" advanced="true"/><Param name="LookIn" script="true" advanced="true"/><Param name="ShowCloseButton" type="data.Boolean" advanced="true"><Default value="true"/></Param><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.PopupImage" ID="options"><Condition t="yesno.IsEmpty" Value="%$_Field/PupupImageCss%"/></FieldAspect><FieldAspect t="field_aspect.Resizer"/><FieldAspect t="field_aspect.HoverCssClass"/><FieldAspect t="field.OptionsFilter"/><FieldAspect t="field_aspect.Popup" Style="%$PopupStyle%" OpenInPreview="true" PopupCssClass="suggestions popup_fld_%$_Field/Id%" Picklist="true" ShowCloseButton="%$ShowCloseButton%" ><PopupContents t="ui.ShowPage" Page="%$Page%"><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items"><Items t="data.Pipeline"><Item t="picklist.PopupItems"/><Item value="%source%"/></Items></DataItems><Aspect t="uiaspect.FastFind" HideExposedFilters="true" DoNotShowPartialStatus="true" DoNotLookInAllFields="%$DoNotLookInAllFields%" MaxItemsToShow="12"><LookIn t="xtml.UseParam" Param="LookIn" /></Aspect><Aspect t="uiaspect.ItemClickable"><ClickAction t="object.RunMethod" Object="%$_Input%" Method="UpdateFromPopupAndClose" /></Aspect><Aspect t="uiaspect.HighlightSelectionOnHover" /><Aspect t="uiaspect.ItemSelection" AutoSelectFirstItem="true" IncludeSubContainers="false"/></PageParams></PopupContents></FieldAspect></xtml></Component><Component id="CustomPopup" type="picklist.PopupStyle"><Param name="Contents" type="ui.Page"/><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultPopup" /></Param><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="DoNotLookInAllFields" type="data.Boolean"/><Param name="LookIn" script="true"/><Param name="KeyboardOpensPopup" type="data.Boolean" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.PopupImage" ID="options"><Condition t="yesno.IsEmpty" Value="%$_Field/PupupImageCss%"/></FieldAspect><FieldAspect t="field_aspect.HoverCssClass"/><FieldAspect t="field.OptionsFilter"/><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="KeyboardNotOpensPopup" ><Value t="yesno.Not" Of="%$KeyboardOpensPopup%" /></FieldAspect><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="OpenPopup"><Xtml t="dlg.OpenDialog" Title="" Style="%$Style%" LauncherElement="%$_Input%"><Contents t="ui.ShowPage" Page="%$Contents%"><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items"><Items t="data.Pipeline"><Item t="picklist.PopupItems" /><Item value="%source%"/></Items></DataItems><Aspect t="uiaspect.FastFind" HideExposedFilters="true"                    DoNotShowPartialStatus="true" DoNotLookInAllFields="%$DoNotLookInAllFields%"                    MaxItemsToShow="12"><LookIn t="xtml.UseParam" Param="LookIn" /></Aspect><Aspect t="uiaspect.ItemClickable"><ClickAction t="object.RunMethod" Object="%$_Input%" Method="UpdateFromPopupAndClose" /></Aspect><Aspect1 t="uiaspect.HighlightSelectionOnHover"/><Aspect t="picklist.SoftPickOnHover" /><Aspect t="uiaspect.ItemSelection" AutoSelectFirstItem="true" IncludeSubContainers="false"/></PageParams></Contents><Feature t="xtml.UseParamArray" Param="Feature"/></Xtml></FieldAspect></xtml></Component><Component id="JBartPicklist" type="picklist.ControlStyle" Triplett="false"><Param name="PopupStyle" type="picklist.PopupStyle"><Default t="picklist.SystemPopup" FilterTreshold="30"/></Param><xtml t="field_aspect.Aspects"><FieldAspect t="xtml.UseParam" Param="PopupStyle" /><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field_aspect.PopupImage" ID="options"><Condition t="yesno.IsEmpty" Value="%$_Field/PupupImageCss%"/></FieldAspect><FieldAspect t="field_aspect.Resizer" /><FieldAspect t="field_aspect.HoverCssClass" /></xtml></Component><Component id="SystemPopup" type="picklist.PopupStyle"><Param name="FilterTreshold" Default="30" /><Param name="Operation" type="operation.Operations[]" script="true" /><Param name="FooterOperation" type="operation.Operations[]" script="true" advanced="true"/><Param name="PopupStyle" type="dialog_style.Style" advanced="true"><Default t="dialog_style.DefaultPicklist" /></Param><Param name="DialogFeature" type="dlg.DialogFeature[]" script="true" advanced="true"/><Param name="PopupFeature" type="uiaspect.Aspect[]" script="true" advanced="true" /><Param name="Css" css="true" Default=".aa_no_items_found { opacity: .4; filter: alpha(opacity=40); display:inline-block; padding-top:8px;}" /><xtml t="field_aspect.Aspects"><FieldAspect t="field.OptionsFilter" /><FieldAspect t="field_aspect.Popup" Style="%$PopupStyle%" PopupCssClass="suggestions popup_fld_%$_Field/Id% popup_from_%$_Cntr/ID%" Picklist="true"><DialogFeature t="xtml.UseParamArray" Param="DialogFeature" /><PopupContents t="ui.ItemList"><Aspect t="xtml.UseParamArray" Param="PopupFeature" /><Class t="text.Concat" Separator=" "><Item value="aa_pick" /><item t="data.IfThenElse" If="%$OptionsObj/IsTree%" Then="aa_pick_tree" Else="aa_pick_flat"/><Item t="ui.AttachGlobalCss" Css="%$Css%" Name="system_pick_popup" /></Class><Items t="data_items.Items"><Items t="picklist.PopupItems" /><Aspect t="data_items.RecursiveNextLevel" Condition="%$OptionsObj/IsTree%"><NextLevel t="data_items.Items" Condition="%IsCategory%"><Items t="data.List"><Item value="%Categories%" /><Item value="%Options%" /></Items></NextLevel></Aspect></Items><Operations t="operation.Operations"><Operation t="picklist.Operations"/><Operation t="xtml.UseParamArray" Param="Operation" /></Operations><Aspect t="uiaspect.Toolbar"/><Aspect t="uiaspect.HeaderFooter" Identifier="footer_toolbar" Location="footer"><Control t="ui.List"><Var name="Menu" t="operation.Menu"><Operations t="operation.Operations"><Operation t="picklist.FooterOperations"/><Operation t="xtml.UseParamArray" Param="FooterOperation" /></Operations></Var><Control value="%$Menu/Ctrl%"/></Control></Aspect><Aspect t="picklist.CheckBox" Condition="%$_Field/Multiple%" /><Aspect t="uiaspect.ItemImage" Condition="%$OptionsObj/HasImages%"><ItemImage t="object.RunMethod" Object="%$OptionsObj%" Method="OptionImage" /></Aspect><Aspect t="picklist.ItemTextForPicklist"/><Aspect t="uiaspect.NextLevelsLight" Condition="%$OptionsObj/IsTree%" /><Aspect t="uiaspect.ExpandCollapse" Condition="%$OptionsObj/IsTree%" /><Aspect t="uiaspect.Indent" Condition="%$OptionsObj/IsTree%" /><Aspect t="data.IfThenElse"><If t="yesno.OR"><Item value="%$OptionsObj/IsTree%" /><Item value="%$_Field/Multiple%" /></If><Then t="uiaspect.FastFindInHtmlTree" FilterTreshold="%$FilterTreshold%" HideExposedFilters="true" DoNotFilterSmallLists="true" /><Else t="uiaspect.FastFind" HideExposedFilters="true" MaxItemsToShow="12"/></Aspect><Aspect t="uiaspect.ItemSelection" AutoSelectFirstItem="false"><OnSelect t="action.RunActions"><Condition t="yesno.Not" Of="%UnSelectable%" /><Action t="object.RunMethod" Object="%$_Input%" Method="UpdateFromPopupAndClose" Condition="%$_SelectionMethod% == \'mouse\'" /></OnSelect></Aspect><Aspect t="uiaspect.HighlightSelectionOnHover" /><Aspect t="uiaspect.HeaderFooter" Location="header" RefreshStrategy="container change" Phase="1"><Control t="ui.List"><Control t="ui.Text" Class="aa_no_items_found" MultiLang="true" Condition="%$FilteredItemsCount% == 0" Text="No Matching Items Found" /></Control></Aspect></PopupContents></FieldAspect></xtml></Component><Type id="OptionsPage" /><Component id="NativeCombo" type="picklist.ControlStyle"><xtml t="picklist.CustomStyle"><Html><![CDATA[<select><option  /></select>]]></Html><Css></Css><Javascript><![CDATA[function(picklist) {  var op = jQuery(picklist).find(\'option\')[0];  picklist.addOptions(op,function(option) {    option.setInnerHTML(\'\',option.Text);    if (option.isSelected())      picklist.value = option.Text;  });  picklist.onchange = function(e)  {    picklist.options[picklist.selectedIndex].select();  }}]]></Javascript><![CDATA[]]></xtml></Component><Component id="Radio" type="picklist.ControlStyle"><xtml t="picklist.CustomStyle"><Html><![CDATA[<div><div class="aa_option"><input type="radio"/><span class="label"/></div></div>]]></Html><Css><![CDATA[.aa_option { float:left; }.aa_option:not(:last-child) { padding: 0 16px 0 0px; }.aa_option.selected { }.aa_option:hover { }.label { padding: 2px 0 0 0; vertical-align:top; display: inline-block; }#this { }]]></Css><Javascript><![CDATA[function(picklist) {  function setSelectedOnClick(option,selectedClass) {      if ( option.isSelected() ) jQuery(option).addClass(selectedClass);      jQuery(option).find(\'input\').click(function() {         var wasSelected = option.isSelected();         option.toggleSelection();                           if (picklist.Multiple) {           jQuery(option).toggleClass(selectedClass);         } else {           jQuery(picklist.optionElems).removeClass(selectedClass);           if (!wasSelected)             jQuery(option).addClass(selectedClass);         }      });  }  window.aa_radio_counter = window.aa_radio_counter || 0;  window.aa_radio_counter++;    picklist.addOptions(\'.aa_option\',function(option) {    jQuery(option).find(\'.label\').text(option.Text);    jQuery(option).find(\'input\').attr(\'name\',window.aa_radio_counter);    if (option.isSelected()) jQuery(option).find(\'input\')[0].checked = true;    setSelectedOnClick(option,\'selected\');  });    if ( \'false\' == \'true\' ) {    var clearBtn = jQuery(picklist.createClearButton(\'selected\',\'None\')).addClass(\'aa_option\');    jQuery(picklist).prepend( clearBtn );  }}]]></Javascript></xtml></Component>  <Component id="OptionsAsButtons" type="picklist.ControlStyle"><Param name="TextForEmpty" Default="None"/><Param name="ButtonForEmpty" type="data.Boolean" Default="true"/><xtml t="picklist.CustomStyle"><Html><![CDATA[<div><div class="aa_option" /></div>]]></Html><Css><![CDATA[.aa_option { float: left; -webkit-border-radius: 0; border-radius: 0; display: inline-block; padding: 4px 10px 4px; font-size: 13px; line-height: 18px; text-align: center; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); background-image: -webkit-linear-gradient(#ffffff, #ffffff 25\\%, #e6e6e6);background-image: -moz-linear-gradient(top, #ffffff, #ffffff 25\\%, #e6e6e6);background-image: -ms-linear-gradient(#ffffff, #ffffff 25\\%, #e6e6e6);background-image: -o-linear-gradient(#ffffff, #ffffff 25\\%, #e6e6e6);background-image: linear-gradient(#ffffff, #ffffff 25\\%, #e6e6e6);background-repeat: no-repeat;border: 1px solid #CCC;border-bottom-color: #BBB;-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);cursor: pointer;}.aa_option.selected { color: #999; }.aa_option.selected , .aa_option:hover {text-decoration: none;background-color: #E6E6E6;background-position: 0 -15px;-webkit-transition: background-position 0.1s linear;-moz-transition: background-position 0.1s linear;-ms-transition: background-position 0.1s linear;-o-transition: background-position 0.1s linear;transition: background-position 0.1s linear;}.aa_option:active {  background-image: none;  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);  background-color: #e6e6e6;  background-color: #d9d9d9 \\9;  color: rgba(0, 0, 0, 0.5);  outline: 0;}.aa_option:first-child { border-top-left-radius: 4px;border-bottom-left-radius: 4px;}.aa_option:last-child { border-top-right-radius: 4px;border-bottom-right-radius: 4px;}           ]]></Css><Javascript><![CDATA[function(picklist) {  picklist.addOptions(\'.aa_option\',function(option) {    option.setInnerHTML(\'\',option.Text);    option.setSelectedOnClick(\'selected\');  });    if ( \'%$ButtonForEmpty%\' == \'true\' ) {    var clearBtn = jQuery(picklist.createClearButton(\'selected\',\'%$TextForEmpty%\')).addClass(\'aa_option\');    jQuery(picklist).prepend( clearBtn );  }}]]></Javascript></xtml></Component><Component id="CustomStyle" type="picklist.ControlStyle" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><BooleanProperty name="Triplet" value="true" /><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component><Component id="FooterOperations" type="operation.Operations" light="false"><xtml t="operation.Operations"><Var name="Multi" t="yesno.And"><Item value="%$_Field/Multiple%"/><Item t="yesno.Not" Of="%$_Field/PicklistMultipleButtons/Hide%"/></Var><Operation t="operation.Operation" ID="Clear" Target="items" CssClass="aa_clear"><Condition t="yesno.And"><Item t="yesno.NotEmpty" Data="%$_FieldData%"/><Item value="!%$Multi%"/><Item value="%$_Field/AllowEmptyValue% == \'true\'"/></Condition><Title t="text.FirstSucceeding"><Item value="%$_Field/ClearText%"/><Item value="all" Condition="%$_Field/IsFilter%"/><Item value="clear"/></Title><Action t="action.RunActions"><Action t="object.RunMethod" Object="%$_Input%" Method="Clear" /><Action t="dialog.ClosePopup" /></Action></Operation><Operation t="object.RunMethod" Object="%$_Field/OptionsObject%" Method="Operations" /></xtml></Component><Component id="Operations" type="operation.Operations" light="false"><xtml t="operation.Operations"><Var name="Multi" t="yesno.And"><Item value="%$_Field/Multiple%"/><Item t="yesno.Not" Of="%$_Field/PicklistMultipleButtons/Hide%"/></Var><Operation t="operation.Operation" ID="SelectAll" Target="items" CssClass="select_all" Condition="%$Multi%"><Title t="text.FirstSucceeding"><Item value="%$_Field/PicklistMultipleButtons/SelectAllText%"/><Item value="Select All"/></Title><Action t="object.RunMethod" Object="%$_Cntr%" Method="SelectAll" /></Operation><Operation t="operation.Operation" ID="ClearAll" Target="items" CssClass="clear_all" Condition="%$Multi%"><Title t="text.FirstSucceeding"><Item value="%$_Field/PicklistMultipleButtons/ClearAllText%"/><Item value="Clear All"/></Title><Action t="object.RunMethod" Object="%$_Cntr%" Method="ClearAll"/></Operation><Operation t="operation.Operation" ID="Close" Target="items" CssClass="close" Title="Close" Condition="%$Multi%"><Action t="dialog.ClosePopup"/></Operation></xtml></Component><Component id="SimpleOptions" type="picklist.OptionsDefinition" execution="native"><Param name="Options" Description="comma separated" essential="true" /><Param name="DefaultImage" /></Component><Component id="RichOptions" type="picklist.OptionsDefinition" execution="native"><Param name="Option" type="picklist.Option[]" essential="true" /></Component><Component id="OptionsTree" type="picklist.OptionsDefinition" execution="native"><Param name="Category" type="picklist.OptionCategory[]" essential="true" /></Component><Component id="OptionCategory" type="picklist.OptionCategory" execution="native"><Param name="Code" essential="true" /><Param name="Name" essential="true" /><Param name="Image" /><Param name="Selectable" type="data.Boolean" /><Param name="Category" type="picklist.OptionCategory[]" /><Param name="Option" type="picklist.Option[]" /><NativeHelper t="picklist.RichOptions" /></Component><Component id="DynamicTree" type="picklist.OptionsDefinition,picklist.OptionsProvider" execution="native"><Param name="FirstLevel" /><Param name="NextLevel" script="true" /><Param name="Recursive" type="data.Boolean"/><Param name="MiddleNodeSelectable" type="data.Boolean" /><Param name="OptionLabel" script="true" Default="%%"/><Param name="OptionCode" script="true" Default="%%"/><Param name="OptionImage" script="true" /></Component><Component id="DynamicTreeByCategories" type="picklist.OptionsDefinition,picklist.OptionsProvider" execution="native"><Param name="Categories" essential="true" /><Param name="CategoryCode" script="true"><Default value="%%" /></Param><Param name="CategoryName" script="true"><Default value="%%" /></Param><Param name="CategoryImage" script="true" /><Param name="CategorySelectable" type="data.Boolean" script="true" /><Param name="SubTree" type="picklist.OptionsDefinition" script="true" /><Param name="Options" /><Param name="OptionName" script="true" /><Param name="OptionImage" script="true" /></Component><Component id="Option" type="picklist.Option" execution="native"><Param name="Option" essential="true" /><Param name="DisplayName" /><Param name="Image" /><Param name="OptionPage" type="ui.SinglePage" /></Component><Component id="OptionsWithOperations" type="picklist.OptionsDefinition" light="false" execution="native"><Param name="Options" type="picklist.OptionsDefinition" script="true" /><Param name="Operation" type="operation.Operations[]" script="true" /></Component><Component id="DynamicOptions" type="picklist.OptionsDefinition,picklist.OptionsProvider" execution="native"><Param name="Options" essential="true" /><Param name="OptionLabel" script="true" /><Param name="OptionCode" script="true" advanced="true" description="Option label as default"/><Param name="OptionImage" script="true" advanced="true" /><Param name="OptionPage" type="ui.Page" script="true" advanced="true" /><Param name="OptionCodeByIndex" type="data.Boolean" advanced="true" /></Component><Component id="SuggestionsFromData" type="picklist.OptionsDefinition" category="filters,picklist" execution="native" promoted="true" ><Param name="SupportMultiple" type="data.Boolean" advanced="true" /><Param name="TextPattern" script="true" advanced="true" Description="e.g \'\\%\\% children\'" /><Param name="Static" type="data.Boolean" advanced="true" /><Param name="IncludeSpace" type="data.Boolean" advanced="true" /></Component><Component id="ShowOccurrences" type="field.FieldAspect" category="filters" execution="native"><Param name="Show" type="enum" Options="filtered occurrences,original occurrences,filtered and original,do not show occurrences"><Default value="filtered and original"/></Param><Param name="SortBy" type="enum" Options="filtered occurrences,original occurrences,ascending,descending,none"><Default value="filtered occurrences"/></Param></Component><Component id="CalcOccurrencesWithFilters" type="field.FieldAspect" category="filters" execution="native" light="false" /><!-- design time --><Component id="EditSimpleOptions" type="ui.Control"><xtml t="ui.Document"><Fields t="field.XmlField" Path="@Options" Title="Options"><FieldAspect t="field_aspect.DefaultValue"><Value t="data.Pipeline" Remark="ugly temp code"><Var name="XPath" value="%$FieldXtml/@Path%" /><Item value="%$PageSampleItems%" /><Item t="xml.XPath" XPath="%$XPath%" /><Item t="text.SplitByCommas" /><Item t="text.Trim" /><Aggregator t="data.MakeUnique" /><Aggregator t="text.Concat" Separator="," /></Value></FieldAspect><FieldAspect t="field_aspect.Description" Description="comma separated e.g. created,handled,finished" /></Fields></xtml><xtml1 t="ui.ItemList"><Items t="data_items.CommaSeparated" ItemTypeName="option" Data="%!@Options%" /><Fields t="field.Field1" Title="Option" FieldData="%%"><FieldAspect t="field_aspect.SimpleInput" /></Fields><Operations t="operation.StdOperations" /><Aspect t="uiaspect.DefaultFeatures" /><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.CellPresentation" Content="expandable text" /><Aspect t="uiaspect.ItemDetails"><OpenNewIn t="uiaspect.ExpandAllText" /></Aspect></xtml1></Component><Component id="EditRichOptions" type="ui.Control"><xtml t="ui.ItemList"><Items t="xml.XmlItems" Tag="Option"><DoOnNewItem t="xml.SetAttribute" AttributeName="t" Value="picklist.Option" /></Items><Fields t="field.Fields"><Field t="field.XmlField" Path="@Option" /><Field t="field.XmlField" Path="@DisplayName" /><Field t="field.XmlField" Path="@Image"><Type t="field_aspect.Image" /></Field></Fields><Operations t="operation.StdOperations" /><Aspect t="uiaspect.DefaultFeatures" /><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.CellPresentation" Content="expandable text" /></xtml></Component><Component id="EditOptionsTree" type="ui.Control" dt_leak="true"><xtml t="ui.ItemList"><Var name="OptionsXtml" /><Items t="xml.XmlItems" Tag="Category" /><Presentation t="uiaspect.Tree" ItemText="%@Name%%@Option%" DragAndDrop="true" ><NextLevel t="xml.XmlItems" Tag="Category,Option" CanPasteItem="%$_Items/ParentXml/@t% != \'picklist.Option\'" /><ItemImage t="data.IfThenElse" If="%@t%==\'picklist.OptionCategory\'" Then="%$_Images%/folder1616.jpg" Else="%$_Images%/resource.png" /></Presentation><Aspect t="uiaspect.DefaultFeatures" ItemSelection="false" /><Aspect t="uiaspect.HorizontalMasterDetails" /><Operations t="operation.Operations"><Operation t="operation.Operation" ID="New Category" Title="New Category" Target="item" Icon="%$_Images%/folder-open.png"><Action1 t="operation.CustomNewItemDialog" DialogTitle="New Category" AddUnderCurrentItem="true"><Var name="_NewItemTag" value="Category" /><ItemPage t="ui.ItemPage" FieldsFromList="*" /><ChangeItemBeforeDialog t="action.RunActions" customxtml="true"><Action t="action.WriteValue" To="%!@t%" Value="picklist.OptionCategory" /></ChangeItemBeforeDialog></Action1></Operation><Operation t="operation.Operation" ID="New option" Title="New Option" Target="item" Icon="%$_Images%/resource.png"><Disabled value="%@t% != \'picklist.OptionCategory\'" /><Action1 t="operation.CustomNewItemDialog" DialogTitle="New Option" AddUnderCurrentItem="true"><Var name="_NewItemTag" value="Option" /><ItemPage t="ui.ItemPage" FieldsFromList="*" /><ChangeItemBeforeDialog t="action.RunActions" customxtml="true"><Action t="action.WriteValue" To="%!@t%" Value="picklist.Option" /><Action t="action.WriteValue" To="%!OptionPage/@t%" Value="ui.ItemPage" /></ChangeItemBeforeDialog></Action1></Operation><Operation t="operation.Operation" ID="DeleteItem" Target="item" Title="Delete" Icon="%$_Images%/delete1616.gif" Shortcut="Delete"><Action t="operation.Delete" /></Operation></Operations><Fields t="field.Fields"><Field t="field.XmlField" Path="@Name" ID="name" Title="Category Name"><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%@t% == \'picklist.OptionCategory\'" /></Field><Field t="field.XmlField" Path="@Option" ID="name" Title="Option"><Type t="field_aspect.Text" /><FieldAspect t="field_aspect.CellPresentation" Content="control" /><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%@t% == \'picklist.Option\'" /></Field><Field t="field.XmlMultipleGroup" ID="" Title="Fields" Path="OptionPage/Field" TitleForSingle="field"><Presentation t="uiaspect.RichTable" /><Aspect t="uiaspect.DefaultFeatures" /><FieldAspect t="field_aspect.Section" Underline="true" ExpandCollapse="" ExpandedByDefault="true" HideTitle="true" /><Operations t="operation.Operations"><Operation t="operation.Operation" ID="NewItem" Title="New field" Target="new" Icon="%$_Images%/add1616.png" Shortcut="Alt+N"><Action t="operation.New"><DoAfter t="action.RunActions" customxtml="true"><Action t="action.WriteValue" To="%!@t%" Value="field.XmlField" /><Action t="action.WriteValue" To="%!@Path%" Value="@%@Title%" /></DoAfter></Action></Operation><Operation t="operation.Operation" ID="DeleteItem" Target="item" Title="Delete field" Icon="%$_Images%/delete1616.gif" Shortcut="Delete"><Action t="operation.Delete" AskForConfirmation="true" /></Operation></Operations><Field t="field.XmlField" Path="@Title" ID="name" Title="Name"><Type t="field_aspect.Text" Mandatory="true" Multiple="false" /></Field><Field t="field.XmlField" Path="Type/@t" ID="type" Title="Type"><Type t="field_aspect.Picklist" AllowEmptyValue="false" AllowValueNotInOptions="false" Multiple="false" Mandatory="true"><Options t="picklist.SimpleOptions" Options="field_aspect.Text,field_aspect.RichText,field_aspect.Number" /></Type></Field><FieldAspect t="field_aspect.CellPresentation" Content="control" /><Aspect t="uiaspect.CellPresentation" Content="control" /><FieldAspect t="field_aspect.HideByCondition" ShowCondition="%@t% == \'picklist.Option\'" /></Field></Fields></xtml></Component><Component id="EditPicklistOptions" type="ui.Control"><xtml t="ui.ControlWithAction"><RunBeforeControl t="action.RunActions"><Action t="action.WriteValue" To="%!@t%" Value="picklist.SimpleOptions"><Condition t="yesno.IsEmpty" Value="%@t%" /></Action><Action t="action.RunActions" Condition="%@t%==\'data_items.CommaSeparated\'"><Action t="action.WriteValue" To="%@t%" Value="picklist.SimpleOptions" /><Action t="action.WriteValue" To="%!@Options%" Value="%@Data%" /><Action t="xml.Delete" Data="%@Data%" /></Action></RunBeforeControl><Control t="ui.Section" Class="edit_picklist"><Control t="ui.List"><Var name="Xtml" /><Control t="ui.Button" Text="to advanced options" Condition="%@t%==\'picklist.SimpleOptions\'"><OnClick t="action.RunActions" ><Action t="action.WriteValue" To="%@t%" Value="picklist.RichOptions" /><Action t="xml.AddChildren"><Children t="data.Pipeline"><Item t="text.Split" Text="%$Xtml/@Options%" /><Item t="xml.Xml" DynamicContent="true"><Option t="picklist.Option" Option="%%" /></Item></Children></Action><Action t="xml.Delete" Data="%@Options%" /><Action t="uiaction.Refresh" RunOn="up(.edit_picklist)" /></OnClick><Style t="ui.ButtonAsHyperlink" /></Control><Control t="ui.Button" Text="to simple options" Condition="%@t%==\'picklist.RichOptions\'"><OnClick t="dialog.AskForConfirmation" Title="Business Art" Question="Are you sure ? all images, dislay name and extra data will be lost"><RunOnOK t="action.RunActions" Data="%$Xtml%"><Action t="action.WriteValue" To="%@t%" Value="picklist.SimpleOptions" /><Action t="action.WriteValue" To="%!@Options%"><Value t="text.Concat" Separator="," Items="%Option/@Option%" /></Action><Action t="xml.DeleteChildren" /><Action t="uiaction.Refresh" RunOn="up(.edit_picklist)" /></RunOnOK></OnClick><Style t="ui.ButtonAsHyperlink" /></Control><Control t="ui.Button" Text="to options tree" Condition="%@t%==\'picklist.RichOptions\'"><OnClick t="action.RunActions"><Var name="FirstOptions" t="data.Duplicate" /><Action t="xml.ReplaceElement"><NewElement t="xml.WithChanges"><Xml t="xml.Xml"><Options t="picklist.OptionsTree" name="%@name%"><Category t="picklist.OptionCategory" Name="category1" /></Options></Xml><Change t="xml.AddChildren" Data="%Category%" Children="%$FirstOptions/Option%" /></NewElement></Action><Action t="uiaction.Refresh" RunOn="up(.edit_picklist)" /></OnClick><Style t="ui.ButtonAsHyperlink" /></Control><Control t="ui.Button" Text="reduce to table" Condition="%@t%==\'picklist.OptionsTree\'"><OnClick t="dialog.AskForConfirmation" Title="Business Art" Question="Are you sure ? all categories will be lost"><RunOnOK t="action.RunActions"><Var name="OptionsXtml" t="data.Pipeline"><Item value="%.//Option%" /><Item t="data.Duplicate" /></Var><Action t="action.WriteValue" To="%@t%" Value="picklist.RichOptions" /><Action t="xml.DeleteChildren" /><Action t="xml.AddChildren" Children="%$OptionsXtml%" /><Action t="uiaction.Refresh" RunOn="up(.edit_picklist)" /></RunOnOK></OnClick><Style t="ui.ButtonAsHyperlink" /></Control><Layout t="ui.ButtonsLayout" /></Control><Control t="ui.Switch" Value="%@t%"><Case If="picklist.SimpleOptions"><Then t="picklist.EditSimpleOptions" /></Case><Case If="picklist.RichOptions"><Then t="picklist.EditRichOptions" /></Case><Case If="picklist.OptionsTree"><Then t="picklist.EditOptionsTree" /></Case></Control></Control></xtml></Component><Component id="CheckBox" type="uiaspect.Aspect" execution="native" category="selection" jbart="false" /><Component id="SoftPickOnHover" type="uiaspect.Aspect" execution="native" category="picklist"><Param name="TimeBeteenPicks" Default="500" /><NativeHelper name="RequiresAspects" t="uiaspect.HighlightSelectionOnHover"/></Component><Component id="OptionTextAndImage" type="uiaspect.Aspect" execution="native" category="selection" jbart="false"/><Component id="OpenPopup" type="action.Action"><Param name="FieldID" essential="true" /><xtml t="uiaction.FireEvent" Event="mousedown" RunOn=".fld_%$FieldID%" /></Component><Component id="SetPicklistValue" type="action.Action" description="Called from popup to set the picklist input value"><Param name="Value" essential="true"/><Param name="ForPreviewOnly" type="data.Boolean" description="Value will be restored on cancel. Used for hovering preview"/><Param name="ClosePopup" type="data.Boolean"/><xtml t="action.RunActions"><Var name="ForPreviewOnly" value="%$ForPreviewOnly%"/><Action t="object.RunMethod" Method="SetPicklistValue" Object="%$_PicklistInput%" Input="%$Value%"/><Action t="dlg.CloseDialog" CloseType="OK" Condition="%$ClosePopup%"/></xtml></Component><Component id="RecalcPicklistOptions" type="action.Action"><Param name="PicklistInput" Default="%$_PicklistInput%" advanced="true"/><xtml t="object.RunMethod" Method="RecalcOptions" Object="%$PicklistInput%" /></Component><Component id="OpenPicklistPopup" type="action.Action"><Param name="FieldID" essential="true" /><xtml t="uiaction.FireEvent" Event="mousedown" RunOn=".fld_%$FieldID%" /></Component><Component id="ItemTextForPicklist" type="uiaspect.Aspect" category="options" hidden="true" execution="native"><Param name="ItemCss" Default="#this { cursor:default;} " css="true" /><Param name="OccurrencesCss" Default="#this { font-size: 11px; color:#575757; }" css="true" /></Component><Component id="Pick" type="action.Action,uiaction.UsageAction"><Param name="FieldID" essential="true" /><Param name="OptionIndex"><Default value="1" /></Param><xtml t="action.RunActions"><Action t="uiaction.FireEvent" Event="mousedown" RunOn=".fld_%$FieldID%" /><Action t="uiaction.FireEvent" Event="mousedown"><RunOn t="data.Pipeline"><Item t="uiaction.ElementByClass" Cls="aa_item"><StartFrom t="dialog.ContentsOfOpenPopup" /></Item><Aggregator t="data.Subset" From="%$OptionIndex%" Count="1" /></RunOn></Action><Action1 t="action.RunOnNextTimer"><Action t="dialog.ClosePopup" /></Action1></xtml></Component><Component id="OptionsOfFilteredField" type="picklist.OptionsProvider" execution="native" description="The picklist options of the field to filter" /><Component id="DataOfFilteredField" type="picklist.OptionsProvider" execution="native" description="Options from grouping the real data" /></xtml><xtml jbart="true" ns="action"><Type id="Action" icon="%$_Images%/studio/run.gif" ><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/run.gif" /><MoreComponents><component id="action.RunActions" itemsParam="Action" /><component id="action.IfThenElse" itemsParam="Then" /><component id="action.Switch" itemsParam="Default" /></MoreComponents></Type><Component id="RunActions" type="action.Action" execution="native"><Param name="Action" type="action.Action[]" essential="true" /></Component><Component id="RunActionOnItems" type="action.Action" synonyms="RunOnMultipleData" execution="native"><Param name="Items" essential="true" /><Param name="Action" type="action.Action" script="true" essential="true" /><Param name="IndicateLastItem" type="data.Boolean" description="available in _IsLastItem variable"/><Param name="IndicateItemIndex" type="data.Boolean" description="available in _ItemIndex variable"/><xtml t="data.Pipeline"><Item value="%$Items%" /><Item t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="WriteValue" type="action.Action" execution="native"><Param name="To" essential="true"><Default value="%%" /></Param><Param name="Value" essential="true" /></Component><Component id="WriteValueWithoutAutoSave" type="action.Action" execution="native"><Param name="To" essential="true" /><Param name="Value" essential="true" /></Component></xtml><xtml ns="animation"><Type id="Animation" /><Type id="HideAnimation" /><Component id="CssBasedAnimation" type="animation.Animation" execution="native"><Param name="Css" codemirror="true" description="can use \\%$ScreenWidth\\% and \\%$ScreenHeight\\%"      Default="#this.beforeAnimation {}; &#xA; #this.afterAnimation {};"       /></Component><Component id="ComingFromRight" type="animation.Animation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedAnimation"><Css><![CDATA[#this.beforeAnimation{ -webkit-transform:translate3d(%$ScreenWidth%,0,0); }#this.afterAnimation{ -webkit-transform:translate3d(0,0,0); -webkit-transition:-webkit-transform %$TransitionType%; }]]></Css></xtml></Component><Component id="ComingFromLeft" type="animation.Animation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedAnimation"><Css><![CDATA[#this.beforeAnimation{ -webkit-transform:translate3d(-%$ScreenWidth%,0,0); }#this.afterAnimation{ -webkit-transform:translate3d(0,0,0); -webkit-transition:-webkit-transform %$TransitionType%; }]]></Css></xtml></Component><Component id="ComingFromTop" type="animation.Animation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedAnimation"><Css><![CDATA[#this.beforeAnimation{ -webkit-transform:translate3d(0,-%$ScreenHeight%,0); }#this.afterAnimation{ -webkit-transform:translate3d(0,0,0); -webkit-transition:-webkit-transform %$TransitionType%; }]]></Css></xtml></Component><Component id="ComingFromBottom" type="animation.Animation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedAnimation"><Css><![CDATA[#this.beforeAnimation{ -webkit-transform:translate3d(0,%$ScreenHeight%,0); }#this.afterAnimation{ -webkit-transform:translate3d(0,0,0); -webkit-transition:-webkit-transform %$TransitionType%; }]]></Css></xtml></Component><Component id="JQueryShow" type="animation.Animation" execution="native"><Param name="Duration" Default="0" Description="in miliseconds"/></Component><Component id="Hide" type="operation.OperationAction" execution="native"><Param name="FieldId" /><Param name="AnimationType" type="animation.HideAnimation" ><Default t="animation.JQueryHide" /></Param><Param name="OnDone" type="operation.OperationAction" script="true" /></Component><Component id="CssBasedHideAnimation" type="animation.HideAnimation" execution="native"><Param name="Css" codemirror="true" description="can use \\%$ScreenWidth\\% and \\%$ScreenHeight\\%"/></Component><Component id="GoingRight" type="animation.HideAnimation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedHideAnimation" Css="-webkit-transform:translate3d(%$ScreenWidth%,0,0); -webkit-transition:-webkit-transform %$TransitionType%;" /></Component><Component id="GoingLeft" type="animation.HideAnimation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedHideAnimation" Css="-webkit-transform:translate3d(-%$ScreenWidth%,0,0); -webkit-transition:-webkit-transform %$TransitionType%;" /></Component><Component id="GoingDown" type="animation.HideAnimation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedHideAnimation" Css="-webkit-transform:translate3d(0,%$ScreenHeight%,0); -webkit-transition:-webkit-transform %$TransitionType%;" /></Component><Component id="GoingUp" type="animation.HideAnimation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedHideAnimation" Css="-webkit-transform:translate3d(0,-%$ScreenHeight%,0); -webkit-transition:-webkit-transform %$TransitionType%;" /></Component><Component id="FadingOut" type="animation.HideAnimation"><Param name="TransitionType" Default="500ms linear"/><xtml t="animation.CssBasedHideAnimation" Css="opacity:0; -webkit-transition:opacity %$TransitionType%;" /></Component><Component id="JQueryHide" type="animation.HideAnimation" execution="native"><Param name="Duration" Default="0" Description="in miliseconds"/></Component></xtml><xtml ns="bart_url"><Type id="UrlProvider" /><Component id="BrowserUrl" type="bart_url.UrlProvider"><Param name="OnUpdate" type="action.Action" script="true" /><xtml t="xtml.Params"><ScriptParam name="GetValue" paramVars="Attribute" t="ui.UrlFragment" Attribute="%$Attribute%" /><ScriptParam name="Clean" t="uiaction.SetUrlFragment" Fragment="" /><ScriptParam name="Update" paramVars="ValuePairs" t="action.RunActions" ><Action t="uiaction.SetUrlFragment"><Fragment t="bart_url.NewUrlFragment" Proposed="%$ValuePairs%" ><Current t="ui.UrlFragment"/></Fragment></Action><Action t="xtml.UseParam" Param="OnUpdate" /></ScriptParam></xtml></Component><Component id="InMemoryUrl" type="bart_url.UrlProvider"><Param name="DefaultUrl" /><xtml t="xtml.Params"><Param name="All" value="%$DefaultUrl%" /><Method name="GetValue" paramVars="Attribute" t="ui.UrlFragmentAttribute" Url="%$_This/All%" Attribute="%$Attribute%" /><Method name="Update" paramVars="ValuePairs" t="object.SetProperty" Object="%$_This%" Property="All"><Value t="bart_url.NewUrlFragment" Current="%$_This/All%" Proposed="%$ValuePairs%"/></Method></xtml></Component><Component id="UrlAttribute" type="data.Data"><Param name="Attribute" essential="true"/><xtml t="object.RunMethod" Object="%$_BartContext/Url%" Method="GetValue"><Var name="Attribute" value="%$Attribute%"/></xtml></Component><Component id="UrlAttributeEquals" type="data.Boolean"><Param name="Attribute"/><Param name="To" /><xtml t="yesno.ItemsEqual" Item1="%$To%"><Item2 t="bart_url.UrlAttribute" Attribute="%$Attribute%" /></xtml></Component><Component id="ChangeUrl" type="action.Action"><Param name="Url" essential="true"/><Param name="CleanUrlBefore" type="data.Boolean"/><xtml t="action.RunActions"><Action t="object.RunMethod" Object="%$_BartContext/Url%" Method="Clean" Condition="%$CleanUrlBefore%"/><Action t="object.RunMethod" Object="%$_BartContext/Url%" Method="Update"><Var name="ValuePairs" t="text.RemovePrefix" Data="%$Url%" Separator="#"/></Action></xtml></Component><Component id="UpdateUrl" type="action.Action"><Param name="ValuePairs" essential="true"/><xtml t="object.RunMethod" Object="%$_BartContext/Url%" Method="Update"><Var name="ValuePairs" value="%$ValuePairs%"/></xtml></Component><Component id="NewUrlFragment" type="data.Data" execution="native"><Param name="Current"/><Param name="Proposed"/></Component></xtml><xtml package="true"><xtml ns="style_guide"><Component id="Bootstrap" type="jbart.StyleGuide"><xtml t="style_guide.Custom" ID="bootstrap"><PrimaryButton t="button.Bootstrap"><Type t="bootstrap_btn.Primary" /></PrimaryButton><SecondaryButton t="button.Bootstrap"><Type t="bootstrap_btn.Default" /></SecondaryButton><Hyperlink t="button.JBartHyperlink" /><DialogStyle t="bootstrap.BootstrapDialog" /></xtml></Component></xtml><xtml ns="bootstrap_btn"><Type id="ButtonSize" /><Type id="ButtonType" /><Component id="Mini" type="bootstrap_btn.ButtonSize"><xtml><![CDATA[padding: 2px 6px;font-size: 11px;line-height: 14px;min-width:50px;    ]]></xtml></Component><Component id="Small" type="bootstrap_btn.ButtonSize"><xtml><![CDATA[padding: 5px 9px;font-size: 11px;line-height: 16px;min-width:70px;    ]]></xtml></Component><Component id="Large" type="bootstrap_btn.ButtonSize"><xtml><![CDATA[padding: 9px 14px;font-size: 15px;line-height: normal;border-radius: 5px;min-width:70px;    ]]></xtml></Component><Component id="ButtonType" type="bootstrap_btn.ButtonType" light="false"><Param name="Normal" /><Param name="Hover" /><Param name="Active" /><xtml t="object.Object" Normal="%$Normal%" Hover="%$Hover%" Active="%$Active%"/></Component><Component id="Default" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[color: #333;background-color: whiteSmoke;background-image: -ms-linear-gradient(top, white, #E6E6E6);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(white), to(#E6E6E6));background-image: -webkit-linear-gradient(top, white, #E6E6E6);background-image: -o-linear-gradient(top, white, #E6E6E6);background-image: linear-gradient(top, white, #E6E6E6);background-image: -moz-linear-gradient(top, white, #E6E6E6);background-repeat: repeat-x;border-color: #CCC;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);    ]]></Normal><Hover><![CDATA[text-decoration: none;background-color: #E6E6E6;background-position: 0 -15px;    ]]></Hover><Active><![CDATA[]]></Active></xtml></Component><Component id="Primary" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[background-color: #006DCC;background-image: -moz-linear-gradient(top, #08C, #04C);background-image: -ms-linear-gradient(top, #08C, #04C);background-image: -webkit-gradient(linear, 0 0, 0 100\\%, from(#08C), to(#04C));background-image: -webkit-linear-gradient(top, #08C, #04C);background-image: -o-linear-gradient(top, #08C, #04C);background-image: linear-gradient(top, #08C, #04C);background-repeat: repeat-x;filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#0088cc\', endColorstr=\'#0044cc\', GradientType=0);border-color: #04C #04C #002A80;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);    ]]></Normal><Hover><![CDATA[  background-color: #0044cc; background-position: 0 -15px;    ]]></Hover><Active><![CDATA[background-color: #05C;    ]]></Active></xtml></Component><Component id="Info" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[background-color: #49AFCD;background-image: -ms-linear-gradient(top, #5BC0DE, #2F96B4);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#5BC0DE), to(#2F96B4));background-image: -webkit-linear-gradient(top, #5BC0DE, #2F96B4);background-image: -o-linear-gradient(top, #5BC0DE, #2F96B4);background-image: -moz-linear-gradient(top, #5BC0DE, #2F96B4);background-image: linear-gradient(top, #5BC0DE, #2F96B4);background-repeat: repeat-x;border-color: #2F96B4 #2F96B4 #1F6377;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter: progid:dximagetransform.microsoft.gradient(startColorstr=\'#5bc0de\', endColorstr=\'#2f96b4\', GradientType=0);filter: progid:dximagetransform.microsoft.gradient(enabled=false);    ]]></Normal><Hover><![CDATA[background-color: #2F96B4;    ]]></Hover><Active><![CDATA[background-color: #2F96B4;    ]]></Active></xtml></Component><Component id="Success" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[background-color: #5BB75B;background-image: -ms-linear-gradient(top, #62C462, #51A351);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#62C462), to(#51A351));background-image: -webkit-linear-gradient(top, #62C462, #51A351);background-image: -o-linear-gradient(top, #62C462, #51A351);background-image: -moz-linear-gradient(top, #62C462, #51A351);background-image: linear-gradient(top, #62C462, #51A351);background-repeat: repeat-x;border-color: #51A351 #51A351 #387038;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter: progid:dximagetransform.microsoft.gradient(startColorstr=\'#62c462\', endColorstr=\'#51a351\', GradientType=0);filter: progid:dximagetransform.microsoft.gradient(enabled=false);    ]]></Normal><Hover><![CDATA[background-color: #51A351;    ]]></Hover><Active><![CDATA[background-color: #51A351;    ]]></Active></xtml></Component><Component id="Warning" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[background-color: #FAA732;background-image: -ms-linear-gradient(top, #FBB450, #F89406);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#FBB450), to(#F89406));background-image: -webkit-linear-gradient(top, #FBB450, #F89406);background-image: -o-linear-gradient(top, #FBB450, #F89406);background-image: -moz-linear-gradient(top, #FBB450, #F89406);background-image: linear-gradient(top, #FBB450, #F89406);background-repeat: repeat-x;border-color: #F89406 #F89406 #AD6704;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter: progid:dximagetransform.microsoft.gradient(startColorstr=\'#fbb450\', endColorstr=\'#f89406\', GradientType=0);filter: progid:dximagetransform.microsoft.gradient(enabled=false);    ]]></Normal><Hover><![CDATA[background-color: #F89406;    ]]></Hover><Active><![CDATA[background-color: #F89406;    ]]></Active></xtml></Component><Component id="Danger" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[background-color: #DA4F49;background-image: -ms-linear-gradient(top, #EE5F5B, #BD362F);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#EE5F5B), to(#BD362F));background-image: -webkit-linear-gradient(top, #EE5F5B, #BD362F);background-image: -o-linear-gradient(top, #EE5F5B, #BD362F);background-image: -moz-linear-gradient(top, #EE5F5B, #BD362F);background-image: linear-gradient(top, #EE5F5B, #BD362F);background-repeat: repeat-x;border-color: #BD362F #BD362F #802420;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter: progid:dximagetransform.microsoft.gradient(startColorstr=\'#ee5f5b\', endColorstr=\'#bd362f\', GradientType=0);filter: progid:dximagetransform.microsoft.gradient(enabled=false);    ]]></Normal><Hover><![CDATA[background-color: #BD362F;    ]]></Hover><Active><![CDATA[background-color: #BD362F;    ]]></Active></xtml></Component><Component id="Inverse" type="bootstrap_btn.ButtonType"><xtml t="bootstrap_btn.ButtonType"><Normal><![CDATA[  background-color: #414141;  *background-color: #222222;  background-image: -ms-linear-gradient(top, #555555, #222222);  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#555555), to(#222222));  background-image: -webkit-linear-gradient(top, #555555, #222222);  background-image: -o-linear-gradient(top, #555555, #222222);  background-image: -moz-linear-gradient(top, #555555, #222222);  background-image: linear-gradient(top, #555555, #222222);  background-repeat: repeat-x;  border-color: #222222 #222222 #000000;  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);  filter: progid:dximagetransform.microsoft.gradient(startColorstr=\'#555555\', endColorstr=\'#222222\', GradientType=0);  filter: progid:dximagetransform.microsoft.gradient(enabled=false);]]></Normal><Hover><![CDATA[background-color: #222;    ]]></Hover><Active><![CDATA[background-color: #222;    ]]></Active></xtml></Component></xtml><xtml ns="button"><Component id="Bootstrap" type="button.Style" styleGuide="bootstrap"><Param name="Size" type="bootstrap_btn.ButtonSize" refreshOnHover="true"><Default t="bootstrap_btn.Small" /></Param><Param name="Type" type="bootstrap_btn.ButtonType" refreshOnHover="true"><Default t="bootstrap_btn.Default"/></Param><xtml t="button.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {border: 1px solid;color: white;border-radius: 5px;text-align:center;cursor: pointer;-webkit-appearance: button;%$Size%%$Type/Normal%}#this:hover { %$Type/Hover%  transition: background-position 0.1s linear;  }#this:active { background-color: #E6E6E6;background-color: #D9D9D9 9;background-image: none;outline: 0;-webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);-moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);%$Type/Active%}]]></Css><Javascript><![CDATA[function(button) {  button.setInnerHTML(\'\',button.text);    button.setOnClick(\'\',button.Action);}]]></Javascript></xtml></Component></xtml><xtml ns="section_style"><Component id="BootstrapInfo" type="section.Style" styleGuide="bootstrap"><xtml t="section.CustomStyle"><Html><![CDATA[<div><button class="aa_close_section"></button><div class="section_body"/></div>]]></Html><Css><![CDATA[#this {font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size: 13px;line-height: 18px;    color: #3A87AD;background-color: #D9EDF7;border-color: #BCE8F1;  padding: 12px 35px 6px 14px;margin-bottom: 18px;  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);  border-radius: 4px;}.aa_close_section:hover { opacity: 0.4; }.aa_close_section {  position: relative;  top: -9px;  right: -32px;  line-height: 18px;cursor: pointer;background: transparent;    float: right;  opacity: 0.2;  border:0;font-size: 20px;font-weight: bold;    color: black;text-shadow: 0 1px 0 white;  text-align: center;  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;}]]></Css><Javascript><![CDATA[function(section) {    jQuery(section).find(\'.aa_close_section\').click(function() {    jQuery(section).animate( { height: \'hide\' } , 600);  });  section.setInnerHTML(\'.section_title\',section.Title);    section.addSectionBody(\'.section_body\');}]]></Javascript></xtml></Component></xtml><xtml ns="bootstrap"><Component id="BootstrapDialog" type="dialog_style.Style" styleGuide="bootstrap"><xtml t="dialog_style.CustomStyle" Mode="dialog"><Feature t="dlg.DragDialog"/><Feature t="dlg.InScreenCenter"/><Feature t="dlg.DialogShadow"/><Feature t="dlg.CloseIcon"/><Feature t="dlg.ScreenCover"/><Feature t="dlg.ButtonsHorizontal"/><Feature t="dlg.OKOnEnter"/><Feature t="dlg.CloseOnEsc"/><Feature t="dlg.DialogButton"><Button t="dlg.OKButton"/><Button t="dlg.CancelButton"/></Feature><Feature t="dlg.AutomaticFocus" FocusOn="first input"/><Html><![CDATA[<div><div class="dlg_header"><div class="dlg_close_x"></div><h3 class="aa_dialog_title" /></div><div class="dlg_body aa_dialogcontents" /><div class="dlg_footer aa_dialogbuttons" /></div>]]></Html><Css><![CDATA[#this {max-width:100\\%;position1: fixed;width: 560px;overflow: auto;background-color: white;border: 1px solid #999;border: 1px solid rgba(0, 0, 0, 0.3);border-radius: 6px;-webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);-moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);-webkit-background-clip: padding-box;-moz-background-clip: padding-box;background-clip: padding-box;}.dlg_header {  padding: 9px 15px;  border-bottom: 1px solid #EEE;  }.dlg_close_x{float: right;font-size: 20px;font-weight: bold;line-height: 18px;color: black;text-shadow: 0 1px 0 white;opacity: 0.2;  cursor: pointer;}.dlg_close_x:hover { opacity: 0.4;}.dlg_body {padding: 15px;overflow-y: auto;  }.dlg_footer {  padding: 0px 15px 14px;  height:44px;margin-bottom: 0;text-align: right;background-color: whiteSmoke;border-top: 1px solid #DDD;border-radius: 0 0 6px 6px;box-shadow: inset 0 1px 0 white;}.dlg_footer>div { background-color: whiteSmoke; }]]></Css><Javascript><![CDATA[]]></Javascript><![CDATA[]]></xtml></Component></xtml></xtml><xtml jbart="true" ns="data"><Component id="AssignTemplate" type="data.Data" execution="native"><Param name="Template" /><Param name="Input" Default="%%" /></Component><Component id="CleanNS" type="data.Data" execution="native" /><Component id="Switch" type="data.Data" execution="native"><Param name="Value"><Default value="%%" /></Param><Param name="Case" type="inline[]" essential="true" ><Param name="If" essential="true"/><Param name="IfCondition" type="data.Boolean" script="true" essential="true"/><Param name="Then" type="data.Data" essential="true"/></Param><Param name="Default" /></Component><Component id="AddSeparator" type="data.Aggregator" execution="native"><Param name="Separator" /><Param name="AddBefore" /><Param name="AddAfter" /></Component><Component id="Count" type="data.Aggregator" execution="native"><Param name="Items"><Default value="%%" /></Param></Component><Component id="FirstSucceeding" type="data.Data" execution="native" dtsupport="false"><Param name="Item" type="data.Data[]" essential="true"/></Component><Component id="IfThenElse" type="data.Data" execution="native" dtsupport="false"><Param name="If" type="data.Boolean" script="true" essential="true"/><Param name="Then" essential="true"/><Param name="Else" essential="true"/></Component><Component id="ItemByID" type="data.Data" execution="native" dtsupport="false"><Param name="List"/><Param name="ID"/></Component><Component id="ItemsByIDs" type="data.Data" execution="native" dtsupport="false"><Param name="List"/><Param name="IDs"/></Component><Component id="List" type="data.Data" execution="native" synonyms="Unite" dtsupport="false"><Param name="Item" type="data.Data[]" essential="true"/></Component><Component id="Lookup" type="data.Data" execution="native"><Param name="LookupName" essential="true"/><Param name="LookFor"><Default value="%%" /></Param><Param name="AllItems" /><Param name="ItemCode" /><Param name="ItemValue"><Default value="%%" /></Param><Param name="Version"><Default value="0" /></Param></Component><Component id="Pipeline" type="data.Data" execution="native" dtsupport="false"><Param name="Item" type="data.Data[]" essential="true" /><Param name="Aggregator" type="data.Aggregator[]" /></Component><Component id="RunActionAndKeepInput" type="data.Data" execution="native" dtsupport="false"><Param name="Action" type="action.Action" script="true" /></Component><Component id="Same" type="data.Data" execution="native" dtsupport="false" /><Component id="WritableText" type="data.Data"><Param name="DefaultValue" /><xtml t="data.Pipeline"><Item t="xml.WithChanges"><Xml t="xml.Xml"><xml value="" /></Xml><Change t="xml.SetAttribute" AttributeName="value" Value="%$DefaultValue%" /></Item><Item value="%@value%" /></xtml></Component><Component id="JustInTimeCalculation" type="data.Data" execution="native"><Description>use method \'GetContent\' to fetch results</Description><Param name="Content" script="true" essential="true"/></Component><Component id="Subset" type="data.Aggregator" execution="native"><Param name="From" short="true" essential="true"/><Param name="Count" short="true" essential="true"/></Component><Component id="JavaScript" type="data.Data,action.Action" execution="native"><Param name="Code" essential="true"><Default value="function(data,html_elem,context) {&#xa;  &#xa;}"/><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" MarginLeft="" Type="js"/></Param></Component><Component id="Always" type="data.Boolean.jBart"><xtml value="true" /></Component><Component id="Never" type="data.Boolean.jBart"><xtml value="false" /></Component><Component id="Percent" type="data.Data" execution="native"><Param name="Whole" essential="true"/><Param name="Part" essential="true"/></Component><Component id="Parents" type="data.Data" execution="native"><Param name="ParentRelation" script="true" Default="%..%"/><Param name="IncludeItself" type="data.Boolean" /><Param name="MaxIterations" Default="50"/><Param name="StopWhen" type="data.Boolean" script="true"/></Component></xtml><xtml package="true"><xtml ns="dlg" jbart="true"><Type id="DialogFeature" Image="%$_Images%/studio/dialog1616.gif"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/dialog1616.gif" /></Type><Type id="PopupStyle" style="true" /><Type id="DialogLocation" /><Type id="DialogButton" /><Component id="OpenDialog" type="action.Action" jbart="false" execution="native"><Param name="Title" essential="true" /><Param name="Contents" type="ui.Control" script="true" essential="true"><RunningInput t="xtml.RunXtml" Xtml="%$_Xtml%" Field="DialogData"/></Param><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultDialog" /></Param><Param name="RunOnOK" type="action.Action" script="true" essential="true" /><Param name="Feature" type="dlg.DialogFeature[]" script="true" /><Param name="DialogData" advanced="true"><Default value="%%" /></Param><Param name="LauncherElement" advanced="true" Default="%$ControlElement%"/><Param name="NoCancel" type="data.Boolean" /><NativeHelper name="MoreFeatures" t="dlg.Features"><Feature t="dlg.NoCancel" OKLabel1="Close" Condition="%$NoCancel%" /></NativeHelper></Component><Component id="Features" type="dlg.DialogFeature" light="false"><Param name="Feature" type="dlg.DialogFeature[]" script="true" /><xtml t="xtml.UseParamArray" Param="Feature" /></Component><Component id="ButtonsHorizontal" type="dlg.DialogFeature" execution="native" light="false" ><Param name="Align" type="enum" Options="left,right,auto" advanced="true"><Default value="auto" /></Param></Component><Component id="NoCancel" type="dlg.DialogFeature" execution="native" light="false"><Param name="OKLabel"><Default value="Close" /></Param><NativeHelper name="OKButton" t="dlg.OKButton" Text="%$OKLabel%"><Condition t="yesno.NotEmpty" Value="%$OKLabel%" /></NativeHelper></Component><Component id="RunOnCancel" type="dlg.DialogFeature" hidden="true"><Param name="Action" type="action.Action" script="true" /><xtml t="object.SetMethod" Object="%$_Dialog%" Method="RunOnCancel"><Xtml t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="RunBeforeOK" type="dlg.DialogFeature" description="Allows async actions to be run before OK (e.g. async validations)"><Param name="Action" type="action_async.Action" script="true" /><xtml t="object.SetMethod" Object="%$_Dialog%" Method="RunBeforeOK"><Xtml t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="DialogButtonsStyle" type="dlg.DialogFeature" light="false"><Param name="Style" type="button.Style" /><xtml t="object.SetProperty" Object="%$_Dialog%" Property="ButtonStyle" Value="%$Style%" IsSingleProperty="true"><Condition t="yesno.NotEmpty" Value="%$Style%" /></xtml></Component><Component id="InScreenCenter" type="dlg.DialogLocation" execution="native" gallery="Location"><Param name="AlwaysInScreenCenter" type="data.Boolean" /></Component><Component id="CenteringLauncher" type="dlg.DialogLocation" execution="native" gallery="Location" /><Component id="NearLauncher" type="dlg.DialogLocation" execution="native" gallery="Location" ><Param name="Location" type="enum"><Default value="below or above launcher" /><value>below launcher</value><value>below or above launcher</value><value>below,above or aside of launcher</value></Param><Param name="PopupAtLeastWideAsLauncher" type="data.Boolean" ><Default value="true" /></Param><Param name="UseFixedPosition" type="data.Boolean" advanced="true"><Default value="true" /></Param><Param name="PopupLeftOfLauncher" type="data.Boolean" advanced="true" /><Param name="DeltaX" Default="0" advanced="true" /><Param name="DeltaY" Default="-1" advanced="true" /></Component><Component id="AboveLauncher" type="dlg.DialogLocation" execution="native" /><Component id="JBartStudioDialog" type="dlg.DialogFeature" light="false"><xtml t="object.SetBooleanProperty" Object="%$_Dialog%" Property="JBStudio" Value="true" /></Component><Component id="DialogButton" type="dlg.DialogFeature" light="false" ><Param name="Button" type="dlg.DialogButton[]" /><xtml t="object.AddToProperty" Object="%$_Dialog%" Property="Buttons" Value="%$Button%" /></Component><Component id="ArrowToLaunchingElement" type="dlg.DialogFeature" execution="native"><Param name="ArrowImage" type="image.Image" advanced="true"><Default t="image.Image" Url="%$_Images%/arrow.png" /></Param><Param name="DeltaX" Default="-4" advanced="true" /><Param name="DeltaY" Default="-4" advanced="true" /></Component><Component id="ClearButtons" type="dlg.DialogFeature" light="false" ><xtml t="object.SetProperty" Object="%$_Dialog%" Property="Buttons" /></Component><Component id="DialogClass" type="dlg.DialogFeature"><Param name="CssClass" /><xtml t="object.SetTextProperty" Object="%$_Dialog%" Property="DialogClass" Value="%$CssClass%" /></Component><Component id="DialogFrame" type="dlg.DialogFeature" execution="native" light="false" /><Component id="PopupFrame" type="dlg.DialogFeature" execution="native" light="false"><Param name="Style" type="dlg.PopupStyle"><Default t="dlg.FullBlackShadow" /></Param></Component><Component id="PopupStyle" type="dlg.DialogFeature"><Param name="Style" type="dlg.PopupStyle"><Default t="dlg.FullBlackShadow" /></Param><xtml t="object.SetTextProperty" Object="%$_Dialog%" Property="PopupStyle" Value="%$Style%" /></Component><Component id="DialogShadow" type="dlg.DialogFeature" execution="native" light="false"></Component><Component id="ScreenCover" type="dlg.DialogFeature" execution="native"><Param name="Color"><Default value="gray" /></Param><Param name="Opacity"><Default value="0.8" /></Param><Param name="MinZIndex"><Default value="2000" /></Param></Component><Component id="CloseWhenClickingOutside" type="dlg.DialogFeature" execution="native" /><Component id="HoverPopup" type="dlg.DialogFeature" execution="native" /><Component id="OKOnEnter" type="dlg.DialogFeature" execution="native"><Param name="Enabled" type="data.Boolean"><Default value="true" /></Param></Component><Component id="CloseOnEsc" type="dlg.DialogFeature" execution="native"><Param name="Enabled" type="data.Boolean"><Default value="true" /></Param></Component><Component id="CloseIcon" type="dlg.DialogFeature" execution="native"><Param name="Image" Default="%$_Images%/close.png" /><Param name="UseXCharacter" Default="true" type="data.Boolean" /><Param name="XCharacter" Default="&#215;" /><Param name="Css" css="true"><Default><![CDATA[#this {top:7px;right:8px; position: absolute; cursor:pointer; }#this.xchar { font:17px arial; color: #555; width:14px; height: 14px; line-height: 15px; text-align: center;}#this.xchar:hover { color: #eee; background: rgba(193,53,53,0.8); border-radius: 7px; } ]]></Default></Param></Component><Component id="Size" type="dlg.DialogFeature" execution="native"><Param name="Size" description="width,height" /><Param name="MaxSize" description="width,height" /></Component><Component id="Resizer" type="dlg.DialogFeature" execution="native"></Component><Component id="UniquePopup" type="dlg.DialogFeature" execution="native" description="Auto close other popups with the same id"><Param name="Identifier" /><Param name="AutoClose" type="data.Boolean" description="Auto close other popups with the same id" Default="true" /><Param name="KeepPopupLocation" type="data.Boolean" /></Component><Component id="AlwaysLTR" type="dlg.DialogFeature"><xtml t="object.SetBooleanProperty" Object="%$_Dialog%" Property="AlwaysLTR" Value="true" /></Component><Component id="Title" type="dlg.DialogFeature"><Param name="Title" /><xtml t="object.SetTextProperty" Object="%$_Dialog%" Property="Title"><Value t="text.Translate" Text="%$Title%" /></xtml></Component><Component id="TopDialog" type="data.Data" execution="native" ><Param name="ReturnContent" type="data.Boolean"><Default value="true" /></Param></Component><Component id="OKButton" type="dlg.DialogButton" light="false"><Param name="Text"><Default value="OK" /></Param><xtml t="dlg.Button" Text="%$Text%" ID="OK"><OnClick t="object.RunMethod" Object="%$_Dialog%" Method="OK" /><Style t="button.PrimaryButton" /></xtml></Component><Component id="CancelButton" type="dlg.DialogButton" light="false"><Param name="Text"><Default value="Cancel" /></Param><xtml t="dlg.Button" Text="%$Text%" ID="Cancel"><OnClick t="object.RunMethod" Object="%$_Dialog%" Method="Cancel" /><Style t="button.SecondaryButton" /></xtml></Component><Component id="ApplyButton" type="dlg.DialogButton" light="false"><Param name="Text"><Default value="Apply" /></Param><xtml t="dlg.Button" Text="%$Text%" ID="Apply"><OnClick t="object.RunMethod" Object="%$_Dialog%" Method="Apply" /></xtml></Component><Component id="Button" type="dlg.DialogButton"><Param name="Text"/><Param name="Image"/><Param name="OnClick" type="operation.OperationAction" script="true"/><Param name="ID"/><Param name="Style" type="button.Style"/><xtml t="object.Object" ID="%$ID%"><Method name="Control" t="field.ShowFieldControl"><Field t="field.Button" Title="%$Text%" Image="%$Image%" ID="dlg_button_%$ID%"><Action t="xtml.UseParam" Param="OnClick"/><Style t="data.FirstSucceeding"><Item value="%$Style%"/><Item value="%$_Dialog/ButtonStyle%"/><Item t="button.JBart"/></Style></Field></Method></xtml></Component><Component id="CloseContainingDialog" type="action.Action" execution="native" /><Component id="CloseDialog" type="action.Action" execution="native" ><Param name="CloseType" type="enum"><Default value="Cancel" /><value>OK</value><value>Cancel</value></Param></Component><Component id="CloseDialogFrame" type="action.Action" execution="native" hidden="true"/><Component id="AutomaticFocus" type="dlg.DialogFeature" execution="native" gallery="AutomaticFocus"><Param name="FocusOn" type="enum"><Default value="first input" /><value>no focus</value><value>first input</value></Param></Component><Component id="Location" type="dlg.DialogFeature" gallery="Location" ><Param name="Location" script="true" type="dlg.DialogLocation" /><xtml t="xtml.UseParam" Param="Location" /></Component><Component id="DragDialog" type="dlg.DialogFeature" execution="native" description="Drags a dialog by an element of class aa_dialog_title"></Component><Component id="InplaceDialog" type="field.Control" light="false" execution="native"><Param name="Title" essential="true" Default="Dialog Title"/><Param name="Contents" type="ui.Control" script="true" essential="true" /><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultDialog" /></Param><Param name="Feature" type="dlg.DialogFeature[]" script="true" /><NativeHelper name="OpenDialog" t="dlg.OpenDialog" Title="%$Title%" Style="%$Style%"><Contents t="xtml.UseParam" Param="Contents" /><Feature t="xtml.UseParamArray" Param="Feature" /></NativeHelper></Component><Component id="HandleEvents" type="dlg.DialogFeature" ><Param name="OnOK" script="true" type="operation.OperationAction" /><Param name="OnCancel" script="true" type="operation.OperationAction" /><Param name="OnClose" script="true" type="operation.OperationAction" /><Param name="OnBeforeClose" script="true" type="operation.OperationAction" /><xtml t="action.RunActions"><Action t="object.SetMethod" Object="%$_Dialog%" Method="RunOnCancel"><Xtml t="xtml.UseParam" Param="OnCancel" /></Action><Action t="object.SetMethod" Object="%$_Dialog%" Method="RunBeforeOK"><Xtml t="xtml.UseParam" Param="OnOK" /></Action><Action t="object.SetMethod" Object="%$_Dialog%" Method="RunOnClose"><Xtml t="xtml.UseParam" Param="OnClose" /></Action><Action t="object.SetMethod" Object="%$_Dialog%" Method="RunBeforeClose"><Xtml t="xtml.UseParam" Param="OnBeforeClose" /></Action></xtml></Component><Component id="Buttons" type="dlg.DialogFeature" gallery="DialogButtons" ><Param name="Buttons" type="dlg.DialogButtons" script="true" /><Param name="Style" type="button.Style" /><Param name="Layout" type="group.Style" script="true" ><Default t="group.Horizontal" /></Param><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Dialog%" Property="ButtonStyle" Value="%$Style%" IsSingleProperty="true"><Condition t="yesno.NotEmpty" Value="%$Style%" /></Action><Action t="xtml.UseParam" Param="Buttons" /><Action t="object.SetMethod" Object="%$_Dialog%" Method="ButtonsLayout"><Xtml t="xtml.UseParam" Param="Layout" /></Action></xtml></Component><Component id="OkCancel" type="dlg.DialogButtons"><Param name="OkLabel" ><Default value="OK" /></Param><Param name="CancelLabel" ><Default value="Cancel" /></Param><Param name="ExtraButton" type="dlg.DialogButton[]" advanced="true"/><xtml t="dlg.Features" ><Feature t="dlg.ClearButtons" /><Feature t="dlg.DialogButton"><Button t="dlg.OKButton" Text="%$OkLabel%"/><Button t="dlg.CancelButton" Text="%$CancelLabel%" /></Feature><Feature t="object.AddToProperty" Object="%$_Dialog%" Property="Buttons" Value="%$ExtraButton%" /></xtml></Component><Component id="Ok" type="dlg.DialogButtons"><Param name="OkLabel" ><Default value="OK" /></Param><xtml t="dlg.Features" ><Feature t="dlg.ClearButtons" /><Feature t="dlg.DialogButton"><Button t="dlg.OKButton" Text="%$OkLabel%"/></Feature></xtml></Component><Component id="Close" type="dlg.DialogButtons"><Param name="CloseLabel" ><Default value="Close" /></Param><Param name="ExtraButton" type="dlg.DialogButton[]" advanced="true"/><xtml t="dlg.Features"><Feature t="dlg.ClearButtons" /><Feature t="dlg.DialogButton"><Button t="dlg.CancelButton" Text="%$CloseLabel%" /></Feature><Feature t="object.AddToProperty" Object="%$_Dialog%" Property="Buttons" Value="%$ExtraButton%" /></xtml></Component><Component id="Custom" type="dlg.DialogButtons"><Param name="Button" type="dlg.DialogButton[]" /><Param name="KeepOriginalButtons" type="data.Boolean" /><xtml t="dlg.Features"><Feature t="dlg.ClearButtons" ><Condition t="yesno.Not" Of="%$KeepOriginalButtons%" /></Feature><Feature t="object.AddToProperty" Object="%$_Dialog%" Property="Buttons" Value="%$Button%" /></xtml></Component><Component id="ZIndex" type="dlg.DialogFeature" ><Param name="ZIndex" Description="e.g. 100" /><xtml t="object.SetTextProperty" Object="%$_Dialog%" Property="ZIndex" Value="%$ZIndex%" /></Component><Component id="MobileFullScreen" type="dlg.DialogFeature" execution="native" /><Component id="UseLauncherWidth" type="dlg.DialogFeature" execution="native" /><Component id="Features" type="dlg.DialogFeature" light="false"><Param name="Feature" type="dlg.DialogFeature[]" /><xtml t="xtml.UseParamArray" Param="Feature" /></Component><Component id="Css" type="dlg.DialogFeature" execution="native"><Param name="Css"><Default value="#this {}" /><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="dlg.Css" ParamName="Css" /></Param></Component><Component id="DisableBodyScroll" type="dlg.DialogFeature" execution="native"><Param name="Enabled" type="data.Boolean"><Default value="true"/></Param></Component><Component id="TopZIndexWhenTouching" type="dlg.DialogFeature" execution="native" /><Component id="BlackShadow" type="dlg.PopupStyle" Image="%$_Images%/styles/BlackShadowPopup.png"><Param name="Css"><Default          value="font-size:12px; -moz-border-radius: 5px;&#xa; border-radius: 5px; &#xa; -moz-box-shadow: 5px 5px 5px black;&#xa; -webkit-box-shadow: 5px 5px 5px black;&#xa; box-shadow: 5px 5px 5px black;&#xa; background:#EEEEFC; border:none; &#xa; margin-right:20px; padding:10px;" /><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="dlg.BlackShadow" ParamName="Css" /></Param><xtml value="%$Css%" /></Component><Component id="FullBlackShadow" type="dlg.PopupStyle" Image="%$_Images%/styles/FullBlackShadowPopup.png"><Param name="Css"><Default          value="font-size:12px; padding:15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; background:#EEEEFC; border:none; &#xa; margin-right:20px;" /><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="dlg.FullBlackShadow" ParamName="Css" /></Param><xtml value="%$Css%" /></Component><Component id="LightPopup" type="dlg.PopupStyle"><Param name="Css"><Default          value="font-size:12px; border: 1px groove lightgrey; background:#F8F9FF; padding: 0;" /><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="dlg.LightPopup" ParamName="Css" /></Param><xtml value="%$Css%" /></Component><Component id="CustomStyle" type="dlg.PopupStyle" light="false"><Param name="Css"><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="dlg.CustomStyle" ParamName="Css" /></Param><xtml value="%$Css%" /></Component><Component id="ShowFocusUnderline" type="dlg.DialogFeature"><xtml t="object.SetBooleanProperty" Object="%$_Dialog%" Property="ShowFocusUnderline" Value="true" /></Component><Component id="DontCloseOtherPopupsOnOpen" type="dlg.DialogFeature" light="false"><xtml t="object.SetBooleanProperty" Object="%$_Dialog%" Property="DontCloseOtherPopupsOnOpen" Value="true" /></Component><Component id="CloseAllDialogs" type="Action.Action" execution="native" /><Component id="CloseDialogByID" type="action.Action" execution="native" description="Closes a dialog or popup with unique identifier" ><Param name="Identifier" /></Component><Component id="ToggleOpenCloseDialog" type="action.Action" execution="native" description="Opens or closes a dialog with unique identifier. Open should be dlg.OpenDialog action" ><Param name="Identifier" /><Param name="Open" type="action.Action"><Default t="dlg.OpenDialog" /></Param></Component></xtml><xtml ns="dialog" jbart="true"><Component id="ClosePopup" type="action.Action" execution="native"><Param name="AllPopups" type="data.Boolean" /></Component><Component id="TogglePopup" type="action.Action" execution="native"><Param name="Contents" type="ui.Control" /><Param name="OnElement" type="ui.Control"><Default t="ui.ControlToRunOn" /></Param><Param name="WidthOption" type="enum"><Default value="launcher width" /><value>launcher width</value><value>by css class</value></Param><Param name="Width" /><Param name="Height" /><Param name="PopupData"><Default value="%%" /></Param><Param name="OnSuccess" type="action.Action" script="true" /><Param name="OnCancel" type="action.Action" script="true" /><Param name="CloseOnEnter" type="data.Boolean"><Default value="true" /></Param><Param name="CloseOnDoubleClick" type="data.Boolean"><Default value="true" /></Param><Param name="AutoFocusOn" script="true" /><Param name="PopupCssClass" /><Param name="Picklist" type="data.Boolean" Description="Ugly. To be removed. Picklist behaves differently" /><Param name="XYCorrections" type="data.Data"><Default value="0,7" /></Param><Param name="AutoCloseOnMouseOut" type="data.Boolean" /><Param name="ReturnFocusTo" /><Param name="OnPopupOpen" type="action.Action" script="true" /><Param name="Style" type="dlg.PopupStyle" /><Param name="ShowCloseButton" type="data.Boolean" /><Param name="CloseImage"><Default value="%$_Images%/close2.png" /></Param></Component></xtml><xtml ns="dialog_style" jbart="true"><Type id="Style" customPT="dialog_style.CustomStyle"/><Component id="DefaultDialog" type="dialog_style.Style"><xtml t="data.FirstSucceeding"><Item t="style_guide.StyleFromStyleGuide" Style="DialogStyle" /><Item t="dialog_style.JBartDialog" /></xtml></Component><Component id="JBartDialog" type="dialog_style.Style"><Param name="CssOnTop" advanced="true"/><xtml t="dialog_style.CustomStyle"        Html="&lt;div&gt; &lt;table cellpadding=\'0\' cellspacing=\'0\' &gt;&lt;tbody class=\'aa_dlg_tbody\'&gt;&lt;tr&gt;&lt;td class=\'aa_dialog_title\'/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=\'vertical-align:top\'&gt;&lt;div class=\'aa_dialogcontents\'/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=\'aa_dialogbuttons\'/&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;"              Javascript="" Mode="dialog"><Css><![CDATA[#this { position:fixed; left:10px;  top:10px;box-shadow:  2px 2px 3px 1px grey;min-width:200px;%$CssOnTop% }#this >table {  background:rgb(166,198,255);  width: 100\\%; }#this .aa_dlg_tbody { background: white }#this .aa_dialog_title {  color:rgb(33,43,56);  background: url(%$_Images%/css/dialog_caption.png);  font-weight:bold;  height:42px;  cursor: move;  text-align: center;  vertical-align:top;  font-family: Arial;  margin-top: 8px; }#this .aa_dialog_title_text { padding:8px 30px; }#this .aa_dialogcontents { overflow: auto; padding:5px 20px; } #this.aa_inplace_dialog { position: static !important; } .dialog_bottom_outer {  display:none; width:100%; height:6px; float:left; background:url(%$_Images%/css/shadow_bottom.png) no-repeat ; padding:0 0 0 6px; }.dialog_bottom_inner { display:none; float:left; height:6px; width:100%; background:url(%$_Images%/css/shadow_bottom.png) no-repeat right;  } .dialog_right_shadow_tr { display:none; background:rgb(166,198,255);  } .dialog_right_shadow_th { display:none; height:100\\%; width:6px; background:url(%$_Images%/css/shadow_right.png); } .right2left .dialog_shadow_extra_th { display:none;background:rgb(166,198,255); }      ]]></Css><Feature t="dlg.DragDialog" /><Feature t="dlg.InScreenCenter" /><Feature1 t="dlg.DialogClass" CssClass="std" /><Feature t="dlg.CloseIcon" UseXCharacter="true" /><Feature t="dlg.ScreenCover" /><Feature t="dlg.ButtonsHorizontal" /><Feature t="dlg.OKOnEnter" /><Feature t="dlg.CloseOnEsc"/><Feature t="dlg.DialogButton"><Button t="dlg.OKButton" /><Button t="dlg.CancelButton" /></Feature><Feature t="dlg.AutomaticFocus" FocusOn="first input" /><Feature1 t="dlg.DisableBodyScroll" /></xtml></Component><Component id="DefaultPopup" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Javascript="" Mode="popup"><Css><![CDATA[#this { padding:15px;-moz-border-radius: 3px; border-radius: 3px; -webkit-border-radius: 3px; -webkit-box-shadow: 0 0 3px 5px rgba(50,50,50,0.5);background:#EEEEFC; border:none; margin-right:20px; overflow-y: auto; overflow-x: hidden; font-size: 12px;}.ie #this { border: 1px solid black; }]]></Css><Feature t="dlg.NearLauncher" /><Feature t="dlg.CloseWhenClickingOutside" /><Feature t="dlg.OKOnEnter" /><Feature t="dlg.CloseOnEsc"/></xtml></Component><Component id="DefaultPicklist" type="dialog_style.Style"><Param name="Shadow" /><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Javascript="" Mode="popup"><Css><![CDATA[#this { padding: 0 10px;border-radius: 3px;box-shadow: 2px 2px 7px 1px rgba(50,50,50,0.5);background: whiteSmoke; overflow-y: auto; overflow-x: hidden; font:12px times;}.ie #this { border: 1px solid black; }]]></Css><Feature t="dlg.NearLauncher" /><Feature t="dlg.CloseWhenClickingOutside" /><Feature t="dlg.OKOnEnter" /><Feature t="dlg.CloseOnEsc"/></xtml></Component><Component id="WhitePopup" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Css="#this { padding:15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; background:white; border:none; &#xa; margin-right:20px; overflow-y: auto; overflow-x: hidden; }"     Javascript="" Mode="popup"><Feature t="dlg.NearLauncher" /><Feature t="dlg.CloseWhenClickingOutside" /><Feature t="dlg.OKOnEnter" /><Feature t="dlg.CloseOnEsc"/></xtml></Component><Component id="PicklistPopup" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Css="#this { font-size: 12px; padding1:15px; background:white; border:1px solid gray; overflow-y: auto; overflow-x: hidden; }"     Javascript="" Mode="popup"><Feature t="dlg.NearLauncher" /><Feature t="dlg.CloseWhenClickingOutside" /><Feature t="dlg.CloseOnEsc"/></xtml></Component><Component id="HoverPopup" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=\'aa_popup aa_dialogcontents\' /&gt;"     Css="#this { padding:15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 2px 2px #888;-webkit-box-shadow: 0 0 2px 2px#888;&#xa;box-shadow: 0 0 2px 2px #888;&#xa; background:#EEEEFC; border:none; &#xa; margin-right:20px; overflow-y: auto; overflow-x: hidden; }"     Javascript="" Mode="popup"><Feature t="dlg.NearLauncher" /><Feature t="dlg.HoverPopup" /><Feature t="dlg.DontCloseOtherPopupsOnOpen"/></xtml></Component><Component id="PopupWithBigCloseButton" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Html="&lt;div class=&quot;aa_popup aa_dialogcontents&quot;/&gt;" Css="#this { padding:15px; -moz-border-radius: 3px;&#xa; border-radius: 3px; &#xa; -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;&#xa;box-shadow: 0 0 5px 5px #888;&#xa; background:#EEEEFC; border:none; &#xa; margin-right:20px; }" Javascript="" Mode="popup"><Feature t="dlg.Location"><Location t="dlg.InScreenCenter" AlwaysInScreenCenter=""/></Feature><Feature t="dlg.CloseWhenClickingOutside"/><Feature t="dlg.OKOnEnter"/><Feature t="dlg.CloseOnEsc"/><Feature t="dlg.CloseIcon" Image="%$_Images%/css/close_big.png" CssStyle="top:-26px;right:-26px"/></xtml></Component>      <Component id="DraggablePopup" type="dialog_style.Style"><xtml t="dialog_style.CustomStyle" Mode="popup"><Feature t="dlg.DragDialog"/><Feature t="dlg.CloseOnEsc"/><Html><![CDATA[<div class="aa_popup inspect_popup"><div class="aa_dialog_title"/><div class="aa_dialogcontents"/><div class="aa_dialogbuttons"/></div>]]></Html><Css><![CDATA[#this { padding:15px 15px 5px 15px; -moz-border-radius: 3px; border-radius: 3px;  -moz-box-shadow: 0 0 5px 5px #888;-webkit-box-shadow: 0 0 5px 5px#888;box-shadow: 0 0 5px 5px #888; border:none;  margin-right:20px; overflow-y: auto; overflow-x: hidden;background:#EEEEFC;}#this .aa_dialog_title { z-index:0; position:absolute; height:25px; width:100\\%; cursor:move; margin-left:-15px; margin-top:-15px; }#this .aa_dialogcontents { overflow:auto; }]]></Css><Javascript><![CDATA[]]></Javascript><![CDATA[]]><Feature t="dlg.Location"><Location t="dlg.NearLauncher" PopupAtLeastWideAsLauncher="true" Location="below or above launcher"/></Feature></xtml></Component><Component id="CustomStyle" type="dialog_style.Style" customPT="true"><Param name="Html" codemirror="true" /><Param name="Css" codemirror="true" /><Param name="Javascript" codemirror="true" /><Param name="Feature" type="dlg.DialogFeature[]" script="true" /><Param name="Mode" type="enum" Options="dialog,popup"><Default value="dialog" /></Param><Param name="DesignTime_Save"><Field t="bart_dt.DialogStyleSave" Type="dialog_style.Style" StylePT="dialog_style.CustomStyle" /></Param><ParamGenerator t="bart_dt.DialogStyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /><TextProperty name="Mode" value="%$Mode%" /><Method name="Features" t="xtml.UseParamArray" Param="Feature" /><Property name="FeatureXtml" t="xtml.XtmlOfParamArray" Param="Feature" /></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="button" jbart="true"><Component id="FacebookBlue" type="button.Style" styleGuide="facebook"><xtml t="button.CustomStyle"        Html="&lt;button class=&quot;aa_button_clickable aa_button_text&quot; tabindex=&quot;1&quot;/&gt;"        Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Css><![CDATA[#this {background-image: url(https://s-static.ak.facebook.com/rsrc.php/v1/yT/r/Ami4lrB-c2A.png) 0 -49px no-repeat;background-color: #5B74A8;border-color: #29447E #29447E #1A356E;border: 1px solid #999;border-bottom-color: #888;-webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .1);cursor: pointer;display: inline-block;font-size: 11px;font-weight: bold;line-height: 13px;padding: 5px 8px;text-align: center;text-decoration: none;vertical-align: top;white-space: nowrap;  color: white;margin: 0;}#this:active {  background:#4f6aa3;border-bottom-color:#29447e;}]]></Css></xtml></Component><Component id="FacebookHyperlink" type="button.Style" styleGuide="facebook"><xtml t="button.CustomStyle"      Html="&lt;span class=&quot;aa_button_clickable&quot;&gt;&#xd;  &lt;span class=&quot;aa_button_img&quot;/&gt;&#xd;  &lt;span class=&quot;aa_button_text&quot;/&gt;&#xd;&lt;/span&gt;"      Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Css><![CDATA[#this { color: #3B5998;cursor:pointer;text-decoration: none;font-family: "lucida grande",tahoma,verdana,arial,sans-serif;font-size:11px; }#this >.aa_button_text:hover { text-decoration: underline }#this .aa_button_img img { cursor:pointer; padding-bottom:2px; padding-right: 4px; vertical-align:middle; }]]></Css></xtml></Component><Component id="FacebookGray" type="button.Style" styleGuide="facebook"><xtml t="button.CustomStyle"        Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Html><![CDATA[<button class="aa_button_clickable aa_button_text" tabindex="1"/>]]></Html><Css><![CDATA[#this {font-family: \'Lucida Grande\', Tahoma, Verdana, Arial, sans-serif;background-color: #EEE;border: 1px solid #999;border-bottom-color: #888;-webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .1);cursor: pointer;display: inline-block;font-size: 11px;font-weight: bold;line-height: 13px;padding: 5px 8px;text-align: center;text-decoration: none;vertical-align: top;white-space: nowrap;  color: #333;background-image: url(http://static.ak.fbcdn.net/rsrc.php/v1/yT/r/Ami4lrB-c2A.png);background-repeat: no-repeat;background-position: 0 -98px;margin: 0;}#this:active {  background:#ddd;border-bottom-color:#999;-webkit-box-shadow:0 1px 0 rgba(0, 0, 0, .05)}]]></Css></xtml></Component></xtml><xtml ns="section"><Component id="Facebook" type="section.Style" styleGuide="facebook"><xtml t="section.CustomStyle"><Html><![CDATA[<div><div class="section_title"><div class="section_title_text"/></div><div class="section_body"/></div>]]></Html><Css><![CDATA[#this >.section_title {font-size: 11px;font-family: "lucida grande",tahoma,verdana,arial,sans-serif;line-height: 1.28;background-color: #F2F2F2;border-bottom: none;border-top: solid 1px #E2E2E2;padding: 4px 6px 5px 0px;margin-bottom: 8px;}#this >.section_title .section_title_text {  color: #333;font-size: 11px;padding-left: 6px; font-weight:bold; display: inline;}]]></Css><Javascript><![CDATA[function(section) {    section.setInnerHTML(\'.section_title_text\',section.Title);    section.addSectionBody(\'.section_body\');}]]></Javascript></xtml></Component></xtml><xtml ns="tabcontrol"><Component id="FacebookLikeTabs" type="tabcontrol.Style" styleGuide="facebook"><xtml t="tabcontrol.CustomStyle"        Html="&lt;div&gt;&#xd;  &lt;div&gt;&#xd;    &lt;div class=&quot;aatabs_tab&quot;&gt;&#xd;      &lt;div class=&quot;aatabs_tab_image&quot;/&gt;&#xd;      &lt;div class=&quot;aatabs_tab_text&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;  &lt;/div&gt;&#xd;  &lt;div class=&quot;aatabs_contents&quot;/&gt;&#xd;&lt;/div&gt;"        Javascript="function(tabcontrol) {&#xa; tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',&#xa;   function(tab) {        &#xa;      tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);         &#xa;      tab.setImageSource(\'.aatabs_tab_image\',tab.Image);   &#xa;   tab.setOnClick(\'\',tab.Select); });&#xa;}"><Css><![CDATA[#this .aatabs_tab { font-size: 93\\%; font-family: arial; float: left; padding: 6px 15px 4px 6px; cursor: pointer;  background: #6D84B4; margin-right:2px; min-width:30px; }#this .aatabs_tab_text { padding:0 0 0 5px; float:left; color: white; }#this .aa_selected_tab  { background: #1D4088; color: white; }#this .aatabs_tab_image { float: left }#this .aatabs_contents { clear: both; padding:15px 0 15px 5px; border: 1px solid #B4BBCD; background: #F2F2F2;}.right2left #this .aatabs_tab { float: right; padding: 6px 6px 4px 15px;  }.right2left #this .aatabs_tab_image { float: right}.right2left #this .aatabs_tab_text { float: right; padding:0 5px 0 0;}]]></Css></xtml></Component></xtml><xtml ns="group"><Component id="FacebookPropertySheet" type="group.Style,propertysheet.Style" styleGuide="facebook"><Param name="PropertyWidth" Default="80px" /><xtml t="group.CustomStyle"><Html><![CDATA[<table cellspacing="0" cellpadding="0"><tr class="field"><td class="field_title"/><td class="field_contents"/></tr></table>]]></Html><Css><![CDATA[#this>tbody>tr>.field_title {   width: %$PropertyWidth%;   padding: 6px 5px 0 0;   vertical-align:top;   color: #666;  font-weight: bold;  font-size: 11px;  font-family: "lucida grande",tahoma,verdana,arial,sans-serif;}#this>tbody>tr>.field_contents { vertical-align: top; }#this>tbody>tr>.field_contents { padding-bottom: 8px; }tr:last-child >.field_contents { padding-bottom: 0px; }#this>tbody>tr>td>.field_description {   background: url(https://s-static.ak.facebook.com/rsrc.php/v1/yt/r/7rpZ7CHyvX7.gif) no-repeat 0 center;display: inline-block; height: 9px; width: 12px; margin-left:5px; cursor:pointer; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field)      {    if (field.HideTitle || field.IsSection) {      field.colspan = 2;      jQuery(field).find(\'>.field_title\').remove();    }    else {      field.setInnerHTML(\'.field_title\',field.Title+\':\');    }      var jFieldTitle = jQuery(field).find(\'.field_title\');    field.setControl(\'.field_contents\');     if (field.Field.Description) {      jFieldTitle.append(\'<div class="field_description" title="\'+field.Field.Description+\'"/>\');    }  });;}]]></Javascript></xtml></Component><Component id="FacebookTitle" type="uitext.Style" styleGuide="facebook"><xtml t="uitext.CustomStyle"><Html><![CDATA[<div />]]></Html><Css><![CDATA[#this { color: #1C2A47;font-size: 16px;font-family: "lucida grande",tahoma,verdana,arial,sans-serif;line-height: 1.28; font-weight: bold;}]]></Css><Javascript><![CDATA[function(text) { text.setInnerHTML(\'\',text.text); }]]></Javascript></xtml></Component>    </xtml><xtml ns="section_style"><Component id="FacebookYellow" type="section.Style" styleGuide="facebook"><xtml t="section.CustomStyle"><Html><![CDATA[<div><button class="aa_close_section"></button><div class="section_body"/></div>]]></Html><Css><![CDATA[#this {font-family: "lucida grande",tahoma,verdana,arial,sans-serif;font-size: 13px;  color: #333;background-color: #FFF9D7;border: 1px solid #E2C822;  padding: 10px;  padding-bottom:0;margin-bottom: 10px;}.aa_close_section:hover { opacity: 0.4; }.aa_close_section {  position: relative;  top: -9px;  right: -10px;  line-height: 18px;cursor: pointer;background: transparent;    float: right;  opacity: 0.2;  border:0;font-size: 20px;font-weight: bold;    color: black;text-shadow: 0 1px 0 white;  text-align: center;  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;}]]></Css><Javascript><![CDATA[function(section) {    jQuery(section).find(\'.aa_close_section\').click(function() {    jQuery(section).animate( { height: \'hide\' } , 600);  });  section.setInnerHTML(\'.section_title\',section.Title);    section.addSectionBody(\'.section_body\');}]]></Javascript></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="field" jbart="true"><Type id="Fields" ><MoreComponents><component id="field.Fields" itemsParam="Field" /><component id="field.Group" itemsParam="Field" /></MoreComponents></Type><Type id="FieldAspect"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/cherry1616.gif" /></Type><Type id="MultipleGroupData" /><Component id="InnerItems" type="field.MultipleGroupData"><Param name="Path" /><xtml t="data.IfThenElse" If="%$Path% == \'\'"><Then t="field.KeepParentItems" /><Else t="object.Object"><Method name="ContainerData" t="xml.XPath" From="%%" CreateIfDoesNotExist="true"><XPath t="text.RemoveSuffix" Data="%$Path%" Separator="/" EmptyIfNoSeparator="true" /></Method><Method name="Items" t="xml.XmlItems" ItemTypeName="%$TitleForSingle%" ><Tag t="text.FirstSucceeding"><Item t="text.Split" Part="Last" Text="%$Path%" Separator="/" /><Item value="%$Path%" /></Tag></Method></Else></xtml></Component><Component id="KeepParentItems" type="field.MultipleGroupData"><xtml t="object.Object"><Method name="ContainerData" value="%%" /><Method name="Items" t="data.FirstSucceeding"><Item value="%$DataHolderCntr/Items%" /><Item value="%$HeaderFooterCntr/Items%" /></Method></xtml></Component><Type id="PopupPage" /><Type id="DoOnSearchSelect" /><Component id="Link" type="field.DoOnSearchSelect"><Param name="Url" script="true"><Default value="%%" /></Param><Param name="OpenInANewTab" type="data.Boolean"><Default value="true"/><FieldAspect t="field_aspect.Title" Title="Open in a New Tab" /></Param><xtml t="uiaction.GoToPage" ><Url t="xtml.UseParam" Param="Url" /><Type t="data.IfThenElse" If="%$OpenInANewTab%" Then="open in a new tab" Else="navigate current page" /></xtml></Component><Component id="RunJavascript" type="field.DoOnSearchSelect"><Param name="Javascript" /></Component><Component id="RunXtml" type="field.DoOnSearchSelect"><Param name="Action" type="action.Action" script="true"/><xtml t="xtml.UseParam" Param="Action" /></Component><Component id="RunOperation" type="field.DoOnSearchSelect"><Param name="Operation" type="operation.OperationAction" script="true"/><xtml t="xtml.UseParam" Param="Operation" /></Component><Component id="ShowAllItemsInSearchBox" type="operation.OperationAction" ><xtml t="object.RunMethod" Object="%$_SearchBox%" Method="ShowAllItems" /></Component><Component id="HasMoreItemsToShowInSearchBox" type="data.Boolean" ><xtml t="object.RunMethod" Object="%$_SearchBox%" Method="DoHaveMoreItemsToShow" /></Component><Component id="SearchBox" type="field.Fields" execution="native" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/search.gif"/><Param name="ID" advanced="always" /><Param name="Title" /><Param name="Items" /><Param name="ItemImage" script="true" advanced="true"/><Param name="ItemTitle" script="true"/><Param name="Style" type="searchbox.Style"><Default t="searchbox.Round" /></Param><Param name="ItemExtraText" script="true" advanced="true"/><Param name="ItemLink" script="true" advanced="true"/><Param name="DoOnSelect" type="field.DoOnSearchSelect" script="true" advanced="true"/><Param name="SearchIn" type="enum" advanced="true"><Default value="title" /><value>title</value><value>title and extra text</value></Param><Param name="ShowPopupOnEmptySearch" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="PromotedItems" advanced="true" description="shown in empty search"/><Param name="DefaultImage" advanced="true"/><Param name="PoweredByJBart" type="data.Boolean" advanced="true" Default="true" /><Param name="HideResultsOnClick" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="NoResults" type="ui.Control" script="true" advanced="true"><Default t="ui.Text" Style="padding: 4px 3px;display:block" Text="No Results for %%" /></Param><Param name="MaxItemsToShow" advanced="true" description="when exceeding, \'show all\' button appears" ><Default value="20" /></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><Param name="MatchedTextCss" css="true" advanced="true" Default="color: blue; font-weight: bold;" /><NativeHelper name="Field" t="field.Field1" ID="%$ID%" Title="%$Title%"><FieldData t="data.WritableText" /></NativeHelper><NativeHelper name="FieldAspects" t="field_aspect.FieldAspects"><FieldAspect t="field_aspect.Writable" /><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="SearchBox" Value="true" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="%$Title%" /><FieldAspect t="field_aspect.PopupPage1" /><FieldAspect t="field_aspect.HideTitle" /><FieldAspect t="field_aspect.SimpleInput"/>      <FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /><FieldAspect t="field_aspect.PopupImage" Css=""/></NativeHelper><NativeHelper name="ResultListAspects" t="uiaspect.Aspects"><Aspect t="uiaspect.ItemClickable"><ClickAction t="object.RunMethod" Object="%$_Input%" Method="OnSelect" /></Aspect><Aspect t="uiaspect.HighlightSelectionOnHover" /><Aspect t="uiaspect.ItemSelection" AutoSelectFirstItem="true" IncludeSubContainers="false"/><Aspect t="uiaspect.HeaderFooter" Condition="%$PoweredByJBart%" Location="footer" Phase="100"><Control t="field.ShowFieldControl"><Field t="jbart.PoweredByJBart"><FieldAspect t="field_aspect.Css" Inline="margin-top:10px;display: inline-block;" /></Field></Control></Aspect></NativeHelper><NativeHelper name="ResultsContainer" t="ui.ShowPage" Class="search_results"><Page value="%$_Field/ResultsPage%" /><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items" /><Aspect t="object.RunMethod" Object="%$_PopupField%" Method="ResultListAspects" /></PageParams></NativeHelper><NativeHelper name="PreviewContainer" t="ui.ShowPage" Page="%$_Field/ResultsPage%"><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items" Items="%$_Items%" /><Aspect t="uiaspect.ClickableRows" ><Action t="xtml.UseParam" Param="DoOnSelect" ><Input t="xtml.UseParam" Param="ItemLink" /></Action></Aspect></PageParams></NativeHelper><NativeHelper name="ClosePopup1" t="dialog.ClosePopup" /><NativeHelper name="ClosePopup" t="dlg.CloseDialog" /><NativeHelper name="OpenPopup" t="dlg.OpenDialog" ><Contents t="ui.List"><Control value="%$_ResultsContainer%" /></Contents><Feature t="dlg.NearLauncher" HidingLauncher="false" /><Feature t="dlg.PopupStyle"><Style t="dlg.LightPopup" /></Feature><Feature t="dlg.AutomaticFocus" FocusOn="no focus" /><Feature t="dlg.Size" MaxSize=",350px" /><Feature t="object.RunMethod" Object="%$_Field%" Method="PopupFeatures" /><Style t="data.FirstSucceeding" ><Item value="%$_Field/PopupStyle%" /><Item t="dialog_style.DefaultPopup" /></Style></NativeHelper></Component><Component id="CleanFilterButton" type="field.FieldAspect" hidden="true"><Param name="ShowCondition" type="data.Boolean" script="true"><Default t="yesno.NotEmpty" Value="%%" /></Param><Param name="CleanFilterAction" type="action.Action" script="true"><Default t="action.RunActions"><Action t="action.WriteValue" To="%$FilterData%" Value=""/><Action t="uiaction.SetText" Text="" DoNotFireEvents="true"><Var name="ControlElement" value="%$_Input%"/></Action><Action t="object.RunMethod" Object="%$_Input%" Method="Refresh"/><Action t="field.FireOnUpdate"/></Default></Param><Param name="Field" type="field.Fields"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Toolbar"><Operations t="operation.Operation" Title="clear filter" CssClass="clean_filter clean_filter_%$Field/ID%" ID="clear filter"><Action t="operation.RunXtmlAction"><Var name="BaseField" value="%$Field%"/><Action t="xtml.UseParam" Param="CleanFilterAction" /></Action></Operations></FieldAspect><FieldAspect t="field_aspect.ModifyControl"><Action t="ui.ToggleClassByCondition" Class="cleanable_filter" Element="%$Cell%"><ClassCondition t="xtml.UseParam" Param="ShowCondition" /></Action></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="ui.ToggleClassByCondition" Class="cleanable_filter"><ClassCondition t="xtml.UseParam" Param="ShowCondition" /><Element t="xml.Parent" Data="%$ControlElement%" /></Action></FieldAspect></xtml></Component><Type id="Control" /><Component id="Control" type="field.Fields" advanceddt="true" execution="native" image="%$_Images%/studio/control1616.gif"><Param name="ID" essential="true" advanced="always" /><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="HideTitle" type="data.Boolean" boolfeature="true" /><Param name="Control" type="field.Control" script="true" essential="true" /><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="CustomControl" type="field.Fields" execution="native" deprecated="true" hidden="true" description="Deprecated, use field.Control instead" light="false" image="%$_Images%/studio/control1616.gif"><Param name="ID" advanced="always" essential="true"/><Param name="ShowTitle" type="data.Boolean"/><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="Image" advanced="true"/><Param name="Control" type="uiaspect.Control" script="true" essential="true" RunningInput="%$_Items/Items%"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="Field1" type="field.Fields" execution="native"><Param name="ID" essential="true"/><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="FieldData" script="true"><Default value="%%" /></Param><Param name="Control" type="ui.Control" script="true" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" essential="true"/><Param name="Multiple" type="field_aspect.Multiple" script="true" /></Component><Component id="FieldWithAspects" type="field.Fields"><Param name="Field" type="field.Fields" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" essential="true"/><xtml t="data.RunActionAndKeepInput" ><Data value="%$Field%"/><Action t="xtml.UseParamArray" Param="FieldAspect" ><Var name="_Field" value="%%" /></Action></xtml></Component><Component id="FireOnUpdate" type="action.Action" execution="native"/><Component id="OptionsFilter" type="field.FieldAspect" execution="native" category="filter" light="false"><NativeHelper name="Control" t="field.ShowFieldControl" Item="%%" Class="aa_filter_input"><Var name="_OriginalField" value="%$_Field%"/><Var name="_OriginalCntr" value="%$_Cntr%"/><Field t="field.Field1" ID="%$_OriginalField/ID%_filter"><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsFilter" Value="true"/><FieldAspect t="field_aspect.DescriptionForEmptyText"><Description t="text.MultiLang" Pattern="Filter By %$_OriginalField/Title%"/></FieldAspect><FieldAspect t="picklist.ShowOccurrences"/><FieldAspect t="object.RunMethod" Object="%$_OriginalField/FilterAspects%" Method="GetContent" /><FieldAspect t="field_aspect.Picklist" Multiple="true" Options="%$_OriginalField/Options%" AllowEmptyValue="false" AllowValueNotInOptions="false"/><FieldAspect t="field_aspect.OnUpdate"><Action t="field.RefreshFilteredItems" ><Var name="_Field" value="%$_OriginalField%"/></Action></FieldAspect><FieldAspect t="field_aspect.Resizer"/><FieldAspect t="field.CleanFilterButton" Field="%$_OriginalField%"/></Field></NativeHelper></Component><Component id="RefreshFilteredItems" type="action.Action" execution="native"/><Component id="ShowFieldControl" type="ui.Control" execution="native"><Param name="Item" Default="%%" essential="true" /><Param name="Field" type="field.Fields" essential="true"/><Param name="CellTag" ><Default value="div" /></Param></Component><Component id="SuggestionsFromData" type="field.FieldAspect" category="filter" description="The filter is a picklist whose values come from the data" promoted="true"><Param name="TextPattern" script="true" advanced="true" Description="e.g \'\\%\\% children\'"><Default value="%%" /></Param><Param name="Static" type="data.Boolean" advanced="true" /><Param name="IncludeSpace" type="data.Boolean" advanced="true" /><Param name="SupportMultiple" type="data.Boolean" advanced="true" Description="Each row may contain multiple values separated by comma"/><xtml t="object.SetProperty" Object="%$_Field%" Property="SuggestionsFromData"><Value t="object.Object" Static="%$Static%" IncludeSpace="%$IncludeSpace%" SupportMultiple="%$SupportMultiple%"><Method name="TextPattern" t="xtml.UseParam" Param="TextPattern" /></Value></xtml></Component><Component id="TextFilter" type="field.FieldAspect" execution="native" category="filter" light="false"><NativeHelper name="Control" t="field.TextFilterControl" /></Component><Component id="NumberFilter" type="field.FieldAspect" execution="native" category="filter" light="false"><NativeHelper name="Control" t="field.TextFilterControl" ><MoreAspects t="field_aspect.Aspects"><FieldAspect t="picklist.CalcOccurrencesWithFilters" /><FieldAspect t="picklist.ShowOccurrences" SortBy="picklist" /></MoreAspects></NativeHelper></Component><Component id="TextFilterControl" type="ui.Control" hidden="true"><Param name="MoreAspects" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.ShowFieldControl" Item="%%" Class="aa_filter_input"><Var name="_OriginalField" value="%$_Field%"/><Field t="field.Field1" ID="%$_OriginalField/ID%_filter"><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsFilter" Value="true"/><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.DescriptionForEmptyText"><Description t="text.MultiLang" Pattern="Filter By %$_OriginalField/Title%"/></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="field.RefreshFilteredItems"><Var name="_Field" value="%$_OriginalField%"/></Action></FieldAspect><FieldAspect t="picklist.ShowOccurrences"/><FieldAspect t="object.RunMethod" Object="%$_OriginalField/FilterAspects%" Method="GetContent" /><FieldAspect t="field_aspect.Picklist" Multiple="true" AllowValueNotInOptions="true"><Condition t="yesno.NotEmpty" Data="%$_OriginalField/SuggestionsFromData%"/><Options t="picklist.SuggestionsFromData" Static="%$_OriginalField/SuggestionsFromData/Static%" IncludeSpace="%$_OriginalField/SuggestionsFromData/IncludeSpace%" SupportMultiple="%$_OriginalField/SuggestionsFromData/SupportMultiple%"><TextPattern t="object.RunMethod" Method="TextPattern" Object="%$_OriginalField/SuggestionsFromData%" /></Options></FieldAspect><FieldAspect t="field_aspect.Resizer"/><FieldAspect t="field.CleanFilterButton" Field="%$_OriginalField%"/><FieldAspect t="xtml.UseParamArray" Param="MoreAspects" /></Field></xtml></Component><Component id="Field" type="field.Fields" execution="native"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/bullet1616.gif"/><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="FieldData" essential="true" advanced="true"><FieldAspect t="field_aspect.Title" Title="Data" /><FieldAspect t="field_aspect.ChangeFieldID" ID="dt_field_data" /></Param><Param name="ID" advanced="always" essential="true" idField="true"/><Param name="Type" essential="true" type="field_aspect.FieldType" script="true"><Default t="field_aspect.Text"/></Param><Param name="ReadOnlyText" type="data.Boolean" Title="Read Only"/>      <Param name="FieldAspect" essential="true" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="FilterField" type="field.Fields" execution="native"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/bullet1616.gif"/><Param name="Title" essential="true" autoaspects="false" titleField="true" /><Param name="BasedOn" essential="true" description="field id to filter" /><Param name="ID" advanced="always" essential="true"/><Param name="Type" essential="true" type="field_aspect.FieldType" script="true"><Default t="field_type.Text"/></Param><Param name="FieldAspect" essential="true" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="XmlField" type="field.Fields" execution="native"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/bullet1616.gif"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_aspect.AutoUpdateMasterItem" /></Param><Param name="Path" essential="true" advanced="true"><FieldAspect t="field_dt.FieldXPathEditor" /></Param>      <Param name="ID" advanced="always" essential="true"/><Param name="Type" essential="true" type="field_aspect.FieldType" script="true"><Default t="field_aspect.Text"/></Param><Param name="FieldAspect" essential="true" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="PropertySheet" type="field.Fields" image="%$_Images%/studio/pform.gif"><Param name="ID" essential="true" advanced="always"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /></Param><Param name="Style" type="propertysheet.Style" script="true"><Default t="group.PropertySheet"/></Param><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true"/><Param name="CalcFieldsInAdvance" type="data.Boolean" light="false"><Default value="true"/></Param><Param name="GroupData" type="group.GroupData" script="true" essential="false" advanced="true" /><xtml t="field.Group" ID="%$ID%" Title="%$Title%" HideTitle="%$HideTitle%" CalcFieldsInAdvance="%$CalcFieldsInAdvance%"><Layout t="uiaspect.Group"><Style t="xtml.UseParam" Param="Style" /></Layout><Field t="xtml.UseParamArray" Param="Field" /><Aspect t="xtml.UseParamArray" Param="Field" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /><GroupData t="xtml.UseParam" Param="GroupData" /></xtml></Component><Component id="Group" type="field.Fields" execution="native" image="%$_Images%/studio/cube1616.gif"><Param name="ID" essential="true" advanced="always"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /></Param><Param name="Layout" type="uiaspect.DocumentPresentation" script="true"><Default t="uiaspect.PropertySheet"/></Param><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true"/><Param name="CalcFieldsInAdvance" type="data.Boolean" light="false"><Default value="true"/></Param><Param name="GroupData" type="group.GroupData" script="true" essential="false" advanced="true" /><NativeHelper name="using(only for compress)" t="field.XmlField" /></Component><Component id="XmlGroup" type="field.Fields" execution="native" image="%$_Images%/studio/cube1616.gif"><Param name="Title" essential="true"/><Param name="Presentation" type="uiaspect.DocumentPresentation" script="true"><Default t="uiaspect.PropertySheet"/></Param><Param name="Path" essential="false"><FieldAspect t="field_dt.FieldXPathEditor" /></Param><Param name="ID" advanced="always" essential="true"/><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="Operations" type="operation.Operations" script="true" light="false"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true"/><NativeHelper1 name="Aspects" t="uiaspect.Aspects"><Aspect t="xtml.UseParam" Param="Presentation"/><Aspect t="uiaspect.Permissions"><WritableIf t="yesno.Not" Of="%$_ParentCntr/ReadOnly%"/></Aspect><Aspect t="xtml.UseParamArray" Param="Aspect"/><Aspect t="object.SetBooleanProperty" Object="%$_Cntr%" Property="IsVirtualGroup" Value="true" Condition="%$Path% == \'\'"/></NativeHelper1><NativeHelper1 name="Control" t="ui.Document" ID="%$_Cntr/ID%_%$Path%"><Var name="_ParentCntr" value="%$_Cntr/Items%"/><Var name="_ParentItems" value="%$_Cntr/Items%"/><Class value="aa_layoutgroup"><Condition t="yesno.IsEmpty" Value="%$Path%"/></Class><Item t="data_items.Items" Items="%%"><Aspect t="data_items.InnerDataItems" ParentDataItems="%$_ParentItems%"/></Item><Fields t="xtml.UseParamArray" Param="Field"/><Operations t="xtml.UseParam" Param="Operations"/></NativeHelper1></Component><Component id="Button" type="field.Fields" advanceddt="true" execution="native" image="%$_Images%/studio/button.png"><Param name="ID" advanced="always" essential="true" idField="true" /><Param name="Title" titleField="true"/><Param name="Image" type="image.Image"/><Param name="Action" type="operation.OperationAction" script="true" essential="true"><RunningInput t="field_aspect.RunningInputFieldData" /></Param><Param name="Style" type="button.Style" script="true"><Default t="button.PrimaryButton"/></Param><Param name="Tooltip" advanced="true"/><Param name="HideTitle" type="data.Boolean" advanced="true" Default="true"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/><Param name="ButtonText" script="true" advanced="true" description="Button text can be different than the title"/></Component>    <Component id="Button1" type="field.Fields" light="false"><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true"/><Param name="Image"/><Param name="Action" type="operation.OperationAction" script="true" essential="true"/><Param name="ButtonStyle" type="ui.ButtonStyle" script="true"><Default t="ui.StandardButton"/></Param><Param name="ShowTitle" type="data.Boolean"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/><Param name="ButtonText" script="true" advanced="true"/><Param name="IsSelected" type="data.Boolean" script="true" advanced="true"/><Param name="Tooltip" advanced="true"/><xtml t="field.CustomControl" ID="%$ID%" ShowTitle="%$ShowTitle%" Title="%$Title%"><Control t="ui.Button" Image="%$Image%" Tooltip="%$Tooltip%"><Text t="text.FirstSucceeding"><Item t="xtml.UseParam" Param="ButtonText" /><Item value="%$Title%"/></Text><Style t="xtml.UseParam" Param="ButtonStyle"/><IsSelected t="xtml.UseParam" Param="IsSelected"/><OnClick t="operation.RunInOperationContext"><Action t="xtml.UseParam" Param="Action"/></OnClick></Control><FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/></xtml></Component><Component id="ClearAllFilters" type="action.Action" execution="native"/><Component id="Image1" hidden="true" type="field.Fields" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/bmp1616.png" /><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true"/><Param name="ShowTitle" type="data.Boolean"/><Param name="Image" script="true" /><Param name="Height" /><Param name="Width" /><Param name="KeepImageProportions" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.XmlField" ID="%$ID%" Title="%$Title%" Path=""><FieldAspect t="field_aspect.HideTitle"><Condition t="yesno.Not" Of="%$ShowTitle%" /></FieldAspect><FieldAspect t="field_aspect.ImageReadOnlyImp" Height="%$Height%" Width="%$Width%" KeepImageProportions="%$KeepImageProportions%"><Src t="xtml.UseParam" Param="Image" /></FieldAspect><FieldAspect t="field_aspect.ReadOnly" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="Image" type="field.Fields" advanceddt="true" image="%$_Images%/studio/bmp1616.png"><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /></Param><Param name="Image" type="image.Image" script="true"/><Param name="Style" type="image.Style"><Default t="image.PlainImage" /></Param><Param name="HideTitle" boolfeature="true" type="data.Boolean"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.Control" ID="%$ID%" Title="%$Title%" HideTitle="%$HideTitle%"><Control t="field_control.Image" Style="%$Style%"><Image t="xtml.UseParam" Param="Image" /></Control><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="Text" type="field.Fields" execution="native" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/text.png" /><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true" titleField="true" /><Param name="Text" script="true"><ContextMenu t="xtml_dt.EditAsRichText" /></Param><Param name="Style" type="uitext.Style"><Default t="uitext.PlainText" /></Param><Param name="HideTitle" type="data.Boolean" boolfeature="true"><Default value="true"/></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /></Component><Component id="Text1" type="field.Fields"><Aspect t="component_aspect.Image" Image="%$_Images%/studio/text.png" /><Param name="Text" script="true"><ContextMenu t="xtml_dt.EditAsRichText" /></Param><Param name="CssStyle" /><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true"/><Param name="ShowTitle" type="data.Boolean"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.Field1" ID="%$ID%" Title="%$Title%"><FieldAspect t="field_aspect.HideTitle"><Condition t="yesno.Not" Of="%$ShowTitle%" /></FieldAspect><FieldAspect t="field_aspect.TextSummary"><Text t="xtml.UseAndTranslateParam" Param="Text" /></FieldAspect><FieldAspect t="field_aspect.Css" OnElement="content" Inline="%$CssStyle%" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="XmlMultipleGroup" type="field.Fields" execution="native" image="%$_Images%/studio/books.gif"><Param name="ID" advanced="always" essential="true"/><Param name="Items" type="field.MultipleGroupData" /><Param name="Path" light="false" essential="true" advanced="true"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /></Param><Param name="TitleForSingle" essential="true"/><Param name="Field" type="field.Fields[]" script="true" light="false" essential="true"/><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true" /><Param name="Operations" type="operation.Operations" light="false" script="true" /><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false" /><NativeHelper name="Items" t="object.RunMethod" Method="Items"><Object t="data.FirstSucceeding"><Item value="%$Items%" /><Item t="field.InnerItems" Path="%$Path%" /></Object></NativeHelper><NativeHelper name="Control" t="ui.ItemList" ID="%$_Cntr/ID%_%$Path%" DataHolderCntr="true"><Var name="_ParentCntr" value="%$_Cntr%" /><Items t="object.RunMethod" Object="%$_Field%" Method="InnerItems"/><Fields t="xtml.UseParamArray" Param="Field" /><Operations t="xtml.UseParam" Param="Operations" /><Presentation t="xtml.UseParam" Param="Presentation" /><Aspect t="uiaspect.Permissions" WritableIf="false" Condition="%$_ParentCntr/ReadOnly%" /><Aspect t="xtml.UseParamArray" Param="Aspect" /></NativeHelper></Component><Component id="XtmlControl" type="field.Fields" execution="native" advanceddt="true"><Param name="ID" advanced="always" essential="true"/><Param name="Title"/><Param name="Control" type="ui.Control" script="true" essential="true" RunningInput="%$_Items/Items%"/><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/></Component><Component id="CustomItems" type="field.MultipleGroupData"><Param name="Items" script="true"/><Param name="AddNewItem" type="data_items.DataItemsNewItem" script="true"/><xtml t="object.Object"><Method name="ContainerData" value="%%" /><Method name="Items" t="data_items.Items"><Items t="xtml.UseParam" Param="Items" /><Aspect t="xtml.UseParam" Param="AddNewItem" /></Method></xtml></Component><Component id="CustomDataItems" type="field.MultipleGroupData" light="false" description="an adapter between data items and multiple group data"><Param name="DataItems" script="true" type="data_items.Items"/><xtml t="object.Object"><Method name="ContainerData" value="%%" /><Method name="Items" t="xtml.UseParam" Param="DataItems" /></xtml></Component><Component id="SimpleXmlFields" type="field.Fields" execution="native"><Param name="Paths" essential="true"/></Component><Component id="Fields" type="field.Fields" execution="native" dtsupport="false"><Param name="Field" type="field.Fields[]" script="true" essential="true"/></Component><Component id="DynamicFields" type="field.Fields" execution="native" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/enum.gif" /><Param name="Fields" essential="true"/><Param name="ID" script="true" essential="true"/><Param name="Title" script="true" essential="true"/><Param name="FieldTitle" script="true" essential="true"/><Param name="FieldData" script="true" paramVar="_FieldDefinition" description="E.g. %$_FieldDefinition%"><Default value="%%" /></Param><Param name="Control" type="ui.Control" script="true" paramVar="FieldDefinition"><Default t="field.ShowFieldControl"><Field t="field.Field" FieldData="%%"><Type t="field_aspect.Text" /></Field></Default></Param><Param name="FieldAspect" type="field.FieldAspect[]" script="true" paramVar="FieldDefinition" light="false" essential="true"/></Component><Component id="FieldsByItems" type="field.Fields"><Param name="Items" /><Param name="Field" type="field.Fields" script="true" /><xtml t="data.Pipeline"><Item value="%$Items%" /><Item t="xtml.UseParam" Param="Field" /></xtml></Component><Component id="TitleField" type="field.Fields" execution="native"><Param name="Field" type="field.Fields" Description="Do not use Control!"><Default t="field.Field1" Title="Title" /></Param><Param name="FieldAspect" type="field.FieldAspect[]" script="true" /></Component><Component id="JavaScriptControl" type="field.Fields" execution="native" advanceddt="true"><Param name="ID" advanced="always" essential="true"/><Param name="Title" titleField="true"/><Param name="Html" essential="false" codemirror="true" /><Param name="JavaScript" essential="true" codemirror="true" ><Default value="function(data,html_elem,context) {&#xa;  &#xa;}"/></Param><Param name="Css" essential="false" codemirror="true" /><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/></Component>     <Component id="OpenButton" type="field.Fields" advanceddt="true"><Aspect t="component_aspect.Image" Image="%$_Images%/edit1616.gif"/><Param name="ID" advanced="always" /><Param name="Title" /><Param name="Image"><Default value="%$_Images%/edit1616.gif"/></Param><Param name="ExpandCollapseImages" type="data.Boolean"><Default value="false"/></Param><Param name="ButtonStyle" type="ui.ButtonStyle" script="true"><Default t="ui.ButtonAsImage"/></Param><Param name="Text" script="true" advanced="true"><Default t="operation.TextOfOpen" /></Param><Param name="ImageForExpand"><Default value="%$_Images%/expand-down.gif"/></Param><Param name="ImageForCollapse"><Default value="%$_Images%/collapse-up.gif"/></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true"/><xtml t="field.CustomControl" ID="%$ID%" Title="%$Title%"><Control t="ui.Section" Class="aa_open_button"><Control t="ui.Button"><Image t="data.IfThenElse" If="%$ExpandCollapseImages%" Else="%$Image%"><Then t="data.IfThenElse" If="%$InplaceIsOpen%" Then="%$ImageForCollapse%" Else="%$ImageForExpand%" /></Image><Text t="xtml.UseParam" Param="ButtonText" /><Style t="xtml.UseParam" Param="ButtonStyle" /><OnClick t="operation.RunInOperationContext"><Action t="operation.Open" /></OnClick></Control></Control><FieldAspect t="field_aspect.HideInProperties" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect"/></xtml></Component><Component id="FieldTitle" type="data.Data" execution="native"><Param name="Field" type="data.Data" essential="true"><Default value="%$_Field%" /></Param></Component><Component id="SetDefaults" type="action.Action" execution="native"><Param name="Fields" type="data.Data" essential="true"/></Component><Component id="SetRecalcOnSave" type="action.Action" execution="native"><Param name="Fields" type="data.Data" essential="true"/></Component><Component id="RefreshField" type="action.Action,operation.OperationAction" execution="native"><Param name="FieldID" essential="true"/><Param name="Scope" type="enum" Options="group,table row,document,screen,parent" Default="screen"/><Param name="Transition" type="transition.Transition" /><Param name="FireOnUpdate" type="data.Boolean" /></Component><Component id="RefreshDependentFields" type="action.Action" execution="native"><Param name="Input" /></Component><Component id="IsGroup" type="data.Boolean" execution="native"/><Component id="FieldCellAndToolbar" type="ui.Control"><Param name="CellData" Default="%%"/><xtml t="ui.List"><Control value="%$_Control%" /><Control t="ui.DynamicList" Items="%$_Field/Toolbar%" ><Var name="_ItemsOfOperation" value="%%" /><Control t="ui.Button" Class="%Id%"><Image t="object.RunMethod" Method="Icon" Input="%$_ItemsOfOperation%" /><Text t="object.RunMethod" Method="Title" Input="%$_ItemsOfOperation%" /><OnClick t="object.RunMethod" Method="Action" Input="%$_ItemsOfOperation%"><Var1 name="_ItemsOfOperation" t="uiaspect.SelectedItem" /></OnClick><Style t="ui.ButtonAsImage" /></Control><Layout t="ui.ButtonsLayout" /></Control><Layout t="ui.Horizontal" /></xtml></Component><Component id="SubFields" type="data.Data" execution="native"><Param name="Parent" /></Component><Type id="SortLine"/><Component id="FilterSection" type="field.Fields" advanceddt="true" image="%$_Images%/studio/filter.png"><Param name="ID" advanced="always" essential="true"/><Param name="Title" essential="true" autoaspects="false"><FieldAspect t="field_aspect.FieldData" FieldData="%!@Title%"/><FieldAspect t="field_dt.TitleField" /></Param><Param name="Layout" type="uiaspect.DocumentPresentation" script="true"><Default t="uiaspect.Horizontal"/></Param><Param name="Location" type="enum" Options="header,footer"><Default value="header" /></Param><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true"/><xtml t="field.Group" ID="%$ID%" Title="%$Title%" HideTitle="%$HideTitle%" CalcFieldsInAdvance="false"><GroupData t="group.FilterQueryXml" /><Layout t="xtml.UseParam" Param="Layout" /><Field t="xtml.UseParamArray" Param="Field" /><Aspect t="xtml.UseParamArray" Param="Aspect" /><FieldAspect t="field_aspect.Writable" /><FieldAspect t="field_aspect.HeaderFooterField" Location="%$Location%" RefreshStrategy="none"/><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="SortBox" type="field.Fields" advanceddt="true" execution="native" ><Param name="ID" advanced="always"/><Param name="Title" /><Param name="Sorter" type="field.SortLine[]" /><Param name="FieldAspect" type="field.FieldAspect[]" script="true" /><NativeHelper name="Field" t="field.Field1" ID="%$ID%" Title="%$Title%"><FieldAspect t="field_aspect.FieldData"><FieldData t="data.WritableText" DefaultValue="%$_CurrentSort%" /></FieldAspect><FieldAspect t="picklist.Picklist" AllowEmptyValue="false"><Options t="picklist.DynamicOptions" OptionLabel="%Label%" OptionCode="%Label%"><Options t="xtml.UseParamArray" Param="Sorter"/></Options></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="object.RunMethod" Object="%$_Field%" Method="SortOfSortBox" Input="%%" /></FieldAspect><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></NativeHelper></Component><Component id="SortLine" type="field.SortLine" ><Param name="Label" /><Param name="SortBy" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="SortDirection" type="enum" Options="ascending,descending"><Default value="descending"/></Param><xtml t="object.Object" Label="%$Label%" SortBy="%$SortBy%" SortDirection="%$SortDirection%"/></Component><Component id="AddFieldsHere" ><Param name="Text" light="false" Default="Add Fields here ..."/><xtml t="field.Text" Text="%$Text%"><FieldAspect t="field_aspect.Css" Class="add_fields_here" Inline="display:none;"/></xtml></Component><Component id="Layout" type="field.Fields" execution="native" image="%$_Images%/studio/cube1616.gif"><Param name="ID" advanced="always" idField="true" /><Param name="Title" titleField="true" /><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="HideTitle" type="data.Boolean" boolfeature="true" /><Param name="Layout" type="layout.Style" script="true"><Default t="layout.Default" /></Param></Component><Component id="TabControl" type="field.Fields" execution="native" gallery="TabControl" image="%$_Images%/studio/tab1616.png"><Param name="ID" advanced="always" /><Param name="Title" fieldTitle="true" /><Param name="Field" type="field.Fields[]" light="false" script="true" essential="true"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" light="false"/><Param name="Style" type="tabcontrol.Style" script="true"><Default t="tabcontrol.BlueTabs" /></Param><Param name="OnTabChange" type="operation.OperationAction" script="true" description="Event fired when selecting a tab. Can use $PrevTab and $NewTab" advanced="true"/><Param name="RefreshTabsOnSelect" type="data.Boolean" Default="true" advanced="true"/><Param1 name="KeepSelectedTab" type="uiaspect_config.ConfigurationStorage" advanced="true"><Default t="uiaspect_config.InUrlFragment" /></Param1></Component><Component id="IsTabSelected" type="data.Boolean" execution="native"><Param name="TabControl" essential="true" description="Put tab control field id here"/><Param name="Tab" essential="true" /></Component><Component id="RefreshTabsHead" type="action.Action,operation.OperationAction,uiaction.UsageAction" Description="Refresh tabs visibility and number indication" execution="native"><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param></Component></xtml><xtml ns="field_control" jbart="true"><Component id="Image" type="field.Fields" advanceddt="true" image="%$_Images%/studio/bmp1616.png" execution="native"><Param name="Image" type="image.Image" /><Param name="Style" type="image.Style"><Default t="image.PlainImage" /></Param></Component><Component id="CustomControl" type="field.Control" execution="native"><Param name="Html" codemirror="true" Default="&lt;div/&gt;"/><Param name="Css" codemirror="true" Default="{}"/><Param name="Javascript" codemirror="true"><Default value="function(html_elem,context) { } " /></Param><NativeHelper name="StyleObject" t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></NativeHelper></Component><Component id="CustomXtmlControl" type="field.Control" execution="native" customAAEditor="true"><Param name="Control" type="ui.Control" script="true" light="false"/></Component></xtml></xtml><xtml package="true"><xtml jbart="true" ns="field_aspect"><Component id="ModifyControl" type="field.FieldAspect" execution="native" category="control" light="false"><Param name="Action" type="ui.Action" script="true" paramVars="Cell,Input,FieldData" essential="true" /></Component><Component id="Toolbar" type="field.FieldAspect" execution="native" light="false" category="toolbar"><Param name="Operations" type="operation.Operations" script="true" essential="true" /><Param name="RefreshOnUpdate" type="data.Boolean"><Default value="true"/></Param><Param name="MinWidth" descrription="Min width of the toolbar. Used to prevent flickering" /><Param name="Css" advanced="true" css="true"><Default><![CDATA[      .aa_field_toolbar { vertical-align: top; } #this .aa_field_toolbar_image { margin: 4px 0 0 3px; vertical-align: top; display: inline-block; width:16px; height:16px; cursor: pointer;}.right2left #this .aa_field_toolbar_image { margin-right: 3px; }      ]]></Default></Param></Component><Component id="PopupContentsLayout" type="field.FieldAspect" category="searchbox" hidden="true"><Param name="Layout" type="field.PopupPage" script="true"><Default t="uiaspect.SearchLayout" /></Param><xtml t="object.SetMethod" Object="%$_Field%" Method="PopupPage"><Xtml t="xtml.UseParam" Param="Layout" /></xtml></Component><Component id="PopupPage1" type="field.FieldAspect" category="searchbox" hidden="true"><Param name="Page" type="field.PopupPage" script="true"><Default t="uiaspect.SearchLayout" /></Param><xtml t="object.SetMethod" Object="%$_Field%" Method="PopupPage"><Xtml t="xtml.UseParam" Param="Page" /></xtml></Component><Component id="PopupPage" type="field.FieldAspect" category="searchbox"><Param name="Group" type="field.Fields" script="true"><Default t="field.XmlMultipleGroup" Title="Search Results"/></Param><xtml t="object.SetMethod" Object="%$_Field%" Method="PopupPage"><Xtml t="xtml.UseParam" Param="Group" /></xtml></Component><Component id="SectionExpandCollapse" type="field.FieldAspect" category="ui" light="false"><Param name="ExpandedByDefault" type="data.Boolean"><Default value="true"/></Param><Param name="TitleWhenCollapsed"/><Param name="ExpandCollapseButtonIcons" type="field_aspect.ExpandCollapseIcons"/><Param name="OnBeforeExpandCollapse" type="operation.OperationAction"/><Param name="OnAfterExpandCollapse" type="operation.OperationAction"/><Param name="TitleBelowContent" type="data.Boolean"/><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Field%" Property="SectionExpandCollapse" Value="true"/><Action t="object.SetProperty" Object="%$_Field%" Property="SectionExpandedByDefault" Value="%$ExpandedByDefault%"/><Action t="object.SetProperty" Object="%$_Field%" Property="TitleWhenCollapsed" Value="%$TitleWhenCollapsed%"/><Action t="object.SetProperty" Object="%$_Field%" Property="ExpandCollapseButtonIcons" Value="%$ExpandCollapseButtonIcons%"/><Action t="object.SetProperty" Object="%$_Field%" Property="TitleBelowContent" Value="%$TitleBelowContent%"/><Action t="object.SetMethod" Object="%$_Field%" Method="TitleWhenCollapsed"><Xtml t="xtml.UseParam" Param="TitleWhenCollapsed"/></Action><Action t="object.SetMethod" Object="%$_Field%" Method="OnBeforeExpandCollapse"><Xtml t="xtml.UseParam" Param="OnBeforeExpandCollapse"/></Action><Action t="object.SetMethod" Object="%$_Field%" Method="OnAfterExpandCollapse"><Xtml t="xtml.UseParam" Param="OnAfterExpandCollapse"/></Action></xtml></Component><Component id="SimpleInput" type="field.FieldAspect" execution="native" light="false" /><Component id="WritableControl" type="field.FieldAspect" execution="native" category="control" light="false"><Param name="Control" type="ui.Control" essential="true" /></Component><Component id="Control" type="field.FieldAspect" execution="native" category="control" light="false"><Param name="Control" type="ui.Control" essential="true" /></Component><Component id="ReadOnlyControl" type="field.FieldAspect" execution="native" category="control" light="false"><Param name="Control" type="ui.Control" essential="true" /></Component><Component id="Aspects" type="field.FieldAspect" light="false"><Param name="FieldAspect" type="field.FieldAspect[]" script="true" essential="true" /><xtml t="xtml.UseParamArray" Param="FieldAspect" /></Component><Component id="FieldAspects" type="field.FieldAspect" light="false"><Param name="FieldAspect" type="field.FieldAspect[]" script="true" essential="true" /><xtml t="xtml.UseParamArray" Param="FieldAspect" /></Component><Component id="CellPresentation" type="field.FieldAspect" execution="native"><Param name="Content" type="enum" essential="true" ><Default value="text" /><value>text</value><value>expandable text</value><value>control</value></Param></Component><Component id="Css" type="field.FieldAspect" promoted="false" light="false" execution="native" gallery="Css" description="Change the style. E.g., color, background, font, underline, bold, padding, border, gradient, margin, align, rtl direction"><Param name="Inline" script="true" essential="true" advanced="false"><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="field_aspect.Css" ParamName="Inline"/><FieldAspect t="field_aspect.HideTitle"/></Param><Param name="OnCondition" script="true" type="data.Boolean" description="e.g. %% &gt; 20" advanced="true"/><Param name="OnElement" type="enum" Options="cell,content,title" advanced="true"><Default value="content"/></Param><Param name="Class" script="true" essential="true" advanced="true"/></Component><Component id="FontAndText" type="field.FieldAspect" description="Set font and text using css, e.g., color, background color, font-size, weight, align, transform, font-family, decoration, italic, underline, bold, and font shadow"><Param name="Inline" light="false" remark="the resulting css"/><Param name="DesignTimeWidget" ><Field t="css_dt.FontAndText" Xtml="%$Xtml%"/></Param><Param name="OnElement" type="enum" Options="cell,content,title" advanced="true" Default="content" /><xtml t="field_aspect.Css" Inline="%$Inline%" OnElement="%$OnElement%"/></Component><Component id="SizePaddingsAndMargins" type="field.FieldAspect" description="Set position, width, height, padding, and margin using css"><Param name="Inline" light="false" remark="the resulting css" /><Param name="DesignTimeWidget"><Field t="field.CustomControl"><Control t="field.ShowFieldControl"><Field t="css_dt.Size" /><Var name="Script" value="%$Xtml%" /><Var name="HtmlCssJs" value="%$Script%" /><Data t="css_dt.ParseCssDeclaration" Css="%$Xtml/@Inline%" /></Control></Field></Param><Param name="OnElement" type="enum" Options="cell,content,title" advanced="true" Default="content" /><xtml t="field_aspect.Css" Inline="%$Inline%" OnElement="%$OnElement%"/></Component><Component id="BorderAndShadow" type="field.FieldAspect" description="Set border style, size, radius, color, shadow, blur, and spread via css"><Param name="Inline" light="false" remark="the resulting css" /><Param name="DesignTimeWidget"><Field t="field.CustomControl"><Control t="field.ShowFieldControl"><Field t="css_dt.Effects" /><Var name="Script" value="%$Xtml%" /><Var name="HtmlCssJs" value="%$Script%" /><Data t="css_dt.ParseCssDeclaration" Css="%$Xtml/@Inline%" /></Control></Field></Param><Param name="OnElement" type="enum" Options="cell,content,title" advanced="true" Default="content" /><xtml t="field_aspect.Css" Inline="%$Inline%" OnElement="%$OnElement%"/></Component><Component id="GlobalCss" type="field.FieldAspect" execution="native" gallery="GlobalCss" description="Allows non inline css. Element id is given as well" promoted="false"><Param name="GlobalCss" css="true"><FieldAspect t="field_aspect.HideTitle" /></Param><Param name="OnCondition" script="true" type="data.Boolean" description="e.g. %% &gt; 20"/></Component><Component id="CssOnCondition" type="field.FieldAspect" execution="native" promoted="true" description="Allows different styling for different items"><Param name="Css" css="true"><FieldAspect t="field_aspect.HideTitle" /><Default><![CDATA[#this {}#wrapper {}]]></Default></Param><Param name="OnCondition" script="true" type="data.Boolean.promoted"><Default t="yesno.Expression" /></Param></Component><Component id="DynamicCss" type="field.FieldAspect" execution="native" light="false" description="Allows using css values based on the field data"><Param name="Css" css="true"><FieldAspect t="field_aspect.HideTitle" /></Param><Param name="OnCondition" script="true" type="data.Boolean" description="e.g. %% &gt; 20"/></Component><Component id="DescriptionForEmptyText" type="field.FieldAspect" category="textbox" description="Description text inside the textbox (in italic) which clears away on editing" execution="native"><Param name="Description" essential="true" /><Param name="Css" css="true" advanced="true" Default="#this { font-style:italic; color: #8B8B8B; }" /></Component><Component id="FieldData" type="field.FieldAspect" execution="native" description="Determines the data binding of the field item"><Param name="FieldData" script="true" essential="true" /></Component><Component id="HoverCssClass" type="field.FieldAspect" execution="native" category="ui" light="false"/><Component id="Image" type="field_aspect.FieldType" gallery="Image"><Param name="Width"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="Height"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="Src" script="true" advanced="true"><Default value="%%" /><RunningInput t="field_aspect.RunningInputFieldData" /></Param><Param name="HideEmptyImage" type="data.Boolean" advanced="true"><Default value="true" /></Param><Param name="KeepImageProportions" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="PreviewHeight" advanced="true"><Default value="30px" /></Param><Param name="EditDirectly" type="data.Boolean" advanced="true" /><Param name="TextForMissingImageInEdit" advanced="true"><Default value="edit ..." /></Param><Param name="UrlForMissingImage" advanced="true" /><Param name="TextForMissingImage" advanced="true" /><Param name="TextForEmptyImageEditing" advanced="true"><Default value="enter image url" /></Param><Param name="OnClick" type="operation.OperationAction" script="true" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.WritableControl"><Control t="field.ShowFieldControl" Item="%%"><Field t="field.Field1" ID="Image"><FieldAspect t="field_aspect.CellPresentation" Content="expandable text"><Condition t="yesno.Not" Of="%$EditDirectly%" /></FieldAspect><FieldAspect t="field_aspect.ImageReadOnlyImp" Height="%$Height%"              Width="%$Width%" UrlForMissingImage="%$UrlForMissingImage%" KeepImageProportions="%$KeepImageProportions%"              TextForMissingImage="%$TextForMissingImageInEdit%"><Src t="xtml.UseParam" Param="Src" /></FieldAspect><FieldAspect t="field_aspect.Control"><Control t="ui.List" Class="img_ctrl"><Control t="field.ShowFieldControl" Item="%%"><Field t="field.Field1" ID="Image"><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field_aspect.DescriptionForEmptyText"                      Description="%$TextForEmptyImageEditing%" /><FieldAspect t="field_aspect.OnUpdate"><Action t="uiaction.Refresh" RunOn="updown(.img_ctrl,.img)" /></FieldAspect><FieldAspect t="field_aspect.Resizer" /></Field></Control><Control t="ui.List" Class="img"><Control t="ui.Image" Source="%%" Height="%$PreviewHeight%"><Condition t="yesno.NotEmpty" Value="%%" /><OnClick t="dialog.OpenDialog"><Dialog t="dialog.Dialog" Buttons="Close"><Content t="ui.Image" Source="%%" /></Dialog></OnClick></Control></Control><Layout t="ui.Horizontal" VerticalAlign="middle" /></Control></FieldAspect></Field></Control></FieldAspect><FieldAspect t="field_aspect.ImageReadOnlyImp" Height="%$Height%" KeepImageProportions="%$KeepImageProportions%"        Width="%$Width%" UrlForMissingImage="%$UrlForMissingImage%"        TextForMissingImage="%$TextForMissingImage%" HideEmptyImage="%$HideEmptyImage%"><Src t="xtml.UseParam" Param="Src" /><OnClick t="xtml.UseParam" Param="OnClick" /></FieldAspect></xtml></Component><Component id="ImageReadOnlyImp" type="field.FieldAspect" execution="native" hidden="true"><Param name="Width" advanced="true" /><Param name="Height" advanced="true" /><Param name="KeepImageProportions" type="data.Boolean"/><Param name="UrlForMissingImage" advanced="true" /><Param name="TextForMissingImage" advanced="true" /><Param name="Src" /><Param name="HideEmptyImage" type="data.Boolean" /><Param name="OnClick" type="operation.OperationAction" script="true" /></Component><Component id="OnUpdate" type="field.FieldAspect" hidden="true" category="advanced" execution="native"><Param name="Action" type="operation.OperationAction" script="true" essential="true" /><Param name="ID" description="If set, will run only once of the same id" advanced="true" /><Param name="Phase" description="Can be used to control the activation order of the event handlers" advanced="true"/></Component><Component id="Picklist" type="field.FieldAspect" execution="native" light="false" databind="false"><Param name="Options" type="picklist.OptionsDefinition" essential="true"/><Param name="AllowEmptyValue" type="data.Boolean"/><Param name="AllowValueNotInOptions" type="data.Boolean"/><Param name="RecalculateForEachCell" type="data.Boolean"/><Param name="Multiple" type="data.Boolean"/><Param name="PickTreePathSeparator" advanced="true" description="Used to distinguish between tree options that have the same name"/><Param name="ControlStyle" type="picklist.ControlStyle"><Default t="picklist.JBartPicklist" /></Param></Component><Component id="PopupImage" type="field.FieldAspect" category="picklist,ui" execution="native"><Param name="Css"><Default value="#this { vertical-align:top; padding:2px 0 0 14px; margin:3px 0 0 -19px; display: inline-block; height:17px; background: url(%$_Images%/./openpopup_xp_style.gif) no-repeat 0 0; } .right2left #this { margin-right:-18px; margin-left:0px } .aa_hover #this {background-position:0 -19px ;}"/></Param></Component><Component id="SearchPopupImage" type="field.FieldAspect" category="picklist,ui"><Param name="Css"><Default value="#this { padding:0 0 0 14px; margin-left:-18px; display: inline-block; line-height:17px; height:17px;	background: url(%$_Images%/./search1616.png) no-repeat 0 0; } .right2left #this { margin-right:-18px; margin-left:0; }"/></Param><xtml t="field_aspect.PopupImage" Css="%$Css%" /></Component><Component id="Resizer" type="field.FieldAspect" category1="textbox" execution="native" description="Adds or removes a textbox width resizer on its right side"><Param name="Disable" type="data.Boolean"/><Param name="RememberLastWidth" type="data.Boolean" Default="true" /></Component><Component id="Section" type="field.FieldAspect" category="group" description="Adds a visual section style to the group (e.g. collapse section, box, header title)"><Param name="Image" type="image.Image" /><Param name="Style" type="section.Style"><Default t="section.Default" /></Param><Param name="HideTitle" type="data.Boolean" light="false"/><Param name="CollapsedByDefault" type="data.Boolean" /><xtml t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="AsSection" Value="true" /><Action t="object.SetProperty" Object="%$_Field%" Property="SectionImage" Value="%$Image%" IsSingleProperty="true"/><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="SectionCollapsedByDefault" Value="%$CollapsedByDefault%" /><Action t="object.SetProperty" Object="%$_Field%" Property="SectionStyle" Value="%$Style%" IsSingleProperty="true"/><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="HideTitle" Value="true" Condition="%$HideTitle%" /></xtml></Component><Component id="Text" type="field_aspect.FieldType" light="false"><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><Param name="HideTitle" type="data.Boolean" boolfeature="true" /><Param name="ReadOnly" type="data.Boolean" boolfeature="true" /><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="field_aspect.HideTitle" Condition="%$HideTitle%" /><FieldAspect t="field_aspect.ReadOnly" Condition="%$ReadOnly%" /><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field.TextFilter" /><FieldAspect t="field_aspect.Resizer" /></xtml></Component><Component id="TitleDependsOnItems" type="field.FieldAspect" category="ui" hidden="true"><Param name="Title" script="true" essential="true" /><Param name="DataItems" essential="true" /><xtml t="action.RunActions"><Action t="object.SetMethod" Object="%$_Field%" Method="CalculateTitle"><Xtml t="xtml.UseParam" Param="Title" /></Action><Action t="object.SetProperty" Object="%$_Field%" Property="TitleDependsOnItems" IsSingleProperty="true" Value="%$DataItems%" /></xtml></Component><Component id="Popup" type="field.field_aspect"><Param name="PopupContents" type="ui.Control" script="true" essential="true" /><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultPicklist" /></Param><Param name="DialogFeature" type="dlg.DialogFeature[]" script="true"/><Param1 name="PopupCssClass" script="true" /><Param1 name="Picklist" type="data.Boolean" /><Param1 name="ShowCloseButton" type="data.Boolean" /><Param name="OpenInPreview" type="data.Boolean" /><xtml t="field_aspect.Aspects"><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="PopupContents"><Xtml t="xtml.UseParam" Param="PopupContents"><Var name="_PopupField" value="%$_Field%" /></Xtml></FieldAspect><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="OpenPopup"><Xtml t="dlg.OpenDialog" Title="" Style="%$Style%" LauncherElement="%$_Input%"><Contents t="xtml.UseParam" Param="PopupContents"><Var name="_PopupField" value="%$_Field%" /></Contents><Feature t="xtml.UseParamArray" Param="DialogFeature"/></Xtml><Xtml1 t="dialog.TogglePopup" ShowCloseButton="%$ShowCloseButton%" OnElement="%$_Input%" Picklist="%$Picklist%" WidthOption="%$_Field/PopupWidthOption%" Style="%$_Field/PopupStyle%"><Var name="_PopupField" value="%$_Field%" /><PopupCssClass t="xtml.UseParam" Param="PopupCssClass" /><Contents t="xtml.UseParam" Param="PopupContents" /></Xtml1></FieldAspect><FieldAspect t="field_aspect.Css" Class="aa_withpopup" Condition="%$OpenInPreview%" OnElement="content" /></xtml></Component></xtml><xtml jbart="true" ns="operation"><Component id="RunJavascript" type="operation.OperationAction" execution="native" gallery="RunJavaScript"><Param name="Code"><Default value="function(data,html_elem,context) {&#xa; &#xa;}"/><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="operation.RunJavascript" ParamName="Code" Type="js" Height="100px" /></Param></Component><Component id="TextOfOpen" type="data.Data"><Param name="TextForReadOnly"><Default value="Open" /></Param><Param name="TextForEdit"><Default value="Edit" /></Param><Param name="TextForInplaceClose"><Default value="Close" /></Param><xtml t="data.FirstSucceeding"><Item value="%$TextForInplaceClose%"><Condition t="ui.HasClass" Data="%$_ElemsOfOperation%" Cls="aa_details_open" /></Item><Item value="%$TextForReadOnly%" Condition="%$_Cntr/ReadOnly%" /><Item value="%$TextForEdit%" /></xtml></Component><Component id="Link" type="operation.OperationAction"><Param name="Link" /><Param name="OpenInANewTab" type="data.Boolean"><Default value="true"/><FieldAspect t="field_aspect.Title" Title="Open in a new tab" /></Param><xtml t="uiaction.GoToPage" Url="%$Link%"><Type t="data.IfThenElse" If="%$OpenInANewTab%" Then="open in a new tab" Else="navigate current page" /></xtml></Component><Component id="SaveVisualOrder" type="operation.OperationAction" execution="native"></Component><Component id="Open" type="operation.OperationAction"><Aspect t="operation.GenerateOperationFullXtml"><OperationXtml t="xml.Xml" ><Operation t="operation.Operation" ID="edit" Icon="%$_Images%/edit1616.gif" Target="item"><Title t="operation.TextOfOpen" /><Action t="operation.Open" /></Operation></OperationXtml></Aspect><Param name="Item" advanced="true"><Default value="%$_ItemsOfOperation%"/></Param>><xtml t="object.RunMethod" Object="%$_Cntr%" Method="OpenItemDetails"><Var name="IsNewItem" value="false"/><Var name="_OperationID" value="OpenItemDetails" /><Var name="_InnerItem" value="%$Item%" /></xtml></Component><Component id="ContainerOperations" type="operation.MenuAspect" execution="native"><Param name="Target" type="enum"><Default value="all"/><value>new</value><value>items</value><value>all</value></Param><Param name="IncludeInnerContainers" type="data.Boolean"><Default value="true"/></Param></Component><Component id="Menu" type="Operation.Menu" execution="native"><Param name="MenuAspect" type="operation.MenuAspect[]" script="true"/><Param name="Operations" type="operation.Operations"/><NativeHelper name="Control" t="ui.List"><Class t="data.IfThenElse" If="%=Count($_Menu/Items)% == 0" Then="" Else="aa_toolbar"/><Control t="ui.DynamicList" Items="%$_Menu/Items%"><Control t="ui.Button" Class="aa_operation %Id%"><Image t="object.RunMethod" Method="Icon" Input="%$_ItemsOfOperation%"/><Text t="object.RunMethod" Method="Title" Input="%$_ItemsOfOperation%" /><OnClick t="object.RunMethod" Method="Action" Input="%$_ItemsOfOperation%"/><Style t="object.RunMethod" Object="%$_Menu%" Method="Presentation"/></Control><Layout t="ui.ButtonsLayout"/></Control></NativeHelper></Component><Component id="Operation" type="operation.Operations" execution="native"><Param name="ID" advanced="always" essential="true"/><Param name="Title" summary="false" script="true" essential="true" /><Param name="CssClass" summary="false" advanced="true" script="true"/><Param name="Icon" summary="false" script="true" /><Param name="Disabled" type="data.Boolean" script="true" /><Param name="Action" type="operation.OperationAction" script="true" essential="true" RunningInput="%$_Items/Items%" /><Param name="Aspect" type="operation_aspect.Aspect" script="true" advanced="true"/><Param name="Shortcut" summary="false" advanced="true"/><Param name="WritableOnly" type="data.Boolean" advanced="true" /><Param name="Target" summary="false" type="enum" Options="item,items,new"><Default value="item"/></Param></Component><Component id="OperationFromCntr" type="operation.Operations" execution="native" hidden="true"><Param name="ID" /></Component><Component id="Operations" type="operation.Operations" execution="native" light="false" dtsupport="false"><Param name="Operation" type="operation.Operations[]" script="true" essential="true" /></Component><Component id="RemoveDisabled" type="operation.MenuAspect" execution="native"/><Component id="RunXtmlAction" type="operation.OperationAction" customAAEditor="true"><Param name="Action" type="action.Action" script="true" essential="true" light1="false"/><Param name="Comment" /><xtml t="xtml.UseParam" Param="Action"/></Component><Component id="ClearAllFilters" type="operation.OperationAction"><xtml t="field.ClearAllFilters"/></Component><Component id="RunOperationAction" type="action.Action" execution="native"><Param name="Action" type="operation.OperationAction" script="true" essential="true"/><Param name="GuessDataFromControl" type="data.Boolean" Default="true" description="look up for to the first item, and set it to the data of the operation"/></Component><Component id="OpenDialog" type="operation.OperationAction"><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultDialog" /></Param><Param name="Title" essential="true"/><Param name="Contents" type="ui.Page"/><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="RunOnOK" type="operation.OperationAction" script="true" /><Param name="DialogData" type="data.Data" advanced="true"><Default value="%%"/></Param><Param name="LauncherElement" advanced="true" Default="%$ControlElement%"/><Param name="UsePageData" type="data.Boolean" advanced="true"><Default value="true"/></Param><xtml t="dlg.OpenDialog" Title="%$Title%" DialogData="%$DialogData%" Style="%$Style%" LauncherElement="%$LauncherElement%"><Contents t="ui.ShowPage" Page="%$Contents%"><PageParams t="ui.PageParams"><Condition t="yesno.Not" Of="%$UsePageData%" /><DataItems t="data_items.Items" Items="%%" /></PageParams></Contents><RunOnOK t="xtml.UseParam" Param="RunOnOK"/><Feature t="xtml.UseParamArray" Param="Feature"/></xtml></Component></xtml><xtml jbart="true" ns="text"><Type id="HebrewText" HebChars="" /><Component id="Extract" type="data.Data" execution="native"><Param name="From" Default="%%"/><Param name="StartMarker" type="data.Data[]" essential="true" description="defines the beginning of the extracted area"/><Param name="EndMarker" essential="true" description="defines the end of the extracted area"/><Param name="IncludingStartMarker" type="data.Boolean"/><Param name="IncludingEndMarker" type="data.Boolean"/><Param name="Trim" type="data.Boolean" description="Trim white spaces from the result"/><Param name="Regex" type="data.Boolean" description="Use regular expression for markers"/><Param name="OnlyFirstResult" type="data.Boolean" /></Component><Component id="FirstSucceeding" type="data.Data" execution="native"><Param name="Item" type="data.Data[]" essential="true"/></Component><Component id="MultiLang" type="data.Data" ><Param name="Data" title="Text" /><Param name="Pattern" script="true" essential="true"/><Param name="Dynamic" type="data.Boolean"/><xtml t="data.IfThenElse" ><Var name="PatternToUse" t="data.IfThenElse" If="%$Dynamic%" Else="%$Pattern%"><Then t="xtml.UseParam" Param="Pattern" /></Var><If t="yesno.Empty" Data="%$Language%" /><Then t="xtml.UseParam" Param="Pattern"/><Else t="text.FirstSucceeding"><Item t="xtml.RunXtml"><Xtml t="data.Lookup" LookupName="multi lang suites" LookFor="%$Language% / %$PatternToUse%"><AllItems t="data.Pipeline"><Item t="xtml.ComponentsOfType" Type="text.MultiLangSuite" /><Item t="xtml.ComponentDefinition" ID="%%" /><Item value="%xtml/Pattern%" /></AllItems><ItemCode value="%../@Language% / %@Original%"/><ItemValue t="text.FirstSucceeding"><Item value="%@Tranlation%" /><Item value="%@T%" /></ItemValue></Xtml></Item><Item t="data.Pipeline"><Item t="xtml.UseParam" Param="Pattern"/><Item t="text.Split" Separator="__" Part="First" /></Item></Else></xtml></Component><Component id="Split" type="data.Data" execution="native" ><Param name="Separator"><Default value=","/></Param><Param name="Text" Default="%%"/><Param name="Part" type="enum"><Default value="All"/><value>All</value><value>First</value><value>ButFirst</value><value>Second</value><value>By index</value><value>Last</value><value>All but Last</value><value>All but First</value><value>All but First and Last</value></Param><Param name="Index" type="data.Data" description="Relevant only for \'By Index\' Part"/><Param name="NoEmptyValues" type="data.Boolean" /><Param name="Regex" type="data.Boolean" description="Use regular expression as a separator"/><Param name="Default" description="default result if empty value"/></Component><Component id="Text" type="data.Data" execution="native"><Param name="Text" essential="true"/><Param name="RemoveEmptyParenthesis" type="data.Boolean"/></Component><Component id="NumberFormat" type="text.NumberFormat" execution="native"><Param name="Symbol"/><Param name="SymbolAtRight" description="attach the symbol to the right side" type="data.Boolean"/><Param name="MinusInParenthesis" type="data.Boolean" /><Param name="NoCommaSeparator" type="data.Boolean" /><Param name="Cents" type="data.Boolean" /></Component><Component id="Percent" type="text.NumberFormat"><xtml t="text.NumberFormat" SymbolAtRight="true" Symbol="%"/></Component></xtml><xtml jbart="true" ns="ui" ><Component id="NotInCaptureMode" type="data.Boolean" execution="native" /><Component id="IfThenElse" type="ui.Control" execution="native"><Param name="If" type="data.Boolean" script="true" essential="true"/><Param name="Then" type="ui.Control" essential="true"/><Param name="Else" type="ui.Control" essential="true"/></Component><Component id="Text" type="ui.Control" databind="true" execution="native"><Param name="Text" essential="true"/><Param name="Style"/><Param name="FixNewLines" type="data.Boolean"/><Param name="MultiLang" type="data.Boolean"/><Param name="HtmlContents" type="data.Boolean" /><Param name="Hint" /></Component><Component id="Button" type="ui.Control" databind="true"><Description>A button can be a simple html button, an hyperlink or an image</Description><Default value="false"/><Param name="Text" essential="true"/><Param name="OnClick" essential="true" type="action.Action" script="true" paramVars="ControlElement"/><Param name="Style" type="ui.ButtonStyle" script="true"><Default t="ui.StandardButton"/></Param><Param name="Image"/><Param name="Tooltip"/><Param name="OnHover" type="action.Action" script="true"/><Param name="IsSelected" type="data.Boolean" script="true" advanced="true"/><xtml t="xtml.UseParam" Param="Style"><Var name="ButtonContext" t="xtml.Params"><Param name="Text" t="text.MultiLang" Pattern="%$Text%" Dynamic="true"/><Param name="Image" value="%$Image%"/><Param name="Tooltip" value="%$Tooltip%"/><ScriptParam name="OnClick" t="xtml.UseParam" Param="OnClick" paramVars="ControlElement"><Condition t="yesno.And"><Item t="ui.NotInCaptureMode" /><Item t="yesno.Not"><Of t="ui.HasClass" Cls="aa_loading" Data="%$ControlElement%"/></Item></Condition></ScriptParam><ScriptParam name="OnHover" t="xtml.UseParam" Param="OnHover"/></Var><Class value="aa_selected_btn"><Condition t="xtml.UseParam" Param="IsSelected"/></Class></xtml></Component><Component id="ButtonAsHyperlink" type="ui.ButtonStyle" Image="%$_Images%/styles/button_hyperlink.png" execution="native"><Param name="TextInlineCss" advanced="true" /><Param name="ImageInlineCss" advanced="true" /></Component><Component id="ButtonsLayout" type="ui.ListLayout" execution="xtml"><xtml t="xml.WithChanges" ><Var name="Controls" /><Xml t="ui.ControlWithCss"><Control t="ui.Html" Css=""><table cellspacing="0" cellpadding="0" width="none" class="aa_ButtonsLayout"><tr><td class="buttons_layout_td"/></tr></table></Control><Css><![CDATA[#this>*>*>*.buttons_layout_td { vertical-align:middle; padding-right:10px; }.right2left #this>*>*>*.buttons_layout_td { padding-right:0px !important; padding-left:10px; }]]></Css></Xml><Change t="xml.Duplicate" Items="%$Controls%"><Element t="ui.ElementOfClass" Cls="buttons_layout_td" /><ChangeOnElement t="xml.AddChildren"  CloneChildren="false"><Children t="data.Same"/></ChangeOnElement></Change></xtml></Component><Component id="ControlWithAction" type="ui.Control" execution="native" databind="true"><Param name="RunBeforeControl" type="action.Action" script="true"/><Param name="Control" type="ui.Control" script="true" essential="true" /><Param name="RunAfterControl" type="action.Action" script="true"/><Param name="RunAfterControlWithTimer" type="data.Boolean" /></Component><Component id="DataBind" type="xml.Change" execution="native"><Param name="Script"/><Param name="InputForChanges"/></Component><Component id="DynamicList" type="ui.Control" execution="xtml" databind="true"><Param name="Items" /><Param name="Control" script="true" type="ui.Control"/><Param name="Layout" script="true" type="ui.ListLayout"><Default t="ui.LineBreak"/></Param><Param name="ControlForEmpty" type="ui.Control" script="true"/><xtml t="data.FirstSucceeding"><Item t="data.Pipeline" ><Item t="xtml.UseParam" Param="Items" /><Item t="xtml.UseParam" Param="Control" /><Aggregator t="xtml.UseParam" Param="Layout" /></Item><Item t="xtml.UseParam" Param="ControlForEmpty" /></xtml></Component><Component id="ElementOfClass" type="data.Data" execution="native"><Param name="Cls" essential="true"/><Param name="OnlyFirst" type="data.Boolean"><Default value="true"/></Param><Param name="Direction" type="enum"><Default value="down"/><value>up</value><value>down</value></Param></Component><Component id="HasClass" type="data.Boolean" execution="native"><Param name="Cls"/></Component><Component id="Html" type="ui.Control" visibility="hidden" execution="native"><Param name="Html" /><Param name="Tag" /><Param name="DynamicContent" type="data.Boolean" ><Default value="false" /></Param></Component><Component id="ControlWithCss" type="ui.Control" execution="native"><Param name="Control" type="ui.Control" /><Param name="Css" codemirror="true" /></Component><Component id="ItemList" type="ui.Control" databind="true" execution="native"><Param name="ID" ><Default value="ItemList"/></Param><Param name="Items" type="data_items.Items" essential="true"/><Param name="Field" type="field.Fields[]" script="true" essential="true"/><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true" essential="true"/><Param name="Operations" type="operation.Operations"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" /><Param name="DataHolder" type="dataview.DataHolder"/><Param name="DataHolderCntr" type="data.Boolean"/><Param name="Fields" type="field.Fields" description="deprecated. use Field instead" deprecated="true"/></Component><Component id="UseGroupAsPage" type="ui.SinglePage,ui.Page" execution="native"><Param name="Group" /></Component><Component id="InnerPage" type="ui.Page" image="%$_Images%/studio/star1616.gif"><Param name="Title" /><Param name="Field" type="field.Fields[]" script="true" advanced="true" light="false"/><Param name="DesignTimeOnly"><Field t="field.Button" Title="Outline"><Image t="image.Image" Url="%$_Images%/studio/tree.png" /><FieldAspect t="field_aspect.HideTitle" /><Action t="bart_dt.OpenTreePopup" Xtml="%%" /><Style t="button.Hyperlink" /></Field></Param><xtml t="object.Object"><Property name="ID" t="text.ToIdText" Data="%$Title%" /><Property name="Fields" t="xtml.UseParamArray" Param="Field" /><Method name="Control" t="ui.Document" ID="%$_This/ID%" ><Fields value="%$_This/Fields%" /><Presentation t="uiaspect.Group" /></Method></xtml></Component><Component id="ItemPage" type="ui.SinglePage,ui.Page"><Param name="FieldsFromList" description="field ids to inherit. * for all fields"/><Param name="Field" type="field.Fields[]" script="true" advanced="true"/><Param name="Operations" type="operation.Operations" advanced="true" script="true"/><Param name="Aspect" type="uiaspect.Aspect[]" advanced="true" script="true"/><Param name="Presentation" type="uiaspect.DocumentPresentation" advanced="true" script="true" ><Default t="uiaspect.PropertySheet" /></Param><xtml t="object.Object"><Property name="Fields" t="data.List"><Item t="data.ItemsByIDs" List="%$_Cntr/Fields%" IDs="%$FieldsFromList%" /><Item t="xtml.UseParamArray" Param="Field" /></Property><Property name="ID" value="%$_Cntr/ID%_Details" /><Method name="Control" t="ui.Document" Item="%$_PageParams/DataItems%" ID="%$_This/ID%" ><Fields value="%$_This/Fields%" /><Operations t="xtml.UseParam" Param="Operations" /><Presentation t="xtml.UseParam" Param="Presentation" /><Aspect t="uiaspect.Permissions" WritableIf="false" Condition="%$_PageParams/ReadOnly%" /><Aspect t="xtml.UseParamArray" Param="Aspect" /></Method></xtml></Component><Component id="LineBreak" type="ui.ListLayout"><Param name="Separator" type="ui.Control" /><Param name="IncludeSpacing" type="data.Boolean"><Default value="true"/></Param><xtml t="data.Pipeline" ><Var name="Controls" /><Item t="data.Pipeline"><Item value="%$Controls%" /><Aggregator t="data.AddSeparator" Separator="%$Separator%" /></Item><Item t="xml.Wrap" ><Head t="ui.Html"><DIV class="aa_linebreak"/></Head></Item><Aggregator t="xml.Wrap"><Head t="ui.Html"><DIV/></Head></Aggregator></xtml></Component><Component id="List" type="ui.Control" execution="xtml" databind="true"><Param name="Control" type="ui.Control[]" essential="true"/><Param name="Layout" type="ui.ListLayout" script="true"><Default t="ui.LineBreak" /></Param><xtml t="data.FirstSucceeding"><Item t="xtml.UseParam" Param="Layout" Input="%$Control%" /><Item t="ui.Html"><div/></Item></xtml></Component><Component id="PageParams" type="ui.PageParams"><Param name="DataItems" type="data_items.Items"/><Param name="ReadOnly" type="enum" Options="false,true,inherit"><Default value="inherit"/></Param><Param name="UiPrefs" advanced="true" description="can set default filters, sorts, etc."/><Param name="PageID" /><Param name="Aspect" type="uiaspect.Aspect[]" advanced="true" script="true"/><xtml t="object.ObjectFromParams"><Property name="ReadOnly" t="data.IfThenElse" If="%$ReadOnly%==\'inherit\'" Then="%$_Cntr/ReadOnly%" Else="%$ReadOnly%" /><Method name="Aspect" t="xtml.UseParamArray" Param="Aspect"/></xtml></Component><Component id="ToggleClassByCondition" type="action.Action" execution="native"><Param name="Element" /><Param name="ClassCondition" type="data.Boolean" script="true"><Default value="true"/></Param><Param name="Class" /></Component><Component id="Document" type="ui.Control" databind="true" execution="native"><Param name="ID" ><Default value="Document"/></Param><Param name="Item" type="data_items.Items"><Default t="data_items.Items" Items="%%" /></Param><Param name="Field" type="field.Fields[]" script="true" essential="true"/><Param name="Operations" type="operation.Operations"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true"/><Param name="SectionAspect" type="uiaspect.SectionAspect[]" script="true"/><Param name="Presentation" type="uiaspect.DocumentPresentation" script="true" ><Default t="uiaspect.PropertySheet" /></Param><Param name="Fields" type="field.Fields" description="deprecated. use Field instead" deprecated="true"/></Component><Component id="Horizontal" type="ui.ListLayout" execution="xtml"><Param name="Padding"><Default value="10px"/></Param><Param name="ColumnCssClass" /><Param name="VerticalAlign" type="enum"><Default value="none" /><value>top</value><value>middle</value><value>bottom</value><value>none</value></Param><xtml t="xml.WithChanges" ><Var name="Controls" /><Xml t="ui.Html" DynamicContent="true"><table style="font-size:100\\%" class="horizontal_layout" cellspacing="0" cellpadding="0"><tr><td style="vertical-align:top;" class="horizontal_td %$ColumnCssClass%" /></tr></table></Xml><Change t="xml.Duplicate" Items="%$Controls%" ><Element t="ui.ElementOfClass" Cls="horizontal_td" /><ChangeOnElement t="xml.AddChildren"  CloneChildren="false"><Children t="data.Same"/></ChangeOnElement><ChangeOnElement t="uiaction.RunUiActions"><Action t="uiaction.SetCssProperty" Property="vertical-align" Value="%$VerticalAlign%" /><Condition t="yesno.ItemsNotEqual" Item1="%$VerticalAlign%" Item2="none"/></ChangeOnElement><ChangeOnElement t="uiaction.AddClass" RunOn="%%" Cls="item_%$DuplicateIndex%" /><Separator t="data.Pipeline"><Var name="Width" t="text.Text" Text="width:%$Padding%;" ><Condition t="yesno.NotEmpty" Data="%$Padding%" /></Var><Item t="ui.Html" DynamicContent="true"><td style="%$Width%" class="horizontal_Separator"><div></div></td></Item></Separator></Change></xtml></Component><Component id="ControlToRunOn" type="ui.Control"><xtml value="%$ControlElement%"/></Component><Component id="HtmlControl" type="ui.Control" execution="native" databind="true" ><Param name="Html" essential="true"/><Param name="Css" /><Param name="WordWrap" type="data.Boolean"><Default value="true" /></Param></Component><Component id="Image" type="ui.Control" databind="true" execution="native" ><Param name="Source" essential="true"/><Param name="OnClick" type="action.Action" script="true"/><Param name="Title" /><Param name="Width" /><Param name="Height" /></Component></xtml><xtml jbart="true" ns="uiaction"><Component id="DoFind" type="action.Action" execution="native"/><Component id="GoToPage" type="action.Action" execution="native"><Param name="Url" essential="true" /><Param name="Type" type="enum"><Default value="open in a new tab" /><value>navigate current page</value><value>open in a new tab</value></Param></Component><Component id="AddClass" type="action.Action" execution="native" ><Param name="Cls" essential="true" /></Component><Component id="RunUiActions" type="xml.Change" execution="native"><Param name="Action" type="action.Action[]" essential="true" /></Component><Component id="SetText" type="action.Action,uiaction.UsageAction" execution="native" autoexpand="true"><Param name="RunOn"><Field t="bart_dt.RunOnDT" /></Param><Param name="Text" essential="true" /><Param name="StayInControl" type="data.Boolean" Description="do not fire blur event"/><Param name="Mode" type="enum"><value>InsertAtCaret</value><value>ReplaceAll</value><value>InsertAtEnd</value><value>InsertAtBegining</value><value>CharByChar</value><Default value="ReplaceAll" /></Param><Param name="DoNotFireEvents" type="data.Boolean"/></Component></xtml><xtml jbart="true" ns="xml"><Component id="AttributeName" type="data.Data" execution="native" /><Component id="AddChildren" type="xml.Change" execution="native"><Param name="Children" essential="true"/><Param name="CloneChildren" type="data.Boolean"><Default value="false"/></Param><Param name="RunOnChildren" type="action.Action" script="true" /></Component><Component id="Attributes" type="data.Data" execution="native"><Param name="AlsoEmpty" type="data.Boolean"><Default value="true"/></Param></Component><Component id="Duplicate" type="xml.Change" execution="native"><Param name="Element" /><Param name="Items" /><Param name="ChangeOnElement" type="xml.Change[]" /><Param name="Separator" /><Param name="SeparatorAround" type="yeson.YesNo"><Default value="false" /></Param><Param name="ChangeOnFirstElement" type="xml.Change[]" /></Component><Component id="IsOfTag" type="data.Boolean"><Param name="Tag" essential="true"/><xtml t="yesno.ItemsEqual" Item1="%$Tag%"><Item2 t="xml.Tag" /></xtml></Component><Component id="Parent" type="data.Data" execution="native" /><Component id="WriteValue" type="xml.Change" ><Param name="To" essential="true" script="true" /><Param name="Value" essential="true" script="true"/><xtml t="action.WriteValue"><To t="xtml.UseParam" Param="To" /><Value t="xtml.UseParam" Param="Value" Input="%$InputForChanges%" /></xtml></Component><Component id="SetAttribute" type="xml.Change" execution="native"><Param name="AttributeName" essential="true"/><Param name="Value" essential="true"/><Param name="RemoveEmptyAttribute" type="data.Boolean"><Default value="false"/></Param></Component><Component id="Tag" type="data.Data" execution="native"><Param name="Data" Title="Xml" /><Param name="RemoveNamespace"><Default value="false" /></Param></Component><Component id="WithChanges" type="data.Data" execution="native"><Param name="Xml"><Default value="%%" /></Param><Param name="Change" type="xml.Change[]" essential="true"/><Param name="CloneXml" type="data.Boolean"><Default value="true"/></Param></Component><Component id="Wrap" type="data.Aggregator" execution="native"><Param name="HeadTag" /><Param name="Head" /></Component><Component id="Xml" type="data.Data" execution="native"><Param name="*" type="xml" /><Param name="DynamicContent" type="data.Boolean" Default="false"/><Param name="EncodeDynamicContent" type="data.Boolean" Default="true" description="set to false when using cdata"/></Component><Component id="XmlItems" type="data_items.Items" execution="native"><Param name="Parent" advanced="true"><Default value="%%" /></Param><Param name="Tag" description="more than one tag can be used with commas" /><Param name="ItemTypeName" advanced="true"/><Param name="ElementCondition" type="data.Boolean" script="true" advanced="true"/><Param name="Aspect" type="data_items.Aspect[]" advanced="true" script="true" /><Param name="DoOnNewItem" type="xml.Change" advanced="true" script="true" /><Param name="CanPasteItem" type="data.Boolean" script="true" advanced="true" /></Component></xtml><xtml jbart="true" ns="xtml"><Component id="UseAndTranslateParam" type="*" execution="native" dtsupport="false"><Param name="Param" essential="true" /><Param name="Input"><Default t="data.Same"/></Param></Component><Component id="ComponentDefinition" type="data.Data" execution="native"><Param name="ID" essential="true" /><Param name="ToXtml" type="data.Boolean"><Default value="false"/></Param></Component><Component id="ComponentsOfType" type="data.Data" execution="native"><Param name="Type" essential="true" /><Param name="ForAllTypes" type="data.Boolean"/></Component><Component id="Params" type="data.Data" execution="native" dtsupport="false"><Param name="Param" type="data.Data[]"/><Param name="ScriptParam" type="data.Data[]"/><Param name="Method" type="data.Data[]"/><Param name="ScriptParamArray" type="data.Data[]"/></Component><Component id="RunXtml" type="*" execution="native" dtsupport="false"><Param name="Xtml" essential="true" remark="no default (in js)"/><Param name="Input"  remark="default %% in js"/><Param name="ForceInputParam" type="data.Boolean"/><Param name="Field"  /><Param name="Method"  /></Component><Component id="UseParam" type="*" execution="native" dtsupport="false"><Param name="Param" essential="true" /><Param name="Input"><Default t="data.Same"/></Param></Component><Component id="UseParamArray" type="*" execution="native" dtsupport="false"><Param name="Param" essential="true" /></Component><Component id="UseParamArrayAsync" type="*" execution="native" dtsupport="false"><Param name="Param" essential="true" /></Component></xtml><xtml jbart="true" ns="ui_async"><Component id="Control" type="ui_async.Control" execution="native"><Param name="Control" type="ui.Control" script="true"/><Param name="AsyncAction" type="action_async.Action" script="true"/><Param name="AsyncData" type="data_async.Data" script="true"/><Param name="ControlForLoading" type="ui.Control"><Default1 t="ui_async.LoadingControl" /><Default t="ui.Text" Text="loading..." MultiLang="true"/></Param></Component></xtml><xtml jbart="true" ns="action_async"><Component id="SequentialRun" type="action_async.Action" execution="native"><Param name="Action" type="action_async.Action[]" essential="true"/></Component><Component id="RunActions" type="action_async.Action" execution="native"><Param name="Action" type="action_async.Action[]" essential="true"/><NativeHelper t="action_async.SequentialRun"/></Component></xtml><xtml jbart="true" ns="yesno"><Component id="PassesFilter" type="data.Data" execution="native" dtsupport="false"><Param name="Filter" type="data.Boolean" essential="true" script="true"><Default value="true"/></Param></Component><Component id="IsEmpty" type="data.Boolean" execution="native"><Param name="Value" Default="%%"/><Param name="CheckInnerText" type="data.Boolean"/></Component><Component id="ItemsNotEqual" type="data.Boolean"><Param name="Item1" essential="true" /><Param name="Item2" essential="true" /><xtml t="yesno.Not"><Of t="yesno.ItemsEqual" Item1="%$Item1%" Item2="%$Item2%" /></xtml></Component><Component id="And" type="data.Boolean" execution="native"><Param name="Item" type="data.Boolean[]" script="true" essential="true" /></Component><Component id="Empty" type="data.Boolean" execution="native"><Param name="CheckInnerText" type="data.Boolean"/></Component><Component id="ItemsEqual" type="data.Boolean" execution="native"><Param name="Item1" essential="true" /><Param name="Item2" essential="true" /></Component><Component id="Not" type="data.Boolean" execution="native"><Param name="Of" type="data.Boolean" essential="true" script="true"/></Component><Component id="NotEmpty" type="data.Boolean" execution="native"><Param name="Value" essential="true"><Default value="%%"/></Param><Param name="CheckInnerText" type="data.Boolean"/></Component><Component id="OR" type="data.Boolean" execution="native"><Param name="Item" type="data.Boolean[]" essential="true" script="true"/></Component></xtml><xtml jbart="true" ns="jbart_jsloader"><Type id="EnsureJsFileLoaded" /><Component id="LoadJavascriptFile" type="bart.ApplicationFeature" jbart="true" execution="native" in_dt_tree="true"><Param name="LoadInDesignTimeOnly" type="data.Boolean" Default="true"/><Param name="Url" /><Param name="EnsureLoaded" script="true" type="jbart_jsloader.EnsureJsFileLoaded"><Default t="jbart_jsloader.AutoUsingJQuery" /></Param></Component><Component id="LoadCssFiles" type="bart.ApplicationFeature" execution="native" in_dt_tree="true"><Param name="LoadInDesignTimeOnly" type="data.Boolean" Default="true"/><Param name="CssFiles" description="comma separated. Ensure \'real\' commas are encoded as %2C"/><NativeHelper name="Load" t="action_async.LoadCssFiles" CssFiles="%$CssFiles%"/></Component><Component id="LoadFilesForPalletes" type="bart.ApplicationFeature" execution="native" in_dt_tree="true"><Param name="LoadInDesignTimeOnly" type="data.Boolean" Default="true"/><NativeHelper name="Load" t="action_async.LoadCssFiles"><CssFiles t="data.Pipeline"><Item value="%$_WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'Palletes\']/xtml/pallete/fonts/*/@url%" /><Aggregator t="text.Concat" Separator=","/></CssFiles></NativeHelper></Component><Component id="AutoUsingJQuery" type="jbart_jsloader.EnsureJsFileLoaded" execution="native" /><Component id="PollingOfJsExpression" type="jbart_jsloader.EnsureJsFileLoaded" execution="native"><Param name="Expression" Default="function() { return (window.myvar) ? true : false; }"/><Param name="PollingTime" Default="100" /></Component><Component id="CallbackFunction" type="jbart_jsloader.EnsureJsFileLoaded" execution="native"><Param name="FunctionName" /></Component></xtml><xtml jbart="true" ns="jbart"><Type id="MyWidgetPage" /><Type id="StyleGuide" /><Component id="PoweredByJBart" type="field.Fields"><Param name="FieldAspect" type="field.FieldAspect[]" script="true"/><xtml t="field.Button" ID="Button" Title="jBart"><Style t="button.ImageOnly"/><Image t="image.Image" Url="//jbartlib.appspot.com/images/powered_by_jbart.png"/><Action t="operation.Link" OpenInANewTab="true" Link="http://www.artwaresoft.com"/><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="LoadDataSource" type="action_async.Action"><Param name="Resource" type="dynamic_enum" Options="%$BartAppXtml/Resources/Resource/@ID%" /><xtml t="object.RunMethod" Method="Load"><Object t="bart_resource.ResourceByID" ResourceID="%$Resource%" /></xtml></Component><Component id="ShowPage" type="ui.Control"><Param name="Page" type="jbart.MyWidgetPage" /><Param name="PageParams" script="true" advanced="true" type="ui.PageParams" AllowEmptyValue="true"/><xtml t="object.RunMethod" Method="Control" Object="%$Page%"><Var name="_PageParams" t="xtml.UseParam" Param="PageParams" /></xtml></Component><Component id="Page" type="field.Fields" advanceddt="true" Image="%$_Images%/studio/page1616.gif"><Param name="ID" advanced="always" /><Param name="Title" titleField="true"/><Param name="Page" type="jbart.MyWidgetPage" script="true"/><Param name="HideTitle" type="data.Boolean"><Default value="true"/></Param><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><Param name="PageData" script="true" type="data_items.Items.PageData" AllowEmptyValue="true" /><xtml t="field.CustomControl" ID="%$ID%" Title="%$Title%"><ShowTitle t="yesno.Not" Of="%$HideTitle%" /><Control t="object.RunMethod" Method="Control"><Object t="xtml.UseParam" Param="Page" /><Var name="_PageData" t="xtml.UseParam" Param="PageData" /><Var name="_PageParams" t="ui.PageParams" DataItems="%$_PageData%"><Condition t="yesno.NotEmpty" Value="%$_PageData%" /></Var></Control><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsGroup" Value="true" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component></xtml><xtml jbart="true" ns="jbart_api"><Component id="LoadWidget" type="action.Action"><Param name="WidgetXml"/><Param name="Action" type="action.Action" script="true" /><xtml t="action.RunActions"><Var name="_GlobalVars" t="object.Object" /><Var name="_UIPref" t="uipref.InCookies"/><Var name="WidgetId" value="%$WidgetXml/@id%"/><Var name="Language" value="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/Component/xtml/Language/@Language%" /><Var name="App" value="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%"/><Var name="_BartContext" t="object.Object"><Property name="Resources" t="data.Pipeline"><Item value="%$App/Resources/Resource%"/><Item t="object.Object" ID="%@ResourceID%" ContentType="%@ContentType%"><Var name="Resource" /><Var name="ContentType" value="%@ContentType%"/><Var name="ResourceID" value="%@ResourceID%"/><Var name="CT" value="%$WidgetXml/bart_dev/db/{$ContentType}%" /><Property name="Items" t="data.FirstSucceeding"><Item t="data.JavaScript" Code="function(data,html_elem,context) { var name = \'jBartWidget_\' + ajaxart.totext(context.vars.WidgetId) + \'_\' + ajaxart.totext(context.vars.ResourceID); return window[name]; }"/><Item value="%$CT/{$ContentType}%" Condition="%@t%==\'bart_resource.Query\'" /><Item value="%$CT/*[@id=\'{@ID}\']%" Condition="%@t%==\'bart_resource.Node\'" /><Item value="%$Resource/Xml/*%" Condition="%$Resource/@Mode%==\'single\'" /><Item value="%$Resource/Xml/*/*%" /></Property></Item></Property><SingleProperty name="Url" t="bart_url.BrowserUrl" /><SingleProperty name="ValidationStyle" t="validation.Default" /></Var><Action t="bart_resource.ResourcesToGlobalVars" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="Pages"><Value t="data.Pipeline"><Item value="%$App/Pages/Page%"/><Item t="xtml.RunXtml" Xtml="%%"/></Value></Action><Action t="action.RunActionOnItems" Items="%$App/ApplicationFeature%"><Action t="xtml.RunXtml" Xtml="%%" /></Action><Action t="action.RunActionOnItems" Items="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/UIPref/*%"><Action t="uipref.OverrideUIPrefs" UIPrefs="%%"><Prefix t="xml.Tag"/></Action></Action><Action t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="DataResourceInWidgetActivation" type="data.Data" execution="native"><Param name="WidgetId" /><Param name="ResourceID" /></Component><Component id="ShowWidgetPage" type="ui.Control" execution="native"><Param name="PageID" /></Component><Component id="ShowWidget" type="ui.Control"><Param name="WidgetXml" /><Param name="Page" /><Param name="RunAfter" type="action.Action" script="true" /><Param name="RunAfterControlWithTimer" type="data.Boolean" Default="true" /><Param name="_Language" /><Param name="OnError" type="action.Action" script="true" /><xtml t="ui.ControlWithAction" RunAfterControlWithTimer="%$RunAfterControlWithTimer%"><Var name="_GlobalVars" t="object.Object" /><Var name="_UIPref" t="uipref.InCookies" /><Var name="WidgetId" value="%$WidgetXml/@id%" /><Var name="Language" t="text.FirstSucceeding"><Item value="%$_Language%" /><Item value="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/Component/xtml/Language/@Language%" /></Var><Var name="App" value="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/Component[@id=\'App\']/xtml%" /><Var name="PageID" t="text.FirstSucceeding"><Item value="%$Page%" /><Item value="%$App/@MainPage%" /><Item value="main" /></Var><Var name="_WidgetXml" value="%$WidgetXml%" /><Var name="_BartContext" t="object.Object"><Property name="AppXtml" value="%$App%" /><Property name="Resources" t="data.Pipeline"><Item value="%$App/Resources/Resource%" /><Item t="data.FirstSucceeding"><Item t="jbart_api.DataResourceInWidgetActivation" ResourceID="%@ResourceID%" WidgetId="%$WidgetId%" /><Item t="data.IfThenElse"><If t="yesno.OR"><Item value="%@t%==\'jbart_resource.Data\'" /><Item value="%@t%==\'bart_resource.Xml\'" /><Item value="%@t%==\'bart_resource.Value\'" /></If><Then t="xtml.RunXtml" Xtml="%%" /><Else t="object.Object" ID="%@ResourceID%" ContentType="%@ContentType%"><Var name="Resource" /><Var name="ContentType" value="%@ContentType%" /><Var name="ResourceID" value="%@ResourceID%" /><Var name="CT" value="%$WidgetXml/bart_dev/db/{$ContentType}%" /><Property name="Items" t="data.FirstSucceeding"><Item value="%$CT/{$ContentType}%" Condition="%@t%==\'bart_resource.Query\'" /><Item value="%$CT/*[@id=\'{@ID}\']%" Condition="%@t%==\'bart_resource.Node\'" /></Property></Else></Item></Item></Property><SingleProperty name="StyleGuide" t="xtml.RunXtml" Xtml="%$App%" Field="StyleGuide" /><SingleProperty name="Url" t="bart_url.BrowserUrl" /><SingleProperty name="ValidationStyle" t="validation.Default" /></Var><Control t="field.ShowFieldControl"><Field t="field.Control" ><Control t="field_control.CustomXtmlControl"><Control t="ui.List" Class="aa_widget"><Control t="jbart_api.ShowWidgetPage" PageID="%$Page%" /></Control></Control><FieldAspect t="field_aspect.GlobalCss" GlobalCss="%$_BartContext/Css%"/></Field>      </Control><RunBeforeControl t="action.RunActions"><Action t="object.SetProperty" Object="%$_BartContext%" Property="Features"><Value t="data.Pipeline"><Item value="%$App/ApplicationFeature%" /><Item t="xtml.RunXtml" Xtml="%%" /></Value></Action><Action t="action.RunActions"><Condition t="yesno.And" ><Item value="%$Page% != \'\'" /><Item t="yesno.IsEmpty" Value="%$App/../../Component[@id=\'{$Page}\']/xtml%" /></Condition><Action t="xtml.UseParam" Param="OnError" Input="Could not find page %$Page%" /></Action><Action t="bart_resource.ResourcesToGlobalVars" /><Action t="object.SetProperty" Object="%$_BartContext%" Property="Pages"><Value t="data.Pipeline"><Item value="%$App/Pages/Page%" /><Item t="xtml.RunXtml" Xtml="%%" /></Value></Action><Action t="bart.RunApplicationFeatures" Phase="Load" /><Action t="action.RunActionOnItems" Items="%$WidgetXml/bart_dev/db/bart_unit/bart_unit/UIPref/*%"><Action t="uipref.OverrideUIPrefs" UIPrefs="%%"><Prefix t="xml.Tag" /></Action></Action></RunBeforeControl><RunAfterControl t="xtml.UseParam" Param="RunAfter" /></xtml></Component><Component id="EditableWidget" type="ui.Control"><Param name="WidgetXml" essential="true" /><Param name="Page" /><xtml t="jbart_api.ShowWidget" WidgetXml="%$WidgetXml%" Page="%$Page%" Class="aa_preview" ><RunAfter t="bart_dt.ShowStudioBar" Show="true" ><Var name="_XtmlEditorContext" t="object.Object"><Method name="RefreshPreview" t="uiaction.Refresh" RunOn=".aa_widget"/></Var></RunAfter></xtml></Component>  </xtml><xtml ns="bart_field" jbart="true"><Component id="UseMultiplePage" type="ui.MultiplePage,ui.Page" dtsupport="false"><Param name="Page" type="dynamic_enum" Options="%$_BartContext/Pages[Type=\'multiple\']/ID%" /><xtml t="bart.PageByID" PageID="%$Page%" /></Component></xtml><xtml ns="data_items" jbart="true"><Component id="InnerDataItems" type="data_items.Aspect" execution="native"><Param name="ParentDataItems" /></Component></xtml><xtml ns="richtext" jbart="true"><Component id="Default" type="richtext.Buttons"><xtml value="bold,italic,underline,|,forecolor,backcolor,|,fontselect,fontsizeselect,|,bullist,numlist,|,link,unlink,image,fullscreen,|,code" /></Component></xtml><xtml ns="date" jbart="true"><Component id="DateEntry" type="field.FieldAspect" category="date" execution="native" light="false"/></xtml><xtml jbart="true" ns="bart"><Component id="Resource" type="bart.DataItemsProvider"><Param name="Name" type="dynamic_enum" options_pt="bart_dt.BartResources" /><xtml t="bart_resource.ResourceByID" ResourceID="%$Name%" /></Component><Component id="NewItem" type="bart.DataItemsProvider" jbart="false"><Param name="Resource" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" /><xtml t="object.RunMethod" Method="SubsetForNewItem"><Object t="bart_resource.ResourceByID" ResourceID="%$Resource%" /></xtml></Component><Component id="Page" type="bart.Pages" execution="native" light="false" ><Param name="ID" /><Param name="ResourceIDs" /><Param name="ResourceID" /><Param name="Control" type="ui.Control" script="true" /><Param name="Type" /><NativeHelper name="OverrideUiPrefs" t="uipref.OverrideUIPrefs" UIPrefs="%$_PageParams/UiPrefs%" Prefix="%$ID%"/></Component><Component id="SinglePage" type="bart.Pages" image="%$_Images%/studio/star1616.gif"><Param name="ID" essential="true"><FieldAspect t="field_aspect.Mandatory"/></Param><Param name="ContentType" light="false" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%"/><Param name="Presentation" type="uiaspect.DocumentPresentation" script="true"><Default t="uiaspect.PropertySheet"/><FieldAspect t="field_aspect.Hide" ReadOnly="false" Edit="false"/></Param><Param name="DefaultResource" type="bart.DataItemsProvider" script="true" description="The data associated with the page"><Convert t="bart_dt.ConvertDefaultResource"/></Param><Param name="Field" type="field.Fields[]" light="false" script="true" paramVars="_ReferenceFields"/><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="Operations" type="operation.Operations" script="true" light="false"><FieldAspect t="field_aspect.Hide" ReadOnly="false" Edit="false"/></Param><Param name="Resource" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" light="false" deprecated="true"/><xtml t="object.OverrideObject"><Object t="bart.Page" ID="%$ID%" Type="single" ResourceIDs="CurrentNodeID,CurrentNode"><Control t="ui.Document" ID="%$ID%" Class="aa_page"><Item t="data.FirstSucceeding"><Item value="%$_PageParams/DataItems%"/><Item t="data.Pipeline"><Item t="xtml.UseParam" Param="DefaultResource"/><Item t="yesno.PassesFilter"><Filter t="object.IsObject"/></Item></Item><Item t="bart_resource.ResourceByID" ResourceID="%$DefaultResource%"/><Item t="bart_resource.ResourceByID" ResourceID="%$Resource%"/></Item><Presentation t="xtml.UseParam" Param="Presentation"/><Operations t="xtml.UseParam" Param="Operations"/><Fields1 value="%$_This/Fields%"/><Fields t="xtml.UseParamArray" Param="Field"/><Aspect t="uiaspect.Permissions" WritableIf="false" Condition="%$_PageParams/ReadOnly%" /><Aspect t="xtml.UseParamArray" Param="Aspect"/></Control></Object><Property name="ContentType" value="%$ContentType%"/><Property name="Fields" t="xtml.UseParamArray" Param="Field"><Var name="InSinglePageOverrideObject" value="true"/></Property><Property1 name="_Operations" t="xtml.UseParam" Param="Operations"/><Property name="Type" value="single"/><Property name="Resource" value="Resource"/><Method name="Items" t="data.Pipeline"><Item t="xtml.UseParam" Param="DefaultResource"/><Item t="yesno.PassesFilter"><Filter t="object.IsObject"/></Item></Method><Property name="ResourceID" t="data.Pipeline"><Item t="xtml.UseParam" Param="DefaultResource"/><Item value="%ID%"/></Property></xtml></Component><Component id="MultiplePage" type="bart.Pages" image="%$_Images%/studio/star1616.gif"><Param name="ID" essential="true" advanced="true" Title="Page ID"/><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true"><Default t="uiaspect.RichTable"/></Param><Param name="ContentType" type="dynamic_enum" Options="%$_BartContext/ContentTypes/ID%" advanced="true"/><Param name="Field" type="field.Fields[]" light="false" script="true" paramVars="_ReferenceFields"/><Param name="DefaultResource" type="bart.DataItemsProvider" script="true" description="The data associated with the page" advanced="true"><Convert t="bart_dt.ConvertDefaultResource"/></Param><Param name="Aspect" type="uiaspect.Aspect[]" script="true" light="false"/><Param name="Operations" type="operation.Operations" script="true" light="false"><FieldAspect t="field_aspect.Hide" ReadOnly="false" Edit="false"/></Param><Param name="ResourceID" type="dynamic_enum" light="false" Options="%$_BartContext/Resources/ID%"/><Param name="PreviewData" type="data_items.Items" script="true" light="false"/><xtml t="object.OverrideObject"><Object t="bart.Page" ID="%$ID%" ResourceIDs="%$DefaultResource%"><Control t="ui.ItemList" DataHolderCntr="true" Class="aa_page"><Items t="data.FirstSucceeding"><Item value="%$_PageParams/DataItems%"/><Item t="data.Pipeline"><Item t="xtml.UseParam" Param="DefaultResource"/><Item t="yesno.PassesFilter"><Filter t="object.IsObject"/></Item></Item><Item1 t="xtml.UseParam" Param="PreviewData"><Condition t="yesno.NotEmpty" Data="%$XtmlDtContext%"/></Item1><Item t="bart_resource.ResourceByID" ResourceID="%$DefaultResource%"/><Item t="bart_resource.ResourceByID" ResourceID="%$ResourceID%"/><Item t="data_items.Items"/></Items><ID t="text.FirstSucceeding"><Item value="%$_PageParams/PageID%"/><Item value="%$ID%"/></ID><Operations t="xtml.UseParam" Param="Operations"/><Fields t="xtml.UseParamArray" Param="Field"/><Presentation t="xtml.UseParam" Param="Presentation"/><Aspect t="uiaspect.Aspects"><Aspect t="uiaspect.Permissions" WritableIf="false" Condition="%$_PageParams/ReadOnly%"/><Aspect t="xtml.UseParamArray" Param="Aspect"/><Aspect t="object.RunMethod" Object="%$_PageParams%" Method="Aspect"/></Aspect></Control></Object><Property name="ContentType" value="%$ContentType%"/><Property name="ResourceID" t="data.Pipeline"><Item t="xtml.UseParam" Param="DefaultResource"/><Item value="%ID%"/></Property><Property name="Fields" t="xtml.UseParamArray" Param="Field"/><Property1 name="_Operations" t="xtml.UseParam" Param="Operations"/><Property name="Type" value="multiple"/><Property name="IsMultiple" value="true"/><Method name="Items" t="xtml.UseParam" Param="DefaultResource"/></xtml></Component><Component id="PageByID" type="data.Data" execution="native" dtsupport="false"><Param name="PageID" /><NativeHelper name="NewPage" t="xtml.RunXtml" Xtml="%$_BartContext/AppXtml/../../Component[@id=\'{$PageID}\']/xtml%" /></Component><Component id="Javascript" type="bart.ApplicationFeature" jbart="true" execution="native" in_dt_tree="true"><Param name="ScriptOnLoad" description="javascript to run on load. you can put general purpose js functions here"><FieldAspect t="field_dt.CodeMirrorFieldEditor" Type="js" CompId="bart.Javascript" ParamName="ScriptOnLoad" Height="400px" Width="600px"/></Param></Component><Component id="RunOnLoad" type="bart.ApplicationFeature" in_dt_tree="true"><Param name="Action" type="action.Action" script="true" /><xtml t="object.Object"><Method name="Load" t="xtml.UseParam" Param="Action" /></xtml></Component><Component id="CustomData" type="bart.DataItemsProvider"><Param name="DataItems" type="data_items.Items"><Default t="xml.XmlItems" /></Param><xtml value="%$DataItems%" /></Component><Component id="HtmlPageTitle" type="bart.ApplicationFeature" execution="native" in_dt_tree="true"><Param name="Title" /></Component></xtml><xtml jbart="true" ns="bart_operation"></xtml><xtml jbart="true" ns="bart_field"><Component id="OptionsInMetadata" type="picklist.OptionsProvider" jbart="false"><Param name="OptionsName"><Field t="bart_dt.OptionsNameField"/></Param><xtml t="xtml.RunXtml"><Xtml value="%$MetaData/PicklistOptions/PicklistOptions[@name=\'{$OptionsName}\']%"/></xtml></Component><Component id="DBLog" type="field.Fields"><Param name="Title" /><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><xtml t="field.CustomControl" Title="%$Title%"><Control t="ui.IfThenElse"><If t="yesno.NotEmpty" Value="%$GalleryNode/@id%" /><Then t="ui.Html"><div class="bart_dblog bart_dblog_gallery" /></Then><Else t="ui.Html"><div class="bart_dblog" /></Else></Control><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></xtml></Component><Component id="Page" type="field.Fields" advanceddt="false" light="false" Image="%$_Images%/studio/page1616.gif"><Param name="ID" advanced="always"/><Param name="Title" titleField="true" /><Param name="Page" type="dynamic_enum" options_pt="bart_dt.BartPages" script="true"/><Param name="ShowTitle" type="data.Boolean"/><Param name="CountInTitle" type="data.Boolean" /><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><Param name="PageParams" script="true" advanced="true" type="ui.PageParams" AllowEmptyValue="true"/><xtml t="field.CustomControl" ID="%$ID%" ShowTitle="%$ShowTitle%" Title="%$Title%"><Control t="bart_api.ShowPage"><Page t="xtml.UseParam" Param="Page" /><PageParams t="xtml.UseParam" Param="PageParams" /></Control><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsGroup" Value="true" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /><FieldAspect t="field_aspect.TitleDependsOnItems" Condition="%$CountInTitle%"><Title value="%$Title1%%$Count1%"><Var name="Title1" t="text.Translate" Text="%$Title%" /><Var name="Count" t="data.Pipeline" ><Item t="bart.PageByID" PageID="%$Page%" /><Item t="object.RunMethod" Method="Items" /><Item t="text.FirstSucceeding"><Item value="%Count%" /><Item t="data.Count" Items="%Items%" /></Item></Var><Var name="Count1" value=" (%$Count%)" Condition="%$Count%!=0" /></Title><DataItems t="data.Pipeline" ><Item t="bart.PageByID" PageID="%$Page%" /><Item t="object.RunMethod" Method="Items" /></DataItems></FieldAspect></xtml></Component><Component id="UseSinglePage" type="ui.SinglePage,ui.Page" dtsupport="false"><Param name="Page" type="dynamic_enum" options_pt="bart_dt.BartPages" /><xtml t="bart.PageByID" PageID="%$Page%" /></Component></xtml><xtml jbart="true" ns="bart_api"><Component id="ShowPage" type="ui.Control"><Param name="Page" type="dynamic_enum" options_pt="bart_dt.BartPages" /><Param name="PageParams" script="true" advanced="true" type="ui.PageParams" AllowEmptyValue="true"/><xtml t="bart_resource.ControlUsingResource"><Resource t="data.Pipeline" ><Item t="bart.PageByID" PageID="%$Page%"/><Item value="%ResourceID%" /></Resource><Control t="object.RunMethod" Method="Control" ><Object t="bart.PageByID" PageID="%$Page%" /><Var name="_PageParams" t="xtml.UseParam" Param="PageParams" /></Control></xtml></Component></xtml><xtml jbart="true" ns="data_items"><Component id="Resource" type="data_items.Items.PageData"><Param name="Resource" type="dynamic_enum" options_pt="bart_dt.BartResources" essential="true"/><xtml t="data.ItemByID" List="%$_BartContext/Resources%" ID="%$Resource%" /></Component><Component id="CustomData" type="data_items.Items.PageData"><Param name="Items" /><xtml t="data_items.Items" Items="%$Items%" /></Component></xtml><xtml jbart="true" ns="jbart_resource"><Type id="CacheIn" /><Component id="CacheInCookies" type="bart_resource.CacheIn" execution="native" /><Component id="CacheInLocalStorage" type="bart_resource.CacheIn" execution="native" /><Component id="Data" type="bart_resource.Resources" execution="native"><Param name="ResourceID"><Field t="field.Field" FieldData="%!@ResourceID%" Title="ID" ID="ResourceID"><FieldAspect t="field_aspect.Mandatory" /></Field></Param><Param name="ValueType" type="enum" Options="xml,json,javascript,xml multiple,json to xml,calculated" Default="xml"><FieldAspect t="field_aspect.RefreshDependentFields" FieldsIds="DataResource_Value" RefreshScope="screen" /></Param><Param name="Value"><Field t="bart_dt.DataResourceValue" /></Param><Param name="CacheIn" type="bart_resource.CacheIn" advanced="true" script="true" /><Param name="DataSource" type="bart_resource.DataSource" advanced="true" /><Param name="_FillDataSource" remark="dt only" advanced="true"><Field t="bart_dt.FillDataSourceForXmlResource" /></Param><Param name="AutoSaveSampleData" type="enum" Options="true,false" description="Relevant only for xml. The design time will auto save changes to this resource" advanced="true" /></Component></xtml><xtml jbart="true" ns="bart_resource"><Component id="ResourceByID" type="data_items.Items" dtsupport="false"><Param name="ResourceID" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" essential="true"/><xtml t="data.ItemByID" List="%$_BartContext/Resources%" ID="%$ResourceID%" /></Component><Component id="ResourceValue" type="data.Data"><Param name="ResourceID" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" essential="true"/><xtml t="data.FirstSucceeding"><Item t="data.Pipeline" ><Item t="data.ItemByID" List="%$_BartContext/Resources%" ID="%$ResourceID%" /><Item value="%Items%" /></Item></xtml></Component><Component id="Xml" type="bart_resource.Resources" execution="native"><Param name="ResourceID"><Field t="field.Field" FieldData="%!@ResourceID%" Title="ID" ID="ResourceID"><FieldAspect t="field_aspect.Mandatory" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Put Data Resource ID Here..." /></Field></Param><Param name="Mode" type="enum" Options="plural,single"><Default value="plural"/></Param><Param name="Xml"><Field t="bart_dt.XmlResource" Param="Xml"/></Param><Param name="Storage" type="enum" Options="in memory,cookie,local storage"><Default value="in memory"/></Param><Param name="DataSource" type="bart_resource.DataSource" /><Param name="_FillDataSource" remark="dt only"><Field t="bart_dt.FillDataSourceForXmlResource" /></Param><Param name="AutoSaveSampleData" type="data.Boolean" remark="dt only" /></Component><Component id="Value" type="bart_resource.Resources" execution="native"><Param name="ResourceID"><Field t="field.Field" FieldData="%!@ResourceID%" Title="ID" ID="ResourceID"><FieldAspect t="field_aspect.Mandatory" /><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="Put Data Resource ID Here..." /></Field></Param><Param name="Value" /></Component><Type id="DataSource" /><Component id="Javascript" type="bart_resource.DataSource" execution="native"><Param name="Code"><Default value="function(context) {&#xa; return { Retrieve: function(data,context) { return myxml; } , Save: function(data,context) {} } &#xa;}"/><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="operation.RunJavascript" ParamName="Code" Type="js" Height="100px" /></Param></Component><Component id="Rest" type="bart_resource.DataSource"><Param name="UrlToGetData" /><Param name="UseProxy" type="data.Boolean" advanced="true"/><Param name="ConvertResult" advanced="true" script="true"><Default value="%%" /></Param><xtml t="object.Object"><Method name="Retrieve" t="data_async.Rest" TunnelRequest="%$UseProxy%" Url="%$UrlToGetData%"><ConvertResult t="xtml.UseParam" Param="ConvertResult" /></Method><Method name="Save" t="action_async.RunActions"></Method></xtml></Component><Component id="JBartCloudDB" type="bart_resource.DataSource"><Param name="ContentType" /><Param name="ID" /><xtml t="object.Object"><Method name="Retrieve" t="data_async.Rest" TunnelRequest="true" Url="http://jbartdb.appspot.com/bart.php?op=loadnode&amp;contenttype=%$ContentType%&amp;id=%$ID%"><ConvertResult t="data.IfThenElse" If="%@_type% != \'error\'" Then="%%"><Else t="data.Empty" /></ConvertResult></Method><Method name="Save" t="action_async.RunActions"><Action t="action.WriteValue" To="%!@_type%" Value="%$ContentType%" /><Action t="action.WriteValue" To="%!@id%" Value="%$ID%" /><Action t="action_async.Rest" Method="POST" Url="http://jbartdb.appspot.com/bart.php?op=savenode"><PostData t="xml.XmlToText" Data="%%" /></Action></Method></xtml></Component><Component id="ControlUsingResource" type="ui.Control"><Param name="Resource" type="dynamic_enum" Options="%$_BartContext/Resources/ID%" /><Param name="Control" type="ui.Control" script="true" /><xtml t="ui_async.Control"><ControlForLoading t="ui.Text" Text="loading..." MultiLang="true" /><AsyncAction t="action_async.RunActions"><Var name="ResourceObj" t="bart_resource.ResourceByID" ResourceID="%$Resource%"/><Condition t="yesno.And"><Item t="yesno.NotEmpty" Value="%$ResourceObj%" /><Item t="yesno.Not" Of="%$ResourceObj/Loaded%" /></Condition><Action t="object.RunMethod" Object="%$ResourceObj%" Method="Prepare" /><Action t="object.SetBooleanProperty" Object="%$ResourceObj%" Property="Loaded" Value="true" /></AsyncAction><Control t="xtml.UseParam" Param="Control" /></xtml></Component><Component id="ResourcesToGlobalVars" type="action.Action" execution="native" /></xtml><xtml jbart="true" ns="data_items"><Component id="Items" type="data_items.Items" execution="native"><Param name="Items" essential="true" /><Param name="ItemTypeName"/><Param name="Aspect" type="data_items.Aspect[]" script="true" /></Component></xtml><xtml jbart="true" ns="dataview"><Component id="RangesFormula" type="field.FieldAspect" description="Defines categories / discrete values based on a numberical field (e.g. [100-200] range)" gallery="RangesFormula" execution="native" category="calculated"><Param name="BasedOnField" type="dynamic_enum" recalc_options="true"><Options t="dataview.FieldIDs" /></Param><Param name="Formula" type="dataview.Ranges"><Default t="dataview.FixedRanges" /></Param><NativeHelper name="Aspects" t="field_aspect.Aspects"><FieldAspect t="field.OptionsFilter" /><FieldAspect t="field_aspect.FilterAspects"><Aspect t="picklist.ShowOccurrences" SortBy="picklist" MultipleValuesInFilter="false"/></FieldAspect></NativeHelper></Component><Component id="FixedRanges" type="dataview.Ranges" execution="native"><Param name="Ranges" description="E.g.: 10,20,30,40"/><Param name="RangeText" advanced="true" Default="%$From%-%$To%" /><Param name="MinimumRangeText" advanced="true" Default="0-%$To%" /><Param name="MaximumRangeText" advanced="true" Default="above %$From%" /><Param name="SingleRangeText" advanced="true" Description="for ranges of a single value" Default="%%" /><Param name="IncludeMinimumRange" type="data.Boolean" advanced="true" Default="true"/><Param name="IncludeMaximumRange" type="data.Boolean" advanced="true" Default="true"/><Param name="Sort" type="enum" Options="original,reverse" advanced="true"/><Param name="NumberFormat" type="text.NumberFormat" advanced="true" ><Default t="text.NumberFormat"/></Param></Component></xtml></xtml><xtml package="true"><xtml ns="uiaspect" jbart="true"><Type id="Aspect"><ComponentAspect t="component_aspect.Image" Image="%$_Images%/studio/ball1616.gif" /></Type><Type id="Container" /><Type id="DocumentPresentation" /><Type id="ItemListPresentation" /><Component id="Table" type="uiaspect.ItemListPresentation" execution="native" light="false"><Param name="Columns" type="dynamic_enum_multi" light="false"><Options t="uiaspect_dt.ColumnsOptions"/><Options t="data.List"><Item t="data.Pipeline"><Item value="%$PreviewCntr/Fields%"/><Item value="%ID%"/></Item><Item1 t="data.Pipeline"><Item value="%$PreviewCntr/_Operations%"/><Item value="%ID%"/></Item1></Options></Param><NativeHelper name="FieldMenu" t="menu.OpenContextMenu" FromMenu="hmenu"><Menu t="menu.ContextMenu"><Item t="menu.MenuItem" Image="%$_Images%/butterfly1616.png" Text="Hide"><Action t="object.RunMethod" Object="%$_Cntr%" Method="GroupBy" Input="%%" /></Item><Item t="menu.MenuItem" Image="%$_Images%/groupby.gif"><Text t="data.IfThenElse" If="%$_Cntr/IsGrouped%" ><Then t="text.Translate" Text="Ungroup" /><Else t="text.MultiLang" Pattern="Group by %Title%"/></Text><Action t="object.RunMethod" Object="%$_Cntr%" Method="GroupBy" Input="%%" /></Item></Menu></NativeHelper><Param name="Css" css="true" advanced="true"><Default><![CDATA[#this {  border:1px solid #CCCCCC;  padding: 0;  margin: 0px;  border-collapse: collapse;  font-family: "Tahoma","Bitstream Vera Sans",Verdana,Helvetica,sans-serif;  font-size: 12px;  font-style: normal;  line-height2: 1.5;  text-align2: left;}#this .fieldtitle {  background: #FFFFFF url(%$_Images%/css/th_bck.gif) repeat-x scroll 0 0;  color: #666666;  padding: 4px 5px;  border-left: 1px solid #CCCCCC;}#this .aa_inner_header .fieldtitle:first-child { border-left: 0px; }.right2left #this .aa_inner_header .fieldtitle:first-child { border-left: 1px solid #CCCCCC; }.right2left #this .aa_inner_header .fieldtitle:last-child { border-left: 0px; }        #this .aatable_tbody { color: #666666; } #this .content {  padding: 5px 10px;  border: 1px solid #CCCCCC;  white-space: normal;}#this .fieldtitle_title { padding-right: 5px; white-space: normal; cursor:default; }#this .fieldtitle_sort { padding-right: 3px; cursor:default; }#this .fieldtitle_info {  background: url(\'%$_Images%/information.png\') no-repeat 0 5px; padding: 6px 12px 0 0; margin-left: 7px;}#this .sort_ascending .fieldtitle_sort { background: url(%$_Images%/css/sort2.gif) no-repeat 0 5px; }#this .sort_descending .fieldtitle_sort { background: url(%$_Images%/css/sort1.gif) no-repeat 0 5px; }#this .td_nocontent {color: #666666; padding: 5px 10px; border: 1px solid #CCCCCC;}#this .selected { background: #D9E8FB; }#this .content select { width:100px; }#this thead.hidden_header { display: none; }]]></Default></Param></Component><Component id="Custom" type="uiaspect.ItemListPresentation" ><xtml t="uiaspect.Aspects"/></Component><Component1 id="RichTable" type="uiaspect.ItemListPresentation" gallery="SimpsonsCharactersMulti"><Param name="Columns" type="dynamic_enum_multi" light="false"><Options t="uiaspect_dt.ColumnsOptions"/></Param><Param name="Sort" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="HideEmptyTable" type="data.Boolean" advanced="true"/><xtml t="uiaspect.Aspects" ><Condition1 t="yesno.Not" Of="%$_Cntr/HasRichTable%"/><Aspect t="object.SetBooleanProperty" Object="%$_Cntr%" Property="HasRichTable" Value="true" Comment="should be removed. only to support twice putting RichTable"/><Aspect t="uiaspect.Table" Columns="%$Columns%"/><Aspect t="uiaspect.Sort" Condition="%$Sort%"/><Aspect t="uiaspect.TableColumnsDragAndDrop"/><Aspect t="uiaspect.TableColumnsResizer"/><Aspect t="uiaspect.DragAndDropMover"/><Aspect t="uiaspect.TableNoItems" HideTable="%$HideEmptyTable%"/></xtml></Component1><Component id="RichTable" type="uiaspect.ItemListPresentation" ><Param name="Sort" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="ColumnsResizer" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="DragAndDropColumns" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="DragAndDropRows" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="HideEmptyTable" type="data.Boolean" advanced="true"/><Param name="Columns" type="dynamic_enum_multi" light="false"><Options t="uiaspect_dt.ColumnsOptions" /></Param><xtml t="uiaspect.Aspects"><Condition t="yesno.Not" Of="%$_Cntr/HasRichTable%" /><Aspect t="uiaspect.AspectByXtml"><InitializeContainer t="object.SetBooleanProperty" Object="%$_Cntr%" Property="HasRichTable" Value="true" Comment="should be removed. only to support twice putting RichTable" /></Aspect><Aspect t="uiaspect.Table" Columns="%$Columns%" /><Aspect t="uiaspect.Sort" Condition="%$Sort%"/><Aspect t="uiaspect.TableColumnsDragAndDrop" Condition="%$DragAndDropColumns%"/><Aspect t="uiaspect.TableColumnsResizer" Condition="%$ColumnsResizer%" /><Aspect t="uiaspect.DragAndDropMover" Condition="%$DragAndDropRows%" /><Aspect t="uiaspect.TableNoItems" HideTable="%$HideEmptyTable%"/></xtml></Component><Component id="TableNoHeader" type="uiaspect.Aspect" execution="native" category="table" description="Removes the header line of the table"/><Component id="TableNoItems" type="uiaspect.Aspect" execution="native" category="table" description="Table with no items shows a \'no items\' indication"><Param name="HideTable" type="data.Boolean" description=""/><Param name="DescriptionWhenNoItems" Default="No items available" /></Component><Component id="ShowTextWhenNoItems" type="uiaspect.Aspect" execution="native" description="Text to show when no items present"><Param name="TextWhenNoItems" Default="No items available" /><Param name="Style" type="uitext.Style"><Default t="uitext.PlainText" /></Param></Component><Component id="TableColumnsDragAndDrop" type="uiaspect.Aspect" execution="native" category="table" light="false"/><Component id="TableColumnsResizer" type="uiaspect.Aspect" execution="native" category="table" light="false"/><Component id="TableScroll" type="uiaspect.Aspect" execution="native" category="table" description="Scrolling the table body"><Param name="Height" description="Table Height"/></Component><Component id="ScrollItems" type="uiaspect.Aspect" description="Scrolls the items" execution="native"><Param name="Style" type="itemlist_scroll.Style"><Default t="itemlist_scroll.BrowserScroll" /></Param><Param name="Height" type="scroll_size.Height"><Default t="scroll_size.FixedHeight" /></Param><Param name="Width" type="scroll_size.Width" /></Component><Component id="HiddenFields" type="uiaspect.Aspect" execution="native" category="table" light="false"><Param name="FieldIds" type="dynamic_enum_multi" essential="true" ><Options t="data.Pipeline"><Item value="%$PreviewCntr/Fields%"/><Item value="%ID%"/></Options></Param></Component><Component id="CellPresentation" type="uiaspect.Aspect" execution="native" category="table,document" description="Force specific presentation (text, control, or expandable text), can be overridden at the field level."><Param name="Content" type="enum" description=""><Default value="text"/><value>text</value><value>expandable text</value><value>control</value></Param></Component><Component id="Sort" type="uiaspect.Aspect" execution="native" category="table" light="false"/><Component id="ItemText" type="uiaspect.Aspect" execution="native" category="list" light="false"><Param name="ItemText" type="data.Data" script="true" essential="true" /><Param name="ID"><Default value="item_text"/></Param><Param name="Secondary" type="data.Boolean"/><Param name="Class"/><Param name="UsingHtmlElement" type="data.Boolean" /><Param name="EncodeHtml" type="data.Boolean" /></Component><Component id="ItemSelection" type="uiaspect.Aspect" execution="native" category="selection,master details"><Param name="KeyboardSupport" type="data.Boolean"><Default value="true" /></Param><Param name="AutoSelectFirstItem" type="enum"><Default value="true" /><value>false</value><value>true</value><value>select and focus</value></Param><Param name="MouseSupport" type="enum" Options="mouse down,mouse click,none"><Default value="mouse down" /></Param><Param name="IncludeSubContainers" type="data.Boolean"><Default value="true" /></Param><Param name="PropagateSelection" type="data.Boolean"/><Param name="OnSelect" type="action.Action" script="true" /><Param name="FilterOnFirstSelected" type="data.Boolean" script="true" /><Param name="Css" codemirror="true" Default="#this.aa_selected_item { background: #D9E8FB;}" /></Component><Component id="BindSelectedItem" type="uiaspect.Aspect" description="bind selected item to data" execution="native" category="selection,master details"><Param name="ItemIdentifier" script="true" /><Param name="SelectedIdentifier" script="true" /></Component><Component id="DisableSelection" type="uiaspect.Aspect" execution="native" category="selection" light="false"><Aspect t="component_aspect.Description" Description="disables selection of direct items, and creates selection island for child containers"/><Param name="Disable" type="data.Boolean"><Default value="true"/></Param></Component><Component id="InheritSelection" type="uiaspect.Aspect" execution="native" category="selection" light="false"><Description value="unify selection behavior with parent"/><Param name="Inherit" type="data.Boolean"/></Component><Component id="HighlightSelectionOnHover" type="uiaspect.Aspect" execution="native" category="selection" jbart="false" ><Param name="Action" type="operation.OperationAction"/></Component><Component id="SynchSelection" type="uiaspect.Aspect" execution="native" category="selection,master details" light="false"><Param name="Selector" type="data.ValueByRef"/><Param name="ItemID" script="true"/></Component><Component id="ItemImage" type="uiaspect.Aspect" execution="native" category="list" light="false"><Param name="ItemImage" type="data.Data" script="true" essential="true" /><Param name="ImageForLeafs" type="data.Data" Remark="\'none\' means no image" /><Param name="Css" Default="vertical-align:bottom; padding-bottom: 2px; padding-right: 4px;" /></Component><Component id="CheckBox" type="uiaspect.Aspect" execution="native"  category="selection" light="false"><Param name="Selector" type="data.MultiSelector" /><Param name="OnSelect" type="action.Action" script="true" /><Param name="SelectOnCheck" type="data.Boolean"/><Param name="IncludeIntermediateNodes" type="data.Boolean" Description="Relevant for tree. Use checkbox for leaf nodes only" /><Param name="SelectWithEnter" type="data.Boolean" Description="Can also close the popup. If within popup should be used only with single selection" /></Component><Component id="Shortcuts" type="uiaspect.Aspect" execution="native" category="keyboard" light="false"/><Component id="OnDoubleClick" type="uiaspect.Aspect" execution="native" category="events"><Param name="Action" type="action.Action" script="true" essential="true" ><Default t="operation.Open"/></Param></Component><Component id="HeaderFooterTitle" type="uiaspect.Aspect" light="false"><Param name="Text" script="true" /><Param name="Location" type="enum"><Default value="header" /><value>header</value><value>footer</value><value>header and footer</value><value>footer, header only for many items</value></Param><Param name="RefreshStrategy" type="enum" Options="none,container change,item selection"><Default value="none" /></Param><xtml t="uiaspect.HeaderFooter" Location="%$Location%" RefreshStrategy="%$RefreshStrategy%"><Identifier t="data.UniqueNumber" /><Control t="ui.Text"><Text t="xtml.UseParam" Param="Text" /></Control></xtml></Component><Component1 id="HeaderFooterFromFields" type="uiaspect.Aspect" execution="native" light="false"><NativeHelper name="HeaderFooterItem" t="uiaspect.HeaderFooterFromFieldsImp" Field="%$Field%" Cntr="%$_Cntr%" Object="%$_HeaderFooterObject%"/></Component1><Component1 id="HeaderFooterFromFieldsImp"><Param name="Field" /><Param name="Cntr" /><Param name="Object" /><xtml t="uiaspect.HeaderFooter" Identifier="%$Field/ID%" Location="%$Field/HeaderFooterLocation%" RefreshStrategy="%$Field/HeaderFooterRefreshStrategy%"><Control t="object.RunMethod" Object="%$Object%" Method="Control" /></xtml></Component1><Component id="HeaderFooter" type="uiaspect.Aspect" execution="native" light="false"><Param name="Control" type="headerfooter.HeaderFooterControl" script="true" essential="true" /><Param name="Identifier" type="data.Data"><Default value="0" /></Param><Param name="Location" type="enum"><Default value="header" /><value>header</value><value>footer</value><value>header and footer</value><value>footer, header only for many items</value></Param><Param name="RefreshStrategy" type="enum" Options="none,container change,item selection"><Default value="none" /></Param><Param name="Phase"><Default value="0"/></Param></Component><Component id="NextLevelsLight" type="uiaspect.Aspect" execution="native" category="structure" light="false"><Param name="ExpandLevel" type="enum"><Default value="all" /><value>root level</value><value>first level</value><value>all</value></Param><Param name="NextLevel" type="data_items.Items" script="true" advanced="true"><Default t="object.RunMethod" Object="%$_DataItems%" Method="NextLevel" /></Param></Component><Component id="NextLevels" type="uiaspect.Aspect" execution="native" category="structure" light="false"><Param name="NextLevelAspect" type="uiaspect.Aspect[]" script="true" /><Param name="NextLevel" type="data_items.Items" script="true"><Default t="xtml.RunXtml" Xtml="%$_Cntr/Items/NextLevel%" /></Param><Param name="Operations" type="operation.Operations" script="true" /><Param name="Fields" type="field.Fields" script="true" /><NativeHelper name="InnerContainer" t="ui.ItemList" Items="%$_NextLevelItems%"><Var name="_NextLevelItems" t="xtml.UseParam" Param="NextLevel" /><Condition t="yesno.NotEmpty" Value="%$_NextLevelItems%" /><Operations t="xtml.UseParam" Param="Operations" /><Fields t="xtml.UseParam" Param="Fields" /><Aspect t="xtml.UseParamArray" Param="NextLevelAspect" /><Aspect value="%$_This%" /></NativeHelper></Component><Component id="InteractiveGroupBy" type="uiaspect.Aspect" execution="native" category="group by" gallery="GroupBy" description="Add group-by behavior to table. Right click on the header and group the values by the field."><Param name="AutoExpandGroups" type="data.Boolean" description="Opens the groups automatically"/><Param name="UseImage" type="data.Boolean"><Default value="true"/></Param><Param name="ShowEmptyGroups" type="data.Boolean"/><Param name="GroupText" script="true"><Default value="%Name% (%Count%)"/></Param><Param name="HitAreaCss" css="true"><Default><![CDATA[#this { height: 16px; float: left; display:inline-block; width:30px; padding: 5px 0 0 0; margin-left:-8px; margin-top:-6px;}#this.expandable { background:url(images/css/icon_plus.gif) no-repeat scroll 5px 6px transparent; }#this.expandable:hover { cursor:pointer; text-decoration:none;}#this.collapsable { background:url(images/css/icon_minus.gif) no-repeat scroll 5px 6px transparent; }#this.collapsable:hover { cursor:pointer; text-decoration:none;}      ]]></Default></Param><NativeHelper name="RebuildContainer" t="uiaction.Refresh"/><NativeHelper name="ContextMenuImp" t="menu.OpenContextMenu" FromMenu="hmenu"><Menu t="menu.ContextMenu"><Item t="menu.MenuItem" Image="%$_Images%/groupby.gif"><Text t="data.IfThenElse" If="%$_Cntr/GroupByFields/Id% == %Id%"><Then t="text.MultiLang" Pattern="Ungroup" /><Else t="text.MultiLang" Pattern="group by %Title%"/></Text><Action t="object.RunMethod" Object="%$_Cntr%" Method="GroupBy" Input="%%" /></Item></Menu></NativeHelper></Component><Component id="ItemClass" type="uiaspect.Aspect" execution="native" category="table" description="style per item. assign a specific css class for each item"><Param name="Class" script="true" essential="true" /></Component><Component id="NextLevelsByFields" type="uiaspect.Aspect" execution="native" category="structure" light="false"><Param name="FieldIds" /></Component><Component id="TreeNode" type="uiaspect.Aspect" execution="native" category="tree" light="false"/><Component id="Indent" type="uiaspect.Aspect" execution="native" category="tree" light="false" ><Param name="Lines" type="data.Boolean" /><Param name="Css" css="true"><Default><![CDATA[#this,#this ul {  padding: 0;  margin: 0;  list-style: none; }       #this li { margin: 0;  padding: 3px 0pt 3px 16px;  background: none; white-space: nowrap; }       .aa_lined #this li { background: url(%$_Images%/css/treeview-default-line.gif) 0 0 no-repeat; }       .right2left #this li { padding: 3px 16px 3px 0pt !important }       .right2left #this .aa_text {  padding: 3px;}       .aa_lined #this li.non_leaf { background-position: 0 -176px;}       .aa_lined #this li.last { background-position: 0 -1763px; }       .aa_lined #this .hitarea.collapsable { background-position: -64px -25px; }       .aa_lined #this .hitarea.expandable { background-position: -80px -3px; }       .aa_lined #this .hitarea.collapsable.last { background-position: -16px -89px; }       .aa_lined #this .hitarea.expandable.last { background-position: -48px -45px; }      ]]></Default></Param></Component><Component id="ExpandCollapse" type="uiaspect.Aspect" execution="native" category="tree" light="false"><Param name="CollapseLevel" type="enum" Options="root,first,expand all"><Default value="expand all"/></Param><Param name="TextInHitArea" type="data.Boolean" /><Param name="Css"><Default t="itemlist.CustomStyle"><Css><![CDATA[#this.aa_selected_item .aa_selected_itemtext { background: #D9E8FB; }]]></Css></Default></Param><Param name="HitAreaCss" css="true"><Default><![CDATA[#this {  background:  url(%$_Images%/css/treeview-default.gif) -64px -25px no-repeat; height: 16px; width: 16px; margin: 2px 0 0 -16px; float: left; cursor: pointer;}#this.collapsable { background-position: -16px -92px; }#this.expandable { background-position: -48px -48px; }.right2left #this {  margin-right: -16px;float: right; background-image:  url(%$_Images%/css/treeview-default-rtl.gif); }      ]]></Default></Param></Component><Component id="Tree" type="uiaspect.ItemListPresentation" jbart="false"><Param name="ItemText" script="true" /><Param name="ItemImage" script="true"><Default value="%$_Images%/default1616.gif" /></Param><Param name="CollapseLevel" type="enum" Options="root,first,expand all"><Default value="first"/></Param><Param name="NextLevel" type="data_items.Items" script="true" advanced="true"><Default t="object.RunMethod" Object="%$_DataItems%" Method="NextLevel" /></Param><Param name="ExpandLevel" type="enum" Options="root level,first level,all" ><Default value="first level" /></Param><Param name="DragAndDrop" type="data.Boolean"/><Param name="SelectedInUrl" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="TextInHitArea" type="data.Boolean" advanced="true" /><Param name="Css" Default="font-family: Times;" advanced="true"/><Param name="Lines" type="data.Boolean" advanced="true"/><Param name="ItemTextAsHtml" type="data.Boolean" Default="true" advanced="true"/><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.ItemImage"><ItemImage t="xtml.UseParam" Param="ItemImage" /></Aspect><Aspect t="uiaspect.ItemText" UsingHtmlElement="%$ItemTextAsHtml%"><ItemText t="xtml.UseParam" Param="ItemText" /></Aspect><Aspect t="uiaspect.NextLevelsLight" ExpandLevel1="%$ExpandLevel%"><NextLevel t="xtml.UseParam" Param="NextLevel" /></Aspect><Aspect t="uiaspect.Css" OnElement="container" Inline="%$Css%" /><Aspect t="uiaspect.ExpandCollapse" CollapseLevel="%$CollapseLevel%" TextInHitArea="%$TextInHitArea%"/><Aspect t="uiaspect.Indent" Lines="%$Lines%" /><Aspect t="uiaspect.TreeDragAndDrop" Condition="%$DragAndDrop%" /><Aspect t="uiaspect.TreeSelectedInUrl" Condition="%$SelectedInUrl%" /></xtml></Component><Component id="TreeSelectedInUrl" type="uiaspect.Aspect" execution="native" jbart="false" /><Component id="CheckBoxButtons" type="uiaspect.Aspect" category="selection" light="false"><xtml t="uiaspect.HeaderFooter" Identifier="CheckBoxButtons" Location="header"><Control t="ui.List" Class="checkboxbuttons"><Control t="ui.Button"><Text t="text.MultiLang" Pattern="Select All" /><OnClick t="uiaction.CheckAll" Select="true" /><Style t="ui.ButtonAsHyperlink" /></Control><Control t="ui.Button"><Text t="text.MultiLang" Pattern="Clear All" /><OnClick t="uiaction.CheckAll" Select="false" RunOn="up(.aa_container)" /><Style t="ui.ButtonAsHyperlink" /></Control><ItemsLayout t="ui.SpanList" /><Layout t="ui.ButtonsLayout" /></Control></xtml></Component><Component id="ContextMenu" type="uiaspect.Aspect" execution="native" category="menu" ><Param1 name="Operations" Description="operations ids. If empty, show all operations"/><Param name="MenuAspect" type="operation.MenuAspect[]" script="true" essential="true" /><NativeHelper name="ContextMenuImp" t="menu.OpenContextMenu" FromMenu="hmenu"><Var name="ContextMenu" t="operation.ContextMenu"><MenuAspect t="operation.ContainerOperations"/><MenuAspect t="xtml.UseParamArray" Param="MenuAspect"/><MenuAspect t="operation.RemoveDisabled"/></Var><Menu t="menu.ContextMenu"><Item t="menu.DynamicMenuItems" Items="%$ContextMenu/Items%"><Image t="object.RunMethod" Object="%%" Method="Icon" Input="%$_ItemsOfOperation%"/><aa t="xtml.RunXtml" Xtml="%Icon%" Input="%$_ItemsOfOperation%"/><Text t="xtml.RunXtml" Xtml="%Title%" Input="%$_ItemsOfOperation%"/><Action t="action.RunActions"><Action t="xtml.RunXtml" Xtml="%Action%" Input="%$_ItemsOfOperation%"/></Action></Item></Menu></NativeHelper></Component><Component id="Toolbar" type="uiaspect.Aspect" category="menu"><Param name="Location" type="enum"><Default value="header" /><value>header</value><value>footer</value><value>header and footer</value><value>footer, header only for many items</value></Param><Param name="RefreshStrategy" type="enum" Options="none,container change,item selection"><Default value="item selection" /></Param><Param name="MenuAspect" type="operation.MenuAspect[]" script="true" /><xtml t="uiaspect.HeaderFooter" Identifier="toolbar" Location="%$Location%" RefreshStrategy="%$RefreshStrategy%"><Control t="ui.List"><Var name="Menu" t="operation.Menu"><MenuAspect t="operation.ContainerOperations"/><MenuAspect t="xtml.UseParamArray" Param="MenuAspect" /><MenuAspect t="operation.RemoveDisabled" /></Var><Control value="%$Menu/Ctrl%"/></Control></xtml></Component><Component id="SelectedElement" type="data.Data" execution="native" light="false"/><Component id="SelectedItem" type="data.Data" execution="native" dtsupport="false" light="false"/><Component id="ContainerElementByItemFilter" type="data.Data" execution="native" light="false"><Param name="Container" type="uiaspect.Container"><Default value="%$_Cntr%" /></Param><Param name="ItemFilter" type="data.Boolean" script="true" /></Component><Component id="ContainerItems" type="data.Data" execution="native" light="false"><Param name="Container" type="uiaspect.Container"><Default value="%$_Cntr%" /></Param></Component><Component id="ContainerElements" type="data.Data" execution="native" light="false"><Param name="Container" type="uiaspect.Container"><Default value="%$_Cntr%" /></Param></Component><Component id="SubContainers" type="uiaspect.Container" execution="native" light="false"><Param name="FieldIds" /></Component><Component id="Aspects" type="uiaspect.Aspect" dtsupport="false" light="false"><Param name="Aspect" type="uiaspect.Aspect[]" script="true" essential="true" /><xtml t="xtml.UseParamArray" Param="Aspect" /></Component><Component id="DefaultAspects" type="uiaspect.Aspect" description="Default features: selection, toolbar, etc" hidden="true" deprecated="true"><Param name="ItemSelection" type="data.Boolean" description=""><Default value="true"/></Param><Param name="Toolbar" type="data.Boolean"><Default value="true" /></Param><Param name="AutoDoubleClick" type="data.Boolean"><Default value="false" /></Param><Param name="MenuAspect" type="operation.MenuAspect[]" script="true" /><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.ItemSelection" Condition="%$ItemSelection%" /><Aspect t="uiaspect.ItemDetails" /><Aspect t="uiaspect.Toolbar" Location="header" ID="default" Condition="%$Toolbar%"><MenuAspect t="xtml.UseParamArray" Param="MenuAspect" /></Aspect><Aspect t="uiaspect.OnDoubleClick" Condition="%$AutoDoubleClick%"/></xtml></Component><Component id="DefaultFeatures" type="uiaspect.Aspect" description="Default features: selection, toolbar, etc"><Param name="ItemSelection" type="data.Boolean" description=""><Default value="true"/></Param><Param name="Toolbar" type="data.Boolean"><Default value="true" /></Param><Param name="ItemDetails" type="data.Boolean"><Default value="true" /></Param><Param name="AutoDoubleClick" type="data.Boolean"><Default value="false" /></Param><Param name="MenuAspect" type="operation.MenuAspect[]" script="true" /><xtml t="uiaspect.Aspects"><Aspect t="uiaspect.ItemSelection" Condition="%$ItemSelection%" /><Aspect t="uiaspect.ItemDetails" Condition="%$ItemDetails%" /><Aspect t="uiaspect.Toolbar" Location="header" ID="default" Condition="%$Toolbar%"><MenuAspect t="xtml.UseParamArray" Param="MenuAspect" /></Aspect><Aspect t="uiaspect.OnDoubleClick" Condition="%$AutoDoubleClick%"/></xtml></Component><Component id="PropertySheet" type="uiaspect.DocumentPresentation" execution="native" ><Param name="PropertiesWidth" advanced="true"><Default value="80"/></Param><Param name="Space" advanced="true"><Default value="5px"/></Param><Param name="HeaderSpace" advanced="true"><Default value="0"/></Param><Param name="FooterSpace" advanced="true"><Default value="0"/></Param></Component><Component id="Group" type="uiaspect.DocumentPresentation" execution="native" jbart="false"><Param name="Style" type="group.Style"><Default t="group.PropertySheet" /></Param></Component><Component id="Vertical" type="uiaspect.DocumentPresentation" execution="native" gallery="Vertical" ><Param name="Align" type="enum"><value>left</value><value>center</value><value>right</value></Param><Param name="Space" advanced="true"><Default value="5px"/></Param><Param name="HeaderSpace" advanced="true"><Default value=""/></Param><Param name="FooterSpace" advanced="true"><Default value=""/></Param></Component><Component id="TabControl" type="uiaspect.DocumentPresentation" execution="native" gallery="TabControl" hidden="true"><Param name="Style" type="tabcontrol.Style" script="true"><Default t="tabcontrol.BlueTabs" /></Param><Param name="KeepSelectedTab" type="uiaspect_config.ConfigurationStorage" advanced="true"><Default t="uiaspect_config.InUrlFragment" /></Param></Component><Component id="WizardNoBackwards" type="uiaspect.DocumentPresentation" execution="native" jbart="false"></Component><Component id="Horizontal" type="uiaspect.DocumentPresentation" execution="native"><Param name="Spacing" description="e.g. 5px or 5px,20px,3px for different spacings"><Default value="5px"/></Param><Param name="HideInnerTitles" type="data.Boolean" /><Param name="EnforceSpacing" type="data.Boolean" advanced="true" ><Default value="true" /></Param><Param name="Widths" description="e.g. 50px,100px,30px" advanced="true" /><Param name="MinWidths" description="e.g. 30px,80px,30px" advanced="true" /><Param name="MaxWidths" description="e.g. 50px,100px,30px" advanced="true" /><Param name="AlighLastToRight" type="data.Boolean" advanced="true" /><Param name="FullWidth" type="data.Boolean" advanced="true"><Default value="false"/></Param><Param name="Css" css="true" Default=""><Default><![CDATA[.aahoriz_td { vertical-align: top; }.aa_float_right { float: right }.aa_float_left { float: left }.right2left .aa_float_right { float: left }.right2left .aa_float_left { float: right }      ]]></Default></Param></Component><Component id="BoxLayout" type="uiaspect.DocumentPresentation,uiaspect.ItemListPresentation" execution="native" description="required css3. display: box"><Param name="Orient" type="enum" Options="horizontal,vertical,by orientation" description="box-orient"><Default value="horizontal"/></Param></Component><Component id="AlignRight" type="uiaspect.Aspect" execution="native" category="layout"/><Component id="MultipleColumns" type="uiaspect.DocumentPresentation" execution="native"><Param name="Columns"><Default value="2" /></Param><Param name="Gap" advanced="true"><Default value="80px"/></Param><Param name="PropertiesWidth" advanced="true"><Default value="80"/></Param><Param name="Space" advanced="true"><Default value="5px"/></Param><Param name="HeaderSpace" advanced="true"><Default value="0"/></Param><Param name="FooterSpace" advanced="true"><Default value="0"/></Param></Component><Component id="ExpandCollapseSections" type="uiaspect.Aspect" execution="native" category="sections" light="false"/><Component id="ItemHighlight" type="uiaspect.Aspect" execution="native" category="table,list" hidden="true"><Param name="CssClass" script="true"/><Param name="BackgroundColor" script="true"/><Param name="FontColor" script="true"/><Param name="FontWeight" script="true"/></Component><Component id="DoSave" type="action.Action" jbart="false"><xtml t="action_async.RunAsync"><Action t="object.RunMethod" Object="%$_Items%" Method="Save" /></xtml></Component><Component id="FirstSubContainer" execution="native" light="false"><Param name="Element"><Default value="%$_Cntr/Ctrl%" /></Param></Component><Component id="Teasers" type="uiaspect.Aspect" execution="native" category="list" description="Show image and text"><Param name="OpenOnClick" type="data.Boolean" description=""/><Param name="Presentation" type="uiaspect.DocumentPresentation" script="true" ><Default t="uiaspect.PropertySheet" /></Param><NativeHelper name="Control" t="ui.Document" ><Item t="data_items.Items" Items="%%" /><Fields value="%$_ParentCntr/Fields%"/><Presentation t="xtml.UseParam" Param="Presentation" /></NativeHelper></Component><Component id="ContainerControl" type="ui.Control" dtsupport="false" hidden="true" execution="native" ><Param name="Container"><Default value="%$_Cntr%" /></Param></Component><Component id="ContainerFromControl" type="ui.Control" dtsupport="false" hidden="true" execution="native"><Param name="Control" /></Component><!-- Filters --><Component id="ExposedFiltersSection" type="uiaspect.Aspect" category="filters" execution="native" description="Interactive Filters" promoted="true"><Param name="FieldIds" type="dynamic_enum_multi" essential="true" description=""><Options t="field_dt.ContainerFields" Container="%$PreviewCntr%" /></Param><Param name="Phase"/></Component><Component id="OccurrencesFollowup" type="uiaspect.Aspect" category="filters" execution="native" jbart="false"><Param name="OccurrencesFollowup" type="operation.OperationAction"><Default t="ui.OpenPage" /></Param></Component><Component id="FilterSection" gallery="FilterPage" type="uiaspect.Aspect" description="Define filters inside this section" ><Param name="DelayedFiltering" type="data.Boolean" description="filter done only when the filter button is pressed"/><Param name="QueryExpression" script="true" description="E.g. %$Exp% AND age &gt; \'%@from%\' AND age &lt; \'%@to%\' "><Default value="%$Exp%"/></Param><xtml t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$HeaderFooterCntr%" Property="DelayedFiltering" Value="%$DelayedFiltering%"/><Action t="object.SetMethod" Object="%$HeaderFooterCntr%" Method="ExtraQueryExpression"><Xtml t="xtml.UseParam" Param="QueryExpression"/></Action></xtml></Component><Component id="FilterSummary" type="uiaspect.Aspect" category="filters" description="Shows number of filtered items and original items"><Param name="Location" type="enum" description=""><Default value="header"/><value>header</value><value>footer</value><value>header and footer</value><value>footer, header only for many items</value></Param><Param name="Text" type="data.Data" script="true"><Default value="%$FilteredItemsCount% of %$TotalItemsCount%"/></Param><Param name="TextBeforeFiltering" type="data.Data" script="true"><Default value="%$TotalItemsCount% Items"/></Param><Param name="Control" type="ui.Control" script="true"><Default t="ui.List"><Control t="ui.Text" MultiLang="true"><Text t="data.IfThenElse" If="%$FilteredItemsCount% == %$TotalItemsCount%" Then="%$TextBeforeFiltering%" Else="%$Text%"/></Control><Control t="ui.Button" Condition="%$FilteredItemsCount% != %$TotalItemsCount%" Class="clear_all_filters"><Text t="text.MultiLang" Pattern="(clean all filters)" /><OnClick t="operation.RunOperationAction"><Action t="operation.ClearAllFilters"/></OnClick><Style t="ui.ButtonAsHyperlink"/></Control><Layout t="ui.Horizontal"/></Default></Param><xtml t="uiaspect.HeaderFooter" Identifier="filter_summary" Location="%$Location%" RefreshStrategy="container change" Phase="2000"><Control t="xtml.UseParam" Param="Control"><Var name="Text" t="xtml.UseParam" Param="Text"/><Var name="TextBeforeFiltering" t="xtml.UseParam" Param="TextBeforeFiltering"/></Control></xtml></Component><Component id="FilteredItemsCount" type="data.Data" category="filters" execution="native" jbart="false"/><Component id="UnFilter" type="action.Action" category="filters" execution="native" light="false"/><Component id="FastFindInHtmlTree" type="uiaspect.Aspect" execution="native" category="filters" light="false"><NativeHelper name="Control" t="field.ShowFieldControl" Item="%%" Class="aa_filter_input"><Var name="_OriginalField" value="%$_Field%"/><Var name="_OriginalCntr" value="%$_Cntr%"/><Field t="field.Field1" ID="%$_OriginalField/ID%_filter"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="%$DescriptionForEmptyText%"/><FieldAspect t="field_aspect.OnUpdate"><Action t="uiaction.DoFind"><Var name="_Cntr" value="%$_OriginalCntr%"/></Action></FieldAspect><FieldAspect t="field_aspect.PopupImage" ID="options" /></Field></NativeHelper></Component><Component id="FastFind" type="uiaspect.Aspect" execution="native" category="filters" description="Interactive Search Box"><Param name="DescriptionForEmptyText" description="Text inside the box"><Default value="Search"/></Param><Param name="DoNotFilterSmallLists" type="data.Boolean"/><Param name="MaxItemsToShow"><Default value="0"/></Param><Param name="HideExposedFilters" type="data.Boolean"/><Param name="DoNotShowPartialStatus" type="data.Boolean"/><Param name="LookIn" script="true"/><Param name="DoNotLookInAllFields" type="data.Boolean"/><NativeHelper name="Control" t="field.ShowFieldControl" Item="%%" Class="aa_filter_input"><Var name="_OriginalField" value="%$_Field%"/><Var name="_OriginalCntr" value="%$_Cntr%"/><Field t="field.Field1" ID="%$_OriginalField/ID%_filter"><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.DescriptionForEmptyText" Description="%$DescriptionForEmptyText%"/><FieldAspect t="field_aspect.OnUpdate"><Action t="uiaction.DoFind"><Var name="_Cntr" value="%$_OriginalCntr%"/></Action></FieldAspect><FieldAspect  t="field_aspect.SearchPopupImage" ID="options" /></Field></NativeHelper><NativeHelper t="uiaspect.ExposedFiltersSection"/></Component><Component id="TextWithCommas" type="uiaspect.ItemListPresentation" execution="native"><Param name="ItemText" script="true" essential="true"><Default value="%%"/></Param><Param name="AsHyperlink" type="data.Boolean"/><Param name="OnClick" type="action.Action" script="true" RunningInput="%$_Items/Items%"/><Param name="MaxItemsToShow"/></Component><Compenent id="MaxItemsToShow" type="uiaspect.Aspect" category="table,list" light="false"><Param name="MaxItemsToShow"/><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="object.SetNumericProperty" Object="%$_Cntr%" Property="MaxItemsToShow" Value="%$MaxItemsToShow%"/></xtml></Compenent><Component id="CustomItemControl" type="uiaspect.Aspect" category="advanced" execution="native" light="false"><Param name="Control" type="ui.Control" script="true"/><Param1 name="Page" type="ui.SinglePage" script="true"/></Component><Component id="PieChart" type="uiaspect.Aspect" category="menu" light="false"><Param name="Location" type="enum"><Default value="footer"/><value>header</value><value>footer</value><value>header and footer</value><value>footer, header only for many items</value></Param><Param name="Type" type="enum" Options="p,p3"><Default value="p3"/></Param><Param name="Size"><Default value="400x200"/></Param><Param name="ItemText" script="true"/><Param name="ItemValue" script="true"/><Param name="ChartType" type="enum" Options="static,interactive"><Default value="interactive"/></Param><xtml t="uiaspect.HeaderFooter" Identifier="chart" Location="%$Location%" RefreshStrategy="container change"><Control t="ui.IfThenElse" If="%$ChartType%==\'interactive\'"><Then t="gchart.PieChart" Size="%$Size%" Items="%$_Cntr/Items/Items%"><ItemText t="xtml.UseParam" Param="ItemText"/><ItemAmount t="xtml.UseParam" Param="ItemValue"/><OnItemClick t="operation.Open"><Var name="_ItemsOfOperation" value="%%" /></OnItemClick></Then><Else t="ui.Image" Source="http://chart.apis.google.com/chart?cht=%$Type%&amp;chs=%$Size%&amp;chd=t:%$chd%&amp;chl=%$chl%"><Var name="chd" t="data.Pipeline"><Item value="%$_Cntr/Items/Items%"/><Item t="xtml.UseParam" Param="ItemValue"/><Aggregator t="text.Concat" Separator=","/></Var><Var name="chl" t="data.Pipeline"><Item value="%$_Cntr/Items/Items%"/><Item t="xtml.UseParam" Param="ItemText"/><Aggregator t="text.Concat" Separator="|"/></Var></Else></Control></xtml></Component><Component id="Chart" type="uiaspect.Aspect" category="graph" execution="native" light="false"><Param name="Type" type="enum" Options="pie,bar" /><Param name="ItemText" script="true"/><Param name="ItemValue" script="true"/></Component><Component id="Tiles" type="uiaspect.ItemListPresentation" execution="native" gallery="TeasersTiles" hidden="true"><Param name="ImageOrVideo" script="true"/><Param name="DefaultImage" description="when tile item has no image" /><Param name="Title"><Default value="%@Title%"/></Param><Param name="Text"/><Param name="ImageSize" description="width,height"><Default value="120,120"/></Param><Param name="TileExtraSize" description="For the text and spacing. format: width,height"><Default value="80,60"/></Param><Param name="MaxTextLength" advanced="true"><Default value="200"/></Param><Param name="KeepImageProportion" type="data.Boolean" advanced="true"><Default value="true"/></Param><Param name="Clickable" type="enum" advanced="true"><Default value="tile"/><value>tile</value><value>title</value><value>none</value></Param><Param name="MoreFields" type="dynamic_enum_multi" recalc_options="true" advanced="true"><Options value="%$DataHolderCntr/Fields/Id%"><Var name="Preview" t="dataview.DataViewPreview"/><Var name="DataHolderCntr" t="xtml.VariableValueFromContext" Variable="DataHolderCntr" ScriptAndContext="%$Preview%"/></Options></Param><Param name="Action" type="operation.OperationAction" script="true" advanced="true"><Default t="operation.Open"/></Param></Component><Component id="CustomListPresentation" type="uiaspect.ItemListPresentation" execution="native" jbart="false"><Param name="List" type="ui.Control" script="true"/></Component><Component id="None" type="uiaspect.ItemListPresentation"><xtml t="uiaspect.CustomListPresentation"/></Component><Component id="Empty" type="uiaspect.ItemListPresentation" hidden="true"><xtml t="uiaspect.CustomListPresentation"/></Component><Component id="Css" type="uiaspect.Aspect" execution="native" gallery="Css" description="Set the html style by condition" promoted="true"><Param name="OnElement" type="enum" description=""><value>container</value><value>container body</value><value>table</value><value>items</value><value>cells</value><value>title row</value><value>title cell (th)</value><value>title text</value><value>tree item text</value><Default value="container"/></Param><Param name="Inline" script="true"><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="uiaspect.Css" ParamName="Inline" /></Param><Param name="Class" script="true"/><Param name="OnCondition" script="true" type="data.Boolean" description="e.g. %@age% &gt; 20"/></Component><Component id="CssClass" type="uiaspect.Aspect" execution="native" hidden="true"><Param name="CssClass" /></Component><Component id="PathOfElement" type="data.Data" execution="native" light="false"><Param name="Element" /></Component><Component id="IsElemOpen" type="data.Boolean"><Param name="Item" /><xtml t="object.BooleanHtmlAttachment" ID=""/></Component><Component id="Permissions" type="uiaspect.Aspect" execution="native" category="model" jbart="false"><Param name="VisibleIf" type="data.Boolean" script="true"><Default value="true"/></Param><Param name="WritableIf" type="data.Boolean" script="true" /><Param name="ControlIfNotVisible" type="ui.Control" script="true"><Default t="ui.Text" Text="Access denied" Class="aa_access_denied"/></Param></Component><Component id="AspectByXtml" type="uiaspect.Aspect" light="false" execution="native"><Param name="InitializeContainer" type="action.Action" script="true" /></Component><Component id="IncrementalBuilder" type="uiaspect.Aspect" description="Advanced settings of the incremental items presenter"><Param name="ShowAll" type="data.Boolean" description="Do not use the incremental builder"/><Param name="PageLimitMSec" description="Time limit of building the whole table"><Default value="2000"/></Param><Param name="ShowIncrementalBuild" description="Show Items as they are built" type="data.Boolean"><Default value="true"/></Param><Param name="ChunkLimitMSec" description="Time limit of CPU stuck in building tables and lists"><Default value="200"/></Param><Param name="WaitBetweenChunksMSec" description="Time limit of CPU stuck in building tables and lists"><Default value="1"/></Param><Param name="SyncMode" type="data.Boolean" advanced="true" description="May freeze the browser, use only for performance monitoring" /><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$_Cntr%" Property="DoNotUseIncrementalBuilder" Value="true" /><Action t="object.SetNumericProperty" Object="%$_Cntr%" Property="PageLimitMSec" Value="%$PageLimitMSec%" /><Action t="object.SetBooleanProperty" Object="%$_Cntr%" Property="ShowIncrementalBuild" Value="%$ShowIncrementalBuild%" /><Action t="object.SetNumericProperty" Object="%$_Cntr%" Property="ChunkLimitMSec" Value="%$ChunkLimitMSec%" /><Action t="object.SetBooleanProperty" Object="%$_Cntr%" Property="ShowItemsInSyncMode" Value="%$SyncMode%" /></InitializeContainer></xtml></Component><Component id="XtmlControl" type="uiaspect.Control" light="false"><Param name="Control" script="true" type="ui.Control" essential="true"/><xtml t="xtml.UseParam" Param="Control"/></Component><Component id="ElementItemData" type="data.Data" execution="native" light="false"><Param name="Element" essential="true"/></Component><Component id="MaxTreeDepth" type="data.Data" execution="native" light="false"><Param name="Depth" essential="true" ><Default value="50" /></Param></Component><Component id="ReadOnly" type="uiaspect.Aspect"><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="object.SetBooleanProperty" Object="%$_Cntr%" Property="ReadOnly" Value="true" /></xtml></Component><Component id="WrappersAsItems" type="uiaspect.Aspect" light="false"><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="object.SetBooleanProperty" Object="%$_Cntr%" Property="WrappersAsItems" Value="true" /></xtml></Component><Component id="ClickableRows" type="uiaspect.Aspect" execution="native" jbart="true" gallery="ClickableRows" description="Assign action on row click"><Param name="Action" type="operation.OperationAction" script="true" RunningInput="%$_Items/Items%" description=""><Default t="operation.Open"/></Param><Param name="DisableSelection" advanced="true" type="data.Boolean" Default="true" /><Param name="Css" css="true" Default="#this { cursor:pointer; } #this:hover { background: rgb(243,249,254); }" /></Component><Component id="MultiSelect" type="uiaspect.Aspect" execution="native" category="table" gallery="MultiSelect" description="Allows multiple item selection with checkbox"><Param1 name="Type" type="enum" Options="checkbox,multi-select"><Default value="checkbox"/></Param1><Param name="SelectionFieldTitle"/></Component><Component id="TitlesAboveFields" type="uiaspect.DocumentPresentation" execution="native"><Param name="SpaceWidth" advanced="true" Default="15px"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="AddColonForTitles" advanced="true" type="data.Boolean" Default="true"/><Param name="Css" css="true" Default=".aa_title_row { font-weight:bold; }" /></Component><Component id="InheritsItems" type="uiaspect.Aspect" advanced="true" light="false"><xtml t="uiaspect.AspectByXtml"><InitializeContainer t="object.SetBooleanProperty" Object="%$_Cntr%" Property="InheritsItems" Value="true" /></xtml></Component><Component id="HoverCss" type="uiaspect.Aspect" execution="native" gallery="HoverCss" description=""><Param name="Css" description=""><Default value="background: rgb(243,249,254);"/></Param></Component><Component id="ItemClickable" type="uiaspect.Aspect" execution="native"><Param name="ClickAction" type="operation.OperationAction" script="true"><Default t="operation.Open"/></Param><Param name="PointerCursor" type="data.Boolean" Default="true" /></Component><Component id="List" type="uiaspect.ItemListPresentation" execution="native" gallery="List"><Param name="EachItemInLine" type="data.Boolean"/><Param name="ItemSize" description="width,height"><Default value="200,150"/></Param><Param name="ItemCss"><Default value="overflow:hidden; padding:10px;"/><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="uiaspect.List" ParamName="ItemCss" /></Param><Param1 name="FieldsLayout" type="uiaspect.DocumentPresentation" script="true" advanced="true"><Default t="uiaspect.Vertical" /></Param1><Param name="ItemClickable" type="data.Boolean"><Default value="true"/></Param><Param name="ClickAction" type="operation.OperationAction" script="true" advanced="true"><Default t="operation.Open"/></Param><Param name="SpacingBetweenFields" advanced="true"><Default value="5px" /></Param></Component><Component id="ItemList" type="uiaspect.ItemListPresentation" jbart="true" execution="native" autoexpand="true"><Param name="Style" type="itemlist.Style"><Default t="itemlist.Tiles"/></Param><Param name="ItemName" script="true" light="false" /><Param name="ItemImage" type="image.Image" light="false"/></Component><Component id="SearchLayout" type="field.PopupPage" execution="native"><Param name="ImageSize" description="width,height"><Default value="70,70"/></Param><Param name="ItemSize" description="width,height"><Default value="300,50"/></Param><Param name="ItemCss"><Default value="overflow:hidden; padding:10px;"/></Param><Param name="TitleCss"><Default value="font-weight:bold"/></Param><Param name="ExtraTextCss"><Default value=""/></Param><Param name="TextMaxLength"><Default value="35"/></Param><NativeHelper name="Page" t="ui.MultiplePage"><Presentation t="uiaspect.ItemList"><Style t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item fields" /></div>]]></Html><Css><![CDATA[>.item { padding: 3px 0 0 0; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {         item.setFields(\'.fields\');  });}]]></Javascript></Style></Presentation><Aspect t="uiaspect.ReadOnly"/><Field t="field.Group" Title="Item" ID="item" Path="" HideTitle="true"><GroupData t="group.DataFlow" FlowData="%%"/><FieldAspect t="field_aspect.Section"/><Layout t="uiaspect.Horizontal" Spacing="25px" HideInnerTitles=""><Css><![CDATA[]]></Css></Layout><Operations t="operation.Operations"/><Field t="field.XmlField" ID="image" Title="image"><Type t="field_aspect.Image" KeepImageProportions="true"><Width t="text.Split" Text="%$ImageSize%" Part="First"/><Height t="text.Split" Text="%$ImageSize%" Part="Second"/></Type><FieldAspect t="field_aspect.HideTitle"/></Field><Field t="field.XmlGroup" Title="right" ID="Right" HideTitle="true"><FieldAspect t="field_aspect.Section"/><Presentation t="uiaspect.Group"><Style t="group.Vertical"/></Presentation><Operations t="operation.Operations"/><Field t="field.XmlField" ID="Title" Title="Title"><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.HideTitle"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="%$TitleCss%"/></Field><Field t="field.Text1" Title="text" ID="Text" ShowTitle="" HtmlContents="false" Text="%%"><FieldAspect t="field_aspect.LimitTextLength" FullTextAsTooltip="false" MaxLength="%$TextMaxLength%"/><FieldAspect t="field_aspect.Css" OnElement="content" Inline="%$ExtraTextCss%"/></Field></Field></Field><Field t="field.Button" ID="_ShowAllInSearchBox" Title="Show All"><Style t="button.Hyperlink"/><FieldAspect t="field_aspect.HeaderFooterField" Location="footer" RefreshStrategy="none"/><Action t="field.ShowAllItemsInSearchBox"/><FieldAspect t="field_aspect.HideByCondition" CheckConditionForEveryItem="true"><ShowCondition t="field.HasMoreItemsToShowInSearchBox"/></FieldAspect><Image t="image.Image" Url="%$_Images%/expand-down.gif"/><FieldAspect t="field_aspect.Css" Inline="margin-left:10px; color:gray; margin-top: 10px; display: block;"/></Field><Operations t="operation.Operations"/></NativeHelper></Component><Component id="CustomLayout" type="field.PopupPage"><Param name="Page" type="dynamic_enum" options_pt="bart_dt.BartPages"/><Param name="DesignTime"><Field t="bart_dt.CustomLayoutCreatePage" /></Param><xtml t="bart.PageByID" PageID="%$Page%" /></Component><Component id="GalleryLayout" type="field.PopupPage"><Param name="ImageSize" description="width,height"><Default value="120,120"/></Param><Param name="TileExtraSize" description="For the text and spacing. format: width,height"><Default value="80,60"/></Param><Param name="MaxTextLength" advanced="true"><Default value="200"/></Param><Param name="KeepImageProportion" type="data.Boolean" advanced="true"><Default value="true"/></Param><xtml t="ui.MultiplePage"><Presentation t="uiaspect.Tiles" ImageSize="%$ImageSize%" TileExtraSize="%$TileExtraSize%" MaxTextLength="%$MaxTextLength%" KeepImageProportion="%$KeepImageProportion%"><ImageOrVideo t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemImage" /><Title t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemTitle" /><Text t="object.FastRunMethod" Object="%$_PopupField%" Method="ItemExtraText" /></Presentation><Aspect t="uiaspect.ReadOnly"/></xtml></Component><Component id="MultiplePressed" type="uiaspect.Aspect" light="false" execution="native"><Param name="IsItemPressed" type="data.Boolean" script="true" /><Param name="OnPressedChange" type="action.Action" script="true" /><Param name="PressedCss" Default="background: #D9E8FB;" /></Component><Component id="PickList" type="uiaspect.ItemListPresentation" light="false"><Param name="Title"/><Param name="ItemText" script="true"/><Param name="AutoSelectFirst" type="data.Boolean"/><Param name="FieldAspect" type="field.FieldAspect[]" script="true" /><xtml t="uiaspect.CustomListPresentation"><List t="ui.List" customxtml="true"><Var name="PickItems" value="%$Items%" /><Layout t="ui.Horizontal" VerticalAlign="middle"/><Control t="ui.Text" Text="%$Title1%:" MultiLang="true"><Condition t="yesno.NotEmpty" Value="%$Title%" /><Var name="Title1" t="text.Translate" Text="%$Title%"/></Control><Control t="ui.ControlWithAction"><Control t="field.ShowFieldControl" Item="%$_Index%"><Var name="_Index" t="data.WritableText"><DefaultValue value="0" Condition="%$AutoSelectFirst%"/></Var><Field t="field.Field1" ID="cntr_picklist"><FieldAspect t="field_aspect.Picklist"><Options t="picklist.DynamicOptions" Options="%$Items%" OptionCodeByIndex="true"><OptionLabel t="xtml.UseParam" Param="ItemText"/></Options></FieldAspect><FieldAspect t="field_aspect.OnUpdate"><Action t="operation.Open"><Data t="data.Pipeline"><Item value="%$PickItems%" /><Aggregator t="data.Subset" Count="1"><From t="data.Math" Expression="%$_Index%+1" /></Aggregator></Data><Var name="_ItemsOfOperation" value="%%" /></Action></FieldAspect><FieldAspect t="field_aspect.Writable" /><FieldAspect t="xtml.UseParamArray" Param="FieldAspect" /></Field></Control><RunAfterControl t="operation.Open" Condition="%$AutoSelectFirst%"><Data t="data.Pipeline"><Item value="%$PickItems%"/><Aggregator t="data.First" /></Data><Var name="_ItemsOfOperation" value="%%" /></RunAfterControl></Control></List></xtml></Component></xtml><xtml ns="uiaspect_config"><Type id="ConfigurationStorage" /><Component id="InUrlFragment" type="uiaspect_config.ConfigurationStorage" execution="native" /><Component id="None" type="uiaspect_config.ConfigurationStorage"><xtml t="data.Empty" /></Component></xtml></xtml><xtml package="true"><xtml ns="field_aspect" jbart="true" ><Type id="FieldType" customPT="field_aspect.CustomDataType" /><Type id="Multiple" /><Type id="ExtraField" /><Type id="ExpandCollapse" /><Type id="ExpandCollapseIcons" style="true" image_width="30px" /><Type id="HiddenContition" /><Component id="TabProperties" type="field.FieldAspect" ><Param name="Image" type="image.Image" /><Param name="ShowOnCondition" type="data.Boolean" Default="true" script="true" /><Param name="NumericIndication" script="true" /><Param name="OnBeforeSelect" type="operation.OperationAction" script="true" /><Param name="OnAfterSelect" type="operation.OperationAction" script="true" /><Param name="RefreshOnReSelect" type="enum" Options="refresh,no refresh" description="\'no refresh\' re-creates the tab when it is selected again"/><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Field%" Property="TabImage" Value="%$Image%" IsSingleProperty="true"/><Action t="object.SetTextProperty" Object="%$_Field%" Property="RefreshTabOnSelect" Value="%$RefreshOnReSelect%" /><Action t="object.SetMethod" Object="%$_Field%" Method="ShowTabOnCondition"><Xtml t="xtml.UseParam" Param="ShowOnCondition" /></Action><Action t="object.SetMethod" Object="%$_Field%" Method="TabNumericIndication"><Xtml t="xtml.UseParam" Param="NumericIndication" /></Action><Action t="object.SetMethod" Object="%$_Field%" Method="TabOnBeforeSelect"><Xtml t="xtml.UseParam" Param="OnBeforeSelect" /></Action><Action t="object.SetMethod" Object="%$_Field%" Method="TabOnAfterSelect"><Xtml t="xtml.UseParam" Param="OnAfterSelect" /></Action></xtml></Component><Component id="Number" type="field_aspect.FieldType"><Param name="Mandatory" type="data.Boolean" boolfeature="true" /><Param name="Format" type="text.NumberFormat" script="true" Default="%%"/><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.Mandatory" Condition="%$Mandatory%" /><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="Multiple" Value="true" Condition="%$Multiple%" /><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="IsNumber" Value="true" /><FieldAspect t="field_aspect.SimpleInput" /><FieldAspect t="field_aspect.SortMethod" Method="numeric" /><FieldAspect t="field_aspect.DisableCharacters" CharacterPattern="[^a-zA-Z]" /><FieldAspect t="field.NumberFilter" /><FieldAspect t="field_aspect.NumberFormat"><Format t="xtml.UseParam" Param="Format"/></FieldAspect><FieldAspect t="field_aspect.GroupAggregator"><Formula t="data.Sum" /></FieldAspect></xtml></Component><Component id="Boolean" type="field_aspect.FieldType" execution="native"><Param name="CheckedByDefault" type="data.Boolean" /><Param name="Presentation" type="field_aspect.BooleanPresentation"><Default t="field_aspect.CheckBox"/></Param><NativeHelper name="FieldAspect" t="field_aspect.Aspects"><FieldAspect t="field.BooleanFilter" /><FieldAspect t="field_aspect.DefaultValue" Value="%$CheckedByDefault%" /><FieldAspect t="field_aspect.BooleanTextSummary" TextForTrue="yes" TextForFalse="no" /></NativeHelper></Component><Component id="CustomDataType" type="field_aspect.FieldType" customPT="true"><Param name="Html" codemirror="true" light="false"><Default><![CDATA[<div><div/><input/></div>]]></Default></Param><Param name="Css" codemirror="true" light="false"><Default><![CDATA[#this {}]]></Default></Param><Param name="Javascript" codemirror="true" light="false" jsMetaData="styles_dt.DataTypeJsMetadata" ><Default><![CDATA[function(datatype,context) {  if (datatype.readonly) {    return jQuery(datatype).find(">div").html(datatype.text)[0];  }  else {    var out = jQuery(datatype).find(\'>input\');    datatype.initInput(out[0]);    return out[0];   }}]]></Default></Param><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component><Component id="BooleanTextSummary" type="field.FieldAspect" category="Boolean" execution="native" description="Set boolean text according to context. e.g. Enabled/Disabled"><Param name="TextForTrue" description=""/><Param name="TextForFalse" /></Component><Component id="CheckBox" type="field_aspect.BooleanPresentation" execution="native" /><Component id="Radio" type="field_aspect.BooleanPresentation" execution="native"><Param name="TextForYes"/><Param name="TextForNo"/><Param name="HideTitle" type="data.Boolean"><Default value="true"/></Param></Component><Component id="Property" type="field_aspect.BooleanPresentation"><xtml t="field_aspect.Aspects"/></Component><Component id="Date" type="field_aspect.FieldType" hidden="true"><Param name="Default" type="enum"><value>now</value><value>now with time</value></Param><Param name="FilterOptions" type="group.GroupsDefinition"/><Param name="OnUpdate" type="action.Action" script="true"/><Param name="DateEntry" type="data.Boolean"><Default value="true"/></Param><Param name="DatePickerPopup" type="data.Boolean"><Default value="true"/></Param><Param name="ChangeDateButtons" type="data.Boolean"><Default value="true"/></Param><xtml t="date.Date" Default="%$Default%" FilterOptions="%$FilterOptions%" OnUpdate="%$OnUpdate%" DateEntry="%$DateEntry%" DatePickerPopup="%$DatePickerPopup%" ChangeDateButtons="%$ChangeDateButtons%"/></Component><Component id="DisableCharacters" type="field.FieldAspect" category="textbox" execution="native" description="Disable entering characters not matching a pattern or format"><Param name="CharacterPattern" description="e.g., [0-9a-zA-Z]"/></Component><Component id="PicklistTextSummary" type="field.FieldAspect" category="picklist" execution="native" description=""><Param name="Show" type="enum" Options="text only,image and text,image only" description=""/><Param name="ManipulateText" type="data.Data" script="true" advanced="true" /><Param name="CssForImage" type="data.Data"  advanced="true" /></Component><Component id="RichText" type="field_aspect.FieldType"><Param name="Height"><Default value="200px" /></Param><Param name="Width"><Default value="600px" /></Param><Param name="Css" advanced="true" ><Default value="#this { font: 12px tahoma,verdana,arial; color:black; white-space: normal; }"  /><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="field_aspect.RichText" ParamName="Css" /></Param><Param name="Buttons" type="richtext.Buttons" advanced="true"><Default t="richtext.Default" /></Param><xtml t="field_aspect.Aspects"><FieldAspect t="field_aspect.WritableControl"><Control t="ui.TextControl"><Style t="richtext.RichText" Height="%$Height%" Width="%$Width%" Css="%$Css%"><Buttons t="xtml.UseParam" Param="Buttons" /></Style></Control></FieldAspect><FieldAspect t="field_aspect.TextSummary"><Text t="text.FirstSucceeding"><Item t="ui.HtmlUnderElement" /><Item1 t="text.MultiLang" Pattern="Open" /></Text></FieldAspect><FieldAspect t="field_aspect.ReadOnlyControl"><Control t="ui.HtmlControl" Html="%%" Css="%$Css%" /></FieldAspect></xtml></Component><Component id="MultiLineText" type="field_aspect.FieldType"><Param name="Style" type="textarea.Style"><Default t="textarea.Default" /></Param><Param1 name="NoWrap" type="data.Boolean" boolfeature="true"/><Param1 name="Rows" advanced="true" Default="5"/><Param1 name="Cols" advanced="true"/><Param1 name="AutoHeight" type="data.Boolean" advanced="true"/><xtml t="field_aspect.Aspects"><FieldAspect t="object.SetBooleanProperty" Object="%$_Field%" Property="MultiLineText" Value="true"/><FieldAspect t="object.SetProperty" Object="%$_Field%" Property="MultiLineTextStyle" Value="%$Style%" IsSingleProperty="true"/><FieldAspect t="field_aspect.SimpleInput"/><FieldAspect t="field_aspect.Resizer" /></xtml></Component><Component id="DefaultValue" type="field.FieldAspect"><Param name="Value" script="true" essential="true" /><Param name="ForceCData" type="data.Boolean" description="Relevant for field data of element. The value will always be cdata"/><xtml t="object.SetMethod" Object="%$_Field%" Method="DefaultValue"><Xtml t="xtml.UseParam" Param="Value" /></xtml></Component><Component id="ForceCData" type="field.FieldAspect" description="Relevant for field data of element. The value will always be cdata"><Param name="Value" script="true" essential="true" /><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="ForceCData" Value="true" /></Component><Component id="Hide" type="field.FieldAspect" category="ui" light="false"><Param name="New" type="data.Boolean"><Default value="true"/></Param><Param name="Edit" type="data.Boolean"><Default value="true"/></Param><Param name="ReadOnly" type="data.Boolean"><Default value="true"/></Param><xtml t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="HiddenForNew" Value="%$New%" /><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="HiddenForEdit" Value="%$Edit%" /><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="HiddenForReadOnly" Value="%$ReadOnly%" /></xtml></Component><Component id="CheckConditionForEveryItem" type="field_aspect.HiddenContition" execution="native"><Param name="ShowCondition" type="data.Boolean" script="true" /><Param1 name="DataForCondition" type="enum" Options="Item data,Field data" Default="Item data" /><Param name="WhenHidden" type="enum" Options="Do not render,Redner as hidden html" Default="Do not render" Description="Render as hidden html enables future visibility"/></Component><Component id="CheckConditionOnce" type="field_aspect.HiddenContition" execution="native"><Param name="ShowCondition" type="data.Boolean" script="true" description="condition is checked on the general data and not for each item" /></Component><Component id="Hidden" type="field.FieldAspect" execution="native" ><Param name="OnCondition" type="field_aspect.HiddenContition" /></Component><Component id="DisableByCondition" type="field.FieldAspect" category="ui" execution="native"><Param name="EnableCondition" type="data.Boolean" script="true" essential="true" /></Component><Component id="HideByCondition" type="field.FieldAspect" category="ui" execution="native"><Param name="ShowCondition" type="data.Boolean" script="true" essential="true" /><Param name="CheckConditionForEveryItem" type="data.Boolean"/></Component><Component id="ReadOnlyByCondition" type="field.FieldAspect" category="ui" execution="native" jbart="false"><Param name="WritableCondition" type="data.Boolean" script="true" essential="true" /></Component><Component id="HideInTable" type="field.FieldAspect" category="ui"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="HiddenForTable" Value="true"/></Component><Component id="HideInProperties" type="field.FieldAspect" category="ui"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="HiddenForProperties" Value="true"/></Component><Component id="ExpandCollapse" type="field_aspect.ExpandCollapse" gallery="ExpandCollapse"><Param name="TitleWhenCollapsed" script="true" /><Param name="ExpandCollapseButtonIcons" type="field_aspect.ExpandCollapseIcons" ><Default t="field_aspect.PlusMinus" /></Param><Param name="OnAfterExpandCollapse" script="true" type="operation.OperationAction"/><Param name="TitleBelowContent" type="data.Boolean"/><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Field%" Property="SectionExpandCollapse" Value="true"/><Action t="object.SetProperty" Object="%$_Field%" Property="SectionExpandedByDefault" Value="%$ExpandedByDefault%"/><Action t="object.SetProperty" Object="%$_Field%" Property="TitleWhenCollapsed" Value="%$TitleWhenCollapsed%"/><Action t="object.SetProperty" Object="%$_Field%" Property="ExpandCollapseButtonIcons" Value="%$ExpandCollapseButtonIcons%"/><Action t="object.SetProperty" Object="%$_Field%" Property="TitleBelowContent" Value="%$TitleBelowContent%"/><Action t="object.SetMethod" Object="%$_Field%" Method="TitleWhenCollapsed"><Xtml t="xtml.UseParam" Param="TitleWhenCollapsed"/></Action><Action t="object.SetMethod" Object="%$_Field%" Method="OnAfterExpandCollapse"><Xtml t="xtml.UseParam" Param="OnAfterExpandCollapse"/></Action></xtml></Component><Component id="PlusMinus" type="field_aspect.ExpandCollapseIcons" Image="%$_Images%/styles/PlusMinus.png" ><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Field%" Property="ExpandIcon" Value="%$_Images%/plus.gif"/><Action t="object.SetProperty" Object="%$_Field%" Property="CollapseIcon" Value="%$_Images%/minus.gif"/></xtml></Component><Component id="ArrowUpDown" type="field_aspect.ExpandCollapseIcons" Image="%$_Images%/styles/ArrowUpDown.png" ><xtml t="action.RunActions"><Action t="object.SetProperty" Object="%$_Field%" Property="ExpandIcon" Value="%$_Images%/expand_down.png"/><Action t="object.SetProperty" Object="%$_Field%" Property="CollapseIcon" Value="%$_Images%/expand_up.png"/></xtml></Component><Component id="TextSummary" type="field.FieldAspect" gallery="TextSummary" promoted="true" description="convert, transform, pre process text for display" execution="native"><Param name="Text" script="true" essential="true"><Default value="%%"/></Param><Param name="IgnoreEmptyValues" type="data.Boolean" /></Component><Component id="NumberFormat" type="field.FieldAspect" execution="native" category="number" hidden="true"><Param name="Format" script="true" type="text.NumberFormat" essential="true" Default="%%"/></Component><Component id="GroupAggregator" type="field.FieldAspect" category="group by" gallery="GroupBy" description="Display text in the group line for this field in group by mode"><Param name="Formula" type="data.Aggregator" script="true" essential="true" /><Param name="PostFormula" type="data.Data" script="true" Default="%%"/><xtml t="object.SetMethod" Object="%$_Field%" Method="GroupAggregator"><Xtml t="xtml.UseParam" Param="PostFormula"><Input t="xtml.UseParam" Param="Formula" /></Xtml></xtml></Component><Component id="GroupBySettings" type="field.FieldAspect" category="group by"><Param name="AutoExpandGroups" type="data.Boolean"/><Param name="UseImage" type="data.Boolean"><Default value="true"/></Param><Param name="ShowEmptyGroups" type="data.Boolean"/><Param name="GroupText" script="true"><Default value="%Name% (%Count%)"/></Param><xtml t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="GroupBy_AutoExpandGroups" Value="%$AutoExpandGroups%" /><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="GroupBy_UseImage" Value="%$UseImage%" /><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="GroupBy_ShowEmptyGroups" Value="%$ShowEmptyGroups%" /><Action t="object.SetMethod" Object="%$_Field%" Method="GroupBy_GroupText"><Xtml t="xtml.UseParam" Param="GroupText" /></Action></xtml></Component><Component id="ReadOnly" type="field.FieldAspect" category="model" description="Define this field as read only"><xtml t="object.SetMethod" Object="%$_Field%" Method="ReadOnly" Xtml="true" /></Component><Component id="Writable" type="field.FieldAspect" category="model" jbart="false" description="Define this field as writable in a read only group"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="Writable" Value="true" /></Component><Component id="OnKeyUp" type="field.FieldAspect" category="advanced" execution="native"><Param name="Action" type="operation.OperationAction" script="true" ParamVars="KeyCode" essential="true" /></Component><Component id="OnHover" type="field.FieldAspect" category="advanced" execution="native"><Param name="Action" type="operation.OperationAction" script="true" essential="true" /></Component><Component id="OnClick" type="field.FieldAspect" category="advanced" execution="native" description="triggerd when the user clicks on the field, not spcifically onchange"><Param name="Action" type="operation.OperationAction" script="true" essential="true" /></Component><Component id="Mandatory" type="field.FieldAspect" execution="native" category="textbox" description="Defines this field as mandatory and allows to modify the error message"><Param name="ErrorMessage" script="true"/></Component><Component id="Description" type="field.FieldAspect" execution="native" description="Field Description. Visible in property sheets and tables"><Param name="Description" essential="true" /></Component><Component id="Information" type="field.FieldAspect" execution="native" light="false"><Param name="Title" essential="true" /><Param name="Text" essential="true" /><Param name="Control" type="ui.Control" script="true"><Default t="ui.Section" Title="%$Title%"><Control t="ui.Text" Text="%$Text%" HtmlContents="true"/></Default></Param><Param name="Presentation" type="enum" Options="before,after,popup"><Default value="popup"/></Param><NativeHelper name="OpenInfoPopup" t="dialog.TogglePopup" OnElement="%$_InfoElement%" WidthOption="by css class" PopupCssClass="aa_info_popup" ShowCloseButton="true"><Contents t="xtml.UseParam" Param="Control"><Var name="Title" value="%$Title%"/><Var name="Text" value="%$Text%"/></Contents></NativeHelper><NativeHelper name="Ctrl" t="xtml.UseParam" Param="Control"><Var name="Title" value="%$Title%"/><Var name="Text" value="%$Text%"/></NativeHelper></Component><Component id="OpenInfoPopup" type="action.Action" hidden="true"><xtml t="dialog.TogglePopup" OnElement="%$_InfoElement%" PopupCssClass="aa_info_popup"  ShowCloseButton="true"><Contents t="ui.Text" Text="%Description%" /></xtml></Component><Component id="Title" type="field.FieldAspect" execution="native" category="ui"><Param name="Title" essential="true"  /></Component><Component id="SortMethod" type="field.FieldAspect" execution="native" category="list"><Param name="Method" type="enum" essential="true" ><Default value="lexical" /><value>lexical</value><value>numeric</value><value>date</value></Param></Component><Component id="HideTitle" type="field.FieldAspect" category="ui" promoted="true"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="HideTitle" Value="true"/></Component><Component id="ShowTitle" type="field.FieldAspect" category="ui" light="false"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="HideTitle" Value="false"/></Component><Component id="Calculated" type="field.FieldAspect" execution="native" category="calculated" gallery="Calculated"><Param name="Formula" script="true" essential="true"/><Param name="ManualOverride" type="data.Boolean"/><Param name="MathFormula" type="data.Boolean"/><Param name="PrimitiveField" type="data.Boolean"><Default value="true"/></Param><Param name="ToggleButtonCss" css="true" Default="{color: blue;cursor:pointer; padding-left: 5px; } #this:hover { text-decoration:underline; }" /></Component><Component id="RefreshDependentFields" type="field.FieldAspect" category="textbox" execution="native" description="Recalculate and refresh other fields when this field changes"><Param name="FieldsIds" type="dynamic_enum_multi" AllowValueNotInOptions="true" essential="true" ><Options t="field_dt.BrotherFieldIDs" /></Param><Param name="RefreshOn" type="enum"><Default value="every click" /><value>exit field</value><value>every click</value></Param><Param name="RefreshScope" type="enum" Options="table line,group,screen,document"><Default value="screen" /><value1 remark="depricated">item</value1></Param></Component><Component id="Password" type="field.FieldAspect" category="textbox" execution="native" jbart="false"><Param name="HashPassword" type="data.Boolean"><Default value="true"/></Param></Component><Component id="FilterField1" type="field.FieldAspect" category="filters" light="false" execution="native"><Param name="BasedOn" type="dynamic_enum" essential="true"><Options t="field_dt.ContainerFields" Container="%$PreviewCntr%" ><Var name="PreviewCntr" t="xtml.RunXtml" Xtml="%$PageXtml%" /></Options></Param></Component><Component id="FilterAspects" type="field.FieldAspect" category="list" description="Modify the filter control (e.g. DescriptionForEmptyText)"><Param name="Aspect" type="field.FieldAspect[]" script="true" essential="true" /><Param name="Type" essential="true" type="field_aspect.FieldType" script="true" /><xtml t="object.SetProperty" Object="%$_Field%" Property="FilterAspects" ><Value t="data.JustInTimeCalculation"><Content t="data.List"><Item t="xtml.UseParam" Param="Type" /><Item t="xtml.UseParamArray" Param="Aspect" /></Content></Value></xtml></Component><Component id="UnindentOptionPage" type="field.FieldAspect" category="picklist" hidden="true" deprecated="true" description="Deprecated"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="UnindentOptionPage" Value="true" /></Component><Component id="IndentOptionPage" type="field.FieldAspect" category="picklist" description="Indent the ontology page with the title\'s left"><xtml t="object.SetBooleanProperty" Object="%$_Field%" Property="IndentOptionPage" Value="true" /></Component><Component id="PopupWidth" type="field.FieldAspect" category="picklist" light="false"><Param name="WidthOption" type="enum" Options="launcher width,by css class" essential="true"><Default value="launcher width"/></Param><xtml t="object.SetProperty" Object="%$_Field%" Property="PopupWidthOption" Value="%$WidthOption%"/></Component><Component id="PopupStyle" type="field.FieldAspect"><Param name="Style" type="dialog_style.Style"/><xtml t="object.SetProperty" Object="%$_Field%" Property="PopupStyle" Value="%$Style%"/></Component><Component id="ItemInTree" type="field.FieldAspect" category="document tree" labs="true" description="Modify text, image or css/style of the tree node in a document tree"><Param name="ItemText" script="true" ><PreviewContext t="xtml_dt.PreviewContext" ><Input t="data.Pipeline"><Var name="Field" t="xtml.RunXtml" Xtml="%$_Xtml/..%" /><Item t="field_dt.PreviewFieldData" /><Item t="object.RunMethod" Object="%$Field%" Method="InnerItems" /><Item value="%Items%" /></Input></PreviewContext></Param><Param name="ItemImage" script="true"><PreviewContext t="xtml_dt.PreviewContext" ><Input t="data.Pipeline"><Var name="Field" t="xtml.RunXtml" Xtml="%$_Xtml/..%" /><Item t="field_dt.PreviewFieldData" /><Item t="object.RunMethod" Object="%$Field%" Method="InnerItems" /><Item value="%Items%" /></Input></PreviewContext></Param><Param name="ItemCss" /><xtml t="field_aspect.Aspects"><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="ItemTextInTree"><Xtml t="xtml.UseParam" Param="ItemText" /></FieldAspect><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="ItemImageInTree"><Xtml t="xtml.UseParam" Param="ItemImage" /></FieldAspect><FieldAspect t="object.SetMethod" Object="%$_Field%" Method="ItemCss"><Xtml t="xtml.UseParam" Param="ItemCss" /></FieldAspect></xtml></Component><Component id="HeaderFooterField" type="field.FieldAspect" category="list" gallery="HeaderFooterField" description="Single control, located in the header or footer of the list"><Param name="Location" type="enum" essential="true" ><Default value="header" /><value>header</value><value>footer</value></Param><Param name="RefreshStrategy" type="enum" Options="none,container change,item selection"><Default value="none" /></Param><Param name="Phase"><Default value="0"/></Param><Param name="HeaderFooterField" type="field.Fields" advanced="true" hidden="true"><Default value="%$_Field%"/></Param><xtml t="action.RunActions"><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="HeaderFooter" Value="true"/><Action t="object.SetBooleanProperty" Object="%$_Field%" Property="IsGroupOnlyForLayout" Value="false"/><Action t="object.SetProperty" Object="%$_Field%" Property="CntrAspects"><Value t="data.JustInTimeCalculation"><Content t="uiaspect.HeaderFooter" Identifier="%$HeaderFooterField/ID%" Location="%$Location%" RefreshStrategy="%$RefreshStrategy%"          Phase="%$Phase%"><Control t="field.ShowFieldControl" Field="%$HeaderFooterField%" Cntr="%$HeaderFooterCntr%"><Item t="xml.Xml"><headerfooterdata/></Item></Control></Content></Value></Action><Action t="field_aspect.HideInTable"/></xtml></Component><Component id="AutoUpdateMasterItem" type="field.FieldAspect" category="list,textbox"><xtml t="field_aspect.OnUpdate"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="RefreshMasterElement" /></xtml></Component><Component id="Hyperlink" type="field.FieldAspect" category="text" execution="native" gallery="Hyperlink" description="Shown as hyperlink and opens item details as default action"><Param name="Action" type="operation.OperationAction" script="true" ><Default t="operation.Open"/><RunningInput t="field_aspect.RunningInputFieldData" /></Param><Param name="Css" css="true" Default="#this { color: blue; cursor:pointer; text-decoration: none; } #this:hover { text-decoration: underline;}" /></Component><Component id="PropertiesWidth" type="field.FieldAspect" hidden="true" ><Param name="MinWidth" essential="true"/><xtml t="object.SetProperty" Object="%$_Field%" Property="PropertiesWidth" Value="%$MinWidth%"/></Component><Component id="RunningInputFieldData" type="data.Data" execution="native" hidden="true" /><Component id="LimitTextLength" type="field.FieldAspect" execution="native" category="text" gallery="LimitTextLength" decsription="Similar to css3 text-overflow: ellipsis"><Param name="MaxLength"><Default value="50"/></Param><Param name="CuttingMark"><Default value="..."/></Param><Param name="FullTextAsTooltip" type="data.Boolean"><Default value="true"/></Param></Component><Component id="PopupFeatures" type="field.FieldAspect" category="searchbox"><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="Style" type="dialog_style.Style" script="true"/><xtml t="action.RunActions"><Action t="object.SetMethod" Object="%$_Field%" Method="PopupFeatures"><Xtml t="xtml.UseParamArray" Param="Feature" /></Action><Action t="object.SetMethod" Object="%$_Field%" Method="PopupStyle"><Xtml t="xtml.UseParam" Param="Style" /></Action></xtml></Component><Component id="ImageInTextbox" type="field.FieldAspect" category="textbox" gallery="ImageInTextbox" execution="native" description="Defines an image in searchbox or picklist"><Param name="Image"><Default value="%$_Images%/search.png"/></Param><Param name="CssForImage"><Default value="margin: 0 0 -2px -22px"/></Param></Component><Component id="MobileScroll" type="field.FieldAspect" description="Inner scroll for mobile. uses iscroll-4" execution="native"><Param name="EnableScroll" type="data.Boolean"><Default value="true"/></Param><Param name="ScrollParams"><Default value="{zoom:true}" description="cubiq.org/iscroll-4"/></Param><Param name="Height" type="scroll.Height"><Default t="scroll.DeviceBottom" /></Param><Param name="Width" type="scroll.Width" /><Param name="OnElement" type="enum" Options="cell,content"><Default value="cell" /></Param></Component><Component id="CleanGlobalCss" type="data.Data" execution="native" light="false" Remark="used for tests"><Param name="Css" /></Component><Component id="AdaptCssForBrowser" type="data.Data" execution="native" light="false" ><Param name="Css" /></Component><Component id="Animation" type="field.FieldAspect" description="how it becomes visible" execution="native"><Param name="Type" type="animation.Animation" script="true"/><Param name="OnDone" type="operation.OperationAction" script="true"/></Component><Component id="DynamicSize" type="field.FieldAspect" description="apply height and width using device dimensions" execution="native"><Param name="Height" type="scroll_size.Height" /><Param name="Width" type="scroll_size.Width" /></Component></xtml><xtml ns="scroll"><Type id="Scroll" /><Type id="Height" /><Type id="Width" /><Component id="Scroll" type="field.FieldAspect" execution="native" category="group"><Param name="Scroll" type="scroll.Scroll"><Default value="scroll.BrowserScrollbar"/></Param><Param name="Height" type="scroll.Height"><Default t="scroll.DeviceBottom" /></Param><Param name="Width" type="scroll.Width" /></Component><Component id="Scroll2" type="field.FieldAspect" execution="native" category="group" light="false"><Param name="Style" type="itemlist_scroll.Style"><Default t="itemlist_scroll.BrowserScroll" /></Param><Param name="Height" type="scroll_size.Height"><Default t="scroll_size.FixedHeight" /></Param><Param name="Width" type="scroll_size.Width" /></Component><Component id="BrowserScrollbar" type="scroll.Scroll" execution="native" description="Native scrollbar"/><Component id="IScroll" type="scroll.Scroll" description="cubiq.org/iscroll-4 (touch scroll for mobiles)" execution="native"><Param name="ScrollParams"><Default value="{zoom:true}" description="cubiq.org/iscroll-4"/></Param><Param name="JsLocation"><Default value="lib/iscroll.js"/></Param></Component><Component id="NoScroll" type="scroll.Scroll" description="only limits the height/width" execution="native" ><Param name="Css" Default="overflow:hidden;" advanced="true" /></Component><Component id="TinyScroll" type="scroll.Scroll" description="JQuery Tiny Scrollbar plugin" execution="native"><Param name="Width" /><Param name="Css" advanced="true"><Default value="#this { } #this .viewport { overflow: hidden; position: relative;} #this .overview { list-style: none; position: absolute; left: 0; top: 0; padding: 0; margin: 0; } #this .scrollbar{ background: transparent url(images/tinyscroll/bg-scrollbar-track-y.png) no-repeat 0 0; position: relative; background-position: 0 0; float: right; width: 15px; } #this .track { background: transparent url(images/images/tinyscroll/bg-scrollbar-trackend-y.png) no-repeat 0 100\\%; height: 100\\%; width:13px; position: relative; padding: 0 1px; } #this .thumb { background: transparent url(images/tinyscroll/bg-scrollbar-thumb-y.png) no-repeat 50\\% 100\\%; height: 20px; width: 25px; cursor: pointer; overflow: hidden; position: absolute; top: 0; left: -5px; } #this .thumb .end { background: transparent url(images/tinyscroll/bg-scrollbar-thumb-y.png) no-repeat 50\\% 0; overflow: hidden; height: 5px; width: 25px; } #this .disable { display: none; }"/><FieldAspect t="field_dt.CodeMirrorFieldEditor" CompId="scroll.TinyScroll" ParamName="Css" /></Param><Param name="JsLocation" advanced="true"><Default value="lib/jquery.tinyscrollbar.min.js"/></Param></Component><Component id="DeviceBottom" type="scroll.Height" execution="native"><Param name="Delta"><Default value="0"/></Param><Param name="HtmlClassForDelta" Description="class of control to use its height as a delta"/></Component><Component id="FixedHeight" type="scroll.Height" execution="native"><Param name="Height"><Default value="400px"/></Param><Param name="HeightForNonMobile" /></Component><Component id="NoHeightScroll" type="scroll.Height"><xtml t="action.RunActions" /></Component><Component id="DeviceRight" type="scroll.Width" execution="native"><Param name="Delta"><Default value="0"/></Param></Component><Component id="FixedWidth" type="scroll.Width" execution="native"><Param name="Width"><Default value="400px"/></Param><Param name="WidthForNonMobile" /></Component><Component id="NoWidthScroll" type="scroll.Width"><xtml t="action.RunActions" /></Component></xtml><xtml ns="scroll_size"><Type id="Height" /><Type id="Width" /><Component id="FixedHeight" type="scroll_size.Height" execution="native" autoexpand="true"><Param name="Height" Default="400"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="ApplyOn" type="enum" Default="height" advanced="true"><value>height</value><value>min-height</value><value>max-height</value></Param></Component><Component id="DeviceWidth" type="scroll_size.Width" execution="native"><Param name="ReduceWidthOfOtherField" Description="Use field id here" ><FieldAspect t="field_dt.FieldIdParam"/></Param><Param name="ReducePixels" Description="E.g. 100 will reduce 100px" advanced="true" ><FieldAspect t="field_dt.SliderParam" /></Param><Param name="ApplyOn" type="enum" Default="width" advanced="true"><value>width</value><value>min-width</value><value>max-width</value></Param><Param1 name="Percentages" Description="E.g 80%"  advanced="true"><FieldAspect t="field_dt.SliderParam" Min="0" Max="100" Units="%" /></Param1><Param name="StretchFromCurrentLocation" type="data.Boolean" Default="true"  advanced="true"/></Component><Component id="DeviceHeight" type="scroll_size.Height" execution="native"><Param name="ReduceHeightOfOtherField" Description="Use field id here"><FieldAspect t="field_dt.FieldIdParam"/></Param><Param name="ReducePixels" Description="E.g. 100 will reduce 100px"  advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="ApplyOn" type="enum" Default="height" advanced="true"><value>height</value><value>min-height</value><value>max-height</value></Param><Param1 name="Percentages" Description="E.g 80%"  advanced="true"><FieldAspect t="field_dt.SliderParam" Min="0" Max="100" Units="%" /></Param1><Param name="StretchFromCurrentLocation" type="data.Boolean" Default="true"  advanced="true"/></Component><Component id="AutoHeight" type="scroll_size.Height"><xtml t="scroll_size.FixedHeight" Height="" /></Component><Component id="FixedWidth" type="scroll_size.Width" execution="native"><Param name="Width" Default="400"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="ApplyOn" type="enum" Default="width" advanced="true"><value>width</value><value>min-width</value><value>max-width</value></Param></Component></xtml><xtml ns="group"><Type id="GroupData" /><Component id="DataFlow" type="group.GroupData"><Param name="FlowData" script="true" /><xtml t="object.Object"><Method name="FieldData" t="xtml.UseParam" Param="FlowData" /><Method name="DataItems" t="data_items.Items" Items="%%" /></xtml></Component><Component id="TransientData" type="group.GroupData" ><xtml t="object.Object"><Method name="FieldData" t="xml.ByTag" /><Method name="DataItems" t="data_items.Items" Items="%%" /></xtml></Component><Component id="ContainerItems" type="group.GroupData"><xtml t="object.Object"><Method name="FieldData" value="%%" /><Method name="DataItems" value="%$_Cntr/Items%" /></xtml></Component><Component id="FilterQueryXml" type="group.GroupData" description="A query used to filter a container"><xtml t="object.Object"><Method name="FieldData" t="xml.ByTag" Tag="cntr_filters" /><Method name="DataItems" t="data_items.Items" Items="%%" /></xtml></Component></xtml></xtml><xtml package="true"><xtml ns="style_guide" plugin="mobile"><Component id="Mobile" type="jbart.StyleGuide"><xtml t="style_guide.Custom" ID="jbartMobile"><PrimaryButton t="button.FacebookMobile" /><SecondaryButton t="button.FacebookMobile" /></xtml></Component></xtml><xtml ns="mobile" plugin="mobile"><Type id="ResultsPage" /><Type id="SearchBoxStyle" style="true" customPT="mobile.CustomSearchBoxStyle" /><Component id="MobileSearchBoxFilter" type="field.Fields" advanceddt="true" execution="native"><Param name="SearchIn" /><Param name="Items" /><Param name="Style" type="mobile.SearchBoxStyle" ><Default t="mobile.DefaultSearchBoxStyle" /></Param><Param name="ResultsPage" type="mobile.ResultsPage" script="true" /><Param name="FieldAspect" type="field.FieldAspect[]" light="false" script="true" /><Param name="MaxItemsToShow" advanced="true" description="when exceeding, \'show all\' button appears" ><Default value="30" /></Param><Param name="NoResults" type="field.Fields" script="true" advanced="true"><Default t="field.Field" FieldData="No Results for %%" ><Type t="field_aspect.Text"/><FieldAspect t="field_aspect.Css" Inline="padding: 4px 3px; display:block"/></Default>    </Param><Param name="MatchedTextCss" css="true" Default="color: blue; font-weight: bold;" /><NativeHelper name="NoResultsControl" t="field.ShowFieldControl" ><Field t="object.RunMethod" Object="%$_SearchBoxContext%" Method="NoResultsField" /></NativeHelper><NativeHelper name="ResultsContainer" t="ui.ShowPage" Class="search_results"><Page value="%$_SearchBoxContext/ResultsPage%" /><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items" /><Aspect t="uiaspect.ItemClickable"><ClickAction t="object.RunMethod" Object="%$_SearchBoxContext%" Method="OnSelect" /></Aspect></PageParams></NativeHelper></Component><Component id="CustomPage" title="ResultsPage" type="mobile.ResultsPage"><Param name="Page" type="dynamic_enum" options_pt="bart_dt.BartPages"/><xtml t="bart.PageByID" PageID="%$Page%" /></Component><Component id="DefaultSearchBoxStyle" type="mobile.SearchBoxStyle"><xtml t="mobile.CustomSearchBoxStyle"><Html><![CDATA[<div><input class="searchbox" placeholder="Search ..."></input><span class="cancel_search"></span></div>]]></Html><Css><![CDATA[                   #this .cancel_search { background: url(%$_Images%/cancel_search.png) no-repeat 0 0px;										width: 16px;										height: 16px;										display: inline-block;										vertical-align: top;										margin-top: 5px;										display:none; 										cursor:pointer;									}  									#this .searchbox { border-radius: 7px; border: 1px solid #CCC; padding: 3px 5px; color: #252525; width:100px; }									#this .searchbox:focus { width:250px; }									]]></Css><Javascript><![CDATA[ function(searchbox) { searchbox.applySearchBox(\'.searchbox\');                                        searchbox.applyCancel(\'.cancel_search\');         };]]></Javascript></xtml></Component><Component id="GrowToFullWidth" type="mobile.SearchBoxStyle"><xtml t="mobile.CustomSearchBoxStyle"><Css><![CDATA[#this { padding:0; position:relative; } 			#this .cancel_search {   color:#F8F8FF; font-weight:bold; font-size: 10.5px; height: 16px;   border-radius: 4px; padding: 6px 12px 7px 12px; border: 1px solid #888;   background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#bbb), color-stop(100%,#555));        display:none;       cursor:pointer;      }  			.iphone #this .cancel_search { top:4px; }			#this .searchbox { -webkit-appearance: none; 			border: 1px solid #CCC; padding: 3px 10px; color: #252525; 			  width:95px; -webkit-box-shadow: inset 0 0 8px #ddd; font-size:12px;			  background1:white; border-radius: 13px;			height:20px; margin-top:1px; 			}			#this { margin:7px 0 0 5px; }			#this .searchbox { -webkit-transition: width 0.2s; }			]]></Css><Html><![CDATA[<div style1="position:relative;"><input class="searchbox" placeholder="Search ..." ></input><span class="cancel_search">Cancel</span><span class="focus_dummy" tabindex="0" /></div>]]></Html><Javascript><![CDATA[ function(searchbox) {			   searchbox.applySearchBox(\'.searchbox\');			   searchbox.applyCancel(\'.cancel_search\');			   searchbox.OnFocus = function(input) {             jQuery(searchbox).find(\'.cancel_search\').show();  			  input.style.width = ajaxart_screen_size(true).width - 100 + \'px\';			  };			   searchbox.OnCancel = function(input) {             jQuery(searchbox).find(\'.cancel_search\').hide();			       input.style.width = \'\';			   };			};]]></Javascript></xtml></Component><Component id="CustomSearchBoxStyle" type="mobile.SearchBoxStyle"><Param name="Html" codemirror="true" /><Param name="Css" codemirror="true" /><Param name="Javascript" codemirror="true" /><Param name="DesignTime_Save"><Field t="bart_dt.StyleSave" Type="button.Style" StylePT="button.CustomStyle" /></Param><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component><Component id="MobileDefaultFeatures" type="bart.ApplicationFeature" execution="native" in_dt_tree="true"><Param name="DisableScaling" type="data.Boolean" Default="true" /><Param name="AutoHideAddressBar" type="data.Boolean" Default="true" /><Param name="DisableTextAdjustionOnOrientation" type="data.Boolean" Default="true" /><Param name="EliminateMarginsFromHtmlBody" type="data.Boolean" Default="true" Description="sets margin:0 and padding:0 to html body"/></Component><Component id="MobileBottomPosition" type="field.FieldAspect" execution="native" desctiption="positions the field in the bottom of the screen. Handles iPhone issue that do not support position fixed."><Param name="PositionAbsoluteCss" Default="position:absolute; -webkit-transition:top 0.3s" /><Param name="PositionFixedCss" Default="position:fixed; bottom:0px; " /></Component><Component id="MobileTopPosition" type="field.FieldAspect" execution="native" desctiption="positions the field in the top of the screen. Handles iPhone issue that do not support position fixed."><Param name="PositionFixedCss" Default="position:fixed; top:0px; " /><Param name="PositionAbsoluteCss" Default="position:absolute; -webkit-transition:top 0.3s" /><Param name="SimulatorCss" Default="position:absolute;" /><Param name="UseAbsoluteWhenNoPositionFixed" type="data.Boolean" /></Component><Component id="SimpleMobileVerticalScroll" type="scroll.Scroll" description="a simplified version of iscroll" execution="native" /><Component id="HorizontalCurtain" type="field.Fields" description="An overlay page which opens and closes by horizontal touch" execution="native" advanceddt="true"><Param name="Field" type="field.Fields" light="false" script="true" essential="true"/><Param name="HandlersStyle" type="mobile_curtain.Style" script="true"><Default t="mobile_curtain.GrayHandlers" /></Param><Param name="StartAsOpen" type="data.Boolean" script="true" /><Param name="ID" advanced="true" /><Param name="OnClose" type="operation.OperationAction" script="true" advanced="true" /><Param name="OnOpen" type="operation.OperationAction" script="true" advanced="true" /><Param name="AutoMoveWithVerticalScroll" description="moves with vertical scroll to be always left to current scroll" type="data.Boolean" Default="true" /><NativeHelper name="Page" t="field.ShowFieldControl" Item="%%"><Field t="xtml.UseParam" Param="Field" /></NativeHelper></Component><Component id="IsMobileCurtainOpen" type="data.Boolean" execution="native"><Param name="CurtainId" /></Component><Component id="SlideMobileCurtain" type="operation.OperationAction" execution="native" description="opens or closed mobile curtain"><Param name="CurtainId" /><Param name="SlideTo" type="enum" Options="open,close,toggle" Default="toggle"/></Component><Component id="MobileDetailsReplacingAll" type="uiaspect.OpenIn" execution="native"><Param name="DetailsAnimation" type="animation.Animation" ><Default t="animation.ComingFromRight" TransitionType="350ms" /></Param><Param name="DetailsBackground" Default="white" /><Param name="ListAnimation" type="animation.HideAnimation" ><Default t="animation.GoingRight" TransitionType="350ms"/></Param><Param name="ListBackground" Default="white" /></Component></xtml><xtml ns="mobile_curtain"><Type id="Style" style="true" customPT="text_field.CustomStyle" /><Component id="GrayHandlers" type="mobile_curtain.Style"><xtml t="mobile_curtain.CustomStyle"><Html><![CDATA[<div><img class="open_curtain" src="http://lh6.googleusercontent.com/-SC_mul3Mra0/T7tLTJbW0dI/AAAAAAAAIzw/lvUO2oUQWU4/s128/slide_to_left.png" width="23px" height="73px"/><img class="close_curtain" src="http://lh4.googleusercontent.com/-JcQypVc81wE/T7tLTFmA3WI/AAAAAAAAIzw/s1IfmJAWEw0/s128/slide_to_right2.png" width="23px" height="73px"/></div>                    ]]></Html><Css><![CDATA[          .open_curtain { position:absolute; z-index:3; opacity:0.8; }          .close_curtain { position:absolute; z-index:3; opacity:0.8; }           #cntr .aa_curtain { -webkit-transition: top 500ms; border:3px solid green;}          ]]></Css><Javascript><![CDATA[          function(curtain,context) {                      aa_addOnAttach(curtain, function() {                  var open_curtain = jQuery(curtain).find(".open_curtain")[0];                  var close_curtain = jQuery(curtain).find(".close_curtain")[0];                  var set_size = function() {                    open_curtain.style.top = close_curtain.style.top = ajaxart_screen_size(true).height/2 - jQuery(open_curtain).height()/2 + "px";                    open_curtain.style.left = ajaxart_screen_size(true).width - jQuery(open_curtain).width() + "px";                    close_curtain.style.left = ajaxart_screen_size(true).width + "px";                  };                  set_size();                  window.addEventListener("resize", set_size);            });          }          ]]></Javascript></xtml></Component><Component id="CustomStyle" type="mobile_curtain.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml ns="notification_box"><Component id="NotificationBox" type="field.Control" execution="native"><Param name="ID" Default="notification" /><Param name="Style" type="notification_box.Style"><Default t="notification_box.Default" /></Param></Component><Type id="Style" style="true" customPT="notification_box.CustomStyle" /><Component id="Default" type="notification_box.Style"><Param name="DurationTime" Default="2000" /><xtml t="notification_box.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[{ background: #98AFC7; border-radius: 10px; padding: 5px 20px; color: white; font-weight: bold; height: 16px; display:none;}#this.shown { display: inline; }#this.aanotif_status_error { background: pink; }        ]]></Css><Javascript><![CDATA[function(notificationBox) {  var jBox = jQuery(notificationBox);   notificationBox.bind(\'notification\',function(evt) {     notificationBox.setStatusClass( evt.status );     jBox.html(evt.text);     jBox.css(\'opacity\',\'0\');     jBox.addClass(\'shown\');     if (evt.status == \'clear\') jBox.removeClass(\'shown\');     jBox.animate({opacity: 1},\'slow\');     if (evt.status == \'saving\') return;          setTimeout(function() {       jBox.animate({opacity: 0},\'slow\', function() { jBox.html(\'\'); jBox.removeClass(\'shown\');});      },%$DurationTime%);  });          }]]></Javascript></xtml></Component><Component id="CustomStyle" type="notification_box.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" jsMetaData="notification_box.JsMetadata" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component><Component id="ShowNotification" type="operation.OperationAction" execution="native"><Param name="NotificationBox" Default="notification" description="One must create a notification box to show the notification. Insert the notification box id here" /><Param name="Text" /><Param name="Status" type="enum" Options="saving,saved,error,info" Default="info" /></Component><Component id="JsMetadata" type="styles_dt.JavascriptMetadata"><xtml t="styles_dt.JavascriptMetadata"><Snippet t="styles_dt.Snippet" Name="Listen to notification event" Object="notificationBox"><Code><![CDATA[notificationBox.bind(\'notification\',function(evt) {     notificationBox.innerHTML = evt.text;     notificationBox.setStatusClass( evt.status );  });]]></Code></Snippet></xtml></Component></xtml><xtml package="true"><xtml ns="style_guide"><Component id="Custom" type="jbart.StyleGuide" light="false"><Param name="ID" /><Param name="PrimaryButton" type="button.Style" /><Param name="SecondaryButton" type="button.Style" /><Param name="Hyperlink" type="button.Style" /><Param name="DialogStyle" type="dialog_style.Style" /><Param name="TextboxCss" /><Param name="ColorPallette" /><xtml t="xtml.CopyAllParams" /></Component><Component id="JBart" type="jbart.StyleGuide"><xtml t="style_guide.Custom" ID="jbart"><PrimaryButton t="button.JBart" /><SecondaryButton t="button.JBart" /><Hyperlink t="button.JBartHyperlink" /></xtml></Component><Component id="StyleFromStyleGuide" type="data.Data" execution="native"><Param name="Style" /></Component></xtml><xtml ns="jbart"><Component id="TextboxCss" type="data.Data"><xtml t="data.FirstSucceeding"><Item value="%$_BartContext/StyleGuide/TextboxCss%" /><Item><![CDATA[         #this { border:1px solid #BDC7D8; font-size:11px; padding:3px; height: 16px; width: 150px;background:url(%$_Images%/css/shadow2.png) repeat-x scroll 0 0 transparent;}          #this.readonly { border:none !important; }         #this.selected { background: #D9E8FB !important}        ]]></Item></xtml></Component></xtml><xtml ns="ui"><Component id="CustomStyle" type="data.Data"><Param name="Html" codemirror="true" /><Param name="Css" codemirror="true" /><Param name="Javascript" codemirror="true" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /><BooleanProperty name="IsTriplet" value="true" /></xtml></Component></xtml><xtml ns="style" jbart="true"><Type id="SectionStyle" style="true" image_width="160px" tile_width="180px" /><Component id="YellowBox" type="style.SectionStyle"><xtml value="aa_yellowbox" /></Component><Component id="ThickTitle1" type="style.SectionStyle" Image="%$_Images%/styles/ThickTitle1.png"><xtml value="thick_title1" /></Component></xtml><xtml ns="transition" jbart="true"><Type id="Transition" /><Component id="LeftSlide" type="transition.Transition" execution="native" ><Param name="Duration" description="time in miliseconds" Default="300" /><Param name="Background" Default="white" /></Component><Component id="RightSlide" type="transition.Transition" execution="native" ><Param name="Duration" description="time in miliseconds" Default="300" /><Param name="Background" Default="white" /><Param name="CoverLeftMargin" type="data.Boolean" Default="true" /></Component></xtml><xtml ns="searchbox" jbart="true"><Type id="Style" style="true" customPT="searchbox.CustomStyle" /><Component id="Round" type="searchbox.Style"><xtml t="button.CustomStyle"><Html><![CDATA[<input />]]></Html><Css><![CDATA[#this { color:#565656; font: 12px Arial; width: 300px; border-radius: 8px; padding: 6px 0 6px 10px; }]]></Css></xtml></Component><Component id="CustomStyle" type="searchbox.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="button" jbart="true"><Type id="Style" style="true" customPT="button.CustomStyle" /><Component id="Arrow" type="button.Style"><Param name="Direction" type="enum" Options="Left,Right,Top,Bottom" Default="Left"/><Param name="Color" Default="black"/><Param name="Size" Default="10"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="BackgroundColor" Default="white" advanced="true"/><xtml t="button.CustomStyle"><Html><![CDATA[<div class="aa_button_clickable"/>]]></Html><Css><![CDATA[#this { color:black; width:0px; height:0px;border-style: solid;    }  #this:hover { cursor: pointer; }  ]]></Css><Javascript><![CDATA[function(button) {    button.setOnClick(\'.aa_button_clickable\',button.Action);    var sides = [\'Left\',\'Right\',\'Top\',\'Bottom\'];    var size = parseInt(\'%$Size%\' || \'10\');    var jbtn = jQuery(button);    for(var i=0;i<sides.length;i++) {       var side = sides[i];       if (side == \'%$Direction%\') {          jbtn.css(\'border\' + side + \'Width\',\'\' + (size +1) + \'px\');          jbtn.css(\'border\' + side + \'Color\',\'%$Color%\');       } else {          jbtn.css(\'border\' + side + \'Width\',\'\' + size + \'px\');          jbtn.css(\'border\' + side + \'Color\',\'%$BackgroundColor%\');       }    }  }]]></Javascript></xtml></Component>    <Component id="PrimaryButton" type="button.Style"><xtml t="data.FirstSucceeding"><Item t="style_guide.StyleFromStyleGuide" Style="PrimaryButton" /><Item t="button.JBart" /></xtml></Component><Component id="SecondaryButton" type="button.Style"><xtml t="data.FirstSucceeding"><Item t="style_guide.StyleFromStyleGuide" Style="SecondaryButton" /><Item t="button.JBart" /></xtml></Component><Component id="Hyperlink" type="button.Style"><xtml t="data.FirstSucceeding"><Item t="style_guide.StyleFromStyleGuide" Style="Hyperlink" /><Item t="button.JBartHyperlink" /></xtml></Component><Component id="JBart" type="button.Style" styleGuide="jbart"><xtml t="button.CustomStyle" Html="&lt;span class=&quot;aa_button_clickable&quot; tabindex=&quot;1&quot;&gt;&#xd;  &lt;span class=&quot;aa_outer_btn&quot;&gt;&#xd;    &lt;span class=&quot;aa_button_text&quot;/&gt;&#xd;  &lt;/span&gt;&#xd;  &lt;br/&gt;&#xd;&lt;/span&gt;" Css="#this br { line-height:25px; }&#xa;&#xa;#this .aa_outer_btn { height:25px; cursor:pointer; color:black;color2:rgb(31,73,125); font-family: Arial; font-size:12px; float:left; background:url(%$_Images%/css/button.png) no-repeat left top; padding:0 0 0 6px; }&#xa;&#xa;#this .aa_button_text { height:18px; float:left; background:url(%$_Images%/css/button.png) no-repeat right top; padding:4px 15px 3px 6px; }&#xa;&#xa;#this.pressed .aa_outer_btn { background-position:0 -28px; }&#xa;#this.pressed .aa_button_text { background-position:100\\% -28px; padding:5px 15px 2px 6px; }&#xa;" Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action,true);&#xa;}"/></Component><Component id="JBartHyperlink" type="button.Style"><Param name="Spacing" Default="4px" /><Param name="Color" Default="blue" /><xtml t="button.CustomStyle"      Html="&lt;span class=&quot;aa_button_clickable&quot;&gt;&#xd;  &lt;span class=&quot;aa_button_img&quot;/&gt;&#xd;  &lt;span class=&quot;aa_button_text&quot;/&gt;&#xd;&lt;/span&gt;"      Css="#this { color: %$Color% ;cursor:pointer;text-decoration: none;font-family:&quot;lucida grande&quot;,tahoma,verdana,arial,sans-serif;&#xa;font-size:11px; padding-left1:7px; paddding-right: 7px; }&#xa;#this &gt;.aa_button_text:hover { text-decoration: underline }&#xa;#this .aa_button_img img { cursor:pointer; padding-bottom:2px; padding-right: %$Spacing%; vertical-align:middle; }"      Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}" /></Component><Component id="LightHyperlink" type="button.Style"><xtml t="button.CustomStyle"      Html="&lt;span class=&quot;aa_button_clickable&quot;&gt;&#xd;  &lt;span class=&quot;aa_button_img&quot;/&gt;&#xd;  &lt;span class=&quot;aa_button_text&quot;/&gt;&#xd;&lt;/span&gt;"      Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Css><![CDATA[#this { color: #333; cursor:pointer;text-decoration: none;font: 10px Arial; paddding-left: 4px; }#this >.aa_button_text:hover { text-decoration: underline }#this .aa_button_img img { cursor:pointer; padding-bottom:2px; padding-right: 4px; vertical-align:middle; }      ]]></Css></xtml></Component><Component id="LinkWithText" type="button.Style"><Param name="Font" Default="font-family: arial; font-size:12px;" /><xtml t="button.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this { %$Font%; }.aa_btn_link { color: blue ;  cursor:pointer;  text-decoration: none;  paddding-right: 7px; }.aa_btn_link:hover { text-decoration: underline; }]]></Css><Javascript><![CDATA[function(button) {  button.setInnerHTML(\'\',button.text);  jQuery(button).find(\'a\').addClass(\'aa_btn_link\');  button.setOnClick(\'.aa_btn_link\',button.Action);}]]></Javascript></xtml></Component><Component id="Red" type="button.Style"><xtml t="button.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {border: 1px solid;background-color: #650d0d;background-image: -webkit-gradient(linear, 0 0, 0 100\\%, from(#5b0a0a), to(#bd1717));background-image: -moz-linear-gradient(top, #5b0a0a, #bd1717);background-image: -ms-linear-gradient(top, #5b0a0a, #bd1717);background-image: -webkit-linear-gradient(top, #5b0a0a, #bd1717);background-image: -o-linear-gradient(top, #5b0a0a, #bd1717);background-image: linear-gradient(top, #5b0a0a, #bd1717);background-repeat: repeat-x;border-color: #030303;filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);color: white;padding: 9px 14px;font-size: 15px;line-height: normal;border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;text-align:center;cursor: pointer;-webkit-appearance: button;}#this:hover { background-image: -webkit-gradient(linear, 0 0, 0 100\\%, from(#bd1717), to(#5b0a0a));}#this:active { background-color: #890e12; background-image: none;}]]></Css><Javascript><![CDATA[function(button) {  button.setInnerHTML(\'\',button.text);    button.setOnClick(\'\',button.Action);}]]></Javascript></xtml></Component>  <Component id="NativeButton" type="button.Style"><xtml t="button.CustomStyle"><Html><![CDATA[<button />]]></Html><Css><![CDATA[#this {}#this:hover {}#this:active {}]]></Css><Javascript><![CDATA[function(button) {  button.setInnerHTML(\'\',button.text);    button.setOnClick(\'\',button.Action);}]]></Javascript></xtml></Component><Component id="ImageOnly" type="button.Style"><xtml t="button.CustomStyle" Html="&lt;span class=&quot;aa_button_img aa_button_clickable&quot;/&gt;" Css="#this { cursor: pointer }" Javascript="function(button) {&#xa;  button.setAttribute(\'title\',button.tooltip);&#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"/></Component><Component id="MobileNative" type="button.Style" styleGuide="jbartMobile" ><Param name="BackgroundColor"><Default value="#2070e9;" /></Param><Param name="Color" advanced="true"><Default value="white" /></Param><Param name="PressedBackgroundColor" advanced="true"><Default value="rgba(0,0,0,.64)" /></Param><Param name="TextShadow" advanced="true"><Default value="rgba(0,0,0,.4) 0 -1px 0" /></Param><Param name="LineHeight" advanced="true"><Default value="29px" /></Param><Param name="MinWidth"><Default value="30px" /></Param><xtml t="button.CustomStyle" Html="&lt;button class=&quot;aa_button_clickable aa_button_text&quot; tabindex=&quot;1&quot;/&gt;"      Css="#this &#xa;{&#xa;min-width: %$MinWidth%; cursor:pointer; background: -webkit-gradient(linear, left top, left bottom,color-stop(0, rgba(255,255,255,0.25)),color-stop(0.1, rgba(255,255,255,.4)),color-stop(1, rgba(255,255,255,.1)) ),-webkit-gradient(linear, left top, left bottom,from(transparent),to(rgba(0,0,64,.05)) );&#xa;  -webkit-border-radius: 5px;&#xa;  border: solid 1px rgba(0,0,0,.25);&#xa;  border-top-color: rgba(0,0,0,.6);&#xa;  -webkit-box-sizing: border-box;&#xa;  -webkit-box-shadow: 0 1px 0 rgba(255,255,255,.3);&#xa;  font-family: inherit;&#xa;font-size: 12px;&#xa;font-weight: bold;&#xa;text-shadow: %$TextShadow%;&#xa;text-decoration: none;&#xa;text-align: center;&#xa;line-height: %$LineHeight%;&#xa;color: %$Color%;&#xa;  background-color: %$BackgroundColor%;&#xa;background-repeat: no-repeat;&#xa;background-position: top left, bottom left;&#xa;-webkit-background-size: 100\\% 14px, 100\\%;&#xa;}&#xa;&#xa;#this:disabled {&#xa;color: rgba(255,255,255,0.65)&#xa;}&#xa;#this:active:not(:disabled) {&#xa;background-color: %$PressedBackgroundColor%;&#xa;}&#xa;"      Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}" /></Component>      <Component id="MobileButton1" type="button.Style"><xtml t="button.CustomStyle" Html="&lt;button class=&quot;aa_button_clickable aa_button_text&quot; tabindex=&quot;1&quot;/&gt;" Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Css><![CDATA[#this {min-width: 30px; cursor:pointer; background: -webkit-gradient(linear, left top, left bottom,color-stop(0, rgba(255,255,255,0.25)),color-stop(0.1, rgba(255,255,255,.4)),color-stop(1, rgba(255,255,255,.1)) ),-webkit-gradient(linear, left top, left bottom,from(transparent),to(rgba(0,0,64,.05)) );  -webkit-border-radius: 5px;  border: solid 1px rgba(0,0,0,.25);  border-top-color: rgba(0,0,0,.6);  -webkit-box-sizing: border-box;  -webkit-box-shadow: 0 1px 0 rgba(255,255,255,.3);  font-family: inherit;font-size: 12px;font-weight: bold;text-shadow: #DDD 1px 1px 0;text-decoration: none;text-align: center;padding:3px 8px;color: #222;background-color: #87CBFF;background-repeat: no-repeat;background-position: top left, bottom left;-webkit-background-size: 100\\% 14px, 100\\%;}#this:disabled {color: rgba(255,255,255,0.65)}#this:active:not(:disabled) {background-color: rgba(0,0,0,.64);}]]></Css></xtml></Component><Component id="ToolbarButton" type="button.Style"><xtml t="button.CustomStyle" Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}" Html="&lt;div class=&quot;aa_button_clickable&quot;&gt;&#xa;  &lt;div class=&quot;aa_button_img&quot;/&gt;&#xa;  &lt;div class=&quot;aa_button_text&quot;/&gt;&#xa;&lt;/div&gt;"><Css><![CDATA[#this:hover { opacity:1; } #this { opacity:0.7; padding: 4px 1px; border:1px solid #ddd; cursor:pointer;width: 67px; border-radius: 8px; margin-right: 2px; background: #FBFBFB; text-align: center; }#this >.aa_button_text { padding: 6px 0 3px; font: 11px tahoma;}]]></Css></xtml></Component><Component id="StudioBarButton" type="button.Style"><xtml t="button.CustomStyle" Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;  button.setImageSource(\'.aa_button_img\',button.image);  &#xa;  button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}" Html="&lt;div class=&quot;aa_button_clickable&quot;&gt;&#xa;  &lt;div class=&quot;aa_button_img&quot;/&gt;&#xa;  &lt;div class=&quot;aa_button_text&quot;/&gt;&#xa;&lt;/div&gt;"><Css><![CDATA[          #this { opacity:0.85; white-space: nowrap;}          #this:hover { opacity:1; }	        #this { padding: 5px 1px 3px 1px; cursor:pointer;text-decoration: none;font-family:"lucida grande",tahoma;	        font-size:11px; width: 67px;margin-right: 2px; text-align: center; }	        #this >.aa_button_text { padding-top: 5px; color: #444; }	        #this >.aa_button_img { height:24px; }  	          ]]></Css><Css></Css></xtml></Component><Component id="FacebookMobile" type="button.Style" styleGuide="jbartMobile"><xtml t="button.CustomStyle" Html="&lt;button class=&quot;aa_button_clickable aa_button_text&quot; tabindex=&quot;1&quot;/&gt;" Javascript="function(button) {&#xa;  button.setInnerHTML(\'.aa_button_text\',button.text);  &#xa;button.setOnClick(\'.aa_button_clickable\',button.Action);&#xa;}"><Css><![CDATA[#this {min-width: 32px;color: #505C77;text-shadow: 0 1px 0 rgba(255, 255, 255, .6);  background: -webkit-gradient( linear, left top, left bottom, from(#FDFEFE), to(#F0F1F2) );-webkit-box-shadow: inset 0 1px 0 white, 0 1px 0 rgba(0, 0, 0, .08);-webkit-background-clip: padding-box;border: solid 1px;-webkit-border-radius: 4px;-webkit-box-sizing: border-box;display: inline-block;font-weight: bold;line-height: 27px;overflow: hidden;padding: 0 8px;text-overflow: ellipsis;white-space: nowrap;box-sizing: border-box;  font-size: 12px;cursor: pointer;text-align: center;font-family: sans-serif;-webkit-text-size-adjust: none;-webkit-user-select: none;border-color: #CCC;}#this:disabled {color1: rgba(255,255,255,0.65)}#this:active:not(:disabled) {background-color1: rgba(0,0,0,.64);}]]></Css></xtml></Component><Component id="CustomStyle" type="button.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="itemlist" jbart="true"><Type id="Style" customPT="itemlist.CustomStyle"/><Component id="Tiles" type="itemlist.Style" hidden="true"><Param name="Height"><Default value="150px"/></Param><Param name="Width"><Default value="200px"/></Param><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xd;    &lt;div class=&quot;imgdiv&quot;&gt;&#xd;      &lt;div class=&quot;itemimg&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;    &lt;div class=&quot;right aa_box_vertical&quot;&gt;&#xd;      &lt;div class=&quot;itemtext&quot;/&gt;&#xd;      &lt;div class=&quot;more_fields&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;  &lt;/div&gt;&#xd;&lt;/div&gt;" Css="#this { width: 100\\% }&#xa;#this .item { float:left; padding: 0 10px 10px 0; }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }&#xa;#this .itemtext { font-family: \'Arial\'; font-weight: bold; padding: 10px 0 0 0; text-align: center;}&#xa;#this .imgdiv { text-align: center; }&#xa;#this .item { height:%$Height%; width:%$Width%; overflow:hidden; } &#xa; #cntr .PartialViewSummary { padding: 15px 10px;  }" Javascript="function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.more_fields\');  });}"/></Component><Component id="LeftMaster" type="itemlist.Style" hidden="true"><Param name="Spacing" Default="5px" /><Param name="Border"><Default value="border-right: 1px solid black" /></Param><xtml t="itemlist.CustomStyle"      Html="&lt;div class=&quot;aa_box_vertical&quot;&gt;&#xd;  &lt;div class=&quot;item aa_box_horizontal&quot;&gt;&#xd;    &lt;div class=&quot;imgdiv&quot;&gt;&#xd;      &lt;img class=&quot;itemimg&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;    &lt;div class=&quot;right aa_box_vertical&quot;&gt;&#xd;      &lt;div class=&quot;itemtext&quot;/&gt;&#xd;      &lt;div class=&quot;more_fields&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;  &lt;/div&gt;&#xd;&lt;/div&gt;"      Css="#this { %$Border%; width: 260px; overflow:hidden;}&#xa;#this .item {  border-bottom: 1px solid #ccc; padding: 5px 5px 5px 0; width:260px }&#xa;#this .itemtext { font-weight: bold; padding-bottom: 10px; }&#xa;#this .imgdiv { padding-right: %$Spacing% }&#xa;&#xa;#this .aa_selected_item { padding: 5px 0;&#xa;background: -webkit-gradient(linear, right top, right bottom, color-stop(0.6,#fff), color-stop(1,#0096db)); background: -moz-linear-gradient(center top , #fff 60\\%, #0096DB 100\\%); &#xa;}"      Javascript="function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.more_fields\');  });}" /></Component>  <Component id="HorizontalHtmlTable" type="itemlist.Style"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="itemlist.CustomStyle"><Html><![CDATA[<div><table cellpadding="0" cellspacing="0"><tbody><tr><td class="item" /></tr></tbody></table></div>]]></Html><Css><![CDATA[#this >table>tbody>tr>td { vertical-align: top; padding-right: %$Spacing%px; }#this >table>tbody>tr>td:last-child { padding-right: 0;}]]></Css><Javascript><![CDATA[function(itemlist) {     itemlist.setItems({      itemElement: \'.item\',      initItem: function(item) {             item.setFields(\'\');      }    });  }]]></Javascript></xtml></Component>      <Component id="VerticalItems" type="itemlist.Style" hidden="true"><Param name="StyleForItem"><Default value="padding-bottom: 10px"/></Param><xtml t="itemlist.CustomStyle" Html="&lt;div class=&quot;aa_box_vertical&quot;&gt;&#xa;  &lt;div class=&quot;item&quot;&gt;&#xa;    &lt;div class=&quot;more_fields&quot;/&gt;  &#xa;  &lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item {  %$StyleForItem% }&#xa;&#xa;" Javascript="function(itemlist) {  &#xa;    itemlist.setItemsOld(\'.item\',function(item) {     &#xa;       item.setFields(\'.more_fields\');  &#xa;    });&#xa;}"/></Component>     <Component id="TilesBox1" type="itemlist.Style" hidden="true"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;    &lt;div class=&quot;imgdiv&quot;&gt;&#xa;      &lt;div class=&quot;itemimg&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;    &lt;div class=&quot;right aa_box_vertical&quot;&gt;&#xa;      &lt;div class=&quot;itemtext aa_text&quot;/&gt;&#xa;      &lt;div class=&quot;more_fields&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;  &lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:%$Width%; height:%$Height%; overflow:hidden; }&#xa;#this { width: 100\\%;  }&#xa;#this .item { border:1px solid lightgray; border-radius:10px; margin:5px 5px 0 0px; float:left; padding: 5px 10px 10px 10px;  }&#xa;#this .itemtext { font-family: \'Arial\';margin-bottom:5px; max-width:150px; font-weight: bold; padding: 10px 0 0 0; text-align1: center;}&#xa;#this .imgdiv { float: left; margin:10px 10px 0 0px; }" Javascript="function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.more_fields\');  });}"/><Param name="Height"><Default value="80px"/></Param><Param name="Width"><Default value="250px"/></Param></Component><Component id="SimpleList" type="itemlist.Style"><xtml t="itemlist.CustomStyle"><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {         item.setFields(\'.fields\');  });}]]></Javascript><Html><![CDATA[<div><div class="item fields" /></div>]]></Html></xtml></Component><Component id="TilesBox2" type="itemlist.Style" hidden="true"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;itemtext&quot;/&gt;&#xa;&lt;table cellspacing=0 cellpadding=0&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&quot;imgdiv&quot;&gt;&#xa;      &lt;div class=&quot;itemimg&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;&lt;/td&gt;&lt;td class=&quot;fields&quot;&gt;&#xa;    &lt;div class=&quot;right aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;more_fields&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xa;  &lt;/div&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:300px; height:130px; }&#xa;#this { width: 100\\%;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }&#xa;#this .fields { vertical-align:top; }&#xa;#this .content {-webkit-box-orient: horizontal;  }&#xa;#this .item { border:1px solid #EDEDED; border-radius:10px; margin:5px 5px 0 0px; float:left; padding: 5px 10px 10px 10px;   }&#xa;#this .itemtext { font-family: \'Arial\';font-size:13px; color:#112566; margin-bottom:5px; max-width:300px; font-weight: bold; padding: 10px 0 0 0; text-align1: center;}&#xa;#this .itemtext { text-shadow: 1px 1px 1px lightgray; }&#xa;#this .imgdiv { margin-right:10px;}" Javascript="function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.more_fields\');  });}"/></Component><Component id="TilesBox3" type="itemlist.Style" hidden="true"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;itemtext aa_text&quot;/&gt;&#xa;&lt;table cellspacing=0 cellpadding=0&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&quot;imgdiv&quot;&gt;&#xa;      &lt;div class=&quot;itemimg&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;&lt;/td&gt;&lt;td class=&quot;fields&quot;&gt;&#xa;    &lt;div class=&quot;right aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;more_fields&quot;/&gt;&#xa;    &lt;/div&gt;&#xa;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xa;  &lt;/div&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:300px; height:130px; position:relative; overflow: hidden; }&#xa;#this { width: 100\\%; }&#xa;#this .fields { vertical-align:top; padding-top: 10px;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }&#xa;#this .item { border:1px solid #EDEDED; border-radius:10px; margin:10px 10px 0 0px; float:left; padding: 5px 10px 10px 10px; }&#xa;#this .item { box-shadow: 2px 2px 3px 1px lightgray; }&#xa;#this .itemtext { font-family: \'Arial\'; font-size:13px; color:#112566; margin-bottom:5px; max-width:300px; font-weight: bold; padding: 10px 0 0 0; text-align1: center;}&#xa;#this .itemtext { text-shadow: 1px 1px 1px lightgray; }&#xa;#this .imgdiv { margin-right:10px;}" Javascript="function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.more_fields\');  });}"/><Param name="Height"><Default value="130px"/></Param><Param name="Width"><Default value="300px"/></Param></Component><Component id="Tiles" type="itemlist.Style"><Param name="Width" Default="300px" advanced="true" /><Param name="Height" Default="130px" advanced="true"/><Param name="Shadow" Default="2px 2px 3px 1px lightgray" advanced="true"/><Param name="Border" Default="1px solid #EDEDED" advanced="true"/><Param name="BorderRadius" Default="10px" advanced="true"/><xtml t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this .item { width:%$Width%; height:%$Height%; position:relative; overflow: hidden; }#this>div>.fields { vertical-align:top; padding-left:5px; padding-top: 10px;  }#this>div>.fields { font-size:12px;  font-family: \'Arial\'; }#this>.item { border: %$Border%; border-radius:%$BorderRadius%; margin:10px 10px 0 0px; float:left; padding: 5px 10px 10px 10px; box-shadow: %$Shadow%; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {         item.setFields(\'.fields\');  });}]]></Javascript></xtml></Component><Component id="Tiles1" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:300px; height:130px; position:relative; overflow: hidden; }&#xa;#this { width: 100\\%; }&#xa;  #this .fields { vertical-align:top; padding-left:5px; padding-top: 10px;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }&#xa;#this .item { border:1px solid #EDEDED; border-radius:10px; margin:10px 10px 0 0px; float:left; padding: 5px 10px 10px 10px; }&#xa;#this .item { box-shadow: 2px 2px 3px 1px lightgray; }&#xa;#this .itemtext { font-family: \'Arial\'; font-size:13px; color:#112566; margin-bottom:5px; max-width:300px; font-weight: bold; padding: 10px 0 0 0; text-align1: center;}&#xa;#this .itemtext { text-shadow: 1px 1px 1px lightgray; }&#xa;#this .imgdiv { margin-right:10px;}" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"/></Component><Component id="Tiles2" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:300px; height:120px; position:relative; overflow: hidden; }&#xa;#this { width: 100\\%; }&#xa;#this .fields { vertical-align:top; padding-left:5px; padding-top: 10px;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }&#xa;#this .item { border:1px solid lightgray; border-radius:10px; margin:5px 5px 0 0px; float:left; padding: 5px 10px 10px 10px;  }&#xa;" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"/></Component><Component id="TilesNoBox" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { width:300px; height:120px; position:relative; overflow: hidden; }&#xa;#this { width: 100\\%; }&#xa;#this .fields { vertical-align:top; padding-left:5px; padding-top: 10px;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }&#xa;#this .item { margin:5px 5px 0 0px; float:left; padding: 5px 10px 10px 10px;  }&#xa;" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"/></Component><Component id="Line1" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"><Css><![CDATA[#this .item { width:500px; height:100px; position:relative; overflow: hidden; }		#this { width: 100\\%; }		  #this .item { background1:#FCFDFF; padding:10px; border-bottom:1px solid lightgray;}		  #cntr .aa_filters { border-bottom:2px solid lightgray; } 		    #cntr .fld__filter { border-radius:10px; padding-left:8px; }		      		#this .item { background-image: -webkit-linear-gradient(bottom, #FFFFFF 10\\%, #D3F0EE 70\\%, #FFFFFF 90\\%);}		  		]]></Css></xtml></Component><Component id="Tiles3" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Css="#this .item { background:white; width:300px; height:120px; position:relative; overflow: hidden; }&#xa;  #this .item { border:1px solid #CECECE; border-radius:5px; }&#xa;    #cntr{ width: 100\\%; background:#F7F7F7; border: 1px solid #E2E2E2; padding:10px; }&#xa;#cntr .aa_listtop {  }&#xa;#this .fields { vertical-align:top; padding-left:5px; padding-top: 10px;  }&#xa;#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }&#xa;#this .item { margin:5px 5px 0 0px; float:left; padding: 5px 10px 10px 10px;  }&#xa;&#xa;" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"/></Component><Component id="MobileTiles" type="itemlist.Style"><xtml t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this>.item { vertical-align:top; display:inline-block; color:black; background-color:white; width: 97px; height: 120px;}#this { margin-left: 3px; font-family: \'Arial\'; font-size: 12px; width: 100\\%; padding: 0 0 0 3px; }#this>.item>.fields { vertical-align:top; }#cntr>*>.PartialViewSummary { height: 20px;padding: 15px 10px; color:#555; background: #F7F7F7; }#cntr>*>.PartialViewSummary .aa_show_all_items { padding-left: 20px; }]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript><![CDATA[]]></xtml></Component><Component id="MobileList1" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;item aa_box_vertical&quot;&gt;&#xa;&lt;div class=&quot;fields&quot;/&gt;&#xa;&lt;/div&gt;&#xa;&lt;/div&gt;" Javascript="function(itemlist) { &#xa;  itemlist.setItemsOld(\'.item\',function(item) {     item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}"><Css><![CDATA[#this .item { position:relative; overflow: hidden; }#this { width: 100\\%; }#this .fields { vertical-align:top;   }#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .item { border-bottom: 1px solid #CCC; }#this .item { padding:5px 5px 5px 7px; }  #this .item { background-image1: -webkit-gradient(  linear,  left bottom,  left top,  color-stop(0.06, #EEE),  color-stop(0.38, #F8F8F8),  color-stop(0.70, #F8F8F8));}#cntr .PartialViewSummary { height: 20px;padding: 15px 10px; color:#555; background: #F7F7F7; }#cntr .PartialViewSummary .aa_show_all_items { padding-left: 20px; }]]></Css></xtml></Component><Component id="SearchResults" type="itemlist.Style"><xtml t="itemlist.CustomStyle" Html="&#13;&#10;&lt;div&gt;&lt;div class=&quot;item fields&quot; /&gt;&lt;/div&gt;&#13;&#10;" Javascript="function(itemlist) { &#13;&#10;  itemlist.setItemsOld(\'.item\',function(item) {     &#13;&#10;    item.setFields(\'.fields\');  &#13;&#10;});}"><Css><![CDATA[#this .item { height: 20px; border-bottom:1px solid #ccc; padding-top:3px; width:100\\%; }#this .item { background-image1: -webkit-gradient(  linear,  left bottom,  left top,  color-stop(0.07, #F0F0F0),  color-stop(0.38, #D8D8D8),  color-stop(0.99, #F0F0F0));}]]></Css></xtml></Component><Component id="Light_Horizontal" type="itemlist.Style"><xtml t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="item aa_box_vertical"><div class="fields"/></div></div>]]></Html><Css><![CDATA[#this .item { width:70px; height:10px; position:relative; overflow: hidden; }#this { width: 100\\%; }#this .fields { vertical-align:top; padding-left:5px; padding-top: 2px;  }#this .fields { font-size:12px;  font-family: \'Arial\'; }#this .content {-webkit-box-orient: horizontal; }#this .item { border:1px solid #EDEDED; border-radius:10px; margin:10px 10px 0 0px; float:left; padding: 5px 10px 10px 10px; }#this .item { box-shadow: 2px 2px 3px 1px lightgray; }#this .itemtext { font-family: \'Arial\'; font-size:13px; color:#112566; margin-bottom:5px; max-width:300px; font-weight: bold; padding: 10px 0 0 0; text-align1: center;}#this .itemtext { text-shadow: 1px 1px 1px lightgray; }#this .imgdiv { margin-right:10px;}]]></Css><Javascript><![CDATA[function(itemlist) {  itemlist.setItemsOld(\'.item\',function(item) {        item.setInnerHTML(\'.itemtext\',item.name);    item.setImageSource(\'.itemimg\',item.image);    item.setFields(\'.fields\');  });}]]></Javascript></xtml></Component><Component id="HorizontalSlider" type="itemlist.Style"><Param name="Width" Default="660"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="ItemWidth" Default="200" ><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="itemlist.CustomStyle"><Html><![CDATA[<div><div class="aa_scroll_btn prev"><img src="//s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif"></div><div class="aa_slider_top"><div class="aa_slider_body"><div class="aa_item"/></div></div><div class="aa_scroll_btn next"><img src="//s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif" /></div></div>]]></Html><Css><![CDATA[#this>div.aa_slider_top { float: left; position: relative; overflow: hidden; }#this>div>div.aa_slider_body { position: relative; overflow: hidden; width:30000px;  }#this>div>div>div.aa_item {   width:%$ItemWidth%; overflow: hidden; float: left;   padding: 5px 10px 10px 10px;}#this .aa_scroll_btn {   float:left;   border-bottom-color: #AAA;  background-color: #E0E0E0;  height: 80px; width: 26px;  margin:22px 0;  border: 1px solid #999;  background-image: -webkit-linear-gradient(top,white 0,#E0E0E0 100\\%);  background-image: linear-gradient(to bottom,white 0,#E0E0E0 100\\%);    box-shadow: inset 0 0 1px #fff;  cursor: pointer;  border-radius: 3px;}#this .aa_scroll_btn.next { margin-left:10px; }#this .aa_scroll_btn.prev { margin-right:10px; }#this .aa_scroll_btn img {  border: 1px solid transparent;  border-width: 8px 8px 8px 0px;  border-right-color: #999;  margin: 33px 0 0 7px;}#this .aa_scroll_btn.next img {  border-width: 8px 0px 8px 8px;  border-left-color: #999;  margin: 33px 0 0 9px;}]]></Css><Javascript><![CDATA[function(itemlist) {   itemlist.sliderWidth = parseInt(\'%$Width%\'.match(/[0-9]+/)[0]);  jQuery(itemlist).find(\'>.next,>.prev\').each(function() { ajaxart_disableSelection(this) });                                                                     itemlist.bind(\'widthChanged\',function(eventProps) {    itemlist.sliderWidth = eventProps.width - 100;     jQuery(itemlist).find(\'>div>.aa_slider_top\').width(itemlist.sliderWidth);  });    itemlist.setItems({    itemElement: \'.aa_item\',    initItem: function(item) {           item.setFields();    }  });  jQuery(itemlist).find(\'>.aa_slider_top\').width(itemlist.sliderWidth);  var body = jQuery(itemlist).find(\'>div>.aa_slider_body\');  var currLeft = 0;  body.css(\'left\',\'0\');  jQuery(itemlist).find(\'>.prev\').click(function() {    if (currLeft > - itemlist.sliderWidth) {      body.animate( { left: \'0\'} ,\'slow\');      currLeft = 0;      return;    } else {      body.animate( { left: \'+=\'+itemlist.sliderWidth },\'slow\');      currLeft += itemlist.sliderWidth;    }  });  jQuery(itemlist).find(\'>.next\').click(function() {    var lastItem= jQuery(itemlist).find(\'>div>.aa_slider_body>div:last\');    var lastLeft = lastItem[0].offsetLeft + currLeft;    if (lastLeft + lastItem.outerWidth(true) <= itemlist.sliderWidth ) return;        body.animate( { left: \'-=\'+itemlist.sliderWidth },\'slow\');    currLeft -= itemlist.sliderWidth;  });    itemlist.bind(\'clearItems\',function() {     currLeft = 0;     body.css(\'left\',\'0\');  });}                      ]]></Javascript></xtml></Component>    <Component id="CustomStyle" type="itemlist.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" jsMetaData="styles_dt.ItemListJsMetadata" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="layout" jbart="true"><Type id="Style" customPT="layout.CustomStyle"/><Component id="Vertical" type="layout.Style" ><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[#this >.field:not(:last-child) { margin-bottom: %$Spacing%; }    ]]></Css><Javascript><![CDATA[function(group) {        group.addFields(\'.field\',function(field) {           field.setControl(\'.field\');        });    ;}]]></Javascript></xtml></Component><Component id="HorizontalHtmlTable" type="layout.Style"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<table celpadding="0" cellspacing="0"><tbody><tr><td class="field" /></tr></tbody></table>]]></Html><Css><![CDATA[#this >tbody>tr>td { vertical-align: top;  }#this >tbody>tr>td:not(:last-child) { padding-right: %$Spacing%;}]]></Css><Javascript><![CDATA[function(group) {  group.addFields(\'.field\',function(field) {       field.setControl(\'.field\');     });}]]></Javascript></xtml></Component>        <Component id="HorizontalCss3" type="layout.Style"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam"  /></Param><xtml t="group.CustomStyle" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Css><![CDATA[#this { display: -webkit-box;  -webkit-box-orient: horizontal; }      #this >.field { margin-right:%$Spacing%;  }]]></Css><Html><![CDATA[<div><div class="field"/></div>]]></Html></xtml></Component>    <Component id="CustomStyle" type="layout.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component><Component id="Default" type="layout.Style"><xtml t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[]]></Css><Javascript><![CDATA[function(group) {    group.addFields(\'.field\',function(field) { field.setControl(\'.field\'); });}]]></Javascript></xtml></Component></xtml><xtml ns="group" jbart="true"><Type id="Style" customPT="group.CustomStyle"/><Component id="PropertySheet" type="group.Style,propertysheet.Style"><Param name="PropertiesWidth" Default="80px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="VerticalSpacing" Default="8px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="IndentationOfPicklistOptions" Default="8px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<table cellspacing="0" cellpadding="0"><tr class="field"><td class="field_title"/><td class="field_contents"/></tr></table>]]></Html><Css><![CDATA[#this>tbody>tr>.field_title { width: %$PropertiesWidth%; padding-right: 5px; vertical-align:top; padding:4px 5px 0 0; color: gray; font-family:"lucida grande",tahoma,verdana,arial,sans-serif; font-size:11px;}#this>tbody>tr>.field_contents { vertical-align: top; padding-bottom: %$VerticalSpacing%; }#this>tbody>tr.aa_indent>td { padding-left:%$IndentationOfPicklistOptions%; }#this>tbody>tr:last-child >.field_contents { padding-bottom: 0px; }#this>tbody>tr>td>.field_description { color:rgb(140,140,140); font-style:italic; margin-top:2px; font-family:"lucida grande",tahoma,verdana,arial,sans-serif; font-size:11px; white-space: normal; }#this>tbody>tr.aa_mandatory>.field_title { font-weight: bold; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {    field.setPlaceholderForMoreFields(function(fieldForOptions) {      jQuery(fieldForOptions).find(\'>.field_title\').remove();      var jContents = jQuery(fieldForOptions).find(\'>.field_contents\').attr(\'colspan\',2).append(\'<div class="field_options_page"/>\');      fieldForOptions.setOptionsPage(\'.field_options_page\');    });    if (field.HideTitle || field.IsSection) {      jQuery(field).find(\'>.field_title\').remove();      jQuery(field).find(\'>.field_contents\').attr(\'colspan\',2);    } else {      field.setInnerHTML(\'.field_title\',field.Title+\':\');      }    var jFieldContents = jQuery(field).find(\'.field_contents\');    field.setControl(\'.field_contents\');     if (field.Field.Description) {      jFieldContents.append(\'<div class="field_description"/>\');      field.setInnerHTML(\'.field_description\',field.Field.Description);      }  });}]]></Javascript></xtml></Component><Component id="ReadOnlyPropertySheet" type="propertysheet.Style"><Param name="PropertiesWidth" Default="80px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="VerticalSpacing" Default="8px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><Param name="IndentationOfPicklistOptions" Default="8px" advanced="true"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<table cellspacing="0" cellpadding="0"><tr class="field"><td class="field_title"/><td class="field_contents"/></tr></table>]]></Html><Css><![CDATA[#this>tbody>tr>.field_title { width: %$PropertiesWidth%; padding-right: 5px; vertical-align:top; padding:0px 5px 0 0; color: gray; font-family:"lucida grande",tahoma,verdana,arial,sans-serif; font-size:11px;}#this>tbody>tr>.field_contents { vertical-align: top; padding-bottom: %$VerticalSpacing%; }#this>tbody>tr.aa_indent>td { padding-left:%$IndentationOfPicklistOptions%; }#this>tbody>tr:last-child >.field_contents { padding-bottom: 0px; }#this>tbody>tr>td>.field_description { color:rgb(140,140,140); font-style:italic; margin-top:2px; font-family:"lucida grande",tahoma,verdana,arial,sans-serif; font-size:11px; white-space: normal; }#this>tbody>tr.aa_mandatory>.field_title { font-weight: bold; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {    field.setPlaceholderForMoreFields(function(fieldForOptions) {      jQuery(fieldForOptions).find(\'>.field_title\').remove();      var jContents = jQuery(fieldForOptions).find(\'>.field_contents\').attr(\'colspan\',2).append(\'<div class="field_options_page"/>\');      fieldForOptions.setOptionsPage(\'.field_options_page\');    });    if (field.HideTitle || field.IsSection) {      jQuery(field).find(\'>.field_title\').remove();      jQuery(field).find(\'>.field_contents\').attr(\'colspan\',2);    } else {      field.setInnerHTML(\'.field_title\',field.Title+\':\');      }    var jFieldContents = jQuery(field).find(\'.field_contents\');    field.setControl(\'.field_contents\');     if (field.Field.Description) {      jFieldContents.append(\'<div class="field_description"/>\');      field.setInnerHTML(\'.field_description\',field.Field.Description);      }  });}]]></Javascript></xtml></Component><Component id="TitlesAboveFields" type="group.Style,propertysheet.Style"><Param name="HorizontalSpacing" Default="15px"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="VerticalSpacing" Default="8px"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<div><div class="field"><div class="field_title"/><div class="field_contents"/></div></div>]]></Html><Css><![CDATA[#this>.field { float: left;}#this>.field:not(:first-child) { padding-left:%$HorizontalSpacing%; }#this>.field>.field_title {   padding-bottom:3px;   color: #666;  font-weight: bold;  font-size: 11px;  font-family: "lucida grande",tahoma,verdana,arial,sans-serif;}#this>.field>.field_contents { vertical-align: top; padding-bottom: %$VerticalSpacing%; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {      var title = field.HideTitle ? \'\' : field.Title+\':\';      field.setInnerHTML(\'.field_title\',title);      field.setControl(\'.field_contents\'); })}]]></Javascript></xtml></Component><Component id="MobilePropertySheet" type="group.Style,propertysheet.Style" styleGuide="jbartMobile"><xtml t="group.CustomStyle"><Css><![CDATA[#this {   border: 1px solid #DDD;padding: 0;-webkit-box-shadow: rgba(255, 255, 255, 0.7) 0 1px 0;-webkit-border-radius: 0.4em;border-radius: 0.4em;overflow: hidden;background-color: #EEE;font-family: "Helvetica Neue", HelveticaNeue, "Helvetica-Neue", Helvetica, "BBAlpha Sans", sans-serif;font-weight: normal;font-size: 114\\%;  background:white;}#this >.field {  overflow: hidden;position: relative;min-height: 2.5em;border-bottom: 1px solid #DDD;-webkit-box-orient: horizontal;-webkit-box-align: stretch;display: -webkit-box;-webkit-border-top-right-radius: 0.4em;border-top-right-radius: 0.4em;}#this >.field >.field_title {  -webkit-border-top-left-radius: 0.4em;border-top-left-radius: 0.4em;  font-size: .8em;font-weight: bold;  font-size: 114\\%;  width: 35\\%;color: #333;text-shadow: rgba(255, 255, 255, 0.25) 0 0.08em 0;background-color: #F7F7F7;padding: 0.6em;border-top: 1px solid white;display: block;color: #333;text-shadow: rgba(255, 255, 255, 0.25) 0 0.08em 0;    font-family: "Helvetica Neue", HelveticaNeue, "Helvetica-Neue", Helvetica, "BBAlpha Sans", sans-serif;}#this >.field >.field_contents {  color:#666;  -webkit-user-select: text;  -webkit-box-sizing: border-box;box-sizing: border-box;  min-height: 2.5em;  width: 200px;display: block;  border-radius:0.4em;-webkit-appearance: none;-webkit-border-radius1: 0;border-radius: 0;padding: .4em;border1: 0;-webkit-box-flex: 1;-webkit-box-sizing: border-box;box-sizing: border-box;-webkit-user-select: none;-webkit-text-size-adjust: none;font-size: 114\\%;}]]></Css><Html><![CDATA[<div><div class="field"><div class="field_title"/><div class="field_contents"/></div></div>]]></Html><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {    field.setPlaceholderForMoreFields(function(fieldForOptions) {      jQuery(fieldForOptions).find(\'>.field_title\').remove();      var jContents = jQuery(fieldForOptions).find(\'>.field_contents\').attr(\'colspan\',2).append(\'<div class="field_options_page"/>\');      fieldForOptions.setOptionsPage(\'.field_options_page\');    });    if (field.HideTitle || field.IsSection) {      jQuery(field).find(\'>.field_title\').remove();      jQuery(field).find(\'>.field_contents\').attr(\'colspan\',2);    } else {      field.setInnerHTML(\'.field_title\',field.Title);      }    var jFieldContents = jQuery(field).find(\'.field_contents\');    field.setControl(\'.field_contents\');     if (field.Field.Description) {      jFieldContents.append(\'<div class="field_description"/>\');      field.setInnerHTML(\'.field_description\',field.Field.Description);      }  });}]]></Javascript></xtml></Component><Component id="Vertical" type="group.Style"><Param name="CssOnElement" Default="margin-bottom:5px;"/><xtml t="group.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;field&quot;/&gt;&#xd;&lt;/div&gt;" Css="#this >.field {%$CssOnElement%; }" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"/></Component><Component id="Horizontal" type="group.Style" light="false"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[#this >.field { float:left;}>.field:not(:last-child) { margin-right: %$Spacing%;}]]></Css><Javascript><![CDATA[function(group) {    group.addFields(\'.field\',function(field) {       field.setControl(\'.field\');    });;}]]></Javascript></xtml></Component><Component id="HorizontalHtmlTable" type="group.Style"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="group.CustomStyle"><Html><![CDATA[<table celpadding="0" cellspacing="0"><tbody><tr><td class="field" /></tr></tbody></table>]]></Html><Css><![CDATA[#this >tbody>tr>td { vertical-align: top;  }#this >tbody>tr>td:not(:last-child) { padding-right: %$Spacing%px;}]]></Css><Javascript><![CDATA[function(group) {	group.addFields(\'.field\',function(field) {       field.setControl(\'.field\');     });}]]></Javascript></xtml></Component>        <Component id="HorizontalWebkit" type="group.Style"><Param name="Spacing" Default="0"><FieldAspect t="field_dt.SliderParam"  /></Param><xtml t="group.CustomStyle" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Css><![CDATA[#this { display: -webkit-box;  -webkit-box-orient: horizontal; }      #this >.field { margin-right:%$Spacing%;  }]]></Css><Html><![CDATA[<div><div class="field"/></div>]]></Html></xtml></Component>    <Component id="Default" type="group.Style"><xtml t="group.CustomStyle"><Html><![CDATA[<div><div class="field"/></div>]]></Html><Css><![CDATA[]]></Css><Javascript><![CDATA[function(group) {	  group.addFields(\'.field\',function(field) { field.setControl(\'.field\'); });}]]></Javascript></xtml></Component><Component id="HtmlLayout" type="group.Style"><Param name="Html"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Css"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" /></Param><Param name="Javascript"><FieldAspect t="field_dt.CodeMirrorPopupFieldEditor" Default="function(group) { &#xa;  group.addManualFields(\'.field_\',function(field) &#xa;     { &#xa;      field.setControl(field); &#xa;      }&#xa;  );&#xa;;}"/></Param><Param name="DynamicDataInHtml" type="data.Boolean" description="use jBartData(FieldID) or jBartRawData(xpath) in the html" Default="true" /><ParamGenerator1 t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /><TextProperty name="DynamicDataInHtml" value="%$DynamicDataInHtml%" /></xtml></Component><Component id="CustomStyle" type="group.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component></xtml><xtml ns="tabcontrol"><Type id="Style" customPT="tabcontrol.CustomStyle"/><Component id="Links" type="tabcontrol.Style"><xtml t="tabcontrol.CustomStyle"><Html><![CDATA[<div><div><div class="aatabs_tab"><div class="aatabs_tab_image"/><div class="aatabs_tab_text"/></div></div><div class="aatabs_contents"/></div>]]></Html><Css><![CDATA[#this >div>div.aatabs_tab { float: left; color:#002FA7; font-size: 11px;   padding: 0 17px 0 0; }#this >div>div>div.aatabs_tab_text { cursor: pointer; }#this >div>div.aa_selected_tab { font-weight:bold; text-decoration:underline; }#this >div>div { }#this >div>div>div.aatabs_tab_image { float: left; }#this >.aatabs_contents { padding: 5px 0 15px 0; border-top:  1px solid #ddd;   clear: both; }.right2left #this >div>div.aatabs_tab { float: right; padding: 6px 6px 4px 15px; }.right2left #this >div>div>div.aatabs_tab_image { float: right; }.right2left #this >div>div>div.aatabs_tab_text { float: right; padding: 0 5px 0 0; }]]></Css><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {              tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);               tab.setImageSource(\'.aatabs_tab_image\',tab.Image);      tab.setOnClick(\'\',tab.Select); });}]]></Javascript></xtml></Component>  <Component id="BlueTabs" type="tabcontrol.Style"><xtml t="tabcontrol.CustomStyle"><Css><![CDATA[#this >div>div.aatabs_tab { font-size: 93\\%; font-family: arial; float: left; padding: 6px 15px 4px 6px; cursor: pointer;  background: rgb(60,143,228); margin-right:2px; color: black; min-width:30px;   -webkit-border-top-left-radius:6px; -webkit-border-top-right-radius:6px; -moz-border-radius-topleft: 6px; -moz-border-radius-topright: 6px;}#this >div>div>div.aatabs_tab_text { padding:0 0 0 5px; float:left; color: white }#this >div>div.aa_selected_tab  { background: rgb(31,112,195); color: white }#this >div>div>div.aatabs_tab_image { float: left }#this >.aatabs_contents { clear: both; padding:5px 0 15px 0; border-top: 1px solid #ddd }.right2left #this >div>div.aatabs_tab { float: right; padding: 6px 6px 4px 15px;  }.right2left #this >div>div>div.aatabs_tab_image { float: right}.right2left #this >div>div>div.aatabs_tab_text { float: right; padding:0 5px 0 0;}]]></Css><Html><![CDATA[<div><div><div class="aatabs_tab"><div class="aatabs_tab_image"/><div class="aatabs_tab_text"/></div></div><div class="aatabs_contents"/></div>]]></Html><![CDATA[]]><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {              tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);               tab.setImageSource(\'.aatabs_tab_image\',tab.Image);      tab.setOnClick(\'\',tab.Select); });}]]></Javascript></xtml></Component><Component id="LeftBlueTabs" type="tabcontrol.Style"><xtml t="tabcontrol.CustomStyle" Html="&lt;div class=&quot;aa_box_horizontal&quot;&gt;&#xd;  &lt;div class=&quot;aa_box_vertical&quot;&gt;&#xd;    &lt;div class=&quot;aatabs_tab aa_box_horizontal&quot;&gt;&#xd;      &lt;img src=&quot;&quot; class=&quot;aatabs_tab_image&quot;/&gt;&#xd;      &lt;div class=&quot;aatabs_tab_text&quot;/&gt;&#xd;    &lt;/div&gt;&#xd;  &lt;/div&gt;&#xd;  &lt;div class=&quot;aatabs_contents&quot;/&gt;&#xd;&lt;/div&gt;" Css="#this .aatabs_tab {&#xa;   padding:6px 12px; cursor: pointer;&#xa;  background: rgb(60,143,228);&#xa;  color: black; &#xa;  min-width:80px;&#xa;}&#xa;#this .aatabs_tab_text { padding:0 0 0 5px; }#this .aa_selected_tab  { background: rgb(31,112,195); color: white }&#xa;#this &gt; div:nth-child(1) { padding-bottom1:5px; }#this &gt; div:nth-child(2)  { border: 1px solid #aaa; padding:15px; }" Javascript="function(tabcontrol) {&#xa; tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',&#xa;   function(tab) {        &#xa;      tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);         &#xa;      tab.setImageSource(\'.aatabs_tab_image\',tab.Image);   &#xa;   tab.setOnClick(\'\',tab.Select); });&#xa;}"/></Component>          <Component id="MobileTopTabs" type="tabcontrol.Style" styleGuide="jbartMobile"><xtml t="tabcontrol.CustomStyle"><Html><![CDATA[<div class="aatab_control"><div class="tabs"><div class="aatabs_tab"><div class="aatabs_tab_image_div"><img class="aatabs_tab_image" /><span class="aatabs_tab_indication" /></div><span class="aatabs_tab_text"/></div></div><div class="aatabs_contents_wrapper"><div class="aatabs_contents"/></div></div>]]></Html><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {              tab.setInnerHTML(\'.aatabs_tab_text\',tab.Title);               tab.setImageSource(\'.aatabs_tab_image\',tab.Image);         tab.setOnClick(\'\',tab.Select);      if (tab.NumericIndication) {        tab.setInnerHTML(\'.aatabs_tab_indication\',tab.NumericIndication);        jQuery(tab).find(".aatabs_tab_indication")[0].style.display = \'inline\';     }      else        jQuery(tab).find(".aatabs_tab_indication")[0].style.display = \'none\';   });  tabcontrol.jbFixSize = function() {    var window_width = ajaxart_screen_size(true).width;    var tabs_count = 0;    jQuery(tabcontrol).find(\'.aatabs_tab\').each(function() {       if (this.style.display != \'none\')        tabs_count++     });    var width = Math.max(32, Math.floor(window_width/tabs_count)-1);    jQuery(tabcontrol).find(\'.aatabs_tab\').css("width",width + "px");    var body = document.body;    if (jQuery(\'.studio_simulator\').length > 0)      body = jQuery(\'.studio_simulator\')[0];  };    tabcontrol.jbFixSize ();/*  aa_addOnAttach(tabcontrol, function() {//  });*/  window.addEventListener("resize", tabcontrol.jbFixSize , false);  jBart.bind(tabcontrol, \'TabsChanged\', tabcontrol.jbFixSize);  tabcontrol.OnBeforeSelect = function() {    window.scrollTo(0,1);   //   }}]]></Javascript><Css><![CDATA[#this .aatabs_tab_indication {  background: rgb(182,224,0);  width:18px;  position:absolute;  text-align:center;  border-radius:18px;  font-weight1:bold;  margin-top:8px;  margin-left:-10px;}#this {  background: rgb(245,245,245);}#this >.tabs{  display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-pack1: center; -webkit-box-direction: normal;  background:rgb(64,78,89);  height:52px;}#this .aatabs_tab {   background:rgb(64,78,89);  border-bottom:1px solid rgb(36,41,45);  border1:1px solid green;}#this .aatabs_tab:not(:last-child) {  border-right:1px solid rgb(36,41,45);}#this .aatabs_tab_text {   display: block;  text-align: center;  color:rgb(204,204,204);  font-weight:bold;}#this .aa_selected_tab .aatabs_tab_text {  color: rgb(216,216,216);}#this  .aatabs_tab.aa_selected_tab  {   background: rgb(245,245,245);  border-bottom: 1px solid rgb(245,245,245);}#this .aa_selected_tab:last-child  {   border-right: 1px solid rgb(245,245,245);}#this .aatabs_tab_image_div {  margin:auto;  text-align:center;  position:relative;  width:auto;}#this .aatabs_tab_image_div { padding-top:5px;}#this .aatabs_contents { background:rgb(245,245,245); }]]></Css></xtml></Component><Component id="HiddenTabs" type="tabcontrol.Style"><xtml t="tabcontrol.CustomStyle"><Html><![CDATA[<div><div><div class="aatabs_tab" /></div><div class="aatabs_contents"/></div>]]></Html><Css><![CDATA[#this >div>div.aatabs_tab { display: none; }]]></Css><Javascript><![CDATA[function(tabcontrol) { tabcontrol.addTabs(\'.aatabs_tab\',\'.aatabs_contents\',   function(tab) {          });}]]></Javascript></xtml></Component><Component id="CustomStyle" type="tabcontrol.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component></xtml><xtml ns="uitext"><Type id="Style" customPT="uitext.CustomStyle"/><Component id="PlainText" type="uitext.Style"><xtml t="uitext.CustomStyle" Html="&lt;div /&gt;" Css="#this { }" ><Javascript><![CDATA[function(textObj) {   jQuery(textObj).html(textObj.text);}]]></Javascript><![CDATA[]]></xtml></Component><Component id="ItemTitle" type="uitext.Style"><xtml t="uitext.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this {     font: 13px Arial;    color:#112566; font-weight:bold;     padding-bottom:5px;    text-shadow: 1px 1px 1px lightgray;  }]]></Css><Javascript><![CDATA[function(object) {     object.control.innerHTML = object.text;   }]]></Javascript></xtml></Component>    <Component id="SmallText" type="uitext.Style"><xtml t="uitext.CustomStyle" Html="&lt;div /&gt;" Css="#this { font: 11px Arial; }" Javascript="function(object) { object.control.innerHTML = object.text; }" /></Component><Component id="YellowBox" type="uitext.Style"><xtml t="uitext.CustomStyle"><Html><![CDATA[<div />]]></Html><Css><![CDATA[#this {      color:#778994;       font-family: Arial;      font-size: 12px;      padding-left: 24px;      line-height: 20px;      padding:10px 20px;      background: #fff7d3;      border: 1px solid #feb600;     }]]></Css><Javascript><![CDATA[function(text) { text.setInnerHTML(\'\',text.text); }]]></Javascript></xtml></Component>            <Component id="CustomStyle" type="uitext.Style" customPT="true"><Param name="Html" codemirror="true" light="false" Default="&lt;div/&gt;" /><Param name="Css" codemirror="true" light="false" Default="#this {}"/><Param name="Javascript" codemirror="true" light="false" Default="function(object) { object.control.innerHTML = object.text; }"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="section"><Type id="Style" customPT="section.CustomStyle"/><Component id="Default" type="section.Style"><Param name="Color" Default="#3764A0" /><Param name="BorderBottom" Default="2px solid #99BBE8" /><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;section_title&quot;/&gt;&#xd;  &lt;div class=&quot;section_body&quot;/&gt;&#xd;&lt;/div&gt;"><Javascript><![CDATA[function(section) {    section.setInnerHTML(\'.section_title\',section.Title);    section.addSectionBody(\'.section_body\');}]]></Javascript><Css><![CDATA[#this >.section_title {font-family: tahoma,arial,helvetica,sans-serif;font-size: 12px;font-weight: bold;color: %$Color%; border-bottom: %$BorderBottom%;padding: 3px 0;margin-bottom: 5px;}]]></Css></xtml></Component><Component id="JBartClean" type="section.Style" styleguide="jbart"><xtml t="section.CustomStyle"><Html><![CDATA[<div><div class="section_title"/><div class="section_body"/></div>]]></Html><Css><![CDATA[#this >.section_title {  font: 18px arial;  font-weight: bold;color: #3764A0;   padding: 3px 0;  margin-bottom: 5px;}]]></Css><Javascript><![CDATA[function(section) {    section.setInnerHTML(\'.section_title\',section.Title);    section.addSectionBody(\'.section_body\');}]]></Javascript><![CDATA[]]></xtml></Component><Component id="DefaultNoUnderline" type="section.Style"><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;section_title&quot;/&gt;&#xd;  &lt;div class=&quot;section_body&quot;/&gt;&#xd;&lt;/div&gt;" Css="#this &gt;.section_title {font-family: tahoma,arial,helvetica,sans-serif;font-size: 12px;font-weight: bold;color: #3764A0; &#xa;&#xa;padding: 3px 0;&#xa;margin-bottom: 5px;}" Javascript="function(section) {  section.setInnerHTML(\'.section_title\',section.Title);  section.addSectionBody(\'.section_body\');}" /></Component><Component id="DefaultWithImage" type="section.Style"><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;section_title&quot;/&gt;&#xd;  &lt;div class=&quot;section_body&quot;/&gt;&#xd;&lt;/div&gt;" Css="#this &gt;.section_title {font-family: tahoma,arial,helvetica,sans-serif;font-size: 12px;font-weight: bold;color: #3764A0; &#xa;border-bottom: 2px solid #99BBE8;&#xa;padding: 3px 0;&#xa;margin-bottom: 5px;}" Javascript="function(section) {  section.setInnerHTML(\'.section_title\',section.Title);  section.addSectionBody(\'.section_body\');}" /></Component><Component id="DefaultExpandCollapse" type="section.Style"><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;section_header&quot;&gt;&#xa;    &lt;span class=&quot;toggle_button&quot;/&gt;&#xa;    &lt;span class=&quot;section_image&quot;/&gt;&#xa;    &lt;span class=&quot;section_title&quot;/&gt;&#xa;  &lt;/div&gt;&#xa;  &lt;div class=&quot;section_body&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this &gt;div&gt;.toggle_button { display:inline-block; height: 14px;  width:9px; padding-lef1t:9px; background:url(\'%$_Images%/css/collapse.gif\') no-repeat;}&#xa;#this.collapsed &gt;div&gt;.toggle_button { background:url(\'%$_Images%/css/expand.gif\') no-repeat; }&#xa;#this &gt;.section_header { &#xa;  cursor:pointer;  &#xa;  border-bottom: 2px solid #99BBE8;margin-bottom: 5px;&#xa;}&#xa;#this &gt;div&gt;.section_title { display: inline-block; padding-left: 2px; font-family: tahoma,arial,helvetica,sans-serif;&#xa;  font-size: 12px;font-weight: bold;color: #3764A0; vertical-align: top; }&#xa;" Javascript="function(section) { &#xa;   section.setImageSource(\'.section_image\',section.Image);&#xa;   section.setInnerHTML(\'.section_title\',section.Title); &#xa;   section.addSectionBody(\'.section_body\');&#xa;   if (section.collapsed) jQuery(section).addClass(\'collapsed\');&#xa;&#xa;  jQuery(section).find(\'.section_header\').click(function() {&#xa;    jQuery(section).toggleClass(\'collapsed\');&#xa;    if ( jQuery(section).hasClass(\'collapsed\') )&#xa;     jQuery(section).find(\'.section_body\').animate({height: \'hide\'},400);   &#xa;   else &#xa;     jQuery(section).find(\'.section_body\').animate({height: \'show\'},400);  });&#xa;&#xa;   section.updateCollapsed( jQuery(section).hasClass(\'collapsed\') );&#xa;}"/></Component>    <Component id="ExpandCollapseNoUnderline" type="section.Style"><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;section_header&quot;&gt;&#xa;    &lt;span class=&quot;toggle_button&quot;/&gt;&#xa;    &lt;span class=&quot;section_image&quot;/&gt;&#xa;    &lt;span class=&quot;section_title&quot;/&gt;&#xa;  &lt;/div&gt;&#xa;  &lt;div class=&quot;section_body&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this &gt;div&gt;.toggle_button { display:inline-block; height: 14px;  width:9px; padding-lef1t:9px; background:url(\'%$_Images%/css/collapse.gif\') no-repeat;}&#xa;#this.collapsed &gt;div&gt;.toggle_button { background:url(\'%$_Images%/css/expand.gif\') no-repeat; }&#xa;#this &gt;.section_header { &#xa;  cursor:pointer;  &#xa;  margin-bottom: 5px;&#xa;}&#xa;#this &gt;div&gt;.section_title { display: inline-block; padding-left: 2px; font-family: tahoma,arial,helvetica,sans-serif;&#xa;  font-size: 12px;font-weight: bold;color: #3764A0; vertical-align: top; }&#xa;" Javascript="function(section) { &#xa;   section.setImageSource(\'.section_image\',section.Image);&#xa;   section.setInnerHTML(\'.section_title\',section.Title); &#xa;   section.addSectionBody(\'.section_body\');&#xa;   if (section.collapsed) jQuery(section).addClass(\'collapsed\');&#xa;&#xa;  jQuery(section).find(\'.section_header\').click(function() {&#xa;    jQuery(section).toggleClass(\'collapsed\');&#xa;    if ( jQuery(section).hasClass(\'collapsed\') )&#xa;     jQuery(section).find(\'.section_body\').animate({height: \'hide\'},400);   &#xa;   else &#xa;     jQuery(section).find(\'.section_body\').animate({height: \'show\'},400);  });&#xa;&#xa;   section.updateCollapsed( jQuery(section).hasClass(\'collapsed\') );&#xa;}"/></Component>    <Component id="YellowBox" type="section.Style"><xtml t="section.CustomStyle" Html="&lt;div&gt;&#xa;  &lt;div class=&quot;section_body&quot;/&gt;&#xa;&lt;/div&gt;" Css="#this {&#xa;padding: 10px;border: 1px solid #FC6;background: #FDFDDD; }" Javascript="function(section) {  section.setInnerHTML(\'.section_title\',section.Title);  section.addSectionBody(\'.section_body\');}"/></Component><Component id="MobileBlue" type="section.Style" styleGuide="jbartMobile"><xtml t="section.CustomStyle" Javascript="function(section) {  &#xd;&#xa;  section.setInnerHTML(\'.section_title\',section.Title);  &#xd;&#xa;  section.addSectionBody(\'.section_body\');&#xd;&#xa;}"><Css><![CDATA[#this >.section_title {  border-top:1px solid #ccc;  font-family: arial1,helvetica,sans-serif;  font-size: 15px;  color: #3764A0;   padding: 5px 6px;  margin-top:10px;  margin-bottom: 4px;  font-weight:bold;  color:#12619E;}#this >.section_body {padding:0 6px; }]]></Css><Html><![CDATA[<div><div class="section_title"/><div class="section_body"/></div>]]></Html></xtml></Component><Component id="MobileBlack" type="section.Style" styleGuide="jbartMobile"><xtml t="section.CustomStyle" Javascript="function(section) {  &#xd;&#xa;  section.setInnerHTML(\'.section_title\',section.Title);  &#xd;&#xa;  section.addSectionBody(\'.section_body\');&#xd;&#xa;}"><Css><![CDATA[#this >.section_title {  font-family: arial,helvetica,sans-serif;  font-size: 13px;  color: #3764A0;   padding: 3px;  margin-bottom: 5px;  background: -webkit-gradient(linear, left top, left bottom,    color-stop(9\\%,#000000), color-stop(50\\%,#0f0f0f), color-stop(95\\%,#000000));    color:white;}#this >.section_body {padding:0 6px; }]]></Css><Html><![CDATA[<div><div class="section_title"/><div class="section_body"/></div>]]></Html></xtml></Component><Component id="FacebookMobile" type="section.Style" styleGuide="facebook"><xtml t="section.CustomStyle" Javascript="function(section) {  &#xa;  section.setInnerHTML(\'.section_title\',section.Title);  &#xa;  section.addSectionBody(\'.section_body\');&#xa;}"><Css><![CDATA[#this >.section_title {font-size: 16px;line-height: 20px;border-top: solid 1px #D0D1D7;border-bottom: solid 1px #BABCC5;color: #5F6167;background: #EAEDF2;background: -webkit-gradient( linear, left bottom, left top, color-stop(0.3, #ECEEF2), color-stop(1, #F1F2F5));font-weight: bold;text-shadow: white 0 1px 0;padding-left: 8px;height: 20px;font-family: Helvetica, sans-serif;}#this >.section_body {padding:3px 6px; }]]></Css><Html><![CDATA[<div><div class="section_title"/><div class="section_body"/></div>]]></Html></xtml></Component><Component id="CustomStyle" type="section.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component></xtml><xtml ns="textarea" jbart="true"><Type id="Style" style="true" customPT="textarea.CustomStyle" /><Component id="Default" type="textarea.Style"><Param name="Height" Default="40px"><FieldAspect t="field_dt.SliderParam"/></Param><Param name="Width" Default="100%"><FieldAspect t="field_dt.SliderParam"/></Param><xtml t="textarea.CustomStyle"><Html><![CDATA[<textarea />]]></Html><Css><![CDATA[#this { width: %$Width%; height: %$Height%; }]]></Css><Javascript><![CDATA[function(textarea) {  textarea.initTextArea(textarea);}]]></Javascript></xtml></Component><Component id="AutoHeight" type="textarea.Style"><Param name="Width" Default="100%" advanced="true"/><xtml t="textarea.CustomStyle"><Html><![CDATA[<textarea />]]></Html><Css><![CDATA[#this { width: %$Width%; }]]></Css><Javascript><![CDATA[function(textarea) {  textarea.initTextArea(textarea);  textarea.jbFixAutoHeight = function() {      this.style.overflow = \'hidden\';      this.style.height = "1px";      this.style.height = (ajaxart.isFireFox ? this.scrollHeight+3 : this.scrollHeight )+"px";  };       aa_addOnAttach(textarea,function() {    textarea.jbFixAutoHeight();   });  jQuery(textarea).keyup(function() { textarea.jbFixAutoHeight(); });  textarea.bind(\'refresh\',function() { textarea.jbFixAutoHeight();});}]]></Javascript></xtml></Component><Component id="CustomStyle" type="textarea.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component></xtml><xtml ns="header" jbart="true"><Type id="Style" style="true" customPT="header.CustomStyle" /><Component id="FacebookHeader" type="header.Style" styleGuide="facebook"><xtml t="group.CustomStyle" Html="&lt;div&gt;&#xd;  &lt;div class=&quot;field&quot;/&gt;&#xd;&lt;/div&gt;" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Css><![CDATA[#this >.field { float:left; margin-right: 3px;}#this {     background-color: #F2F2F2;  padding: 5px 3px;  border-color: #CCC;  height:32px;  margin-bottom:5px;}]]></Css></xtml></Component><Component id="SimpleHeader" type="header.Style"><xtml t="group.CustomStyle" Javascript="function(group) { &#xa;  group.addFields(\'.field\',function(field) &#xa;     { &#xa;      field.setControl(\'.field\'); &#xa;      }&#xa;  );&#xa;;}"><Html><![CDATA[<table cellspacing="0" cellpadding="0"><tr><td class="field"/></tr></table>            ]]></Html><Css><![CDATA[#this >.field { margin-right: 3px;}#this {     margin-bottom:15px;}]]></Css></xtml></Component><Component id="CustomStyle" type="header.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="object.Object"><TextProperty name="Html" value="%$Html%" /><TextProperty name="Css" value="%$Css%" /><TextProperty name="Javascript" value="%$Javascript%" /></xtml></Component></xtml><xtml ns="text_field"><Type id="Style" customPT="text_field.CustomStyle" /><Component id="JBartText" type="text_field.Style"><xtml t="ui.CustomStyle" ><Html><![CDATA[<div><input /><div /></div>      ]]></Html><Css><![CDATA[input#this {border: 1px solid #BDC7D8;font-size: 11px;padding: 3px;width: 150px;height: 16px;background: url(%$_Images%/css/shadow2.png) repeat-x scroll 0 0 transparent;}div#this {font-size:12px; }       ]]></Css><Javascript><![CDATA[function(textbox) {  if (textbox.readonly) {    return jQuery(textbox).find(">div").html(textbox.text)[0];  }  else {    var out = jQuery(textbox).find(\'>input\')[0] || textbox.control;    textbox.initInput(out);    return out;   }}       ]]></Javascript></xtml></Component><Component id="ModernTextbox" type="text_field.Style"><xtml t="ui.CustomStyle" ><Html><![CDATA[<div><input /><div /></div>      ]]></Html><Css><![CDATA[input#this {color:#565656; font-size: 12px; width: 180px;   border-radius: 8px; padding: 6px 0 6px 10px;border: 1px solid #BDC7D8;}div#this { font-size:12px; }]]></Css><Javascript><![CDATA[function(textbox) {  if (textbox.readonly) {    return jQuery(textbox).find(">div").html(textbox.text)[0];  }  else {    var out = jQuery(textbox).find(\'>input\');    textbox.initInput(out[0]);    return out[0];   }}       ]]></Javascript></xtml></Component><Component id="CustomStyle" type="text_field.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="propertysheet"><Component id="Modern" type="propertysheet.Style"><xtml t="propertysheet.CustomStyle"><Html><![CDATA[<div><div class="field field_contents" /></div>]]></Html><Css><![CDATA[#this>.field_description { font-family:times; color:rgb(140,140,140);   font-style:italic; font-size: 11px; margin: 2px 0 0 0;   white-space: normal; }#this input { border-radius: 5px; padding: 8px 8px 8px 8px; min-width:200px;   font: 12px arial; }.empty_text { color:#8B8B8B; font-style:italic; }#this >div { margin: 0 0 7px 0; }]]></Css><Javascript><![CDATA[function(group) {   group.addFields(\'.field\',function(field) {    var jFieldContents = jQuery(field);    field.setControl(\'\');     if (field.Field.Description) {      jFieldContents.append(\'<div class="field_description"/>\');      field.setInnerHTML(\'.field_description\',field.Field.Description);      }    field.setPlaceholderForMoreFields(function(fieldForOptions) {      jQuery(fieldForOptions).find(\'>.field_title\').remove();      var jContents = jQuery(fieldForOptions).find(\'>.field_contents\').attr(\'colspan\',2).append(\'<div class="field_options_page"/>\');      fieldForOptions.setOptionsPage(\'.field_options_page\');    });    jBart.addDescriptionForEmptyText(field,field.Title,\'empty_text\');  });}]]></Javascript></xtml></Component>          <Type id="Style" style="true" customPT="propertysheet.CustomStyle" /><Component id="CustomStyle" type="propertysheet.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml><xtml ns="itemlist_scroll"><Type id="Style" customPT="itemlist_scroll.CustomStyle" /><Component id="BrowserScroll" type="itemlist_scroll.Style"><xtml t="itemlist_scroll.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[#this::-webkit-scrollbar { width: 10px; height:10px; }#this::-webkit-scrollbar-track { -webkit-box-shadow1: inset 0 0 8px blue;  border-radius: 5px; }#this::-webkit-scrollbar-thumb { border-radius: 5px; -webkit-box-shadow: inset 0 0 6px green; }          ]]></Css><Javascript><![CDATA[function(scroll) {  scroll.init({    requiresDivWrapper: false,    refresh: function() {      jQuery(scroll.topDiv).css(\'overflow\',\'auto\');      scroll.fixSize( scroll.topDiv );    }  });}]]></Javascript></xtml></Component><Component id="HorizontalSlider" type="itemlist_scroll.Style"><Param name="ButtonsPosition" Default="20px"><FieldAspect t="field_dt.SliderParam" /></Param><xtml t="itemlist_scroll.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[.slide {font-family: arial;text-decoration: none;margin-top: %$ButtonsPosition%;width: 40px;height: 40px;font-size: 60px;font-weight: 100;line-height: 30px;color: white;text-align: center;background: #222;border: 3px solid #777;border-radius: 23px;opacity: 0.5;cursor: pointer;}.slide:hover { opacity: 0.9; }.left_slide { margin-right: 10px; }.right_slide { margin-left: 10px; }          ]]></Css><Javascript><![CDATA[function(scroll) {  scroll.init({    requiresDivWrapper: true,    refresh: function() {      jQuery(scroll.topDiv).css(\'overflow\',\'hidden\').css(\'float\',\'left\');      var prev = jQuery(\'<div class="slide left_slide" style="float:left">\').text(\'\');      var next = jQuery(\'<div class="slide right_slide" style="float:left">\').text(\'\');            next.click(function() {        var width = jQuery(scroll.topDiv).width();        jQuery(scroll.topDiv).animate({ scrollLeft: \'+=\' + width },1000);      });      prev.click(function() {        var width = jQuery(scroll.topDiv).width();        jQuery(scroll.topDiv).animate({ scrollLeft: \'-=\' + width },1000);      });      jQuery(scroll.divWrapper).css(\'position\',\'relative\').prepend(prev).append(next);      if (scroll.ScrollHeight) scroll.ScrollHeight.apply(scroll.topDiv);      if (scroll.ScrollWidth) scroll.ScrollWidth.apply(scroll.topDiv,100);    }  });}]]></Javascript></xtml></Component><Component id="CustomStyle" type="itemlist_scroll.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml package="true"><xtml ns="image" jbart="true"><Type id="Image" /><Component id="Image" type="image.Image" execution="native" autoexpand="true"><Param name="Url" script="true" image="true" /><Param name="SecondUrl" description="used when Url is empty" advanced="true" /><Param name="Size" description="width,height" advanced="true" /><Param name="KeepImageProportions" type="data.Boolean" description="relevant only when width and height are entered" advanced="true"><Default value="true"/></Param><Param name="AsDivBackground" type="data.Boolean" advanced="true" Desctrion="Use div with background image" /></Component><Component id="ImageInSprite" type="image.Image" execution="native"><Param name="Url" script="true" image="true" /><Param name="Size" Default="16,16" /><Param name="PositionInSprite" Default="0,0"/><Param name="PositionForHover" advanced="true"/><Param name="PositionForClick" advanced="true"/></Component><Component id="ImageInCss" type="image.Image" execution="native"><Param name="CssClass" /></Component><Component id="ShowImage" type="ui.Control" execution="native"><Param name="Image" /><Param name="Size" /></Component><Type id="Style" style="true" customPT="image.CustomStyle" /><Component id="PlainImage" type="image.Style"><xtml t="image.CustomStyle"><Html><![CDATA[<div/>]]></Html><Javascript><![CDATA[function(image) {  image.setImage(null,image.image);        }]]></Javascript></xtml></Component><Component id="Bootsrap" type="image.Style"><xtml t="image.CustomStyle"><Html><![CDATA[<div/>]]></Html><Css><![CDATA[{ padding: 4px;line-height: 1;border: 1px solid #DDD;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);-moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);}#this:hover {  border-color: #0088cc;  -webkit-box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);  -moz-box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);  box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);}]]></Css><Javascript><![CDATA[function(image) {  image.setImage(null,image.image);        }]]></Javascript></xtml></Component><Component id="YoutubeThumbnail" type="image.Style"><Param name="HoverImage" Default="%$_Images%/video_hover32.png" description="Should be 32x32" /><xtml t="image.CustomStyle"><Html><![CDATA[<div><img class="aa_img" /><div class="aa_playnow"/></div>]]></Html><Css><![CDATA[#this { width:120px; height: 90px; }#this .aa_playnow { display: none;   background: url(\'%$HoverImage%\') center center no-repeat;   margin: -95px -10px; height: 95px; width: 130px;   position: relative; z-index: 100;   opacity: 0.8; filter: alpha(opacity=80); }#this:hover .aa_playnow { display:block; }]]></Css><Javascript><![CDATA[function(image) {  image.setImage(\'.aa_img\',image.image);        }]]></Javascript></xtml></Component><Component id="WhiteFrame" type="image.Style"><xtml t="image.CustomStyle" Javascript="function(image) {&#xa;  image.setImage(null,image.image);        &#xa;}"><Html><![CDATA[<div>]]></Html><Css><![CDATA[#this {  padding: 3px;  border: 1px solid rgb(208,208,208);  background:white;}]]></Css></xtml></Component><Component id="CustomStyle" type="image.Style" customPT="true"><Param name="Html" codemirror="true" light="false"/><Param name="Css" codemirror="true" light="false"/><Param name="Javascript" codemirror="true" light="false"/><ParamGenerator t="bart_dt.StyleGenerator" /><xtml t="ui.CustomStyle" Html="%$Html%" Css="%$Css%" Javascript="%$Javascript%" /></Component></xtml></xtml><xtml ns="ui" jbart="true"><Type id="SinglePage" /><Type id="MultiplePage" /><Type id="Page" /><Type id="PageParams" /><Component id="CustomSinglePage" type="ui.SinglePage,ui.Page" light="false"><Param name="Control" type="ui.Control" script="true"/><xtml t="object.Object"><Method name="Control" t="xtml.UseParam" Param="Control" Input="%$_PageParams/DataItems/Items%" /></xtml></Component><Component id="MultiplePage" type="ui.MultiplePage,ui.Page"><Param name="FieldsFromList"/><Param name="Field" type="field.Fields[]" script="true"/><Param name="Operations" type="operation.Operations" script="true"/><Param name="Presentation" type="uiaspect.ItemListPresentation" script="true" ><Default t="uiaspect.RichTable" /></Param><Param name="Aspect" type="uiaspect.Aspect[]" script="true"/><Param name="ID"/><xtml t="object.Object"><Property name="Fields" t="data.List"><Item t="data.ItemsByIDs" List="%$_Cntr/Fields%" IDs="%$FieldsFromList%"/><Item t="xtml.UseParamArray" Param="Field"/></Property><Method name="Control" t="ui.ItemList" Items="%$_PageParams/DataItems%" ID="%$ID%" DataHolderCntr="true"><Fields value="%$_This/Fields%" /><Operations t="xtml.UseParam" Param="Operations"/><Presentation t="xtml.UseParam" Param="Presentation" /><Aspect t="uiaspect.Permissions" WritableIf="false" Condition="%$_PageParams/ReadOnly%" /><Aspect t="xtml.UseParamArray" Param="Aspect"/><Aspect t="object.RunMethod" Object="%$_PageParams%" Method="Aspect"/></Method></xtml></Component><Component id="ShowPage" type="ui.Control" category="page"><Param name="Page" type="ui.Page"/><Param name="PageParams" type="ui.PageParams"/><xtml t="object.RunMethod" Object="%$Page%" Method="Control"><Var name="_PageParams" value="%$PageParams%"/></xtml></Component><Component id="OpenPage" type="operation.OperationAction"><Param name="Page" type="dynamic_enum" Options="%$_BartContext/Pages/ID%" /><Param name="ItemsToShow" description="E.g. %Items%" /><Param name="SetResultPageFilters" advanced="true" type="data.Boolean"/><Param name="FilterField" advanced="true" description="field id in result page to be filtered by" /><Param name="FilterValue" advanced="true" script="true" description="Value of the item in the original page to be filtered by" /><Param name="OpenIn" type="uiaspect.OpenIn" script="true"><Default t="uiaspect.DetailsInDialog" /></Param><Param name="ReadOnly" type="data.Boolean" advanced="true" /><xtml t="uiaspect.OpenPageFromDetails" ><Page t="bart.PageByID" PageID="%$Page%" /><OpenIn t="xtml.UseParam" Param="OpenIn" /><PageParams t="ui.PageParams" ReadOnly="%$ReadOnly%" ><DataItems t="data_items.Items" Items="%$ItemsToShow%"><Condition t="yesno.NotEmpty" Data="%$ItemsToShow%"/></DataItems><UiPrefs t="xml.WithChanges" Condition="%$SetResultPageFilters%"><Xml t="xml.Xml" /><Change t="xml.SetAttribute" AttributeName="Filter_Field_%$FilterField%"><Value t="xtml.UseParam" Param="FilterValue" /></Change></UiPrefs></PageParams></xtml></Component><Component id="ShowSinglePage" type="ui.Control" category="page" hidden="true"><Param name="Page" type="ui.SinglePage"/><Param name="Item" type="data_items.Items"/><Param name="ReadOnly" type="data.Boolean" /><xtml t="object.RunMethod" Object="%$Page%" Method="Control" ><Var name="_PageParams" t="ui.PageParams" DataItems="%$Item%" ReadOnly="%$ReadOnly%" /></xtml></Component><Component id="ShowMultiplePage" type="ui.Control" category="page" hidden="true"><Param name="Page" type="ui.MultiplePage"/><Param name="Items" type="data_items.Items"/><Param name="ReadOnly" type="data.Boolean" /><xtml t="object.RunMethod" Object="%$Page%" Method="Control"><Var name="_PageParams" t="ui.PageParams" DataItems="%$Items%" ReadOnly="%$ReadOnly%" /></xtml></Component></xtml><xtml ns="uiaspect" jbart="true"><Type id="OpenIn" /><Type id="DetailsToolbar" /><Component id="ItemDetails" type="uiaspect.Aspect" execution="native" description="Defines the item details page and the way to open it"><Param name="ItemPage" type="ui.SinglePage" script="true" description="What to show for item details"/><Param name="OpenIn" type="uiaspect.OpenIn" script="true" description="How to show item details"/><Param name="Transactional" type="data.Boolean" description=""><Default value="true"/></Param><Param name="NewItemPage" type="ui.SinglePage" script="true" description="What to show when creating a new item"/><Param name="OpenNewIn" type="uiaspect.OpenIn" script="true" description="How to show a new item (usually in a dialog)"/><Param name="KeepOpenItemInUrl" type="data.Boolean" advanced="true" description=""><Default value="false"/></Param><Param name="ItemIdentifier" type="data.Boolean" script="true" advanced="true" description=""><Default value="%@id%"/></Param><Param name="FullLoadItem" type="data.Boolean" advanced="true" description=""><Default value="true"/></Param><Param name="PreparePage" type="uiaspect.PreparePage[]" script="true" advanced="true" description=""/><Param name="ChangeItemBeforeOpen" type="action.Action" script="true" advanced="true" description=""/><NativeHelper name="DefaultOpenIn" t="uiaspect.DetailsInDialog"/><NativeHelper name="DefaultItemPage" t="ui.ItemPage" FieldsFromList=""><Field t="data.FirstSucceeding"><Item value="%$_Cntr/Items/FieldsForItemDetails%"/><Item value="%$_Cntr/Fields%"/></Field></NativeHelper></Component><Component id="BottomLocation" type="uiaspect.Aspect" execution="native" jbart="false"><Param name="Css" Default="#this { padding-top: 10px; }" /></Component><Component id="RightLocation" type="uiaspect.Aspect" execution="native" jbart="false" light="false"><Param name="LeftExpandCollpase" type="data.Boolean" /><Param name="Css"><Default><![CDATA[#this>tbody>tr>.aa_left { vertical-align:top; padding-right: 5px; }#this>tbody>tr>.aa_right { padding-left1:22px; vertical-align:top; } ]]></Default></Param></Component><Component id="DoOnSelection" type="uiaspect.Aspect" execution="native"><Param name="Action" type="operation.OperationAction" script="true" /><Param name="DoOnNextTimer" type="data.Boolean" advanced="true" /></Component><Component id="SynchSelectionWithItemDetails" type="uiaspect.Aspect" execution="native" jbart="false"/><Component id="SynchSelectionWithAnotherPresentation" type="uiaspect.Aspect" execution="native" jbart="false"><Param name="FieldID"/></Component><Component id="SaveDetailsAndRefersh" type="action_async.Action" execution="native"><Param name="Item" /></Component><Component id="InDialog" type="uiaspect.OpenIn" jbart="true"><Param name="Style" type="dialog_style.Style"><Default t="dialog_style.DefaultDialog"/></Param><Param name="DialogTitle"/><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="RunOnOK" type="action.Action" script="true" light="false"/><xtml t="dlg.OpenDialog" Style="%$Style%"><Contents value="%$DetailsControl%"/><Title t="text.FirstSucceeding"><Item t="text.Translate" Text="%$DialogTitle%" /><Item t="text.TranslatePattern" Pattern="New %$_Cntr/Items/ItemTypeName%" Condition="%$IsNewItem%"/><Item t="text.TranslatePattern" Pattern="%$_Cntr/Items/ItemTypeName% details" Condition="%$_Cntr/ReadOnly%"/><Item t="text.TranslatePattern" Pattern="Edit %$_Cntr/Items/ItemTypeName%"/></Title><Feature t="dlg.NoCancel" Condition="%$_Cntr/ReadOnly%"/><Feature t="dlg.RunBeforeOK"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Save" /></Feature><Feature t="dlg.RunOnCancel"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel"/></Feature><Feature t="xtml.UseParamArray" Param="Feature"/><RunOnOK t="action_async.RunAsync"><Action t="xtml.UseParam" Param="RunOnOK" /></RunOnOK></xtml></Component><Component id="ExpandAllText" type="uiaspect.OpenIn" execution="native"><NativeHelper name="Open" t="action_async.RunAsync"><Action t="uiaspect.SaveDetailsAndRefersh" /></NativeHelper><NativeHelper name="Elem" t="data.IfThenElse" If="%$IsNewItem%" ><Then t="data.Pipeline"><Item t="uiaspect.ContainerElements" /><Aggregator t="data.Last" /></Then><Else t="uiaspect.SelectedElement" /></NativeHelper></Component><Component id="DetailsReplacingAll" type="uiaspect.OpenIn" execution="native"><Param name="TitleForBack"><Default value="Back" /></Param><Param name="TitleForCreate"><Default value="Create" /></Param><Param name="TitleForCancel"><Default value="Cancel" /></Param><Param name="ButtonsStyle" type="button.Style" ><Default t="button.Hyperlink" /></Param><Param name="AutoToolbar" type="data.Boolean"><Default value="true"/></Param><Param name="Transition" type="transition.Transition" /><Param name="TransitionBack" type="transition.Transition" /><Param name="ToolbarStyle" type="header.Style" advanced="true" script="true"><Default t="header.SimpleHeader" /></Param><NativeHelper name="TopControl" t="ui.List" Condition="%$AutoToolbar%"><Layout t="ui.LineBreak" IncludeSpacing="false" /><Control t="ui.Text" Text="%$ItemDetailsTitle%" /><Control t="ui.IfThenElse" If="%$IsNewItem%"><Else t="field.ShowFieldControl"><Field t="field.Group" ><Layout t="uiaspect.Group"><Style t="xtml.UseParam" Param="ToolbarStyle" /></Layout><GroupData t="group.DataFlow" FlowData="%%"/><Field t="field.Button" ID="Save" Title="Save" Condition="%$_ItemDetailsObject/HasSave%" Style="%$ButtonsStyle%"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Save"><Condition t="validation.PassingValidations" RunOn="up(.aa_replacingall)" /></Action></Field><Field t="field.Button" ID="Back" Title="%$TitleForBack%" Style="%$ButtonsStyle%"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="SaveAndClose" /></Field><Field t="field.Button" ID="Cancel" Title="%$TitleForCancel%" Condition="%$_ItemDetailsObject/HasSave%" Style="%$ButtonsStyle%"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel" /></Field></Field></Else><Then t="field.ShowFieldControl"><Field t="field.Group" ><Layout t="uiaspect.Group"><Style t="xtml.UseParam" Param="ToolbarStyle" /><Field t="field.Button" ID="Create" Title="%$TitleForCreate%" Style="%$ButtonsStyle%"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Save" /><Condition t="validation.PassingValidations" RunOn="up(.aa_replacingall)" /></Field><Field t="field.Button" ID="Cancel" Title="%$TitleForCancel%" Style="%$ButtonsStyle%"><Action t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel" /></Field></Layout></Field></Then></Control></NativeHelper></Component><Component id="AutoOpenItemDetails" type="uiaspect.Aspect" execution="native" jbart="false"><Param name="IsDetailsShown" type="data.ValueByRef" /><Param name="BeforeOpenDetails" type="action.Action" /><Param name="OnBackToList" type="action.Action" /><Param name="DetailToShow" script="true" /></Component><Component id="DetailsInplace" type="uiaspect.OpenIn" execution="native"><Param name="InplaceToolbar" type="uiaspect.DetailsToolbar" script="true"><Default t="uiaspect.DetailsToolbar" /></Param><Param name="ToolbarLocation" type="enum" Options="top,bottom"><Default value="bottom"/></Param><Param name="CssForDetails" cssdesigner="true" /><Param name="AutoOpenWhenZooming" type="enum" Options="none,1000,800,600,400,300,200"><Default value="none"/></Param><Param name="Buttons" type="ui.Control" advanced="true" decsription="old"><Default t="ui.List"><Control t="ui.Button" Text="Close" Image="%$_Images%/studio/save1616.gif" Class="details_inplace_close"><Style t="ui.ButtonAsHyperlink"/><OnClick t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="SaveAndClose"/></Control><Control t="ui.Button" Text="Cancel" Image="%$_Images%/delete1616.gif" Class="details_inplace_cancel"><Style t="ui.ButtonAsHyperlink"/><OnClick t="object.RunMethod" Object="%$_ItemDetailsObject%" Method="Cancel"/></Control><Layout t="ui.ButtonsLayout"/></Default></Param><Param name="CloseInplaceSiblings" type="data.Boolean" /></Component><Component id="DetailsInFixedLocation" type="uiaspect.OpenIn" execution="native"><Param name="Location" type="enum"><Default value="bottom" /><value>bottom</value><value>right</value></Param></Component><Component id="DetailsInExternalLocation" type="uiaspect.OpenIn" execution="native"><Param name="FieldID" /></Component><Component id="DetailsAtRight" type="uiaspect.OpenIn" execution="native"><Param name="IncludeSplitter" type="data.Boolean" /></Component><Component id="ShowItemInItemList" type="ui.Control" execution="native" Comment="should become an aspect"><Param name="ItemList" type="ui.Control" /><Param name="ShowOnlyItem" type="data.Boolean" /><Param name="InnerItems" type="data_items.Items" /></Component><Component id="OpenPageFromDetails" type="action.Action" execution="native"><Param name="Page" type="ui.MultiplePage" script="true" /><Param name="OpenIn" type="uiaspect.OpenIn" script="true" /><Param name="PageParams" script="true" description="gets the item as input" /></Component><Component id="DetailsToolbar" type="uiaspect.DetailsToolbar"><Param name="Operation" type="operation.Operations[]"><Field t="field.CustomControl"><Control t="uiaspect_dt.EditOperationsTable" /></Field></Param><Param name="ButtonStyle" type="ui.ButtonStyle" script="true"><Default t="ui.ButtonAsHyperlink" /></Param><xtml t="ui.DynamicList" Items="%$Operation%"><Control t="ui.Button" Class="aa_operation %Id%"><Image t="object.RunMethod" Method="Icon" Input="%$_ItemsOfOperation%" /><Text t="object.RunMethod" Method="Title" Input="%$_ItemsOfOperation%" /><OnClick t="object.RunMethod" Method="Action" Input="%$_ItemsOfOperation%" /><Style t="xtml.UseParam" Param="ButtonStyle" /></Control><Layout t="ui.ButtonsLayout" /></xtml></Component><Component id="PopupOnHover" type="uiaspect.Aspect" execution="native"><Param name="Page" type="ui.Page" /><Param name="Feature" type="dlg.DialogFeature[]" script="true"/><Param name="NoPopupIf" type="data.Boolean" description="Allows opening popup only for some items" script="true" /><NativeHelper name="OpenPopup" t="dlg.OpenDialog"><Style t="dialog_style.DefaultPopup" /><Condition t="yesno.Not"><Of t="xtml.UseParam" Param="NoPopupIf" /></Condition><Contents t="ui.ShowPage" Page="%$Page%"><PageParams t="ui.PageParams" ReadOnly="true"><DataItems t="data_items.Items" Items="%%" /></PageParams></Contents><Feature t="dlg.UniquePopup" Identifier="onhover" /><Feature t="xtml.UseParamArray" Param="Feature" /></NativeHelper></Component></xtml><xtml ns="uipref" jbart="true"><Type id="UIPreferences" /><Component id="SimpleUIPreferences" type="uipref.UIPreferences"><Param name="Xml"/><xtml t="object.Object"><Method name="GetProperty" t="data.Pipeline"><Item value="%$Xml%"/><Item value="%{$Prefix}%"/><Item value="%@{$Property}%"/></Method><Method name="SetProperty" t="action.WriteValue" Value="%$Value%"><To t="data.Pipeline"><Item value="%$Xml%"/><Item value="%!{$Prefix}%"/><Item value="%!@{$Property}%"/></To></Method></xtml></Component><Component id="InCookies" type="uipref.UIPreferences" execution="native" /><Component id="PrefValue" type="data.Data" execution="native" ><Param name="Prefix" /><Param name="Property" /></Component><Component id="SetPrefValue" type="action.Action" execution="native" ><Param name="Prefix" /><Param name="Property" /><Param name="Value" /></Component><Component id="CleanPrefValues" type="action.Action"><Param name="Prefix" /><xtml t="object.RunMethod" Object="%$_UIPref%" Method="CleanPrefValues"><Var name="Prefix" value="%$Prefix%" /></xtml></Component><Component id="OverrideUIPrefs" type="action.Action"><Param name="UIPrefs" /><Param name="Prefix" /><xtml t="action.RunActionOnItems" ><Items t="xml.Attributes" AlsoEmpty="false" Data="%$UIPrefs%"/><Action t="uipref.SetPrefValue" Prefix="%$Prefix%" Value="%%"><Property t="xml.AttributeName" /></Action></xtml></Component></xtml></xtml> '));
